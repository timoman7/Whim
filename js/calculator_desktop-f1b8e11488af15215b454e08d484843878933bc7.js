var requirejs,require,define;!function(e){function t(e,t){return v.call(e,t)}function n(e,t){var n,i,r,s,a,o,c,l,u,h,d=t&&t.split("/"),p=m.map,f=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(d=d.slice(0,d.length-1),e=d.concat(e.split("/")),l=0;l<e.length;l+=1)if(h=e[l],"."===h)e.splice(l,1),l-=1;else if(".."===h){if(1===l&&(".."===e[2]||".."===e[0]))break;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||f)&&p){for(n=e.split("/"),l=n.length;l>0;l-=1){if(i=n.slice(0,l).join("/"),d)for(u=d.length;u>0;u-=1)if(r=p[d.slice(0,u).join("/")],r&&(r=r[i])){s=r,a=l;break}if(s)break;!o&&f&&f[i]&&(o=f[i],c=l)}!s&&o&&(s=o,a=c),s&&(n.splice(0,a,s),e=n.join("/"))}return e}function i(t,n){return function(){return u.apply(e,y.call(arguments,0).concat([t,n]))}}function r(e){return function(t){return n(t,e)}}function s(e){return function(t){p[e]=t}}function a(n){if(t(f,n)){var i=f[n];delete f[n],g[n]=!0,l.apply(e,i)}if(!t(p,n)&&!t(g,n))throw new Error("No "+n);return p[n]}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function c(e){return function(){return m&&m.config&&m.config[e]||{}}}var l,u,h,d,p={},f={},m={},g={},v=Object.prototype.hasOwnProperty,y=[].slice;h=function(e,t){var i,s=o(e),c=s[0];return e=s[1],c&&(c=n(c,t),i=a(c)),c?e=i&&i.normalize?i.normalize(e,r(t)):n(e,t):(e=n(e,t),s=o(e),c=s[0],e=s[1],c&&(i=a(c))),{f:c?c+"!"+e:e,n:e,pr:c,p:i}},d={require:function(e){return i(e)},exports:function(e){var t=p[e];return"undefined"!=typeof t?t:p[e]={}},module:function(e){return{id:e,uri:"",exports:p[e],config:c(e)}}},l=function(n,r,o,c){var l,u,m,v,y,b,_=[];if(c=c||n,"function"==typeof o){for(r=!r.length&&o.length?["require","exports","module"]:r,y=0;y<r.length;y+=1)if(v=h(r[y],c),u=v.f,"require"===u)_[y]=d.require(n);else if("exports"===u)_[y]=d.exports(n),b=!0;else if("module"===u)l=_[y]=d.module(n);else if(t(p,u)||t(f,u)||t(g,u))_[y]=a(u);else{if(!v.p)throw new Error(n+" missing "+u);v.p.load(v.n,i(c,!0),s(u),{}),_[y]=p[u]}m=o.apply(p[n],_),n&&(l&&l.exports!==e&&l.exports!==p[n]?p[n]=l.exports:m===e&&b||(p[n]=m))}else n&&(p[n]=o)},requirejs=require=u=function(t,n,i,r,s){return"string"==typeof t?d[t]?d[t](n):a(h(t,n).f):(t.splice||(m=t,n.splice?(t=n,n=i,i=null):t=e),n=n||function(){},"function"==typeof i&&(i=r,r=s),r?l(e,t,n,i):setTimeout(function(){l(e,t,n,i)},4),u)},u.config=function(e){return m=e,m.deps&&u(m.deps,m.callback),u},define=function(e,n,i){n.splice||(i=n,n=[]),t(p,e)||t(f,e)||(f[e]=[e,n,i])},define.amd={jQuery:!0}}(),"undefined"!=typeof ALMOND_OVERRIDES&&ALMOND_OVERRIDES&&(define=ALMOND_OVERRIDES.define||define,require=ALMOND_OVERRIDES.require||require,requirejs=ALMOND_OVERRIDES.requirejs||requirejs),define("vendor/almond",function(){}),define("testbridge",["require"],function(e){var t={ready:function(){window.TestBridge=t}};return t}),define("ipad.ghostevents",["require"],function(e){function t(e){i&&(e.stopPropagation(),e.stopImmediatePropagation())}function n(e){i&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}var i=!1,r=null,s={isGhostEvent:function(e){return!1}};return document.addEventListener("mousedown",function(e){r=document.activeElement,i=s.isGhostEvent(e),t(e)},!0),document.addEventListener("mouseup",t,!0),document.addEventListener("click",function(e){n(e),i&&document.activeElement!==r&&(document.activeElement&&document.activeElement.blur(),r&&r.focus()),i=!1},!0),document.addEventListener("focus",n,!0),document.addEventListener("blur",n,!0),s}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t="length"in e&&e.length,n=J.type(e);return"function"===n||J.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(J.isFunction(t))return J.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return J.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(oe.test(t))return J.filter(t,e,n);t=J.filter(t,e)}return J.grep(e,function(e){return H.call(t,e)>=0!==n})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function s(e){var t=fe[e]={};return J.each(e.match(pe)||[],function(e,n){t[n]=!0}),t}function a(){K.removeEventListener("DOMContentLoaded",a,!1),e.removeEventListener("load",a,!1),J.ready()}function o(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=J.expando+o.uid++}function c(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(_e,"-$1").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:be.test(n)?J.parseJSON(n):n}catch(r){}ye.set(e,t,n)}else n=void 0;return n}function l(){return!0}function u(){return!1}function h(){try{return K.activeElement}catch(e){}}function d(e,t){return J.nodeName(e,"table")&&J.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=Ne.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var n=0,i=e.length;i>n;n++)ve.set(e[n],"globalEval",!t||ve.get(t[n],"globalEval"))}function g(e,t){var n,i,r,s,a,o,c,l;if(1===t.nodeType){if(ve.hasData(e)&&(s=ve.access(e),a=ve.set(t,s),l=s.events)){delete a.handle,a.events={};for(r in l)for(n=0,i=l[r].length;i>n;n++)J.event.add(t,r,l[r][n])}ye.hasData(e)&&(o=ye.access(e),c=J.extend({},o),ye.set(t,c))}}function v(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&J.nodeName(e,t)?J.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ke.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function b(t,n){var i,r=J(n.createElement(t)).appendTo(n.body),s=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(r[0]))?i.display:J.css(r[0],"display");return r.detach(),s}function _(e){var t=K,n=Re[e];return n||(n=b(e,t),"none"!==n&&n||(Ve=(Ve||J("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ve[0].contentDocument,t.write(),t.close(),n=b(e,t),Ve.detach()),Re[e]=n),n}function x(e,t,n){var i,r,s,a,o=e.style;return n=n||Ge(e),n&&(a=n.getPropertyValue(t)||n[t]),n&&(""!==a||J.contains(e.ownerDocument,e)||(a=J.style(e,t)),Be.test(a)&&$e.test(t)&&(i=o.width,r=o.minWidth,s=o.maxWidth,o.minWidth=o.maxWidth=o.width=a,a=n.width,o.width=i,o.minWidth=r,o.maxWidth=s)),void 0!==a?a+"":a}function w(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function S(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),i=t,r=Xe.length;r--;)if(t=Xe[r]+n,t in e)return t;return i}function k(e,t,n){var i=Ue.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function E(e,t,n,i,r){for(var s=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>s;s+=2)"margin"===n&&(a+=J.css(e,n+we[s],!0,r)),i?("content"===n&&(a-=J.css(e,"padding"+we[s],!0,r)),"margin"!==n&&(a-=J.css(e,"border"+we[s]+"Width",!0,r))):(a+=J.css(e,"padding"+we[s],!0,r),"padding"!==n&&(a+=J.css(e,"border"+we[s]+"Width",!0,r)));return a}function T(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,s=Ge(e),a="border-box"===J.css(e,"boxSizing",!1,s);if(0>=r||null==r){if(r=x(e,t,s),(0>r||null==r)&&(r=e.style[t]),Be.test(r))return r;i=a&&(Q.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+E(e,t,n||(a?"border":"content"),i,s)+"px"}function C(e,t){for(var n,i,r,s=[],a=0,o=e.length;o>a;a++)i=e[a],i.style&&(s[a]=ve.get(i,"olddisplay"),n=i.style.display,t?(s[a]||"none"!==n||(i.style.display=""),""===i.style.display&&Se(i)&&(s[a]=ve.access(i,"olddisplay",_(i.nodeName)))):(r=Se(i),"none"===n&&r||ve.set(i,"olddisplay",r?n:J.css(i,"display"))));for(a=0;o>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?s[a]||"":"none"));return e}function M(e,t,n,i,r){return new M.prototype.init(e,t,n,i,r)}function P(){return setTimeout(function(){Qe=void 0}),Qe=J.now()}function A(e,t){var n,i=0,r={height:e};for(t=t?1:0;4>i;i+=2-t)n=we[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function I(e,t,n){for(var i,r=(nt[t]||[]).concat(nt["*"]),s=0,a=r.length;a>s;s++)if(i=r[s].call(n,t,e))return i}function q(e,t,n){var i,r,s,a,o,c,l,u,h=this,d={},p=e.style,f=e.nodeType&&Se(e),m=ve.get(e,"fxshow");n.queue||(o=J._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,c=o.empty.fire,o.empty.fire=function(){o.unqueued||c()}),o.unqueued++,h.always(function(){h.always(function(){o.unqueued--,J.queue(e,"fx").length||o.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],l=J.css(e,"display"),u="none"===l?ve.get(e,"olddisplay")||_(e.nodeName):l,"inline"===u&&"none"===J.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],Ze.exec(r)){if(delete t[i],s=s||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;f=!0}d[i]=m&&m[i]||J.style(e,i)}else l=void 0;if(J.isEmptyObject(d))"inline"===("none"===l?_(e.nodeName):l)&&(p.display=l);else{m?"hidden"in m&&(f=m.hidden):m=ve.access(e,"fxshow",{}),s&&(m.hidden=!f),f?J(e).show():h.done(function(){J(e).hide()}),h.done(function(){var t;ve.remove(e,"fxshow");for(t in d)J.style(e,t,d[t])});for(i in d)a=I(f?m[i]:0,i,h),i in m||(m[i]=a.start,f&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function D(e,t){var n,i,r,s,a;for(n in e)if(i=J.camelCase(n),r=t[i],s=e[n],J.isArray(s)&&(r=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),a=J.cssHooks[i],a&&"expand"in a){s=a.expand(s),delete e[i];for(n in s)n in e||(e[n]=s[n],t[n]=r)}else t[i]=r}function L(e,t,n){var i,r,s=0,a=tt.length,o=J.Deferred().always(function(){delete c.elem}),c=function(){if(r)return!1;for(var t=Qe||P(),n=Math.max(0,l.startTime+l.duration-t),i=n/l.duration||0,s=1-i,a=0,c=l.tweens.length;c>a;a++)l.tweens[a].run(s);return o.notifyWith(e,[l,s,n]),1>s&&c?n:(o.resolveWith(e,[l]),!1)},l=o.promise({elem:e,props:J.extend({},t),opts:J.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Qe||P(),duration:n.duration,tweens:[],createTween:function(t,n){var i=J.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,i=t?l.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)l.tweens[n].run(1);return t?o.resolveWith(e,[l,t]):o.rejectWith(e,[l,t]),this}}),u=l.props;for(D(u,l.opts.specialEasing);a>s;s++)if(i=tt[s].call(l,e,u,l.opts))return i;return J.map(u,I,l),J.isFunction(l.opts.start)&&l.opts.start.call(e,l),J.fx.timer(J.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function O(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,s=t.toLowerCase().match(pe)||[];if(J.isFunction(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function N(e,t,n,i){function r(o){var c;return s[o]=!0,J.each(e[o]||[],function(e,o){var l=o(t,n,i);return"string"!=typeof l||a||s[l]?a?!(c=l):void 0:(t.dataTypes.unshift(l),r(l),!1)}),c}var s={},a=e===bt;return r(t.dataTypes[0])||!s["*"]&&r("*")}function F(e,t){var n,i,r=J.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&J.extend(!0,e,i),e}function j(e,t,n){for(var i,r,s,a,o=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in o)if(o[r]&&o[r].test(i)){c.unshift(r);break}if(c[0]in n)s=c[0];else{for(r in n){if(!c[0]||e.converters[r+" "+c[0]]){s=r;break}a||(a=r)}s=s||a}return s?(s!==c[0]&&c.unshift(s),n[s]):void 0}function V(e,t,n,i){var r,s,a,o,c,l={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(s=u.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=s,s=u.shift())if("*"===s)s=c;else if("*"!==c&&c!==s){if(a=l[c+" "+s]||l["* "+s],!a)for(r in l)if(o=r.split(" "),o[1]===s&&(a=l[c+" "+o[0]]||l["* "+o[0]])){a===!0?a=l[r]:l[r]!==!0&&(s=o[0],u.unshift(o[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(h){return{state:"parsererror",error:a?h:"No conversion from "+c+" to "+s}}}return{state:"success",data:t}}function R(e,t,n,i){var r;if(J.isArray(t))J.each(t,function(t,r){n||kt.test(e)?i(e,r):R(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==J.type(t))i(e,t);else for(r in t)R(e+"["+r+"]",t[r],n,i)}function $(e){return J.isWindow(e)?e:9===e.nodeType&&e.defaultView}var B=[],G=B.slice,z=B.concat,U=B.push,H=B.indexOf,W={},Y=W.toString,X=W.hasOwnProperty,Q={},K=e.document,Z="2.1.4",J=function(e,t){return new J.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ne=/-([\da-z])/gi,ie=function(e,t){return t.toUpperCase()};J.fn=J.prototype={jquery:Z,constructor:J,selector:"",length:0,toArray:function(){return G.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:G.call(this)},pushStack:function(e){var t=J.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return J.each(this,e,t)},map:function(e){return this.pushStack(J.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(G.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:B.sort,splice:B.splice},J.extend=J.fn.extend=function(){var e,t,n,i,r,s,a=arguments[0]||{},o=1,c=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[o]||{},o++),"object"==typeof a||J.isFunction(a)||(a={}),o===c&&(a=this,o--);c>o;o++)if(null!=(e=arguments[o]))for(t in e)n=a[t],i=e[t],a!==i&&(l&&i&&(J.isPlainObject(i)||(r=J.isArray(i)))?(r?(r=!1,s=n&&J.isArray(n)?n:[]):s=n&&J.isPlainObject(n)?n:{},a[t]=J.extend(l,s,i)):void 0!==i&&(a[t]=i));return a},J.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===J.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!J.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==J.type(e)||e.nodeType||J.isWindow(e)?!1:e.constructor&&!X.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?W[Y.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=J.trim(e),e&&(1===e.indexOf("use strict")?(t=K.createElement("script"),t.text=e,K.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ne,ie)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,s=0,a=e.length,o=n(e);if(i){if(o)for(;a>s&&(r=t.apply(e[s],i),r!==!1);s++);else for(s in e)if(r=t.apply(e[s],i),r===!1)break}else if(o)for(;a>s&&(r=t.call(e[s],s,e[s]),r!==!1);s++);else for(s in e)if(r=t.call(e[s],s,e[s]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?J.merge(i,"string"==typeof e?[e]:e):U.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:H.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],s=0,a=e.length,o=!n;a>s;s++)i=!t(e[s],s),i!==o&&r.push(e[s]);return r},map:function(e,t,i){var r,s=0,a=e.length,o=n(e),c=[];if(o)for(;a>s;s++)r=t(e[s],s,i),null!=r&&c.push(r);else for(s in e)r=t(e[s],s,i),null!=r&&c.push(r);return z.apply([],c)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(n=e[t],t=e,e=n),J.isFunction(e)?(i=G.call(arguments,2),r=function(){return e.apply(t||this,i.concat(G.call(arguments)))},r.guid=e.guid=e.guid||J.guid++,r):void 0},now:Date.now,support:Q}),J.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){W["[object "+t+"]"]=t.toLowerCase()});var re=function(e){function t(e,t,n,i){var r,s,a,o,c,l,h,p,f,m;if((t?t.ownerDocument||t:R)!==q&&I(t),t=t||q,n=n||[],o=t.nodeType,"string"!=typeof e||!e||1!==o&&9!==o&&11!==o)return n;if(!i&&L){if(11!==o&&(r=ye.exec(e)))if(a=r[1]){if(9===o){if(s=t.getElementById(a),!s||!s.parentNode)return n;if(s.id===a)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(a))&&j(t,s)&&s.id===a)return n.push(s),n}else{if(r[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((a=r[3])&&x.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(a)),n}if(x.qsa&&(!O||!O.test(e))){if(p=h=V,f=t,m=1!==o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(l=E(e),(h=t.getAttribute("id"))?p=h.replace(_e,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",c=l.length;c--;)l[c]=p+d(l[c]);f=be.test(e)&&u(t.parentNode)||t,m=l.join(",")}if(m)try{return Z.apply(n,f.querySelectorAll(m)),n}catch(g){}finally{h||t.removeAttribute("id")}}}return C(e.replace(ce,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>w.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[V]=!0,e}function r(e){var t=q.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var n=e.split("|"),i=e.length;i--;)w.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||W)-(~e.sourceIndex||W);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function o(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return i(function(t){return t=+t,i(function(n,i){for(var r,s=e([],n.length,t),a=s.length;a--;)n[r=s[a]]&&(n[r]=!(i[r]=n[r]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function h(){}function d(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,r=n&&"parentNode"===i,s=B++;return t.first?function(t,n,s){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,s)}:function(t,n,a){var o,c,l=[$,s];if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(c=t[V]||(t[V]={}),(o=c[i])&&o[0]===$&&o[1]===s)return l[2]=o[2];if(c[i]=l,l[2]=e(t,n,a))return!0}}}function f(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,s=n.length;s>r;r++)t(e,n[r],i);return i}function g(e,t,n,i,r){for(var s,a=[],o=0,c=e.length,l=null!=t;c>o;o++)(s=e[o])&&(!n||n(s,i,r))&&(a.push(s),l&&t.push(o));return a}function v(e,t,n,r,s,a){return r&&!r[V]&&(r=v(r)),s&&!s[V]&&(s=v(s,a)),i(function(i,a,o,c){var l,u,h,d=[],p=[],f=a.length,v=i||m(t||"*",o.nodeType?[o]:o,[]),y=!e||!i&&t?v:g(v,d,e,o,c),b=n?s||(i?e:f||r)?[]:a:y;if(n&&n(y,b,o,c),r)for(l=g(b,p),r(l,[],o,c),u=l.length;u--;)(h=l[u])&&(b[p[u]]=!(y[p[u]]=h));if(i){if(s||e){if(s){for(l=[],u=b.length;u--;)(h=b[u])&&l.push(y[u]=h);s(null,b=[],l,c)}for(u=b.length;u--;)(h=b[u])&&(l=s?ee(i,h):d[u])>-1&&(i[l]=!(a[l]=h))}}else b=g(b===a?b.splice(f,b.length):b),s?s(null,a,b,c):Z.apply(a,b)})}function y(e){for(var t,n,i,r=e.length,s=w.relative[e[0].type],a=s||w.relative[" "],o=s?1:0,c=p(function(e){return e===t},a,!0),l=p(function(e){return ee(t,e)>-1},a,!0),u=[function(e,n,i){var r=!s&&(i||n!==M)||((t=n).nodeType?c(e,n,i):l(e,n,i));return t=null,r}];r>o;o++)if(n=w.relative[e[o].type])u=[p(f(u),n)];else{if(n=w.filter[e[o].type].apply(null,e[o].matches),n[V]){for(i=++o;r>i&&!w.relative[e[i].type];i++);return v(o>1&&f(u),o>1&&d(e.slice(0,o-1).concat({value:" "===e[o-2].type?"*":""})).replace(ce,"$1"),n,i>o&&y(e.slice(o,i)),r>i&&y(e=e.slice(i)),r>i&&d(e))}u.push(n)}return f(u)}function b(e,n){var r=n.length>0,s=e.length>0,a=function(i,a,o,c,l){var u,h,d,p=0,f="0",m=i&&[],v=[],y=M,b=i||s&&w.find.TAG("*",l),_=$+=null==y?1:Math.random()||.1,x=b.length;for(l&&(M=a!==q&&a);f!==x&&null!=(u=b[f]);f++){if(s&&u){for(h=0;d=e[h++];)if(d(u,a,o)){c.push(u);break}l&&($=_)}r&&((u=!d&&u)&&p--,i&&m.push(u))}if(p+=f,r&&f!==p){for(h=0;d=n[h++];)d(m,v,a,o);if(i){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=Q.call(c));v=g(v)}Z.apply(c,v),l&&!i&&v.length>0&&p+n.length>1&&t.uniqueSort(c)}return l&&($=_,M=y),m};return r?i(a):a}var _,x,w,S,k,E,T,C,M,P,A,I,q,D,L,O,N,F,j,V="sizzle"+1*new Date,R=e.document,$=0,B=0,G=n(),z=n(),U=n(),H=function(e,t){return e===t&&(A=!0),0},W=1<<31,Y={}.hasOwnProperty,X=[],Q=X.pop,K=X.push,Z=X.push,J=X.slice,ee=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=ie.replace("w","w#"),se="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",ae=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+se+")*)|.*)\\)|)",oe=new RegExp(ne+"+","g"),ce=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),he=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(ae),pe=new RegExp("^"+re+"$"),fe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie.replace("w","w*")+")"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,_e=/'|\\/g,xe=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Se=function(){I()};try{Z.apply(X=J.call(R.childNodes),R.childNodes),X[R.childNodes.length].nodeType}catch(ke){Z={apply:X.length?function(e,t){K.apply(e,J.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}x=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},I=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:R;return i!==q&&9===i.nodeType&&i.documentElement?(q=i,D=i.documentElement,n=i.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Se,!1):n.attachEvent&&n.attachEvent("onunload",Se)),L=!k(i),x.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=r(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=ve.test(i.getElementsByClassName),x.getById=r(function(e){return D.appendChild(e).id=V,!i.getElementsByName||!i.getElementsByName(V).length}),x.getById?(w.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&L){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},w.filter.ID=function(e){var t=e.replace(xe,we);return function(e){return e.getAttribute("id")===t}}):(delete w.find.ID,w.filter.ID=function(e){var t=e.replace(xe,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),w.find.TAG=x.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},w.find.CLASS=x.getElementsByClassName&&function(e,t){return L?t.getElementsByClassName(e):void 0},N=[],O=[],(x.qsa=ve.test(i.querySelectorAll))&&(r(function(e){D.appendChild(e).innerHTML="<a id='"+V+"'></a><select id='"+V+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||O.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+V+"-]").length||O.push("~="),e.querySelectorAll(":checked").length||O.push(":checked"),e.querySelectorAll("a#"+V+"+*").length||O.push(".#.+[+~]")}),r(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&O.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(x.matchesSelector=ve.test(F=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&r(function(e){x.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),N.push("!=",ae)}),O=O.length&&new RegExp(O.join("|")),N=N.length&&new RegExp(N.join("|")),t=ve.test(D.compareDocumentPosition),j=t||ve.test(D.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},H=t?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!x.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===R&&j(R,e)?-1:t===i||t.ownerDocument===R&&j(R,t)?1:P?ee(P,e)-ee(P,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,r=0,s=e.parentNode,o=t.parentNode,c=[e],l=[t];if(!s||!o)return e===i?-1:t===i?1:s?-1:o?1:P?ee(P,e)-ee(P,t):0;if(s===o)return a(e,t);for(n=e;n=n.parentNode;)c.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;c[r]===l[r];)r++;return r?a(c[r],l[r]):c[r]===R?-1:l[r]===R?1:0},i):q},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==q&&I(e),n=n.replace(he,"='$1']"),x.matchesSelector&&L&&(!N||!N.test(n))&&(!O||!O.test(n)))try{var i=F.call(e,n);if(i||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,q,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==q&&I(e),j(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==q&&I(e);var n=w.attrHandle[t.toLowerCase()],i=n&&Y.call(w.attrHandle,t.toLowerCase())?n(e,t,!L):void 0;return void 0!==i?i:x.attributes||!L?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(A=!x.detectDuplicates,P=!x.sortStable&&e.slice(0),e.sort(H),A){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return P=null,e},S=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=S(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=S(t);return n},w=t.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xe,we),e[3]=(e[3]||e[4]||e[5]||"").replace(xe,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=E(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xe,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=G[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&G(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var s=t.attr(r,e);return null==s?"!="===n:n?(s+="","="===n?s===i:"!="===n?s!==i:"^="===n?i&&0===s.indexOf(i):"*="===n?i&&s.indexOf(i)>-1:"$="===n?i&&s.slice(-i.length)===i:"~="===n?(" "+s.replace(oe," ")+" ").indexOf(i)>-1:"|="===n?s===i||s.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var s="nth"!==e.slice(0,3),a="last"!==e.slice(-4),o="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,c){var l,u,h,d,p,f,m=s!==a?"nextSibling":"previousSibling",g=t.parentNode,v=o&&t.nodeName.toLowerCase(),y=!c&&!o;if(g){if(s){for(;m;){for(h=t;h=h[m];)if(o?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&y){for(u=g[V]||(g[V]={}),l=u[e]||[],p=l[0]===$&&l[1],d=l[0]===$&&l[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===t){u[e]=[$,p,d];break}}else if(y&&(l=(t[V]||(t[V]={}))[e])&&l[0]===$)d=l[1];else for(;(h=++p&&h&&h[m]||(d=p=0)||f.pop())&&((o?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(y&&((h[V]||(h[V]={}))[e]=[$,d]),h!==t)););return d-=r,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(e,n){var r,s=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[V]?s(n):s.length>1?(r=[e,e,"",n],w.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=s(e,n),a=r.length;a--;)i=ee(e,r[a]),e[i]=!(t[i]=r[a])}):function(e){return s(e,0,r)}):s}},pseudos:{not:i(function(e){var t=[],n=[],r=T(e.replace(ce,"$1"));return r[V]?i(function(e,t,n,i){for(var s,a=r(e,null,i,[]),o=e.length;o--;)(s=a[o])&&(e[o]=!(t[o]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(xe,we),function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:i(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(xe,we).toLowerCase(),function(t){var n;do if(n=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===D},focus:function(e){return e===q.activeElement&&(!q.hasFocus||q.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;
return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:l(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},w.pseudos.nth=w.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[_]=o(_);for(_ in{submit:!0,reset:!0})w.pseudos[_]=c(_);return h.prototype=w.filters=w.pseudos,w.setFilters=new h,E=t.tokenize=function(e,n){var i,r,s,a,o,c,l,u=z[e+" "];if(u)return n?0:u.slice(0);for(o=e,c=[],l=w.preFilter;o;){(!i||(r=le.exec(o)))&&(r&&(o=o.slice(r[0].length)||o),c.push(s=[])),i=!1,(r=ue.exec(o))&&(i=r.shift(),s.push({value:i,type:r[0].replace(ce," ")}),o=o.slice(i.length));for(a in w.filter)!(r=fe[a].exec(o))||l[a]&&!(r=l[a](r))||(i=r.shift(),s.push({value:i,type:a,matches:r}),o=o.slice(i.length));if(!i)break}return n?o.length:o?t.error(e):z(e,c).slice(0)},T=t.compile=function(e,t){var n,i=[],r=[],s=U[e+" "];if(!s){for(t||(t=E(e)),n=t.length;n--;)s=y(t[n]),s[V]?i.push(s):r.push(s);s=U(e,b(r,i)),s.selector=e}return s},C=t.select=function(e,t,n,i){var r,s,a,o,c,l="function"==typeof e&&e,h=!i&&E(e=l.selector||e);if(n=n||[],1===h.length){if(s=h[0]=h[0].slice(0),s.length>2&&"ID"===(a=s[0]).type&&x.getById&&9===t.nodeType&&L&&w.relative[s[1].type]){if(t=(w.find.ID(a.matches[0].replace(xe,we),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(r=fe.needsContext.test(e)?0:s.length;r--&&(a=s[r],!w.relative[o=a.type]);)if((c=w.find[o])&&(i=c(a.matches[0].replace(xe,we),be.test(s[0].type)&&u(t.parentNode)||t))){if(s.splice(r,1),e=i.length&&d(s),!e)return Z.apply(n,i),n;break}}return(l||T(e,h))(i,t,!L,n,be.test(e)&&u(t.parentNode)||t),n},x.sortStable=V.split("").sort(H).join("")===V,x.detectDuplicates=!!A,I(),x.sortDetached=r(function(e){return 1&e.compareDocumentPosition(q.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||s(te,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);J.find=re,J.expr=re.selectors,J.expr[":"]=J.expr.pseudos,J.unique=re.uniqueSort,J.text=re.getText,J.isXMLDoc=re.isXML,J.contains=re.contains;var se=J.expr.match.needsContext,ae=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,oe=/^.[^:#\[\.,]*$/;J.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?J.find.matchesSelector(i,e)?[i]:[]:J.find.matches(e,J.grep(t,function(e){return 1===e.nodeType}))},J.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(J(e).filter(function(){for(t=0;n>t;t++)if(J.contains(r[t],this))return!0}));for(t=0;n>t;t++)J.find(e,r[t],i);return i=this.pushStack(n>1?J.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&se.test(e)?J(e):e||[],!1).length}});var ce,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ue=J.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:le.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||ce).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof J?t[0]:t,J.merge(this,J.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:K,!0)),ae.test(n[1])&&J.isPlainObject(t))for(n in t)J.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return i=K.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=K,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):J.isFunction(e)?"undefined"!=typeof ce.ready?ce.ready(e):e(J):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),J.makeArray(e,this))};ue.prototype=J.fn,ce=J(K);var he=/^(?:parents|prev(?:Until|All))/,de={children:!0,contents:!0,next:!0,prev:!0};J.extend({dir:function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&J(e).is(n))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),J.fn.extend({has:function(e){var t=J(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(J.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,s=[],a=se.test(e)||"string"!=typeof e?J(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&J.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?J.unique(s):s)},index:function(e){return e?"string"==typeof e?H.call(J(e),this[0]):H.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(J.unique(J.merge(this.get(),J(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),J.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return J.dir(e,"parentNode")},parentsUntil:function(e,t,n){return J.dir(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return J.dir(e,"nextSibling")},prevAll:function(e){return J.dir(e,"previousSibling")},nextUntil:function(e,t,n){return J.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return J.dir(e,"previousSibling",n)},siblings:function(e){return J.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return J.sibling(e.firstChild)},contents:function(e){return e.contentDocument||J.merge([],e.childNodes)}},function(e,t){J.fn[e]=function(n,i){var r=J.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=J.filter(i,r)),this.length>1&&(de[e]||J.unique(r),he.test(e)&&r.reverse()),this.pushStack(r)}});var pe=/\S+/g,fe={};J.Callbacks=function(e){e="string"==typeof e?fe[e]||s(e):J.extend({},e);var t,n,i,r,a,o,c=[],l=!e.once&&[],u=function(s){for(t=e.memory&&s,n=!0,o=r||0,r=0,a=c.length,i=!0;c&&a>o;o++)if(c[o].apply(s[0],s[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,c&&(l?l.length&&u(l.shift()):t?c=[]:h.disable())},h={add:function(){if(c){var n=c.length;!function s(t){J.each(t,function(t,n){var i=J.type(n);"function"===i?e.unique&&h.has(n)||c.push(n):n&&n.length&&"string"!==i&&s(n)})}(arguments),i?a=c.length:t&&(r=n,u(t))}return this},remove:function(){return c&&J.each(arguments,function(e,t){for(var n;(n=J.inArray(t,c,n))>-1;)c.splice(n,1),i&&(a>=n&&a--,o>=n&&o--)}),this},has:function(e){return e?J.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],a=0,this},disable:function(){return c=l=t=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,t||h.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!c||n&&!l||(t=t||[],t=[e,t.slice?t.slice():t],i?l.push(t):u(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},J.extend({Deferred:function(e){var t=[["resolve","done",J.Callbacks("once memory"),"resolved"],["reject","fail",J.Callbacks("once memory"),"rejected"],["notify","progress",J.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return J.Deferred(function(n){J.each(t,function(t,s){var a=J.isFunction(e[t])&&e[t];r[s[1]](function(){var e=a&&a.apply(this,arguments);e&&J.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?J.extend(e,i):i}},r={};return i.pipe=i.then,J.each(t,function(e,s){var a=s[2],o=s[3];i[s[1]]=a.add,o&&a.add(function(){n=o},t[1^e][2].disable,t[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?i:this,arguments),this},r[s[0]+"With"]=a.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,s=G.call(arguments),a=s.length,o=1!==a||e&&J.isFunction(e.promise)?a:0,c=1===o?e:J.Deferred(),l=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?G.call(arguments):r,i===t?c.notifyWith(n,i):--o||c.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)s[r]&&J.isFunction(s[r].promise)?s[r].promise().done(l(r,i,s)).fail(c.reject).progress(l(r,n,t)):--o;return o||c.resolveWith(i,s),c.promise()}});var me;J.fn.ready=function(e){return J.ready.promise().done(e),this},J.extend({isReady:!1,readyWait:1,holdReady:function(e){e?J.readyWait++:J.ready(!0)},ready:function(e){(e===!0?--J.readyWait:J.isReady)||(J.isReady=!0,e!==!0&&--J.readyWait>0||(me.resolveWith(K,[J]),J.fn.triggerHandler&&(J(K).triggerHandler("ready"),J(K).off("ready"))))}}),J.ready.promise=function(t){return me||(me=J.Deferred(),"complete"===K.readyState?setTimeout(J.ready):(K.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1))),me.promise(t)},J.ready.promise();var ge=J.access=function(e,t,n,i,r,s,a){var o=0,c=e.length,l=null==n;if("object"===J.type(n)){r=!0;for(o in n)J.access(e,t,o,n[o],!0,s,a)}else if(void 0!==i&&(r=!0,J.isFunction(i)||(a=!0),l&&(a?(t.call(e,i),t=null):(l=t,t=function(e,t,n){return l.call(J(e),n)})),t))for(;c>o;o++)t(e[o],n,a?i:i.call(e[o],o,t(e[o],n)));return r?e:l?t.call(e):c?t(e[0],n):s};J.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},o.uid=1,o.accepts=J.acceptData,o.prototype={key:function(e){if(!o.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=o.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,J.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,r=this.key(e),s=this.cache[r];if("string"==typeof t)s[t]=n;else if(J.isEmptyObject(s))J.extend(this.cache[r],t);else for(i in t)s[i]=t[i];return s},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,J.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,s=this.key(e),a=this.cache[s];if(void 0===t)this.cache[s]={};else{J.isArray(t)?i=t.concat(t.map(J.camelCase)):(r=J.camelCase(t),t in a?i=[t,r]:(i=r,i=i in a?[i]:i.match(pe)||[])),n=i.length;for(;n--;)delete a[i[n]]}},hasData:function(e){return!J.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var ve=new o,ye=new o,be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,_e=/([A-Z])/g;J.extend({hasData:function(e){return ye.hasData(e)||ve.hasData(e)},data:function(e,t,n){return ye.access(e,t,n)},removeData:function(e,t){ye.remove(e,t)},_data:function(e,t,n){return ve.access(e,t,n)},_removeData:function(e,t){ve.remove(e,t)}}),J.fn.extend({data:function(e,t){var n,i,r,s=this[0],a=s&&s.attributes;if(void 0===e){if(this.length&&(r=ye.get(s),1===s.nodeType&&!ve.get(s,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=J.camelCase(i.slice(5)),c(s,i,r[i])));ve.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){ye.set(this,e)}):ge(this,function(t){var n,i=J.camelCase(e);if(s&&void 0===t){if(n=ye.get(s,e),void 0!==n)return n;if(n=ye.get(s,i),void 0!==n)return n;if(n=c(s,i,void 0),void 0!==n)return n}else this.each(function(){var n=ye.get(this,i);ye.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&ye.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ye.remove(this,e)})}}),J.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=ve.get(e,t),n&&(!i||J.isArray(n)?i=ve.access(e,t,J.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=J.queue(e,t),i=n.length,r=n.shift(),s=J._queueHooks(e,t),a=function(){J.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete s.stop,r.call(e,a,s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ve.get(e,n)||ve.access(e,n,{empty:J.Callbacks("once memory").add(function(){ve.remove(e,[t+"queue",n])})})}}),J.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?J.queue(this[0],e):void 0===t?this:this.each(function(){var n=J.queue(this,e,t);J._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&J.dequeue(this,e)})},dequeue:function(e){return this.each(function(){J.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=J.Deferred(),s=this,a=this.length,o=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=ve.get(s[a],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(o));return o(),r.promise(t)}});var xe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,we=["Top","Right","Bottom","Left"],Se=function(e,t){return e=t||e,"none"===J.css(e,"display")||!J.contains(e.ownerDocument,e)},ke=/^(?:checkbox|radio)$/i;!function(){var e=K.createDocumentFragment(),t=e.appendChild(K.createElement("div")),n=K.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),Q.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Q.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ee="undefined";Q.focusinBubbles="onfocusin"in e;var Te=/^key/,Ce=/^(?:mouse|pointer|contextmenu)|click/,Me=/^(?:focusinfocus|focusoutblur)$/,Pe=/^([^.]*)(?:\.(.+)|)$/;J.event={global:{},add:function(e,t,n,i,r){var s,a,o,c,l,u,h,d,p,f,m,g=ve.get(e);if(g)for(n.handler&&(s=n,n=s.handler,r=s.selector),n.guid||(n.guid=J.guid++),(c=g.events)||(c=g.events={}),(a=g.handle)||(a=g.handle=function(t){return typeof J!==Ee&&J.event.triggered!==t.type?J.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(pe)||[""],l=t.length;l--;)o=Pe.exec(t[l])||[],p=m=o[1],f=(o[2]||"").split(".").sort(),p&&(h=J.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=J.event.special[p]||{},u=J.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&J.expr.match.needsContext.test(r),namespace:f.join(".")},s),(d=c[p])||(d=c[p]=[],d.delegateCount=0,h.setup&&h.setup.call(e,i,f,a)!==!1||e.addEventListener&&e.addEventListener(p,a,!1)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),J.event.global[p]=!0)},remove:function(e,t,n,i,r){var s,a,o,c,l,u,h,d,p,f,m,g=ve.hasData(e)&&ve.get(e);if(g&&(c=g.events)){for(t=(t||"").match(pe)||[""],l=t.length;l--;)if(o=Pe.exec(t[l])||[],p=m=o[1],f=(o[2]||"").split(".").sort(),p){for(h=J.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,d=c[p]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=d.length;s--;)u=d[s],!r&&m!==u.origType||n&&n.guid!==u.guid||o&&!o.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(s,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));a&&!d.length&&(h.teardown&&h.teardown.call(e,f,g.handle)!==!1||J.removeEvent(e,p,g.handle),delete c[p])}else for(p in c)J.event.remove(e,p+t[l],n,i,!0);J.isEmptyObject(c)&&(delete g.handle,ve.remove(e,"events"))}},trigger:function(t,n,i,r){var s,a,o,c,l,u,h,d=[i||K],p=X.call(t,"type")?t.type:t,f=X.call(t,"namespace")?t.namespace.split("."):[];if(a=o=i=i||K,3!==i.nodeType&&8!==i.nodeType&&!Me.test(p+J.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),l=p.indexOf(":")<0&&"on"+p,t=t[J.expando]?t:new J.Event(p,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:J.makeArray(n,[t]),h=J.event.special[p]||{},r||!h.trigger||h.trigger.apply(i,n)!==!1)){if(!r&&!h.noBubble&&!J.isWindow(i)){for(c=h.delegateType||p,Me.test(c+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),o=a;o===(i.ownerDocument||K)&&d.push(o.defaultView||o.parentWindow||e)}for(s=0;(a=d[s++])&&!t.isPropagationStopped();)t.type=s>1?c:h.bindType||p,u=(ve.get(a,"events")||{})[t.type]&&ve.get(a,"handle"),u&&u.apply(a,n),u=l&&a[l],u&&u.apply&&J.acceptData(a)&&(t.result=u.apply(a,n),t.result===!1&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||h._default&&h._default.apply(d.pop(),n)!==!1||!J.acceptData(i)||l&&J.isFunction(i[p])&&!J.isWindow(i)&&(o=i[l],o&&(i[l]=null),J.event.triggered=p,i[p](),J.event.triggered=void 0,o&&(i[l]=o)),t.result}},dispatch:function(e){e=J.event.fix(e);var t,n,i,r,s,a=[],o=G.call(arguments),c=(ve.get(this,"events")||{})[e.type]||[],l=J.event.special[e.type]||{};if(o[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(a=J.event.handlers.call(this,e,c),t=0;(r=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,i=((J.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,o),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,s,a=[],o=t.delegateCount,c=e.target;if(o&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!==this;c=c.parentNode||this)if(c.disabled!==!0||"click"!==e.type){for(i=[],n=0;o>n;n++)s=t[n],r=s.selector+" ",void 0===i[r]&&(i[r]=s.needsContext?J(r,this).index(c)>=0:J.find(r,this,null,[c]).length),i[r]&&i.push(s);i.length&&a.push({elem:c,handlers:i})}return o<t.length&&a.push({elem:this,handlers:t.slice(o)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||K,i=n.documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[J.expando])return e;var t,n,i,r=e.type,s=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Ce.test(r)?this.mouseHooks:Te.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new J.Event(s),t=i.length;t--;)n=i[t],e[n]=s[n];return e.target||(e.target=K),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==h()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&J.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return J.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=J.extend(new J.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?J.event.trigger(r,null,t):J.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},J.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},J.Event=function(e,t){return this instanceof J.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?l:u):this.type=e,t&&J.extend(this,t),this.timeStamp=e&&e.timeStamp||J.now(),void(this[J.expando]=!0)):new J.Event(e,t)},J.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=l,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},J.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){J.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,s=e.handleObj;return(!r||r!==i&&!J.contains(i,r))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),Q.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){J.event.simulate(t,e.target,J.event.fix(e),!0)};J.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=ve.access(i,t);r||i.addEventListener(e,n,!0),ve.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=ve.access(i,t)-1;r?ve.access(i,t,r):(i.removeEventListener(e,n,!0),ve.remove(i,t))}}}),J.fn.extend({on:function(e,t,n,i,r){var s,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(a in e)this.on(a,t,n,e[a],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=u;else if(!i)return this;return 1===r&&(s=i,i=function(e){return J().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=J.guid++)),this.each(function(){J.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,J(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=u),this.each(function(){J.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){J.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?J.event.trigger(e,t,n,!0):void 0}});var Ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ie=/<([\w:]+)/,qe=/<|&#?\w+;/,De=/<(?:script|style|link)/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,Oe=/^$|\/(?:java|ecma)script/i,Ne=/^true\/(.*)/,Fe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,je={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};je.optgroup=je.option,je.tbody=je.tfoot=je.colgroup=je.caption=je.thead,je.th=je.td,J.extend({clone:function(e,t,n){var i,r,s,a,o=e.cloneNode(!0),c=J.contains(e.ownerDocument,e);if(!(Q.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||J.isXMLDoc(e)))for(a=v(o),s=v(e),i=0,r=s.length;r>i;i++)y(s[i],a[i]);if(t)if(n)for(s=s||v(e),a=a||v(o),i=0,r=s.length;r>i;i++)g(s[i],a[i]);else g(e,o);return a=v(o,"script"),a.length>0&&m(a,!c&&v(e,"script")),o},buildFragment:function(e,t,n,i){for(var r,s,a,o,c,l,u=t.createDocumentFragment(),h=[],d=0,p=e.length;p>d;d++)if(r=e[d],r||0===r)if("object"===J.type(r))J.merge(h,r.nodeType?[r]:r);else if(qe.test(r)){for(s=s||u.appendChild(t.createElement("div")),a=(Ie.exec(r)||["",""])[1].toLowerCase(),o=je[a]||je._default,s.innerHTML=o[1]+r.replace(Ae,"<$1></$2>")+o[2],l=o[0];l--;)s=s.lastChild;J.merge(h,s.childNodes),s=u.firstChild,s.textContent=""}else h.push(t.createTextNode(r));for(u.textContent="",d=0;r=h[d++];)if((!i||-1===J.inArray(r,i))&&(c=J.contains(r.ownerDocument,r),s=v(u.appendChild(r),"script"),c&&m(s),n))for(l=0;r=s[l++];)Oe.test(r.type||"")&&n.push(r);return u},cleanData:function(e){for(var t,n,i,r,s=J.event.special,a=0;void 0!==(n=e[a]);a++){if(J.acceptData(n)&&(r=n[ve.expando],r&&(t=ve.cache[r]))){if(t.events)for(i in t.events)s[i]?J.event.remove(n,i):J.removeEvent(n,i,t.handle);ve.cache[r]&&delete ve.cache[r]}delete ye.cache[n[ye.expando]]}}}),J.fn.extend({text:function(e){return ge(this,function(e){return void 0===e?J.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?J.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||J.cleanData(v(n)),n.parentNode&&(t&&J.contains(n.ownerDocument,n)&&m(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(J.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return J.clone(this,e,t)})},html:function(e){return ge(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!De.test(e)&&!je[(Ie.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ae,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(J.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,J.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=z.apply([],e);var n,i,r,s,a,o,c=0,l=this.length,u=this,h=l-1,d=e[0],m=J.isFunction(d);if(m||l>1&&"string"==typeof d&&!Q.checkClone&&Le.test(d))return this.each(function(n){var i=u.eq(n);m&&(e[0]=d.call(this,n,i.html())),i.domManip(e,t)});if(l&&(n=J.buildFragment(e,this[0].ownerDocument,!1,this),i=n.firstChild,1===n.childNodes.length&&(n=i),i)){for(r=J.map(v(n,"script"),p),s=r.length;l>c;c++)a=n,c!==h&&(a=J.clone(a,!0,!0),s&&J.merge(r,v(a,"script"))),t.call(this[c],a,c);if(s)for(o=r[r.length-1].ownerDocument,J.map(r,f),c=0;s>c;c++)a=r[c],Oe.test(a.type||"")&&!ve.access(a,"globalEval")&&J.contains(o,a)&&(a.src?J._evalUrl&&J._evalUrl(a.src):J.globalEval(a.textContent.replace(Fe,"")))}return this}}),J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){J.fn[e]=function(e){for(var n,i=[],r=J(e),s=r.length-1,a=0;s>=a;a++)n=a===s?this:this.clone(!0),J(r[a])[t](n),U.apply(i,n.get());return this.pushStack(i)}});var Ve,Re={},$e=/^margin/,Be=new RegExp("^("+xe+")(?!px)[a-z%]+$","i"),Ge=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",r.appendChild(s);var t=e.getComputedStyle(a,null);n="1%"!==t.top,i="4px"===t.width,r.removeChild(s)}var n,i,r=K.documentElement,s=K.createElement("div"),a=K.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",s.appendChild(a),e.getComputedStyle&&J.extend(Q,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},reliableMarginRight:function(){var t,n=a.appendChild(K.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",r.appendChild(s),t=!parseFloat(e.getComputedStyle(n,null).marginRight),r.removeChild(s),a.removeChild(n),t}}))}(),J.swap=function(e,t,n,i){var r,s,a={};for(s in t)a[s]=e.style[s],e.style[s]=t[s];r=n.apply(e,i||[]);for(s in t)e.style[s]=a[s];return r};var ze=/^(none|table(?!-c[ea]).+)/,Ue=new RegExp("^("+xe+")(.*)$","i"),He=new RegExp("^([+-])=("+xe+")","i"),We={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"},Xe=["Webkit","O","Moz","ms"];J.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=x(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,a,o=J.camelCase(t),c=e.style;return t=J.cssProps[o]||(J.cssProps[o]=S(c,o)),a=J.cssHooks[t]||J.cssHooks[o],void 0===n?a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:c[t]:(s=typeof n,"string"===s&&(r=He.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(J.css(e,t)),s="number"),null!=n&&n===n&&("number"!==s||J.cssNumber[o]||(n+="px"),Q.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(c[t]=n)),void 0)}},css:function(e,t,n,i){var r,s,a,o=J.camelCase(t);return t=J.cssProps[o]||(J.cssProps[o]=S(e.style,o)),a=J.cssHooks[t]||J.cssHooks[o],a&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=x(e,t,i)),"normal"===r&&t in Ye&&(r=Ye[t]),""===n||n?(s=parseFloat(r),n===!0||J.isNumeric(s)?s||0:r):r}}),J.each(["height","width"],function(e,t){J.cssHooks[t]={get:function(e,n,i){return n?ze.test(J.css(e,"display"))&&0===e.offsetWidth?J.swap(e,We,function(){return T(e,t,i)}):T(e,t,i):void 0},set:function(e,n,i){var r=i&&Ge(e);return k(e,n,i?E(e,t,i,"border-box"===J.css(e,"boxSizing",!1,r),r):0)}}}),J.cssHooks.marginRight=w(Q.reliableMarginRight,function(e,t){return t?J.swap(e,{display:"inline-block"},x,[e,"marginRight"]):void 0}),J.each({margin:"",padding:"",border:"Width"},function(e,t){J.cssHooks[e+t]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+we[i]+t]=s[i]||s[i-2]||s[0];return r}},$e.test(e)||(J.cssHooks[e+t].set=k)}),J.fn.extend({css:function(e,t){return ge(this,function(e,t,n){var i,r,s={},a=0;if(J.isArray(t)){for(i=Ge(e),r=t.length;r>a;a++)s[t[a]]=J.css(e,t[a],!1,i);return s}return void 0!==n?J.style(e,t,n):J.css(e,t)},e,t,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){
Se(this)?J(this).show():J(this).hide()})}}),J.Tween=M,M.prototype={constructor:M,init:function(e,t,n,i,r,s){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(J.cssNumber[n]?"":"px")},cur:function(){var e=M.propHooks[this.prop];return e&&e.get?e.get(this):M.propHooks._default.get(this)},run:function(e){var t,n=M.propHooks[this.prop];return this.options.duration?this.pos=t=J.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=J.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){J.fx.step[e.prop]?J.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[J.cssProps[e.prop]]||J.cssHooks[e.prop])?J.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},J.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},J.fx=M.prototype.init,J.fx.step={};var Qe,Ke,Ze=/^(?:toggle|show|hide)$/,Je=new RegExp("^(?:([+-])=|)("+xe+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[q],nt={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=Je.exec(t),s=r&&r[3]||(J.cssNumber[e]?"":"px"),a=(J.cssNumber[e]||"px"!==s&&+i)&&Je.exec(J.css(n.elem,e)),o=1,c=20;if(a&&a[3]!==s){s=s||a[3],r=r||[],a=+i||1;do o=o||".5",a/=o,J.style(n.elem,e,a+s);while(o!==(o=n.cur()/i)&&1!==o&&--c)}return r&&(a=n.start=+a||+i||0,n.unit=s,n.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),n}]};J.Animation=J.extend(L,{tweener:function(e,t){J.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],nt[n]=nt[n]||[],nt[n].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),J.speed=function(e,t,n){var i=e&&"object"==typeof e?J.extend({},e):{complete:n||!n&&t||J.isFunction(e)&&e,duration:e,easing:n&&t||t&&!J.isFunction(t)&&t};return i.duration=J.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in J.fx.speeds?J.fx.speeds[i.duration]:J.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){J.isFunction(i.old)&&i.old.call(this),i.queue&&J.dequeue(this,i.queue)},i},J.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Se).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=J.isEmptyObject(e),s=J.speed(t,n,i),a=function(){var t=L(this,J.extend({},e),s);(r||ve.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||s.queue===!1?this.each(a):this.queue(s.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",s=J.timers,a=ve.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&et.test(r)&&i(a[r]);for(r=s.length;r--;)s[r].elem!==this||null!=e&&s[r].queue!==e||(s[r].anim.stop(n),t=!1,s.splice(r,1));(t||!n)&&J.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ve.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],s=J.timers,a=i?i.length:0;for(n.finish=!0,J.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),J.each(["toggle","show","hide"],function(e,t){var n=J.fn[t];J.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(A(t,!0),e,i,r)}}),J.each({slideDown:A("show"),slideUp:A("hide"),slideToggle:A("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){J.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),J.timers=[],J.fx.tick=function(){var e,t=0,n=J.timers;for(Qe=J.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||J.fx.stop(),Qe=void 0},J.fx.timer=function(e){J.timers.push(e),e()?J.fx.start():J.timers.pop()},J.fx.interval=13,J.fx.start=function(){Ke||(Ke=setInterval(J.fx.tick,J.fx.interval))},J.fx.stop=function(){clearInterval(Ke),Ke=null},J.fx.speeds={slow:600,fast:200,_default:400},J.fn.delay=function(e,t){return e=J.fx?J.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e=K.createElement("input"),t=K.createElement("select"),n=t.appendChild(K.createElement("option"));e.type="checkbox",Q.checkOn=""!==e.value,Q.optSelected=n.selected,t.disabled=!0,Q.optDisabled=!n.disabled,e=K.createElement("input"),e.value="t",e.type="radio",Q.radioValue="t"===e.value}();var it,rt,st=J.expr.attrHandle;J.fn.extend({attr:function(e,t){return ge(this,J.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){J.removeAttr(this,e)})}}),J.extend({attr:function(e,t,n){var i,r,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===Ee?J.prop(e,t,n):(1===s&&J.isXMLDoc(e)||(t=t.toLowerCase(),i=J.attrHooks[t]||(J.expr.match.bool.test(t)?rt:it)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=J.find.attr(e,t),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void J.removeAttr(e,t))},removeAttr:function(e,t){var n,i,r=0,s=t&&t.match(pe);if(s&&1===e.nodeType)for(;n=s[r++];)i=J.propFix[n]||n,J.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!Q.radioValue&&"radio"===t&&J.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),rt={set:function(e,t,n){return t===!1?J.removeAttr(e,n):e.setAttribute(n,n),n}},J.each(J.expr.match.bool.source.match(/\w+/g),function(e,t){var n=st[t]||J.find.attr;st[t]=function(e,t,i){var r,s;return i||(s=st[t],st[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,st[t]=s),r}});var at=/^(?:input|select|textarea|button)$/i;J.fn.extend({prop:function(e,t){return ge(this,J.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[J.propFix[e]||e]})}}),J.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,r,s,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return s=1!==a||!J.isXMLDoc(e),s&&(t=J.propFix[t]||t,r=J.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||at.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Q.optSelected||(J.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),J.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){J.propFix[this.toLowerCase()]=this});var ot=/[\t\r\n\f]/g;J.fn.extend({addClass:function(e){var t,n,i,r,s,a,o="string"==typeof e&&e,c=0,l=this.length;if(J.isFunction(e))return this.each(function(t){J(this).addClass(e.call(this,t,this.className))});if(o)for(t=(e||"").match(pe)||[];l>c;c++)if(n=this[c],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ot," "):" ")){for(s=0;r=t[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=J.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,i,r,s,a,o=0===arguments.length||"string"==typeof e&&e,c=0,l=this.length;if(J.isFunction(e))return this.each(function(t){J(this).removeClass(e.call(this,t,this.className))});if(o)for(t=(e||"").match(pe)||[];l>c;c++)if(n=this[c],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ot," "):"")){for(s=0;r=t[s++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");a=e?J.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):J.isFunction(e)?this.each(function(n){J(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,i=0,r=J(this),s=e.match(pe)||[];t=s[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===Ee||"boolean"===n)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ot," ").indexOf(t)>=0)return!0;return!1}});var ct=/\r/g;J.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=J.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,J(this).val()):e,null==r?r="":"number"==typeof r?r+="":J.isArray(r)&&(r=J.map(r,function(e){return null==e?"":e+""})),t=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=J.valHooks[r.type]||J.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(ct,""):null==n?"":n)}}}),J.extend({valHooks:{option:{get:function(e){var t=J.find.attr(e,"value");return null!=t?t:J.trim(J.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,s="select-one"===e.type||0>r,a=s?null:[],o=s?r+1:i.length,c=0>r?o:s?r:0;o>c;c++)if(n=i[c],(n.selected||c===r)&&(Q.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!J.nodeName(n.parentNode,"optgroup"))){if(t=J(n).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,s=J.makeArray(t),a=r.length;a--;)i=r[a],(i.selected=J.inArray(i.value,s)>=0)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]={set:function(e,t){return J.isArray(t)?e.checked=J.inArray(J(e).val(),t)>=0:void 0}},Q.checkOn||(J.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){J.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),J.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var lt=J.now(),ut=/\?/;J.parseJSON=function(e){return JSON.parse(e+"")},J.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&J.error("Invalid XML: "+e),t};var ht=/#.*$/,dt=/([?&])_=[^&]*/,pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,ft=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,mt=/^(?:GET|HEAD)$/,gt=/^\/\//,vt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yt={},bt={},_t="*/".concat("*"),xt=e.location.href,wt=vt.exec(xt.toLowerCase())||[];J.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xt,type:"GET",isLocal:ft.test(wt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?F(F(e,J.ajaxSettings),t):F(J.ajaxSettings,e)},ajaxPrefilter:O(yt),ajaxTransport:O(bt),ajax:function(e,t){function n(e,t,n,a){var c,u,v,y,_,w=t;2!==b&&(b=2,o&&clearTimeout(o),i=void 0,s=a||"",x.readyState=e>0?4:0,c=e>=200&&300>e||304===e,n&&(y=j(h,x,n)),y=V(h,y,x,c),c?(h.ifModified&&(_=x.getResponseHeader("Last-Modified"),_&&(J.lastModified[r]=_),_=x.getResponseHeader("etag"),_&&(J.etag[r]=_)),204===e||"HEAD"===h.type?w="nocontent":304===e?w="notmodified":(w=y.state,u=y.data,v=y.error,c=!v)):(v=w,(e||!w)&&(w="error",0>e&&(e=0))),x.status=e,x.statusText=(t||w)+"",c?f.resolveWith(d,[u,w,x]):f.rejectWith(d,[x,w,v]),x.statusCode(g),g=void 0,l&&p.trigger(c?"ajaxSuccess":"ajaxError",[x,h,c?u:v]),m.fireWith(d,[x,w]),l&&(p.trigger("ajaxComplete",[x,h]),--J.active||J.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,s,a,o,c,l,u,h=J.ajaxSetup({},t),d=h.context||h,p=h.context&&(d.nodeType||d.jquery)?J(d):J.event,f=J.Deferred(),m=J.Callbacks("once memory"),g=h.statusCode||{},v={},y={},b=0,_="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!a)for(a={};t=pt.exec(s);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||_;return i&&i.abort(t),n(0,t),this}};if(f.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,h.url=((e||h.url||xt)+"").replace(ht,"").replace(gt,wt[1]+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=J.trim(h.dataType||"*").toLowerCase().match(pe)||[""],null==h.crossDomain&&(c=vt.exec(h.url.toLowerCase()),h.crossDomain=!(!c||c[1]===wt[1]&&c[2]===wt[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(wt[3]||("http:"===wt[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=J.param(h.data,h.traditional)),N(yt,h,t,x),2===b)return x;l=J.event&&h.global,l&&0===J.active++&&J.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!mt.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(ut.test(r)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=dt.test(r)?r.replace(dt,"$1_="+lt++):r+(ut.test(r)?"&":"?")+"_="+lt++)),h.ifModified&&(J.lastModified[r]&&x.setRequestHeader("If-Modified-Since",J.lastModified[r]),J.etag[r]&&x.setRequestHeader("If-None-Match",J.etag[r])),(h.data&&h.hasContent&&h.contentType!==!1||t.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+_t+"; q=0.01":""):h.accepts["*"]);for(u in h.headers)x.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(h.beforeSend.call(d,x,h)===!1||2===b))return x.abort();_="abort";for(u in{success:1,error:1,complete:1})x[u](h[u]);if(i=N(bt,h,t,x)){x.readyState=1,l&&p.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(o=setTimeout(function(){x.abort("timeout")},h.timeout));try{b=1,i.send(v,n)}catch(w){if(!(2>b))throw w;n(-1,w)}}else n(-1,"No Transport");return x},getJSON:function(e,t,n){return J.get(e,t,n,"json")},getScript:function(e,t){return J.get(e,void 0,t,"script")}}),J.each(["get","post"],function(e,t){J[t]=function(e,n,i,r){return J.isFunction(n)&&(r=r||i,i=n,n=void 0),J.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),J._evalUrl=function(e){return J.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},J.fn.extend({wrapAll:function(e){var t;return J.isFunction(e)?this.each(function(t){J(this).wrapAll(e.call(this,t))}):(this[0]&&(t=J(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return J.isFunction(e)?this.each(function(t){J(this).wrapInner(e.call(this,t))}):this.each(function(){var t=J(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=J.isFunction(e);return this.each(function(n){J(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()}}),J.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},J.expr.filters.visible=function(e){return!J.expr.filters.hidden(e)};var St=/%20/g,kt=/\[\]$/,Et=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,Ct=/^(?:input|select|textarea|keygen)/i;J.param=function(e,t){var n,i=[],r=function(e,t){t=J.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=J.ajaxSettings&&J.ajaxSettings.traditional),J.isArray(e)||e.jquery&&!J.isPlainObject(e))J.each(e,function(){r(this.name,this.value)});else for(n in e)R(n,e[n],t,r);return i.join("&").replace(St,"+")},J.fn.extend({serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=J.prop(this,"elements");return e?J.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!J(this).is(":disabled")&&Ct.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!ke.test(e))}).map(function(e,t){var n=J(this).val();return null==n?null:J.isArray(n)?J.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}}),J.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Mt=0,Pt={},At={0:200,1223:204},It=J.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Pt)Pt[e]()}),Q.cors=!!It&&"withCredentials"in It,Q.ajax=It=!!It,J.ajaxTransport(function(e){var t;return Q.cors||It&&!e.crossDomain?{send:function(n,i){var r,s=e.xhr(),a=++Mt;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)s[r]=e.xhrFields[r];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)s.setRequestHeader(r,n[r]);t=function(e){return function(){t&&(delete Pt[a],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?i(s.status,s.statusText):i(At[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=Pt[a]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(o){if(t)throw o}},abort:function(){t&&t()}}:void 0}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return J.globalEval(e),e}}}),J.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),J.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=J("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),K.head.appendChild(t[0])},abort:function(){n&&n()}}}});var qt=[],Dt=/(=)\?(?=&|$)|\?\?/;J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=qt.pop()||J.expando+"_"+lt++;return this[e]=!0,e}}),J.ajaxPrefilter("json jsonp",function(t,n,i){var r,s,a,o=t.jsonp!==!1&&(Dt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dt.test(t.data)&&"data");return o||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=J.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(Dt,"$1"+r):t.jsonp!==!1&&(t.url+=(ut.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||J.error(r+" was not called"),a[0]},t.dataTypes[0]="json",s=e[r],e[r]=function(){a=arguments},i.always(function(){e[r]=s,t[r]&&(t.jsonpCallback=n.jsonpCallback,qt.push(r)),a&&J.isFunction(s)&&s(a[0]),a=s=void 0}),"script"):void 0}),J.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||K;var i=ae.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=J.buildFragment([e],t,r),r&&r.length&&J(r).remove(),J.merge([],i.childNodes))};var Lt=J.fn.load;J.fn.load=function(e,t,n){if("string"!=typeof e&&Lt)return Lt.apply(this,arguments);var i,r,s,a=this,o=e.indexOf(" ");return o>=0&&(i=J.trim(e.slice(o)),e=e.slice(0,o)),J.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&J.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){s=arguments,a.html(i?J("<div>").append(J.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){a.each(n,s||[e.responseText,t,e])}),this},J.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){J.fn[t]=function(e){return this.on(t,e)}}),J.expr.filters.animated=function(e){return J.grep(J.timers,function(t){return e===t.elem}).length};var Ot=e.document.documentElement;J.offset={setOffset:function(e,t,n){var i,r,s,a,o,c,l,u=J.css(e,"position"),h=J(e),d={};"static"===u&&(e.style.position="relative"),o=h.offset(),s=J.css(e,"top"),c=J.css(e,"left"),l=("absolute"===u||"fixed"===u)&&(s+c).indexOf("auto")>-1,l?(i=h.position(),a=i.top,r=i.left):(a=parseFloat(s)||0,r=parseFloat(c)||0),J.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(d.top=t.top-o.top+a),null!=t.left&&(d.left=t.left-o.left+r),"using"in t?t.using.call(e,d):h.css(d)}},J.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){J.offset.setOffset(this,e,t)});var t,n,i=this[0],r={top:0,left:0},s=i&&i.ownerDocument;if(s)return t=s.documentElement,J.contains(t,i)?(typeof i.getBoundingClientRect!==Ee&&(r=i.getBoundingClientRect()),n=$(s),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===J.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),J.nodeName(e[0],"html")||(i=e.offset()),i.top+=J.css(e[0],"borderTopWidth",!0),i.left+=J.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-J.css(n,"marginTop",!0),left:t.left-i.left-J.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Ot;e&&!J.nodeName(e,"html")&&"static"===J.css(e,"position");)e=e.offsetParent;return e||Ot})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i="pageYOffset"===n;J.fn[t]=function(r){return ge(this,function(t,r,s){var a=$(t);return void 0===s?a?a[n]:t[r]:void(a?a.scrollTo(i?e.pageXOffset:s,i?s:e.pageYOffset):t[r]=s)},t,r,arguments.length,null)}}),J.each(["top","left"],function(e,t){J.cssHooks[t]=w(Q.pixelPosition,function(e,n){return n?(n=x(e,t),Be.test(n)?J(e).position()[t]+"px":n):void 0})}),J.each({Height:"height",Width:"width"},function(e,t){J.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){J.fn[i]=function(i,r){var s=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||r===!0?"margin":"border");return ge(this,function(t,n,i){var r;return J.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?J.css(t,n,a):J.style(t,n,i,a)},t,s?i:void 0,s,null)}})}),J.fn.size=function(){return this.length},J.fn.andSelf=J.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return J});var Nt=e.jQuery,Ft=e.$;return J.noConflict=function(t){return e.$===J&&(e.$=Ft),t&&e.jQuery===J&&(e.jQuery=Nt),J},typeof t===Ee&&(e.jQuery=e.$=J),J}),define("browser",["require","jquery"],function(e){var t=e("jquery"),n={IS_IE8:null!==navigator.userAgent.match(/MSIE 8.0/i),IS_IE9:null!==navigator.userAgent.match(/MSIE 9.0/i),IS_IE:null!==navigator.userAgent.match(/MSIE/i),IS_IPAD:null!==navigator.userAgent.match(/iPad/i),IS_MOBILE:null!==navigator.userAgent.match(/Mobile|Android/i),IS_ANDROID:null!==navigator.userAgent.match(/Android/i),IS_IOS:null!==navigator.userAgent.match(/(iPad|iPhone|iPod)/i),IS_CHROME:null!==navigator.userAgent.match(/Chrome/i),IS_SAFARI:null!==navigator.userAgent.match(/^((?!chrome|android).)*safari/i),IS_APPLE:null!==navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),IS_WINDOWS:null!==navigator.platform.match(/(Win32)/i),IS_TOUCH:null!==navigator.userAgent.match(/Touch/i),IS_KINDLE:null!==navigator.userAgent.match(/Kindle/i)||null!==navigator.userAgent.match(/Silk/i),IS_IN_IFRAME:window.parent!==window};return n.IS_TABLET=n.IS_IPAD||n.IS_ANDROID||n.IS_KINDLE,n.IOS_VERSION=function(){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return e?[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]:null}(),n.SUPPORTS_TRANSLATE3D=!1,t(document).ready(function(){var e,t,i=document.createElement("p"),r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(i,null);for(var s in r)if(void 0!==i.style[s]){if(i.style[s]="translate3d(1px,1px,1px)",t=window.getComputedStyle(i),!t)return;e=t.getPropertyValue(r[s])}document.body.removeChild(i),n.SUPPORTS_TRANSLATE3D=void 0!==e&&e.length>0&&"none"!==e}),n.translateRule=function(e,t){return n.SUPPORTS_TRANSLATE3D?"translate3d("+e+(e?"px":"")+","+t+(t?"px":"")+",0)":"translate("+e+(e?"px":"")+","+t+(t?"px":"")+")"},n.SUPPORTS_CANVAS=function(){var e=document.createElement("canvas"),t=!(!e.getContext||!e.getContext("2d"));return t}(),n}),define("main/load_data",["require","jquery"],function(e){var t=e("jquery"),n=t("body").data("load-data");return n}),define("lib/clone",["require"],function(e){var t=function(e){return JSON.parse(JSON.stringify(e))};return t}),define("config",["require","lib/clone"],function(e){var t=e("lib/clone"),n={},i=location.search;"?"===i[0]&&(i=i.slice(1));for(var r=i.split("&"),s={},a=0;a<r.length;a++){var o=r[a].split("=");s[o[0]]=2===o.length?o[1]:!0}if(window.Desmos&&window.Desmos.config)for(var c in window.Desmos.config)window.Desmos.config.hasOwnProperty(c)&&(s[c]=window.Desmos.config[c]);var l=function(e){return s.hasOwnProperty(e)},u=function(e){n[e]=l(e)},h=function(e){n[e]=!l("no"+e)};u("testing"),u("maintenance"),u("disablelocale"),u("detectlocale"),u("disableScrollFix"),u("nativeOnscreenKeypad"),u("hidden"),u("outofdom"),s.lang&&(n.lang=s.lang),n.no_navigation_warning=l("noconcat")||l("testing"),n.previewMessage="You're previewing some new accessibility features.",n.previewFeedbackUrl="mailto:feedback@desmos.com";var d=location&&"preview.desmos.com"===location.hostname;return n.previewMode=l("previewMode")||d,u("lockViewport"),u("administerSecretFolders"),u("resizeLoop"),u("degreeMode"),u("expressionsCollapsed"),h("images"),h("folders"),h("settingsMenu"),h("expressionsTopbar"),h("zoomButtons"),h("keypad"),h("graphpaper"),h("expressions"),h("expressionsTopbar"),h("settingsMenu"),h("branding"),h("pointsOfInterest"),h("singleVariableSolutions"),h("notes"),u("sciKeypad"),u("4fnKeypad"),u("ans"),u("braille"),h("qwertyKeyboard"),u("restrictedFunctions"),h("functionDefinition"),u("neuterScientific"),u("labels"),u("bare-i18n"),s.nworkers&&(n.nworkers=s.nworkers),{get:function(e){return n[e]},all:function(){return t(n)}}}),define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),function(){function e(e){function t(t,n,i,r,s,a){for(;s>=0&&a>s;s+=e){var o=r?r[s]:s;i=n(i,t[o],o,t)}return i}return function(n,i,r,s){i=b(i,s,4);var a=!T(n)&&y.keys(n),o=(a||n).length,c=e>0?0:o-1;return arguments.length<3&&(r=n[a?a[c]:c],c+=e),t(n,i,r,a,c,o)}}function t(e){return function(t,n,i){n=_(n,i);for(var r=E(t),s=e>0?0:r-1;s>=0&&r>s;s+=e)if(n(t[s],s,t))return s;return-1}}function n(e,t,n){return function(i,r,s){var a=0,o=E(i);if("number"==typeof s)e>0?a=s>=0?s:Math.max(s+o,a):o=s>=0?Math.min(s+1,o):s+o+1;else if(n&&s&&o)return s=n(i,r),i[s]===r?s:-1;if(r!==r)return s=t(u.call(i,a,o),y.isNaN),s>=0?s+a:-1;for(s=e>0?a:o-1;s>=0&&o>s;s+=e)if(i[s]===r)return s;return-1}}function i(e,t){var n=I.length,i=e.constructor,r=y.isFunction(i)&&i.prototype||o,s="constructor";for(y.has(e,s)&&!y.contains(t,s)&&t.push(s);n--;)s=I[n],s in e&&e[s]!==r[s]&&!y.contains(t,s)&&t.push(s)}var r=this,s=r._,a=Array.prototype,o=Object.prototype,c=Function.prototype,l=a.push,u=a.slice,h=o.toString,d=o.hasOwnProperty,p=Array.isArray,f=Object.keys,m=c.bind,g=Object.create,v=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):r._=y,y.VERSION="1.8.3";var b=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,s){return e.call(t,n,i,r,s)}}return function(){return e.apply(t,arguments)}},_=function(e,t,n){return null==e?y.identity:y.isFunction(e)?b(e,t,n):y.isObject(e)?y.matcher(e):y.property(e)};y.iteratee=function(e,t){return _(e,t,1/0)};var x=function(e,t){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var r=1;i>r;r++)for(var s=arguments[r],a=e(s),o=a.length,c=0;o>c;c++){var l=a[c];t&&void 0!==n[l]||(n[l]=s[l])}return n}},w=function(e){if(!y.isObject(e))return{};if(g)return g(e);v.prototype=e;var t=new v;return v.prototype=null,t},S=function(e){return function(t){return null==t?void 0:t[e]}},k=Math.pow(2,53)-1,E=S("length"),T=function(e){var t=E(e);return"number"==typeof t&&t>=0&&k>=t};y.each=y.forEach=function(e,t,n){t=b(t,n);var i,r;if(T(e))for(i=0,r=e.length;r>i;i++)t(e[i],i,e);else{var s=y.keys(e);for(i=0,r=s.length;r>i;i++)t(e[s[i]],s[i],e)}return e},y.map=y.collect=function(e,t,n){t=_(t,n);for(var i=!T(e)&&y.keys(e),r=(i||e).length,s=Array(r),a=0;r>a;a++){var o=i?i[a]:a;s[a]=t(e[o],o,e)}return s},y.reduce=y.foldl=y.inject=e(1),y.reduceRight=y.foldr=e(-1),y.find=y.detect=function(e,t,n){var i;return i=T(e)?y.findIndex(e,t,n):y.findKey(e,t,n),void 0!==i&&-1!==i?e[i]:void 0},y.filter=y.select=function(e,t,n){var i=[];return t=_(t,n),y.each(e,function(e,n,r){t(e,n,r)&&i.push(e)}),i},y.reject=function(e,t,n){return y.filter(e,y.negate(_(t)),n)},y.every=y.all=function(e,t,n){t=_(t,n);for(var i=!T(e)&&y.keys(e),r=(i||e).length,s=0;r>s;s++){var a=i?i[s]:s;if(!t(e[a],a,e))return!1}return!0},y.some=y.any=function(e,t,n){t=_(t,n);for(var i=!T(e)&&y.keys(e),r=(i||e).length,s=0;r>s;s++){var a=i?i[s]:s;if(t(e[a],a,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,i){return T(e)||(e=y.values(e)),("number"!=typeof n||i)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=function(e,t){var n=u.call(arguments,2),i=y.isFunction(t);return y.map(e,function(e){var r=i?t:e[t];return null==r?r:r.apply(e,n)})},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var i,r,s=-(1/0),a=-(1/0);if(null==t&&null!=e){e=T(e)?e:y.values(e);for(var o=0,c=e.length;c>o;o++)i=e[o],i>s&&(s=i)}else t=_(t,n),y.each(e,function(e,n,i){r=t(e,n,i),(r>a||r===-(1/0)&&s===-(1/0))&&(s=e,a=r)});return s},y.min=function(e,t,n){var i,r,s=1/0,a=1/0;if(null==t&&null!=e){e=T(e)?e:y.values(e);for(var o=0,c=e.length;c>o;o++)i=e[o],s>i&&(s=i)}else t=_(t,n),y.each(e,function(e,n,i){r=t(e,n,i),(a>r||r===1/0&&s===1/0)&&(s=e,a=r)});return s},y.shuffle=function(e){for(var t,n=T(e)?e:y.values(e),i=n.length,r=Array(i),s=0;i>s;s++)t=y.random(0,s),t!==s&&(r[s]=r[t]),r[t]=n[s];return r},y.sample=function(e,t,n){return null==t||n?(T(e)||(e=y.values(e)),e[y.random(e.length-1)]):y.shuffle(e).slice(0,Math.max(0,t))},y.sortBy=function(e,t,n){return t=_(t,n),y.pluck(y.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;
if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var C=function(e){return function(t,n,i){var r={};return n=_(n,i),y.each(t,function(i,s){var a=n(i,s,t);e(r,i,a)}),r}};y.groupBy=C(function(e,t,n){y.has(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=C(function(e,t,n){e[n]=t}),y.countBy=C(function(e,t,n){y.has(e,n)?e[n]++:e[n]=1}),y.toArray=function(e){return e?y.isArray(e)?u.call(e):T(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:T(e)?e.length:y.keys(e).length},y.partition=function(e,t,n){t=_(t,n);var i=[],r=[];return y.each(e,function(e,n,s){(t(e,n,s)?i:r).push(e)}),[i,r]},y.first=y.head=y.take=function(e,t,n){return null!=e?null==t||n?e[0]:y.initial(e,e.length-t):void 0},y.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){return null!=e?null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t)):void 0},y.rest=y.tail=y.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,y.identity)};var M=function(e,t,n,i){for(var r=[],s=0,a=i||0,o=E(e);o>a;a++){var c=e[a];if(T(c)&&(y.isArray(c)||y.isArguments(c))){t||(c=M(c,t,n));var l=0,u=c.length;for(r.length+=u;u>l;)r[s++]=c[l++]}else n||(r[s++]=c)}return r};y.flatten=function(e,t){return M(e,t,!1)},y.without=function(e){return y.difference(e,u.call(arguments,1))},y.uniq=y.unique=function(e,t,n,i){y.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=_(n,i));for(var r=[],s=[],a=0,o=E(e);o>a;a++){var c=e[a],l=n?n(c,a,e):c;t?(a&&s===l||r.push(c),s=l):n?y.contains(s,l)||(s.push(l),r.push(c)):y.contains(r,c)||r.push(c)}return r},y.union=function(){return y.uniq(M(arguments,!0,!0))},y.intersection=function(e){for(var t=[],n=arguments.length,i=0,r=E(e);r>i;i++){var s=e[i];if(!y.contains(t,s)){for(var a=1;n>a&&y.contains(arguments[a],s);a++);a===n&&t.push(s)}}return t},y.difference=function(e){var t=M(arguments,!0,!0,1);return y.filter(e,function(e){return!y.contains(t,e)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(e){for(var t=e&&y.max(e,E).length||0,n=Array(t),i=0;t>i;i++)n[i]=y.pluck(e,i);return n},y.object=function(e,t){for(var n={},i=0,r=E(e);r>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},y.findIndex=t(1),y.findLastIndex=t(-1),y.sortedIndex=function(e,t,n,i){n=_(n,i,1);for(var r=n(t),s=0,a=E(e);a>s;){var o=Math.floor((s+a)/2);n(e[o])<r?s=o+1:a=o}return s},y.indexOf=n(1,y.findIndex,y.sortedIndex),y.lastIndexOf=n(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),s=0;i>s;s++,e+=n)r[s]=e;return r};var P=function(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var s=w(e.prototype),a=e.apply(s,r);return y.isObject(a)?a:s};y.bind=function(e,t){if(m&&e.bind===m)return m.apply(e,u.call(arguments,1));if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),i=function(){return P(e,i,t,this,n.concat(u.call(arguments)))};return i},y.partial=function(e){var t=u.call(arguments,1),n=function(){for(var i=0,r=t.length,s=Array(r),a=0;r>a;a++)s[a]=t[a]===y?arguments[i++]:t[a];for(;i<arguments.length;)s.push(arguments[i++]);return P(e,n,this,this,s)};return n},y.bindAll=function(e){var t,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(t=1;i>t;t++)n=arguments[t],e[n]=y.bind(e[n],e);return e},y.memoize=function(e,t){var n=function(i){var r=n.cache,s=""+(t?t.apply(this,arguments):i);return y.has(r,s)||(r[s]=e.apply(this,arguments)),r[s]};return n.cache={},n},y.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var i,r,s,a=null,o=0;n||(n={});var c=function(){o=n.leading===!1?0:y.now(),a=null,s=e.apply(i,r),a||(i=r=null)};return function(){var l=y.now();o||n.leading!==!1||(o=l);var u=t-(l-o);return i=this,r=arguments,0>=u||u>t?(a&&(clearTimeout(a),a=null),o=l,s=e.apply(i,r),a||(i=r=null)):a||n.trailing===!1||(a=setTimeout(c,u)),s}},y.debounce=function(e,t,n){var i,r,s,a,o,c=function(){var l=y.now()-a;t>l&&l>=0?i=setTimeout(c,t-l):(i=null,n||(o=e.apply(s,r),i||(s=r=null)))};return function(){s=this,r=arguments,a=y.now();var l=n&&!i;return i||(i=setTimeout(c,t)),l&&(o=e.apply(s,r),s=r=null),o}},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},y.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},y.once=y.partial(y.before,2);var A=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(e){if(!y.isObject(e))return[];if(f)return f(e);var t=[];for(var n in e)y.has(e,n)&&t.push(n);return A&&i(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return A&&i(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,i=Array(n),r=0;n>r;r++)i[r]=e[t[r]];return i},y.mapObject=function(e,t,n){t=_(t,n);for(var i,r=y.keys(e),s=r.length,a={},o=0;s>o;o++)i=r[o],a[i]=t(e[i],i,e);return a},y.pairs=function(e){for(var t=y.keys(e),n=t.length,i=Array(n),r=0;n>r;r++)i[r]=[t[r],e[t[r]]];return i},y.invert=function(e){for(var t={},n=y.keys(e),i=0,r=n.length;r>i;i++)t[e[n[i]]]=n[i];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()},y.extend=x(y.allKeys),y.extendOwn=y.assign=x(y.keys),y.findKey=function(e,t,n){t=_(t,n);for(var i,r=y.keys(e),s=0,a=r.length;a>s;s++)if(i=r[s],t(e[i],i,e))return i},y.pick=function(e,t,n){var i,r,s={},a=e;if(null==a)return s;y.isFunction(t)?(r=y.allKeys(a),i=b(t,n)):(r=M(arguments,!1,!1,1),i=function(e,t,n){return t in n},a=Object(a));for(var o=0,c=r.length;c>o;o++){var l=r[o],u=a[l];i(u,l,a)&&(s[l]=u)}return s},y.omit=function(e,t,n){if(y.isFunction(t))t=y.negate(t);else{var i=y.map(M(arguments,!1,!1,1),String);t=function(e,t){return!y.contains(i,t)}}return y.pick(e,t,n)},y.defaults=x(y.allKeys,!0),y.create=function(e,t){var n=w(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),i=n.length;if(null==e)return!i;for(var r=Object(e),s=0;i>s;s++){var a=n[s];if(t[a]!==r[a]||!(a in r))return!1}return!0};var q=function(e,t,n,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var r=h.call(e);if(r!==h.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var s="[object Array]"===r;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,o=t.constructor;if(a!==o&&!(y.isFunction(a)&&a instanceof a&&y.isFunction(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var c=n.length;c--;)if(n[c]===e)return i[c]===t;if(n.push(e),i.push(t),s){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!q(e[c],t[c],n,i))return!1}else{var l,u=y.keys(e);if(c=u.length,y.keys(t).length!==c)return!1;for(;c--;)if(l=u[c],!y.has(t,l)||!q(e[l],t[l],n,i))return!1}return n.pop(),i.pop(),!0};y.isEqual=function(e,t){return q(e,t)},y.isEmpty=function(e){return null==e?!0:T(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=p||function(e){return"[object Array]"===h.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){y["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!==+e},y.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===h.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return null!=e&&d.call(e,t)},y.noConflict=function(){return r._=s,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=S,y.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var i=Array(Math.max(0,e));t=b(t,n,1);for(var r=0;e>r;r++)i[r]=t(r);return i},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=y.invert(D),O=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,t):e}};y.escape=O(D),y.unescape=O(L),y.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),y.isFunction(i)?i.call(e):i};var N=0;y.uniqueId=function(e){var t=++N+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,R=function(e){return"\\"+j[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var i=RegExp([(t.escape||F).source,(t.interpolate||F).source,(t.evaluate||F).source].join("|")+"|$","g"),r=0,s="__p+='";e.replace(i,function(t,n,i,a,o){return s+=e.slice(r,o).replace(V,R),r=o+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?s+="'+\n((__t=("+i+"))==null?'':__t)+\n'":a&&(s+="';\n"+a+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var a=new Function(t.variable||"obj","_",s)}catch(o){throw o.source=s,o}var c=function(e){return a.call(this,e,y)},l=t.variable||"obj";return c.source="function("+l+"){\n"+s+"}",c},y.chain=function(e){var t=y(e);return t._chain=!0,t};var $=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),$(this,n.apply(y,e))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],$(this,n)}}),y.each(["concat","join","slice"],function(e){var t=a[e];y.prototype[e]=function(){return $(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}.call(this),define("lib/inject-css",["require","underscore"],function(e){function t(e,t){var s=i[e];if(!s){s=document.createElement("style"),i[e]=s;var a=n.sortedIndex(r,e),o=i[r[a]];o?document.head.insertBefore(s,o):document.head.appendChild(s),r.splice(a,0,e)}s.textContent=t}var n=e("underscore"),i={},r=[];return t}),define("underscore-plugins",{}),define("loadcss",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("loadcss!css/print",function(){}),define("keys",["require"],function(e){var t=function(){var e={8:this.BACKSPACE="Backspace",9:this.TAB="Tab",13:this.ENTER="Enter",16:this.SHIFT="Shift",17:this.CONTROL="Control",18:this.ALT="Alt",20:this.CAPSLOCK="CapsLock",27:this.ESCAPE="Esc",32:this.SPACEBAR="Space",33:this.PAGEUP="PageUp",34:this.PAGEDOWN="PageDown",35:this.END="End",36:this.HOME="Home",37:this.LEFT="Left",38:this.UP="Up",39:this.RIGHT="Right",40:this.DOWN="Down",46:this.DELETE="Del"};this.isUndo=function(e){return!e.altKey&&(e.ctrlKey||e.metaKey)&&90==e.which&&!e.shiftKey},this.isRedo=function(e){return!e.altKey&&(e.ctrlKey||e.metaKey)&&(89==e.which||90==e.which&&e.shiftKey)},this.isSelectAll=function(e){return!e.altKey&&(e.ctrlKey||e.metaKey)&&65==e.which},this.isBacktick=function(e){return!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||192!=e.which)},this.lookup=function(t){return e[t.which]},this.lookupChar=function(e){return String.fromCharCode(e.which)}};return new t}),define("main/cookie",[],function(){function e(e){var t,n,i,r=encodeURIComponent(e),s=document.cookie.split(";");for(t=0;t<s.length;t++)if(n=s[t].substr(0,s[t].indexOf("=")),i=s[t].substr(s[t].indexOf("=")+1),n=n.replace(/^\s+|\s+$/g,""),n==r)return decodeURIComponent(i)}function t(e,t,n){var i=new Date;i.setDate(i.getDate()+(n||30)),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; expires="+i.toUTCString()+"; path=/"}return{getCookie:e,setCookie:t}}),define("i18n",["require","config","main/cookie","underscore"],function(e){function t(e,t){u=e||"",h=t||{}}function n(e){for(var t,n=/(__[^_]+__)/g,i=[];null!==(t=n.exec(e));)i.push({index:t.index,text:t[0]});e=e.replace(/[a-z]/gi,"");for(var r=e.split(""),s=0;s<i.length;s++)for(var a=i[s].index,o=i[s].text,c=0;c<o.length;c++)r[a+c]=o[c];return r.join("")}function i(e,t,i){var r=void 0!==i?i:u,s=h[r]&&h[r][e]||e||"";a.get("bare-i18n")&&(s=n(s));for(var o in t)t.hasOwnProperty(o)&&(s=s.split("__"+o+"__").join(t[o]));return s}function r(){if(a.get("lang"))return a.get("lang");var e=[o.getCookie("lang")];if(!a.get("disablelocale")){var t;t=navigator.userLanguage?navigator.userLanguage:navigator.language;var n=t.split("-")[0];e.push(t),e.push(n),l.each(d,function(t,i){i.split("-")[0]===n&&t.useAsRoot&&e.push(i)})}for(var i=0;i<e.length;i++){var r=e[i];if(d.hasOwnProperty(r))return r}return"en"}function s(){return u}var a=e("config"),o=e("main/cookie"),c=window.Desmos&&window.Desmos.locales?window.Desmos.locales:{},l=e("underscore"),u="",h={},d={en:{displayName:"English (US)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},"en-GB":{displayName:"English (GB)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},"es-ES":{displayName:"Espaol (Espaa)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ES-ES.pdf",useAsRoot:!0},ru:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_RU.pdf"},de:{displayName:"Deutsch",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_DE.pdf"},"pt-BR":{displayName:"Portugus (Brasil)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},"pt-PT":{displayName:"Portugus (Portugal)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},ca:{displayName:"Catal",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},fr:{displayName:"Franais",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_FR.pdf"},it:{displayName:"Italiano",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_IT.pdf"},nl:{displayName:"Nederlands",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},no:{displayName:"Norsk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},"sv-SE":{displayName:"Svenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},hr:{displayName:"Hrvatski",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},da:{displayName:"Dansk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},cs:{displayName:"etina",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},tr:{displayName:"Trke",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_TR.pdf"},sl:{displayName:"Slovenina",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_SL.pdf"},lt:{displayName:"Lietuvi",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},pl:{displayName:"Polski",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_PL.pdf"},ro:{displayName:"Romn",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},id:{displayName:"Bahasa Indonesia",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},vi:{displayName:"Ting Vit",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_VI.pdf"},el:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_EL.pdf"},"sr-CS":{displayName:"SRPSKI",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},bg:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_BG.pdf"},mk:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},uk:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},th:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},"zh-CN":{displayName:"",useAsRoot:!0,userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-CN.pdf"},"zh-TW":{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-TW.pdf"},ko:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf"},ja:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_JA.pdf"}},p=function(e,t){if("number"==typeof e)return e;var n;try{var r=JSON.parse(e);for(var s in r.vars)r.vars[s]=p(r.vars[s],t);n=i(r.msg,r.vars,t)}catch(a){n=i(e,null,t)}return n};return t(r(),c),{init:t,locales:c,t:i,detectLanguage:r,currentLanguage:s,enabled_languages:d,unpack:p}}),define("pjs",[],function(){var e=function(e,t,n){function i(e){return"object"==typeof e}function r(e){return"function"==typeof e}function s(){}function a(o,c){function l(){var e=new u;return r(e.init)&&e.init.apply(e,arguments),e}function u(){}c===n&&(c=o,o=Object),l.Bare=u;var h,d=s[e]=o[e],p=u[e]=l[e]=new s;return p.constructor=l,l.mixin=function(t){return u[e]=l[e]=a(l,t)[e],l},(l.open=function(e){if(h={},r(e)?h=e.call(l,p,d,l,o):i(e)&&(h=e),i(h))for(var n in h)t.call(h,n)&&(p[n]=h[n]);return r(p.init)||(p.init=o),l})(c)}return a}("prototype",{}.hasOwnProperty);return e}),define("lib/aria",["require","jquery","pjs"],function(e){var t=e("jquery"),n=e("pjs"),i=n(function(e){e.init=function(){var e=".dcg-aria-alert";t(e).length||t("body").append("<div aria-live='assertive' aria-atomic='true' class='dcg-aria-alert'></div>"),this.jQ=t(e),this.items=[]},e.queue=function(e){return this.items.push(e),this},e.alert=function(e){return e&&this.queue(e),this.items.length&&this.jQ.empty().html(this.items.join(" ").replace(/ +(?= )/g,"")),this.clear()},e.clear=function(){return this.items.length=0,this},e.addAria=function(e){return e.attr("aria-atomic","true").attr("aria-live","assertive")},e.removeAria=function(e){return e.removeAttr("aria-atomic").removeAttr("aria-live")},e.toggleAria=function(e){return e.hasClass("dcg-visible")?this.addAria(e):this.removeAria(e)}});return i()}),define("main/globalhotkeys",["require","jquery","pjs","lib/aria","browser","i18n","keys"],function(e){var t=e("jquery"),n=e("pjs"),i=e("lib/aria"),r=e("browser"),s=e("i18n"),a=e("keys"),o=n(function(e){e.init=function(e,t,n){this.graphSettings=e,this.userController=t,this.instanceHotkeys=n,this.startListening()},e.t=function(e,t){return s.t(e,t,this.graphSettings.language)},e.startListening=function(){this.isListening||(t(document).on("keydown.dcg-global-keyboard-listener",this.handleGlobalKeydown.bind(this)),this.isListening=!0)},e.stopListening=function(){this.isListening&&(t(document).off("keydown.dcg-global-keyboard-listener"),this.isListening=!1)},e.handleGlobalKeydown=function(e){var n=r.IS_APPLE?e.altKey||e.metaKey:e.ctrlKey;if(e.ctrlKey||e.altKey||e.metaKey||e.shiftKey||a.lookup(e)!==a.ESCAPE){if(n&&191===e.which)e.preventDefault(),e.stopPropagation(),this.focusElement(t(document).find(".dcg-action-show-hotkeys"),this.t("Unable to open hotkeys dialog"));else if(e.ctrlKey&&(e.altKey||e.metaKey)&&!e.shiftKey)if("A"===a.lookupChar(e))if(e.preventDefault(),e.stopPropagation(),this.userController.currentUser)this.focusElement(t(document).find(".dcg-account-link"),this.t("Unable to activate account menu"));else{var i=t(document).find(".dcg-sign-in");0!==i.length&&i.trigger("dcg-tap",["keyboard"])}else"L"===a.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.focusElement(t(document).find(".dcg-action-language"),this.t("Unable to activate language menu"))):"H"===a.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.focusElement(t(document).find(".dcg-action-help"),this.t("Unable to activate help menu"))):"S"===a.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.focusElement(t(document).find(".dcg-action-share"),this.t("Unable to activate share menu"))):this.instanceHotkeys.handleInstanceKeydown(e)}else{var s=t(document).find(".action-close-modal:visible");0!==s.length&&s.trigger("dcg-tap",["keyboard"])}},e.focusElement=function(e,t){e.length?e.trigger("dcg-tap",["keyboard"]):t&&i.alert(t)}});return o}),function(){Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r})}(),define("function.bind",function(){}),define("underscore_model",["require","underscore","pjs","function.bind"],function(e){var t=e("underscore"),n=e("pjs");e("function.bind");var i=n(function(e){var n=0,i="guid_"+Math.round(1e6*Math.random())+"_"+(new Date).getTime()+"_";e.init=function(){this.__observers={},this.__eventObservers={},this.__oldProperties={},this.__propertyComparators={},this.guid=i+ ++n},e.unobserveAll=function(){this.__observers={},this.__eventObservers={}},e.getProperty=function(e){return this[e]},e.getOldProperty=function(e){return this.__oldProperties[e]},e.setProperty=function(e,n){var i=this[e],r=this.__propertyComparators[e];if(r){if(r(i,n))return}else if(t.isEqual(i,n))return;this.__oldProperties[e]=i,this[e]=n,this.notifyPropertyChange(e)},e.setProperties=function(e){for(var t in e)e.hasOwnProperty(t)&&this.setProperty(t,e[t])},e.setPropertyComparator=function(e,t){this.__propertyComparators[e]=t},e.notifyPropertyChange=function(e){this.__callObservers(this.__observers,e,this)},e.observe=function(e,t){this.__addObservers(this.__observers,e,t)},e.unobserve=function(e){this.__removeObservers(this.__observers,e)},e.observeAndSync=function(e,t){this.observe(e,t);for(var n=e.split(" "),i=0;i<n.length;i++){var r=n[i].split("."),s=r[0];this.hasOwnProperty(s)&&t(s,this)}},e.triggerEvent=function(e,t){this.__callObservers(this.__eventObservers,e,t)},e.observeEvent=function(e,t){this.__addObservers(this.__eventObservers,e,t)},e.unobserveEvent=function(e){this.__removeObservers(this.__eventObservers,e)},e.__callObservers=function(e,t,n){var i=e[t];if(i)for(var r=0;r<i.length;r++)i[r].callback(t,n)},e.__removeObservers=function(e,t){for(var n=t.split(" "),i=0;i<n.length;i++){var r=n[i].split("."),s=r[0],a=r[1];if(s&&a){var o=e[s],c=[];if(!o)continue;for(var l=0;l<o.length;l++){var u=o[l];u.namespace!==a&&c.push(u)}e[s]=c}else if(s)delete e[s];else if(a)for(s in e)e.hasOwnProperty(s)&&this.__removeObservers(e,s+"."+a)}},e.__addObservers=function(e,t,n){for(var i=t.split(" "),r=0;r<i.length;r++){var s=i[r].split("."),a=s[0];if(!a)throw"Must supply a property to observe";var o=s[1],c={namespace:o,callback:n},l=e[a];l?l.push(c):e[a]=[c]}}});return i}),define("main/url_prefix",["require"],function(e){var t=window.location.href.split("/calculator")[0]+"/calculator";return"file:"===window.location.protocol&&(t="/calculator"),t}),define("main/graph",["require","pjs","underscore_model","main/url_prefix","i18n"],function(e){var t=e("pjs"),n=e("underscore_model"),i=e("main/url_prefix"),r=e("i18n"),s=t(n,function(e,t){var n=["title","thumbURL","stateURL","hash","parentHash","graphData","access","created","example","betchacant"];e.init=function(e){t.init.call(this);var s=this,a=function(){s.displayTitle=s.title||"["+r.t("Untitled Graph")+"]"};this.observe("title",a),a(),this.observe("hash",function(){s.setProperty("path",i+(s.hash?"/"+s.hash:""))}),e&&n.forEach(function(t){e.hasOwnProperty(t)&&s.setProperty(t,e[t])}),this.access||this.setProperty("access","all"),this.path||this.setProperty("path",i),this.example||this.setProperty("example",!1),this.now=new Date},e.copy=function(){return s(this)},e.getCollectionKey=function(){return(this.example?"example-":"")+this.hash},e.displayDate=function(){var e=Date.now(),t=(e-this.created)/1e3,n=t/60,i=n/60,s=i/24,a=s/7,o=[r.t("Jan"),r.t("Feb"),r.t("Mar"),r.t("Apr"),r.t("May"),r.t("Jun"),r.t("Jul"),r.t("Aug"),r.t("Sep"),r.t("Oct"),r.t("Nov"),r.t("Dec")];return a>=5?r.t("on __month__ __day__, __year__",{month:o[this.created.getMonth()],day:this.created.getDate(),year:this.created.getFullYear()}):a>=2?r.t("__number__ weeks ago",{number:String(Math.floor(a))}):s>=7?r.t("last week"):s>=2?r.t("__number__ days ago",{number:String(Math.floor(s))}):i>=24?r.t("yesterday"):i>=2?r.t("__number__ hours ago",{number:String(Math.floor(i))}):n>=60?r.t("one hour ago"):n>=2?r.t("__number__ minutes ago",{number:String(Math.floor(n))}):n>=1?r.t("one minute ago"):r.t("less than a minute ago")},e.plainObject=function(){var e={},t=this;return n.forEach(function(n){e[n]=t[n]}),e}});return s.fromAjax=function(e){return s({title:e.title,thumbURL:e.thumbUrl,stateURL:e.stateUrl,graphData:e.state,hash:e.hash,parentHash:e.parent_hash,access:e.access,created:new Date(e.created),example:!!e.example,betchacant:!!e.betchacant})},s.toAjax=function(e){return{title:e.title,thumbUrl:e.thumbURL,stateUrl:e.stateURL,state:e.graphData,hash:e.hash,parent_hash:e.parentHash,access:e.access,created:e.created.toString()}},s.updateFromSync=function(e,t){e.setProperty("title",t.title),e.setProperty("hash",t.hash),e.setProperty("parentHash",t.parent_hash),e.setProperty("graphData",e.graphData),e.setProperty("thumbURL",t.thumbUrl),e.setProperty("stateURL",t.stateUrl),e.setProperty("created",new Date(t.created))},s}),define("text!example_graphs",[],function(){return'[{"stateUrl":"https://calc-states.s3.amazonaws.com/production/2rnqgoa6a4","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/2rnqgoa6a4.png","hash":"2rnqgoa6a4","title":"Lines: Slope Intercept Form","created":"2015-08-18T19:24:05.378Z","access":"all","parent_hash":"89ndqgh5id","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/onfy0dzx2o","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/onfy0dzx2o.png","hash":"onfy0dzx2o","title":"Lines: Point Slope Form","created":"2015-08-18T20:21:16.780Z","access":"all","parent_hash":"kha6fgxhaf","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/md6buy4efz","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/md6buy4efz.png","hash":"md6buy4efz","title":"Lines: Two Point Form","created":"2015-08-18T20:21:39.575Z","access":"all","parent_hash":"fi71u8ej0q","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/zukjgk9iry","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/zukjgk9iry.png","hash":"zukjgk9iry","title":"Parabolas: Standard Form","created":"2015-08-18T20:22:02.411Z","access":"all","parent_hash":"jv9fmw2qz8","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/8keeh1pt5l","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/8keeh1pt5l.png","hash":"8keeh1pt5l","title":"Parabolas: Vertex Form","created":"2015-08-18T20:22:22.626Z","access":"all","parent_hash":"klodq5d0ph","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/dxkknajdqb","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/dxkknajdqb.png","hash":"dxkknajdqb","title":"Parabolas: Standard Form + Tangent","created":"2015-08-18T20:24:05.891Z","access":"all","parent_hash":"t6auzqijzl","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/kihjluohq9","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/kihjluohq9.png","hash":"kihjluohq9","title":"Trigonometry: Period and Amplitude","created":"2015-08-18T20:24:32.570Z","access":"all","parent_hash":"vpnnmvncdb","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/l3u8133jwj","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/l3u8133jwj.png","hash":"l3u8133jwj","title":"Trigonometry: Phase","created":"2015-08-18T20:24:53.936Z","access":"all","parent_hash":"51d9lso1ia","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/mp7qmv1igx","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/mp7qmv1igx.png","hash":"mp7qmv1igx","title":"Trigonometry: Wave Interference","created":"2015-08-18T20:25:55.647Z","access":"all","parent_hash":"0hcemdnmmw","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/qmzx2skkzy","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/qmzx2skkzy.png","hash":"qmzx2skkzy","title":"Trigonometry: Unit Circle","created":"2015-08-18T20:26:18.276Z","access":"all","parent_hash":"s9myfmvujr","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/ivud1auwvw","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/ivud1auwvw.png","hash":"ivud1auwvw","title":"Conic Sections: Circle","created":"2015-08-18T20:27:04.445Z","access":"all","parent_hash":"8dsmqe5ycc","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/djcrjdfiif","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/djcrjdfiif.png","hash":"djcrjdfiif","title":"Conic Sections: Parabola and Focus","created":"2015-08-18T20:27:50.487Z","access":"all","parent_hash":"0jwlvn9hcs","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/afja7ee9mh","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/afja7ee9mh.png","hash":"afja7ee9mh","title":"Conic Sections: Ellipse with Foci","created":"2015-08-18T20:28:08.499Z","access":"all","parent_hash":"duajwxdopa","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/vgfqbejegx","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/vgfqbejegx.png","hash":"vgfqbejegx","title":"Conic Sections: Hyperbola","created":"2015-08-18T20:28:27.874Z","access":"all","parent_hash":"k6xcbueze5","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/0ovfwwmfrb","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/0ovfwwmfrb.png","hash":"0ovfwwmfrb","title":"Polar: Rose","created":"2015-08-18T20:28:48.832Z","access":"all","parent_hash":"scuci1750d","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/qlbdlxyrza","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/qlbdlxyrza.png","hash":"qlbdlxyrza","title":"Polar: Logarithmic Spiral","created":"2015-08-18T20:29:08.282Z","access":"all","parent_hash":"nicremwert","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/rayzacuktw","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/rayzacuktw.png","hash":"rayzacuktw","title":"Polar: Limacon","created":"2015-08-18T20:29:25.878Z","access":"all","parent_hash":"21pbohd07u","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/gxnu7fbgks","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/gxnu7fbgks.png","hash":"gxnu7fbgks","title":"Polar: Conic Sections","created":"2015-08-18T20:29:42.487Z","access":"link","parent_hash":"kk3axf8oon","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/rnyjcjpouf","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/rnyjcjpouf.png","hash":"rnyjcjpouf","title":"Parametric: Introduction","created":"2015-08-18T20:30:31.353Z","access":"all","parent_hash":"ogvj2tzgjj","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/eg5he4xpg9","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/eg5he4xpg9.png","hash":"eg5he4xpg9","title":"Parametric: Cycloid","created":"2015-08-18T20:30:46.372Z","access":"link","parent_hash":"pwjl3pe4da","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/nqxx2mhknn","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/nqxx2mhknn.png","hash":"nqxx2mhknn","title":"Transformations: Translating a Function","created":"2015-08-18T21:23:00.424Z","access":"link","parent_hash":"0ksctv1hm4","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/vdkjrpznnu","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/vdkjrpznnu.png","hash":"vdkjrpznnu","title":"Transformations: Scaling a Function","created":"2015-08-18T21:23:20.484Z","access":"link","parent_hash":"doxva7ciht","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/fcjhdt1xdw","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/fcjhdt1xdw.png","hash":"fcjhdt1xdw","title":"Transformations: Inverse of a Function","created":"2015-08-18T21:23:36.776Z","access":"link","parent_hash":"tif5liedlj","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/jwquvmikhr","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/jwquvmikhr.png","hash":"jwquvmikhr","title":"Statistics: Linear Regression","created":"2015-08-18T21:24:01.998Z","access":"link","parent_hash":"2l0r87hkmq","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/paknt6oneh","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/paknt6oneh.png","hash":"paknt6oneh","title":"Statistics: Anscomb\'s Quartet","created":"2015-08-18T21:24:19.652Z","access":"link","parent_hash":"c5wffk3gnd","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/sanlujpfmc","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/sanlujpfmc.png","hash":"sanlujpfmc","title":"Statistics: 4th Order Polynomial","created":"2015-08-18T21:25:02.018Z","access":"all","parent_hash":"tyszvsmelo","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/iwfjdrhdyr","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/iwfjdrhdyr.png","hash":"iwfjdrhdyr","title":"Lists: Family of sin Curves","created":"2015-08-18T21:25:30.069Z","access":"link","parent_hash":"4n11jtzki0","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/ib4qkln029","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/ib4qkln029.png","hash":"ib4qkln029","title":"Lists: Curve Stitching","created":"2016-05-05T06:33:59.891Z","access":"link","parent_hash":"1flkupc1yt","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/zdv2kras4n","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/zdv2kras4n.png","hash":"zdv2kras4n","title":"Lists: Plotting a List of Points","created":"2015-08-18T21:27:01.962Z","access":"link","parent_hash":"fqhp5hq3ka","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/qtzamwcdrk","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/qtzamwcdrk.png","hash":"qtzamwcdrk","title":"Calculus: Derivatives","created":"2015-08-18T21:27:17.187Z","access":"link","parent_hash":"aqgbwm3qfd","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/mekfho0w38","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/mekfho0w38.png","hash":"mekfho0w38","title":"Calculus: Secant Line","created":"2015-08-18T21:27:32.274Z","access":"link","parent_hash":"irip8pnpdf","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/fs3lx8gptb","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/fs3lx8gptb.png","hash":"fs3lx8gptb","title":"Calculus: Tangent Line","created":"2015-08-18T21:27:46.455Z","access":"link","parent_hash":"dlzhsldcgo","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/noanuckuli","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/noanuckuli.png","hash":"noanuckuli","title":"Calculus: Taylor Expansion of sin(x)","created":"2015-08-18T21:28:02.855Z","access":"link","parent_hash":"gkjridbqfj","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/qigfpckugc","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/qigfpckugc.png","hash":"qigfpckugc","title":"Calculus: Integrals","created":"2016-04-19T14:03:33.013Z","access":"link","parent_hash":null,"example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/u2qz73ufju","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/u2qz73ufju.png","hash":"u2qz73ufju","title":"Calculus: Integral with adjustable bounds","created":"2016-04-19T14:12:40.336Z","access":"link","parent_hash":"o3pwn3vkgh","example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/gaa5aqyb5s","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/gaa5aqyb5s.png","hash":"gaa5aqyb5s","title":"Calculus: Fundamental Theorem of Calculus","created":"2016-04-19T14:15:45.211Z","access":"link","parent_hash":null,"example":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/8hxtdephtf","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/8hxtdephtf.png","hash":"8hxtdephtf","title":"Pac Man","created":"2015-04-20T14:47:01.468Z","access":"link","parent_hash":"xova2bfhj5","example":true,"betchacant":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/dhzndt8brx","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/dhzndt8brx.png","hash":"dhzndt8brx","title":"3D World","created":"2016-06-03T01:50:06.425Z","access":"link","parent_hash":"brei8peg52","example":true,"betchacant":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/zzhx3zzlns","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/zzhx3zzlns.png","hash":"zzhx3zzlns","title":"Checkerboard Inversion","created":"2016-06-02T22:06:08.277Z","access":"link","parent_hash":"ccmfndxptv","example":true,"betchacant":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/c1u72uowae","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/c1u72uowae.png","hash":"c1u72uowae","title":"Regular Sine Wave?","created":"2013-08-18T06:25:20.605Z","access":"link","parent_hash":null,"example":true,"betchacant":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/2mwse3jtff","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/2mwse3jtff.png","hash":"2mwse3jtff","title":"Fastest Path to a Point","created":"2016-06-02T22:02:44.839Z","access":"link","parent_hash":"msmdonti4c","example":true,"betchacant":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/8ytrg3nyln","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/8ytrg3nyln.png","hash":"8ytrg3nyln","title":"Fireworks!","created":"2016-06-03T01:50:52.464Z","access":"link","parent_hash":"d7qrsg2hxg","example":true,"betchacant":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/9ed6k6wexp","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/9qixqdozzh.png","hash":"9ed6k6wexp","title":"Fractal Valentine","created":"2015-02-14T18:42:18.283Z","access":"link","parent_hash":"9ed6k6wexp","example":true,"betchacant":true},{"stateUrl":"https://calc-states.s3.amazonaws.com/production/am6ab20tmw","thumbUrl":"https://s3.amazonaws.com/calc_thumbs/production/am6ab20tmw.png","hash":"am6ab20tmw","title":"Outstretched Arm","created":"2016-06-03T01:45:50.594Z","access":"link","parent_hash":"hvycjwscfq","example":true,"betchacant":true}]\n';
}),define("main/backend",["require","jquery"],function(require){var $=require("jquery"),Backend={baseURL:"",getGoogleLoginURL:function(){return Backend.baseURL+"/drive_api/calculator/login"},exchangeGoogleAuthCode:function(e){var t=Backend.baseURL+"/account/google_auth?code="+e,n=$.Deferred();return e?$.getJSON(t).always(function(e){e&&e.success?n.resolve():n.reject()}):setTimeout(function(){n.reject("no auth code")},1),n.promise()},handleDeprecatedRoute:function(msg){if(msg&&msg.routeDeprecated){msg.js&&eval(msg.js);var deferred=$.Deferred();return deferred.reject(msg),deferred.promise()}return msg},post:function(e,t){return $.post(Backend.baseURL+e,t).then(Backend.handleDeprecatedRoute)},getJSON:function(e){return $.getJSON(Backend.baseURL+e).then(Backend.handleDeprecatedRoute)}};return Backend}),define("main/account_backend",["require","./backend"],function(e){var t=e("./backend"),n={logout:function(){return t.post("/account/logout_xhr")},fetchUser:function(e){var n=function(){return t.post("/account/login_xhr",e)};return this.logout().then(n,n).then(this.getUserInfo)},getUserInfo:function(){return t.getJSON("/account/user_info")},registerUser:function(e){return t.post("/account/register_xhr",e).then(this.getUserInfo)},editAccount:function(e){return t.post("/account/edit_account_xhr",e).then(this.getUserInfo)},recoverPassword:function(e){return t.post("/account/recover_xhr",e)}};return n}),define("main/user",["require","pjs","underscore_model"],function(e){var t=e("pjs"),n=e("underscore_model"),i=t(n,function(e,t){var n=["name","email"];e.init=function(e){t.init.call(this);var i=this;e&&n.forEach(function(t){e.hasOwnProperty(t)&&i.setProperty(t,e[t])})},e.toJSON=function(){var e={},t=this;return n.forEach(function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e},e.firstName=function(){if(!this.name)return null;if(this.name.match(/[\d@_&\.\']/))return this.name;var e=this.name.split(" ");return e[0].length>=3?e[0]:this.name}});return i}),define("main/user_controller",["require","pjs","jquery","underscore_model","main/account_backend","main/user"],function(e){var t=e("pjs"),n=e("jquery"),i=e("underscore_model"),r=e("main/account_backend"),s=e("main/user"),a=t(i,function(e,t){e.init=function(e){t.init.call(this),this.graphsController=e;var i=this;n.ajaxSetup({statusCode:{401:function(){i.logout()}}})},e.desmosLogin=function(e){return r.fetchUser(e).done(this.completeLogin.bind(this))},e.googleLogin=function(e){this.triggerEvent("googleLogin",e)},e.driveCallback=function(){return r.getUserInfo().then(this.completeLogin.bind(this),this.logout.bind(this))},e.createAccount=function(e){return r.registerUser(e).done(this.completeLogin.bind(this))},e.editAccount=function(e){var t=this.currentUser,n=this;return r.editAccount(e).done(function(e){t.setProperty("name",e.name),t.setProperty("email",e.email),n.notifyPropertyChange("currentUser")})},e.recoverPassword=function(e){return r.recoverPassword(e)},e.completeLogin=function(e,t){this.setProperty("currentUser",s(e)),this.graphsController.refreshGraphs()},e.logout=function(){return this.triggerEvent("logout"),r.logout().done(this.completeLogout.bind(this))},e.completeLogout=function(){this.setProperty("currentUser",null),this.graphsController.clear()}});return a}),define("main/calculator_backend",["require","jquery","main/graph","./backend"],function(e){var t=e("jquery"),n=e("main/graph"),i=e("./backend"),r={saveGraph:function(e,r){if(!r.hasOwnProperty("myGraphs"))throw new Error("Argument Error: saveGraph options must specify myGraphs");if(!r.hasOwnProperty("isUpdate"))throw new Error("Argument Error: saveGraph options must specify isUpdate");var s=r.myGraphs&&t('input[name="push_to_drive"]').prop("checked")?"push_to_drive":void 0,a=t('input[name="access"]').prop("checked")?"all":"link",o={parent_hash:e.parentHash,thumb_data:e.thumbURL,graph_hash:e.hash,version:"h3",access:a,my_graphs:r.myGraphs,is_update:r.isUpdate,title:e.title||void 0,push_to_drive:s};return o.calc_state=e.graphData,i.post("/api/v1/calculator/save",o).then(function(t){return n.updateFromSync(e,t),e})},emailGraph:function(e){return i.post("/api/v1/calculator/email_graph",e)},emailFeedback:function(e){return i.post("/api/v1/calculator/email_feedback",e)},allowFeature:function(e){return i.post("/api/v1/calculator/allow_feature",e)},getGraphs:function(){return i.getJSON("/api/v1/calculator/my_graphs")},removeGraph:function(e){return i.post("/api/v1/calculator/my_graphs/remove",{hash:e.hash})}};return r}),define("main/parse_json_errors",["require","jquery","i18n"],function(e){var t=e("jquery"),n=e("i18n"),i=function(e){if(0===e.status)return[{message:n.t("Connection failed. Check your internet connection?")}];try{return t.parseJSON(e.responseText).errors}catch(i){return[{message:n.t("Unexpected server error. Try again, or e-mail calculator@desmos.com.")}]}};return i}),define("lib/random_hash",["require","exports","module"],function(e,t){function n(e){this.bauArc4=new s(r(e))}function i(e){return e&o-1}function r(e){var t,n=e+"",r=[],s=0;for(t=0;t<n.length;t++)r[i(t)]=i((s^=19*r[i(t)])+n.charCodeAt(t));return r}function s(e){var t,n,r=this,s=e.length,a=0,c=r.i=r.j=r.m=0;for(r.S=[],r.c=[],s||(e=[s++]);o>a;)r.S[a]=a++;for(a=0;o>a;a++)t=r.S[a],c=i(c+t+e[a%s]),n=r.S[c],r.S[a]=n,r.S[c]=t;r.g=function(e){var t=r.S,n=i(r.i+1),s=t[n],a=i(r.j+s),c=t[a];t[n]=c,t[a]=s;for(var l=t[i(s+c)];--e;)n=i(n+1),s=t[n],a=i(a+s),c=t[a],t[n]=c,t[a]=s,l=l*o+t[i(s+c)];return r.i=n,r.j=a,l},r.g(o)}n.prototype.g=function(e){for(var t=Array(e),n=0;e>n;n++)t[n]=this.bauArc4.g(1);return t};var a,o=256,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=c.toLowerCase(),u=62,h=10,d=function(e){if(!e||!e.length||e.length<32)throw new Error("You must supply a seed to RandomHashFactory. It should have at least 128 bits of entropy, but was "+e);var t=new n(e);this.next=function(){for(var e,n=Array(h),i=0;h>i;)e=t.g(1)[0]>>2,u>e&&(n[i]=l[e],i++);return n.join("")},this.nextSeed=function(){for(var e=16,n=t.g(e),i=Array(e),r=0;e>r;r++)i[r]=n[r].toString(16),1===i[r].length&&(i[r]="0"+i[r]);return i.join("")}};return t.next=function(){if(!a)throw"Random Hash Factory not initialized";return a.next()},t.nextSeed=function(){if(!a)throw"Random Hash Factory not initialized";return a.nextSeed()},t.init=function(e){a=new d(e)},t}),define("animation-frame",["require"],function(e){var t=0,n=function(e,n){var i=(new Date).getTime(),r=Math.max(0,16-(i-t)),s=window.setTimeout(function(){e(i+r)},r);return t=i+r,s};return window.requestAnimationFrame&&window.cancelAnimationFrame?{requestAnimationFrame:window.requestAnimationFrame.bind(window),cancelAnimationFrame:window.cancelAnimationFrame.bind(window)}:{requestAnimationFrame:n,cancelAnimationFrame:window.clearTimeout.bind(window)}}),function(e){"function"==typeof define&&define.amd?define("vendor/jQuery.XDomainRequest",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){if(e.support.cors||!e.ajaxTransport||!window.XDomainRequest)return e;var t=/^(https?:)?\/\//i,n=/^get|post$/i,i=new RegExp("^(//|"+location.protocol+")","i");return e.ajaxTransport("* text html xml json",function(r,s,a){if(r.crossDomain&&r.async&&n.test(r.type)&&t.test(r.url)&&i.test(r.url)){var o=null;return{send:function(t,n){var i="",a=(s.dataType||"").toLowerCase();o=new XDomainRequest,/^\d+$/.test(s.timeout)&&(o.timeout=s.timeout),o.ontimeout=function(){n(500,"timeout")},o.onload=function(){var t="Content-Length: "+o.responseText.length+"\r\nContent-Type: "+o.contentType,i={code:200,message:"success"},r={text:o.responseText};try{if("html"===a||/text\/html/i.test(o.contentType))r.html=o.responseText;else if("json"===a||"text"!==a&&/\/json/i.test(o.contentType))try{r.json=e.parseJSON(o.responseText)}catch(s){i.code=500,i.message="parseerror"}else if("xml"===a||"text"!==a&&/\/xml/i.test(o.contentType)){var c=new ActiveXObject("Microsoft.XMLDOM");c.async=!1;try{c.loadXML(o.responseText)}catch(s){c=void 0}if(!c||!c.documentElement||c.getElementsByTagName("parsererror").length)throw i.code=500,i.message="parseerror","Invalid XML: "+o.responseText;r.xml=c}}catch(l){throw l}finally{n(i.code,i.message,r,t)}},o.onprogress=function(){},o.onerror=function(){n(500,"error",{text:o.responseText})},s.data&&(i="string"===e.type(s.data)?s.data:e.param(s.data)),o.open(r.type,r.url),o.send(i)},abort:function(){o&&o.abort()}}}}),e}),define("main/graphs_controller",["require","jquery","underscore","pjs","main/graph","main/calculator_backend","main/parse_json_errors","underscore_model","i18n","lib/random_hash","animation-frame","vendor/jQuery.XDomainRequest"],function(e){var t=e("jquery"),n=e("underscore"),i=e("pjs"),r=e("main/graph"),s=e("main/calculator_backend"),a=e("main/parse_json_errors"),o=e("underscore_model"),c=e("i18n"),l=e("lib/random_hash"),u=e("animation-frame");e("vendor/jQuery.XDomainRequest");var h=i(o,function(e,i){e.init=function(e,s,a){i.init.call(this),this.observe("currentGraph",this.onCurrentGraphChange.bind(this)),this.Calc=e,this.undoRedo=e._calc.undoRedo,this.previousGraph=void 0,this.randomHash=l,this.seedRandom(a),this.__visitedGraphs={},this.__savedGraphs=[];var o=s.map(r.fromAjax);this.__exampleGraphs=n.filter(o,function(e){return!e.betchacant}),this.__betchacantGraphs=n.filter(o,function(e){return e.betchacant}),this.__graphInfoCache={},this.__exampleGraphs.forEach(function(e){this._addGraphToCache(e)}.bind(this)),this.__betchacantGraphs.forEach(function(e){this._addGraphToCache(e)}.bind(this)),this.saving=!1,this.recentSaveSuccess=!1,this.recentSaveFailure=!1,this.syncError=!1,this.isLoadingGraphs=!1,this.enableLoadingGraphStates();var c=!1;t(window).on("load",function(){c=!0,setTimeout(function(){c=!1},0)});var u=this;t(window).on("popstate",function(e){c||u.popState(e)})},e.seedRandom=function(e){if(!e)return void alert(c.t("Something went wrong, please report this to desmos.com support. (Error __error_num__)",{error_num:"77361"}));var t=new Date,n=""+e+t.getTime()+t.getMilliseconds();this.randomHash.init(n)},e.requestDeleteGraph=function(e){var t=this._getCachedGraphInfo(e);t.canCancelDelete=!0,t.deleteTimeout=setTimeout(this._deleteGraph.bind(this,e),3e3),t.isDeletingGraph=!0,t.didDeleteGraphFail=!1,this.triggerEvent("listChanged")},e._removeGraphByHash=function(e){var t=n.indexOf(n.pluck(this.__savedGraphs,"hash"),e);-1!==t&&this.__savedGraphs.splice(t,1)},e._deleteGraph=function(e){var t=this,n=e.hash,i=this._getCachedGraphInfo(e);i.canCancelDelete=!1,t.triggerEvent("listChanged"),s.removeGraph(e).done(function(){t._removeGraphByHash(n)}).fail(function(){i.didDeleteGraphFail=!0}).always(function(){i.isDeletingGraph=!1,t.triggerEvent("listChanged")})},e.cancelDeleteGraph=function(e){var t=this._getCachedGraphInfo(e);clearTimeout(t.deleteTimeout),t.isDeletingGraph=!1,t.didDeleteGraphFail=!1,t.canCancelDelete=!1,this.triggerEvent("listChanged")},e.millisecondsSinceSync=function(){return this.lastSync?new Date-this.lastSync:1/0},e.clear=function(){this.setProperty("lastSync",void 0),this.setSavedGraphsFromJSON([])},e.triggerSaveSuccess=function(){this.setProperty("saving",!1),this.setProperty("recentSaveSuccess",!0),this.setProperty("lastSaveFailureMessage",void 0),this.recentSaveTimeout=setTimeout(function(){this.setProperty("recentSaveSuccess",!1)}.bind(this),3e3)},e.triggerSaveError=function(e){var t=e.length&&e[0].message?e[0].message:c.t("Unexpected error.");this.setProperty("saving",!1),this.setProperty("recentSaveFailure",!0),this.setProperty("lastSaveFailureMessage",t),this.recentSaveTimeout=setTimeout(function(){this.setProperty("recentSaveFailure",!1)}.bind(this),6e4)},e.updateGraphData=function(e){var t=JSON.stringify(this.Calc.getState());e.setProperty("graphData",t),e.setProperty("parentHash",e.hash),e.setProperty("hash",this.randomHash.next());var n=this.Calc.screenshot({width:200,height:200,targetPixelRatio:2});e.setProperty("thumbURL",n)},e.saveAs=function(e){this.save(e,!0)},e.clearSaveTimeout=function(){this.setProperty("recentSaveFailure",!1),this.setProperty("recentSaveSuccess",!1),this.setProperty("lastSaveFailureMessage",void 0),clearTimeout(this.recentSaveTimeout)},e.save=function(e,t){var n=this.currentGraph,i=this;i.currentGraph.title=e.title,i.clearSaveTimeout(),i.setProperty("saving",!0),e=e.copy(),i.updateGraphData(e);var r=!t&&i.isSavedGraph(n);s.saveGraph(e,{myGraphs:!0,isUpdate:r}).done(function(e){i.setProperty("currentGraph",e.copy()),r&&i._removeGraphByHash(e.parentHash),i.__savedGraphs.unshift(e),i._addGraphToCache(e),i.triggerEvent("listChanged"),i.triggerSaveSuccess()}).fail(function(e){i.triggerSaveError(a(e))})},e.isSavedGraph=function(e){if(!e||!e.hash)return!1;var t=e.hash;return n.any(this.__savedGraphs,function(e){return e.hash===t})},e.wasCurrentGraphEverSaved=function(){return this.isSavedGraph(this.currentGraph)},e.refreshGraphs=function(){var e=this;e.setProperty("isLoadingGraphs",!0),e.setProperty("syncError",!1),s.getGraphs().done(function(t){e.setProperty("lastSync",new Date),e.setSavedGraphsFromJSON(t.myGraphs)}).fail(function(){e.setProperty("syncError",!0)}).always(function(){e.setProperty("isLoadingGraphs",!1)})},e.getSavedGraphs=function(){return this.__savedGraphs.slice(0)},e.getExampleGraphs=function(){return this.__exampleGraphs.slice(0)},e.getBetchacantGraphs=function(){return this.__betchacantGraphs.slice(0)},e.getSavedAndExampleGraphs=function(){return this.__savedGraphs.concat(this.__exampleGraphs)},e.setSavedGraphsFromJSON=function(e){e||(e=[]),this.__savedGraphs=e.map(function(e){var t=r.fromAjax(e),n=this._getCachedGraphInfo(t);return n?n.graph:(this._addGraphToCache(t),t)}.bind(this)),this.lazyLoadGraphStates(),this.triggerEvent("listChanged")},e.getSavedGraphsAsJSON=function(){return this.__savedGraphs.map(r.toAjax)},e.enableLoadingGraphStates=function(){clearTimeout(this.__loadNextGraphStateTimeout);var e=function(){this._loadNextGraphState(),this.__loadNextGraphStateTimeout=setTimeout(e,50)}.bind(this);e()},e.disableLoadingGraphStates=function(){clearTimeout(this.__loadNextGraphStateTimeout)},e._loadNextGraphState=function(){if(!this.__currentAjaxRequest){var e=this._dequeueGraphInfo();e&&(this.__currentAjaxRequest=this.loadGraphImmediately(e.graph),this.__currentAjaxRequest.always(function(){this.__currentAjaxRequest=void 0}.bind(this)))}},e.loadGraphImmediately=function(e){var n=t.Deferred();if(!e.graphData){var i=this._getSameSchemeURL(e.stateURL),r=this._getCachedGraphInfo(e);return r.isDataLoading=!0,t.getJSON(i).done(function(t){e.graphData=t,r.didDataLoadFail=!1,n.resolve(t)}).fail(function(e){r.didDataLoadFail=!0,n.reject(e)}.bind(this)).always(function(e){r.isDataLoading=!1,this.triggerEvent("listChanged")}.bind(this))}return u.requestAnimationFrame(function(){n.resolve()}),n},e._getSameSchemeURL=function(e){return"file:"===window.location.protocol?e:"https:"===e.slice(0,6)?window.location.protocol+e.slice(6):e},e._getCachedGraphInfo=function(e){return e&&this.__graphInfoCache[e.getCollectionKey()]},e._addGraphToCache=function(e){this.__graphInfoCache[e.getCollectionKey()]={graph:e}},e._enqueueGraphInfo=function(e){this.__nextAjaxRequestPriority||(this.__nextAjaxRequestPriority=0),e.ajaxPriority=++this.__nextAjaxRequestPriority},e._dequeueGraphInfo=function(){var e=n.max(this.__graphInfoCache,"ajaxPriority");return n.isObject(e)?(delete e.ajaxPriority,e):null},e.loadDataForGraph=function(e){if(e){var t=this._getCachedGraphInfo(e);if(!t)throw new Error('graphsController does not have a reference to graph with hash "'+e.hash+'"');t.graph.graphData||(t.isDataLoading=!0,t.didDataLoadFail=!1,this._enqueueGraphInfo(t),this.triggerEvent("loadingGraphData"))}},e.lazyLoadGraphStates=function(){for(var e=20,t=this.getSavedAndExampleGraphs(),n=Math.min(e,t.length)-1;n>=0;n--)this.loadDataForGraph(t[n])},e.didDataLoadFail=function(e){var t=this._getCachedGraphInfo(e);return!(!t||!t.didDataLoadFail)},e.didDeleteGraphFail=function(e){var t=this._getCachedGraphInfo(e);return!(!t||!t.didDeleteGraphFail)},e.isDeletingGraph=function(e){var t=this._getCachedGraphInfo(e);return!(!t||!t.isDeletingGraph)},e.canCancelDelete=function(e){var t=this._getCachedGraphInfo(e);return!(!t||!t.canCancelDelete)},e.loadGraph=function(e){this.previousGraph=this.currentGraph?this.currentGraph.copy():r(),this.previousGraph.graphData=JSON.stringify(this.Calc.getState());var t=e.copy();delete t.example,this.Calc.setState(t.graphData),this.setProperty("currentGraph",t),this.undoRedo.clear(),this.Calc._calc.graphChangeMonitor.setProperty("hasUnsavedChanges",!1)},e.restorePreviousGraph=function(){this.loadGraph(this.previousGraph||r())},e.clearGraph=function(){this.loadGraph(r()),this.Calc._calc.addFocus()},e.onCurrentGraphChange=function(){var e=this.currentGraph;document.title=e.title||c.t("Desmos Graphing Calculator"),this.pushState(e)},e.pushState=function(e){if(window.history&&history.pushState){this.__visitedGraphs[e.hash]=e;var t=e.path;t&&(window.location.search&&(t+=window.location.search),t!==window.location.href&&history.pushState(e.hash,e.title,t))}},e.clearGraphByUserAction=function(){if(this.currentGraph.hash&&window.history.pushState)return this.clearGraph(),void this.Calc._calc.toast(c.t("New graph created."),{undoCallback:function(){window.history.back()}});var e=this.Calc.getState(),t=this;this.clearGraph(),this.Calc._calc.toast(c.t("Graph cleared!"),{undoCallback:function(){t.Calc.setState(e)}})},e.popState=function(e){if(this.Calc.hasUnsavedChanges()&&!confirm(c.t("Are you sure you want to leave this graph? Your unsaved work will be lost.")))return void history.forward();var t=e.originalEvent.state;if(null===t)return void this.loadGraph(r());if(this.currentGraph.hash!==t)if(this.__visitedGraphs.hasOwnProperty(t)){var n=this.__visitedGraphs[t];this.loadGraph(n)}else this.loadGraph(r())}});return h}),define("underscore_view",["require","jquery","underscore","./underscore_model","pjs","i18n"],function(e){var t=e("jquery"),n=e("underscore"),i=e("./underscore_model"),r=e("pjs"),s=e("i18n"),a=[],o=r(i,function(e,i,r){r.staticTemplate=function(e){var n=t(e)[0];return function(){return n.cloneNode(!0)}},e.$=function(e){var n=t(this.__domNode);return e?n.filter(e).add(n.find(e)):n};var o=function(e){return function(n){var i=0===a.length;if(a.push(this),this.__domNode||c.call(this),t(n)[e](this.$()),i)for(;a.length;)a.pop().didInsertElement();return this.$()}};e.appendTo=o("append"),e.replace=o("replaceWith"),e.prependTo=o("prepend"),e.insertAfter=o("after"),e.insertBefore=o("before"),e.remove=function(){this.$().remove(),this.destruct()},e.destruct=function(){},e.didCreateElement=function(){},e.didInsertElement=function(){},e.getTemplateParams=function(){return{}},e.beforeRerender=function(){},e.afterRerender=function(){},e.rerender=function(){var e=this.getTemplateParams();if(!n.isEqual(e,this.__lastRenderParams)){var t=this.__domNode;this.beforeRerender(),c.call(this),this.replace(t),this.afterRerender()}},e.setDomNode=function(e){this.__domNode=e[0]?e[0]:e,this.didInsertElement()};var c=function(){var e=this.getTemplateParams(),i=n.extend({},e);i.t||(i.t=s.t.bind(s));var r,a=this.template(i);if(r=t("string"==typeof a?t.parseHTML(a.trim()):a),1!==r.length)throw new Error("Template Error: template must return exactly one DOM node.");this.__domNode=r[0],this.__lastRenderParams=e,this.didCreateElement()}});return o}),define("template",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("template!modal_container",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="<div class='dcg-modal-container' role='dialog'>\n  <div class='dcg-modal-background action-close-modal'></div>\n  <div class='modal dcg-state-modals'>\n    <span role='link' tabindex=0 aria-label='"+(null==(__t=t("Close Dialog"))?"":_.escape(__t))+"' class='action-close-modal close-modal dcg-icon-remove internal-close'></span>\n  </div>\n  <span role='link' tabindex=0 aria-label='"+(null==(__t=t("Close Dialog"))?"":_.escape(__t))+"' class='action-close-modal close-modal dcg-icon-remove external-close'></span>\n</div>\n";return __p}}),define("touchtracking",["require","jquery","ipad.ghostevents","keys"],function(e){var t=e("jquery"),n=e("ipad.ghostevents"),i=e("keys");n.isGhostEvent=function(e){return window.PointerEvent?!1:c===s||S()?e.target===f?!1:e.target&&t.contains(e.target,f)?!1:f&&t.contains(f,e.target)?!1:!0:!1};var r=0,s=1,a=2,o=3,c=r,l={},u={},h=[],d=0,p=null,f=null,m=null,g=[],v=function(e){for(var t=[];e;)t.push(e),e=e.parentNode;return t},y=function(e){for(var n=[],i=0;i<e.length;i++){var r=e[i];if(n.push(r),t(r).hasClass("dcg-tap-container"))return n}return[]},b=function(e){f=null,"mousedown"===e.type?(c=a,h=v(e.target)):"keydown"===e.type?(c=o,h=v(e.target)):"pointerdown"===e.type||"MSPointerDown"===e.type?(c=s,h=v(e.target)):(c=s,h=v(e.originalEvent.touches[0].target)),t(y(h)).addClass("dcg-depressed"),t(h).each(function(){var e=t(this);e.data({originalScrollTop:e.scrollTop(),originalScrollLeft:e.scrollLeft()}),x(e)&&e.addClass("dcg-focus-by-tap")}),u={}},_=function(e){return e.is("input, textarea, select")||e.hasClass("dcg-mathquill-input-span")},x=function(e){return c!==o&&!_(e)},w=function(e){f=null,t(".dcg-depressed").removeClass("dcg-depressed");var n=t(":focus");if(x(n)&&n.blur(),t(".dcg-focus-by-tap").removeClass("dcg-focus-by-tap"),t(h).each(function(){var e=t(this),n=e.data("originalScrollTop")-e.scrollTop(),i=e.data("originalScrollLeft")-e.scrollLeft();(n||i)&&(u.scroll=!0)}),1===u["dcg-tapstart"]&&1===u["dcg-tapend"]&&!u["dcg-tapcancel"]&&!u.scroll)for(var i="mouse"===e.device?e.pageX:e.originalEvent.changedTouches[0].pageX,a="mouse"===e.device?e.pageY:e.originalEvent.changedTouches[0].pageY,o=!1,l=0;l<h.length&&!o;l++){var m=t(h[l]),g=m.offset();if("true"===m.attr("tapboundary")&&(o=!0),g){if(i<g.left||a<g.top)continue;if(i>g.left+m.outerWidth())continue;if(a>g.top+m.outerHeight())continue}f=m[0],E("dcg-tap",e,f);break}c===s&&(p=setTimeout(function(){p=null,d=(new Date).getTime()},1e3)),h=[],c=r},S=function(){return p||(new Date).getTime()-d<500},k=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push({identifier:i.identifier,x:i.pageX,y:i.pageY,screenX:i.screenX,screenY:i.screenY,pageX:i.pageX,pageY:i.pageY,clientX:i.clientX,clientY:i.clientY})}return t},E=function(e,n,i){if("dcg-tapstart"===e)l[n.identifier]={type:e,pageX:n.originalEvent.changedTouches[0].pageX,pageY:n.originalEvent.changedTouches[0].pageY};else if("dcg-tapmove"===e){var r=n.originalEvent.changedTouches[0],a=l[n.identifier];if(a&&r.pageX===a.pageX&&r.pageY===a.pageY)return;if(c===s&&a&&"dcg-tapstart"===a.type&&Math.abs(a.pageX-r.pageX)+Math.abs(a.pageY-r.pageY)<2)return;l[n.identifier]={type:e,pageX:n.originalEvent.changedTouches[0].pageX,pageY:n.originalEvent.changedTouches[0].pageY}}void 0===u[e.toLowerCase()]?u[e.toLowerCase()]=1:u[e.toLowerCase()]++;var h=t.event.fix(n.originalEvent);h.type=e,h.device=c===s?"touch":c===o?"keyboard":"mouse",h.touches=k(n.originalEvent.touches),h.changedTouches=k(n.originalEvent.changedTouches),h.target=i?i:n.target;var d=u["dcg-longhold"]>0;h.wasLongheld=function(){return d},h.preventTap=function(){u["dcg-tapcancel"]=1},clearTimeout(m),"dcg-tapstart"===h.type&&1===h.touches.length&&(m=setTimeout(function(){E("dcg-longhold",n,i)},500)),t(h.target).trigger(h)},T=function(e){var n=h,i=!!h.length,r=t.makeArray(t(".dcg-hovered")),s=[],a=[],o=[];y(v(e)).forEach(function(e){i&&-1===n.indexOf(e)||(-1===r.indexOf(e)&&o.push(e),s.push(e))});for(var c=0;c<r.length;c++)e=r[c],-1===s.indexOf(e)&&a.push(e);t(a).removeClass("dcg-hovered").trigger("tipsyhide"),t(o).addClass("dcg-hovered").trigger("tipsyshow")},C=function(e){for(var t=0;t<g.length;t++)if(g[t].pointerId===e)return g.splice(t,1)[0]},M=function(e){return"touch"===e.originalEvent.pointerType||2===e.originalEvent.pointerType};return t(document).on("pointerdown MSPointerDown",function(e){c!==a&&M(e)&&(c===r&&b(e),T(null),e.originalEvent.identifier=e.originalEvent.pointerId,e.originalEvent.touches=g,e.originalEvent.changedTouches=[e.originalEvent],g.push(e.originalEvent),E("dcg-tapstart",e))}),t(document).on("pointermove MSPointerMove",function(e){c===s&&M(e)&&(C(e.originalEvent.pointerId),g.push(e.originalEvent),e.originalEvent.identifier=e.originalEvent.pointerId,e.originalEvent.touches=g,e.originalEvent.changedTouches=[e.originalEvent],E("dcg-tapmove",e))}),t(document).on("pointercancel MSPointerCancel",function(e){c===s&&M(e)&&(C(e.originalEvent.pointerId),e.originalEvent.identifier=e.originalEvent.pointerId,e.originalEvent.touches=g,e.originalEvent.changedTouches=[e.originalEvent],E("dcg-tapcancel",e),0===e.originalEvent.touches.length&&w(e))}),t(document).on("pointerup MSPointerUp",function(e){c===s&&M(e)&&(C(e.originalEvent.pointerId),e.originalEvent.identifier=e.originalEvent.pointerId,e.originalEvent.touches=g,e.originalEvent.changedTouches=[e.originalEvent],E("dcg-tapend",e),0===e.originalEvent.touches.length&&w(e))}),t(document).on("touchstart",function(e){c!==a&&(c===r&&b(e),T(null),E("dcg-tapstart",e))}),t(document).on("touchmove",function(e){c===s&&E("dcg-tapmove",e)}),t(document).on("touchcancel",function(e){c===s&&(E("dcg-tapcancel",e),0===e.originalEvent.touches.length&&w(e))}),t(document).on("touchend",function(e){c===s&&(E("dcg-tapend",e),0===e.originalEvent.touches.length&&w(e))}),t(document).on("mousedown",function(e){if(1!==e.button&&2!==e.button){if(c===s||S())return void(t(e.target).is("input, textarea, select")||e.preventDefault());b(e),e.originalEvent.touches=[e],e.originalEvent.changedTouches=[e],E("dcg-tapstart",e)}}),t(document).ready(function(){t(document).on("mousedown",function(e){var n=!!t(e.target).closest(".dcg-do-not-blur").length,i=!!t(e.target).closest(".dcg-do-blur").length;if(n&&!i){e.preventDefault();try{var r=window.getSelection();if(1===r.rangeCount){var s=r.getRangeAt(0);s.startContainer===s.endContainer&&t(s.startContainer).closest(".dcg-text-selectable").length&&r.removeAllRanges()}}catch(a){}}})}),t(document).on("mouseleave",function(e){c===r&&(S()||T(null))}),t(document).on("mousemove",function(e){1!==e.button&&2!==e.button&&c!==s&&(S()||(T(e.target),e.originalEvent.touches=[e],e.originalEvent.changedTouches=[e],E("dcg-tapmove",e)))}),t(document).on("mouseup",function(e){1!==e.button&&2!==e.button&&c===a&&(e.originalEvent.touches=[],e.originalEvent.changedTouches=[e],E("dcg-tapend",e),w(e))}),t(document).on("keydown",function(e){if(i.lookup(e)===i.ENTER||i.lookup(e)===i.SPACEBAR){if(c!==o){if(t(e.target).is("a[href], button, input, textarea, select"))return;e.preventDefault()}b(e),e.originalEvent.touches=[e],e.originalEvent.changedTouches=[e],E("dcg-tapstart",e)}}),t(document).on("keyup",function(e){(i.lookup(e)===i.ENTER||i.lookup(e)===i.SPACEBAR)&&c===o&&(e.originalEvent.touches=[],e.originalEvent.changedTouches=[e],E("dcg-tapend",e),w(e))}),{isTapActive:function(){return c!==r},elIsFocusable:_}}),define("conditional_blur",["require","jquery","touchtracking"],function(e){var t=e("jquery"),n=e("touchtracking");return function(){var e=t(document.activeElement);n.elIsFocusable(e)&&t(document.activeElement).blur()}}),define("conditional_focus",["require","jquery"],function(e){var t=e("jquery"),n=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1}();return n?function(){return!1}:function(e){return t(e).focus(),!0}}),function(e){e.extend(e,{placeholder:{browser_supported:function(){return void 0!==this._supported?this._supported:this._supported=!!("placeholder"in e('<input type="text">')[0])},shim:function(t){var n={color:"#888",cls:"placeholder",selector:"input[placeholder], textarea[placeholder]"};e.extend(n,t),this.browser_supported()||e(n.selector)._placeholder_shim(n)}}}),e.extend(e.fn,{_placeholder_shim:function(t){function n(t){var n=e(t).offsetParent().offset(),i=e(t).offset();return{top:i.top-n.top,left:i.left-n.left,width:e(t).width()}}return this.each(function(){var i=e(this);if(i.data("placeholder")){var r=i.data("placeholder");return r.css(n(i)),!0}var s={};i.is("textarea")||"auto"==i.css("height")||(s={lineHeight:i.css("height"),whiteSpace:"nowrap"});var a=e("<label />").text(i.attr("placeholder")).addClass(t.cls).css(e.extend({position:"absolute",display:"inline","float":"none",overflow:"hidden",textAlign:"left",color:t.color,cursor:"text",paddingTop:i.css("padding-top"),paddingLeft:i.css("padding-left"),paddingRight:i.css("padding-right"),paddingBottom:i.css("padding-bottom"),fontSize:i.css("font-size"),fontFamily:i.css("font-family"),fontStyle:i.css("font-style"),fontWeight:i.css("font-weight"),textTransform:i.css("text-transform"),backgroundColor:"transparent",zIndex:99},s)).css(n(this)).attr("for",this.id).data("target",i).click(function(){e(this).data("target").focus()}).insertBefore(this);i.data("placeholder",a).focus(function(){a.hide()}).blur(function(){a[i.val().length?"hide":"show"]()}).triggerHandler("blur"),e(window).resize(function(){var e=a.data("target");a.css(n(e))})})}})}(jQuery),define("vendor/jquery.html5-placeholder-shim",["jquery"],function(){}),define("loadcss!css/modals",function(){}),define("loadcss!css/hotkeys_dialog",function(){}),define("loadcss!css/rate_view",function(){}),define("template!unsupported_browser",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div id="unsupported-browser" role="dialog" aria-labeledby="unsupported-browser-title" class="modal_section">\n  <div id="unsupported-browser-title" style=\'color:black; font-size:150%;\'>'+(null==(__t=t("Unsupported Browser"))?"":_.escape(__t))+"</div>\n  <div style='padding:20px 0px; color:#666'>\n      "+(null==(__t=t("Desmos works best on your version of Android if you use the Chrome Browser."))?"":_.escape(__t))+"\n      <br><br>\n      <a href='https://play.google.com/store/apps/details?id=com.android.chrome'>\n        "+(null==(__t=t("Click here to download Google Chrome."))?"":_.escape(__t))+'<br><br>\n      </a>\n\n          <div style="text-align: center; margin-top: 25px; margin-bottom:-16px">\n              <a role="link" tabindex=0 class=\'dcg-btn dcg-action-hide dcg-do-not-blur\'>'+(null==(__t=t("Hide this warning."))?"":_.escape(__t))+"</a>\n          </div>\n  </div>\n</div>\n";return __p}}),define("template!login_dialog",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div id="login-dialog" class="modal_section">\n  <h1>\n    '+(null==(__t=t("Sign In"))?"":_.escape(__t))+"\n  </h1>\n\n  <div class='bg-line'>\n    <span>"+(null==(__t=t("Sign In with Google"))?"":_.escape(__t))+"</span>\n  </div>\n    <div class='google-login-btn'>\n      <span class='dcg-btn dcg-btn-light-gray dcg-action-googlelogin' role='button' tabindex=0>\n        <i class=\"dcg-icon-google-plus\"></i>\n        "+(null==(__t=t("Sign In with Your Google Account"))?"":_.escape(__t))+"\n      </span>\n    </div>\n\n  <div class='bg-line'>\n    <span>"+(null==(__t=t("Sign In with Desmos"))?"":_.escape(__t))+"</span>\n  </div>\n\n  ",_.each(errors,function(e){__p+='\n  <div class="errors">\n      <span>'+(null==(__t=e.message)?"":_.escape(__t))+"</span>\n  </div>\n  "}),__p+='\n\n  <form class="desmos-login dcg-action-submit">\n    <div class="form_content_interior">\n      <label for="email">\n        <span>'+(null==(__t=t("Email:"))?"":_.escape(__t))+'</span>\n        <input\n          type="email"\n          name="email"\n          class="input"\n          id="top_email"\n          aria-label="Email"\n          aria-required="true"\n          required="required"\n        />\n      </label>\n\n      <label for="password">\n        <span>'+(null==(__t=t("Password:"))?"":_.escape(__t))+'</span>\n        <div class="input-container">\n          <input\n            type="password"\n            name="password"\n            class="input"\n            id="top_password"\n            aria-label="Password"\n            aria-required="true"\n            required="required"\n          />\n          <span class="password-recovery-link">\n            <a role="link" tabindex=0 class="dcg-action-recoverpassword">'+(null==(__t=t("Forgot your password?"))?"":_.escape(__t))+'</a>\n          </span>\n        </div>\n      </label>\n\n      <span class="sign-in-options">\n       <span>\n        <a role="link" tabindex=0 class="dcg-action-createaccount">'+(null==(__t=t("Create an Account"))?"":_.escape(__t))+"</a> or\n       </span>\n        ",
__p+=spinning?'\n          <div class="progress_indicator signin_progress_indicator">\n            <div class="dcg-spinner"></div>\n          </div>\n        ':'\n          <button type="submit" class="dcg-btn-green">'+(null==(__t=t("Sign In"))?"":_.escape(__t))+"</button>\n        ",__p+="\n      </span>\n\n    </div>\n  </form>\n</div>\n";return __p}}),define("template!create_account_dialog",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div id="create-account-dialog" class="modal_section">\n  <h1>\n    '+(null==(__t=t("Create Account"))?"":_.escape(__t))+"\n  </h1>\n\n  <div class='bg-line'>\n    <span>"+(null==(__t=t("Link to Google"))?"":_.escape(__t))+"</span>\n  </div>\n    <div class='google-login-btn'>\n      <span role='button' tabindex=0 class='dcg-btn-light-gray dcg-action-googlelogin'>\n        <i class=\"dcg-icon-google-plus\"> </i>\n        "+(null==(__t=t("Link to your Google Account"))?"":_.escape(__t))+"\n      </span>\n    </div>\n    <div class='bg-line'><span>\n      "+(null==(__t=t("Use your Email Address"))?"":_.escape(__t))+"\n    </span></div>\n\n  ",_.each(errors,function(e){__p+='\n  <div class="errors">\n      <span>'+(null==(__t=e.message)?"":_.escape(__t))+"</span>\n  </div>\n  "}),__p+='\n\n  <form class="dcg-action-submit">\n    <div class="form_content_interior">\n\n      <label>\n        <span>'+(null==(__t=t("Name:"))?"":_.escape(__t))+'</span>\n        <input type="text"\n          name="name"\n          class="input"\n          required="required"\n          aria-describedby="name-description"\n        />\n      </label>\n\n      <div id="name-description" class="dcg-description">\n        '+(null==(__t=t("This is the name we'll use if we feature one of your graphs."))?"":_.escape(__t))+"\n      </div>\n\n      <label>\n        <span>"+(null==(__t=t("Email:"))?"":_.escape(__t))+'</span>\n        <input type="email"\n          name="email"\n          class="input"\n          required="required"\n        aria-describedby="email-description"\n        />\n      </label>\n\n      <div id="email-description" class="dcg-description">\n        '+(null==(__t=t("We'll never share or sell your email address."))?"":_.escape(__t))+"\n      </div>\n\n      <label>\n        <span>"+(null==(__t=t("Password:"))?"":_.escape(__t))+'</span>\n        <input type="password"\n          class="input"\n          name="password"\n          required="required"\n        />\n      </label>\n\n      <span class="sign-in-options">\n        <span>\n          <a role="link" tabindex=0 class="dcg-action-login">'+(null==(__t=t("Sign in"))?"":_.escape(__t))+"</a> or\n        </span>\n\n        ",__p+=spinning?'\n          <div class="progress_indicator create-account-progress">\n            <div class="dcg-spinner"></div>\n          </div>\n        ':'\n          <button type="submit" class="dcg-btn-green">'+(null==(__t=t("Create Account"))?"":_.escape(__t))+"</button>\n        ",__p+="\n      </span>\n    </div>\n  </form>\n  <div class='notice' style=\"margin-top: 30px\">\n    "+(null==(__t=t('By clicking "__btn__," you acknowledge that you\'ve read and accept our __terms_of_use_link__.',{terms_of_use_link:"<a href='/terms' target='_blank'>"+t("Terms of Use")+"</a>",btn:t("Create Account")}))?"":__t)+"\n  </div>\n";return __p}}),define("template!edit_account_dialog",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div id="edit-account-dialog" class="modal_section">\n\n  ',_.each(errors,function(e){__p+='\n    <div class="errors">\n      <span>'+(null==(__t=e.message)?"":_.escape(__t))+"</span>\n    </div>\n  "}),__p+='\n\n  <form class="dcg-action-submit">\n    ',user&&(__p+='\n    <div class="form_content_interior">\n\n      <h1>'+(null==(__t=t("Edit Account"))?"":_.escape(__t))+"</h1>\n      <label>\n        <span>"+(null==(__t=t("Name:"))?"":_.escape(__t))+'</span>\n        <input type="text"\n          name="name"\n          class="input"\n          id="edit_name"\n          required="required"\n          aria-describedby="name-description"\n          value="'+(null==(__t=user.name)?"":_.escape(__t))+'"\n        />\n      </label>\n      <div id="name-description" class="dcg-description">\n        '+(null==(__t=t("This is the name we'll use if we feature one of your graphs."))?"":_.escape(__t))+"\n      </div>\n\n      <h1>"+(null==(__t=t("Update Password"))?"":_.escape(__t))+"</h1>\n      <div class='dcg-forgot-password-text'>\n        "+(null==(__t=t("Forgot your password?"))?"":_.escape(__t))+"\n        <a role=\"link\" tabindex=0 class='dcg-action-reset-password'>\n          "+(null==(__t=t("Reset it by email."))?"":_.escape(__t))+'\n        </a>\n      </div>\n      <div id="update-password-fields">\n        <label>\n          <span>'+(null==(__t=t("Current Password:"))?"":_.escape(__t))+'</span>\n          <input type="password"\n            name="old_pass"\n            class="input"\n          />\n        </label>\n\n        <label>\n          <span>'+(null==(__t=t("New Password:"))?"":_.escape(__t))+'</span>\n          <input type="password"\n            name="new_pass"\n            class="input"\n          />\n        </label>\n\n        <label>\n          <span>'+(null==(__t=t("Repeat Password:"))?"":_.escape(__t))+'</span>\n          <input type="password"\n            name="repeat_new_pass"\n            class="input"\n          />\n        </label>\n      </div>\n      <br />\n\n      ',__p+=spinning?'\n        <div class="progress_indicator update-account">\n          <div class="dcg-spinner"></div>\n        </div>\n      ':'\n        <button type="submit" class="dcg-btn-green update-account pull-right">\n          '+(null==(__t=t("Update Account"))?"":_.escape(__t))+"\n        </button>\n      ",__p+="\n    </div>\n    "),__p+="\n  </form>\n</div>\n";return __p}}),define("template!save_dialog",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div id="save-dialog" class="modal_section">\n    <h1>\n      '+(null==(__t=t("Save This Graph"))?"":_.escape(__t))+"\n    </h1>\n\n    <div class='dcg-clear'></div>\n\n    <label class='input-label'>\n      <div class='graph-title-title'>"+(null==(__t=t("Title:"))?"":_.escape(__t))+' &nbsp; </div>\n      <input class="title-input"\n             name="title"\n             placeholder="['+(null==(__t=t("Untitled Graph"))?"":_.escape(__t))+']"\n             value="'+(null==(__t=title)?"":_.escape(__t))+'"\n             maxlength="140"\n      >\n    </label>\n\n\n    <div>\n\n\n    <button type="submit" class="dcg-btn dcg-btn-green pull-right dcg-action-save">'+(null==(__t=t("Save"))?"":_.escape(__t))+'</button>\n    <label class="dcg-new-copy pull-right">\n      <input type="checkbox" name="save_as" />\n      '+(null==(__t=t("Duplicate This Graph"))?"":_.escape(__t))+"\n    </label>\n\n    </div>\n</div>\n";return __p}}),define("template!recover_password_dialog",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div id="recover-password-dialog" class="modal_section">\n  <h1>'+(null==(__t=t("Recover Password"))?"":_.escape(__t))+"</h1>\n\n  ",_.each(errors,function(e){__p+='\n  <div class="errors">\n      <span>'+(null==(__t=e.message)?"":_.escape(__t))+"</span>\n  </div>\n  "}),__p+="\n\n  ",sentMessage?__p+='\n    <p role="alert" aria-live="assertive" aria-atomic="true">\n      '+(null==(__t=t("Message sent. Please check your email for a password recovery link."))?"":_.escape(__t))+"\n      <a href='#' class='dcg-action-tryagain'>"+(null==(__t=t("Didn't work? Try again!"))?"":_.escape(__t))+"</a>\n    </p>\n  ":(__p+='\n\n    <form class="dcg-action-submit">\n\n      <div class="form_content_interior">\n\n        <p>'+(null==(__t=t("Please enter your email address. We will send a password recovery link to you."))?"":_.escape(__t))+"</p>\n\n        <label>\n          <span>"+(null==(__t=t("Email:"))?"":_.escape(__t))+'</span>\n          <input type="email"\n          name="email"\n          class="input"\n          id="recover_email"\n          required="required"\n          />\n        </label>\n\n\n      <span class="sign-in-options">\n        ',__p+=spinning?'\n          <div class="progress_indicator create-account-progress">\n            <div class="dcg-spinner"></div>\n          </div>\n        ':'\n          <button type="submit" class="dcg-btn dcg-btn-green">'+(null==(__t=t("Recover Password"))?"":_.escape(__t))+"</button>\n        ",__p+="\n      </span>\n    </form>\n    <br />\n  "),__p+="\n</div>\n";return __p}}),define("template!rate_view",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div role="dialog" aria-labeledby="rate-title" class="dcg-rate-view modal_section">\n  <h1 id="rate-title">\n    '+(null==(__t=t("Send us feedback."))?"":_.escape(__t))+'\n  </h1>\n  <div class="dcg-rating-message">\n    '+(null==(__t=t("Thank you for using Desmos! Your feedback and ratings help us make Desmos better, and also help other people find us. Take a minute to tell us what you think."))?"":_.escape(__t))+'\n  </div>\n\n  <div role="link" tabindex=0 class="dcg-action-rate">\n    '+(null==(__t=t("I love it"))?"":_.escape(__t))+'\n    <div class="dcg-submessage"> &ndash; '+(null==(__t=t("rate it in the app store."))?"":_.escape(__t))+'</div>\n  </div>\n  <div role="link" tabindex=0 class="dcg-action-feedback">\n    '+(null==(__t=t("Needs work"))?"":_.escape(__t))+'\n    <div class="dcg-submessage"> &ndash; '+(null==(__t=t("send us feedback."))?"":_.escape(__t))+'</div>\n  </div>\n  <div role="link" tabindex=0 class="dcg-action-cancel">\n    <b>'+(null==(__t=t("Close"))?"":_.escape(__t))+'</b>\n    <div class="dcg-submessage"> &ndash; '+(null==(__t=t("take me back to graphing."))?"":_.escape(__t))+"</div>\n  </div>\n</div>\n";return __p}}),define("template!hotkeys_dialog",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div class="modal_section dcg-hotkeys-dialog">\n  <h1>\n    '+(null==(__t=t("Keyboard Shortcuts"))?"":_.escape(__t))+"\n  </h1>\n  <div class='dcg-toggle-container'>\n    <span class='dcg-action-toggleos dcg-windows-option' role='button' tabindex=0>\n      "+(null==(__t=t("Windows Shortcuts"))?"":_.escape(__t))+"\n    </span>\n    <span class='dcg-action-toggleos dcg-mac-option' role='button' tabindex=0>\n      "+(null==(__t=t("Mac Shortcuts"))?"":_.escape(__t))+'\n    </span>\n  </div>\n\n  <div class="dcg-hotkey-container">\n    <div class="dcg-hotkey-section">\n      <h2 class="dcg-hotkey-section-header">'+(null==(__t=t("Common Actions"))?"":_.escape(__t))+"</h2>\n      <table>\n        <tr>\n          <th>"+(null==(__t=t("Function"))?"":_.escape(__t))+'</th>\n          <th class="dcg-os-windows">Windows Shortcut</th>\n          <th class="dcg-os-mac">Mac Shortcut</th>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Close a Dialog (like this one!)"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Esc</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Esc</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Open a Graph"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">O</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">O</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Save a Graph"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">S</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">S</span>\n          </td>\n        </tr>\n        <tr class="hotkey-table-row">\n          <td>'+(null==(__t=t("Print a Graph"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">P</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">P</span>\n          </td>\n        </tr>\n        <tr class="hotkey-table-row">\n          <td>'+(null==(__t=t("Focus the Expression List"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">E</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">E</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Add an Expression"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">X</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">X</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Add a Note"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">O</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">O</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Add a Folder"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">F</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">F</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Add an Image"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">I</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">I</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Add a Table"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">T</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">T</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Undo"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Z</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">Z</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Redo"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Shift</span>\n            +\n            <span class="dcg-key-command">Z</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">Shift</span>\n            +\n            <span class="dcg-key-command">Z</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Open or Close the Graph Settings Menu"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">G</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">G</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Open or Close the Account Menu"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">A</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">A</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Open or Close the Help Menu"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">H</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">H</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Open or Close the Language Menu"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">L</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">L</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Open or Close the Share Menu"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">S</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">S</span>\n          </td>\n        </tr>\n      </table>\n\n      <h2 class="dcg-hotkey-section-header symbols-section">'+(null==(__t=t("Symbols"))?"":_.escape(__t))+"</h2>\n      <table>\n        <tr>\n          <th>"+(null==(__t=t("Function"))?"":_.escape(__t))+'</th>\n          <th>Shortcut</th>\n        </tr>\n        <tr>\n          <td></td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            "sqrt"\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            "sqrt"\n          </td>\n        </tr>\n        <tr>\n          <td> (or higher!)</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            "nthroot"\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            "nthroot"\n          </td>\n        </tr>\n        <tr>\n          <td></td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            "sum"\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            "sum"\n          </td>\n        </tr>\n        <tr>\n          <td></td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            "int"\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            "int"\n          </td>\n        </tr>\n        <tr>\n          <td></td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            "prod"\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            "prod"\n          </td>\n        </tr>\n        <tr>\n          <td></td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            "pi"\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            "pi"\n          </td>\n        </tr>\n        <tr>\n          <td></td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            "theta"\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            "theta"\n          </td>\n        </tr>\n      </table>\n    </div>\n\n    <div class="dcg-hotkey-section">\n      <h2 class="dcg-hotkey-section-header">'+(null==(__t=t("Expression Entry and Navigation"))?"":_.escape(__t))+"</h2>\n      <table>\n        <tr>\n          <th>"+(null==(__t=t("Function"))?"":_.escape(__t))+'</th>\n          <th class="dcg-os-windows">Windows Shortcut</th>\n          <th class="dcg-os-mac">Mac Shortcut</th>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Move to Previous Expression"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Up Arrow</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Shift</span>\n            +\n            <span class="dcg-key-command">Tab</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Up Arrow</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Shift</span>\n            +\n            <span class="dcg-key-command">Tab</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Move to Next Expression"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Down Arrow</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Tab</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Down Arrow</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Tab</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Remove Selected Empty Expression"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Backspace</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Delete</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Previous Character"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Left Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Left Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Next Character"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Right Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Right Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Move to Numerator Within Fraction"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Up Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Up Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Move to Denominator Within Fraction"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Down Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Down Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Exit Current Block"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Tab</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Tab</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Beginning of Current Block"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Home</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Fn</span>\n            +\n            <span class="dcg-key-command">Left Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("End of Current Block"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">End</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Fn</span>\n            +\n            <span class="dcg-key-command">Right Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Beginning of Current Expression"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Home</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Fn</span>\n            +\n            <span class="dcg-key-command">Left Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("End of Current Expression"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">End</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Fn</span>\n            +\n            <span class="dcg-key-command">Right Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Increase Selection Left"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Shift</span>\n            +\n            <span class="dcg-key-command">Left Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Shift</span>\n            +\n            <span class="dcg-key-command">Left Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Increase Selection Right"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Shift</span>\n            +\n            <span class="dcg-key-command">Right Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Shift</span>\n            +\n            <span class="dcg-key-command">Right Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Delete Selection"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Backspace</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Delete</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Select All"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">A</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">A</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Speak Parent Block"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">Up Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">Up Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Speak Focused Block"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">Down Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">Down Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Speak Left-Adjacent Block"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">Left Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">Left Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Speak Right-Adjacent Block"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">Right Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">Right Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Speak Selection"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">Shift</span>\n            +\n            <span class="dcg-key-command">Down Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">Shift</span>\n            +\n            <span class="dcg-key-command">Down Arrow</span>\n          </td>\n        </tr>\n      </table>\n    </div>\n\n    <div class="dcg-hotkey-section">\n      <h2 class="dcg-hotkey-section-header">'+(null==(__t=t("Audio Tracing for Expressions with a Graph"))?"":_.escape(__t))+"</h2>\n      <table>\n        <tr>\n          <th>"+(null==(__t=t("Function"))?"":_.escape(__t))+'</th>\n          <th class="dcg-os-windows">Windows Shortcut</th>\n          <th class="dcg-os-mac">Mac Shortcut</th>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Enable or Disable Audio Trace Mode"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">T</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Option</span>\n            +\n            <span class="dcg-key-command">T</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Summarize Graph"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">S</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Option</span>\n            +\n            <span class="dcg-key-command">S</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Previous Point"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Left Arrow</span>\n            '+(null==(__t=t(","))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Down Arrow</span>\n            '+(null==(__t=t(", or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">J</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Left Arrow</span>\n            '+(null==(__t=t(","))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Down Arrow</span>\n            '+(null==(__t=t(", or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">J</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Next Point"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Right Arrow</span>\n            '+(null==(__t=t(","))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Up Arrow</span>\n            '+(null==(__t=t(", or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">L</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Right Arrow</span>\n            '+(null==(__t=t(","))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Up Arrow</span>\n            '+(null==(__t=t(", or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">L</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Next Point of Interest"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Page Up</span>\n            '+(null==(__t=t(","))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Tab</span>\n            '+(null==(__t=t(", or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">I</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Fn</span>\n            +\n            <span class="dcg-key-command">Up Arrow</span>\n            '+(null==(__t=t(","))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Tab</span>\n            '+(null==(__t=t(", or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">I</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Previous Point of Interest"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Page Down</span>\n            '+(null==(__t=t(","))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Shift</span>\n            +\n            <span class="dcg-key-command">Tab</span>\n            '+(null==(__t=t(", or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">K</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Fn</span>\n            +\n            <span class="dcg-key-command">Down Arrow</span>\n            '+(null==(__t=t(","))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Shift</span>\n            +\n            <span class="dcg-key-command">Tab</span>\n            '+(null==(__t=t(", or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">K</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("First Point"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Home</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">U</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Fn</span>\n            +\n            <span class="dcg-key-command">Left Arrow</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">U</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Last Point"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">End</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">N</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Fn</span>\n            +\n            <span class="dcg-key-command">Right Arrow</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">N</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Speak Point of Interest Count"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">P</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">P</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Speak X Coordinate"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">X</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">X</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Speak Y Coordinate"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Y</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Y</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Speak Branch"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">B</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">B</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Speak Type of Selected Point"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">T</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">T</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Move to Origin"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">O</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">O</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Move to Previous Curve"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Up Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">Up Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Move to Next Curve"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Down Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Command</span>\n            +\n            <span class="dcg-key-command">Down Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Hear Graph"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">H</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">H</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Hear Only Branch 1 Through 10"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">1</span>\n            -\n            <span class="dcg-key-command">0</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">1</span>\n            -\n            <span class="dcg-key-command">0</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Adjust Playback Speed (1 = slowest, 5 = fastest)"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Alt</span>\n            +\n            <span class="dcg-key-command">1</span>\n            -\n            <span class="dcg-key-command">5</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Option</span>\n            +\n            <span class="dcg-key-command">1</span>\n            -\n            <span class="dcg-key-command">5</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Announce Active Slider Animations"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">A</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">A</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Toggle Slider Trace Mode"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">S</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">S</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Decrease Value of Selected Slider When in Slider Trace"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Left Arrow</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">J</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Left Arrow</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">J</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Decrease Value of Selected Slider by Larger Increment When in Slider Trace"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Page Down</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Fn</span>\n            +\n            <span class="dcg-key-command">Down Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Increase Value of Selected Slider When in Slider Trace"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Right Arrow</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">L</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Right Arrow</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">L</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Increase Value of Selected Slider by Larger Increment When in Slider Trace"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Page Up</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Fn</span>\n            +\n            <span class="dcg-key-command">Up Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Move to Lowest Value of Selected Slider When in Slider Trace"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Home</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">U</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Fn</span>\n            +\n            <span class="dcg-key-command">Left Arrow</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">U</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Move to Highest Value of Selected Slider When in Slider Trace"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">End</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">N</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Fn</span>\n            +\n            <span class="dcg-key-command">Right Arrow</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">N</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Play/Pause Selected Slider When in Slider Trace"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">P</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">P</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Select Next Slider When in Slider Trace"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Down Arrow</span>\n            '+(null==(__t=t(","))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Tab</span>\n            '+(null==(__t=t(", or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">K</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Down Arrow</span>\n            '+(null==(__t=t(","))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Tab</span>\n            '+(null==(__t=t(", or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">K</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Select Previous Slider When in Slider Trace"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Up Arrow</span>\n            '+(null==(__t=t(","))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Shift</span>\n            +\n            <span class="dcg-key-command">Tab</span>\n            '+(null==(__t=t(", or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">I</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Up Arrow</span>\n            '+(null==(__t=t(","))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Shift</span>\n            +\n            <span class="dcg-key-command">Tab</span>\n            '+(null==(__t=t(", or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">I</span>\n          </td>\n        </tr>\n      </table>\n    </div>\n\n    <div class="dcg-hotkey-section">\n      <h2 class="dcg-hotkey-section-header">'+(null==(__t=t("Sliders"))?"":_.escape(__t))+"</h2>\n      <table>\n        <tr>\n          <th>"+(null==(__t=t("Function"))?"":_.escape(__t))+'</th>\n          <th class="dcg-os-windows">Windows Shortcut</th>\n          <th class="dcg-os-mac">Mac Shortcut</th>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Decrease Value"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Left Arrow</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Down Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Left Arrow</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Down Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Decrease Value by Larger Increment"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Page Down</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Fn</span>\n            +\n            <span class="dcg-key-command">Down Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Increase Value"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Right Arrow</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Up Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Right Arrow</span>\n            '+(null==(__t=t("or"))?"":_.escape(__t))+'\n            <span class="dcg-key-command">Up Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Increase Value by Larger Increment"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Page Up</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Fn</span>\n            +\n            <span class="dcg-key-command">Up Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Lowest Value"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Home</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Fn</span>\n            +\n            <span class="dcg-key-command">Left Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Highest Value"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">End</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Fn</span>\n            +\n            <span class="dcg-key-command">Right Arrow</span>\n          </td>\n        </tr>\n      </table>\n\n      <h2 class="dcg-hotkey-section-header tables-section">'+(null==(__t=t("Tables"))?"":_.escape(__t))+"</h2>\n      <table>\n        <tr>\n          <th>"+(null==(__t=t("Function"))?"":_.escape(__t))+'</th>\n          <th class="dcg-os-windows">Windows Shortcut</th>\n          <th class="dcg-os-mac">Mac Shortcut</th>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Previous Cell"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Shift</span>\n            +\n            <span class="dcg-key-command">Tab</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Shift</span>\n            +\n            <span class="dcg-key-command">Tab</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Next Cell"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Tab</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Tab</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Previous Row"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Up Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Up Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Next Row"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Down Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Down Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Previous Column"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Left Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Left Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Next Column"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Right Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Right Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("First Row in Column"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Up Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Up Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Last Row in Column"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Down Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Down Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("First Column in Row"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Left Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Left Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Last Column in Row"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Right Arrow</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">Right Arrow</span>\n          </td>\n        </tr>\n        <tr>\n          <td>'+(null==(__t=t("Speak Column Header"))?"":_.escape(__t))+'</td>\n          <td class="dcg-keyboard-shortcut dcg-os-windows">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">H</span>\n          </td>\n          <td class="dcg-keyboard-shortcut dcg-os-mac">\n            <span class="dcg-key-command">Control</span>\n            +\n            <span class="dcg-key-command">H</span>\n          </td>\n        </tr>\n      </table>\n    </div>\n  </div>\n</div>\n';
return __p}}),define("main/modals_controller",["require","jquery","lib/aria","browser","pjs","underscore_view","main/parse_json_errors","keys","template!modal_container","conditional_blur","conditional_focus","vendor/jquery.html5-placeholder-shim","loadcss!css/modals","loadcss!css/hotkeys_dialog","loadcss!css/rate_view","template!unsupported_browser","template!login_dialog","template!create_account_dialog","template!edit_account_dialog","template!save_dialog","template!recover_password_dialog","template!rate_view","template!hotkeys_dialog"],function(e){var t=e("jquery"),n=e("lib/aria"),i=e("browser"),r=e("pjs"),s=e("underscore_view"),a=e("main/parse_json_errors"),o=e("keys"),c=e("template!modal_container"),l=e("conditional_blur"),u=e("conditional_focus");e("vendor/jquery.html5-placeholder-shim"),e("loadcss!css/modals"),e("loadcss!css/hotkeys_dialog"),e("loadcss!css/rate_view");var h={};h.unsupported_browser=e("template!unsupported_browser"),h.login_dialog=e("template!login_dialog"),h.create_account_dialog=e("template!create_account_dialog"),h.edit_account_dialog=e("template!edit_account_dialog"),h.save_dialog=e("template!save_dialog"),h.recover_password_dialog=e("template!recover_password_dialog"),h.rate_view=e("template!rate_view"),h.hotkeys_dialog=e("template!hotkeys_dialog");var d=r(s,function(e,n){e.template=c,e.init=function(e,t,i){n.init.call(this),this.modals={unsupportedBrowserDialog:f(e,t,this),loginDialog:g(e,t,this),createAccountDialog:v(e,t,this),editAccountDialog:y(e,t,this),saveDialog:b(e,t,this),recoverPasswordDialog:_(e,t,this),hotkeysDialog:x(e,t,this)},i&&(this.modals.rateView=m(i,e,t,this)),this.currentModal=void 0},e.didCreateElement=function(){n.didCreateElement.call(this),this.modalElement=this.$(".dcg-state-modals"),this.modalBackground=this.$(".dcg-modal-background"),this.$(".action-close-modal").on("dcg-tap",this.closeFromContainer.bind(this)),this.modalElement.on("keydown",this.handleKeydown.bind(this))},e.closeFromContainer=function(){this.currentModal&&this.currentModal.closeFromContainer&&this.currentModal.closeFromContainer(),this.hide()},e.hide=function(){this.modalBackground&&(document.activeElement&&t(document.activeElement).closest(this.modalElement).length>0&&l(),this.$("input[type='password']").val(""),this.$().hide(),this.$().removeClass("dcg-wide-modal"),this.currentModal=void 0)},e.show=function(e){this.setAriaTitle(e),this.currentModal=e;var t=e.$();t.siblings(".modal_section").hide(),t.show(),e.wideModal&&this.$().addClass("dcg-wide-modal"),this.$().show()},e.setAriaTitle=function(e){if(e){var t=e.$("h1").first();0!==t.length&&this.$(".dcg-modal-container").attr("aria-label",t.text())}},e.handleKeydown=function(e){if(o.lookup(e)===o.TAB){var n=t(".dcg-state-modals:visible").find("a[href], [role], :input:enabled, .internal-close").filter(":visible").add(t(".external-close:visible")),i=n.first(),r=n.last();e.shiftKey&&i.is(":focus")?(e.preventDefault(),u(r)):!e.shiftKey&&r.is(":focus")&&(e.preventDefault(),u(i))}}}),p=r(s,function(e,i){e.init=function(e,t,n){i.init.call(this),this.errors=[],this.spinning=!1,this.saved_inputs={},this.initialized=!1,this.userController=e,this.graphsController=t,this.modalsController=n},e.getTemplateParams=function(){return{errors:this.errors,spinning:this.spinning}},e.didInsertElement=function(){this.errors&&this.errors.length>0&&this.errors.forEach(function(e){n.queue(e.message)}),n.alert()},e.show=function(){this.initialized||(this.appendTo(this.modalsController.$(".dcg-state-modals")),this.initialized=!0),this.errors=[],this.rerender(),this.modalsController.show(this),t(".internal-close:visible, .external-close:visible").on("keydown",this.modalsController.handleKeydown.bind(this));var e=this.$("input:visible, textarea:visible").first();0===e.length&&(e=t(".internal-close:visible, .external-close:visible").first()),u(e),t.placeholder&&t.placeholder.shim()},e.beforeRerender=function(){this.__$display=this.$().css("display");var e=this;this.$("input,textarea").each(function(){var n=t(this).attr("name"),i=t(this).val();e.saved_inputs[n]=i})},e.afterRerender=function(){this.$().css("display",this.__$display);for(var e in this.saved_inputs)this.$('[name="'+e+'"]').val(this.saved_inputs[e])},e.hide=function(){this.modalsController.currentModal===this&&this.modalsController.hide()},e.processJSONErrors=function(e){this.errors=a(e)},e.startProcessingForm=function(){this.spinning=!0,this.errors=[],this.rerender()},e.stopProcessingForm=function(){this.spinning=!1,this.rerender()},e.successAnimation=function(){t(".dcg-edit-acct-success").show(),n.addAria(t(".dcg-edit-acct-success")),setTimeout(function(){t(".dcg-edit-acct-success").fadeOut("fast"),n.removeAria(t(".dcg-edit-acct-success"))},800)}}),f=r(p,function(e){e.template=h.unsupported_browser,e.didCreateElement=function(){this.$(".dcg-action-hide").on("dcg-tap",this.hide.bind(this))}}),m=r(p,function(e,t){e.init=function(e,n,i,r){t.init.call(this,n,i,r),this.AppBridge=e},e.template=h.rate_view,e.closeFromContainer=function(){this.AppBridge.saveResponse("no")},e.didCreateElement=function(){t.didCreateElement.call(this),this.$(".dcg-action-cancel").on("dcg-tap",function(){this.hide(),this.AppBridge.saveResponse("no")}.bind(this)),this.$(".dcg-action-rate").on("dcg-tap",function(){this.hide(),window.open(this.AppBridge.getRateURL()),this.AppBridge.saveResponse("yes")}.bind(this)),this.$(".dcg-action-feedback").on("dcg-tap",function(){this.hide(),window.open(this.AppBridge.getFeedbackURL()),this.AppBridge.saveResponse("feedback")}.bind(this))}}),g=r(p,function(e,n){e.template=h.login_dialog,e.didCreateElement=function(){this.$(".dcg-action-googlelogin").on("dcg-tap",this.googleLogin.bind(this)),this.$(".dcg-action-submit").on("submit",this.desmosLogin.bind(this)),this.$(".dcg-action-recoverpassword").on("dcg-tap",this.recoverPassword.bind(this)),this.$(".dcg-action-createaccount").on("dcg-tap",this.createAccount.bind(this))},e.show=function(e){n.show.call(this),e&&(this.errors=[{message:e}],this.rerender())},e.desmosLogin=function(e){e.preventDefault();var n=t(e.target).serialize();this.startProcessingForm(),this.userController.desmosLogin(n).then(this.hide.bind(this),this.processJSONErrors.bind(this)).always(this.stopProcessingForm.bind(this))},e.recoverPassword=function(e){e.preventDefault(),this.modalsController.modals.recoverPasswordDialog.show()},e.createAccount=function(e){e.preventDefault(),this.modalsController.modals.createAccountDialog.show()},e.googleLogin=function(){this.userController.googleLogin({from:"login"}),this.hide()}}),v=r(p,function(e,n){e.template=h.create_account_dialog,e.show=function(e){n.show.call(this),e&&(this.errors=[{message:e}],this.rerender())},e.didCreateElement=function(){this.$(".dcg-action-submit").on("submit",this.submitCreateAccount.bind(this)),this.$(".dcg-action-login").on("dcg-tap",this.login.bind(this)),this.$(".dcg-action-login-then-save").on("dcg-tap",this.login.bind(this)),this.$(".dcg-action-googlelogin").on("dcg-tap",this.googleLogin.bind(this))},e.login=function(){this.modalsController.modals.loginDialog.show()},e.googleLogin=function(){this.userController.googleLogin({from:"create"}),this.hide()},e.submitCreateAccount=function(e){e.preventDefault();var n=t(e.target).serialize();this.startProcessingForm(),this.userController.createAccount(n).then(this.hide.bind(this),this.processJSONErrors.bind(this)).always(this.stopProcessingForm.bind(this))}}),y=r(p,function(e,n){e.template=h.edit_account_dialog,e.didCreateElement=function(){this.$(".dcg-action-submit").on("submit",this.submitEdit.bind(this)),this.$(".dcg-action-reset-password").on("dcg-tap",this.resetPassword.bind(this))},e.resetPassword=function(e){e.preventDefault(),this.modalsController.modals.recoverPasswordDialog.show({email:this.userController.currentUser.email})},e.show=function(){n.show.call(this);var e=this.getTemplateParams();e.user&&this.$("input[name=name]").val(e.user.name)},e.getTemplateParams=function(){var e=n.getTemplateParams.call(this);return e.user=this.userController.currentUser,e},e.submitEdit=function(e){e.preventDefault();var n=this,i=t(e.target).serialize();this.startProcessingForm(),this.userController.editAccount(i).then(function(){n.hide(),n.successAnimation()},this.processJSONErrors.bind(this)).always(this.stopProcessingForm.bind(this))}}),b=r(p,function(e,n){e.template=h.save_dialog,e.didCreateElement=function(){this.$(".dcg-action-save").on("dcg-tap",this.save.bind(this));var e=this;this.$(".title-input").on("keypress",function(t){13===t.which&&(t.preventDefault(),e.save())})},e.show=function(){n.show.call(this);var e=this.getTemplateParams();this.$('input[name="save_as"]').prop("checked",!!e.isSavedGraph&&e.title),this.$(".dcg-new-copy").toggle(!!e.isSavedGraph),u(this.$("input[name=title]").val(e.title)),this.baseName=e.title},e.getTemplateParams=function(){var e=n.getTemplateParams.call(this);e.user=null,e.title="";var t=this.userController.currentUser;t&&(e.user={name:t.name});var i=this.graphsController.currentGraph;return i&&i.title&&(e.title=i.title),e.isSavedGraph=this.graphsController.isSavedGraph(i),e},e.save=function(){var e=this.graphsController.currentGraph.copy();e.title=this.$("input[name=title]").val(),this.hide();var n=t('input[name="save_as"]').prop("checked");n?this.graphsController.saveAs(e):this.graphsController.save(e)}}),_=r(p,function(e,n){e.template=h.recover_password_dialog,e.show=function(e){n.show.call(this),e&&e.email&&this.$("#recover_email").val(e.email),this.sentMessage=!1,this.rerender()},e.getTemplateParams=function(){var e=n.getTemplateParams.call(this);return e.sentMessage=this.sentMessage,e},e.didCreateElement=function(){this.$(".dcg-action-submit").on("submit",this.submitRecover.bind(this)),this.$(".dcg-action-tryagain").on("dcg-tap",this.resetAgain.bind(this))},e.submitRecover=function(e){e.preventDefault();var n=this,i=t(e.target).serialize();this.startProcessingForm(),this.userController.recoverPassword(i).then(function(){n.sentMessage=!0},this.processJSONErrors.bind(this)).always(this.stopProcessingForm.bind(this))},e.resetAgain=function(){this.sentMessage=!1,this.rerender()}}),x=r(p,function(e,t){e.template=h.hotkeys_dialog,e.wideModal=!0,e.didCreateElement=function(){this.$(".dcg-mac-option").on("dcg-tap",this.displayShortcutsFor.bind(this,"mac")),this.$(".dcg-windows-option").on("dcg-tap",this.displayShortcutsFor.bind(this,"windows")),this.$(".dcg-action-hide").on("dcg-tap",this.hide.bind(this))},e.show=function(){t.show.call(this);var e=i.IS_APPLE?".dcg-os-windows":".dcg-os-mac";this.$(e).hide(),this.toggleVisibleShortcuts()},e.displayShortcutsFor=function(e){var t=this.$(".dcg-os-windows"),n=this.$(".dcg-os-mac");if("mac"===e)n.show(),t.hide();else{if("windows"!==e)throw new Error('ModalsController.displayShortcutsFor(): argument must be one of "mac" or "windows"');t.show(),n.hide()}this.toggleVisibleShortcuts()},e.toggleVisibleShortcuts=function(){var e=this.$(".dcg-windows-option"),t=this.$(".dcg-mac-option");this.$(".dcg-os-windows").is(":visible")?(e.addClass("dcg-selected"),t.removeClass("dcg-selected")):(t.addClass("dcg-selected"),e.removeClass("dcg-selected")),e.attr("aria-pressed",!!e.hasClass("dcg-selected")),t.attr("aria-pressed",!!t.hasClass("dcg-selected"))}});return d}),define("loadcss!css/header_bar",function(){}),define("loadcss!css/spinner",function(){}),define("loadcss!tipsycss",function(){}),define("tipsy",["require","loadcss!tipsycss","jquery"],function(e){function t(e,t){return"function"==typeof e?e.call(t):e}function n(e,t){this.$element=a(e),this.options=t,this.fixTitle()}function i(){return 0!==l}function r(){l--}function s(){l++}e("loadcss!tipsycss");var a=e("jquery"),o=null,c=!1;a(document).on("dcg-tap",".tipsy-sticky",function(e){if(c)return void(c=!1);var t=e.currentTarget,i=a(t);if(i.attr("tooltip")||(i=i.find("[tooltip]").filter(':not([tooltip=""])')),1===i.length&&"none"!==i.css("display")&&!i.parents().filter(function(){return"none"===a(this).css("display")}).length){var r=a.extend({},a.fn.tipsy.defaults);r.title="tooltip",i.attr("tipsy-dir")?r.gravity=i.attr("tipsy-dir"):r.gravity="nw",o=new n(i[0],r),o.show(),o.opener=t}}),a(document).on("dcg-tapstart keydown",function(e){if(o){o.hide();var t=o.opener;"dcg-tapstart"===e.type&&a(e.target).closest(t).length&&a(document).one("dcg-tapend",function(e){a(e.target).closest(t).length&&(c=!0)}),o=null}}),n.prototype={show:function(){var e=this.getTitle();if(e&&!i()){var n=this.tip(),r=n.find(".tipsy-arrow");n.find(".tipsy-inner")[this.options.html?"html":"text"](e),n[0].className="tipsy",n.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var s,o=a.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),c=n[0].offsetWidth,l=n[0].offsetHeight,u=t(this.options.gravity,this.$element[0]);switch(u.charAt(0)){case"n":s={top:o.top+o.height+this.options.offset,left:o.left+o.width/2-c/2};break;case"s":s={top:o.top-l-this.options.offset,left:o.left+o.width/2-c/2};break;case"e":s={top:o.top+o.height/2-l/2,left:o.left-c-this.options.offset};break;case"w":s={top:o.top+o.height/2-l/2,left:o.left+o.width+this.options.offset}}2==u.length&&("w"==u.charAt(1)?s.left=o.left+o.width/2-15:s.left=o.left+o.width/2-c+15);var h=0;s.left<0?(h=s.left,s.left=0):s.left+c>window.innerWidth&&(h=s.left+c-window.innerWidth,s.left=window.innerWidth-c),("n"===u||"s"===u)&&(h-=5),r.css("marginLeft",h),n.css(s).addClass("tipsy-"+u),r[0].className="tipsy-arrow tipsy-arrow-"+u.charAt(0),this.options.className&&n.addClass(t(this.options.className,this.$element[0])),this.options.fadeIn?n.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity},this.options.fadeIn):n.css({visibility:"visible",opacity:this.options.opacity}),this.options.sticky&&n.addClass("tipsy-sticky");var d=this,p=function(){d.validate(),d.validateTimeout=setTimeout(p,100)};p()}},hide:function(){clearTimeout(this.validateTimeout),this.options.fadeOut?this.tip().stop().fadeOut(this.options.fadeOut,function(){a(this).remove()}):this.tip().remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("original-title"))&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,n=this.options;return this.fixTitle(),n=this.options,"string"==typeof n.title?e=t.attr("title"==n.title?"original-title":n.title):"function"==typeof n.title&&(e=n.title.call(t[0])),e&&(e=(""+e).replace(/(^\s*|\s*$)/,"")),e||n.fallback},tip:function(){return this.$tip||(this.$tip=a('<div class="tipsy"><div class="tipsy-arrow"></div><div class="tipsy-inner"></div></div>')),this.$tip},validate:function(){var e=!!this.getTitle(),t=!1;if(e)try{for(var n=this.$element[0];n;){if(n===document){t=!0;break}n=n.parentNode}}catch(i){}t||this.hide()}},a.fn.tipsy=function(e){function t(t){var i=a.data(t,"tipsy");return i||(i=new n(t,a.fn.tipsy.elementOptions(t,e)),a.data(t,"tipsy",i)),i}function i(n){if(("tipsyshow"!==n.type||n.target===this)&&o!==this){var i=t(this);i.hoverState="in",0===e.delayIn?i.show():(i.fixTitle(),setTimeout(function(){"in"==i.hoverState&&i.show()},e.delayIn))}}function r(n){if("tipsyhide"!==n.type||n.target===this){var i=t(this);"dcg-tapstart"===n.type&&i.options.sticky||(i.hoverState="out",0===e.delayOut?i.hide():setTimeout(function(){"out"==i.hoverState&&i.hide()},e.delayOut))}}if(e===!0)return this.data("tipsy");if("string"==typeof e){var s=this.data("tipsy");return s&&s[e](),this}if(e=a.extend({},a.fn.tipsy.defaults,e),e.fadeIn=e.fadeIn||e.fade,e.fadeOut=e.fadeOut||e.fade,e.live||this.each(function(){t(this)}),"manual"!=e.trigger){var c="hover"==e.trigger?"tipsyshow":"focus",l="hover"==e.trigger?"tipsyhide dcg-tapstart dcg-tapend dcg-tapcancel":"blur";if(e.live&&e.delegate)this.on(c,e.delegate,i).on(l,e.delegate,r);else{var u=e.live?"on":"bind";this[u](c,i)[u](l,r)}}return this},a.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fadeIn:!1,fadeOut:!1,fallback:"",gravity:"n",html:!1,live:!0,offset:0,opacity:1,title:"title",trigger:"hover"},a.fn.tipsy.elementOptions=function(e,t){t=a.extend({},t);var n=a(e).attr("tipsy-gravity");n&&(t.gravity=n);var i=parseInt(a(e).attr("tipsy-offset"),10);return isNaN(i)||(t.offset=i),t},a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"},a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"},a.fn.tipsy.autoBounds=function(e,t){return function(){var n={ns:t[0],ew:t.length>1?t[1]:!1},i=a(document).scrollTop()+e,r=a(document).scrollLeft()+e,s=a(this);return s.offset().top<i&&(n.ns="n"),s.offset().left<r&&(n.ew="w"),a(window).width()+a(document).scrollLeft()-s.offset().left<e&&(n.ew="e"),a(window).height()+a(document).scrollTop()-s.offset().top<e&&(n.ns="s"),n.ns+(n.ew?n.ew:"")}},a(document).tipsy({title:"tooltip",wait:0,live:!0,delegate:".tipsy-sticky",gravity:"nw",sticky:!0,fade:!1});var l=0;return{isDisabled:i,removeDisableLock:r,addDisableLock:s}}),define("loadcss!css/share_options",function(){}),define("loadcss!css/popovers",function(){}),define("main/popover_view",["require","jquery","pjs","underscore_view","conditional_blur","loadcss!css/popovers"],function(e){function t(e){e.isVisible?(a.forEach(function(t){t!==e&&t.closePopover()}),n(document).on("dcg-tapstart.popover-"+e.popoverNumber,function(t){e.setProperty("isVisible",!e.eventShouldClosePopover(t))})):n(document).off("dcg-tapstart.popover-"+e.popoverNumber)}var n=e("jquery"),i=e("pjs"),r=e("underscore_view"),s=e("conditional_blur");e("loadcss!css/popovers");var a=[],o=i(r,function(e,i){e.init=function(){i.init.call(this),this.isVisible=!1,a.push(this),this.popoverNumber=a.length,this.observe("isVisible",function(){t(this),this.renderIsVisible()}.bind(this))},e.setPointTo=function(e){this.pointTo=e},e.alignArrow=function(){if(this.isVisible){if("left"===this.direction||"right"===this.direction)return void(this.$(".dcg-arrow")[0].style.left=null);var e=this.$();if(this.pointTo.length&&e.length){var t=this.pointTo.offset().left+.5*this.pointTo.width()-e.offset().left;this.$(".dcg-arrow").css("left",t)}}},e.setupOpenButton=function(e,t){this.openButton=e,this.openButton.on(t,this.onBtnPressed.bind(this))},e.didInsertElement=function(){this.renderIsVisible()},e.renderIsVisible=function(){this.$().toggle(this.isVisible),this.openButton&&this.openButton.toggleClass("dcg-active",this.isVisible).attr("aria-expanded",this.isVisible),this.pointTo&&this.alignArrow()},e.eventShouldClosePopover=function(e){return!this.eventIsWithinPopover(e)},e.eventIsWithinPopover=function(e){var t=n(e.target);return t.closest(this.$()).length||t.closest(this.openButton).length},e.onBtnPressed=function(e,t){var i=t||e.device;"keyboard"!==i&&s();var r=n(e.target);if(!r.closest(".dcg-popover").length)return r.closest(this.openButton).length?(this.togglePopover(),void("keyboard"===i&&(this.isVisible?this.focusFirstElement():this.openButton.focus()))):void 0},e.focusFirstElement=function(){var e=this.$().find(".dcg-selected, a, span[tabindex], div[tabindex]").first();e&&e.focus()},e.togglePopover=function(){this.setProperty("isVisible",!this.isVisible)},e.closePopover=function(){this.setProperty("isVisible",!1)}});return o}),define("template!share_options",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="<div class=\"dcg-share-container dcg-popover dcg-bottom dcg-constrained-height-popover\" role='complementary' aria-label='Share Options'>\n    <div class=\"dcg-popover-interior\">\n\n    <!-- have a graph hash -->\n\n    <div class='dcg-popover-title'>\n      "+(null==(__t=t("Share your graph with the world!"))?"":_.escape(__t))+'\n    </div>\n    <div class="dcg-popover-content">\n\n      <div class=\'dcg-loading\'>\n          <span class="dcg-spinner"></span>\n          '+(null==(__t=t("Loading..."))?"":_.escape(__t))+"\n      </div>\n\n      <div class='dcg-failed'>\n          "+(null==(__t=t("Sorry, there was an error generating a link to your graph. Check your internet connection."))?"":_.escape(__t))+'\n          <span role="button" tabindex=0 class="dcg-action-retry">'+(null==(__t=t("Retry now"))?"":_.escape(__t))+"</span>\n          "+(null==(__t=t("or"))?"":_.escape(__t))+'\n          <span role="button" tabindex=0 class="dcg-action-close">'+(null==(__t=t("Cancel"))?"":_.escape(__t))+"</span>\n      </div>\n\n      <div class='dcg-loaded'>\n        <br>\n        &nbsp; "+(null==(__t=t("Share this link:"))?"":_.escape(__t))+'\n        <input class="dcg-permalink select-all dcg-variable-permalink"></input>\n\n        <form role="form" class="dcg-action-screenshoturl" target=\'_blank\' method=\'post\'>\n          <div class="dcg-share-btn-group dcg-options-btns">\n            <span role="button" tabindex=0 class="dcg-btn-light-gray dcg-action-togglesection" section="email">'+(null==(__t=t("Email"))?"":_.escape(__t))+'</span>\n            <span role="button" tabindex=0 class="dcg-btn-light-gray dcg-action-togglesection" section="embed">'+(null==(__t=t("Embed"))?"":_.escape(__t))+"</span>\n            <input type='hidden' name='img' class='dcg-imgData'>\n            <button type='submit' class=\"dcg-btn-light-gray image-btn\" section=\"image\">"+(null==(__t=t("Image"))?"":_.escape(__t))+'</button>\n          </div>\n        </form>\n\n        <div class="dcg-email-div share-div">\n          <div class="template-emailerrors"></div>\n          <form role="form" class="dcg-action-emailgraph">\n            <label>'+(null==(__t=t("Send to:"))?"":_.escape(__t))+'\n            <input type="email" multiple="multiple" name="recipients" required="required" class="first-input" />\n            </label>\n\n            <label>'+(null==(__t=t("Your Name:"))?"":_.escape(__t))+'\n            <input type="text" name="name" required="required" class="dcg-variable-username" />\n            </label>\n\n            <label>'+(null==(__t=t("Message:"))?"":_.escape(__t))+" <i>"+(null==(__t=t("optional"))?"":_.escape(__t))+'</i>\n            <textarea name="message" rows="3" class=\'dcg-share-message\'></textarea>\n            </label>\n\n            <input type="hidden" name="hash" class="dcg-variable-graphhash" />\n            <button type="submit" class="dcg-btn-green" name="submit">'+(null==(__t=t("Send"))?"":_.escape(__t))+'</button>\n\n            <span class=\'email-status-notifications\'>\n              <span class="template-ifprocessing">\n                <span class="dcg-spinner"></span>\n                '+(null==(__t=t("sending..."))?"":_.escape(__t))+"\n              </span>\n            </span>\n          </form>\n        </div>\n        <div class='dcg-email-sent'>\n          "+(null==(__t=t("message sent"))?"":_.escape(__t))+'\n        </div>\n\n        <div class="dcg-embed-div share-div">\n          <label>\n            '+(null==(__t=t("HTML Embed Code"))?"":_.escape(__t))+'\n            <a href="http://support.desmos.com/entries/22449752-embedding-graphs-with-html" target="_blank">'+(null==(__t=t("what's this?"))?"":_.escape(__t))+'</a>\n            <textarea rows="4" class="select-all first-input dcg-variable-htmlembedcode"></textarea>\n          </label>\n        </div>\n\n        <div class="template-iffeatureable">\n          <div class="dcg-allow-feature">\n            <a type="button" class="close dcg-action-cancelfeature">\n              <i class="dcg-icon-remove"></i>\n            </a>\n            <div class=\'content\'>\n              <div class=\'dcg-title\'>\n                <b>'+(null==(__t=t("Nice Graph!"))?"":_.escape(__t))+"</b> <br> "+(null==(__t=t("Want us to consider it for staff picks?"))?"":_.escape(__t))+'\n              </div>\n              <span role="button" tabindex=0 class="dcg-disallowFeature dcg-feature-btn dcg-action-togglefeature">\n                '+(null==(__t=t("no, thanks"))?"":_.escape(__t))+'\n              </span>\n              <span role="button" tabindex=0 class="dcg-allowFeature dcg-feature-btn dcg-action-togglefeature">\n                '+(null==(__t=t("yes, please!"))?"":_.escape(__t))+"\n              </span>\n              <div style='clear:both'></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"dcg-arrow\"></div>\n</div>\n";return __p}}),define("main/share_options",["require","loadcss!css/share_options","loadcss!css/spinner","jquery","underscore","pjs","main/popover_view","main/calculator_backend","main/parse_json_errors","conditional_focus","template!share_options"],function(e){e("loadcss!css/share_options"),e("loadcss!css/spinner");var t=e("jquery"),n=e("underscore"),i=e("pjs"),r=e("main/popover_view"),s=e("main/calculator_backend"),a=e("main/parse_json_errors"),o=e("conditional_focus"),c=e("template!share_options"),l=i(r,function(e,i){e.template=c,e.pointToSelector=".dcg-action-share i",e.init=function(e,n,r){i.init.call(this),this.graphsController=n,this.userController=e,this.Calc=r,this.sharePromise=t.Deferred().reject().promise(),this.setProperty("isFeatureable",!1)},e.renderIsVisible=function(){i.renderIsVisible.call(this);var e=this.isVisible;this.$().toggle(e),this.isVisible?this.onBecameVisible():this.onBecameHidden()},e.eventShouldClosePopover=function(e){var n=t(e.target);return this.eventIsWithinPopover(e)?!1:!n.closest("#state-modals").length&&"modal_background"!=n.attr("id")},e.didCreateElement=function(){function e(){var e=n.userController.currentUser;e?n.setUser({name:e.name}):n.setUser(null)}i.didCreateElement.call(this),this.$().on("dcg-tapstart",".select-all",function(){t(this).on("dcg-tapend",function(){t(this).select()})}),this.$().on("dcg-tapmove dcg-tapend",".select-all",function(){t(this).off("dcg-tapend")}),this.$(".dcg-action-togglesection").on("dcg-tap",this.toggleSection.bind(this)),this.$(".dcg-action-emailgraph").on("submit",this.emailGraph.bind(this)),this.$(".dcg-action-cancelfeature").on("dcg-tap",this.cancelFeature.bind(this)),this.$(".dcg-allowFeature").on("dcg-tap",this.allowFeature.bind(this)),this.$(".dcg-disallowFeature").on("dcg-tap",this.disallowFeature.bind(this)),this.$(".dcg-action-retry").on("dcg-tap",this.retryNow.bind(this)),this.$(".dcg-action-close").on("dcg-tap",this.close.bind(this));var n=this;this.userController.observe("currentUser",function(){n.userController.currentUser&&n.userController.currentUser.observe("name",e),e()}),e(),this.observeAndSync("isFeatureable",this.renderIsFeatureable.bind(this)),this.observe("userAllowsFeature",this.renderUserAllowsFeature.bind(this)),this.computeIsFeatureable(),this.renderUser(),this.renderGraph(),this.renderIsProcessing(),this.renderEmailErrors(),this.renderOpenSection(),this.setProperty("userAllowsFeature",!0)},e.retryNow=function(){this.setProperty("isVisible",!1),this.setProperty("isVisible",!0)},e.close=function(){this.setProperty("isVisible",!1)},e.onBecameVisible=function(){var e=this,t=this.graphsController.currentGraph.copy();this.graphsController.updateGraphData(t);var n={myGraphs:!1,isUpdate:!1},i=this.sharePromise=s.saveGraph(t,n).done(function(t){e.sharePromise===i&&(e.setGraph(t),e.$(".dcg-loading").hide(),e.$(".dcg-loaded").show(),e.$(".dcg-imgData").val(e.Calc.screenshot()))}).fail(function(){e.sharePromise===i&&(e.$(".dcg-loading").hide(),e.$(".dcg-failed").show())})},e.onBecameHidden=function(){this.$(".dcg-loaded").hide(),this.$(".dcg-failed").hide(),this.$(".dcg-loading").show();var e=this.graph;this.isFeatureable&&this.userAllowsFeature&&this.sharePromise.done(function(){s.allowFeature({hash:e.hash})}),this.minimizeSections(),this.setIsProcessing(!1),this.setEmailErrors(void 0)},e.getIsProcessing=function(){return this.isProcessing},e.setIsProcessing=function(e){e!==this.isProcessing&&(this.isProcessing=e,this.renderIsProcessing())},e.renderIsProcessing=function(){this.$(".template-ifprocessing").toggle(this.getIsProcessing())},e.getEmailErrors=function(){return this.emailErrors},e.setEmailErrors=function(e){n.isEqual(e,this.emailErrors)||(this.emailErrors=e,this.renderEmailErrors())},e.renderEmailErrors=function(){var e=this.$(".template-emailerrors");e.children().remove(),n.each(this.emailErrors,function(t){e.append('<div class="dcg-errors">'+t.message+"</div>")})},e.computeIsFeatureable=function(){var e=this.graphsController.currentGraph,t=e&&e.title;this.setProperty("isFeatureable",t)},e.renderIsFeatureable=function(){this.$(".template-iffeatureable").toggle(!!this.isFeatureable)},e.renderUserAllowsFeature=function(){this.$(".dcg-allowFeature").toggleClass("dcg-active",!!this.userAllowsFeature),this.$(".dcg-disallowFeature").toggleClass("dcg-active",!this.userAllowsFeature)},e.setGraph=function(e){this.graph&&n.isEqual(e,this.graph)||(this.graph=e,this.renderGraph(),this.computeIsFeatureable())},e.renderGraph=function(){var e=this.graph;e||(e={}),e.hash||(e.hash=""),e.path||(e.path=""),this.$(".dcg-action-screenshoturl").attr("action",this.getScreenshotUrl(e)),this.$(".dcg-variable-facebook").attr("href",this.getFacebookURL(e)),this.$(".dcg-variable-twitter").attr("href",this.getTwitterURL(e)),this.$(".dcg-variable-google").attr("href",this.getGooglePlusURL(e)),this.$(".dcg-permalink").val(e.path),this.$(".dcg-variable-graphhash").val(e.hash),this.$(".dcg-variable-htmlembedcode").val(this.getHtmlEmbedCode(e))},e.setUser=function(e){n.isEqual(e,this.user)||(this.user=e,this.renderUser(),this.computeIsFeatureable())},e.renderUser=function(){var e=this.user;this.$(".dcg-variable-username").val(e?e.name:"")},e.minimizeSections=function(){this.setOpenSection(null),t(".share-div").hide()},e.getOpenSection=function(){return this.openSection},e.setOpenSection=function(e){e!==this.openSection&&(this.openSection=e,this.renderOpenSection())},e.renderOpenSection=function(){var e=this.getOpenSection();this.$("[section=email]").toggleClass("dcg-active","email"===e),this.$("[section=embed]").toggleClass("dcg-active","embed"===e),this.$("[section=image]").toggleClass("dcg-active","image"===e)},e.toggleSection=function(e){var n=t(e.target).attr("section"),i=this.getOpenSection()===n;if(this.minimizeSections(),i)this.$(".dcg-allow-feature").show(),n=null;else{this.$(".dcg-allow-feature").hide(),this.$(".dcg-"+n+"-div").show();var r=this.$(".dcg-"+n+"-div .first-input");o(r)&&r.select(),"email"===n&&(this.$(".dcg-share-message").val(""),this.$(".dcg-email-div .first-input").val(""))}this.setOpenSection(n)},e.allowFeature=function(){this.setProperty("userAllowsFeature",!0)},e.disallowFeature=function(){this.setProperty("userAllowsFeature",!1)},e.cancelFeature=function(){this.setProperty("userAllowsFeature",!1),this.$(".template-iffeatureable").slideUp("fast")},e.getFacebookURL=function(e){return"https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(e.path)},e.getTwitterURL=function(e){var t,n;return e.hash?(t="Look what I made with the Desmos Graphing Calculator: ",n=e.path):(t="Check out the Desmos Graphing Calculator: beautiful, free math!",n="https://www.desmos.com"),"https://twitter.com/intent/tweet?url="+encodeURIComponent(n)+"&text="+encodeURIComponent(t)+"&via=desmos"},e.getGooglePlusURL=function(e){return"https://plus.google.com/share?url="+encodeURIComponent(e.path)},e.getHtmlEmbedCode=function(e){return'<iframe src="'+e.path+'?embed" width="500px" height="500px" style="border: 1px solid #ccc" frameBorder=0 />'},e.emailGraph=function(e){if(e.preventDefault(),!this.getIsProcessing()){this.setIsProcessing(!0);var n=this,i=t(e.target).serialize();s.emailGraph(i).done(function(e){n.setEmailErrors(void 0),n.$(".dcg-email-div").hide(),n.$(".dcg-email-sent").show(),setTimeout(function(){n.$(".dcg-email-sent").slideUp(400),n.minimizeSections()},1e3)}).fail(function(e){n.setEmailErrors(a(e))}).always(function(){n.setIsProcessing(!1)})}},e.getScreenshotUrl=function(e){return"/screenshot/"+e.hash}});return l}),define("loadcss!css/help",function(){}),
define("template!help_dropdown",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="<div class=\"dcg-help-container dcg-popover dcg-bottom dcg-constrained-height-popover\" role='complementary' aria-label='Help Menu'>\n  <div class=\"dcg-popover-interior\">\n\n\n    <div class='dcg-popover-title' aria-hidden='true'>"+(null==(__t=t("Tours"))?"":_.escape(__t))+"</div>\n    <div class='dcg-popover-content dcg-tours-content' role='group' aria-label='Tours'>\n      <!-- tours get inserted here -->\n    </div>\n\n    <div class='dcg-popover-title' aria-hidden='true'>"+(null==(__t=t("Resources"))?"":_.escape(__t))+"</div>\n    <div class='dcg-popover-content dcg-resources-content' role='group' aria-label='Resources'>\n\n      <div>\n        <a href='http://learn.desmos.com' target='_blank'>\n          <i class='dcg-icon-rocket' aria-hidden='true'></i>\n          <span>"+(null==(__t=t("Getting Started"))?"":_.escape(__t))+"</span>\n        </a>\n      </div>\n\n      <div>\n        <a href='https://www.youtube.com/playlist?list=PLfM6zMGnbgOGLZc-_Yj3QVK3Vz_L4Cw59' target='_blank'>\n          <i class='dcg-icon-film' aria-hidden='true'></i>\n          <span>"+(null==(__t=t("Video Tutorials"))?"":_.escape(__t))+"</span>\n        </a>\n      </div>\n\n      <div>\n        <a href='"+(null==(__t=userGuideURL)?"":_.escape(__t))+"' target='_blank'>\n          <i class='dcg-icon-book' aria-hidden='true'></i>\n          <span>"+(null==(__t=t("Desmos User Guide"))?"":_.escape(__t))+"</span>\n        </a>\n      </div>\n\n      <div>\n        <a href='http://support.desmos.com/hc/en-us' target='_blank'>\n          <i class='dcg-icon-comments' aria-hidden='true'></i>\n          <span>"+(null==(__t=t("Help Center"))?"":_.escape(__t))+"</span>\n        </a>\n      </div>\n      <div>\n        <a class=\"dcg-action-show-hotkeys\" role=\"link\" tabindex=0 target='_blank'>\n          <i class='dcg-icon-keyboard' aria-hidden='true'></i>\n          <span>"+(null==(__t=t("Keyboard Shortcuts"))?"":_.escape(__t))+"</span>\n        </a>\n      </div>\n    </div>\n\n    <div class='dcg-popover-title dcg-interior-title dcg-hide-on-mobile' aria-hidden='true'>"+(null==(__t=t("Feedback"))?"":_.escape(__t))+"</div>\n    <div class='dcg-popover-content dcg-hide-on-mobile' role='group' aria-label='Feedback'>\n      <div class='dcg-resources-content dcg-feedback-content'>\n\n\n      <span class=\"dcg-feedback-twitter\">\n        <a href=\"https://twitter.com/intent/tweet?text=Hey%2C%20%40desmos:%20I've%20got%20a%20question!&via=desmos\" target='_blank'>\n          <i class='dcg-icon-twitter'></i>\n          <span>"+(null==(__t=t("Tweet @desmos"))?"":_.escape(__t))+"</span>\n        </a>\n       </span>\n       <span class=\"dcg-feedback-facebook\">\n        <a href=\"https://www.facebook.com/desmosinc\" target='_blank'>\n          <i class='dcg-icon-facebook'></i>\n          <span>"+(null==(__t=t("Tell us on Facebook"))?"":_.escape(__t))+"</span>\n        </a>\n      </span>\n\n\n      </div>\n\n      ",previewMode&&(__p+="\n\n        <div class='dcg-previewMode'>\n          "+(null==(__t=previewMessage)?"":_.escape(__t))+"<br>\n          <a role=\"link\" tabindex=0 class='dcg-btn-green' href='"+(null==(__t=previewFeedbackUrl)?"":_.escape(__t))+"' target='_blank'>\n            "+(null==(__t=t("Share your thoughts!"))?"":_.escape(__t))+"\n          </a>\n        </div>\n\n      "),__p+="\n\n      ",maintenance||previewMode||(__p+='\n        <div class="dcg-suggestions">\n          <div class="template-errors"></div>\n          <div class="dcg-feedback-email-sent">\n            '+(null==(__t=t("Thanks for the feedbackyou'll hear from us soon!"))?"":_.escape(__t))+'\n          </div>\n\n          <form class="dcg-action-submit">\n\n            <textarea placeholder="'+(null==(__t=t("Type your question or suggestion..."))?"":_.escape(__t))+'" name="message"></textarea>\n            <div class="dcg-suggestions-expansion">\n              <div class="template-unlessuser">\n                <div class=\'dcg-feedback-email-label\'>\n                  '+(null==(__t=t("Please provide an email so we can write back."))?"":_.escape(__t))+"\n                  <i>("+(null==(__t=t("optional"))?"":_.escape(__t))+')</i></div>\n                <input name="anonymous-email" class="dcg-anonymous-email" placeholder="your.name@test.com" type="email" />\n              </div>\n              <span class="dcg-feedback-btns">\n                <a role="link" tabindex=0 class="dcg-btn-light-gray dcg-action-closesuggestion">\n                  '+(null==(__t=t("Cancel"))?"":_.escape(__t))+'\n                </a>\n                <button class="dcg-btn-green" name="submit" type="submit">\n                  '+(null==(__t=t("Send Feedback"))?"":_.escape(__t))+'\n                </button>\n                </span>\n\n              <div class="template-processing" style="display:none">\n                <span class="dcg-spinner"></span> '+(null==(__t=t("sending..."))?"":_.escape(__t))+"\n              </div>\n            </div>\n          </form>\n        </div>\n      "),__p+="\n    </div>\n  </div>\n  <div class='dcg-arrow'></div>\n</div>\n";return __p}}),define("template!tour_link",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<a class="dcg-feature" href="/calculator?tour='+(null==(__t=name)?"":_.escape(__t))+'" target="_blank">\n  <span class="dcg-thumb dcg-'+(null==(__t=name)?"":_.escape(__t))+'"></span></span>\n  '+(null==(__t=t(title))?"":_.escape(__t))+"\n</a>";return __p}}),define("analytics/google_analytics",["require"],function(e){var t=!1;return{init:function(e){if(!t){window._gaq=window._gaq||[],_gaq.push(["_setAccount",e]),_gaq.push(["_trackPageview"]),t=!0;var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)}},send:function(e){t&&_gaq.push(e)}}}),define("main/tour_link",["require","pjs","template!tour_link","underscore_view","analytics/google_analytics"],function(e){var t=e("pjs"),n=e("template!tour_link"),i=e("underscore_view"),r=e("analytics/google_analytics"),s=t(i,function(e,t){e.template=n,e.init=function(e,n,i){t.init.call(this),this.options=i||{},this.tourData=n,this.tourController=e},e.getTemplateParams=function(){return this.tourData},e.didCreateElement=function(){t.didCreateElement.call(this),this.$(".dcg-feature").on("dcg-tap",this.launchTour.bind(this)),this.$(".dcg-feature").on("click",this.preventPopupTour.bind(this))},e.shouldPopupTour=function(){return this.options.stayInPage?!1:this.tourController.shouldPopupTour(this.tourData.name)},e.preventPopupTour=function(e){this.shouldPopupTour()||e.preventDefault()},e.launchTour=function(e){return this.shouldPopupTour()?void r.send(["_trackEvent","Launching "+this.tourData.name+" in new window",JSON.stringify(this.Calc.getState().expressions)]):(this.tourController.startTour(this.tourData.name,"help"),void this.triggerEvent("tourLaunched"))}});return s}),define("jison",[],function(){var e={trace:function(){},yy:{},symbols_:{error:2,sentence:3,expr:4,EOF:5,assignment:6,equation:7,function_declaration:8,regression:9,ordered_pair_list:10,double_inequality:11,"boolean":12,identifier:13,"=":14,FUNCTION_PROTOTYPE:15,",":16,"~":17,comparator:18,IDENTIFIER_BASE:19,ordered_pair:20,ordered_pair_list_elements:21,"(":22,")":23,list:24,"[":25,list_elements:26,"]":27,range:28,optional_commas_ellipsis:29,"...":30,list_element_access_impmul:31,expr_atom_impmul:32,list_element_access:33,expr_atom:34,expr_sum:35,"<":36,">":37,">=":38,"<=":39,"+":40,expr_product:41,"-":42,"*":43,"/":44,exponent:45,"^N":46,"^I":47,"^":48,"{":49,"}":50,subscript:51,_N:52,_I:53,_:54,function_call:55,primed_function_call:56,function_call_unary:57,trig_function_call:58,ln_log_function_call:59,logbase_function_call:60,ANS:61,"left|":62,"right|":63,FRAC:64,SQRT:65,"!":66,repeated_operator:67,integral:68,DERIVATIVE:69,expr_piecewise:70,constant:71,NUMBER:72,expr_atom_error:73,repeated_operator_symbol:74,SUM:75,PROD:76,INT:77,DIFFERENTIAL:78,"{_visible":79,piecewise_list:80,"}_visible":81,incomplete_piecewise_list:82,piecewise_element:83,":":84,trig_function:85,TRIG_FUNCTION:86,logbase_prefix:87,LOG:88,LOG_BASE_N:89,ln_log_prefix:90,LN:91,function_argument_list:92,primes:93,PRIME:94,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"=",15:"FUNCTION_PROTOTYPE",16:",",17:"~",19:"IDENTIFIER_BASE",22:"(",23:")",25:"[",27:"]",30:"...",36:"<",37:">",38:">=",39:"<=",40:"+",42:"-",43:"*",44:"/",46:"^N",47:"^I",48:"^",49:"{",50:"}",52:"_N",53:"_I",54:"_",61:"ANS",62:"left|",63:"right|",64:"FRAC",65:"SQRT",66:"!",69:"DERIVATIVE",72:"NUMBER",75:"SUM",76:"PROD",77:"INT",78:"DIFFERENTIAL",79:"{_visible",81:"}_visible",84:":",86:"TRIG_FUNCTION",88:"LOG",89:"LOG_BASE_N",91:"LN",94:"PRIME"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,3],[3,2],[3,4],[3,1],[6,3],[9,3],[7,3],[11,5],[13,1],[10,3],[21,1],[21,3],[20,5],[24,3],[28,5],[29,1],[29,2],[29,2],[29,3],[26,1],[26,3],[31,4],[33,4],[4,1],[18,1],[18,1],[18,1],[18,1],[12,3],[12,3],[12,5],[35,3],[35,3],[35,2],[35,2],[35,1],[41,2],[41,3],[41,3],[41,2],[41,2],[41,1],[45,1],[45,1],[45,4],[51,1],[51,1],[51,4],[32,1],[32,1],[32,1],[32,1],[32,1],[32,1],[32,1],[32,1],[32,1],[32,3],[32,3],[32,3],[32,2],[32,5],[32,6],[32,6],[32,7],[32,4],[32,7],[32,2],[32,1],[32,1],[32,2],[32,1],[34,1],[34,3],[34,2],[34,2],[34,2],[34,1],[34,1],[34,1],[34,1],[34,1],[34,1],[73,2],[73,1],[73,1],[73,2],[73,1],[73,2],[74,1],[74,1],[67,9],[68,5],[68,4],[68,2],[70,3],[70,2],[80,3],[80,1],[82,3],[82,1],[83,3],[83,1],[71,1],[71,2],[57,5],[57,4],[85,1],[58,4],[58,2],[58,7],[58,9],[58,3],[58,5],[87,2],[87,1],[60,4],[60,2],[60,5],[60,3],[90,1],[90,1],[59,4],[59,2],[59,5],[59,3],[55,4],[56,5],[56,5],[56,5],[56,5],[56,5],[93,2],[93,1],[92,3],[92,3],[8,2]],performAction:function(e,t,n,i,r,s,a){var o=s.length-1;switch(r){case 1:return s[o-1];case 2:return s[o-1];case 3:return s[o-1];case 4:return s[o-1];case 5:return s[o-1];case 6:return s[o-1];case 7:return s[o-1];case 8:return s[o-1];case 9:return i.ErrorMsg.missingRHS(s[o-2]._symbol);case 10:var c=i.parseFunctionDeclaration(s[o-1]).identifier._symbol;return i.ErrorMsg.missingRHS(c);case 11:return i.ErrorMsg.malformedPoint();case 12:return i.ErrorMsg.blankExpression();case 13:this.$=i.Assignment(s[o-2],s[o]),i.setInput(this.$,this._$);break;case 14:this.$=i.Regression(s[o-2],s[o]),i.setInput(this.$,this._$);break;case 15:this.$=i.Equation(s[o-2],s[o]),i.setInput(this.$,this._$);break;case 16:this.$=i.DoubleInequality([s[o-4],s[o-3],s[o-2],s[o-1],s[o]]),i.setInput(this.$,this._$);break;case 17:this.$=i.Identifier(e),i.setInput(this.$,this._$);break;case 18:s[o].unshift(s[o-2]),this.$=i.List(s[o]),i.setInput(this.$,this._$);break;case 19:this.$=[s[o]];break;case 20:s[o-2].push(s[o]),this.$=s[o-2];break;case 21:this.$=i.OrderedPair([s[o-3],s[o-1]]);break;case 22:this.$=i.List(s[o-1]),i.setInput(this.$,this._$);break;case 23:this.$=i.Range([i.List(s[o-3]),i.List(s[o-1])]);break;case 28:this.$=[s[o]];break;case 29:s[o-2].push(s[o]),this.$=s[o-2];break;case 30:this.$=i.ListAccess([s[o-3],s[o-1]]);break;case 31:this.$=i.ListAccess([s[o-3],s[o-1]]);break;case 32:this.$=s[o],i.setInput(this.$,this._$);break;case 33:this.$="<";break;case 34:this.$=">";break;case 35:this.$=">=";break;case 36:this.$="<=";break;case 37:this.$=i.Comparator[s[o-1]]([s[o-2],s[o]]),i.setInput(this.$,this._$);break;case 38:this.$=i.Comparator["="]([s[o-2],s[o]]),i.setInput(this.$,this._$);break;case 39:var l=i.Comparator[s[o-3]]([s[o-4],s[o-2]]),u=i.Comparator[s[o-1]]([s[o-2],s[o]]);this.$=i.And([l,u]),i.setInput(this.$,this._$);break;case 40:this.$=i.Add([s[o-2],s[o]]);break;case 41:this.$=i.Subtract([s[o-2],s[o]]);break;case 42:throw i.ErrorMsg.binaryOperatorMissingOperand("+");case 43:throw i.ErrorMsg.binaryOperatorMissingOperand("-");case 44:this.$=s[o];break;case 45:this.$=i.Multiply([s[o-1],s[o]]);break;case 46:this.$=i.Multiply([s[o-2],s[o]]);break;case 47:this.$=i.Divide([s[o-2],s[o]]);break;case 48:throw i.ErrorMsg.binaryOperatorMissingOperand("*");case 49:throw i.ErrorMsg.binaryOperatorMissingOperand("");case 50:this.$=s[o];break;case 51:this.$=i.Constant(Number(s[o]));break;case 52:this.$=i.Identifier(s[o]),i.setInput(this.$,""+s[o-0]);break;case 53:this.$=s[o-1];break;case 54:this.$=i.Constant(Number(s[o]));break;case 55:this.$=i.Identifier(s[o]),i.setInput(this.$,""+s[o-0]);break;case 56:this.$=s[o-1];break;case 57:this.$=s[o];break;case 58:this.$=s[o];break;case 59:this.$=s[o];break;case 60:this.$=s[o];break;case 61:this.$=s[o];break;case 62:this.$=s[o];break;case 63:this.$=s[o];break;case 64:this.$=s[o];break;case 65:if(void 0===i.currentIndex)throw i.ErrorMsg.badAnsContext();this.$=i.Ans("ans_{"+(i.currentIndex-1)+"}");break;case 66:this.$=s[o-1];break;case 67:this.$=s[o-1];break;case 68:this.$=i.FunctionCall("\\abs",[s[o-1]]);break;case 69:this.$=i.Exponent([s[o-1],s[o]]);break;case 70:throw i.ErrorMsg.fractionEmpty();case 71:throw i.ErrorMsg.fractionMissingNumerator();case 72:throw i.ErrorMsg.fractionMissingDenominator();case 73:this.$=i.Divide([s[o-4],s[o-1]]);break;case 74:this.$=i.FunctionCall("\\sqrt",[s[o-1]]);break;case 75:this.$=i.FunctionCall("\\nthroot",[s[o-1],s[o-4]]);break;case 76:this.$=i.FunctionCall("\\factorial",[s[o-1]]);break;case 77:this.$=s[o];break;case 78:this.$=s[o];break;case 79:this.$=i.Derivative(s[o-1],[s[o]]);break;case 80:this.$=s[o];break;case 81:this.$=s[o];break;case 82:this.$=i.Negative([i.Exponent([i.Constant(Number(s[o-1])),s[o]])]);break;case 83:this.$=i.Exponent([s[o-1],s[o]]);break;case 84:this.$=i.FunctionCall("\\factorial",[s[o-1]]);break;case 85:this.$=i.Negative([s[o]]);break;case 86:this.$=s[o];break;case 87:this.$=s[o];break;case 88:this.$=s[o];break;case 89:this.$=s[o];break;case 90:this.$=s[o];break;case 91:this.$=s[o];break;case 92:throw i.ErrorMsg.binaryOperatorMissingOperand("+");case 93:throw i.ErrorMsg.binaryOperatorMissingOperand("+");case 94:throw i.ErrorMsg.binaryOperatorMissingOperand("*");case 95:throw i.ErrorMsg.binaryOperatorMissingOperand("*");case 96:throw i.ErrorMsg.binaryOperatorMissingOperand("");case 97:throw i.ErrorMsg.binaryOperatorMissingOperand("");case 98:this.$=i.Sum;break;case 99:this.$=i.Product;break;case 100:this.$=s[o-8]([s[o-5],s[o-3],s[o-1],s[o]]);break;case 101:this.$=i.Integral([i.Identifier(s[o]),s[o-3],s[o-2],s[o-1]]);break;case 102:this.$=i.Integral([i.Identifier(s[o]),s[o-2],s[o-1],i.Constant(1)]);break;case 103:throw i.ErrorMsg.missingIntegralBounds();case 104:this.$=i.Piecewise.chain(s[o-1]);break;case 105:this.$=i.Piecewise.empty();break;case 106:s[o-2].push({condition:i.Constant(!0),if_expr:s[o]}),this.$=s[o-2];break;case 107:this.$=s[o];break;case 108:s[o-2].push(s[o]),this.$=s[o-2];break;case 109:this.$=[s[o]];break;case 110:this.$={condition:s[o-2],if_expr:s[o]};break;case 111:this.$={condition:s[o],if_expr:i.Constant(1)};break;case 112:this.$=i.Constant(Number(e));break;case 113:this.$=i.Constant(-s[o]);break;case 114:this.$=i.FunctionExponent([s[o-4],s[o-2],s[o]]);break;case 115:this.$=i.FunctionCall(s[o-3],[s[o-1]]);break;case 116:this.$=i.Identifier(e),i.setInput(this.$,this._$);break;case 117:this.$=i.FunctionCall(s[o-3],[s[o-1]]);break;case 118:if(!s[o].okForImplicitFunction())throw i.ErrorMsg.badImplicitMultiply(s[o-1]._symbol);this.$=i.FunctionCall(s[o-1],[s[o]]);break;case 119:if(!s[o].okForImplicitFunction())throw i.ErrorMsg.badImplicitMultiply(s[o-6]._symbol);if(1!=s[o-2].constantValue)throw i.ErrorMsg.badTrigExponent(s[o-6]._symbol);this.$=i.FunctionCall(i.inverses[s[o-6]._symbol],[s[o]]);break;case 120:if(1!=s[o-4].constantValue)throw i.ErrorMsg.badTrigExponent(s[o-8]._symbol);this.$=i.FunctionCall(i.inverses[s[o-8]._symbol],[s[o-1]]);break;case 121:if(!s[o].okForImplicitFunction())throw i.ErrorMsg.badImplicitMultiply(s[o-2]._symbol);if("2"!=s[o-1])throw i.ErrorMsg.badTrigExponent(s[o-2]._symbol);this.$=i.Exponent([i.FunctionCall(s[o-2],[s[o]]),i.Constant(2)]);break;case 122:if("2"!=s[o-3])throw i.ErrorMsg.badTrigExponent(s[o-4]._symbol);this.$=i.Exponent([i.FunctionCall(s[o-4],[s[o-1]]),i.Constant(2)]);break;case 123:this.$=s[o];break;case 124:this.$=i.Constant(Number(e));break;case 125:this.$=i.FunctionCall("logbase",[s[o-1],s[o-3]]);break;case 126:if(!s[o].okForImplicitFunction())throw i.ErrorMsg.badImplicitMultiply("logbase");this.$=i.FunctionCall("logbase",[s[o],s[o-1]]);break;case 127:if("2"!=s[o-3])throw i.ErrorMsg.badLogExponent("logbase");this.$=i.Exponent([i.FunctionCall("logbase",[s[o-1],s[o-4]]),i.Constant(2)]);break;case 128:if(!s[o].okForImplicitFunction())throw i.ErrorMsg.badImplicitMultiply("logbase");if("2"!=s[o-1])throw i.ErrorMsg.badLogExponent("logbase");this.$=i.Exponent([i.FunctionCall("logbase",[s[o],s[o-2]]),i.Constant(2)]);break;case 129:this.$="ln";break;case 130:this.$="log";break;case 131:this.$=i.FunctionCall(s[o-3],[s[o-1]]);break;case 132:if(!s[o].okForImplicitFunction())throw i.ErrorMsg.badImplicitMultiply(s[o-1]);this.$=i.FunctionCall(s[o-1],[s[o]]);break;case 133:if("2"!=s[o-3])throw i.ErrorMsg.badLogExponent(s[o-4]);this.$=i.Exponent([i.FunctionCall(s[o-4],[s[o-1]]),i.Constant(2)]);break;case 134:if(!s[o].okForImplicitFunction())throw i.ErrorMsg.badImplicitMultiply(s[o-2]);if("2"!=s[o-1])throw i.ErrorMsg.badLogExponent(s[o-2]);this.$=i.Exponent([i.FunctionCall(s[o-2],[s[o]]),i.Constant(2)]);break;case 135:this.$=i.FunctionCall(s[o-3],s[o-1]);break;case 136:this.$=i.Prime(s[o-3],[i.FunctionCall(s[o-4],[s[o-1]])]);break;case 137:this.$=i.Prime(s[o-3],[i.FunctionCall(s[o-4],[s[o-1]])]);break;case 138:this.$=i.Prime(s[o-3],[i.FunctionCall(s[o-4],[s[o-1]])]);break;case 139:this.$=i.Prime(s[o-3],[i.FunctionCall("logbase",[s[o-1],s[o-4]])]);break;case 140:throw i.ErrorMsg.primedFunctionArity();case 141:this.$=s[o-1]+1;break;case 142:this.$=1;break;case 143:this.$=s[o-2].concat([s[o]]);break;case 144:this.$=[s[o-2],s[o]];break;case 145:var h=i.parseFunctionDeclaration(s[o-1]);this.$=i.FunctionDefinition(h.identifier,h.args,s[o]),i.setInput(this.$,this._$)}},table:[{3:1,4:2,5:[1,12],6:3,7:4,8:5,9:6,10:7,11:8,12:9,13:10,15:[1,11],19:[1,15],20:14,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{1:[3]},{5:[1,59],14:[1,61],16:[1,60],17:[1,62],18:63,36:[1,64],37:[1,65],38:[1,66],39:[1,67]},{5:[1,68]},{5:[1,69]},{5:[1,70]},{5:[1,71]},{5:[1,72]},{5:[1,73]},{5:[1,74]},{5:[2,57],14:[1,75],16:[2,57],17:[2,57],19:[2,57],22:[1,76],25:[2,57],36:[2,57],37:[2,57],38:[2,57],39:[2,57],40:[2,57],42:[2,57],43:[2,57],44:[2,57],46:[2,57],47:[2,57],48:[2,57],49:[2,57],61:[2,57],62:[2,57],64:[2,57],65:[2,57],66:[2,57],69:[2,57],75:[2,57],76:[2,57],77:[2,57],79:[2,57],86:[2,57],88:[2,57],89:[2,57],91:[2,57],93:77,94:[1,78]},{4:80,5:[1,79],13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{1:[2,12]},{5:[2,32],14:[2,32],16:[2,32],17:[2,32],19:[2,32],22:[2,32],23:[2,32],25:[2,32],27:[2,32],30:[2,32],36:[2,32],37:[2,32],38:[2,32],39:[2,32],40:[1,83],42:[1,84],43:[2,32],44:[2,32],46:[2,32],47:[2,32],48:[2,32],49:[2,32],50:[2,32],61:[2,32],62:[2,32],63:[2,32],64:[2,32],65:[2,32],66:[2,32],69:[2,32],75:[2,32],76:[2,32],77:[2,32],78:[2,32],79:[2,32],81:[2,32],84:[2,32],86:[2,32],88:[2,32],89:[2,32],91:[2,32]},{5:[2,89],14:[2,89],16:[1,85],17:[2,89],19:[2,89],22:[2,89],25:[2,89],36:[2,89],37:[2,89],38:[2,89],39:[2,89],40:[2,89],42:[2,89],43:[2,89],44:[2,89],46:[2,89],47:[2,89],48:[2,89],49:[2,89],61:[2,89],62:[2,89],64:[2,89],65:[2,89],66:[2,89],69:[2,89],75:[2,89],76:[2,89],77:[2,89],79:[2,89],86:[2,89],88:[2,89],89:[2,89],91:[2,89]},{5:[2,17],14:[2,17],16:[2,17],17:[2,17],19:[2,17],22:[2,17],23:[2,17],25:[2,17],27:[2,17],30:[2,17],36:[2,17],37:[2,17],38:[2,17],39:[2,17],40:[2,17],42:[2,17],43:[2,17],44:[2,17],46:[2,17],47:[2,17],48:[2,17],49:[2,17],50:[2,17],61:[2,17],62:[2,17],63:[2,17],64:[2,17],65:[2,17],66:[2,17],69:[2,17],75:[2,17],76:[2,17],77:[2,17],78:[2,17],79:[2,17],81:[2,17],84:[2,17],86:[2,17],88:[2,17],89:[2,17],91:[2,17],94:[2,17]},{5:[2,44],13:82,14:[2,44],16:[2,44],17:[2,44],19:[1,15],22:[1,89],23:[2,44],25:[2,44],27:[2,44],30:[2,44],31:34,32:86,36:[2,44],37:[2,44],38:[2,44],39:[2,44],40:[2,44],42:[2,44],43:[1,87],44:[1,88],46:[2,44],47:[2,44],48:[2,44],49:[1,36],50:[2,44],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,44],64:[1,38],65:[1,39],66:[2,44],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,44],79:[1,52],81:[2,44],84:[2,44],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:90,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,50],14:[2,50],16:[2,50],17:[2,50],19:[2,50],22:[2,50],23:[2,50],25:[1,93],27:[2,50],30:[2,50],36:[2,50],37:[2,50],38:[2,50],39:[2,50],40:[2,50],42:[2,50],43:[2,50],44:[2,50],45:91,46:[1,94],47:[1,95],48:[1,96],49:[2,50],50:[2,50],61:[2,50],62:[2,50],63:[2,50],64:[2,50],65:[2,50],66:[1,92],69:[2,50],75:[2,50],76:[2,50],77:[2,50],78:[2,50],79:[2,50],81:[2,50],84:[2,50],86:[2,50],88:[2,50],89:[2,50],91:[2,50]},{5:[2,81],14:[2,81],16:[2,81],17:[2,81],19:[2,81],22:[2,81],23:[2,81],25:[2,81],27:[2,81],30:[2,81],36:[2,81],37:[2,81],38:[2,81],39:[2,81],40:[2,81],42:[2,81],43:[2,81],44:[2,81],46:[2,81],47:[2,81],48:[2,81],49:[2,81],50:[2,81],61:[2,81],62:[2,81],63:[2,81],64:[2,81],65:[2,81],66:[2,81],69:[2,81],75:[2,81],76:[2,81],77:[2,81],78:[2,81],79:[2,81],81:[2,81],84:[2,81],86:[2,81],88:[2,81],89:[2,81],91:[2,81]},{13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:98,40:[1,44],42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,97],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,86],14:[2,86],16:[2,86],17:[2,86],19:[2,86],22:[2,86],23:[2,86],25:[2,86],27:[2,86],30:[2,86],36:[2,86],37:[2,86],38:[2,86],39:[2,86],40:[2,86],42:[2,86],43:[2,86],44:[2,86],46:[2,86],47:[2,86],48:[2,86],49:[2,86],50:[2,86],61:[2,86],62:[2,86],63:[2,86],64:[2,86],65:[2,86],66:[2,86],69:[2,86],75:[2,86],76:[2,86],77:[2,86],78:[2,86],79:[2,86],81:[2,86],84:[2,86],86:[2,86],88:[2,86],89:[2,86],91:[2,86]},{5:[2,87],14:[2,87],16:[2,87],17:[2,87],19:[2,87],22:[2,87],23:[2,87],25:[2,87],27:[2,87],30:[2,87],36:[2,87],37:[2,87],38:[2,87],39:[2,87],40:[2,87],42:[2,87],43:[2,87],44:[2,87],46:[2,87],47:[2,87],48:[2,87],49:[2,87],50:[2,87],61:[2,87],62:[2,87],63:[2,87],64:[2,87],65:[2,87],66:[2,87],69:[2,87],75:[2,87],76:[2,87],77:[2,87],78:[2,87],79:[2,87],81:[2,87],84:[2,87],86:[2,87],88:[2,87],89:[2,87],91:[2,87]},{5:[2,88],14:[2,88],16:[2,88],17:[2,88],19:[2,88],22:[2,88],23:[2,88],25:[2,88],27:[2,88],30:[2,88],36:[2,88],37:[2,88],38:[2,88],39:[2,88],40:[2,88],42:[2,88],43:[2,88],44:[2,88],46:[2,88],47:[2,88],48:[2,88],49:[2,88],50:[2,88],61:[2,88],62:[2,88],63:[2,88],64:[2,88],65:[2,88],66:[2,88],69:[2,88],75:[2,88],76:[2,88],77:[2,88],78:[2,88],79:[2,88],81:[2,88],84:[2,88],86:[2,88],88:[2,88],89:[2,88],91:[2,88]},{5:[2,90],14:[2,90],16:[2,90],17:[2,90],19:[2,90],22:[2,90],23:[2,90],25:[1,101],27:[2,90],30:[2,90],36:[2,90],37:[2,90],38:[2,90],39:[2,90],40:[2,90],42:[2,90],43:[2,90],44:[2,90],45:99,46:[1,94],47:[1,95],48:[1,96],49:[2,90],50:[2,90],61:[2,90],62:[2,90],63:[2,90],64:[2,90],65:[2,90],66:[1,100],69:[2,90],75:[2,90],76:[2,90],77:[2,90],78:[2,90],79:[2,90],81:[2,90],84:[2,90],86:[2,90],88:[2,90],89:[2,90],91:[2,90]},{5:[2,91],14:[2,91],16:[2,91],17:[2,91],19:[2,91],22:[2,91],23:[2,91],25:[2,91],27:[2,91],30:[2,91],36:[2,91],37:[2,91],38:[2,91],39:[2,91],40:[2,91],42:[2,91],43:[2,91],44:[2,91],46:[2,91],47:[2,91],48:[2,91],49:[2,91],50:[2,91],61:[2,91],62:[2,91],63:[2,91],64:[2,91],65:[2,91],66:[2,91],69:[2,91],75:[2,91],76:[2,91],77:[2,91],78:[2,91],79:[2,91],81:[2,91],84:[2,91],86:[2,91],88:[2,91],89:[2,91],91:[2,91]},{5:[2,112],14:[2,112],16:[2,112],17:[2,112],19:[2,112],22:[2,112],23:[2,112],25:[2,112],27:[2,112],30:[2,112],36:[2,112],37:[2,112],38:[2,112],39:[2,112],40:[2,112],42:[2,112],43:[2,112],44:[2,112],46:[2,112],47:[2,112],48:[2,112],49:[2,112],50:[2,112],61:[2,112],62:[2,112],63:[2,112],64:[2,112],65:[2,112],66:[2,112],69:[2,112],75:[2,112],76:[2,112],77:[2,112],78:[2,112],79:[2,112],81:[2,112],84:[2,112],86:[2,112],88:[2,112],89:[2,112],91:[2,112]},{4:103,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],26:102,28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,58],14:[2,58],16:[2,58],17:[2,58],19:[2,58],22:[2,58],23:[2,58],25:[2,58],27:[2,58],30:[2,58],36:[2,58],37:[2,58],38:[2,58],39:[2,58],40:[2,58],42:[2,58],43:[2,58],44:[2,58],46:[2,58],47:[2,58],48:[2,58],49:[2,58],50:[2,58],61:[2,58],62:[2,58],63:[2,58],64:[2,58],65:[2,58],66:[2,58],69:[2,58],75:[2,58],76:[2,58],77:[2,58],78:[2,58],79:[2,58],81:[2,58],84:[2,58],86:[2,58],88:[2,58],89:[2,58],91:[2,58]},{5:[2,59],14:[2,59],16:[2,59],17:[2,59],19:[2,59],22:[2,59],23:[2,59],25:[2,59],27:[2,59],30:[2,59],36:[2,59],37:[2,59],38:[2,59],39:[2,59],40:[2,59],42:[2,59],43:[2,59],44:[2,59],46:[2,59],47:[2,59],48:[2,59],49:[2,59],50:[2,59],61:[2,59],62:[2,59],63:[2,59],64:[2,59],65:[2,59],66:[2,59],69:[2,59],75:[2,59],76:[2,59],77:[2,59],78:[2,59],79:[2,59],81:[2,59],84:[2,59],86:[2,59],88:[2,59],89:[2,59],91:[2,59]},{5:[2,60],14:[2,60],16:[2,60],17:[2,60],19:[2,60],22:[2,60],23:[2,60],25:[2,60],27:[2,60],30:[2,60],36:[2,60],37:[2,60],38:[2,60],39:[2,60],40:[2,60],42:[2,60],43:[2,60],44:[2,60],46:[2,60],47:[2,60],48:[2,60],49:[2,60],50:[2,60],61:[2,60],62:[2,60],63:[2,60],64:[2,60],65:[2,60],66:[2,60],69:[2,60],75:[2,60],76:[2,60],77:[2,60],78:[2,60],79:[2,60],81:[2,60],84:[2,60],86:[2,60],88:[2,60],89:[2,60],91:[2,60]},{5:[2,61],14:[2,61],16:[2,61],17:[2,61],19:[2,61],22:[2,61],23:[2,61],25:[2,61],27:[2,61],30:[2,61],36:[2,61],37:[2,61],38:[2,61],39:[2,61],40:[2,61],42:[2,61],43:[2,61],44:[2,61],46:[2,61],47:[2,61],48:[2,61],49:[2,61],50:[2,61],61:[2,61],62:[2,61],63:[2,61],64:[2,61],65:[2,61],66:[2,61],69:[2,61],75:[2,61],76:[2,61],77:[2,61],78:[2,61],79:[2,61],81:[2,61],84:[2,61],86:[2,61],88:[2,61],89:[2,61],91:[2,61]},{5:[2,62],14:[2,62],16:[2,62],17:[2,62],19:[2,62],22:[2,62],23:[2,62],25:[2,62],27:[2,62],30:[2,62],36:[2,62],37:[2,62],38:[2,62],39:[2,62],40:[2,62],42:[2,62],43:[2,62],44:[2,62],46:[2,62],47:[2,62],48:[2,62],49:[2,62],50:[2,62],61:[2,62],62:[2,62],63:[2,62],64:[2,62],65:[2,62],66:[2,62],69:[2,62],75:[2,62],76:[2,62],77:[2,62],78:[2,62],79:[2,62],81:[2,62],84:[2,62],86:[2,62],88:[2,62],89:[2,62],91:[2,62]},{5:[2,63],14:[2,63],16:[2,63],17:[2,63],19:[2,63],22:[2,63],23:[2,63],25:[2,63],27:[2,63],30:[2,63],36:[2,63],37:[2,63],38:[2,63],39:[2,63],40:[2,63],42:[2,63],43:[2,63],44:[2,63],46:[2,63],47:[2,63],48:[2,63],49:[2,63],50:[2,63],61:[2,63],62:[2,63],63:[2,63],64:[2,63],65:[2,63],66:[2,63],69:[2,63],75:[2,63],76:[2,63],77:[2,63],78:[2,63],79:[2,63],81:[2,63],84:[2,63],86:[2,63],88:[2,63],89:[2,63],91:[2,63]},{5:[2,64],14:[2,64],16:[2,64],17:[2,64],19:[2,64],22:[2,64],23:[2,64],25:[2,64],27:[2,64],30:[2,64],36:[2,64],37:[2,64],38:[2,64],39:[2,64],40:[2,64],42:[2,64],43:[2,64],44:[2,64],46:[2,64],47:[2,64],48:[2,64],49:[2,64],50:[2,64],61:[2,64],62:[2,64],63:[2,64],64:[2,64],65:[2,64],66:[2,64],69:[2,64],75:[2,64],76:[2,64],77:[2,64],78:[2,64],79:[2,64],81:[2,64],84:[2,64],86:[2,64],88:[2,64],89:[2,64],91:[2,64]},{5:[2,65],14:[2,65],16:[2,65],17:[2,65],19:[2,65],22:[2,65],23:[2,65],25:[2,65],27:[2,65],30:[2,65],36:[2,65],37:[2,65],38:[2,65],39:[2,65],40:[2,65],42:[2,65],43:[2,65],44:[2,65],46:[2,65],47:[2,65],48:[2,65],49:[2,65],50:[2,65],61:[2,65],62:[2,65],63:[2,65],64:[2,65],65:[2,65],66:[2,65],69:[2,65],75:[2,65],76:[2,65],77:[2,65],78:[2,65],79:[2,65],81:[2,65],84:[2,65],86:[2,65],88:[2,65],89:[2,65],91:[2,65]},{4:104,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:105,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{49:[1,106]},{25:[1,108],49:[1,107]},{5:[2,77],14:[2,77],16:[2,77],17:[2,77],19:[2,77],22:[2,77],23:[2,77],25:[2,77],27:[2,77],30:[2,77],36:[2,77],37:[2,77],38:[2,77],39:[2,77],40:[2,77],42:[2,77],43:[2,77],44:[2,77],46:[2,77],47:[2,77],48:[2,77],49:[2,77],50:[2,77],61:[2,77],62:[2,77],63:[2,77],64:[2,77],65:[2,77],66:[2,77],69:[2,77],75:[2,77],76:[2,77],77:[2,77],78:[2,77],79:[2,77],81:[2,77],84:[2,77],86:[2,77],88:[2,77],89:[2,77],91:[2,77]},{5:[2,78],14:[2,78],16:[2,78],17:[2,78],19:[2,78],22:[2,78],23:[2,78],25:[2,78],27:[2,78],30:[2,78],36:[2,78],37:[2,78],38:[2,78],39:[2,78],40:[2,78],42:[2,78],43:[2,78],44:[2,78],46:[2,78],47:[2,78],48:[2,78],49:[2,78],50:[2,78],61:[2,78],62:[2,78],63:[2,78],64:[2,78],65:[2,78],66:[2,78],69:[2,78],75:[2,78],76:[2,78],77:[2,78],78:[2,78],79:[2,78],81:[2,78],84:[2,78],86:[2,78],88:[2,78],89:[2,78],91:[2,78]},{13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:109,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,80],14:[2,80],16:[2,80],17:[2,80],19:[2,80],22:[2,80],23:[2,80],25:[2,80],27:[2,80],30:[2,80],36:[2,80],37:[2,80],38:[2,80],39:[2,80],40:[2,80],42:[2,80],43:[2,80],44:[2,80],46:[2,80],47:[2,80],48:[2,80],49:[2,80],50:[2,80],61:[2,80],62:[2,80],63:[2,80],64:[2,80],65:[2,80],66:[2,80],69:[2,80],75:[2,80],76:[2,80],77:[2,80],78:[2,80],79:[2,80],81:[2,80],84:[2,80],86:[2,80],88:[2,80],89:[2,80],91:[2,80]},{5:[2,93],13:82,14:[2,93],16:[2,93],17:[2,93],19:[1,15],20:81,22:[1,17],23:[2,93],24:21,25:[1,27],27:[2,93],28:22,30:[2,93],31:34,32:24,33:23,34:110,36:[2,93],37:[2,93],38:[2,93],39:[2,93],40:[1,44],42:[1,20],43:[1,45],44:[1,46],46:[2,93],47:[2,93],48:[2,93],49:[1,36],50:[2,93],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,93],64:[1,38],65:[1,39],66:[2,93],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,93],79:[1,52],81:[2,93],84:[2,93],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,94],13:82,14:[2,94],16:[2,94],
17:[2,94],19:[1,15],20:81,22:[1,17],23:[2,94],24:21,25:[1,27],27:[2,94],28:22,30:[2,94],31:34,32:24,33:23,34:111,36:[2,94],37:[2,94],38:[2,94],39:[2,94],40:[1,44],42:[1,20],43:[1,45],44:[1,46],46:[2,94],47:[2,94],48:[2,94],49:[1,36],50:[2,94],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,94],64:[1,38],65:[1,39],66:[2,94],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,94],79:[1,52],81:[2,94],84:[2,94],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,96],13:82,14:[2,96],16:[2,96],17:[2,96],19:[1,15],20:81,22:[1,17],23:[2,96],24:21,25:[1,27],27:[2,96],28:22,30:[2,96],31:34,32:24,33:23,34:112,36:[2,96],37:[2,96],38:[2,96],39:[2,96],40:[1,44],42:[1,20],43:[1,45],44:[1,46],46:[2,96],47:[2,96],48:[2,96],49:[1,36],50:[2,96],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,96],64:[1,38],65:[1,39],66:[2,96],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,96],79:[1,52],81:[2,96],84:[2,96],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{13:82,19:[1,15],20:81,22:[1,114],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:115,42:[1,20],43:[1,45],44:[1,46],46:[1,117],48:[1,116],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54],93:113,94:[1,78]},{13:82,19:[1,15],20:81,22:[1,119],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:120,42:[1,20],43:[1,45],44:[1,46],46:[1,121],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54],93:118,94:[1,78]},{13:82,19:[1,15],20:81,22:[1,123],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:124,42:[1,20],43:[1,45],44:[1,46],46:[1,125],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54],93:122,94:[1,78]},{54:[1,126]},{4:128,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],51:127,52:[1,129],53:[1,130],54:[1,131],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:137,12:136,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],80:132,81:[1,133],82:134,83:135,85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{19:[2,116],22:[2,116],25:[2,116],40:[2,116],42:[2,116],43:[2,116],44:[2,116],46:[2,116],48:[2,116],49:[2,116],61:[2,116],62:[2,116],64:[2,116],65:[2,116],69:[2,116],72:[2,116],75:[2,116],76:[2,116],77:[2,116],79:[2,116],86:[2,116],88:[2,116],89:[2,116],91:[2,116],94:[2,116]},{19:[2,129],22:[2,129],25:[2,129],40:[2,129],42:[2,129],43:[2,129],44:[2,129],46:[2,129],49:[2,129],61:[2,129],62:[2,129],64:[2,129],65:[2,129],69:[2,129],72:[2,129],75:[2,129],76:[2,129],77:[2,129],79:[2,129],86:[2,129],88:[2,129],89:[2,129],91:[2,129],94:[2,129]},{19:[2,130],22:[2,130],25:[2,130],40:[2,130],42:[2,130],43:[2,130],44:[2,130],46:[2,130],49:[2,130],51:138,52:[1,129],53:[1,130],54:[1,131],61:[2,130],62:[2,130],64:[2,130],65:[2,130],69:[2,130],72:[2,130],75:[2,130],76:[2,130],77:[2,130],79:[2,130],86:[2,130],88:[2,130],89:[2,130],91:[2,130],94:[2,130]},{19:[2,124],22:[2,124],25:[2,124],40:[2,124],42:[2,124],43:[2,124],44:[2,124],46:[2,124],49:[2,124],61:[2,124],62:[2,124],64:[2,124],65:[2,124],69:[2,124],72:[2,124],75:[2,124],76:[2,124],77:[2,124],79:[2,124],86:[2,124],88:[2,124],89:[2,124],91:[2,124],94:[2,124]},{54:[2,98]},{54:[2,99]},{1:[2,1]},{4:139,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:140,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:141,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:143,13:142,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{19:[2,33],22:[2,33],25:[2,33],40:[2,33],42:[2,33],43:[2,33],44:[2,33],49:[2,33],61:[2,33],62:[2,33],64:[2,33],65:[2,33],69:[2,33],72:[2,33],75:[2,33],76:[2,33],77:[2,33],79:[2,33],86:[2,33],88:[2,33],89:[2,33],91:[2,33]},{19:[2,34],22:[2,34],25:[2,34],40:[2,34],42:[2,34],43:[2,34],44:[2,34],49:[2,34],61:[2,34],62:[2,34],64:[2,34],65:[2,34],69:[2,34],72:[2,34],75:[2,34],76:[2,34],77:[2,34],79:[2,34],86:[2,34],88:[2,34],89:[2,34],91:[2,34]},{19:[2,35],22:[2,35],25:[2,35],40:[2,35],42:[2,35],43:[2,35],44:[2,35],49:[2,35],61:[2,35],62:[2,35],64:[2,35],65:[2,35],69:[2,35],72:[2,35],75:[2,35],76:[2,35],77:[2,35],79:[2,35],86:[2,35],88:[2,35],89:[2,35],91:[2,35]},{19:[2,36],22:[2,36],25:[2,36],40:[2,36],42:[2,36],43:[2,36],44:[2,36],49:[2,36],61:[2,36],62:[2,36],64:[2,36],65:[2,36],69:[2,36],72:[2,36],75:[2,36],76:[2,36],77:[2,36],79:[2,36],86:[2,36],88:[2,36],89:[2,36],91:[2,36]},{1:[2,2]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{1:[2,8]},{4:145,5:[1,144],13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:147,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54],92:146},{22:[1,148],94:[1,149]},{22:[2,142],94:[2,142]},{1:[2,10]},{5:[2,145]},{5:[2,89],14:[2,89],16:[2,89],17:[2,89],19:[2,89],22:[2,89],23:[2,89],25:[2,89],27:[2,89],30:[2,89],36:[2,89],37:[2,89],38:[2,89],39:[2,89],40:[2,89],42:[2,89],43:[2,89],44:[2,89],46:[2,89],47:[2,89],48:[2,89],49:[2,89],50:[2,89],61:[2,89],62:[2,89],63:[2,89],64:[2,89],65:[2,89],66:[2,89],69:[2,89],75:[2,89],76:[2,89],77:[2,89],78:[2,89],79:[2,89],81:[2,89],84:[2,89],86:[2,89],88:[2,89],89:[2,89],91:[2,89]},{5:[2,57],14:[2,57],16:[2,57],17:[2,57],19:[2,57],22:[1,76],23:[2,57],25:[2,57],27:[2,57],30:[2,57],36:[2,57],37:[2,57],38:[2,57],39:[2,57],40:[2,57],42:[2,57],43:[2,57],44:[2,57],46:[2,57],47:[2,57],48:[2,57],49:[2,57],50:[2,57],61:[2,57],62:[2,57],63:[2,57],64:[2,57],65:[2,57],66:[2,57],69:[2,57],75:[2,57],76:[2,57],77:[2,57],78:[2,57],79:[2,57],81:[2,57],84:[2,57],86:[2,57],88:[2,57],89:[2,57],91:[2,57],93:77,94:[1,78]},{5:[2,42],13:82,14:[2,42],16:[2,42],17:[2,42],19:[1,15],20:81,22:[1,17],23:[2,42],24:21,25:[1,27],27:[2,42],28:22,30:[2,42],31:34,32:24,33:23,34:18,36:[2,42],37:[2,42],38:[2,42],39:[2,42],40:[1,44],41:150,42:[1,20],43:[1,45],44:[1,46],46:[2,42],47:[2,42],48:[2,42],49:[1,36],50:[2,42],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,42],64:[1,38],65:[1,39],66:[2,42],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,42],79:[1,52],81:[2,42],84:[2,42],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,43],13:82,14:[2,43],16:[2,43],17:[2,43],19:[1,15],20:81,22:[1,17],23:[2,43],24:21,25:[1,27],27:[2,43],28:22,30:[2,43],31:34,32:24,33:23,34:18,36:[2,43],37:[2,43],38:[2,43],39:[2,43],40:[1,44],41:151,42:[1,20],43:[1,45],44:[1,46],46:[2,43],47:[2,43],48:[2,43],49:[1,36],50:[2,43],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,43],64:[1,38],65:[1,39],66:[2,43],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,43],79:[1,52],81:[2,43],84:[2,43],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{20:153,21:152,22:[1,154]},{5:[2,45],14:[2,45],16:[2,45],17:[2,45],19:[2,45],22:[2,45],23:[2,45],25:[1,101],27:[2,45],30:[2,45],36:[2,45],37:[2,45],38:[2,45],39:[2,45],40:[2,45],42:[2,45],43:[2,45],44:[2,45],45:99,46:[1,94],47:[1,95],48:[1,96],49:[2,45],50:[2,45],61:[2,45],62:[2,45],63:[2,45],64:[2,45],65:[2,45],66:[1,100],69:[2,45],75:[2,45],76:[2,45],77:[2,45],78:[2,45],79:[2,45],81:[2,45],84:[2,45],86:[2,45],88:[2,45],89:[2,45],91:[2,45]},{5:[2,48],13:82,14:[2,48],16:[2,48],17:[2,48],19:[1,15],20:81,22:[1,17],23:[2,48],24:21,25:[1,27],27:[2,48],28:22,30:[2,48],31:34,32:24,33:23,34:155,36:[2,48],37:[2,48],38:[2,48],39:[2,48],40:[1,44],42:[1,20],43:[1,45],44:[1,46],46:[2,48],47:[2,48],48:[2,48],49:[1,36],50:[2,48],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,48],64:[1,38],65:[1,39],66:[2,48],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,48],79:[1,52],81:[2,48],84:[2,48],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,49],13:82,14:[2,49],16:[2,49],17:[2,49],19:[1,15],20:81,22:[1,17],23:[2,49],24:21,25:[1,27],27:[2,49],28:22,30:[2,49],31:34,32:24,33:23,34:156,36:[2,49],37:[2,49],38:[2,49],39:[2,49],40:[1,44],42:[1,20],43:[1,45],44:[1,46],46:[2,49],47:[2,49],48:[2,49],49:[1,36],50:[2,49],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,49],64:[1,38],65:[1,39],66:[2,49],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,49],79:[1,52],81:[2,49],84:[2,49],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:157,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{16:[1,158],23:[1,159]},{5:[2,83],14:[2,83],16:[2,83],17:[2,83],19:[2,83],22:[2,83],23:[2,83],25:[2,83],27:[2,83],30:[2,83],36:[2,83],37:[2,83],38:[2,83],39:[2,83],40:[2,83],42:[2,83],43:[2,83],44:[2,83],46:[2,83],47:[2,83],48:[2,83],49:[2,83],50:[2,83],61:[2,83],62:[2,83],63:[2,83],64:[2,83],65:[2,83],66:[2,83],69:[2,83],75:[2,83],76:[2,83],77:[2,83],78:[2,83],79:[2,83],81:[2,83],84:[2,83],86:[2,83],88:[2,83],89:[2,83],91:[2,83]},{5:[2,84],14:[2,84],16:[2,84],17:[2,84],19:[2,84],22:[2,84],23:[2,84],25:[2,84],27:[2,84],30:[2,84],36:[2,84],37:[2,84],38:[2,84],39:[2,84],40:[2,84],42:[2,84],43:[2,84],44:[2,84],46:[2,84],47:[2,84],48:[2,84],49:[2,84],50:[2,84],61:[2,84],62:[2,84],63:[2,84],64:[2,84],65:[2,84],66:[2,84],69:[2,84],75:[2,84],76:[2,84],77:[2,84],78:[2,84],79:[2,84],81:[2,84],84:[2,84],86:[2,84],88:[2,84],89:[2,84],91:[2,84]},{4:160,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,51],14:[2,51],16:[2,51],17:[2,51],19:[2,51],22:[2,51],23:[2,51],25:[2,51],27:[2,51],30:[2,51],36:[2,51],37:[2,51],38:[2,51],39:[2,51],40:[2,51],42:[2,51],43:[2,51],44:[2,51],46:[2,51],47:[2,51],48:[2,51],49:[2,51],50:[2,51],61:[2,51],62:[2,51],63:[2,51],64:[2,51],65:[2,51],66:[2,51],69:[2,51],72:[2,51],75:[2,51],76:[2,51],77:[2,51],78:[2,51],79:[2,51],81:[2,51],84:[2,51],86:[2,51],88:[2,51],89:[2,51],91:[2,51]},{5:[2,52],14:[2,52],16:[2,52],17:[2,52],19:[2,52],22:[2,52],23:[2,52],25:[2,52],27:[2,52],30:[2,52],36:[2,52],37:[2,52],38:[2,52],39:[2,52],40:[2,52],42:[2,52],43:[2,52],44:[2,52],46:[2,52],47:[2,52],48:[2,52],49:[2,52],50:[2,52],61:[2,52],62:[2,52],63:[2,52],64:[2,52],65:[2,52],66:[2,52],69:[2,52],72:[2,52],75:[2,52],76:[2,52],77:[2,52],78:[2,52],79:[2,52],81:[2,52],84:[2,52],86:[2,52],88:[2,52],89:[2,52],91:[2,52]},{49:[1,161]},{5:[2,113],14:[2,113],16:[2,113],17:[2,113],19:[2,113],22:[2,113],23:[2,113],25:[2,113],27:[2,113],30:[2,113],36:[2,113],37:[2,113],38:[2,113],39:[2,113],40:[2,113],42:[2,113],43:[2,113],44:[2,113],45:162,46:[1,94],47:[1,95],48:[1,96],49:[2,113],50:[2,113],61:[2,113],62:[2,113],63:[2,113],64:[2,113],65:[2,113],66:[2,113],69:[2,113],75:[2,113],76:[2,113],77:[2,113],78:[2,113],79:[2,113],81:[2,113],84:[2,113],86:[2,113],88:[2,113],89:[2,113],91:[2,113]},{5:[2,85],14:[2,85],16:[2,85],17:[2,85],19:[2,85],22:[2,85],23:[2,85],25:[1,93],27:[2,85],30:[2,85],36:[2,85],37:[2,85],38:[2,85],39:[2,85],40:[2,85],42:[2,85],43:[2,85],44:[2,85],45:91,46:[1,94],47:[1,95],48:[1,96],49:[2,85],50:[2,85],61:[2,85],62:[2,85],63:[2,85],64:[2,85],65:[2,85],66:[1,92],69:[2,85],75:[2,85],76:[2,85],77:[2,85],78:[2,85],79:[2,85],81:[2,85],84:[2,85],86:[2,85],88:[2,85],89:[2,85],91:[2,85]},{5:[2,69],14:[2,69],16:[2,69],17:[2,69],19:[2,69],22:[2,69],23:[2,69],25:[2,69],27:[2,69],30:[2,69],36:[2,69],37:[2,69],38:[2,69],39:[2,69],40:[2,69],42:[2,69],43:[2,69],44:[2,69],46:[2,69],47:[2,69],48:[2,69],49:[2,69],50:[2,69],61:[2,69],62:[2,69],63:[2,69],64:[2,69],65:[2,69],66:[2,69],69:[2,69],75:[2,69],76:[2,69],77:[2,69],78:[2,69],79:[2,69],81:[2,69],84:[2,69],86:[2,69],88:[2,69],89:[2,69],91:[2,69]},{5:[2,76],14:[2,76],16:[2,76],17:[2,76],19:[2,76],22:[2,76],23:[2,76],25:[2,76],27:[2,76],30:[2,76],36:[2,76],37:[2,76],38:[2,76],39:[2,76],40:[2,76],42:[2,76],43:[2,76],44:[2,76],46:[2,76],47:[2,76],48:[2,76],49:[2,76],50:[2,76],61:[2,76],62:[2,76],63:[2,76],64:[2,76],65:[2,76],66:[2,76],69:[2,76],75:[2,76],76:[2,76],77:[2,76],78:[2,76],79:[2,76],81:[2,76],84:[2,76],86:[2,76],88:[2,76],89:[2,76],91:[2,76]},{4:163,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{16:[1,166],27:[1,164],29:165,30:[1,167]},{16:[2,28],27:[2,28],30:[2,28]},{50:[1,168]},{63:[1,169]},{4:171,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],50:[1,170],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:172,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:173,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,79],13:82,14:[2,79],16:[2,79],17:[2,79],19:[1,15],22:[1,89],23:[2,79],25:[2,79],27:[2,79],30:[2,79],31:34,32:86,36:[2,79],37:[2,79],38:[2,79],39:[2,79],40:[2,79],42:[2,79],43:[1,87],44:[1,88],46:[2,79],47:[2,79],48:[2,79],49:[1,36],50:[2,79],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,79],64:[1,38],65:[1,39],66:[2,79],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,79],79:[1,52],81:[2,79],84:[2,79],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,92],14:[2,92],16:[2,92],17:[2,92],19:[2,92],22:[2,92],23:[2,92],25:[1,93],27:[2,92],30:[2,92],36:[2,92],37:[2,92],38:[2,92],39:[2,92],40:[2,92],42:[2,92],43:[2,92],44:[2,92],45:91,46:[1,94],47:[1,95],48:[1,96],49:[2,92],50:[2,92],61:[2,92],62:[2,92],63:[2,92],64:[2,92],65:[2,92],66:[1,92],69:[2,92],75:[2,92],76:[2,92],77:[2,92],78:[2,92],79:[2,92],81:[2,92],84:[2,92],86:[2,92],88:[2,92],89:[2,92],91:[2,92]},{5:[2,95],14:[2,95],16:[2,95],17:[2,95],19:[2,95],22:[2,95],23:[2,95],25:[1,93],27:[2,95],30:[2,95],36:[2,95],37:[2,95],38:[2,95],39:[2,95],40:[2,95],42:[2,95],43:[2,95],44:[2,95],45:91,46:[1,94],47:[1,95],48:[1,96],49:[2,95],50:[2,95],61:[2,95],62:[2,95],63:[2,95],64:[2,95],65:[2,95],66:[1,92],69:[2,95],75:[2,95],76:[2,95],77:[2,95],78:[2,95],79:[2,95],81:[2,95],84:[2,95],86:[2,95],88:[2,95],89:[2,95],91:[2,95]},{5:[2,97],14:[2,97],16:[2,97],17:[2,97],19:[2,97],22:[2,97],23:[2,97],25:[1,93],27:[2,97],30:[2,97],36:[2,97],37:[2,97],38:[2,97],39:[2,97],40:[2,97],42:[2,97],43:[2,97],44:[2,97],45:91,46:[1,94],47:[1,95],48:[1,96],49:[2,97],50:[2,97],61:[2,97],62:[2,97],63:[2,97],64:[2,97],65:[2,97],66:[1,92],69:[2,97],75:[2,97],76:[2,97],77:[2,97],78:[2,97],79:[2,97],81:[2,97],84:[2,97],86:[2,97],88:[2,97],89:[2,97],91:[2,97]},{22:[1,174],94:[1,149]},{4:175,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,118],13:82,14:[2,118],16:[2,118],17:[2,118],19:[1,15],22:[1,89],23:[2,118],25:[2,118],27:[2,118],30:[2,118],31:34,32:86,36:[2,118],37:[2,118],38:[2,118],39:[2,118],40:[2,118],42:[2,118],43:[1,87],44:[1,88],46:[2,118],47:[2,118],48:[2,118],49:[1,36],50:[2,118],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,118],64:[1,38],65:[1,39],66:[2,118],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,118],79:[1,52],81:[2,118],84:[2,118],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{49:[1,176]},{13:82,19:[1,15],20:81,22:[1,178],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:177,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{22:[1,179],94:[1,149]},{4:180,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,132],13:82,14:[2,132],16:[2,132],17:[2,132],19:[1,15],22:[1,89],23:[2,132],25:[2,132],27:[2,132],30:[2,132],31:34,32:86,36:[2,132],37:[2,132],38:[2,132],39:[2,132],40:[2,132],42:[2,132],43:[1,87],44:[1,88],46:[2,132],47:[2,132],48:[2,132],49:[1,36],50:[2,132],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,132],64:[1,38],65:[1,39],66:[2,132],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,132],79:[1,52],81:[2,132],84:[2,132],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{13:82,19:[1,15],20:81,22:[1,181],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:182,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{22:[1,183],94:[1,149]},{4:184,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,126],13:82,14:[2,126],16:[2,126],17:[2,126],19:[1,15],22:[1,89],23:[2,126],25:[2,126],27:[2,126],30:[2,126],31:34,32:86,36:[2,126],37:[2,126],38:[2,126],39:[2,126],40:[2,126],42:[2,126],43:[1,87],44:[1,88],46:[2,126],47:[2,126],48:[2,126],49:[1,36],50:[2,126],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,126],64:[1,38],65:[1,39],66:[2,126],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,126],79:[1,52],81:[2,126],84:[2,126],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{13:82,19:[1,15],20:81,22:[1,185],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:186,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{49:[1,187]},{45:188,46:[1,94],47:[1,95],48:[1,96]},{5:[2,103],14:[2,103],16:[2,103],17:[2,103],19:[2,103],22:[2,103],23:[2,103],25:[2,103],27:[2,103],30:[2,103],36:[2,103],37:[2,103],38:[2,103],39:[2,103],40:[2,103],42:[2,103],43:[2,103],44:[2,103],46:[2,103],47:[2,103],48:[2,103],49:[2,103],50:[2,103],61:[2,103],62:[2,103],63:[2,103],64:[2,103],65:[2,103],66:[2,103],69:[2,103],75:[2,103],76:[2,103],77:[2,103],78:[2,103],79:[2,103],81:[2,103],84:[2,103],86:[2,103],88:[2,103],89:[2,103],91:[2,103]},{19:[2,54],22:[2,54],25:[2,54],40:[2,54],42:[2,54],43:[2,54],44:[2,54],46:[2,54],47:[2,54],48:[2,54],49:[2,54],61:[2,54],62:[2,54],64:[2,54],65:[2,54],69:[2,54],72:[2,54],75:[2,54],76:[2,54],77:[2,54],79:[2,54],86:[2,54],88:[2,54],89:[2,54],91:[2,54],94:[2,54]},{19:[2,55],22:[2,55],25:[2,55],40:[2,55],42:[2,55],43:[2,55],44:[2,55],46:[2,55],47:[2,55],48:[2,55],49:[2,55],61:[2,55],62:[2,55],64:[2,55],65:[2,55],69:[2,55],72:[2,55],75:[2,55],76:[2,55],77:[2,55],79:[2,55],86:[2,55],88:[2,55],89:[2,55],91:[2,55],94:[2,55]},{49:[1,189]},{81:[1,190]},{5:[2,105],14:[2,105],16:[2,105],17:[2,105],19:[2,105],22:[2,105],23:[2,105],25:[2,105],27:[2,105],30:[2,105],36:[2,105],37:[2,105],38:[2,105],39:[2,105],40:[2,105],42:[2,105],43:[2,105],44:[2,105],46:[2,105],47:[2,105],48:[2,105],49:[2,105],50:[2,105],61:[2,105],62:[2,105],63:[2,105],64:[2,105],65:[2,105],66:[2,105],69:[2,105],75:[2,105],76:[2,105],77:[2,105],78:[2,105],79:[2,105],81:[2,105],84:[2,105],86:[2,105],88:[2,105],89:[2,105],91:[2,105]},{16:[1,191],81:[2,107]},{16:[2,109],81:[2,109]},{16:[2,111],81:[2,111],84:[1,192]},{14:[1,194],18:193,36:[1,64],37:[1,65],38:[1,66],39:[1,67]},{19:[2,123],22:[2,123],25:[2,123],40:[2,123],42:[2,123],43:[2,123],44:[2,123],46:[2,123],49:[2,123],61:[2,123],62:[2,123],64:[2,123],65:[2,123],69:[2,123],72:[2,123],75:[2,123],76:[2,123],77:[2,123],79:[2,123],86:[2,123],88:[2,123],89:[2,123],91:[2,123],94:[2,123]},{5:[1,195]},{5:[2,15]},{5:[2,14]},{5:[2,57],18:196,19:[2,57],22:[1,76],25:[2,57],36:[1,64],37:[1,65],38:[1,66],39:[1,67],40:[2,57],42:[2,57],43:[2,57],44:[2,57],46:[2,57],47:[2,57],48:[2,57],49:[2,57],61:[2,57],62:[2,57],64:[2,57],65:[2,57],66:[2,57],69:[2,57],75:[2,57],76:[2,57],77:[2,57],79:[2,57],86:[2,57],88:[2,57],89:[2,57],91:[2,57],93:77,94:[1,78]},{5:[2,37],16:[2,37],18:197,36:[1,64],37:[1,65],38:[1,66],39:[1,67],81:[2,37],84:[2,37]},{1:[2,9]},{5:[2,13]},{16:[1,199],23:[1,198]},{16:[1,201],23:[1,200]},{4:202,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54],92:203},{22:[2,141],94:[2,141]},{5:[2,40],13:82,14:[2,40],16:[2,40],17:[2,40],19:[1,15],22:[1,89],23:[2,40],25:[2,40],27:[2,40],30:[2,40],31:34,32:86,36:[2,40],37:[2,40],38:[2,40],39:[2,40],40:[2,40],42:[2,40],43:[1,87],44:[1,88],46:[2,40],47:[2,40],48:[2,40],49:[1,36],50:[2,40],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,40],64:[1,38],65:[1,39],66:[2,40],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,40],79:[1,52],81:[2,40],84:[2,40],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,41],13:82,14:[2,41],16:[2,41],17:[2,41],19:[1,15],22:[1,89],23:[2,41],25:[2,41],27:[2,41],30:[2,41],31:34,32:86,36:[2,41],37:[2,41],38:[2,41],39:[2,41],40:[2,41],42:[2,41],43:[1,87],44:[1,88],46:[2,41],47:[2,41],48:[2,41],49:[1,36],50:[2,41],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,41],64:[1,38],65:[1,39],66:[2,41],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,41],79:[1,52],81:[2,41],84:[2,41],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,18],16:[1,204]},{5:[2,19],16:[2,19]},{4:205,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,46],14:[2,46],16:[2,46],17:[2,46],19:[2,46],22:[2,46],23:[2,46],25:[1,93],27:[2,46],30:[2,46],36:[2,46],37:[2,46],38:[2,46],39:[2,46],40:[2,46],42:[2,46],43:[2,46],44:[2,46],45:91,46:[1,94],47:[1,95],48:[1,96],49:[2,46],50:[2,46],61:[2,46],62:[2,46],63:[2,46],64:[2,46],65:[2,46],66:[1,92],69:[2,46],75:[2,46],76:[2,46],77:[2,46],78:[2,46],79:[2,46],81:[2,46],84:[2,46],86:[2,46],88:[2,46],89:[2,46],91:[2,46]},{5:[2,47],14:[2,47],16:[2,47],17:[2,47],19:[2,47],22:[2,47],23:[2,47],25:[1,93],27:[2,47],30:[2,47],36:[2,47],37:[2,47],38:[2,47],39:[2,47],40:[2,47],42:[2,47],43:[2,47],44:[2,47],45:91,46:[1,94],47:[1,95],48:[1,96],49:[2,47],50:[2,47],61:[2,47],62:[2,47],63:[2,47],64:[2,47],65:[2,47],66:[1,92],69:[2,47],75:[2,47],76:[2,47],77:[2,47],78:[2,47],79:[2,47],81:[2,47],84:[2,47],86:[2,47],88:[2,47],89:[2,47],91:[2,47]},{23:[1,159]},{4:206,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,66],14:[2,66],16:[2,66],17:[2,66],19:[2,66],22:[2,66],23:[2,66],25:[2,66],27:[2,66],30:[2,66],36:[2,66],37:[2,66],38:[2,66],39:[2,66],40:[2,66],42:[2,66],43:[2,66],44:[2,66],46:[2,66],47:[2,66],48:[2,66],49:[2,66],50:[2,66],61:[2,66],62:[2,66],63:[2,66],64:[2,66],65:[2,66],66:[2,66],69:[2,66],75:[2,66],76:[2,66],77:[2,66],78:[2,66],79:[2,66],81:[2,66],84:[2,66],86:[2,66],88:[2,66],89:[2,66],91:[2,66]},{27:[1,207]},{4:208,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,82],14:[2,82],16:[2,82],17:[2,82],19:[2,82],22:[2,82],23:[2,82],25:[2,82],27:[2,82],30:[2,82],36:[2,82],37:[2,82],38:[2,82],39:[2,82],40:[2,82],42:[2,82],43:[2,82],44:[2,82],46:[2,82],47:[2,82],48:[2,82],49:[2,82],50:[2,82],61:[2,82],62:[2,82],63:[2,82],64:[2,82],65:[2,82],66:[2,82],69:[2,82],75:[2,82],76:[2,82],77:[2,82],78:[2,82],79:[2,82],81:[2,82],84:[2,82],86:[2,82],88:[2,82],89:[2,82],91:[2,82]},{27:[1,209]},{5:[2,22],14:[2,22],16:[2,22],17:[2,22],19:[2,22],22:[2,22],23:[2,22],25:[2,22],27:[2,22],30:[2,22],36:[2,22],37:[2,22],38:[2,22],39:[2,22],40:[2,22],42:[2,22],43:[2,22],44:[2,22],46:[2,22],47:[2,22],48:[2,22],49:[2,22],50:[2,22],61:[2,22],62:[2,22],63:[2,22],64:[2,22],65:[2,22],66:[2,22],69:[2,22],75:[2,22],76:[2,22],77:[2,22],78:[2,22],79:[2,22],81:[2,22],84:[2,22],86:[2,22],88:[2,22],89:[2,22],91:[2,22]},{4:103,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],26:210,28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:211,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,30:[1,212],31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{16:[1,213],19:[2,24],22:[2,24],25:[2,24],40:[2,24],42:[2,24],43:[2,24],44:[2,24],49:[2,24],61:[2,24],62:[2,24],64:[2,24],65:[2,24],69:[2,24],72:[2,24],75:[2,24],76:[2,24],77:[2,24],79:[2,24],86:[2,24],88:[2,24],89:[2,24],91:[2,24]},{5:[2,67],14:[2,67],16:[2,67],17:[2,67],19:[2,67],22:[2,67],23:[2,67],25:[2,67],27:[2,67],30:[2,67],36:[2,67],37:[2,67],38:[2,67],39:[2,67],40:[2,67],42:[2,67],43:[2,67],44:[2,67],46:[2,67],47:[2,67],48:[2,67],49:[2,67],50:[2,67],61:[2,67],62:[2,67],63:[2,67],64:[2,67],65:[2,67],66:[2,67],69:[2,67],75:[2,67],76:[2,67],77:[2,67],78:[2,67],79:[2,67],81:[2,67],84:[2,67],86:[2,67],88:[2,67],89:[2,67],91:[2,67]},{5:[2,68],14:[2,68],16:[2,68],17:[2,68],19:[2,68],22:[2,68],23:[2,68],25:[2,68],27:[2,68],30:[2,68],36:[2,68],37:[2,68],38:[2,68],39:[2,68],40:[2,68],42:[2,68],43:[2,68],44:[2,68],46:[2,68],47:[2,68],48:[2,68],49:[2,68],50:[2,68],61:[2,68],62:[2,68],63:[2,68],64:[2,68],65:[2,68],66:[2,68],69:[2,68],75:[2,68],76:[2,68],77:[2,68],78:[2,68],79:[2,68],81:[2,68],84:[2,68],86:[2,68],88:[2,68],89:[2,68],91:[2,68]},{49:[1,214]},{50:[1,215]},{50:[1,216]},{27:[1,217]},{4:218,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{16:[1,158],23:[1,219]},{42:[1,220]
},{5:[2,121],13:82,14:[2,121],16:[2,121],17:[2,121],19:[1,15],22:[1,89],23:[2,121],25:[2,121],27:[2,121],30:[2,121],31:34,32:86,36:[2,121],37:[2,121],38:[2,121],39:[2,121],40:[2,121],42:[2,121],43:[1,87],44:[1,88],46:[2,121],47:[2,121],48:[2,121],49:[1,36],50:[2,121],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,121],64:[1,38],65:[1,39],66:[2,121],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,121],79:[1,52],81:[2,121],84:[2,121],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:221,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:222,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{16:[1,158],23:[1,223]},{4:224,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,134],13:82,14:[2,134],16:[2,134],17:[2,134],19:[1,15],22:[1,89],23:[2,134],25:[2,134],27:[2,134],30:[2,134],31:34,32:86,36:[2,134],37:[2,134],38:[2,134],39:[2,134],40:[2,134],42:[2,134],43:[1,87],44:[1,88],46:[2,134],47:[2,134],48:[2,134],49:[1,36],50:[2,134],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,134],64:[1,38],65:[1,39],66:[2,134],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,134],79:[1,52],81:[2,134],84:[2,134],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:225,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{16:[1,158],23:[1,226]},{4:227,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,128],13:82,14:[2,128],16:[2,128],17:[2,128],19:[1,15],22:[1,89],23:[2,128],25:[2,128],27:[2,128],30:[2,128],31:34,32:86,36:[2,128],37:[2,128],38:[2,128],39:[2,128],40:[2,128],42:[2,128],43:[1,87],44:[1,88],46:[2,128],47:[2,128],48:[2,128],49:[1,36],50:[2,128],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,128],64:[1,38],65:[1,39],66:[2,128],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,128],79:[1,52],81:[2,128],84:[2,128],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{13:228,19:[1,15]},{13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:229,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],78:[1,230],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:231,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,104],14:[2,104],16:[2,104],17:[2,104],19:[2,104],22:[2,104],23:[2,104],25:[2,104],27:[2,104],30:[2,104],36:[2,104],37:[2,104],38:[2,104],39:[2,104],40:[2,104],42:[2,104],43:[2,104],44:[2,104],46:[2,104],47:[2,104],48:[2,104],49:[2,104],50:[2,104],61:[2,104],62:[2,104],63:[2,104],64:[2,104],65:[2,104],66:[2,104],69:[2,104],75:[2,104],76:[2,104],77:[2,104],78:[2,104],79:[2,104],81:[2,104],84:[2,104],86:[2,104],88:[2,104],89:[2,104],91:[2,104]},{4:232,12:136,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],83:233,85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:234,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:143,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:235,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{1:[2,11]},{4:236,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:237,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,135],14:[2,135],16:[2,135],17:[2,135],19:[2,135],22:[2,135],23:[2,135],25:[2,135],27:[2,135],30:[2,135],36:[2,135],37:[2,135],38:[2,135],39:[2,135],40:[2,135],42:[2,135],43:[2,135],44:[2,135],46:[2,135],47:[2,135],48:[2,135],49:[2,135],50:[2,135],61:[2,135],62:[2,135],63:[2,135],64:[2,135],65:[2,135],66:[2,135],69:[2,135],75:[2,135],76:[2,135],77:[2,135],78:[2,135],79:[2,135],81:[2,135],84:[2,135],86:[2,135],88:[2,135],89:[2,135],91:[2,135]},{4:238,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,115],14:[2,115],16:[2,115],17:[2,115],19:[2,115],22:[2,115],23:[2,115],25:[2,115],27:[2,115],30:[2,115],36:[2,115],37:[2,115],38:[2,115],39:[2,115],40:[2,115],42:[2,115],43:[2,115],44:[2,115],45:239,46:[1,94],47:[1,95],48:[1,96],49:[2,115],50:[2,115],61:[2,115],62:[2,115],63:[2,115],64:[2,115],65:[2,115],66:[2,115],69:[2,115],75:[2,115],76:[2,115],77:[2,115],78:[2,115],79:[2,115],81:[2,115],84:[2,115],86:[2,115],88:[2,115],89:[2,115],91:[2,115]},{4:240,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{16:[1,201],23:[1,241]},{16:[1,199],23:[1,242]},{20:243,22:[1,154]},{16:[1,158]},{23:[1,244]},{5:[2,31],14:[2,31],16:[2,31],17:[2,31],19:[2,31],22:[2,31],23:[2,31],25:[2,31],27:[2,31],30:[2,31],36:[2,31],37:[2,31],38:[2,31],39:[2,31],40:[2,31],42:[2,31],43:[2,31],44:[2,31],46:[2,31],47:[2,31],48:[2,31],49:[2,31],50:[2,31],61:[2,31],62:[2,31],63:[2,31],64:[2,31],65:[2,31],66:[2,31],69:[2,31],75:[2,31],76:[2,31],77:[2,31],78:[2,31],79:[2,31],81:[2,31],84:[2,31],86:[2,31],88:[2,31],89:[2,31],91:[2,31]},{50:[1,245]},{5:[2,30],14:[2,30],16:[2,30],17:[2,30],19:[2,30],22:[2,30],23:[2,30],25:[2,30],27:[2,30],30:[2,30],36:[2,30],37:[2,30],38:[2,30],39:[2,30],40:[2,30],42:[2,30],43:[2,30],44:[2,30],46:[2,30],47:[2,30],48:[2,30],49:[2,30],50:[2,30],61:[2,30],62:[2,30],63:[2,30],64:[2,30],65:[2,30],66:[2,30],69:[2,30],75:[2,30],76:[2,30],77:[2,30],78:[2,30],79:[2,30],81:[2,30],84:[2,30],86:[2,30],88:[2,30],89:[2,30],91:[2,30]},{16:[1,247],27:[1,246]},{16:[2,29],27:[2,29],30:[2,29]},{16:[1,248],19:[2,25],22:[2,25],25:[2,25],40:[2,25],42:[2,25],43:[2,25],44:[2,25],49:[2,25],61:[2,25],62:[2,25],64:[2,25],65:[2,25],69:[2,25],72:[2,25],75:[2,25],76:[2,25],77:[2,25],79:[2,25],86:[2,25],88:[2,25],89:[2,25],91:[2,25]},{19:[2,26],22:[2,26],25:[2,26],40:[2,26],42:[2,26],43:[2,26],44:[2,26],49:[2,26],61:[2,26],62:[2,26],64:[2,26],65:[2,26],69:[2,26],72:[2,26],75:[2,26],76:[2,26],77:[2,26],79:[2,26],86:[2,26],88:[2,26],89:[2,26],91:[2,26]},{4:250,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],50:[1,249],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{49:[1,251]},{5:[2,74],14:[2,74],16:[2,74],17:[2,74],19:[2,74],22:[2,74],23:[2,74],25:[2,74],27:[2,74],30:[2,74],36:[2,74],37:[2,74],38:[2,74],39:[2,74],40:[2,74],42:[2,74],43:[2,74],44:[2,74],46:[2,74],47:[2,74],48:[2,74],49:[2,74],50:[2,74],61:[2,74],62:[2,74],63:[2,74],64:[2,74],65:[2,74],66:[2,74],69:[2,74],75:[2,74],76:[2,74],77:[2,74],78:[2,74],79:[2,74],81:[2,74],84:[2,74],86:[2,74],88:[2,74],89:[2,74],91:[2,74]},{49:[1,252]},{23:[1,253]},{5:[2,117],14:[2,117],16:[2,117],17:[2,117],19:[2,117],22:[2,117],23:[2,117],25:[2,117],27:[2,117],30:[2,117],36:[2,117],37:[2,117],38:[2,117],39:[2,117],40:[2,117],42:[2,117],43:[2,117],44:[2,117],46:[2,117],47:[2,117],48:[2,117],49:[2,117],50:[2,117],61:[2,117],62:[2,117],63:[2,117],64:[2,117],65:[2,117],66:[2,117],69:[2,117],75:[2,117],76:[2,117],77:[2,117],78:[2,117],79:[2,117],81:[2,117],84:[2,117],86:[2,117],88:[2,117],89:[2,117],91:[2,117]},{42:[1,255],71:254,72:[1,26]},{16:[1,158],23:[1,256]},{23:[1,257]},{5:[2,131],14:[2,131],16:[2,131],17:[2,131],19:[2,131],22:[2,131],23:[2,131],25:[2,131],27:[2,131],30:[2,131],36:[2,131],37:[2,131],38:[2,131],39:[2,131],40:[2,131],42:[2,131],43:[2,131],44:[2,131],46:[2,131],47:[2,131],48:[2,131],49:[2,131],50:[2,131],61:[2,131],62:[2,131],63:[2,131],64:[2,131],65:[2,131],66:[2,131],69:[2,131],75:[2,131],76:[2,131],77:[2,131],78:[2,131],79:[2,131],81:[2,131],84:[2,131],86:[2,131],88:[2,131],89:[2,131],91:[2,131]},{16:[1,158],23:[1,258]},{23:[1,259]},{5:[2,125],14:[2,125],16:[2,125],17:[2,125],19:[2,125],22:[2,125],23:[2,125],25:[2,125],27:[2,125],30:[2,125],36:[2,125],37:[2,125],38:[2,125],39:[2,125],40:[2,125],42:[2,125],43:[2,125],44:[2,125],46:[2,125],47:[2,125],48:[2,125],49:[2,125],50:[2,125],61:[2,125],62:[2,125],63:[2,125],64:[2,125],65:[2,125],66:[2,125],69:[2,125],75:[2,125],76:[2,125],77:[2,125],78:[2,125],79:[2,125],81:[2,125],84:[2,125],86:[2,125],88:[2,125],89:[2,125],91:[2,125]},{16:[1,158],23:[1,260]},{14:[1,261]},{13:82,19:[1,15],22:[1,89],31:34,32:86,43:[1,87],44:[1,88],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[1,262],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,102],14:[2,102],16:[2,102],17:[2,102],19:[2,102],22:[2,102],23:[2,102],25:[2,102],27:[2,102],30:[2,102],36:[2,102],37:[2,102],38:[2,102],39:[2,102],40:[2,102],42:[2,102],43:[2,102],44:[2,102],46:[2,102],47:[2,102],48:[2,102],49:[2,102],50:[2,102],61:[2,102],62:[2,102],63:[2,102],64:[2,102],65:[2,102],66:[2,102],69:[2,102],75:[2,102],76:[2,102],77:[2,102],78:[2,102],79:[2,102],81:[2,102],84:[2,102],86:[2,102],88:[2,102],89:[2,102],91:[2,102]},{50:[1,263]},{14:[1,194],18:193,36:[1,64],37:[1,65],38:[1,66],39:[1,67],81:[2,106]},{16:[2,108],81:[2,108]},{16:[2,110],81:[2,110]},{16:[2,38],81:[2,38],84:[2,38]},{5:[2,16]},{5:[2,39],16:[2,39],81:[2,39],84:[2,39]},{16:[2,143],23:[2,143]},{5:[2,114],14:[2,114],16:[2,114],17:[2,114],19:[2,114],22:[2,114],23:[2,114],25:[2,114],27:[2,114],30:[2,114],36:[2,114],37:[2,114],38:[2,114],39:[2,114],40:[2,114],42:[2,114],43:[2,114],44:[2,114],46:[2,114],47:[2,114],48:[2,114],49:[2,114],50:[2,114],61:[2,114],62:[2,114],63:[2,114],64:[2,114],65:[2,114],66:[2,114],69:[2,114],75:[2,114],76:[2,114],77:[2,114],78:[2,114],79:[2,114],81:[2,114],84:[2,114],86:[2,114],88:[2,114],89:[2,114],91:[2,114]},{16:[2,144],23:[2,144]},{5:[2,136],14:[2,136],16:[2,136],17:[2,136],19:[2,136],22:[2,136],23:[2,136],25:[2,136],27:[2,136],30:[2,136],36:[2,136],37:[2,136],38:[2,136],39:[2,136],40:[2,136],42:[2,136],43:[2,136],44:[2,136],46:[2,136],47:[2,136],48:[2,136],49:[2,136],50:[2,136],61:[2,136],62:[2,136],63:[2,136],64:[2,136],65:[2,136],66:[2,136],69:[2,136],75:[2,136],76:[2,136],77:[2,136],78:[2,136],79:[2,136],81:[2,136],84:[2,136],86:[2,136],88:[2,136],89:[2,136],91:[2,136]},{5:[2,140],14:[2,140],16:[2,140],17:[2,140],19:[2,140],22:[2,140],23:[2,140],25:[2,140],27:[2,140],30:[2,140],36:[2,140],37:[2,140],38:[2,140],39:[2,140],40:[2,140],42:[2,140],43:[2,140],44:[2,140],46:[2,140],47:[2,140],48:[2,140],49:[2,140],50:[2,140],61:[2,140],62:[2,140],63:[2,140],64:[2,140],65:[2,140],66:[2,140],69:[2,140],75:[2,140],76:[2,140],77:[2,140],78:[2,140],79:[2,140],81:[2,140],84:[2,140],86:[2,140],88:[2,140],89:[2,140],91:[2,140]},{5:[2,20],16:[2,20]},{5:[2,21],14:[2,21],16:[2,21],17:[2,21],19:[2,21],22:[2,21],23:[2,21],25:[2,21],27:[2,21],30:[2,21],36:[2,21],37:[2,21],38:[2,21],39:[2,21],40:[2,21],42:[2,21],43:[2,21],44:[2,21],46:[2,21],47:[2,21],48:[2,21],49:[2,21],50:[2,21],61:[2,21],62:[2,21],63:[2,21],64:[2,21],65:[2,21],66:[2,21],69:[2,21],75:[2,21],76:[2,21],77:[2,21],78:[2,21],79:[2,21],81:[2,21],84:[2,21],86:[2,21],88:[2,21],89:[2,21],91:[2,21]},{5:[2,53],14:[2,53],16:[2,53],17:[2,53],19:[2,53],22:[2,53],23:[2,53],25:[2,53],27:[2,53],30:[2,53],36:[2,53],37:[2,53],38:[2,53],39:[2,53],40:[2,53],42:[2,53],43:[2,53],44:[2,53],46:[2,53],47:[2,53],48:[2,53],49:[2,53],50:[2,53],61:[2,53],62:[2,53],63:[2,53],64:[2,53],65:[2,53],66:[2,53],69:[2,53],72:[2,53],75:[2,53],76:[2,53],77:[2,53],78:[2,53],79:[2,53],81:[2,53],84:[2,53],86:[2,53],88:[2,53],89:[2,53],91:[2,53]},{5:[2,23],14:[2,23],16:[2,23],17:[2,23],19:[2,23],22:[2,23],23:[2,23],25:[2,23],27:[2,23],30:[2,23],36:[2,23],37:[2,23],38:[2,23],39:[2,23],40:[2,23],42:[2,23],43:[2,23],44:[2,23],46:[2,23],47:[2,23],48:[2,23],49:[2,23],50:[2,23],61:[2,23],62:[2,23],63:[2,23],64:[2,23],65:[2,23],66:[2,23],69:[2,23],75:[2,23],76:[2,23],77:[2,23],78:[2,23],79:[2,23],81:[2,23],84:[2,23],86:[2,23],88:[2,23],89:[2,23],91:[2,23]},{4:211,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{19:[2,27],22:[2,27],25:[2,27],40:[2,27],42:[2,27],43:[2,27],44:[2,27],49:[2,27],61:[2,27],62:[2,27],64:[2,27],65:[2,27],69:[2,27],72:[2,27],75:[2,27],76:[2,27],77:[2,27],79:[2,27],86:[2,27],88:[2,27],89:[2,27],91:[2,27]},{5:[2,70],14:[2,70],16:[2,70],17:[2,70],19:[2,70],22:[2,70],23:[2,70],25:[2,70],27:[2,70],30:[2,70],36:[2,70],37:[2,70],38:[2,70],39:[2,70],40:[2,70],42:[2,70],43:[2,70],44:[2,70],46:[2,70],47:[2,70],48:[2,70],49:[2,70],50:[2,70],61:[2,70],62:[2,70],63:[2,70],64:[2,70],65:[2,70],66:[2,70],69:[2,70],75:[2,70],76:[2,70],77:[2,70],78:[2,70],79:[2,70],81:[2,70],84:[2,70],86:[2,70],88:[2,70],89:[2,70],91:[2,70]},{50:[1,264]},{4:266,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],50:[1,265],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:267,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,137],14:[2,137],16:[2,137],17:[2,137],19:[2,137],22:[2,137],23:[2,137],25:[2,137],27:[2,137],30:[2,137],36:[2,137],37:[2,137],38:[2,137],39:[2,137],40:[2,137],42:[2,137],43:[2,137],44:[2,137],46:[2,137],47:[2,137],48:[2,137],49:[2,137],50:[2,137],61:[2,137],62:[2,137],63:[2,137],64:[2,137],65:[2,137],66:[2,137],69:[2,137],75:[2,137],76:[2,137],77:[2,137],78:[2,137],79:[2,137],81:[2,137],84:[2,137],86:[2,137],88:[2,137],89:[2,137],91:[2,137]},{50:[1,268]},{72:[1,269]},{5:[2,122],14:[2,122],16:[2,122],17:[2,122],19:[2,122],22:[2,122],23:[2,122],25:[2,122],27:[2,122],30:[2,122],36:[2,122],37:[2,122],38:[2,122],39:[2,122],40:[2,122],42:[2,122],43:[2,122],44:[2,122],46:[2,122],47:[2,122],48:[2,122],49:[2,122],50:[2,122],61:[2,122],62:[2,122],63:[2,122],64:[2,122],65:[2,122],66:[2,122],69:[2,122],75:[2,122],76:[2,122],77:[2,122],78:[2,122],79:[2,122],81:[2,122],84:[2,122],86:[2,122],88:[2,122],89:[2,122],91:[2,122]},{5:[2,138],14:[2,138],16:[2,138],17:[2,138],19:[2,138],22:[2,138],23:[2,138],25:[2,138],27:[2,138],30:[2,138],36:[2,138],37:[2,138],38:[2,138],39:[2,138],40:[2,138],42:[2,138],43:[2,138],44:[2,138],46:[2,138],47:[2,138],48:[2,138],49:[2,138],50:[2,138],61:[2,138],62:[2,138],63:[2,138],64:[2,138],65:[2,138],66:[2,138],69:[2,138],75:[2,138],76:[2,138],77:[2,138],78:[2,138],79:[2,138],81:[2,138],84:[2,138],86:[2,138],88:[2,138],89:[2,138],91:[2,138]},{5:[2,133],14:[2,133],16:[2,133],17:[2,133],19:[2,133],22:[2,133],23:[2,133],25:[2,133],27:[2,133],30:[2,133],36:[2,133],37:[2,133],38:[2,133],39:[2,133],40:[2,133],42:[2,133],43:[2,133],44:[2,133],46:[2,133],47:[2,133],48:[2,133],49:[2,133],50:[2,133],61:[2,133],62:[2,133],63:[2,133],64:[2,133],65:[2,133],66:[2,133],69:[2,133],75:[2,133],76:[2,133],77:[2,133],78:[2,133],79:[2,133],81:[2,133],84:[2,133],86:[2,133],88:[2,133],89:[2,133],91:[2,133]},{5:[2,139],14:[2,139],16:[2,139],17:[2,139],19:[2,139],22:[2,139],23:[2,139],25:[2,139],27:[2,139],30:[2,139],36:[2,139],37:[2,139],38:[2,139],39:[2,139],40:[2,139],42:[2,139],43:[2,139],44:[2,139],46:[2,139],47:[2,139],48:[2,139],49:[2,139],50:[2,139],61:[2,139],62:[2,139],63:[2,139],64:[2,139],65:[2,139],66:[2,139],69:[2,139],75:[2,139],76:[2,139],77:[2,139],78:[2,139],79:[2,139],81:[2,139],84:[2,139],86:[2,139],88:[2,139],89:[2,139],91:[2,139]},{5:[2,127],14:[2,127],16:[2,127],17:[2,127],19:[2,127],22:[2,127],23:[2,127],25:[2,127],27:[2,127],30:[2,127],36:[2,127],37:[2,127],38:[2,127],39:[2,127],40:[2,127],42:[2,127],43:[2,127],44:[2,127],46:[2,127],47:[2,127],48:[2,127],49:[2,127],50:[2,127],61:[2,127],62:[2,127],63:[2,127],64:[2,127],65:[2,127],66:[2,127],69:[2,127],75:[2,127],76:[2,127],77:[2,127],78:[2,127],79:[2,127],81:[2,127],84:[2,127],86:[2,127],88:[2,127],89:[2,127],91:[2,127]},{4:270,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,101],14:[2,101],16:[2,101],17:[2,101],19:[2,101],22:[2,101],23:[2,101],25:[2,101],27:[2,101],30:[2,101],36:[2,101],37:[2,101],38:[2,101],39:[2,101],40:[2,101],42:[2,101],43:[2,101],44:[2,101],46:[2,101],47:[2,101],48:[2,101],49:[2,101],50:[2,101],61:[2,101],62:[2,101],63:[2,101],64:[2,101],65:[2,101],66:[2,101],69:[2,101],75:[2,101],76:[2,101],77:[2,101],78:[2,101],79:[2,101],81:[2,101],84:[2,101],86:[2,101],88:[2,101],89:[2,101],91:[2,101]},{19:[2,56],22:[2,56],25:[2,56],40:[2,56],42:[2,56],43:[2,56],44:[2,56],46:[2,56],47:[2,56],48:[2,56],49:[2,56],61:[2,56],62:[2,56],64:[2,56],65:[2,56],69:[2,56],72:[2,56],75:[2,56],76:[2,56],77:[2,56],79:[2,56],86:[2,56],88:[2,56],89:[2,56],91:[2,56],94:[2,56]},{5:[2,71],14:[2,71],16:[2,71],17:[2,71],19:[2,71],22:[2,71],23:[2,71],25:[2,71],27:[2,71],30:[2,71],36:[2,71],37:[2,71],38:[2,71],39:[2,71],40:[2,71],42:[2,71],43:[2,71],44:[2,71],46:[2,71],47:[2,71],48:[2,71],49:[2,71],50:[2,71],61:[2,71],62:[2,71],63:[2,71],64:[2,71],65:[2,71],66:[2,71],69:[2,71],75:[2,71],76:[2,71],77:[2,71],78:[2,71],79:[2,71],81:[2,71],84:[2,71],86:[2,71],88:[2,71],89:[2,71],91:[2,71]},{5:[2,72],14:[2,72],16:[2,72],17:[2,72],19:[2,72],22:[2,72],23:[2,72],25:[2,72],27:[2,72],30:[2,72],36:[2,72],37:[2,72],38:[2,72],39:[2,72],40:[2,72],42:[2,72],43:[2,72],44:[2,72],46:[2,72],47:[2,72],48:[2,72],49:[2,72],50:[2,72],61:[2,72],62:[2,72],63:[2,72],64:[2,72],65:[2,72],66:[2,72],69:[2,72],75:[2,72],76:[2,72],77:[2,72],78:[2,72],79:[2,72],81:[2,72],84:[2,72],86:[2,72],88:[2,72],89:[2,72],91:[2,72]},{50:[1,271]},{50:[1,272]},{13:82,19:[1,15],20:81,22:[1,274],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:273,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{50:[2,113]},{50:[1,275]},{5:[2,73],14:[2,73],16:[2,73],17:[2,73],19:[2,73],22:[2,73],23:[2,73],25:[2,73],27:[2,73],30:[2,73],36:[2,73],37:[2,73],38:[2,73],39:[2,73],40:[2,73],42:[2,73],43:[2,73],44:[2,73],46:[2,73],47:[2,73],48:[2,73],49:[2,73],50:[2,73],61:[2,73],62:[2,73],63:[2,73],64:[2,73],65:[2,73],66:[2,73],69:[2,73],75:[2,73],76:[2,73],77:[2,73],78:[2,73],79:[2,73],81:[2,73],84:[2,73],86:[2,73],88:[2,73],89:[2,73],91:[2,73]},{5:[2,75],14:[2,75],16:[2,75],17:[2,75],19:[2,75],22:[2,75],23:[2,75],25:[2,75],27:[2,75],30:[2,75],36:[2,75],37:[2,75],38:[2,75],39:[2,75],40:[2,75],42:[2,75],43:[2,75],44:[2,75],46:[2,75],47:[2,75],48:[2,75],49:[2,75],50:[2,75],61:[2,75],62:[2,75],63:[2,75],64:[2,75],65:[2,75],66:[2,75],69:[2,75],75:[2,75],76:[2,75],77:[2,75],78:[2,75],79:[2,75],81:[2,75],84:[2,75],86:[2,75],88:[2,75],89:[2,75],91:[2,75]},{5:[2,119],13:82,14:[2,119],16:[2,119],17:[2,119],19:[1,15],22:[1,89],23:[2,119],25:[2,119],27:[2,119],30:[2,119],31:34,32:86,36:[2,119],37:[2,119],38:[2,119],39:[2,119],40:[2,119],42:[2,119],43:[1,87],44:[1,88],46:[2,119],47:[2,119],48:[2,119],49:[1,36],50:[2,119],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,119],64:[1,38],65:[1,39],66:[2,119],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,119],79:[1,52],81:[2,119],84:[2,119],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:276,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{45:277,46:[1,94],47:[1,95],48:[1,96]},{16:[1,158],23:[1,278]},{13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:279,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,120],14:[2,120],16:[2,120],17:[2,120],19:[2,120],22:[2,120],23:[2,120],25:[2,120],27:[2,120],30:[2,120],36:[2,120],37:[2,120],38:[2,120],39:[2,120],40:[2,120],42:[2,120],43:[2,120],44:[2,120],46:[2,120],47:[2,120],48:[2,120],49:[2,120],50:[2,120],61:[2,120],62:[2,120],63:[2,120],64:[2,120],65:[2,120],66:[2,120],69:[2,120],75:[2,120],76:[2,120],77:[2,120],78:[2,120],79:[2,120],81:[2,120],84:[2,120],86:[2,120],88:[2,120],89:[2,120],91:[2,120]},{5:[2,100],13:82,14:[2,100],16:[2,100],17:[2,100],19:[1,15],22:[1,89],23:[2,100],25:[2,100],27:[2,100],30:[2,100],31:34,32:86,36:[2,100],37:[2,100],38:[2,100],39:[2,100],40:[2,100],42:[2,100],43:[1,87],44:[1,88],46:[2,100],47:[2,100],48:[2,100],49:[1,36],50:[2,100],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,100],64:[1,38],65:[1,39],66:[2,100],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,100],79:[1,52],81:[2,100],84:[2,100],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]}],defaultActions:{12:[2,12],57:[2,98],58:[2,99],59:[2,1],68:[2,2],69:[2,3],70:[2,4],71:[2,5],72:[2,6],73:[2,7],74:[2,8],79:[2,10],80:[2,145],140:[2,15],141:[2,14],144:[2,9],145:[2,13],195:[2,11],236:[2,16],269:[2,113]},parseError:function(e,t){throw new Error(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],r=[null],s=[],a=this.table,o="",c=0,l=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;s.push(h);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,v,y,b,_,x,w={};;){if(m=i[i.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===p||"undefined"==typeof p)&&(p=t()),g=a[m]&&a[m][p]),"undefined"==typeof g||!g.length||!g[0]){var S="";if(!u){x=[];for(y in a[m])this.terminals_[y]&&y>2&&x.push("'"+this.terminals_[y]+"'");S=this.lexer.showPosition?"Parse error on line "+(c+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(c+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:x})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:i.push(p),r.push(this.lexer.yytext),s.push(this.lexer.yylloc),i.push(g[1]),p=null,f?(p=f,f=null):(l=this.lexer.yyleng,o=this.lexer.yytext,c=this.lexer.yylineno,h=this.lexer.yylloc,u>0&&u--);break;case 2:if(b=this.productions_[g[1]][1],w.$=r[r.length-b],w._$={first_line:s[s.length-(b||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(b||1)].first_column,last_column:s[s.length-1].last_column},d&&(w._$.range=[s[s.length-(b||1)].range[0],s[s.length-1].range[1]]),v=this.performAction.call(w,o,l,c,this.yy,g[1],r,s),"undefined"!=typeof v)return v;b&&(i=i.slice(0,-1*b*2),r=r.slice(0,-1*b),s=s.slice(0,-1*b)),i.push(this.productions_[g[1]][0]),r.push(w.$),s.push(w._$),_=a[i[i.length-2]][i[i.length-1]],i.push(_);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i,r;this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),a=0;a<s.length&&(n=this._input.match(this.rules[s[a]]),!n||t&&!(n[0].length>t[0].length)||(t=n,i=a,this.options.flex));a++);return t?(r=t[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,s[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,i){switch(n){case 0:break;
case 1:return 49;case 2:return 50;case 3:return"MATH_SHIFT";case 4:return t.yytext=this.matches[this.matches.length-1],46;case 5:return t.yytext=this.matches[this.matches.length-1],47;case 6:return t.yytext=this.matches[this.matches.length-1],52;case 7:return t.yytext=this.matches[this.matches.length-1],53;case 8:return 48;case 9:return t.yytext=Number(this.matches[2])+Number(this.matches[5])/Number(this.matches[6]),72;case 10:return 72;case 11:return 94;case 12:return 43;case 13:return 43;case 14:return 44;case 15:return 44;case 16:return t.yytext=this.matches[3],69;case 17:return t.yytext=this.matches[2],this.popState(),78;case 18:return t.yytext=this.matches[this.matches.length-1],89;case 19:return 91;case 20:return 88;case 21:return 64;case 22:return 65;case 23:return"\\";case 24:return 75;case 25:return 76;case 26:return 61;case 27:return 61;case 28:return this.begin("integral"),77;case 29:return 19;case 30:return 17;case 31:return 62;case 32:return 63;case 33:return 42;case 34:return 40;case 35:return 14;case 36:return 17;case 37:return"...";case 38:return 54;case 39:return 66;case 40:return 5;case 41:return 22;case 42:return 23;case 43:return 25;case 44:return 27;case 45:return 79;case 46:return 81;case 47:return 84;case 48:return 38;case 49:return 39;case 50:return 37;case 51:return 36;case 52:return 16;case 53:return 15;case 54:return 86;case 55:return t.yytext="\\sign",19;case 56:return t.yytext="\\gcd",19;case 57:return t.yytext="\\lcm",19;case 58:return t.yytext="\\stdevp",19;case 59:return t.yytext="\\stdevp",19;case 60:return t.yytext="\\stdev",19;case 61:return t.yytext="\\stdev",19;case 62:return t.yytext="\\var",19;case 63:return t.yytext="\\sign",19;case 64:return t.yytext="\\gcd",19;case 65:return t.yytext="\\lcm",19;case 66:return t.yytext="\\stdevp",19;case 67:return t.yytext="\\stdevp",19;case 68:return t.yytext="\\stdev",19;case 69:return t.yytext="\\stdev",19;case 70:return t.yytext="\\var",19;case 71:return/^(arc)?(sin|cos|tan|cot|sec|csc)h?$/.test(this.matches[3])?(t.yytext="\\"+this.matches[3],86):(t.yytext="\\"+this.matches[3]+this.matches[4],"IDENTIFIER_BASE");case 72:return 19;case 73:break;case 74:return"UNRECOGNIZED"}},e.rules=[/^(?:(\\space|\\:|\s|\\ )+)/,/^(?:\{)/,/^(?:\})/,/^(?:\$)/,/^(?:\^([0-9]))/,/^(?:\^([a-zA-Z]))/,/^(?:_([0-9]))/,/^(?:_([a-zA-Z]))/,/^(?:\^)/,/^(?:(([0-9]+)((?:\s|\\space|\\:|\\ )*)\\frac((?:\s|\\space|\\:|\\ )*)\{([0-9]+)\}\{([0-9]+)\}))/,/^(?:[0-9]+(\.[0-9]+)?|(\.[0-9]+))/,/^(?:')/,/^(?:\*|(\\cdot))/,/^(?:(\\times))/,/^(?:\/)/,/^(?:(\\div))/,/^(?:(\\frac((?:\s|\\space|\\:|\\ )*)\{d\}\{d(((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?))\}))/,/^(?:(d(((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?))))/,/^(?:(\\log)((?:\s|\\space|\\:|\\ )*)*_([0-9]))/,/^(?:(\\ln))/,/^(?:(\\log))/,/^(?:(\\frac))/,/^(?:(\\sqrt))/,/^(?:(\\backslash))/,/^(?:(\\sum))/,/^(?:(\\prod))/,/^(?:(\\ans))/,/^(?:(\\operatorname{ans}))/,/^(?:(\\int))/,/^(?:(\\length))/,/^(?:(\\sim))/,/^(?:\\left\|)/,/^(?:\\right\|)/,/^(?:-)/,/^(?:\+)/,/^(?:=)/,/^(?:~)/,/^(?:\.\.\.)/,/^(?:[_])/,/^(?:!)/,/^(?:$)/,/^(?:(\()|\\left\()/,/^(?:(\))|\\right\))/,/^(?:(\[)|\\left\[)/,/^(?:(\])|\\right\])/,/^(?:(\\\{)|\\left\\\{)/,/^(?:(\\\})|\\right\\\})/,/^(?::)/,/^(?:(\\ge|>=))/,/^(?:(\\le|<=))/,/^(?:(\\gt|>))/,/^(?:(\\lt|<))/,/^(?:,)/,/^(?:(###)(((?:\s|\\space|\\:|\\ )*)(?:((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)|((\\operatorname\{([a-zA-Z]+)\})((_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)))((?:\s|\\space|\\:|\\ )*)(\\left\(|\()((?:\s|\\space|\\:|\\ )*)((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)(((?:\s|\\space|\\:|\\ )*),((?:\s|\\space|\\:|\\ )*)((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)((?:\s|\\space|\\:|\\ )*))*((?:\s|\\space|\\:|\\ )*)(\\right\)|\))((?:\s|\\space|\\:|\\ )*)=))/,/^(?:(\\(arc)?(sin|cos|tan|cot|sec|csc)h?))/,/^(?:(\\signum))/,/^(?:(\\(gcf|mcd)))/,/^(?:(\\mcm))/,/^(?:(\\stdDevP))/,/^(?:(\\stddevp))/,/^(?:(\\stdDev))/,/^(?:(\\stddev))/,/^(?:(\\variance))/,/^(?:(\\operatorname\{signum\}))/,/^(?:(\\operatorname\{(gcf|mcd)\}))/,/^(?:(\\operatorname\{mcm\}))/,/^(?:(\\operatorname\{stdDevP\}))/,/^(?:(\\operatorname\{stddevp\}))/,/^(?:(\\operatorname\{stdDev\}))/,/^(?:(\\operatorname\{stddev\}))/,/^(?:(\\operatorname\{variance\}))/,/^(?:((\\operatorname\{([a-zA-Z]+)\})((_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)))/,/^(?:((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?))/,/^(?:(###))/,/^(?:.)/],e.conditions={integral:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0},conditional:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0}},e}();return e.lexer=t,e}),define("console",["require"],function(e){var t=function(){},n=["log","info","warn","error","assert","dir","clear","profile","profileEnd"],i={},r=function(e){"undefined"!=typeof window&&window.console&&window.console[e]?i[e]=function(){Function.prototype.apply.call(window.console[e],window.console,arguments)}:i[e]=t};return n.forEach(r),i}),define("math/mathshim",["require"],function(e){var t={};return t.cosh=Math.cosh||function(e){return.5*(Math.exp(e)+Math.exp(-e))},t.sinh=Math.sinh&&0!==Math.sinh(1e-20)?Math.sinh:function(e){var n=e>0?1:-1;return e=e>0?e:-e,.5*-n*Math.exp(e)*t.expm1(-2*e)},t.tanh=Math.tanh&&0!==Math.tanh(1e-20)?Math.tanh:function(e){var n=e>0?1:-1;e=e>0?e:-e;var i=t.expm1(-2*e);return-n*i/(2+i)},t.acosh=Math.acosh||function(e){return 1>e?NaN:Math.log(e+t.sqrtxsqm1(e))},t.asinh=Math.asinh&&0!==Math.asinh(1e-20)?Math.asinh:function(e){var n=e>0?1:-1;return e=e>0?e:-e,1+e*e===1?n*t.log1p(e):n*Math.log(e+t.sqrtxsqp1(e))},t.atanh=Math.atanh&&0!==Math.atanh(1e-20)?Math.atanh:function(e){return.5*(t.log1p(e)-t.log1p(-e))},t.expm1=Math.expm1||function(e){return e+.5*e*e===e?e:Math.exp(e)-1},t.log1p=Math.log1p||function(e){return e-.5*e*e===e?e:Math.log(1+e)},t.sqrtxsqp1=function(e){var t=e*e;return 1+t===1?1:1+t===t?Math.abs(e):Math.sqrt(t+1)},t.sqrtxsqm1=function(e){var t=e*e;return 1>t?NaN:t-1===t?Math.abs(e):Math.sqrt(t-1)},t}),define("numeric",[],function(){"use strict";var numeric="undefined"==typeof exports?function(){}:exports;return"undefined"!=typeof global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,t){var n,i,r,s;for("undefined"==typeof t&&(t=15),r=.5,n=new Date;;){for(r*=2,s=r;s>3;s-=4)e(),e(),e(),e();for(;s>0;)e(),s--;if(i=new Date,i-n>t)break}for(s=r;s>3;s-=4)e(),e(),e(),e();for(;s>0;)e(),s--;return i=new Date,1e3*(3*r-1)/(i-n)},numeric._myIndexOf=function(e){var t,n=this.length;for(t=0;n>t;++t)if(this[t]===e)return t;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.precision=4,numeric.largeArray=50,numeric.compile=function(){var e=Array.prototype.slice.call(arguments),t=e.pop();return t="return function ("+e.join(",")+") {"+t+"}",new Function(["numeric"],t)(numeric)},numeric.prettyPrint=function(e){function t(e){if(0===e)return"0";if(isNaN(e))return"NaN";if(0>e)return"-"+t(-e);if(isFinite(e)){var n=Math.floor(Math.log(e)/Math.log(10)),i=e/Math.pow(10,n),r=i.toPrecision(numeric.precision);return 10===parseFloat(r)&&(n++,i=1,r=i.toPrecision(numeric.precision)),parseFloat(r).toString()+"e"+n.toString()}return"Infinity"}function n(e){var r;if("undefined"==typeof e)return i.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof e)return i.push('"'+e+'"'),!1;if("boolean"==typeof e)return i.push(e.toString()),!1;if("number"==typeof e){var s=t(e),a=e.toPrecision(numeric.precision),o=parseFloat(e.toString()).toString(),c=[s,a,o,parseFloat(a).toString(),parseFloat(o).toString()];for(r=1;r<c.length;r++)c[r].length<s.length&&(s=c[r]);return i.push(Array(numeric.precision+8-s.length).join(" ")+s),!1}if(null===e)return i.push("null"),!1;if("function"==typeof e){i.push(e.toString());var l=!1;for(r in e)e.hasOwnProperty(r)&&(l?i.push(",\n"):i.push("\n{"),l=!0,i.push(r),i.push(": \n"),n(e[r]));return l&&i.push("}\n"),!0}if(e instanceof Array){if(e.length>numeric.largeArray)return i.push("...Large Array..."),!0;var l=!1;for(i.push("["),r=0;r<e.length;r++)r>0&&(i.push(","),l&&i.push("\n ")),l=n(e[r]);return i.push("]"),!0}i.push("{");var l=!1;for(r in e)e.hasOwnProperty(r)&&(l&&i.push(",\n"),l=!0,i.push(r),i.push(": \n"),n(e[r]));return i.push("}"),!0}var i=[];return n(e),i.join("")},numeric.parseDate=function(e){function t(e){if("string"==typeof e)return Date.parse(e.replace(/-/g,"/"));if(!(e instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var n,i=[];for(n=0;n<e.length;n++)i[n]=t(e[n]);return i}return t(e)},numeric.parseFloat=function(e){function t(e){if("string"==typeof e)return parseFloat(e);if(!(e instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var n,i=[];for(n=0;n<e.length;n++)i[n]=t(e[n]);return i}return t(e)},numeric.parseCSV=function(e){var t,n,i=e.split("\n"),r=[],s=/(([^'",]*)|('[^']*')|("[^"]*")),/g,a=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,o=function(e){return e.substr(0,e.length-1)},c=0;for(n=0;n<i.length;n++){var l,u=(i[n]+",").match(s);if(u.length>0){for(r[c]=[],t=0;t<u.length;t++)l=o(u[t]),a.test(l)?r[c][t]=parseFloat(l):r[c][t]=l;c++}}return r},numeric.toCSV=function(e){var t,n,i,r,s,a,o=numeric.dim(e);for(i=o[0],r=o[1],a=[],t=0;i>t;t++){for(s=[],n=0;i>n;n++)s[n]=e[t][n].toString();a[t]=s.join(", ")}return a.join("\n")+"\n"},numeric.getURL=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},numeric.imageURL=function(e){function t(e){var t,n,i,r,s,a,o,c,l=e.length,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="";for(t=0;l>t;t+=3)n=e[t],i=e[t+1],r=e[t+2],s=n>>2,a=((3&n)<<4)+(i>>4),o=((15&i)<<2)+(r>>6),c=63&r,t+1>=l?o=c=64:t+2>=l&&(c=64),h+=u.charAt(s)+u.charAt(a)+u.charAt(o)+u.charAt(c);return h}function n(e,t,n){"undefined"==typeof t&&(t=0),"undefined"==typeof n&&(n=e.length);var i,r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],s=-1,a=0;e.length;for(i=t;n>i;i++)a=255&(s^e[i]),s=s>>>8^r[a];return-1^s}var i,r,s,a,o,c,l,u,h,d,p=e[0].length,f=e[0][0].length,m=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,f>>24&255,f>>16&255,f>>8&255,255&f,p>>24&255,p>>16&255,p>>8&255,255&p,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(d=n(m,12,29),m[29]=d>>24&255,m[30]=d>>16&255,m[31]=d>>8&255,m[32]=255&d,i=1,r=0,l=0;p>l;l++){for(p-1>l?m.push(0):m.push(1),o=3*f+1+(0===l)&255,c=3*f+1+(0===l)>>8&255,m.push(o),m.push(c),m.push(255&~o),m.push(255&~c),0===l&&m.push(0),u=0;f>u;u++)for(s=0;3>s;s++)o=e[s][l][u],o=o>255?255:0>o?0:Math.round(o),i=(i+o)%65521,r=(r+i)%65521,m.push(o);m.push(0)}return h=(r<<16)+i,m.push(h>>24&255),m.push(h>>16&255),m.push(h>>8&255),m.push(255&h),a=m.length-41,m[33]=a>>24&255,m[34]=a>>16&255,m[35]=a>>8&255,m[36]=255&a,d=n(m,37),m.push(d>>24&255),m.push(d>>16&255),m.push(d>>8&255),m.push(255&d),m.push(0),m.push(0),m.push(0),m.push(0),m.push(73),m.push(69),m.push(78),m.push(68),m.push(174),m.push(66),m.push(96),m.push(130),"data:image/png;base64,"+t(m)},numeric._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},numeric.dim=function(e){var t,n;return"object"==typeof e?(t=e[0],"object"==typeof t?(n=t[0],"object"==typeof n?numeric._dim(e):[e.length,t.length]):[e.length]):[]},numeric.mapreduce=function(e,t){return numeric.compile("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+t+';\nif(typeof x === "number") { var xi = x; '+e+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+e+";\n    xi = x[i-1];\n    "+e+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.mapreduce2=function(e,t){return numeric.compile("x","var n = x.length;\nvar i,xi;\n"+t+"\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.same=function e(t,n){var i,r;if(!(t instanceof Array&&n instanceof Array))return!1;if(r=t.length,r!==n.length)return!1;for(i=0;r>i;i++)if(t[i]!==n[i]){if("object"!=typeof t[i])return!1;if(!e(t[i],n[i]))return!1}return!0},numeric.rep=function(e,t,n){"undefined"==typeof n&&(n=0);var i,r=e[n],s=Array(r);if(n===e.length-1){for(i=r-2;i>=0;i-=2)s[i+1]=t,s[i]=t;return-1===i&&(s[0]=t),s}for(i=r-1;i>=0;i--)s[i]=numeric.rep(e,t,n+1);return s},numeric.dotMMsmall=function(e,t){var n,i,r,s,a,o,c,l,u,h,d;for(s=e.length,a=t.length,o=t[0].length,c=Array(s),n=s-1;n>=0;n--){for(l=Array(o),u=e[n],r=o-1;r>=0;r--){for(h=u[a-1]*t[a-1][r],i=a-2;i>=1;i-=2)d=i-1,h+=u[i]*t[i][r]+u[d]*t[d][r];0===i&&(h+=u[0]*t[0][r]),l[r]=h}c[n]=l}return c},numeric._getCol=function(e,t,n){var i,r=e.length;for(i=r-1;i>0;--i)n[i]=e[i][t],--i,n[i]=e[i][t];0===i&&(n[0]=e[0][t])},numeric.dotMMbig=function(e,t){var n,i,r,s,a=numeric._getCol,o=t.length,c=Array(o),l=e.length,u=t[0].length,h=new Array(l),d=numeric.dotVV;for(--o,--l,i=l;-1!==i;--i)h[i]=Array(u);for(--u,i=u;-1!==i;--i)for(a(t,i,c),r=l;-1!==r;--r)s=0,n=e[r],h[r][i]=d(n,c);return h},numeric.dotMV=function(e,t){var n,i=e.length,r=(t.length,Array(i)),s=numeric.dotVV;for(n=i-1;n>=0;n--)r[n]=s(e[n],t);return r},numeric.dotVM=function(e,t){var n,i,r,s,a,o,c;for(r=e.length,s=t[0].length,a=Array(s),i=s-1;i>=0;i--){for(o=e[r-1]*t[r-1][i],n=r-2;n>=1;n-=2)c=n-1,o+=e[n]*t[n][i]+e[c]*t[c][i];0===n&&(o+=e[0]*t[0][i]),a[i]=o}return a},numeric.dotVV=function(e,t){var n,i,r=e.length,s=e[r-1]*t[r-1];for(n=r-2;n>=1;n-=2)i=n-1,s+=e[n]*t[n]+e[i]*t[i];return 0===n&&(s+=e[0]*t[0]),s},numeric.dot=function(e,t){var n=numeric.dim;switch(1e3*n(e).length+n(t).length){case 2002:return t.length<10?numeric.dotMMsmall(e,t):numeric.dotMMbig(e,t);case 2001:return numeric.dotMV(e,t);case 1002:return numeric.dotVM(e,t);case 1001:return numeric.dotVV(e,t);case 1e3:return numeric.mulVS(e,t);case 1:return numeric.mulSV(e,t);case 0:return e*t;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var t,n,i,r,s=e.length,a=Array(s);for(t=s-1;t>=0;t--){for(r=Array(s),n=t+2,i=s-1;i>=n;i-=2)r[i]=0,r[i-1]=0;for(i>t&&(r[i]=0),r[t]=e[t],i=t-1;i>=1;i-=2)r[i]=0,r[i-1]=0;0===i&&(r[0]=0),a[t]=r}return a},numeric.getDiag=function(e){var t,n=Math.min(e.length,e[0].length),i=Array(n);for(t=n-1;t>=1;--t)i[t]=e[t][t],--t,i[t]=e[t][t];return 0===t&&(i[0]=e[0][0]),i},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,t,n){"undefined"==typeof n&&(n="");var i,r,s=[],a=/\[i\]$/,o="",c=!1;for(i=0;i<e.length;i++)a.test(e[i])?(r=e[i].substring(0,e[i].length-3),o=r):r=e[i],"ret"===r&&(c=!0),s.push(r);return s[e.length]="_s",s[e.length+1]="_k",s[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+o+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(c?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\n    return ret;\n}\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n    "+t+"\n}\nreturn ret;",numeric.compile.apply(null,s)},numeric.pointwise2=function(e,t,n){"undefined"==typeof n&&(n="");var i,r,s=[],a=/\[i\]$/,o="",c=!1;for(i=0;i<e.length;i++)a.test(e[i])?(r=e[i].substring(0,e[i].length-3),o=r):r=e[i],"ret"===r&&(c=!0),s.push(r);return s[e.length]="var _n = "+o+".length;\nvar i"+(c?"":", ret = Array(_n)")+";\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n"+t+"\n}\nreturn ret;",numeric.compile.apply(null,s)},numeric._biforeach=function t(e,n,i,r,s){if(r===i.length-1)return void s(e,n);var a,o=i[r];for(a=o-1;a>=0;a--)t("object"==typeof e?e[a]:e,"object"==typeof n?n[a]:n,i,r+1,s)},numeric._biforeach2=function n(e,t,i,r,s){if(r===i.length-1)return s(e,t);var a,o=i[r],c=Array(o);for(a=o-1;a>=0;--a)c[a]=n("object"==typeof e?e[a]:e,"object"==typeof t?t[a]:t,i,r+1,s);return c},numeric._foreach=function i(e,t,n,r){if(n===t.length-1)return void r(e);var s,a=t[n];for(s=a-1;s>=0;s--)i(e[s],t,n+1,r)},numeric._foreach2=function r(e,t,n,i){if(n===t.length-1)return i(e);var s,a=t[n],o=Array(a);for(s=a-1;s>=0;s--)o[s]=r(e[s],t,n+1,i);return o},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi);","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,t;for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],numeric.ops2[t]=t;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){t=numeric.ops2[e];var n,i,r="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,e)?(r="var "+t+" = Math."+t+";\n",n=function(e,n,i){return e+" = "+t+"("+n+","+i+")"},i=function(e,n){return e+" = "+t+"("+e+","+n+")"}):(n=function(e,n,i){return e+" = "+n+" "+t+" "+i},i=numeric.opseq.hasOwnProperty(e+"eq")?function(e,n){return e+" "+t+"= "+n}:function(e,n){return e+" = "+e+" "+t+" "+n}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],n("ret[i]","x[i]","y[i]"),r),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],n("ret[i]","x","y[i]"),r),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],n("ret[i]","x[i]","y"),r),numeric[e]=numeric.compile("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+i("x","y")+"\n}\nreturn x;\n"),numeric[t]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],i("ret[i]","x[i]"),r),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],i("ret[i]","x"),r),numeric[e+"eq"]=numeric.compile("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+e+"eqV, S = numeric."+e+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],delete numeric.ops2[t];for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],numeric.ops1[t]=t;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(r="",t=numeric.ops1[e],-1!==numeric.myIndexOf.call(numeric.mathfuns,e)&&Math.hasOwnProperty(t)&&(r="var "+t+" = Math."+t+";\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",r),numeric[e+"eq"]=numeric.compile("x",'if(typeof x !== "object") return '+t+"x\nvar i;\nvar V = numeric."+e+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",r),numeric[e]=numeric.compile("x",'if(typeof x !== "object") return '+t+"(x)\nvar i;\nvar V = numeric."+e+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],delete numeric.ops1[t];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(t=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(t[0],t[1]),numeric[e]=numeric.compile("x","s","k",t[1]+'if(typeof x !== "object") {    xi = x;\n'+t[0]+'\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+e+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+t[0]+"\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,t){return"object"==typeof e?"object"==typeof t?numeric.truncVV(e,t):numeric.truncVS(e,t):"object"==typeof t?numeric.truncSV(e,t):Math.round(e/t)*t},numeric.inv=function(e){var t,n,i,r,s,a,o,e,c=numeric.dim(e),l=Math.abs,u=c[0],h=c[1],d=numeric.clone(e),p=numeric.identity(u);for(a=0;h>a;++a){var f=-1,m=-1;for(s=a;s!==u;++s)o=l(d[s][a]),o>m&&(f=s,m=o);for(n=d[f],d[f]=d[a],d[a]=n,r=p[f],p[f]=p[a],p[a]=r,e=n[a],o=a;o!==h;++o)n[o]/=e;for(o=h-1;-1!==o;--o)r[o]/=e;for(s=u-1;-1!==s;--s)if(s!==a){for(t=d[s],i=p[s],e=t[a],o=a+1;o!==h;++o)t[o]-=n[o]*e;for(o=h-1;o>0;--o)i[o]-=r[o]*e,--o,i[o]-=r[o]*e;0===o&&(i[0]-=r[0]*e)}}return p},numeric.det=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: det() only works on square matrices");var n,i,r,s,a,o,c,l,u=t[0],h=1,d=numeric.clone(e);for(i=0;u-1>i;i++){for(r=i,n=i+1;u>n;n++)Math.abs(d[n][i])>Math.abs(d[r][i])&&(r=n);for(r!==i&&(c=d[r],d[r]=d[i],d[i]=c,h*=-1),s=d[i],n=i+1;u>n;n++){for(a=d[n],o=a[i]/s[i],r=i+1;u-1>r;r+=2)l=r+1,a[r]-=s[r]*o,a[l]-=s[l]*o;r!==u&&(a[r]-=s[r]*o)}if(0===s[i])return 0;h*=s[i]}return h*d[i][i]},numeric.transpose=function(e){var t,n,i,r,s,a=e.length,o=e[0].length,c=Array(o);for(n=0;o>n;n++)c[n]=Array(a);for(t=a-1;t>=1;t-=2){for(r=e[t],i=e[t-1],n=o-1;n>=1;--n)s=c[n],s[t]=r[n],s[t-1]=i[n],--n,s=c[n],s[t]=r[n],s[t-1]=i[n];0===n&&(s=c[0],s[t]=r[0],s[t-1]=i[0])}if(0===t){for(i=e[0],n=o-1;n>=1;--n)c[n][0]=i[n],--n,c[n][0]=i[n];0===n&&(c[0][0]=i[0])}return c},numeric.negtranspose=function(e){var t,n,i,r,s,a=e.length,o=e[0].length,c=Array(o);for(n=0;o>n;n++)c[n]=Array(a);for(t=a-1;t>=1;t-=2){for(r=e[t],i=e[t-1],n=o-1;n>=1;--n)s=c[n],s[t]=-r[n],s[t-1]=-i[n],--n,s=c[n],s[t]=-r[n],s[t-1]=-i[n];0===n&&(s=c[0],s[t]=-r[0],s[t-1]=-i[0])}if(0===t){for(i=e[0],n=o-1;n>=1;--n)c[n][0]=-i[n],--n,c[n][0]=-i[n];0===n&&(c[0][0]=-i[0])}return c},numeric._random=function s(e,t){var n,i,r=e[t],a=Array(r);if(t===e.length-1){for(i=Math.random,n=r-1;n>=1;n-=2)a[n]=i(),a[n-1]=i();return 0===n&&(a[0]=i()),a}for(n=r-1;n>=0;n--)a[n]=s(e,t+1);return a},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,t,n){if("undefined"==typeof n&&(n=Math.max(Math.round(t-e)+1,1)),2>n)return 1===n?[e]:[];var i,r=Array(n);for(n--,i=n;i>=0;i--)r[i]=(i*t+(n-i)*e)/n;return r},numeric.getBlock=function(e,t,n){function i(e,s){var a,o=t[s],c=n[s]-o,l=Array(c);if(s===r.length-1){for(a=c;a>=0;a--)l[a]=e[a+o];return l}for(a=c;a>=0;a--)l[a]=i(e[a+o],s+1);return l}var r=numeric.dim(e);return i(e,0)},numeric.setBlock=function(e,t,n,i){function r(e,i,a){var o,c=t[a],l=n[a]-c;if(a===s.length-1)for(o=l;o>=0;o--)e[o+c]=i[o];for(o=l;o>=0;o--)r(e[o+c],i[o],a+1)}var s=numeric.dim(e);return r(e,i,0),e},numeric.getRange=function(e,t,n){var i,r,s,a,o=t.length,c=n.length,l=Array(o);for(i=o-1;-1!==i;--i)for(l[i]=Array(c),s=l[i],a=e[t[i]],r=c-1;-1!==r;--r)s[r]=a[n[r]];return l},numeric.blockMatrix=function(e){var t=numeric.dim(e);if(t.length<4)return numeric.blockMatrix([e]);var n,i,r,s,a,o=t[0],c=t[1];for(n=0,i=0,r=0;o>r;++r)n+=e[r][0].length;for(s=0;c>s;++s)i+=e[0][s][0].length;var l=Array(n);for(r=0;n>r;++r)l[r]=Array(i);var u,h,d,p,f,m=0;for(r=0;o>r;++r){for(u=i,s=c-1;-1!==s;--s)for(a=e[r][s],u-=a[0].length,d=a.length-1;-1!==d;--d)for(f=a[d],h=l[m+d],p=f.length-1;-1!==p;--p)h[u+p]=f[p];m+=e[r][0].length}return l},numeric.tensor=function(e,t){if("number"==typeof e||"number"==typeof t)return numeric.mul(e,t);var n=numeric.dim(e),i=numeric.dim(t);if(1!==n.length||1!==i.length)throw new Error("numeric: tensor product is only defined for vectors");var r,s,a,o,c=n[0],l=i[0],u=Array(c);for(s=c-1;s>=0;s--){for(r=Array(l),o=e[s],a=l-1;a>=3;--a)r[a]=o*t[a],--a,r[a]=o*t[a],--a,r[a]=o*t[a],--a,r[a]=o*t[a];for(;a>=0;)r[a]=o*t[a],--a;u[s]=r}return u},numeric.T=function(e,t){this.x=e,this.y=t},numeric.t=function(e,t){return new numeric.T(e,t)},numeric.Tbinop=function(e,t,n,i,r){numeric.indexOf;if("string"!=typeof r){var s;r="";for(s in numeric)numeric.hasOwnProperty(s)&&(e.indexOf(s)>=0||t.indexOf(s)>=0||n.indexOf(s)>=0||i.indexOf(s)>=0)&&s.length>1&&(r+="var "+s+" = numeric."+s+";\n")}return numeric.compile(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+r+"\nif(x.y) {  if(y.y) {    return new numeric.T("+i+");\n  }\n  return new numeric.T("+n+");\n}\nif(y.y) {\n  return new numeric.T("+t+");\n}\nreturn new numeric.T("+e+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,t=numeric.div;if(this.y){var n=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(t(this.x,n),t(numeric.neg(this.y),n))}return new T(t(1,this.x))},numeric.T.prototype.div=function a(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var a=numeric.div;return this.y?new numeric.T(a(this.x,e.x),a(this.y,e.x)):new numeric.T(a(this.x,e.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),e(n)):new numeric.T(e(t))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),numeric.negtranspose(n)):new numeric.T(e(t))},numeric.Tunop=function(e,t,n){return"string"!=typeof n&&(n=""),numeric.compile("var x = this;\n"+n+"\nif(x.y) {  "+t+"\n}\n"+e+"\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex);","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex));","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x));","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x));","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if("undefined"==typeof e.y)return new numeric.T(numeric.inv(e.x));var t,n,i,r,s,a,o,c,l,u,h,t,n,i,d,p,f,m,g,v,y,b=e.x.length,_=numeric.identity(b),x=numeric.rep([b,b],0),w=numeric.clone(e.x),S=numeric.clone(e.y);for(t=0;b>t;t++){for(f=w[t][t],m=S[t][t],d=f*f+m*m,i=t,n=t+1;b>n;n++)f=w[n][t],m=S[n][t],p=f*f+m*m,p>d&&(i=n,d=p);for(i!==t&&(y=w[t],w[t]=w[i],w[i]=y,y=S[t],S[t]=S[i],S[i]=y,y=_[t],_[t]=_[i],_[i]=y,y=x[t],x[t]=x[i],x[i]=y),r=w[t],s=S[t],c=_[t],l=x[t],f=r[t],m=s[t],n=t+1;b>n;n++)g=r[n],v=s[n],r[n]=(g*f+v*m)/d,s[n]=(v*f-g*m)/d;for(n=0;b>n;n++)g=c[n],v=l[n],c[n]=(g*f+v*m)/d,l[n]=(v*f-g*m)/d;for(n=t+1;b>n;n++){for(a=w[n],o=S[n],u=_[n],h=x[n],f=a[t],m=o[t],i=t+1;b>i;i++)g=r[i],v=s[i],a[i]-=g*f-v*m,
o[i]-=v*f+g*m;for(i=0;b>i;i++)g=c[i],v=l[i],u[i]-=g*f-v*m,h[i]-=v*f+g*m}}for(t=b-1;t>0;t--)for(c=_[t],l=x[t],n=t-1;n>=0;n--)for(u=_[n],h=x[n],f=w[n][t],m=S[n][t],i=b-1;i>=0;i--)g=c[i],v=l[i],u[i]-=f*g-m*v,h[i]-=f*v+m*g;return new numeric.T(_,x)},numeric.T.prototype.get=function(e){var t,n=this.x,i=this.y,r=0,s=e.length;if(i){for(;s>r;)t=e[r],n=n[t],i=i[t],r++;return new numeric.T(n,i)}for(;s>r;)t=e[r],n=n[t],r++;return new numeric.T(n)},numeric.T.prototype.set=function(e,t){var n,i=this.x,r=this.y,s=0,a=e.length,o=t.x,c=t.y;if(0===a)return c?this.y=c:r&&(this.y=void 0),this.x=i,this;if(c){for(r||(r=numeric.rep(numeric.dim(i),0),this.y=r);a-1>s;)n=e[s],i=i[n],r=r[n],s++;return n=e[s],i[n]=o,r[n]=c,this}if(r){for(;a-1>s;)n=e[s],i=i[n],r=r[n],s++;return n=e[s],i[n]=o,o instanceof Array?r[n]=numeric.rep(numeric.dim(o),0):r[n]=0,this}for(;a-1>s;)n=e[s],i=i[n],s++;return n=e[s],i[n]=o,this},numeric.T.prototype.getRows=function(e,t){var n,i,r=t-e+1,s=Array(r),a=this.x,o=this.y;for(n=e;t>=n;n++)s[n-e]=a[n];if(o){for(i=Array(r),n=e;t>=n;n++)i[n-e]=o[n];return new numeric.T(s,i)}return new numeric.T(s)},numeric.T.prototype.setRows=function(e,t,n){var i,r=this.x,s=this.y,a=n.x,o=n.y;for(i=e;t>=i;i++)r[i]=a[i-e];if(o)for(s||(s=numeric.rep(numeric.dim(r),0),this.y=s),i=e;t>=i;i++)s[i]=o[i-e];else if(s)for(i=e;t>=i;i++)s[i]=numeric.rep([a[i-e].length],0);return this},numeric.T.prototype.getRow=function(e){var t=this.x,n=this.y;return n?new numeric.T(t[e],n[e]):new numeric.T(t[e])},numeric.T.prototype.setRow=function(e,t){var n=this.x,i=this.y,r=t.x,s=t.y;return n[e]=r,s?(i||(i=numeric.rep(numeric.dim(n),0),this.y=i),i[e]=s):i&&(i=numeric.rep([r.length],0)),this},numeric.T.prototype.getBlock=function(e,t){var n=this.x,i=this.y,r=numeric.getBlock;return i?new numeric.T(r(n,e,t),r(i,e,t)):new numeric.T(r(n,e,t))},numeric.T.prototype.setBlock=function(e,t,n){n instanceof numeric.T||(n=new numeric.T(n));var i=this.x,r=this.y,s=numeric.setBlock,a=n.x,o=n.y;return o?(r||(this.y=numeric.rep(numeric.dim(this),0),r=this.y),s(i,e,t,a),s(r,e,t,o),this):(s(i,e,t,a),void(r&&s(r,e,t,numeric.rep(numeric.dim(a),0))))},numeric.T.rep=function(e,t){var n=numeric.T;t instanceof n||(t=new n(t));var i=t.x,r=t.y,s=numeric.rep;return r?new n(s(e,i),s(e,r)):new n(s(e,i))},numeric.T.diag=function o(e){e instanceof numeric.T||(e=new numeric.T(e));var t=e.x,n=e.y,o=numeric.diag;return n?new numeric.T(o(t),o(n)):new numeric.T(o(t))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,t=this.x,n=this.y;return n?new e.T(e.getDiag(t),e.getDiag(n)):new e.T(e.getDiag(t))},numeric.house=function(e){var t=numeric.clone(e),n=e[0]>=0?1:-1,i=n*numeric.norm2(e);t[0]+=i;var r=numeric.norm2(t);if(0===r)throw new Error("eig: internal error");return numeric.div(t,r)},numeric.toUpperHessenberg=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var n,i,r,s,a,o,c,l,u,h,d=t[0],p=numeric.clone(e),f=numeric.identity(d);for(i=0;d-2>i;i++){for(s=Array(d-i-1),n=i+1;d>n;n++)s[n-i-1]=p[n][i];if(numeric.norm2(s)>0){for(a=numeric.house(s),o=numeric.getBlock(p,[i+1,i],[d-1,d-1]),c=numeric.tensor(a,numeric.dot(a,o)),n=i+1;d>n;n++)for(l=p[n],u=c[n-i-1],r=i;d>r;r++)l[r]-=2*u[r-i];for(o=numeric.getBlock(p,[0,i+1],[d-1,d-1]),c=numeric.tensor(numeric.dot(o,a),a),n=0;d>n;n++)for(l=p[n],u=c[n],r=i+1;d>r;r++)l[r]-=2*u[r-i-1];for(o=Array(d-i-1),n=i+1;d>n;n++)o[n-i-1]=f[n];for(c=numeric.tensor(a,numeric.dot(a,o)),n=i+1;d>n;n++)for(h=f[n],u=c[n-i-1],r=0;d>r;r++)h[r]-=2*u[r]}}return{H:p,Q:f}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(e,t){"undefined"==typeof t&&(t=1e4),e=numeric.clone(e);var n,i,r,s,a,o,c,l,u,h,d,p,f,m,g,v,y,b,_=(numeric.clone(e),numeric.dim(e)),x=_[0],w=numeric.identity(x);if(3>x)return{Q:w,B:[[0,x-1]]};var S=numeric.epsilon;for(b=0;t>b;b++){for(v=0;x-1>v;v++)if(Math.abs(e[v+1][v])<S*(Math.abs(e[v][v])+Math.abs(e[v+1][v+1]))){var k=numeric.QRFrancis(numeric.getBlock(e,[0,0],[v,v]),t),E=numeric.QRFrancis(numeric.getBlock(e,[v+1,v+1],[x-1,x-1]),t);for(p=Array(v+1),g=0;v>=g;g++)p[g]=w[g];for(f=numeric.dot(k.Q,p),g=0;v>=g;g++)w[g]=f[g];for(p=Array(x-v-1),g=v+1;x>g;g++)p[g-v-1]=w[g];for(f=numeric.dot(E.Q,p),g=v+1;x>g;g++)w[g]=f[g-v-1];return{Q:w,B:k.B.concat(numeric.add(E.B,v+1))}}if(r=e[x-2][x-2],s=e[x-2][x-1],a=e[x-1][x-2],o=e[x-1][x-1],l=r+o,c=r*o-s*a,u=numeric.getBlock(e,[0,0],[2,2]),l*l>=4*c){var T,C;T=.5*(l+Math.sqrt(l*l-4*c)),C=.5*(l-Math.sqrt(l*l-4*c)),u=numeric.add(numeric.sub(numeric.dot(u,u),numeric.mul(u,T+C)),numeric.diag(numeric.rep([3],T*C)))}else u=numeric.add(numeric.sub(numeric.dot(u,u),numeric.mul(u,l)),numeric.diag(numeric.rep([3],c)));for(n=[u[0][0],u[1][0],u[2][0]],i=numeric.house(n),p=[e[0],e[1],e[2]],f=numeric.tensor(i,numeric.dot(i,p)),g=0;3>g;g++)for(d=e[g],m=f[g],y=0;x>y;y++)d[y]-=2*m[y];for(p=numeric.getBlock(e,[0,0],[x-1,2]),f=numeric.tensor(numeric.dot(p,i),i),g=0;x>g;g++)for(d=e[g],m=f[g],y=0;3>y;y++)d[y]-=2*m[y];for(p=[w[0],w[1],w[2]],f=numeric.tensor(i,numeric.dot(i,p)),g=0;3>g;g++)for(h=w[g],m=f[g],y=0;x>y;y++)h[y]-=2*m[y];var M;for(v=0;x-2>v;v++){for(y=v;v+1>=y;y++)if(Math.abs(e[y+1][y])<S*(Math.abs(e[y][y])+Math.abs(e[y+1][y+1]))){var k=numeric.QRFrancis(numeric.getBlock(e,[0,0],[y,y]),t),E=numeric.QRFrancis(numeric.getBlock(e,[y+1,y+1],[x-1,x-1]),t);for(p=Array(y+1),g=0;y>=g;g++)p[g]=w[g];for(f=numeric.dot(k.Q,p),g=0;y>=g;g++)w[g]=f[g];for(p=Array(x-y-1),g=y+1;x>g;g++)p[g-y-1]=w[g];for(f=numeric.dot(E.Q,p),g=y+1;x>g;g++)w[g]=f[g-y-1];return{Q:w,B:k.B.concat(numeric.add(E.B,y+1))}}for(M=Math.min(x-1,v+3),n=Array(M-v),g=v+1;M>=g;g++)n[g-v-1]=e[g][v];for(i=numeric.house(n),p=numeric.getBlock(e,[v+1,v],[M,x-1]),f=numeric.tensor(i,numeric.dot(i,p)),g=v+1;M>=g;g++)for(d=e[g],m=f[g-v-1],y=v;x>y;y++)d[y]-=2*m[y-v];for(p=numeric.getBlock(e,[0,v+1],[x-1,M]),f=numeric.tensor(numeric.dot(p,i),i),g=0;x>g;g++)for(d=e[g],m=f[g],y=v+1;M>=y;y++)d[y]-=2*m[y-v-1];for(p=Array(M-v),g=v+1;M>=g;g++)p[g-v-1]=w[g];for(f=numeric.tensor(i,numeric.dot(i,p)),g=v+1;M>=g;g++)for(h=w[g],m=f[g-v-1],y=0;x>y;y++)h[y]-=2*m[y]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,t){var n,i,r,s,a,o,c,l,u,h,d,p,f,m,g,v,y,b=numeric.toUpperHessenberg(e),_=numeric.QRFrancis(b.H,t),x=numeric.T,w=e.length,S=_.B,k=numeric.dot(_.Q,numeric.dot(b.H,numeric.transpose(_.Q))),E=new x(numeric.dot(_.Q,b.Q)),T=S.length,C=Math.sqrt;for(i=0;T>i;i++)if(n=S[i][0],n===S[i][1]);else{if(s=n+1,a=k[n][n],o=k[n][s],c=k[s][n],l=k[s][s],0===o&&0===c)continue;u=-a-l,h=a*l-o*c,d=u*u-4*h,d>=0?(p=0>u?-.5*(u-C(d)):-.5*(u+C(d)),v=(a-p)*(a-p)+o*o,y=c*c+(l-p)*(l-p),v>y?(v=C(v),m=(a-p)/v,g=o/v):(y=C(y),m=c/y,g=(l-p)/y),r=new x([[g,-m],[m,g]]),E.setRows(n,s,r.dot(E.getRows(n,s)))):(p=-.5*u,f=.5*C(-d),v=(a-p)*(a-p)+o*o,y=c*c+(l-p)*(l-p),v>y?(v=C(v+f*f),m=(a-p)/v,g=o/v,p=0,f/=v):(y=C(y+f*f),m=c/y,g=(l-p)/y,p=f/y,f=0),r=new x([[g,-m],[m,g]],[[p,f],[f,-p]]),E.setRows(n,s,r.dot(E.getRows(n,s))))}var M=E.dot(e).dot(E.transjugate()),w=e.length,P=numeric.T.identity(w);for(s=0;w>s;s++)if(s>0)for(i=s-1;i>=0;i--){var A=M.get([i,i]),I=M.get([s,s]);numeric.neq(A.x,I.x)||numeric.neq(A.y,I.y)?(p=M.getRow(i).getBlock([i],[s-1]),f=P.getRow(s).getBlock([i],[s-1]),P.set([s,i],M.get([i,s]).neg().sub(p.dot(f)).div(A.sub(I)))):P.setRow(s,P.getRow(i))}for(s=0;w>s;s++)p=P.getRow(s),P.setRow(s,p.div(p.norm2()));return P=P.transpose(),P=E.transjugate().dot(P),{lambda:M.getDiag(),E:P}},numeric.ccsSparse=function(e){var t,n,i,r,s=e.length,a=[];for(i=s-1;-1!==i;--i){n=e[i];for(r in n){for(r=parseInt(r);r>=a.length;)a[a.length]=0;0!==n[r]&&a[r]++}}var t=a.length,o=Array(t+1);for(o[0]=0,i=0;t>i;++i)o[i+1]=o[i]+a[i];var c=Array(o[t]),l=Array(o[t]);for(i=s-1;-1!==i;--i){n=e[i];for(r in n)0!==n[r]&&(a[r]--,c[o[r]+a[r]]=i,l[o[r]+a[r]]=n[r])}return[o,c,l]},numeric.ccsFull=function(e){var t,n,i,r,s=e[0],a=e[1],o=e[2],c=numeric.ccsDim(e),l=c[0],u=c[1],h=numeric.rep([l,u],0);for(t=0;u>t;t++)for(i=s[t],r=s[t+1],n=i;r>n;++n)h[a[n]][t]=o[n];return h},numeric.ccsTSolve=function(e,t,n,i,r){function s(e){var t;if(0===n[e]){for(n[e]=1,t=a[e];t<a[e+1];++t)s(o[t]);r[h]=e,++h}}var a=e[0],o=e[1],c=e[2],l=a.length-1,u=Math.max,h=0;"undefined"==typeof i&&(n=numeric.rep([l],0)),"undefined"==typeof i&&(i=numeric.linspace(0,n.length-1)),"undefined"==typeof r&&(r=[]);var d,p,f,m,g,v,y;for(d=i.length-1;-1!==d;--d)s(i[d]);for(r.length=h,d=r.length-1;-1!==d;--d)n[r[d]]=0;for(d=i.length-1;-1!==d;--d)p=i[d],n[p]=t[p];for(d=r.length-1;-1!==d;--d){for(p=r[d],f=a[p],m=u(a[p+1],f),g=f;g!==m;++g)if(o[g]===p){n[p]/=c[g];break}for(y=n[p],g=f;g!==m;++g)v=o[g],v!==p&&(n[v]-=y*c[g])}return n},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,t,n,i,r,s){var a,o,c,l=0,u=r.length,h=this.k,d=this.k1,p=this.j;if(0===i[e])for(i[e]=1,p[0]=e,h[0]=o=t[e],d[0]=c=t[e+1];;)if(o>=c){if(r[u]=p[l],0===l)return;++u,--l,o=h[l],c=d[l]}else a=s[n[o]],0===i[a]?(i[a]=1,h[l]=o,++l,p[l]=a,o=t[a],d[l]=c=t[a+1]):++o},numeric.ccsLPSolve=function(e,t,n,i,r,s,a){var o,c,l,u,h,d,p,f,m,g=e[0],v=e[1],y=e[2],b=(g.length-1,t[0]),_=t[1],x=t[2];for(c=b[r],l=b[r+1],i.length=0,o=c;l>o;++o)a.dfs(s[_[o]],g,v,n,i,s);for(o=i.length-1;-1!==o;--o)n[i[o]]=0;for(o=c;o!==l;++o)u=s[_[o]],n[u]=x[o];for(o=i.length-1;-1!==o;--o){for(u=i[o],h=g[u],d=g[u+1],p=h;d>p;++p)if(s[v[p]]===u){n[u]/=y[p];break}for(m=n[u],p=h;d>p;++p)f=s[v[p]],f!==u&&(n[f]-=m*y[p])}return n},numeric.ccsLUP1=function(e,t){var n,i,r,s,a,o,c,l=e[0].length-1,u=[numeric.rep([l+1],0),[],[]],h=[numeric.rep([l+1],0),[],[]],d=u[0],p=u[1],f=u[2],m=h[0],g=h[1],v=h[2],y=numeric.rep([l],0),b=numeric.rep([l],0),_=numeric.ccsLPSolve,x=(Math.max,Math.abs),w=numeric.linspace(0,l-1),S=numeric.linspace(0,l-1),k=new numeric.ccsDFS(l);for("undefined"==typeof t&&(t=1),n=0;l>n;++n){for(_(u,e,y,b,n,S,k),s=-1,a=-1,i=b.length-1;-1!==i;--i)r=b[i],n>=r||(o=x(y[r]),o>s&&(a=r,s=o));for(x(y[n])<t*s&&(i=w[n],s=w[a],w[n]=s,S[s]=n,w[a]=i,S[i]=a,s=y[n],y[n]=y[a],y[a]=s),s=d[n],a=m[n],c=y[n],p[s]=w[n],f[s]=1,++s,i=b.length-1;-1!==i;--i)r=b[i],o=y[r],b[i]=0,y[r]=0,n>=r?(g[a]=r,v[a]=o,++a):(p[s]=w[r],f[s]=o/c,++s);d[n+1]=s,m[n+1]=a}for(i=p.length-1;-1!==i;--i)p[i]=S[p[i]];return{L:u,U:h,P:w,Pinv:S}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,t,n,i,r,s,a){var o,c,l,u=0,h=r.length,d=this.k,p=this.k1,f=this.j;if(0===i[e])for(i[e]=1,f[0]=e,d[0]=c=t[s[e]],p[0]=l=t[s[e]+1];;){if(isNaN(c))throw new Error("Ow!");if(c>=l){if(r[h]=s[f[u]],0===u)return;++h,--u,c=d[u],l=p[u]}else o=n[c],0===i[o]?(i[o]=1,d[u]=c,++u,f[u]=o,o=s[o],c=t[o],p[u]=l=t[o+1]):++c}},numeric.ccsLPSolve0=function(e,t,n,i,r,s,a,o){var c,l,u,h,d,p,f,m,g,v=e[0],y=e[1],b=e[2],_=(v.length-1,t[0]),x=t[1],w=t[2];for(l=_[r],u=_[r+1],i.length=0,c=l;u>c;++c)o.dfs(x[c],v,y,n,i,s,a);for(c=i.length-1;-1!==c;--c)h=i[c],n[a[h]]=0;for(c=l;c!==u;++c)h=x[c],n[h]=w[c];for(c=i.length-1;-1!==c;--c){for(h=i[c],m=a[h],d=v[h],p=v[h+1],f=d;p>f;++f)if(y[f]===m){n[m]/=b[f];break}for(g=n[m],f=d;p>f;++f)n[y[f]]-=g*b[f];n[m]=g}},numeric.ccsLUP0=function(e,t){var n,i,r,s,a,o,c,l=e[0].length-1,u=[numeric.rep([l+1],0),[],[]],h=[numeric.rep([l+1],0),[],[]],d=u[0],p=u[1],f=u[2],m=h[0],g=h[1],v=h[2],y=numeric.rep([l],0),b=numeric.rep([l],0),_=numeric.ccsLPSolve0,x=(Math.max,Math.abs),w=numeric.linspace(0,l-1),S=numeric.linspace(0,l-1),k=new numeric.ccsDFS0(l);for("undefined"==typeof t&&(t=1),n=0;l>n;++n){for(_(u,e,y,b,n,S,w,k),s=-1,a=-1,i=b.length-1;-1!==i;--i)r=b[i],n>=r||(o=x(y[w[r]]),o>s&&(a=r,s=o));for(x(y[w[n]])<t*s&&(i=w[n],s=w[a],w[n]=s,S[s]=n,w[a]=i,S[i]=a),s=d[n],a=m[n],c=y[w[n]],p[s]=w[n],f[s]=1,++s,i=b.length-1;-1!==i;--i)r=b[i],o=y[w[r]],b[i]=0,y[w[r]]=0,n>=r?(g[a]=r,v[a]=o,++a):(p[s]=w[r],f[s]=o/c,++s);d[n+1]=s,m[n+1]=a}for(i=p.length-1;-1!==i;--i)p[i]=S[p[i]];return{L:u,U:h,P:w,Pinv:S}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,t,n){var i=numeric.ccsDim(e),r=i[0],s=i[1];"undefined"==typeof t?t=numeric.linspace(0,r-1):"number"==typeof t&&(t=[t]),"undefined"==typeof n?n=numeric.linspace(0,s-1):"number"==typeof n&&(n=[n]);var a,o,c,l,u,h=t.length,d=n.length,p=numeric.rep([s],0),f=[],m=[],g=[p,f,m],v=e[0],y=e[1],b=e[2],_=numeric.rep([r],0),x=0,w=numeric.rep([r],0);for(o=0;d>o;++o){l=n[o];var S=v[l],k=v[l+1];for(a=S;k>a;++a)c=y[a],w[c]=1,_[c]=b[a];for(a=0;h>a;++a)u=t[a],w[u]&&(f[x]=a,m[x]=_[t[a]],++x);for(a=S;k>a;++a)c=y[a],w[c]=0;p[o+1]=x}return g},numeric.ccsDot=function(e,t){var n,i,r,s,a,o,c,l,u,h,d,p=e[0],f=e[1],m=e[2],g=t[0],v=t[1],y=t[2],b=numeric.ccsDim(e),_=numeric.ccsDim(t),x=b[0],w=(b[1],_[1]),S=numeric.rep([x],0),k=numeric.rep([x],0),E=Array(x),T=numeric.rep([w],0),C=[],M=[],P=[T,C,M];for(r=0;r!==w;++r){for(s=g[r],a=g[r+1],u=0,i=s;a>i;++i)for(h=v[i],d=y[i],o=p[h],c=p[h+1],n=o;c>n;++n)l=f[n],0===k[l]&&(E[u]=l,k[l]=1,u+=1),S[l]=S[l]+m[n]*d;for(s=T[r],a=s+u,T[r+1]=a,i=u-1;-1!==i;--i)d=s+i,n=E[i],C[d]=n,M[d]=S[n],k[n]=0,S[n]=0;T[r+1]=T[r]+u}return P},numeric.ccsLUPSolve=function(e,t){var n=e.L,i=e.U,r=(e.P,t[0]),s=!1;"object"!=typeof r&&(t=[[0,t.length],numeric.linspace(0,t.length-1),t],r=t[0],s=!0);var a,o,c,l,u,h,d=t[1],p=t[2],f=n[0].length-1,m=r.length-1,g=numeric.rep([f],0),v=Array(f),y=numeric.rep([f],0),b=Array(f),_=numeric.rep([m+1],0),x=[],w=[],S=numeric.ccsTSolve,k=0;for(a=0;m>a;++a){for(u=0,c=r[a],l=r[a+1],o=c;l>o;++o)h=e.Pinv[d[o]],b[u]=h,y[h]=p[o],++u;for(b.length=u,S(n,y,g,b,v),o=b.length-1;-1!==o;--o)y[b[o]]=0;if(S(i,g,y,v,b),s)return y;for(o=v.length-1;-1!==o;--o)g[v[o]]=0;for(o=b.length-1;-1!==o;--o)h=b[o],x[k]=h,w[k]=y[h],y[h]=0,++k;_[a+1]=k}return[_,x,w]},numeric.ccsbinop=function(e,t){return"undefined"==typeof t&&(t=""),numeric.compile("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+t+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+e+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=numeric.compile("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(e){var t,n=e[0],i=e[1],r=e[2],s=numeric.sup(i)+1,a=n.length,o=numeric.rep([s],0),c=Array(a),l=Array(a),u=numeric.rep([s],0);for(t=0;a>t;++t)u[i[t]]++;for(t=0;s>t;++t)o[t+1]=o[t]+u[t];var h,d,p=o.slice(0);for(t=0;a>t;++t)d=i[t],h=p[d],c[h]=n[t],l[h]=r[t],p[d]=p[d]+1;return[o,c,l]},numeric.ccsGather=function(e){var t,n,i,r,s,a=e[0],o=e[1],c=e[2],l=a.length-1,u=o.length,h=Array(u),d=Array(u),p=Array(u);for(s=0,t=0;l>t;++t)for(i=a[t],r=a[t+1],n=i;n!==r;++n)d[s]=t,h[s]=o[n],p[s]=c[n],++s;return[h,d,p]},numeric.sdim=function c(e,t,n){if("undefined"==typeof t&&(t=[]),"object"!=typeof e)return t;"undefined"==typeof n&&(n=0),n in t||(t[n]=0),e.length>t[n]&&(t[n]=e.length);var i;for(i in e)e.hasOwnProperty(i)&&c(e[i],t,n+1);return t},numeric.sclone=function l(e,t,n){"undefined"==typeof t&&(t=0),"undefined"==typeof n&&(n=numeric.sdim(e).length);var i,r=Array(e.length);if(t===n-1){for(i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);return r}for(i in e)e.hasOwnProperty(i)&&(r[i]=l(e[i],t+1,n));return r},numeric.sdiag=function(e){var t,n,i=e.length,r=Array(i);for(t=i-1;t>=1;t-=2)n=t-1,r[t]=[],r[t][t]=e[t],r[n]=[],r[n][n]=e[n];return 0===t&&(r[0]=[],r[0][0]=e[t]),r},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var t,n,i,r=[];e.length;for(t in e)if(e.hasOwnProperty(t)){i=e[t];for(n in i)i.hasOwnProperty(n)&&("object"!=typeof r[n]&&(r[n]=[]),r[n][t]=i[n])}return r},numeric.sLUP=function(e,t){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,t){var n,i,r,s,a,o,c,l=e.length,u=(t.length,numeric.stranspose(t)),h=u.length,d=Array(l);for(r=l-1;r>=0;r--){for(c=[],n=e[r],a=h-1;a>=0;a--){o=0,i=u[a];for(s in n)n.hasOwnProperty(s)&&s in i&&(o+=n[s]*i[s]);o&&(c[a]=o)}d[r]=c}return d},numeric.sdotMV=function(e,t){var n,i,r,s,a=e.length,o=Array(a);for(i=a-1;i>=0;i--){n=e[i],s=0;for(r in n)n.hasOwnProperty(r)&&t[r]&&(s+=n[r]*t[r]);s&&(o[i]=s)}return o},numeric.sdotVM=function(e,t){var n,i,r,s,a=[];for(n in e)if(e.hasOwnProperty(n)){r=t[n],s=e[n];for(i in r)r.hasOwnProperty(i)&&(a[i]||(a[i]=0),a[i]+=s*r[i])}return a},numeric.sdotVV=function(e,t){var n,i=0;for(n in e)e[n]&&t[n]&&(i+=e[n]*t[n]);return i},numeric.sdot=function(e,t){var n=numeric.sdim(e).length,i=numeric.sdim(t).length,r=1e3*n+i;switch(r){case 0:return e*t;case 1001:return numeric.sdotVV(e,t);case 2001:return numeric.sdotMV(e,t);case 1002:return numeric.sdotVM(e,t);case 2002:return numeric.sdotMM(e,t);default:throw new Error("numeric.sdot not implemented for tensors of order "+n+" and "+i)}},numeric.sscatter=function(e){var t,n,i,r,s=e[0].length,a=e.length,o=[];for(n=s-1;n>=0;--n)if(e[a-1][n]){for(r=o,i=0;a-2>i;i++)t=e[i][n],r[t]||(r[t]=[]),r=r[t];r[e[i][n]]=e[i+1][n]}return o},numeric.sgather=function u(e,t,n){"undefined"==typeof t&&(t=[]),"undefined"==typeof n&&(n=[]);var i,r,s;i=n.length;for(r in e)if(e.hasOwnProperty(r))if(n[i]=parseInt(r),s=e[r],"number"==typeof s){if(s){if(0===t.length)for(r=i+1;r>=0;--r)t[r]=[];for(r=i;r>=0;--r)t[r].push(n[r]);t[i+1].push(s)}}else u(s,t,n);return n.length>i&&n.pop(),t},numeric.cLU=function(e){var t,n,i,r,s,a,o=e[0],c=e[1],l=e[2],u=o.length,h=0;for(t=0;u>t;t++)o[t]>h&&(h=o[t]);h++;var d,p,f,m=Array(h),g=Array(h),v=numeric.rep([h],1/0),y=numeric.rep([h],-(1/0));for(i=0;u>i;i++)t=o[i],n=c[i],n<v[t]&&(v[t]=n),n>y[t]&&(y[t]=n);for(t=0;h-1>t;t++)y[t]>y[t+1]&&(y[t+1]=y[t]);for(t=h-1;t>=1;t--)v[t]<v[t-1]&&(v[t-1]=v[t]);var b=0,_=0;for(t=0;h>t;t++)g[t]=numeric.rep([y[t]-v[t]+1],0),m[t]=numeric.rep([t-v[t]],0),b+=t-v[t]+1,_+=y[t]-t+1;for(i=0;u>i;i++)t=o[i],g[t][c[i]-v[t]]=l[i];for(t=0;h-1>t;t++)for(r=t-v[t],d=g[t],n=t+1;v[n]<=t&&h>n;n++)if(s=t-v[n],a=y[t]-t,p=g[n],f=p[s]/d[r]){for(i=1;a>=i;i++)p[i+s]-=f*d[i+r];m[n][t-v[n]]=f}var u,x,w,d=[],p=[],S=[],k=[],E=[],T=[];for(u=0,x=0,t=0;h>t;t++){for(r=v[t],s=y[t],w=g[t],n=t;s>=n;n++)w[n-r]&&(d[u]=t,p[u]=n,S[u]=w[n-r],u++);for(w=m[t],n=r;t>n;n++)w[n-r]&&(k[x]=t,E[x]=n,T[x]=w[n-r],x++);k[x]=t,E[x]=t,T[x]=1,x++}return{U:[d,p,S],L:[k,E,T]}},numeric.cLUsolve=function(e,t){var n,i,r=e.L,s=e.U,a=numeric.clone(t),o=r[0],c=r[1],l=r[2],u=s[0],h=s[1],d=s[2],p=u.length,f=(o.length,a.length);for(i=0,n=0;f>n;n++){for(;c[i]<n;)a[n]-=l[i]*a[c[i]],i++;i++}for(i=p-1,n=f-1;n>=0;n--){for(;h[i]>n;)a[n]-=d[i]*a[h[i]],i--;a[n]/=d[i],i--}return a},numeric.cgrid=function(e,t){"number"==typeof e&&(e=[e,e]);var n,i,r,s=numeric.rep(e,-1);if("function"!=typeof t)switch(t){case"L":t=function(t,n){return t>=e[0]/2||n<e[1]/2};break;default:t=function(e,t){return!0}}for(r=0,n=1;n<e[0]-1;n++)for(i=1;i<e[1]-1;i++)t(n,i)&&(s[n][i]=r,r++);return s},numeric.cdelsq=function(e){var t,n,i,r,s,a=[[-1,0],[0,-1],[0,1],[1,0]],o=numeric.dim(e),c=o[0],l=o[1],u=[],h=[],d=[];for(t=1;c-1>t;t++)for(n=1;l-1>n;n++)if(!(e[t][n]<0)){for(i=0;4>i;i++)r=t+a[i][0],s=n+a[i][1],e[r][s]<0||(u.push(e[t][n]),h.push(e[r][s]),d.push(-1));u.push(e[t][n]),h.push(e[t][n]),d.push(4)}return[u,h,d]},numeric.cdotMV=function(e,t){var n,i,r,s=e[0],a=e[1],o=e[2],c=s.length;for(r=0,i=0;c>i;i++)s[i]>r&&(r=s[i]);for(r++,n=numeric.rep([r],0),i=0;c>i;i++)n[s[i]]+=o[i]*t[a[i]];return n},numeric.Spline=function(e,t,n,i,r){this.x=e,this.yl=t,this.yr=n,this.kl=i,this.kr=r},numeric.Spline.prototype._at=function(e,t){var e,n,i,r,s=this.x,a=this.yl,o=this.yr,c=this.kl,l=this.kr,u=numeric.add,h=numeric.sub,d=numeric.mul;n=h(d(c[t],s[t+1]-s[t]),h(o[t+1],a[t])),i=u(d(l[t+1],s[t]-s[t+1]),h(o[t+1],a[t])),r=(e-s[t])/(s[t+1]-s[t]);var p=r*(1-r);return u(u(u(d(1-r,a[t]),d(r,o[t+1])),d(n,p*(1-r))),d(i,p*r))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var t,n,i,r=this.x,s=r.length,a=Math.floor;for(t=0,n=s-1;n-t>1;)i=a((t+n)/2),r[i]<=e?t=i:n=i;return this._at(e,t)}var o,s=e.length,c=Array(s);for(o=s-1;-1!==o;--o)c[o]=this.at(e[o]);return c},numeric.Spline.prototype.diff=function(){var e,t,n,i=this.x,r=this.yl,s=this.yr,a=this.kl,o=this.kr,c=r.length,l=a,u=o,h=Array(c),d=Array(c),p=numeric.add,f=numeric.mul,m=numeric.div,g=numeric.sub;for(e=c-1;-1!==e;--e)t=i[e+1]-i[e],n=g(s[e+1],r[e]),h[e]=m(p(f(n,6),f(a[e],-4*t),f(o[e+1],-2*t)),t*t),d[e+1]=m(p(f(n,-6),f(a[e],2*t),f(o[e+1],4*t)),t*t);return new numeric.Spline(i,l,u,h,d)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var t=[],n=this.x,i=this.yl,r=this.yr,s=this.kl,a=this.kr;"number"==typeof i[0]&&(i=[i],r=[r],s=[s],a=[a]);var o,c,l,u,h,d,p,f,m,g,v,y,b,_,x,w,S,k,E,T,C,M,P,A,I=i.length,q=n.length-1,t=Array(I),D=Math.sqrt;for(o=0;o!==I;++o){for(u=i[o],h=r[o],d=s[o],p=a[o],f=[],c=0;c!==q;c++){for(c>0&&h[c]*u[c]<0&&f.push(n[c]),w=n[c+1]-n[c],S=n[c],v=u[c],y=h[c+1],m=d[c]/w,g=p[c+1]/w,x=e(m-g+3*(v-y))+12*g*v,b=g+3*v+2*m-3*y,_=3*(g+m+2*(v-y)),0>=x?(E=b/_,k=E>n[c]&&E<n[c+1]?[n[c],E,n[c+1]]:[n[c],n[c+1]]):(E=(b-D(x))/_,T=(b+D(x))/_,k=[n[c]],E>n[c]&&E<n[c+1]&&k.push(E),T>n[c]&&T<n[c+1]&&k.push(T),k.push(n[c+1])),M=k[0],E=this._at(M,c),l=0;l<k.length-1;l++)if(P=k[l+1],T=this._at(P,c),0!==E)if(0===T||E*T>0)M=P,E=T;else{for(var L=0;;){if(A=(E*P-T*M)/(E-T),M>=A||A>=P)break;if(C=this._at(A,c),C*T>0)P=A,T=C,-1===L&&(E*=.5),L=-1;else{if(!(C*E>0))break;M=A,E=C,1===L&&(T*=.5),L=1}}f.push(A),M=k[l+1],E=this._at(M,c)}else f.push(M),M=P,E=T;0===T&&f.push(P)}t[o]=f}return"number"==typeof this.yl[0]?t[0]:t},numeric.spline=function(e,t,n,i){var r,s=e.length,a=[],o=[],c=[],l=numeric.sub,u=numeric.mul,h=numeric.add;for(r=s-2;r>=0;r--)o[r]=e[r+1]-e[r],c[r]=l(t[r+1],t[r]);("string"==typeof n||"string"==typeof i)&&(n=i="periodic");var d=[[],[],[]];switch(typeof n){case"undefined":a[0]=u(3/(o[0]*o[0]),c[0]),d[0].push(0,0),d[1].push(0,1),d[2].push(2/o[0],1/o[0]);break;case"string":a[0]=h(u(3/(o[s-2]*o[s-2]),c[s-2]),u(3/(o[0]*o[0]),c[0])),d[0].push(0,0,0),d[1].push(s-2,0,1),d[2].push(1/o[s-2],2/o[s-2]+2/o[0],1/o[0]);break;default:a[0]=n,d[0].push(0),d[1].push(0),d[2].push(1)}for(r=1;s-1>r;r++)a[r]=h(u(3/(o[r-1]*o[r-1]),c[r-1]),u(3/(o[r]*o[r]),c[r])),d[0].push(r,r,r),d[1].push(r-1,r,r+1),d[2].push(1/o[r-1],2/o[r-1]+2/o[r],1/o[r]);switch(typeof i){case"undefined":a[s-1]=u(3/(o[s-2]*o[s-2]),c[s-2]),d[0].push(s-1,s-1),d[1].push(s-2,s-1),d[2].push(1/o[s-2],2/o[s-2]);break;case"string":d[1][d[1].length-1]=0;break;default:a[s-1]=i,d[0].push(s-1),d[1].push(s-1),d[2].push(1)}a="number"!=typeof a[0]?numeric.transpose(a):[a];var p=Array(a.length);if("string"==typeof n)for(r=p.length-1;-1!==r;--r)p[r]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(d)),a[r]),p[r][s-1]=p[r][0];else for(r=p.length-1;-1!==r;--r)p[r]=numeric.cLUsolve(numeric.cLU(d),a[r]);return p="number"==typeof t[0]?p[0]:numeric.transpose(p),new numeric.Spline(e,t,t,p,p)},numeric.fftpow2=function h(e,t){var n=e.length;if(1!==n){var i,r,s=Math.cos,a=Math.sin,o=Array(n/2),c=Array(n/2),l=Array(n/2),u=Array(n/2);for(r=n/2,i=n-1;-1!==i;--i)--r,l[r]=e[i],u[r]=t[i],--i,o[r]=e[i],c[r]=t[i];h(o,c),h(l,u),r=n/2;var d,p,f,m=-6.283185307179586/n;for(i=n-1;-1!==i;--i)--r,-1===r&&(r=n/2-1),d=m*i,p=s(d),f=a(d),e[i]=o[r]+p*l[r]-f*u[r],t[i]=c[r]+p*u[r]+f*l[r]}},numeric._ifftpow2=function d(e,t){var n=e.length;if(1!==n){var i,r,s=Math.cos,a=Math.sin,o=Array(n/2),c=Array(n/2),l=Array(n/2),u=Array(n/2);for(r=n/2,i=n-1;-1!==i;--i)--r,l[r]=e[i],u[r]=t[i],--i,o[r]=e[i],c[r]=t[i];d(o,c),d(l,u),r=n/2;var h,p,f,m=6.283185307179586/n;for(i=n-1;-1!==i;--i)--r,-1===r&&(r=n/2-1),h=m*i,p=s(h),f=a(h),e[i]=o[r]+p*l[r]-f*u[r],t[i]=c[r]+p*u[r]+f*l[r]}},numeric.ifftpow2=function(e,t){numeric._ifftpow2(e,t),numeric.diveq(e,e.length),numeric.diveq(t,t.length)},numeric.convpow2=function(e,t,n,i){numeric.fftpow2(e,t),numeric.fftpow2(n,i);var r,s,a,o,c,l=e.length;for(r=l-1;-1!==r;--r)s=e[r],o=t[r],a=n[r],c=i[r],e[r]=s*a-o*c,t[r]=s*c+o*a;numeric.ifftpow2(e,t)},numeric.T.prototype.fft=function(){var e,t,n=this.x,i=this.y,r=n.length,s=Math.log,a=s(2),o=Math.ceil(s(2*r-1)/a),c=Math.pow(2,o),l=numeric.rep([c],0),u=numeric.rep([c],0),h=Math.cos,d=Math.sin,p=-3.141592653589793/r,f=numeric.rep([c],0),m=numeric.rep([c],0);Math.floor(r/2);for(e=0;r>e;e++)f[e]=n[e];if("undefined"!=typeof i)for(e=0;r>e;e++)m[e]=i[e];for(l[0]=1,e=1;c/2>=e;e++)t=p*e*e,l[e]=h(t),u[e]=d(t),l[c-e]=h(t),u[c-e]=d(t);var g=new numeric.T(f,m),v=new numeric.T(l,u);return g=g.mul(v),numeric.convpow2(g.x,g.y,numeric.clone(v.x),numeric.neg(v.y)),g=g.mul(v),g.x.length=r,g.y.length=r,g},numeric.T.prototype.ifft=function(){var e,t,n=this.x,i=this.y,r=n.length,s=Math.log,a=s(2),o=Math.ceil(s(2*r-1)/a),c=Math.pow(2,o),l=numeric.rep([c],0),u=numeric.rep([c],0),h=Math.cos,d=Math.sin,p=3.141592653589793/r,f=numeric.rep([c],0),m=numeric.rep([c],0);Math.floor(r/2);for(e=0;r>e;e++)f[e]=n[e];if("undefined"!=typeof i)for(e=0;r>e;e++)m[e]=i[e];for(l[0]=1,e=1;c/2>=e;e++)t=p*e*e,l[e]=h(t),u[e]=d(t),l[c-e]=h(t),u[c-e]=d(t);var g=new numeric.T(f,m),v=new numeric.T(l,u);return g=g.mul(v),numeric.convpow2(g.x,g.y,numeric.clone(v.x),numeric.neg(v.y)),g=g.mul(v),g.x.length=r,g.y.length=r,g.div(r)},numeric.gradient=function(e,t){var n=t.length,i=e(t);if(isNaN(i))throw new Error("gradient: f(x) is a NaN!");var r,s,a,o,c,l,u,h,d,p,f=Math.max,m=numeric.clone(t),g=Array(n),f=(numeric.div,numeric.sub,Math.max),v=.001,y=Math.abs,b=Math.min,_=0;for(r=0;n>r;r++)for(var x=f(1e-6*i,1e-8);;){if(++_,_>20)throw new Error("Numerical gradient fails");if(m[r]=t[r]+x,s=e(m),m[r]=t[r]-x,a=e(m),m[r]=t[r],isNaN(s)||isNaN(a))x/=16;else{if(g[r]=(s-a)/(2*x),c=t[r]-x,l=t[r],u=t[r]+x,h=(s-i)/x,d=(i-a)/x,p=f(y(g[r]),y(i),y(s),y(a),y(c),y(l),y(u),1e-8),o=b(f(y(h-g[r]),y(d-g[r]),y(h-d))/p,x/p),!(o>v))break;x/=16}}return g},numeric.uncmin=function(e,t,n,i,r,s,a){var o=numeric.gradient;"undefined"==typeof a&&(a={}),"undefined"==typeof n&&(n=1e-8),"undefined"==typeof i&&(i=function(t){return o(e,t)}),"undefined"==typeof r&&(r=1e3),t=numeric.clone(t);var c,l,u=t.length,h=e(t);if(isNaN(h))throw new Error("uncmin: f(x0) is a NaN!");var d=Math.max,p=numeric.norm2;n=d(n,numeric.epsilon);var f,m,g,v,y,b,_,x,w,S,k=a.Hinv||numeric.identity(u),E=numeric.dot,T=(numeric.inv,numeric.sub),C=numeric.add,M=numeric.tensor,P=numeric.div,A=numeric.mul,I=numeric.all,q=numeric.isFinite,D=numeric.neg,L=0,O="";for(m=i(t);r>L;){if("function"==typeof s&&s(L,t,h,m,k)){O="Callback returned true";break}if(!I(q(m))){O="Gradient has Infinity or NaN";break}if(f=D(E(k,m)),!I(q(f))){O="Search direction has Infinity or NaN";break}if(S=p(f),n>S){O="Newton step smaller than tol";break}for(w=1,l=E(m,f),y=t;r>L&&!(n>w*S)&&(v=A(f,w),y=C(t,v),c=e(y),c-h>=.1*w*l||isNaN(c));)w*=.5,++L;if(n>w*S){O="Line search step size smaller than tol";break}if(L===r){O="maxit reached during line search";break}g=i(y),b=T(g,m),x=E(b,v),_=E(k,b),k=T(C(k,A((x+E(b,_))/(x*x),M(v,v))),P(C(M(_,v),M(v,_)),x)),t=y,h=c,m=g,++L}return{solution:t,f:h,gradient:m,invHessian:k,iterations:L,message:O}},numeric.Dopri=function(e,t,n,i,r,s,a){this.x=e,this.y=t,this.f=n,this.ymid=i,this.iterations=r,this.events=a,this.message=s},numeric.Dopri.prototype._at=function(e,t){function n(e){return e*e}var i,r,s,a,o,c,e,l,u,h,d,p=this,f=p.x,m=p.y,g=p.f,v=p.ymid,y=(f.length,Math.floor,.5),b=numeric.add,_=numeric.mul,x=numeric.sub;return i=f[t],r=f[t+1],a=m[t],o=m[t+1],l=r-i,s=i+y*l,c=v[t],u=x(g[t],_(a,1/(i-s)+2/(i-r))),h=x(g[t+1],_(o,1/(r-s)+2/(r-i))),d=[n(e-r)*(e-s)/n(i-r)/(i-s),n(e-i)*n(e-r)/n(i-s)/n(r-s),n(e-i)*(e-s)/n(r-i)/(r-s),(e-i)*n(e-r)*(e-s)/n(i-r)/(i-s),(e-r)*n(e-i)*(e-s)/n(i-r)/(r-s)],b(b(b(b(_(a,d[0]),_(c,d[1])),_(o,d[2])),_(u,d[3])),_(h,d[4]))},numeric.Dopri.prototype.at=function(e){var t,n,i,r=Math.floor;if("number"!=typeof e){var s=e.length,a=Array(s);for(t=s-1;-1!==t;--t)a[t]=this.at(e[t]);return a}var o=this.x;for(t=0,n=o.length-1;n-t>1;)i=r(.5*(t+n)),o[i]<=e?t=i:n=i;return this._at(e,t)},numeric.dopri=function(e,t,n,i,r,s,a){"undefined"==typeof r&&(r=1e-6),"undefined"==typeof s&&(s=1e3);var o,c,l,u,h,d,p,f,m,g,v,y,b,_=[e],x=[n],w=[i(e,n)],S=[],k=.2,E=[.075,.225],T=[44/45,-56/15,32/9],C=[19372/6561,-25360/2187,64448/6561,-212/729],M=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],P=[35/384,0,500/1113,125/192,-2187/6784,11/84],A=[.10013431883002395,0,.3918321794184259,-0.02982460176594817,.05893268337240795,-0.04497888809104361,.023904308236133973],I=[.2,.3,.8,8/9,1,1],q=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],D=0,L=(t-e)/10,O=0,N=numeric.add,F=numeric.mul,j=(Math.max,Math.min),V=Math.abs,R=numeric.norminf,$=Math.pow,B=numeric.any,G=numeric.lt,z=numeric.and,U=(numeric.sub,new numeric.Dopri(_,x,w,S,-1,""));for("function"==typeof a&&(v=a(e,n));t>e&&s>O;)if(++O,e+L>t&&(L=t-e),o=i(e+I[0]*L,N(n,F(k*L,w[D]))),c=i(e+I[1]*L,N(N(n,F(E[0]*L,w[D])),F(E[1]*L,o))),l=i(e+I[2]*L,N(N(N(n,F(T[0]*L,w[D])),F(T[1]*L,o)),F(T[2]*L,c))),u=i(e+I[3]*L,N(N(N(N(n,F(C[0]*L,w[D])),F(C[1]*L,o)),F(C[2]*L,c)),F(C[3]*L,l))),h=i(e+I[4]*L,N(N(N(N(N(n,F(M[0]*L,w[D])),F(M[1]*L,o)),F(M[2]*L,c)),F(M[3]*L,l)),F(M[4]*L,u))),m=N(N(N(N(N(n,F(w[D],L*P[0])),F(c,L*P[2])),F(l,L*P[3])),F(u,L*P[4])),F(h,L*P[5])),d=i(e+L,m),p=N(N(N(N(N(F(w[D],L*q[0]),F(c,L*q[2])),F(l,L*q[3])),F(u,L*q[4])),F(h,L*q[5])),F(d,L*q[6])),g="number"==typeof p?V(p):R(p),g>r){if(L=.2*L*$(r/g,.25),e+L===e){U.msg="Step size became too small";break}}else{if(S[D]=N(N(N(N(N(N(n,F(w[D],L*A[0])),F(c,L*A[2])),F(l,L*A[3])),F(u,L*A[4])),F(h,L*A[5])),F(d,L*A[6])),++D,_[D]=e+L,x[D]=m,w[D]=d,"function"==typeof a){var H,W,Y=e,X=e+.5*L;if(y=a(X,S[D-1]),b=z(G(v,0),G(0,y)),B(b)||(Y=X,X=e+L,v=y,y=a(X,m),b=z(G(v,0),G(0,y))),B(b)){for(var Q,K,Z=0,J=1,ee=1;;){if("number"==typeof v)W=(ee*y*Y-J*v*X)/(ee*y-J*v);else for(W=X,f=v.length-1;-1!==f;--f)v[f]<0&&y[f]>0&&(W=j(W,(ee*y[f]*Y-J*v[f]*X)/(ee*y[f]-J*v[f])));if(Y>=W||W>=X)break;H=U._at(W,D-1),K=a(W,H),Q=z(G(v,0),G(0,K)),B(Q)?(X=W,y=K,b=Q,ee=1,-1===Z?J*=.5:J=1,Z=-1):(Y=W,v=K,J=1,1===Z?ee*=.5:ee=1,Z=1)}return m=U._at(.5*(e+W),D-1),U.f[D]=i(W,H),U.x[D]=W,U.y[D]=H,U.ymid[D-1]=m,U.events=b,U.iterations=O,U}}e+=L,n=m,v=y,L=j(.8*L*$(r/g,.25),4*L)}return U.iterations=O,U},numeric.LU=function(e,t){t=t||!1;var n,i,r,s,a,o,c,l,u,h=Math.abs,d=e.length,p=d-1,f=new Array(d);for(t||(e=numeric.clone(e)),r=0;d>r;++r){for(c=r,o=e[r],u=h(o[r]),i=r+1;d>i;++i)s=h(e[i][r]),s>u&&(u=s,c=i);for(f[r]=c,c!=r&&(e[r]=e[c],e[c]=o,o=e[r]),a=o[r],n=r+1;d>n;++n)e[n][r]/=a;for(n=r+1;d>n;++n){for(l=e[n],i=r+1;p>i;++i)l[i]-=l[r]*o[i],++i,l[i]-=l[r]*o[i];i===p&&(l[i]-=l[r]*o[i])}}return{LU:e,P:f}},numeric.LUsolve=function(e,t){var n,i,r,s,a,o=e.LU,c=o.length,l=numeric.clone(t),u=e.P;for(n=c-1;-1!==n;--n)l[n]=t[n];for(n=0;c>n;++n)for(r=u[n],u[n]!==n&&(a=l[n],l[n]=l[r],l[r]=a),s=o[n],i=0;n>i;++i)l[n]-=l[i]*s[i];for(n=c-1;n>=0;--n){for(s=o[n],i=n+1;c>i;++i)l[n]-=l[i]*s[i];
l[n]/=s[n]}return l},numeric.solve=function(e,t,n){return numeric.LUsolve(numeric.LU(e,n),t)},numeric.echelonize=function(e){var t,n,i,r,s,a,o,c,l=numeric.dim(e),u=l[0],h=l[1],d=numeric.identity(u),p=Array(u),f=Math.abs,m=numeric.diveq;for(e=numeric.clone(e),t=0;u>t;++t){for(i=0,s=e[t],a=d[t],n=1;h>n;++n)f(s[i])<f(s[n])&&(i=n);for(p[t]=i,m(a,s[i]),m(s,s[i]),n=0;u>n;++n)if(n!==t){for(o=e[n],c=o[i],r=h-1;-1!==r;--r)o[r]-=s[r]*c;for(o=d[n],r=u-1;-1!==r;--r)o[r]-=a[r]*c}}return{I:d,A:e,P:p}},numeric.__solveLP=function(e,t,n,i,r,s,a){var o,c,l,u,h=numeric.sum,d=(numeric.log,numeric.mul),p=numeric.sub,f=numeric.dot,m=numeric.div,g=numeric.add,v=e.length,y=n.length,b=!1,_=0,x=1,w=(numeric.transpose(t),numeric.svd,numeric.transpose),S=(numeric.leq,Math.sqrt),k=Math.abs,E=(numeric.muleq,numeric.norminf,numeric.any,Math.min),T=numeric.all,C=numeric.gt,M=Array(v),P=Array(y),A=(numeric.rep([y],1),numeric.solve),I=p(n,f(t,s)),q=f(e,e);for(l=_;r>l;++l){var D,L;for(D=y-1;-1!==D;--D)P[D]=m(t[D],I[D]);var O=w(P);for(D=v-1;-1!==D;--D)M[D]=h(O[D]);x=.25*k(q/f(e,M));var N=100*S(q/f(M,M));for((!isFinite(x)||x>N)&&(x=N),u=g(e,d(x,M)),c=f(O,P),D=v-1;-1!==D;--D)c[D][D]+=1;L=A(c,m(u,x),!0);var F=m(I,f(t,L)),j=1;for(D=y-1;-1!==D;--D)F[D]<0&&(j=E(j,-.999*F[D]));if(o=p(s,d(L,j)),I=p(n,f(t,o)),!T(C(I,0)))return{solution:s,message:"",iterations:l};if(s=o,i>x)return{solution:o,message:"",iterations:l};if(a){var V=f(e,u),R=f(t,u);for(b=!0,D=y-1;-1!==D;--D)if(V*R[D]<0){b=!1;break}}else b=s[v-1]>=0?!1:!0;if(b)return{solution:o,message:"Unbounded",iterations:l}}return{solution:s,message:"maximum iteration count exceeded",iterations:l}},numeric._solveLP=function(e,t,n,i,r){var s,a=e.length,o=n.length,c=(numeric.sum,numeric.log,numeric.mul,numeric.sub),l=numeric.dot,u=(numeric.div,numeric.add,numeric.rep([a],0).concat([1])),h=numeric.rep([o,1],-1),d=numeric.blockMatrix([[t,h]]),p=n,s=numeric.rep([a],0).concat(Math.max(0,numeric.sup(numeric.neg(n)))+1),f=numeric.__solveLP(u,d,p,i,r,s,!1),m=numeric.clone(f.solution);m.length=a;var g=numeric.inf(c(n,l(t,m)));if(0>g)return{solution:NaN,message:"Infeasible",iterations:f.iterations};var v=numeric.__solveLP(e,t,n,i,r-f.iterations,m,!0);return v.iterations+=f.iterations,v},numeric.solveLP=function(e,t,n,i,r,s,a){if("undefined"==typeof a&&(a=1e3),"undefined"==typeof s&&(s=numeric.epsilon),"undefined"==typeof i)return numeric._solveLP(e,t,n,s,a);var o,c=i.length,l=i[0].length,u=t.length,h=numeric.echelonize(i),d=numeric.rep([l],0),p=h.P,f=[];for(o=p.length-1;-1!==o;--o)d[p[o]]=1;for(o=l-1;-1!==o;--o)0===d[o]&&f.push(o);var m=numeric.getRange,g=numeric.linspace(0,c-1),v=numeric.linspace(0,u-1),y=m(i,g,f),b=m(t,v,p),_=m(t,v,f),x=numeric.dot,w=numeric.sub,S=x(b,h.I),k=w(_,x(S,y)),E=w(n,x(S,r)),T=Array(p.length),C=Array(f.length);for(o=p.length-1;-1!==o;--o)T[o]=e[p[o]];for(o=f.length-1;-1!==o;--o)C[o]=e[f[o]];var M=w(C,x(T,x(h.I,y))),P=numeric._solveLP(M,k,E,s,a),A=P.solution;if(A!==A)return P;var I=x(h.I,w(r,x(y,A))),q=Array(e.length);for(o=p.length-1;-1!==o;--o)q[p[o]]=I[o];for(o=f.length-1;-1!==o;--o)q[f[o]]=A[o];return{solution:q,message:P.message,iterations:P.iterations}},numeric.MPStoLP=function(e){function t(t){throw new Error("MPStoLP: "+t+"\nLine "+n+": "+e[n]+"\nCurrent state: "+o[a]+"\n")}e instanceof String&&e.split("\n");var n,i,r,s,a=0,o=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],c=e.length,l=0,u={},h=[],d=0,p={},f=0,m=[],g=[],v=[];for(n=0;c>n;++n){r=e[n];var y=r.match(/\S*/g),b=[];for(i=0;i<y.length;++i)""!==y[i]&&b.push(y[i]);if(0!==b.length){for(i=0;i<o.length&&r.substr(0,o[i].length)!==o[i];++i);if(i<o.length){if(a=i,1===i&&(s=b[1]),6===i)return{name:s,c:m,A:numeric.transpose(g),b:v,rows:u,vars:p}}else switch(a){case 0:case 1:t("Unexpected line");case 2:switch(b[0]){case"N":0===l?l=b[1]:t("Two or more N rows");break;case"L":u[b[1]]=d,h[d]=1,v[d]=0,++d;break;case"G":u[b[1]]=d,h[d]=-1,v[d]=0,++d;break;case"E":u[b[1]]=d,h[d]=0,v[d]=0,++d;break;default:t("Parse error "+numeric.prettyPrint(b))}break;case 3:p.hasOwnProperty(b[0])||(p[b[0]]=f,m[f]=0,g[f]=numeric.rep([d],0),++f);var _=p[b[0]];for(i=1;i<b.length;i+=2)if(b[i]!==l){var x=u[b[i]];g[_][x]=(h[x]<0?-1:1)*parseFloat(b[i+1])}else m[_]=parseFloat(b[i+1]);break;case 4:for(i=1;i<b.length;i+=2)v[u[b[i]]]=(h[u[b[i]]]<0?-1:1)*parseFloat(b[i+1]);break;case 5:break;case 6:t("Internal error")}}}t("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,t,n,i,r,s,a){function o(e){var t,i,r=this,s=e.length,a=0,o=r.i=r.j=r.m=0;for(r.S=[],r.c=[],s||(e=[s++]);n>a;)r.S[a]=a++;for(a=0;n>a;a++)t=r.S[a],o=u(o+t+e[a%s]),i=r.S[o],r.S[a]=i,r.S[o]=t;r.g=function(e){var t=r.S,i=u(r.i+1),s=t[i],a=u(r.j+s),o=t[a];t[i]=o,t[a]=s;for(var c=t[u(s+o)];--e;)i=u(i+1),s=t[i],a=u(a+s),o=t[a],t[i]=o,t[a]=s,c=c*n+t[u(s+o)];return r.i=i,r.j=a,c},r.g(n)}function c(e,t,n,i,r){if(n=[],r=typeof e,t&&"object"==r)for(i in e)if(i.indexOf("S")<5)try{n.push(c(e[i],t-1))}catch(s){}return n.length?n:e+("string"!=r?"\x00":"")}function l(e,t,n,i){for(e+="",n=0,i=0;i<e.length;i++)t[u(i)]=u((n^=19*t[u(i)])+e.charCodeAt(i));e="";for(i in t)e+=String.fromCharCode(t[i]);return e}function u(e){return e&n-1}t.seedrandom=function(u,h){var d,p=[];return u=l(c(h?[u,e]:arguments.length?u:[(new Date).getTime(),e,window],3),p),d=new o(p),l(d.S,e),t.random=function(){for(var e=d.g(i),t=a,o=0;r>e;)e=(e+o)*n,t*=n,o=d.g(1);for(;e>=s;)e/=2,t/=2,o>>>=1;return(e+o)/t},u},a=t.pow(n,i),r=t.pow(2,r),s=2*r,l(t.random(),e)}([],numeric.seedrandom,256,6,52),function(e){function t(e){if("object"!=typeof e)return e;var n,i=[],r=e.length;for(n=0;r>n;n++)i[n+1]=t(e[n]);return i}function n(e){if("object"!=typeof e)return e;var t,i=[],r=e.length;for(t=1;r>t;t++)i[t-1]=n(e[t]);return i}function i(e,t,n){var i,r,s,a,o;for(s=1;n>=s;s+=1){for(e[s][s]=1/e[s][s],o=-e[s][s],i=1;s>i;i+=1)e[i][s]=o*e[i][s];if(a=s+1,a>n)break;for(r=a;n>=r;r+=1)for(o=e[s][r],e[s][r]=0,i=1;s>=i;i+=1)e[i][r]=e[i][r]+o*e[i][s]}}function r(e,t,n,i){var r,s,a,o;for(s=1;n>=s;s+=1){for(o=0,r=1;s>r;r+=1)o+=e[r][s]*i[r];i[s]=(i[s]-o)/e[s][s]}for(a=1;n>=a;a+=1)for(s=n+1-a,i[s]=i[s]/e[s][s],o=-i[s],r=1;s>r;r+=1)i[r]=i[r]+o*e[r][s]}function s(e,t,n,i){var r,s,a,o,c,l;for(s=1;n>=s;s+=1){if(i[1]=s,l=0,a=s-1,1>a){if(l=e[s][s]-l,0>=l)break;e[s][s]=Math.sqrt(l)}else{for(o=1;a>=o;o+=1){for(c=e[o][s],r=1;o>r;r+=1)c-=e[r][s]*e[r][o];c/=e[o][o],e[o][s]=c,l+=c*c}if(l=e[s][s]-l,0>=l)break;e[s][s]=Math.sqrt(l)}i[1]=0}}function a(e,t,n,a,o,c,l,u,h,d,p,f,m,g,v,y){function b(){for(g[1]=g[1]+1,T=D,k=1;d>=k;k+=1){for(T+=1,V=-u[k],E=1;a>=E;E+=1)V+=l[E][k]*o[E];if(Math.abs(V)<W&&(V=0),k>p)v[T]=V;else if(v[T]=-Math.abs(V),V>0){for(E=1;a>=E;E+=1)l[E][k]=-l[E][k];u[k]=-u[k]}}for(k=1;m>=k;k+=1)v[D+f[k]]=0;for(O=0,j=0,k=1;d>=k;k+=1)v[D+k]<j*v[F+k]&&(O=k,j=v[D+k]/v[F+k]);return 0===O?999:0}function _(){for(k=1;a>=k;k+=1){for(V=0,E=1;a>=E;E+=1)V+=e[E][k]*l[E][O];v[k]=V}for(C=A,k=1;a>=k;k+=1)v[C+k]=0;for(E=m+1;a>=E;E+=1)for(k=1;a>=k;k+=1)v[C+k]=v[C+k]+e[k][E]*v[E];for(U=!0,k=m;k>=1;k-=1){for(V=v[k],T=q+k*(k+3)/2,C=T-k,E=k+1;m>=E;E+=1)V-=v[T]*v[I+E],T+=E;if(V/=v[C],v[I+k]=V,f[k]<p)break;if(0>V)break;U=!1,P=k}if(!U)for(R=v[L+P]/v[I+P],k=1;m>=k&&!(f[k]<p)&&!(v[I+k]<0);k+=1)j=v[L+k]/v[I+k],R>j&&(R=j,P=k);for(V=0,k=A+1;A+a>=k;k+=1)V+=v[k]*v[k];if(Math.abs(V)<=W){if(U)return y[1]=1,999;for(k=1;m>=k;k+=1)v[L+k]=v[L+k]-R*v[I+k];return v[L+m+1]=v[L+m+1]+R,700}for(V=0,k=1;a>=k;k+=1)V+=v[A+k]*l[k][O];for($=-v[D+O]/V,H=!0,U||$>R&&($=R,H=!1),k=1;a>=k;k+=1)o[k]=o[k]+$*v[A+k],Math.abs(o[k])<W&&(o[k]=0);for(c[1]=c[1]+$*V*($/2+v[L+m+1]),k=1;m>=k;k+=1)v[L+k]=v[L+k]-$*v[I+k];if(v[L+m+1]=v[L+m+1]+$,!H){for(V=-u[O],E=1;a>=E;E+=1)V+=o[E]*l[E][O];if(O>p)v[D+O]=V;else if(v[D+O]=-Math.abs(V),V>0){for(E=1;a>=E;E+=1)l[E][O]=-l[E][O];u[O]=-u[O]}return 700}for(m+=1,f[m]=O,T=q+(m-1)*m/2+1,k=1;m-1>=k;k+=1)v[T]=v[k],T+=1;if(m===a)v[T]=v[a];else{for(k=a;k>=m+1&&0!==v[k]&&(B=Math.max(Math.abs(v[k-1]),Math.abs(v[k])),G=Math.min(Math.abs(v[k-1]),Math.abs(v[k])),j=v[k-1]>=0?Math.abs(B*Math.sqrt(1+G*G/(B*B))):-Math.abs(B*Math.sqrt(1+G*G/(B*B))),B=v[k-1]/j,G=v[k]/j,1!==B);k-=1)if(0===B)for(v[k-1]=G*j,E=1;a>=E;E+=1)j=e[E][k-1],e[E][k-1]=e[E][k],e[E][k]=j;else for(v[k-1]=j,z=G/(1+B),E=1;a>=E;E+=1)j=B*e[E][k-1]+G*e[E][k],e[E][k]=z*(e[E][k-1]+j)-e[E][k],e[E][k-1]=j;v[T]=v[m]}return 0}function x(){if(T=q+P*(P+1)/2+1,C=T+P,0===v[C])return 798;if(B=Math.max(Math.abs(v[C-1]),Math.abs(v[C])),G=Math.min(Math.abs(v[C-1]),Math.abs(v[C])),j=v[C-1]>=0?Math.abs(B*Math.sqrt(1+G*G/(B*B))):-Math.abs(B*Math.sqrt(1+G*G/(B*B))),B=v[C-1]/j,G=v[C]/j,1===B)return 798;if(0===B){for(k=P+1;m>=k;k+=1)j=v[C-1],v[C-1]=v[C],v[C]=j,C+=k;for(k=1;a>=k;k+=1)j=e[k][P],e[k][P]=e[k][P+1],e[k][P+1]=j}else{for(z=G/(1+B),k=P+1;m>=k;k+=1)j=B*v[C-1]+G*v[C],v[C]=z*(v[C-1]+j)-v[C],v[C-1]=j,C+=k;for(k=1;a>=k;k+=1)j=B*e[k][P]+G*e[k][P+1],e[k][P+1]=z*(e[k][P]+j)-e[k][P+1],e[k][P]=j}return 0}function w(){for(C=T-P,k=1;P>=k;k+=1)v[C]=v[T],T+=1,C+=1;return v[L+P]=v[L+P+1],f[P]=f[P+1],P+=1,m>P?797:0}function S(){return v[L+m]=v[L+m+1],v[L+m+1]=0,f[m]=0,m-=1,g[2]=g[2]+1,0}var k,E,T,C,M,P,A,I,q,D,L,O,N,F,j,V,R,$,B,G,z,U,H,W,Y,X,Q;N=Math.min(a,d),T=2*a+N*(N+5)/2+2*d+1,W=1e-60;do W+=W,Y=1+.1*W,X=1+.2*W;while(1>=Y||1>=X);for(k=1;a>=k;k+=1)v[k]=t[k];for(k=a+1;T>=k;k+=1)v[k]=0;for(k=1;d>=k;k+=1)f[k]=0;if(M=[],0===y[1]){if(s(e,n,a,M),0!==M[1])return void(y[1]=2);r(e,n,a,t),i(e,n,a)}else{for(E=1;a>=E;E+=1)for(o[E]=0,k=1;E>=k;k+=1)o[E]=o[E]+e[k][E]*t[k];for(E=1;a>=E;E+=1)for(t[E]=0,k=E;a>=k;k+=1)t[E]=t[E]+e[E][k]*o[k]}for(c[1]=0,E=1;a>=E;E+=1)for(o[E]=t[E],c[1]=c[1]+v[E]*o[E],v[E]=0,k=E+1;a>=k;k+=1)e[k][E]=0;for(c[1]=-c[1]/2,y[1]=0,A=a,I=A+a,L=I+N,q=L+N+1,D=q+N*(N+1)/2,F=D+d,k=1;d>=k;k+=1){for(V=0,E=1;a>=E;E+=1)V+=l[E][k]*l[E][k];v[F+k]=Math.sqrt(V)}for(m=0,g[1]=0,g[2]=0,Q=0;;){if(Q=b(),999===Q)return;for(;;){if(Q=_(),0===Q)break;if(999===Q)return;if(700===Q)if(P===m)S();else{for(;;)if(x(),Q=w(),797!==Q)break;S()}}}}function o(e,i,r,s,o,c){e=t(e),i=t(i),r=t(r);var l,u,h,d,p,f,m=[],g=[],v=[],y=[],b=[];if(o=o||0,c=c?t(c):[void 0,0],s=s?t(s):[],u=e.length-1,h=r[1].length-1,!s)for(l=1;h>=l;l+=1)s[l]=0;for(l=1;h>=l;l+=1)g[l]=0;for(d=0,p=Math.min(u,h),l=1;u>=l;l+=1)v[l]=0;for(m[1]=0,l=1;2*u+p*(p+5)/2+2*h+1>=l;l+=1)y[l]=0;for(l=1;2>=l;l+=1)b[l]=0;return a(e,i,u,u,v,m,r,s,u,h,o,g,d,b,y,c),f="",1===c[1]&&(f="constraints are inconsistent, no solution!"),2===c[1]&&(f="matrix D in quadratic function is not positive definite!"),{solution:n(v),value:n(m),unconstrained_solution:n(i),iterations:n(b),iact:n(g),message:f}}e.solveQP=o}(numeric),numeric.svd=function(e){function t(e,t){return e=Math.abs(e),t=Math.abs(t),e>t?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var n,i=numeric.epsilon,r=1e-64/i,s=50,a=0,o=0,c=0,l=0,u=0,h=numeric.clone(e),d=h.length,p=h[0].length;if(p>d)throw"Need more rows than columns";var f=new Array(p),m=new Array(p);for(o=0;p>o;o++)f[o]=m[o]=0;var g=numeric.rep([p,p],0),v=0,y=0,b=0,_=0,x=0,w=0,S=0;for(o=0;p>o;o++){for(f[o]=y,S=0,u=o+1,c=o;d>c;c++)S+=h[c][o]*h[c][o];if(r>=S)y=0;else for(v=h[o][o],y=Math.sqrt(S),v>=0&&(y=-y),b=v*y-S,h[o][o]=v-y,c=u;p>c;c++){for(S=0,l=o;d>l;l++)S+=h[l][o]*h[l][c];for(v=S/b,l=o;d>l;l++)h[l][c]+=v*h[l][o]}for(m[o]=y,S=0,c=u;p>c;c++)S+=h[o][c]*h[o][c];if(r>=S)y=0;else{for(v=h[o][o+1],y=Math.sqrt(S),v>=0&&(y=-y),b=v*y-S,h[o][o+1]=v-y,c=u;p>c;c++)f[c]=h[o][c]/b;for(c=u;d>c;c++){for(S=0,l=u;p>l;l++)S+=h[c][l]*h[o][l];for(l=u;p>l;l++)h[c][l]+=S*f[l]}}x=Math.abs(m[o])+Math.abs(f[o]),x>_&&(_=x)}for(o=p-1;-1!=o;o+=-1){if(0!=y){for(b=y*h[o][o+1],c=u;p>c;c++)g[c][o]=h[o][c]/b;for(c=u;p>c;c++){for(S=0,l=u;p>l;l++)S+=h[o][l]*g[l][c];for(l=u;p>l;l++)g[l][c]+=S*g[l][o]}}for(c=u;p>c;c++)g[o][c]=0,g[c][o]=0;g[o][o]=1,y=f[o],u=o}for(o=p-1;-1!=o;o+=-1){for(u=o+1,y=m[o],c=u;p>c;c++)h[o][c]=0;if(0!=y){for(b=h[o][o]*y,c=u;p>c;c++){for(S=0,l=u;d>l;l++)S+=h[l][o]*h[l][c];for(v=S/b,l=o;d>l;l++)h[l][c]+=v*h[l][o]}for(c=o;d>c;c++)h[c][o]=h[c][o]/y}else for(c=o;d>c;c++)h[c][o]=0;h[o][o]+=1}for(i*=_,l=p-1;-1!=l;l+=-1)for(var k=0;s>k;k++){var E=!1;for(u=l;-1!=u;u+=-1){if(Math.abs(f[u])<=i){E=!0;break}if(Math.abs(m[u-1])<=i)break}if(!E){a=0,S=1;var T=u-1;for(o=u;l+1>o&&(v=S*f[o],f[o]=a*f[o],!(Math.abs(v)<=i));o++)for(y=m[o],b=t(v,y),m[o]=b,a=y/b,S=-v/b,c=0;d>c;c++)x=h[c][T],w=h[c][o],h[c][T]=x*a+w*S,h[c][o]=-x*S+w*a}if(w=m[l],u==l){if(0>w)for(m[l]=-w,c=0;p>c;c++)g[c][l]=-g[c][l];break}if(k>=s-1)throw"Error: no convergence.";for(_=m[u],x=m[l-1],y=f[l-1],b=f[l],v=((x-w)*(x+w)+(y-b)*(y+b))/(2*b*x),y=t(v,1),v=0>v?((_-w)*(_+w)+b*(x/(v-y)-b))/_:((_-w)*(_+w)+b*(x/(v+y)-b))/_,a=1,S=1,o=u+1;l+1>o;o++){for(y=f[o],x=m[o],b=S*y,y=a*y,w=t(v,b),f[o-1]=w,a=v/w,S=b/w,v=_*a+y*S,y=-_*S+y*a,b=x*S,x*=a,c=0;p>c;c++)_=g[c][o-1],w=g[c][o],g[c][o-1]=_*a+w*S,g[c][o]=-_*S+w*a;for(w=t(v,b),m[o-1]=w,a=v/w,S=b/w,v=a*y+S*x,_=-S*y+a*x,c=0;d>c;c++)x=h[c][o-1],w=h[c][o],h[c][o-1]=x*a+w*S,h[c][o]=-x*S+w*a}f[u]=0,f[l]=v,m[l]=_}for(o=0;o<m.length;o++)m[o]<i&&(m[o]=0);for(o=0;p>o;o++)for(c=o-1;c>=0;c--)if(m[c]<m[o]){for(a=m[c],m[c]=m[o],m[o]=a,l=0;l<h.length;l++)n=h[l][o],h[l][o]=h[l][c],h[l][c]=n;for(l=0;l<g.length;l++)n=g[l][o],g[l][o]=g[l][c],g[l][c]=n;o=c}return{U:h,S:m,V:g}},numeric}),define("math/distance",["require","numeric"],function(e){var t=e("numeric"),n={hypot:Math.hypot||function(e,t){return 0===e&&0===t?0:Math.abs(e)>Math.abs(t)?Math.abs(e)*Math.sqrt(t/e*(t/e)+1):Math.abs(t)*Math.sqrt(e/t*(e/t)+1)},mean:function(e,t){return e>0==t>0?e+.5*(t-e):.5*(e+t)},dot:function(e,t,n,i){return e*n+t*i},pointToSegmentParameter:function(e,t,n,i,r,s){var a=this.hypot(r-n,s-i);if(0===a)return 0;var o=this.dot((e-n)/a,(t-i)/a,(r-n)/a,(s-i)/a);return o},closestPointOnSegment:function(e,t,n,i,r,s){var a=this.pointToSegmentParameter(e,t,n,i,r,s);return 0>=a?[n,i]:a>=1?[r,s]:[n+a*(r-n),i+a*(s-i)]},pointToSegment:function(e,t,n,i,r,s){var a=this.closestPointOnSegment(e,t,n,i,r,s);return this.hypot(e-a[0],t-a[1])},approx:function(e,t,n){if(n>50)throw new Error("Within "+(52-n)+" bits isn't really approximate any more");var i=Math.max(Math.max(Math.abs(e),Math.abs(t)),1),r=void 0===n?.5:Math.pow(.5,n);return i===i+r*Math.abs(t-e)},isLine:function(e,i,r,s,a,o){var c=t.svd([[e,i,1],[r,s,1],[a,o,1]]).S;return n.approx(c[c.length-1]/c[0],0)},isCircle:function(e,i,r,s,a,o,c,l){var u=t.svd([[e*e+i*i,e,i,1],[r*r+s*s,r,s,1],[a*a+o*o,a,o,1],[c*c+l*l,c,l,1]]).S;return n.approx(u[u.length-1]/u[0],0)},isConic:function(e,i,r,s,a,o,c,l,u,h,d,p){var f=t.svd([[e*e,i*i,2*e*i,e,i,1],[r*r,s*s,2*r*s,r,s,1],[a*a,o*o,2*a*o,a,o,1],[c*c,l*l,2*c*l,c,l,1],[u*u,h*h,2*u*h,u,h,1],[d*d,p*p,2*d*p,d,p,1]]).S;return n.approx(f[f.length-1]/f[0],0)},conicQuadraticParameters:function(e,n,i,r,s,a,o,c,l,u){return{a:t.det([[n*n,2*e*n,e,n,1],[r*r,2*i*r,i,r,1],[a*a,2*s*a,s,a,1],[c*c,2*o*c,o,c,1],[u*u,2*l*u,l,u,1]]),b:t.det([[e*e,n*n,e,n,1],[i*i,r*r,i,r,1],[s*s,a*a,s,a,1],[o*o,c*c,o,c,1],[l*l,u*u,l,u,1]]),c:-t.det([[e*e,2*e*n,e,n,1],[i*i,2*i*r,i,r,1],[s*s,2*s*a,s,a,1],[o*o,2*o*c,o,c,1],[l*l,2*l*u,l,u,1]])}},classifyConic:function(e,i,r,s,a,o,c,l,u,h,d,p){if(n.isLine(e,i,a,o,d,p))return"line";if(n.isCircle(e,i,r,s,u,h,d,p))return"circle";if(!n.isConic(e,i,r,s,a,o,c,l,u,h,d,p))return"none";var f=n.conicQuadraticParameters(e,i,r,s,a,o,c,l,u,h),m=t.svd([[f.a,f.b],[f.b,f.c]]).S;return n.approx(m[m.length-1]/m[0],0,20)?"parabola":f.b*f.b>f.a*f.c?"hyperbola":"ellipse"},classifyBranchConic:function(e){var t,i;if(1===e.length&&4===e[0].length)return"line";for(var r=0;r<e.length;r++){var s=e[r],a=s.length;if(12>a)return"unknown";try{i=n.classifyConic(s[0],s[1],s[2*Math.floor(1*a/12)],s[2*Math.floor(1*a/12)+1],s[2*Math.floor(2*a/12)],s[2*Math.floor(2*a/12)+1],s[2*Math.floor(3*a/12)],s[2*Math.floor(3*a/12)+1],s[2*Math.floor(4*a/12)],s[2*Math.floor(4*a/12)+1],s[a-2],s[a-1])}catch(o){return"unknown"}if("none"===i)return"none";if(t&&i!==t)return"none";t=i}return t}};return n}),define("worker/workerconfig",[],function(){return{singleVariableSolutions:!0,pointsOfInterest:!0}}),define("math/poi",["require","console","./distance","worker/workerconfig"],function(e){function t(e,t){var n;e>t&&(n=e,e=t,t=n);var i=e>0,r=t>0,s=Math.abs(e)>.01,a=Math.abs(t)>.01;if(s||a)return g.mean(e,t);if(0===e)return t*Math.abs(t);if(0===t)return e*Math.abs(e);if(i!==r)return 0;var o=i?Math.sqrt(e*t):-Math.sqrt(e*t);return o>=e&&t>=o?o:g.mean(e,t)}function n(e,n,r,s,a){if(!isFinite(n)||!isFinite(s)||0>n==0>s)return m.log("bisectZero called with bad y values",[n,s]),null;for(;;){var o=t(e,r),c=a(o);if(!isFinite(c))return null;if(o===e||o===r)return Math.abs(n)<=Math.abs(s)?[e,n]:[r,s];if(0===c)return i(e,n,o,c,r,s,a);0>n!=0>c?(r=o,s=c):(e=o,n=c)}}function i(e,n,i,a,o,c,l){var u;if(!isFinite(a))return null;isFinite(n)||(u=r(e,n,i,a,l),e=u[0],n=u[1]),isFinite(c)||(u=r(i,a,o,c,l),o=u[0],c=u[1]);var h,d;h=n===a?[e,n]:s(e,n,i,a,l,a),d=c===a?[o,c]:s(i,a,o,c,l,a);var p=t(h[0],d[0]);return[p,l(p)]}function r(e,n,i,r,s){if(isFinite(n)===isFinite(r))return m.log("bisectFinite called with bad y values",[n,r]),null;for(;;){var a=t(e,i),o=s(a);if(a===e||a===i)return isFinite(n)?[e,n]:[i,r];isFinite(o)!==isFinite(n)?(i=a,r=o):(e=a,n=o)}}function s(e,n,i,r,s,a){if(n===a==(r===a))return m.log("bisectConstant called with bad y values",[n,r,a]),null;for(;;){var o=t(e,i),c=s(o);if(o===e||o===i)return n===a?[e,n]:[i,r];c===a!=(n===a)?(i=o,r=c):(e=o,n=c)}}function a(e,n,r,s,a,o,c){if(!(r>e&&a>r))return m.log("bisectExtremum called with bad x values",[e,r,a]),null;if(!(isFinite(n)&&isFinite(s)&&isFinite(o)&&n!==s&&s!==o&&s>n==s>o))return m.log("bisectExtremum called with bad y values",[n,s,o]),null;for(;;){var l=t(e,r),u=c(l),h=t(r,a),d=c(h);if(!isFinite(u)||!isFinite(d))return null;if(l===e||l===r||h===r||h===a)return u>s==s>n?[l,u]:d>s==s>n?[h,d]:[r,s];if(u===s||d===s)return i(e,n,r,s,a,o,c);u>n==s>n&&u>n==u>s?(a=r,o=s,r=l,s=u):d>o==s>o&&d>s==d>o?(e=r,n=s,r=h,s=d):(e=l,n=u,a=h,o=d)}}function o(e,t,n,i,r,s,a,o){var c=Math.abs(i-t),l=Math.abs(s-i),u=Math.abs(o-s);return c>l&&c>u?[[e,t],[n,i]]:u>l&&u>c?[[r,s],[a,o]]:[[n,i],[r,s]]}function c(e,n,i,s,a,c,l,u){if(u||(u=0),0>=(i-e)*(a-i))return null;if(!isFinite(e)||!isFinite(i)||!isFinite(a))return null;if(!isFinite(n)||!isFinite(c))return null;if(!isFinite(s))return[r(e,n,i,s,l),r(i,s,a,c,l)];if(Math.abs(s-((a-i)*n+(i-e)*c)/(a-e))<u)return null;for(;;){var h,d,p=t(e,i),f=l(p),m=t(i,a),v=l(m),y=Math.abs(f-g.mean(n,s)),b=Math.abs(s-g.mean(f,v)),_=Math.abs(v-g.mean(s,c));if(u>=y&&u>=b&&u>=_)return null;if(!isFinite(f))return h=r(e,n,p,f,l),d=r(p,f,a,c,l),[h,d];if(!isFinite(v))return h=r(e,n,m,v,l),d=r(m,v,a,c,l),[h,d];if(!(p!==e&&p!==i||m!==i&&m!==a))return Math.abs(s-n)>Math.abs(c-s)?(h=[e,n],d=[i,s]):(h=[i,s],d=[a,c]),[h,d];if(p===e||p===i)return o(e,n,i,s,m,v,a,c);if(m===i||m===a)return o(e,n,p,f,i,s,a,c);y>_&&y>=b?(a=i,c=s,i=p,s=f):_>y&&_>=b?(e=i,n=s,i=m,s=v):(e=p,n=f,a=m,c=v)}}function l(e,t){for(var r,s,a,o,c,l,u,h={x:[],y:[]},d=0,p=e.length;p>d;d++){r=e[d],u=void 0,0===r[1]&&(u=[r[0],r[1]]);for(var f=0,m=r.length;m-2>f;f+=2)s=r[f],a=r[f+1],o=r[f+2],c=r[f+3],u?0!==c&&(u[0]!==r[0]&&(l=i(u[0],u[1],s,a,o,c,t),h.x.push(l[0]),h.y.push(l[1])),u=void 0):0===c?u=[s,a]:0>a!=0>c&&(l=n(s,a,o,c,t),l&&(h.x.push(l[0]),h.y.push(l[1])))}return h}function u(e,t,r){for(var s,o,c,l,u,h,d,p,f,m={x:[],y:[]},g=0,v=e.length;v>g;g++){s=e[g];for(var y=0,b=s.length;b-4>y;y+=2)if(o=s[y],c=s[y+1],l=s[y+2],u=s[y+3],h=s[y+4],d=s[y+5],isFinite(c)&&isFinite(u)&&isFinite(d))if(c!==u&&u===d)f=[o,c];else if(c===u&&u!==d&&f)u>f[1]==u>d&&(p=i(f[0],f[1],l,u,h,d,t),m.x.push(p[0]),m.y.push(p[1])),f=void 0;else if(c===u&&u===d);else if(u>c==u>d)if(r){if(r(o)>0==r(h)>0)continue;p=n(o,r(o),h,r(h),r),null===p&&(p=a(o,c,l,u,h,d,t)),p&&(m.x.push(p[0]),m.y.push(t(p[0])))}else p=a(o,c,l,u,h,d,t),p&&(m.x.push(p[0]),m.y.push(p[1]))}return m}function h(e,t){var n=t(0);return isFinite(n)?{x:[0],y:[t(0)]}:{x:[],y:[]}}function d(e,t){for(var n=e.length,i={x:[],y:[]},r=0;n>r;r++){var s=e[r];0===parseFloat(s[1].toFixed(7))&&(i.x.push(s[0]),i.y.push(s[1])),0===parseFloat(s[s.length-1].toFixed(7))&&(i.x.push(s[s.length-2]),i.y.push(s[s.length-1]))}return i}function p(e,t,n){if(!v.pointsOfInterest)return{zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}};var i=l(e,t),r=d(e,t);return i.x.push.apply(i.x,r.x),i.y.push.apply(i.y,r.y),{zeros:i,intercept:h(e,t),extrema:u(e,t,n)}}function f(e,t,n){var i,r,s,a=l(e,n),o=u(e,n);for(i=0,r=o.x.length;r>i;i++)g.approx(o.y[i],0)&&(a.x.push(o.x[i]),a.y.push(o.y[i]));for(i=0,s=a.x.length;s>i;i++)a.y[i]=t(a.x[i]);return a}var m=e("console"),g=e("./distance"),v=e("worker/workerconfig");return{bisectJump:c,bisectExtremum:a,bisectFinite:r,bisectZero:n,findExtrema:u,findZeros:l,findPOIs:p,findIntersections:f,INTERSECTION:1001,ZERO:1002,INTERCEPT:1003,EXTREMUM:1004,EDGE:1005,DEFINITION:1006,TRACE:1007}}),define("math/quadrature",["require","math/mathshim","math/poi"],function(e){"use strict";function t(e,t){for(var n=y;n>0;n--){var i=p/y*n,r=l.sinh(i),s=l.cosh(Math.PI/2*r),a=1/(Math.exp(Math.PI/2*r)*s),o=l.cosh(i)/(s*s);e.push(a),t.push(o)}}function n(e,t,n){return.5*(t*(2-n)+e*n)}function i(e,t,n){var i=.5*(t+n),r=h(t,e(t),i,e(i),n,e(n),e,0);return r?.5*(r[0][0]+r[1][0]):i}function r(e,t,n,i,r){return{x1:e,x2:t,value:n,error:i,minerror:r}}function s(e,t,i){var r=Math.abs(e(n(t,i,m))),s=Math.abs(e(n(t,i,2*m)));return m>r||m>s?!1:r>1.95*s}function a(e,t,i){var a,o,c=n(i,t,b[0]),l=n(t,i,b[0]),u=e(c),h=e(l),p=n(t,i,1),f=e(p);if(isFinite(f)&&!isFinite(u)){if(a=d(c,u,p,f,e),Math.abs((a[0]-t)/(i-t))>v)return r(t,i,NaN,NaN,NaN);t=a[0],u=a[1]}if(isFinite(f)&&!isFinite(h)){if(o=d(p,f,l,h,e),Math.abs((o[0]-i)/(i-t))>v)return r(t,i,NaN,NaN,NaN);i=o[0],h=o[1]}if(isFinite(u)&&isFinite(h)&&!isFinite(f)){if(a=d(c,u,p,f,e),o=d(p,f,l,h,e),Math.abs((o[0]-a[0])/(i-t))>v)return r(t,i,NaN,NaN,NaN);f=.5*(a[1]+o[1])}if(s(e,t,i)||s(e,i,t))return r(t,i,NaN,NaN,NaN);for(var m=f,g=0,x=0,w=0,k=0,E=0,T=0,C=0;y>C;C+=4)E=e(n(t,i,b[C])),T=e(n(i,t,b[C])),k=Math.max(k,Math.abs(E),Math.abs(T)),g+=_[C]*(E+T),E=e(n(t,i,b[C+1])),T=e(n(i,t,b[C+1])),k=Math.max(k,Math.abs(E),Math.abs(T)),w+=_[C+1]*(E+T),E=e(n(t,i,b[C+2])),T=e(n(i,t,b[C+2])),k=Math.max(k,Math.abs(E),Math.abs(T)),x+=_[C+2]*(E+T),E=e(n(t,i,b[C+3])),T=e(n(i,t,b[C+3])),k=Math.max(k,Math.abs(E),Math.abs(T)),w+=_[C+3]*(E+T);var M,P=m+g,A=P+x,I=A+w,q=Math.abs(x-P),D=Math.abs(w-A),L=S*(i-t)*I,O=S*Math.abs(i-t)*k*_[0];return M=0===q?S*Math.abs(i-t)*D:S*Math.abs(i-t)*D*(D/q)*(D/q),M=Math.max(M,O),r(t,i,L,M,O)}function o(e){for(var t=-(1/0),n=-(1/0),i=-1,r=0,s=0;s<e.length;s++){var a=e[s];r+=a.value,a.error>t&&(t=a.error,i=s),a.minerror>n&&(n=a.minerror)}return{maxerror:t,maxminerror:n,maxindex:i,totalvalue:r}}function c(e,t,r,s){if(void 0===s&&(s=32),!isFinite(t)||!isFinite(r))return NaN;for(var c=[a(e,t,r)],l=o(c),u=1;s>u&&!(Math.abs(l.maxerror/l.totalvalue)<=32*g||l.maxerror<=32*g||l.maxerror<=32*l.maxminerror);u++){var h=c[c.length-1];c[c.length-1]=c[l.maxindex],c[l.maxindex]=h;var d=c.pop(),p=i(e,n(d.x2,d.x1,.125),n(d.x1,d.x2,.125));c.push(a(e,d.x1,p)),c.push(a(e,p,d.x2)),l=o(c)}return l.totalvalue}var l=e("math/mathshim"),u=e("math/poi"),h=u.bisectJump,d=u.bisectFinite,p=3.154019550531224,f=Math.pow(2,-13),m=f*f,g=m*m,v=m,y=32,b=[],_=[];t(b,_);for(var x=0,w=0;w<_.length;w++)x+=_[w];var S=1/(1+2*x);return{quad:c}}),define("math/builtin",["require","math/mathshim","math/distance","math/quadrature"],function(e){function t(e){return e>1e12?!1:Math.round(o*e)*Math.PI===e}function n(e){if(e>1e12)return!1;var t=Math.round(2*o*e);return t%2===1&&t*Math.PI===2*e}var i=e("math/mathshim"),r=e("math/distance"),s=e("math/quadrature"),a={};a.cosh=i.cosh,a.sinh=i.sinh,a.tanh=i.tanh,a.acosh=i.acosh,a.asinh=i.asinh,a.atanh=i.atanh,a.expm1=i.expm1,a.log1p=i.log1p,a.sqrtxsqp1=i.sqrtxsqp1,a.sqrtxsqm1=i.sqrtxsqm1,a.mod=function(e,t){return e-t*Math.floor(e/t)},a.sign=Math.sign||function(e){return 0===e?0:e>0?1:0>e?-1:NaN},a.lcm=function(e,t){e=Math.round(e),t=Math.round(t);var n=a.gcd(e,t);return Math.abs(e*t/n)},a.gcd=function(e,t){if(e=Math.round(e),t=Math.round(t),0>e&&(e=-e),0>t&&(t=-t),t>e){var n=t;t=e,e=n}if(0===t)return e;for(var i=e%t;i>0;)e=t,t=i,i=e%t;return t},a.listGCD=function(e){if(0===e.length)return NaN;for(var t=e[0],n=1;n<e.length;n++)t=a.gcd(t,e[n]);return t},a.listLCM=function(e){if(0===e.length)return NaN;for(var t=e[0],n=1;n<e.length;n++)t=a.lcm(t,e[n]);return t},a.nCr=function(e,t){if(e=Math.round(e),t=Math.round(t),t>e||0>e||0>t)return 0;for(var n=1,i=0;t>i;i++)n*=(e-i)/(i+1);return n},a.nPr=function(e,t){if(e=Math.round(e),t=Math.round(t),t>e||0>e||0>t)return 0;for(var n=1,i=0;t>i;i++)n*=e-i;return n},a.factorial=function(e){return a.gamma(e+1)},a._integerFactorial=function(e){if(e!==Math.floor(e))return NaN;if(0>e)return NaN;if(e>170)return NaN;if(0===e||1===e)return 1;for(var t=1,n=2;e>=n;n++)t*=n;return t},a.gamma=function(e){return e===Math.floor(e)?a._integerFactorial(e-1):0>e?Math.PI/(Math.sin(Math.PI*e)*a.gamma(1-e)):Math.exp(a.lnGamma(e))},a.lnGamma=function(e){if(0>e)return NaN;for(var t=[57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],n=.9999999999999971,i=0;14>i;i++)n+=t[i]/(e+i+1);var r=e+5.2421875;return(e+.5)*Math.log(r)-r+Math.log(2.5066282746310007*n/e)},a.bernoulliTable=[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-236364091/2730,8553103/6,-23749461029/870],a.cotDerivative=function(e,t){if(e!==Math.floor(e))return NaN;if(0>e)return NaN;if(0===e)return 1/a.tan(t);var n=a.sin(t);if(1===e)return-1/(n*n);var i=a.cos(t);if(2===e)return 2*i/(n*n*n);var r,s,o,c,l,u=[0,2];for(s=3;e>=s;s++){for(r=[],o=0;s>o;o++)c=0,l=0,o>0&&(c=(s-o+1)*u[o-1]),s>o+2&&(l=(o+1)*u[o+1]),r.push(-(c+l));u=r}var h=0;for(o=e-1;o>=0;o--)h=r[o]+i*h;return h/Math.pow(n,e+1)},a.polyGamma=function(e,t){if(0>e)return NaN;if(e!==Math.floor(e))return NaN;var n=e%2===0?-1:1;if(0>t)return-n*a.polyGamma(e,1-t)-Math.pow(Math.PI,e+1)*a.cotDerivative(e,Math.PI*t);for(var i=a.factorial(e),r=0,s=Math.pow(t,-(e+1));10>t;)r+=s,t++,s=Math.pow(t,-(e+1));r+=0===e?-Math.log(t):s*t/e,r+=.5*s;for(var o=a.bernoulliTable,c=e+1,l=2,u=s*t*c/l,h=1/(t*t),d=1;14>=d;d++)u*=h,r+=u*o[d-1],c++,l++,u*=c/l,c++,l++,u*=c/l;return i*n*r},a.toFraction=function(e,t){if(e===1/0)return{n:1/0,d:1};if(e===-(1/0))return{n:-(1/0),d:1};if(!isFinite(e))return{n:NaN,d:1};var n,i,r,s=0,a=1,o=1,c=0;for(t||(t=1e6);;){if(n=Math.floor(e),i=n*a+s,r=n*c+o,r>t)break;if(s=a,o=c,a=i,c=r,e===n)break;e=1/(e-n)}return{n:a,d:c}},a.log=function(e){var t=Math.log(e);return Math.exp(Math.round(t))===e?Math.round(t):t},a.log_base=function(e,t){if(0===t)return NaN;var n=Math.log(e)/Math.log(t);return Math.pow(t,Math.round(n))===e?Math.round(n):n},a.common_log=function(e){return a.log_base(e,10)},a.pow=function(e,t){if(!isFinite(e)&&0===t)return NaN;if(e>=0||t===Math.floor(t))return Math.pow(e,t);var n=a.toFraction(t,100);return r.approx(n.n/n.d,t,2)&&n.d%2===1?(n.n%2===0?1:-1)*Math.pow(-e,t):NaN},a.div=function(e,t){return 0===t?NaN:e/t},a.reciprocal=function(e){return a.div(1,e)},a.nthroot=function(e,t){return a.pow(e,1/t)};var o=1/Math.PI;return a.sin=function(e){return t(Math.abs(e))?0:Math.sin(e)},a.cos=function(e){return n(Math.abs(e))?0:Math.cos(e)},a.tan=function(e){var i=Math.abs(e);return t(i)?0:n(i)?NaN:Math.tan(e)},a.sec=function(e){return n(Math.abs(e))?NaN:1/Math.cos(e)},a.csc=function(e){return t(Math.abs(e))?NaN:1/Math.sin(e)},a.cot=function(e){var i=Math.abs(e);return t(i)?NaN:n(i)?0:1/Math.tan(e)},a.acot=function(e){return Math.PI/2-Math.atan(e)},a.acsc=function(e){return Math.asin(a.reciprocal(e))},a.asec=function(e){return Math.acos(a.reciprocal(e))},a.sech=function(e){return a.reciprocal(a.cosh(e))},a.csch=function(e){return a.reciprocal(a.sinh(e))},a.coth=function(e){return a.reciprocal(a.tanh(e))},a.asech=function(e){return a.acosh(a.reciprocal(e))},a.acsch=function(e){return a.asinh(a.reciprocal(e))},a.acoth=function(e){return a.atanh(a.reciprocal(e))},a.mean=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t/e.length},a.total=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t},a.length=function(e){return e.length},a.listMin=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var n=1;n<e.length;n++){if(isNaN(e[n]))return NaN;e[n]<t&&(t=e[n])}return t},a.listMax=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var n=1;n<e.length;n++){if(isNaN(e[n]))return NaN;e[n]>=t&&(t=e[n])}return t},a.quantile=function(e,t){if(!isFinite(t)||0>t||t>1)return NaN;var n=e.length,i=a.sortPerm(e),r=t*(n-1);return Math.floor(r)===r?e[i[r]]:(Math.ceil(r)-r)*e[i[Math.floor(r)]]+(r-Math.floor(r))*e[i[Math.ceil(r)]]},a.sortPerm=function(e){for(var t=e.length,n=[],i=0;t>i;i++)n.push(i);return n.sort(function(t,n){return e[t]-e[n]}),n},a.upperQuantileIndex=function(e,t){return a.sortPerm(e)[Math.ceil(t*(e.length-1))]+1},a.lowerQuantileIndex=function(e,t){return a.sortPerm(e)[Math.floor(t*(e.length-1))]+1},a.median=function(e){return a.quantile(e,.5)},a.argMin=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var n=0,i=1;i<e.length;i++){if(isNaN(e[i]))return 0;e[i]<t&&(n=i,t=e[i])}return n+1},a.argMax=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var n=0,i=1;i<e.length;i++)if(e[i]>=t){if(isNaN(e[i]))return 0;n=i,t=e[i]}return n+1},a.varp=function(e){for(var t=a.mean(e),n=0,i=0;i<e.length;i++){var r=e[i]-t;n+=r*r}return n/e.length},a.mad=function(e){for(var t=a.mean(e),n=0,i=0;i<e.length;i++)n+=Math.abs(e[i]-t);return n/e.length},a["var"]=function(e){var t=e.length;return a.varp(e)*t/(t-1)},a.covp=function(e,t){if(e.length!==t.length)return NaN;for(var n=e.length,i=a.mean(e),r=a.mean(t),s=0,o=0;n>o;o++)s+=(e[o]-i)*(t[o]-r);return s/n},a.cov=function(e,t){if(e.length!==t.length)return NaN;var n=e.length;return a.covp(e,t)*n/(n-1)},a.corr=function(e,t){if(e.length!==t.length)return NaN;for(var n,i,r=e.length,s=a.mean(e),o=a.mean(t),c=0,l=0,u=0,h=0;r>h;h++)n=e[h]-s,i=t[h]-o,c+=n*n,l+=i*i,u+=n*i;return u/Math.sqrt(c*l)},a.stdev=function(e){return Math.sqrt(a["var"](e))},a.stdevp=function(e){return Math.sqrt(a.varp(e))},a.quad=s.quad,a.distance=function(e,t){return r.hypot(t[0]-e[0],t[1]-e[1])},a.midpoint=function(e,t){return[.5*(e[0]+t[0]),.5*(e[1]+t[1])]},a}),define("math/functions",["require","math/builtin"],function(e){function t(e){for(var t=0;t<e.length;t++)e[t].compiled&&delete e[t].compiled.fn}function n(e){for(var t=0;t<e.length;t++){var n=e[t].compiled;n&&(n.fn=r(n.args,n.source))}}function i(e,t){for(var n=[],i=0;t>i;i++)n.push("values["+i+"]");return r(["values"],"return "+e(n))}function r(e,t){var n=e.join(","),i="return (function("+n+"){"+t+"})",r=new Function(["BuiltIn"],i);return r(s)}var s=e("math/builtin");return{dehydrateGraphData:t,rehydrateGraphData:n,closureFunctionWithBuiltIn:r,createEvaluateFunction:i}});var define_enum_constant,enum_strings={},debuggable_enums=!0;if(debuggable_enums)define_enum_constant=function(e){this[e]=e};else{var next_enum=1e3;define_enum_constant=function(e){enum_strings[next_enum]=e,this[e]=next_enum++}}define_enum_constant("EXPRESSION"),define_enum_constant("FUNCTION_DEFINITION"),define_enum_constant("VARIABLE_DEFINITION"),define_enum_constant("ORDERED_PAIR_LIST"),define_enum_constant("DOUBLE_INEQUALITY"),define_enum_constant("COMPARATOR"),define_enum_constant("CHAINED_COMPARATOR"),define_enum_constant("EQUATION"),define_enum_constant("CONSTANT"),define_enum_constant("IDENTIFIER"),define_enum_constant("LIST"),define("math/enums",function(){}),define("math/parsenode/base",["require","console","pjs","math/functions","../enums"],function(e){var t=e("console"),n=e("pjs"),i=e("math/functions");return e("../enums"),n(function(e,n,r){e.init=function(){this._dependencies=[],this._inputString="",this._exports=[]},e.exportPenalty=0;var s=0;e.tmpVar=function(){return"tmp"+s++},e.statementType=EXPRESSION,e.dependencies=function(){return this.getDependencies();
},e.evaluateOnce=function(e){void 0===e&&(e={});var t=this.getConcreteTree(e),n=t.getEvaluationInfo();return n?n[0].val:NaN},e.setInputString=function(e){this._inputString=e},e.getInputString=function(){return this._inputString},e.shouldExportAns=function(){return!1},e.getAnsVariable=function(){return this.shouldExportAns()&&this.userData&&this.userData.hasOwnProperty("index")?["ans_"+this.userData.index]:[]},e.addDependency=function(e){this.dependsOn(e)||this._dependencies.push(e)},e.addDependencies=function(e){for(var t=0;t<e.length;t++)this.addDependency(e[t])},e.getDependencies=function(){return this._dependencies},e.removeDependency=function(e){this._dependencies.splice(this._dependencies.indexOf(e),1)},e.dependsOn=function(e){return this._dependencies.indexOf(e)>-1},e.getExports=function(){var e=this._exports||[];return e.concat(this.getAnsVariable())},e.getLegalExports=function(e){return this.getExports().filter(function(t){return!e.assignmentForbidden(t)})},e.exportsSymbol=function(e){return this._exports.indexOf(e)>-1},e.exportTo=function(e,t,n){for(var i=this.getLegalExports(e),r=0;r<i.length;r++){var s=i[r];if(n[s])return;n[s]=t.blocksExport?t:this}},e.getOperator=function(){return this.operator||"="},e.isInequality=function(){return!1},e.isShadeBetween=function(){return!1},e.getAllIds=function(){return this.userData?[this.userData.id]:[]},e.getEvaluationInfo=function(){return!1},e.getSliderInfo=function(){return!1},e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies())},e.okForImplicitFunction=function(){return!1},e.getConcreteTree=function(e){return t.log("Warning - default empty version of getConcreteTree being called"),this},e.tryGetConcreteTree=function(){var e;try{e=this.getConcreteTree.apply(this,arguments)}catch(t){if(!(t instanceof r))throw t;e=t}return e},e.getCompiledFunctions=function(e){var t=this.getEvalStrings(),n=t.statements.join(";")+";return "+t.expression;if(void 0===e){e=this.getDependencies();var r=e.indexOf("x");if(-1!==r){var s=e[0];e[0]=e[r],e[r]=s}}return[{args:e,source:n,fn:i.closureFunctionWithBuiltIn(e,n)}]},e.getCompiledDerivatives=function(){var e=this.getDependencies(),t=this.takeDerivative(e[0]||"x");return t.getCompiledFunctions()}})}),define("lib/worker-i18n",["require","underscore"],function(e){var t=e("underscore"),n=function(e,n){return n&&0!==t.size(n)?JSON.stringify({msg:e,vars:n}):e};return{t:n}}),define("math/parsenode/error",["require","pjs","./base"],function(e){var t=e("pjs"),n=e("./base");return t(n,function(e,t){e.init=function(e){t.init.call(this),this._msg=e,this._sliderVariables=[],this.blocksExport=!0},e.evaluateOnce=function(e){return this._msg},e.getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this},e.isError=!0,e.getError=function(){return this._msg},e.setDependencies=function(e){return this._dependencies=e,this},e.allowExport=function(){return this.blocksExport=!1,this}})}),define("lib/number-to-latex",["require"],function(e){return function(e){if("string"==typeof e)return e;var t=e+"";return t=t.replace(/1e\+?([-\d]+)/,"10^{$1}"),t=t.replace(/([-\d\.]+)e\+?([-\d]+)/,"$1\\cdot 10^{$2}")}}),define("graphing/label",["require","underscore","math/builtin","math/distance","lib/number-to-latex"],function(e){function t(e,t){if(isNaN(e))return{ariaString:"undefined",string:"undefined",value:e};if(e===1/0)return{ariaString:"Infinity",string:"Infinity",value:e};if(e===-(1/0))return{ariaString:"minus Infinity",string:"-Infinity",value:e};if(0===e)return{ariaString:"0",string:"0",value:e};t||(t=e),Math.abs(e)>Math.abs(t)&&(t=e);var n,r,u,h=m.toFraction(e/Math.PI,24);if(c(t)&&g.approx(h.n/h.d*Math.PI,e,3))return n=0===h.n?"0":1===h.n?"":-1===h.n?"-":h.n.toString()+"",r=1===h.d?"":"/"+h.d.toString(),u=n+r,{ariaString:i(u),string:u,value:h.n/h.d*Math.PI};var d,p;if(c(t))u=o(s(e.toFixed(l(t)))),p=null,d=null;else{var f=a(e.toExponential(l(t/e))).split("e");d=f[0]+"10",p=f[1].replace("+",""),u=a(e.toExponential(l(t/e))).replace("+","")}return{ariaString:i(u),string:u,mantissa:d,superscript:p,value:parseFloat(u)}}function n(e){return y["["+e+"]"]}function i(e){return e.replace(b,n).replace(/ +/gi," ").trim()}function r(e,n,i,r){var s=t(e,n),a=t(r(s.value),i);return[s,a]}function s(e){return-1===e.indexOf(".")?e:e.replace(_,"")}function a(e){var t=/\.?0+e/;return e.replace(t,"e")}function o(e){return"-0"===e?"0":e}function c(e){return e=Math.abs(e),e>1e-4&&1e7>e}function l(e){return e=Math.abs(e),e=Math.max(e,1e-16),Math.max(3,Math.floor(4.5-Math.log(e)/Math.LN10))}function u(e){var t={pi:"",tau:"",theta:"",phi:""};return t.hasOwnProperty(e)?t[e]:e}function h(e){var t=e.split("_"),n="";return t[0].length>1&&(n+="\\"),n+=t[0],t[1]&&(n+=1===t[1].length?"_"+t[1]:"_{"+t[1]+"}"),n}function d(e){var t=e.split("_").map(u).map(f.escape),n=t[0];return t[1]&&(n+="<sub>"+t[1]+"</sub>"),n}function p(e){return e=e.replace(/\\operatorname\{(.*)\}/,"$1"),e.replace(/[{}\\]/g,"")}var f=e("underscore"),m=e("math/builtin"),g=e("math/distance"),v=e("lib/number-to-latex"),y={"[e]":" times 10 to the ","[+]":" plus ","[-]":" minus ","[*]":" times ","[/]":" over ","[]":" pi ","[]":" tau ","[]":" theta ","[]":" phi "},b=new RegExp(Object.keys(y).join("|"),"gi"),_=/\.?0+$/,x=function(e,t,n){if(n=n||{},isNaN(t))return"undefined";if(0===t)return"0";if(n.zeroCutoff&&Math.abs(t)<n.zeroCutoff)return"0";var i=n.smallCutoff||.001,r=n.bigCutoff||1e6,s=n.digits||10;if(!(Math.abs(t)>r||Math.abs(t)<i)){var o=Number(t.toPrecision(s));return t!==o&&n.addEllipses&&(o+="..."),o+""}var c=a(t.toExponential(s-2));return"latex"===e?c.replace(/([\d\.\-]+)e\+?([\d\-]+)/,"$1\\times10^{$2}"):"plainmath"===e?c.replace(/([\d\.\-]+)e\+?([\d\-]+)/,"$1 * 10^$2"):"html"===e?c.replace(/([\d\.\-]+)e\+?([\d\-]+)/,"$1<span class='dcg-cross'></span>10<sup>$2</sup>"):void 0},w=function(e,t){return x("html",e,t)},S=function(e,t){return x("plainmath",e,t)},k=function(e,t){return x("latex",e,t)};return{value:t,point:r,formatSymbol:u,identifierToLatex:h,latexToIdentifier:p,numberToLatex:v,identifierToHTML:d,truncatedHTMLLabel:w,truncatedLatexLabel:k,truncatedPlainmathLabel:S}}),define("math/types",["require","lib/worker-i18n"],function(e){function t(e){switch(e){case c:return"Any";case l:return"Number";case u:return"Bool";case h:return"Point";case d:return"ListOfAny";case p:return"ListOfNumber";case f:return"ListOfBool";case m:return"ListOfPoint";case g:return"ErrorType";default:throw new Error("Invalid type")}}function n(e){switch(e){case c:return o.t("an unknown object");case l:return o.t("a number");case u:return o.t("a true/false value");case h:return o.t("a point");case d:return o.t("a list of unknown objects");case p:return o.t("a list of numbers");case f:return o.t("a list of true/false values");case m:return o.t("a list of points");case g:return o.t("an error object");default:throw new Error("Invalid type")}}function i(e){switch(e){case d:return!0;case p:return!0;case f:return!0;case m:return!0;default:return!1}}function r(e){switch(e){case d:return c;case p:return l;case f:return u;case m:return h;default:return c}}function s(e){switch(e){case c:return d;case l:return p;case u:return f;case h:return m;default:throw new Error("Type "+t(e)+" does not implement listType.")}}function a(e){switch(e){case c:return!0;case l:return!0;case u:return!0;case h:return!0;default:return!1}}var o=e("lib/worker-i18n"),c=0,l=1,u=2,h=3,d=4,p=5,f=6,m=7,g=8;return{Any:c,Number:l,Bool:u,Point:h,ListOfAny:d,ListOfNumber:p,ListOfBool:f,ListOfPoint:m,ErrorType:g,repr:t,prettyPrint:n,isList:i,elementType:r,listType:s,hasListType:a}}),define("math/errormsg",["require","lib/worker-i18n","math/parsenode/error","graphing/label","worker/workerconfig","math/types"],function(e){var t=e("lib/worker-i18n"),n=e("math/parsenode/error"),i=e("graphing/label"),r=e("worker/workerconfig"),s=e("math/types");return{parseError:function(){return n(t.t("Sorry, I don't understand this."))},addTypeError:function(e){return n(t.t("Cannot add __symbol2__ and __symbol1__.",{symbol1:s.prettyPrint(e[0]),symbol2:s.prettyPrint(e[1])})).allowExport()},subtractTypeError:function(e){return n(t.t("Cannot subtract __symbol2__ from __symbol1__.",{symbol1:s.prettyPrint(e[0]),symbol2:s.prettyPrint(e[1])})).allowExport()},multiplyTypeError:function(e){return n(t.t("Cannot multiply __symbol1__ by __symbol2__.",{symbol1:s.prettyPrint(e[0]),symbol2:s.prettyPrint(e[1])})).allowExport()},divideTypeError:function(e){return n(t.t("Cannot divide __symbol1__ by __symbol2__.",{symbol1:s.prettyPrint(e[0]),symbol2:s.prettyPrint(e[1])})).allowExport()},exponentTypeError:function(e){return n(t.t("Cannot raise __symbol1__ to __symbol2__.",{symbol1:s.prettyPrint(e[0]),symbol2:s.prettyPrint(e[1])})).allowExport()},negativeTypeError:function(e){return n(t.t("Cannot negate __symbol__.",{symbol:s.prettyPrint(e[0])})).allowExport()},comparatorTypeError:function(e){return n(t.t("Cannot compare __symbol1__ to __symbol2__.",{symbol1:s.prettyPrint(e[0]),symbol2:s.prettyPrint(e[1])})).allowExport()},andTypeError:function(e){return n(t.t("Cannot apply __symbol__ to __symbol1__ and __symbol2__.",{symbol:"and",symbol1:s.prettyPrint(e[0]),symbol2:s.prettyPrint(e[1])})).allowExport()},listTypeError:function(e){return n(t.t("Cannot store __symbol1__ in a list.",{symbol1:s.prettyPrint(e[0]),symbol2:s.prettyPrint(e[1])})).allowExport()},pointTypeError:function(e){return n(t.t("Cannot use __symbol1__ and __symbol2__ as the coordinates of __symbol3__.",{symbol1:s.prettyPrint(e[0]),symbol2:s.prettyPrint(e[1]),symbol3:s.prettyPrint(s.Point)})).allowExport()},indexTypeError:function(e){return n(t.t("Cannot index __symbol1__ with __symbol2__.",{symbol1:s.prettyPrint(e[0]),symbol2:s.prettyPrint(e[1])})).allowExport()},functionTypeError:function(e,r){switch(r.length){case 1:return n(t.t("Function '__fn__' cannot be applied to __arg__.",{fn:i.formatSymbol(e),arg:s.prettyPrint(r[0])})).allowExport();case 2:return n(t.t("Function '__fn__' cannot be applied to __arg1__ and __arg2__.",{fn:i.formatSymbol(e),arg1:s.prettyPrint(r[0]),arg2:s.prettyPrint(r[1])})).allowExport();default:return n(t.t("Function '__fn__' cannot be applied to these arguments.",{fn:i.formatSymbol(e)})).allowExport()}},sumLowerBoundTypeError:function(e){return n(t.t("Lower bound of a sum cannot be __symbol__.",{symbol:s.prettyPrint(e[0])})).allowExport()},sumUpperBoundTypeError:function(e){return n(t.t("Upper bound of a sum cannot be __symbol__.",{symbol:s.prettyPrint(e[0])})).allowExport()},sumArgumentTypeError:function(e){return n(t.t("Cannot take the sum of __symbol__.",{symbol:s.prettyPrint(e[0])})).allowExport()},productLowerBoundTypeError:function(e){return n(t.t("Lower bound of a product cannot be __symbol__.",{symbol:s.prettyPrint(e[0])})).allowExport()},productUpperBoundTypeError:function(e){return n(t.t("Upper bound of a product cannot be __symbol__.",{symbol:s.prettyPrint(e[0])})).allowExport()},productArgumentTypeError:function(e){return n(t.t("Cannot take the product of __symbol__.",{symbol:s.prettyPrint(e[0])})).allowExport()},integralLowerBoundTypeError:function(e){return n(t.t("Lower bound of an integral cannot be __symbol__.",{symbol:s.prettyPrint(e[0])})).allowExport()},integralUpperBoundTypeError:function(e){return n(t.t("Upper bound of an integral cannot be __symbol__.",{symbol:s.prettyPrint(e[0])})).allowExport()},integralArgumentTypeError:function(e){return n(t.t("Cannot take the integral of __symbol__.",{symbol:s.prettyPrint(e[0])})).allowExport()},derivativeTypeError:function(e){return n(t.t("Cannot take the derivative of __symbol__.",{symbol:s.prettyPrint(e[0])})).allowExport()},derivativeVariableTypeError:function(e,r){return n(t.t("Cannot take derivative with respect to '__symbol1__' because it is __symbol2__.",{symbol1:i.formatSymbol(e),symbol2:s.prettyPrint(r[0])}))},piecewiseConditionTypeError:function(e){return n(t.t("The condition in a piecewise expression must be __symbol1__ but was __symbol2__.",{symbol1:s.prettyPrint(s.Bool),symbol2:s.prettyPrint(e[0])})).allowExport()},piecewiseBranchTypeError:function(e){return n(t.t("Cannot use __symbol__ as a branch of a piecewise expression.",{symbol:s.prettyPrint(e[0])})).allowExport()},tableHeaderTypeError:function(e){return n(t.t("Table header cannot be __symbol__.",{symbol:s.prettyPrint(e[0])}))},tableEntryTypeError:function(e){return n(t.t("Table entry cannot be __symbol__.",{symbol:s.prettyPrint(e[0])}))},heterogeneousList:function(){return n(t.t("All elements of a list must have the same type.")).allowExport()},deeplyNested:function(){return n(t.t("Definitions are nested too deeply.")).allowExport()},wrongArity:function(e,r,s){e=i.formatSymbol(e);var a,o;if(1===r)o=t.t("For example, try typing: __dependency__(x).",{dependency:e}),a=s>1?t.t("Function '__dependency__' requires only 1 argument. __supplement__",{dependency:e,supplement:o}):t.t("Function '__dependency__' requires an argument. __supplement__",{dependency:e,supplement:o});else{for(var c=[],l=0;r>l;l++)c[l]=l+1;var u=i.formatSymbol(e)+"("+c.join(", ")+")";o=t.t("For example, try typing: __recommendation__.",{recommendation:u}),a=t.t("Function '__dependency__' requires __assignment_arity__ arguments. __supplement__",{dependency:e,assignment_arity:r,supplement:o})}return n(a)},wrongParametrizedReducerArity:function(e){return n(t.t("Function '__symbol__' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:i.formatSymbol(e),recommendation:i.formatSymbol(e)+"([1,2,3], 1)"}))},wrongDoubleReducerArity:function(e){return n(t.t("Function '__symbol__' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:i.formatSymbol(e),recommendation:i.formatSymbol(e)+"([1,2,3], [3,2,1])"}))},primedFunctionArity:function(){return n(t.t("Prime notation can only be used for functions of a single argument."))},zeroArgReducer:function(e){return n(t.t("Function '__symbol__' requires at least one argument. For example, try typing: __symbol__(1, 2).",{symbol:i.formatSymbol(e)}))},missingRHS:function(e){return e=i.formatSymbol(e),n(t.t("What do you want '__symbol__' to equal?",{symbol:e}))},malformedPoint:function(){return n(t.t("Points are written like this: (1, 2)."))},badImplicitMultiply:function(e){return e=i.formatSymbol(e),n(t.t("Use parentheses around the argument of '__symbol__'.",{symbol:e}))},binaryOperatorMissingOperand:function(e){return n(t.t("You need something on both sides of the '__symbol__' symbol.",{symbol:e}))},fractionMissingNumerator:function(){return n(t.t("You need a numerator for the top of your fraction."))},fractionMissingDenominator:function(){return n(t.t("You need a denominator for the bottom of your fraction."))},fractionEmpty:function(){return n(t.t("You need a numerator and denominator for your fraction."))},badTrigExponent:function(e){var i=e+"^2",r=e+"^-1";return n(t.t("Only __form1__ and __form2__ are supported. Otherwise, use parens.",{form1:i,form2:r}))},badLogExponent:function(e){var i=e+"^2";return n(t.t("Only __form__ is supported. Otherwise, use parens.",{form:i}))},blankExpression:function(){return n(t.t("You haven't written anything yet."))},functionNotDefined:function(e){return e=i.formatSymbol(e),n(t.t("Function '__dependency__' is not defined.",{dependency:e}))},parameterAlreadyDefined:function(e){return e=i.formatSymbol(e),n(t.t("You can't use '__dependency__' as a parameter of this function because '__dependency__' is already defined.",{dependency:e}))},cannotRedefine:function(e,r){return e=i.formatSymbol(e),n(void 0===r?t.t("You can't redefine '__symbol__' because it's already defined.",{symbol:e}):t.t("You can't redefine '__symbol__' because '__symbolRoot__' is already defined.",{symbol:e,symbolRoot:r}))},multiplyDefined:function(e){return e=i.formatSymbol(e),n(t.t("You've defined '__dependency__' in more than one place. Try picking a different variable, or deleting some of the definitions of '__dependency__'.",{dependency:e}))},shadowedIndex:function(e){return e=i.formatSymbol(e),n(t.t("You can't use '__symbol__' as an index because it's already defined.",{symbol:e}))},cycle:function(e){e=e.map(i.formatSymbol);var r=e.pop();return n(t.t("'__symbols__' and '__lastSymbol__' can't be defined in terms of each other.",{symbols:e.join("', '"),lastSymbol:r}))},selfReferentialFunction:function(e){return n(t.t("The definition of function '__symbol__' cannot depend on '__symbol__'.",{symbol:i.formatSymbol(e)}))},tooManyVariables:function(e){if(e=e.map(i.formatSymbol),0===e.length)return n(t.t("Too many variables, I don't know what to do with this."));var r=e.pop();return n(t.t("Too many variables. Try defining '__variables__'.",{variables:(e.length?e.join("', '")+"' or '":"")+r}))},addArgumentsToDefinition:function(e,r,s){e=e.map(i.formatSymbol),r=i.formatSymbol(r),s=s.map(i.formatSymbol);var a=r+"("+s.join(",")+","+e.join(",")+")",o=e.pop(),c={symbols:e.join("', '"),lastSymbol:o,newSignature:a};return n(e.length?t.t("Try including '__symbols__' and '__lastSymbol__' as arguments by defining the function as '__newSignature__'.",c):t.t("Try including '__lastSymbol__' as an argument by defining the function as '__newSignature__'.",c))},invalidLHS:function(e){return e=i.formatSymbol(e),n(t.t("Sorry, you can't graph __symbol__ as a function of anything yet.",{symbol:e}))},unplottablePolarFunction:function(){return n(t.t("We can't plot  as a function of r. Try plotting r() instead."))},invalidInequalityVariables:function(){return n(t.t("We only plot inequalities of x and y, or r and ."))},invalidImplicitVariables:function(){return n(t.t("We only support implicit equations of x and y."))},unsolvable:function(){return n(r.singleVariableSolutions?t.t("We don't solve complicated single-variable equations yet."):t.t("Solving single-variable equations is disabled."))},singleVariableListSolve:function(){return n(t.t("We don't solve single-variable equations involving lists yet."))},complicatedImplicitInequality:function(){return n(t.t("We can only plot inequalities when one variable is quadratic or linear."))},complicatedPolarImplicit:function(){return n(t.t("Polar equations must be linear in r."))},invalidDoubleInequalityVariables:function(){return n(t.t("We only plot double inequalities of x and y."))},mismatchedDoubleInequality:function(){return n(t.t("Double inequalities must both go the same way, e.g. 1 < y < 2."))},complicatedDoubleInequality:function(){return n(t.t("We only support solved double inequalities. Try deleting one side of the inequality."))},equationRequired:function(e){return e?(e=i.formatSymbol(e),n(t.t("Try adding '__lhs__' to the beginning of this equation.",{lhs:e+"="}))):n(t.t("Try adding an equals sign to turn this into an equation."))},variableAsFunction:function(e){return e=i.formatSymbol(e),n(t.t("Variable '__dependency__' can't be used as a function.",{dependency:e}))},nestedList:function(){return n(t.t("Nested lists are not allowed."))},emptyList:function(){return n(t.t("Empty lists are not allowed."))},invalidTableHeader:function(e){return n(t.t("Table headers must be simple expressions. __supplement__",{supplement:e}))},invalidTableEntry:function(e){return n(t.t("Table entries must be simple expressions. __supplement__",{supplement:e}))},invalidFirstTableColumn:function(){return n(t.t("First column may not be __most__ or __last__.",{most:"'y', 'r',",last:"''"}))},invalidDependentFirstTableColumn:function(){return n(t.t("This column header can't be defined elsewhere in the calculator."))},invalidRegressionParameter:function(e){return n(t.t("'__symbol__' may not be used as a regression parameter.",{symbol:i.formatSymbol(e)}))},optimizationError:function(){return n(t.t("We couldn't find any region where this model is defined."))},nonListRegression:function(){return n(t.t("Regressions must contain at least one list of data."))},badListInReducer:function(e){return n(t.t("When __symbol__ is called with more than two arguments, no argument can be a list.",{symbol:i.formatSymbol(e)})).allowExport()},nonListDoubleReducer:function(e){return n(t.t("Both arguments of '__symbol__' must be lists. For example, try typing: __recommendation__.",{symbol:i.formatSymbol(e),recommendation:i.formatSymbol(e)+"([1,2,3], [3,2,1])"})).allowExport()},nonListParametrizedReducer:function(e){return n(t.t("The first argument of '__symbol__' must be a list. For example, try typing: __recommendation__.",{symbol:i.formatSymbol(e),recommendation:i.formatSymbol(e)+"([1,2,3], 1)"})).allowExport()},indexIntoNonList:function(){return n(t.t("Cannot index into something that is not a list.")).allowExport()},listAsIndex:function(){return n(t.t("List index must not be a list.")).allowExport()},variableRange:function(e){return n(t.t("Range cannot depend on free variable '__symbol__'.",{symbol:i.formatSymbol(e[0])})).allowExport()},nonArithmeticRange:function(e){return n(t.t("Ranges must be arithmetic sequences.")).allowExport()},missingIntegralBounds:function(){return n(t.t("Integrals must have upper and lower bounds."))},shadowedIntegrationVariable:function(e){return n(t.t("You can't use '__symbol__' as an integration variable because it's already defined.",{symbol:i.formatSymbol(e)}))},badIntegralBoundDependency:function(e){return n(t.t("Integration bounds can't depend on integration variable '__symbol__'.",{symbol:i.formatSymbol(e)}))},badAnsContext:function(){return n(t.t("You can't use 'ans' in this context."))},ansUndefined:function(){return n(t.t("The previous expression didn't define any value for ans."))},variablesUnsupported:function(e){return n(t.t("This calculator does not support variables like '__variable__'.",{variable:i.formatSymbol(e)}))},functionUnsupported:function(e){return n(t.t("This calculator does not support the '__symbol__' function.",{symbol:i.formatSymbol(e)}))},constantUnsupported:function(e){return n(t.t("This calculator does not support the constant '__symbol__'.",{symbol:i.formatSymbol(e)}))},assignmentsUnsupported:function(){return n(t.t("This calculator does not support assignments."))},functionDefinitionsUnsupported:function(){return n(t.t("This calculator does not support function definitions."))},equationsUnsupported:function(){return n(t.t("This calculator does not support equations."))},inequalitiesUnsupported:function(){return n(t.t("This calculator does not support inequalities."))},regressionsUnsupported:function(){return n(t.t("This calculator does not support regressions."))},pointsUnsupported:function(){return n(t.t("This calculator does not support points."))},featureUnavailable:function(){return n(t.t("This feature is not available in the current calculator."))}}}),define("math/parsenode/expression",["require","pjs","./base","math/errormsg","math/types"],function(e){var t=e("pjs"),n=e("./base"),i=e("math/errormsg"),r=e("math/types");return t(n,function(e,t){e.init=function(e){if(!Array.isArray(e))throw new TypeError("Argument to expression constructor must be an Array.");t.init.call(this),this.args=e,this.valueType=this._getValueType(e),this.registerDependencies(),this.computeTreeSize()},e._getValueType=function(e){return r.Any},e.shouldExportAns=function(){return!0},e.registerDependencies=function(){for(var e=0;e<this.args.length;e++)this.addDependencies(this.args[e].getDependencies())},e.computeTreeSize=function(){for(var e=0,t=0;t<this.args.length;t++)this.args[t].treeSize&&(e+=this.args[t].treeSize);if(this.treeSize=e+1,e>1e4)throw i.deeplyNested()},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var n=[],i=0;i<this.args.length;i++)n.push(this.args[i].getConcreteTree(e,t));return this.typeCheck(n),this.copyWithArgs(n)},e.copyWithArgs=function(e){return new this.constructor(e)}})}),define("math/parsenode/list",["require","pjs","./expression","math/errormsg"],function(e){var t=e("pjs"),n=e("./expression"),i=e("math/errormsg");return t(n,function(e,t,n){function r(e){for(var t=1/0,n=0;n<e.length;n++)e[n].isList&&(t=Math.min(t,e[n].length));return t}e.init=function(e){if(t.init.call(this,e),this.length=e.length,0===this.length)throw i.emptyList()},e.isList=!0,e.getEvalStrings=function(){for(var e=[],t=0;t<this.args.length;t++)e.push(this.args[t].getEvalStrings());return e},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var n=[],r=0;r<this.args.length;r++){var s=this.args[r].getConcreteTree(e,t);if(s.isList)throw i.nestedList();n.push(s)}return this.typeCheck(n),new this.constructor(n)},e.getEvaluationInfo=function(){return this.args.every(function(e){return e.isConstant})?[{val:this.args.map(function(e){return e.constantValue}),operator:"="}]:void 0},e.getCompiledFunctions=function(e){return this.args.map(function(t){return t.getCompiledFunctions(e)[0]})},n.eachArgs=function(e,t){var n=r(e);if(!isFinite(n))return void t(e);for(var i=0;n>i;i++){for(var s=[],a=0;a<e.length;a++)s.push(e[a].isList?e[a].elementAt(i):e[a]);t(s)}},n.mapArgs=function(e,t){var n=r(e);if(!isFinite(n))return[t(e)];for(var i=[],s=0;n>s;s++){for(var a=[],o=0;o<e.length;o++)a.push(e[o].isList?e[o].elementAt(s):e[o]);i.push(t(a))}return i},n.wrap=function(e){return e.isList?e:n([e])}})}),define("math/parsenode/scalarexpression",["require","pjs","./expression","./list"],function(e){var t=e("pjs"),n=e("./expression"),i=e("./list");return t(n,function(e,t){e.init=function(e){t.init.call(this,e)},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var n,r=[],s=!1;for(n=0;n<this.args.length;n++){var a=this.args[n].getConcreteTree(e,t);a.isList&&(s=!0),r.push(a)}if(!s)return this.typeCheck(r),this._constantCollapsedCopy(r,e);var o=this,c=i.mapArgs(r,function(t){return o.typeCheck(t),o._constantCollapsedCopy(t,e)});return i(c)},e.getEvalStrings=function(){for(var e=[],t=[],n=0;n<this.args.length;n++){var i=this.args[n].getEvalStrings();e=e.concat(i.statements),t.push(i.expression)}return{statements:e,expression:this.scalarEvalExpression(t)}}})}),define("math/parsenode/expressionTypes",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),n=e("./scalarexpression"),i={Add:t(n,{}),Subtract:t(n,{}),Multiply:t(n,{}),Divide:t(n,{}),Exponent:t(n,{}),Negative:t(n,{}),And:t(n,{isInequality:function(){return this.args[0].isInequality()&&this.args[1].isInequality()}})};return i.RawExponent=t(i.Exponent,{}),i.RawDivide=t(i.Divide,{}),i}),define("math/parsenode/constant",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),n=e("./scalarexpression");return t(n,function(e,t){e.init=function(e){this.constantValue=e,t.init.call(this,[])},e.isConstant=!0,e.getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor(this.constantValue)},e.getEvalStrings=function(){return{statements:[],expression:this.scalarExprString()}},e.scalarExprString=function(){return this.constantValue>0?String(this.constantValue):"("+String(this.constantValue)+")"},e.getEvaluationInfo=function(){return[{val:this.constantValue,operator:"="}]},e.isNaN=function(){return"number"==typeof this.constantValue&&isNaN(this.constantValue)},e.okForImplicitFunction=function(){return!0}})}),define("math/parsenode/freevariable",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),n=e("./scalarexpression");return t(n,function(e,t){e.init=function(e){t.init.call(this,[]),this.addDependency(e),this._symbol=e},e.isFreeVariable=!0,e.scalarEvalExpression=function(e){return this._symbol},e.copyWithArgs=function(e){return this},e._constantCollapsedCopy=function(e){return this},e.getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this}})}),define("math/parsenode/nativefunction",["require","pjs","./scalarexpression","math/errormsg","math/functions"],function(e){var t=e("pjs"),n=e("./scalarexpression"),i=e("math/errormsg"),r=e("math/functions");return t(n,function(e,n,s){e.init=function(e){if(e.length!==this._arity)throw i.wrongArity(this._symbol,this._arity,e.length);n.init.call(this,e)},e.scalarEvalExpression=function(e){return this.head+"("+e.join(",")+")"},s.create=function(e,n,i){return t(this,function(t,s,a){a.isFunction=!0,t._symbol=e,t.head=n,t._arity=i,t.evaluate=r.createEvaluateFunction(t.scalarEvalExpression.bind(t),t._arity),a.getConcreteInvocationTree=function(e,t,n){return a(t).getConcreteTree(e,n)}})}})}),define("math/parsenode/typedfunction",["require","pjs","./nativefunction"],function(e){var t=e("pjs"),n=e("./nativefunction");return t(n,function(e,t,n,i){n.create=function(e,t,n,r){var s=n.length,a=i.create.call(this,e,t,s);return a.prototype._inputTypes=n,a.prototype._outputType=r,a}})}),define("math/parsenode/trigfunction",["require","pjs","./nativefunction","./expressionTypes"],function(e){var t=e("pjs"),n=e("./nativefunction"),i=e("./expressionTypes").Multiply;return t(n,function(e,t,n,r){n.create=function(e,t){var n=1,s=r.create(e,t,n);return s.getConcreteInvocationTree=function(e,t,n){var r=e.trigAngleMultiplier?[i([t[0],e.trigAngleMultiplier])]:t;return s(r).getConcreteTree(e,n)},s}})}),define("math/parsenode/inversetrigfunction",["require","pjs","./nativefunction","./expressionTypes"],function(e){var t=e("pjs"),n=e("./nativefunction"),i=e("./expressionTypes").Divide;return t(n,function(e,t,n,r){n.create=function(e,t){var n=1,s=r.create(e,t,n);return s.getConcreteInvocationTree=function(e,t,n){var r=s(t),a=e.trigAngleMultiplier?i([r,e.trigAngleMultiplier]):r;return a.getConcreteTree(e,n)},s}})}),define("math/parsenode/reducerfunction",["require","pjs","./expression","./list","./constant","math/functions","math/errormsg"],function(e){var t=e("pjs"),n=e("./expression"),i=e("./list"),r=e("./constant"),s=e("math/functions"),a=e("math/errormsg");return t(n,function(e,n,o){e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){for(var e=this.args[0],t=[],n=[],i=0;i<e.length;i++){var r=e.elementAt(i).getEvalStrings();t=t.concat(r.statements),n.push(r.expression)}var s=["["+n.join(",")+"]"];return{statements:t,expression:this.evalExpression(s)}},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var n,r,s=this.args;if(0===s.length)throw a.zeroArgReducer(this._symbol);if(1===s.length)n=s[0].getConcreteTree(e,t),r=!n.isList;else{if(2===s.length&&(s[0].isList||s[1].isList)){var o=this;return i(i.mapArgs(this.args,function(n){return o.copyWithArgs(n).getConcreteTree(e,t)}))}r=!0}if(r){for(var c=0;c<s.length;c++)if(s[c].isList)throw a.badListInReducer(this._symbol);n=i(s).getConcreteTree(e,t)}return this.typeCheck([n]),this._constantCollapsedCopy([n])},e._constantCollapsedCopy=function(e){for(var t=e[0],n=[],i=0;i<t.length;i++){var s=t.elementAt(i);if(!s.isConstant)return this.copyWithArgs(e);n.push(s.constantValue)}return r(this.evaluate([n]))},o.create=function(e,n){return t(o,function(t,i,r){t._symbol=e,t.head=n,t._arity=1,r.isFunction=!0,t.evaluate=s.createEvaluateFunction(t.evalExpression.bind(t),t._arity),r.getConcreteInvocationTree=function(e,t,n){return r(t).getConcreteTree(e,n)}})}})}),define("math/parsenode/doublereducerfunction",["require","pjs","./expression","./constant","math/parsenode/list","math/functions","math/errormsg"],function(e){var t=e("pjs"),n=e("./expression"),i=e("./constant"),r=e("math/parsenode/list"),s=e("math/functions"),a=e("math/errormsg");return t(n,function(e,n,o){e.init=function(){if(n.init.apply(this,arguments),2!==this.args.length)throw a.wrongDoubleReducerArity(this._symbol)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){for(var e=[],t=[],n=0;n<this.args.length;n++){for(var i=this.args[n],r=[],s=0;s<i.length;s++){var a=i.elementAt(s).getEvalStrings();Array.prototype.push.apply(e,a.statements),r.push(a.expression)}t.push("["+r.join(",")+"]")}return{statements:e,expression:this.evalExpression(t)}},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var n=this.args.map(function(n){return n.getConcreteTree(e,t)});if(!n[0].isList||!n[1].isList)throw a.nonListDoubleReducer(this._symbol);
return n[0].length>n[1].length&&(n[0]=r(n[0].args.slice(0,n[1].length))),n[1].length>n[0].length&&(n[1]=r(n[1].args.slice(0,n[0].length))),this.typeCheck(n),this._constantCollapsedCopy(n)},e._constantCollapsedCopy=function(e){for(var t=[],n=0;n<e.length;n++){for(var r=[],s=e[n],a=0;a<s.length;a++){var o=s.elementAt(a);if(!o.isConstant)return this.copyWithArgs(e);r.push(o.constantValue)}t.push(r)}return i(this.evaluate(t))},o.create=function(e,n){return t(o,function(t,i,r){t._symbol=e,t.head=n,t._arity=2,r.isFunction=!0,t.evaluate=s.createEvaluateFunction(t.evalExpression.bind(t),t._arity),r.getConcreteInvocationTree=function(e,t,n){return r(t).getConcreteTree(e,n)}})}})}),define("math/parsenode/parametrizedreducerfunction",["require","pjs","./expression","./list","./constant","math/functions","math/errormsg"],function(e){var t=e("pjs"),n=e("./expression"),i=e("./list"),r=e("./constant"),s=e("math/functions"),a=e("math/errormsg");return t(n,function(e,n,o){e.init=function(){if(n.init.apply(this,arguments),2!==this.args.length)throw a.wrongParametrizedReducerArity(this._symbol)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){for(var e=this.args[0],t=this.args[1],n=[],i=[],r=0;r<e.length;r++){var s=e.elementAt(r).getEvalStrings();Array.prototype.push.apply(n,s.statements),i.push(s.expression)}var a=t.getEvalStrings();Array.prototype.push.apply(n,a.statements);var o=["["+i.join(",")+"]",a.expression];return{statements:n,expression:this.evalExpression(o)}},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var n=this.args.map(function(n){return n.getConcreteTree(e,t)});if(!n[0].isList)throw a.nonListParametrizedReducer(this._symbol);return n[1].isList?i(n[1].args.map(function(e){return this.typeCheck([n[0],e]),this._constantCollapsedCopy([n[0],e])}.bind(this))):(this.typeCheck(n),this._constantCollapsedCopy(n))},e._constantCollapsedCopy=function(e){var t=e[0],n=e[1];if(!n.isConstant)return this.copyWithArgs(e);for(var i=[],s=0;s<t.length;s++){var a=t.elementAt(s);if(!a.isConstant)return this.copyWithArgs(e);i.push(a.constantValue)}return r(this.evaluate([i,n.constantValue]))},o.create=function(e,n){return t(o,function(t,i,r){t._symbol=e,t.head=n,t._arity=2,r.isFunction=!0,t.evaluate=s.createEvaluateFunction(t.evalExpression.bind(t),t._arity),r.getConcreteInvocationTree=function(e,t,n){return r(t).getConcreteTree(e,n)}})}})}),define("math/parsenode/builtinfunction",["require","math/parsenode/nativefunction","math/parsenode/typedfunction","math/parsenode/trigfunction","math/parsenode/inversetrigfunction","math/parsenode/reducerfunction","math/parsenode/doublereducerfunction","math/parsenode/parametrizedreducerfunction","math/types"],function(e){var t=e("math/parsenode/nativefunction"),n=e("math/parsenode/typedfunction"),i=e("math/parsenode/trigfunction"),r=e("math/parsenode/inversetrigfunction"),s=e("math/parsenode/reducerfunction"),a=e("math/parsenode/doublereducerfunction"),o=e("math/parsenode/parametrizedreducerfunction"),c=e("math/types");return{sin:i.create("sin","BuiltIn.sin"),cos:i.create("cos","BuiltIn.cos"),tan:i.create("tan","BuiltIn.tan"),cot:i.create("cot","BuiltIn.cot"),sec:i.create("sec","BuiltIn.sec"),csc:i.create("csc","BuiltIn.csc"),arcsin:r.create("arcsin","Math.asin"),arccos:r.create("arccos","Math.acos"),arctan:r.create("arctan","Math.atan"),arccot:r.create("arccot","BuiltIn.acot"),arcsec:r.create("arcsec","BuiltIn.asec"),arccsc:r.create("arccsc","BuiltIn.acsc"),sinh:t.create("sinh","BuiltIn.sinh",1),cosh:t.create("cosh","BuiltIn.cosh",1),tanh:t.create("tanh","BuiltIn.tanh",1),coth:t.create("coth","BuiltIn.coth",1),sech:t.create("sech","BuiltIn.sech",1),csch:t.create("csch","BuiltIn.csch",1),arcsinh:t.create("arcsinh","BuiltIn.asinh",1),arccosh:t.create("arccosh","BuiltIn.acosh",1),arctanh:t.create("arctanh","BuiltIn.atanh",1),arccoth:t.create("arccoth","BuiltIn.acoth",1),arcsech:t.create("arcsech","BuiltIn.asech",1),arccsch:t.create("arccsch","BuiltIn.acsch",1),sqrt:t.create("sqrt","Math.sqrt",1),rtxsqpone:t.create("rtxsqpone","BuiltIn.sqrtxsqp1",1),rtxsqmone:t.create("rtxsqmone","BuiltIn.sqrtxsqm1",1),nthroot:t.create("nthroot","BuiltIn.nthroot",2),log:t.create("log","BuiltIn.common_log",1),logbase:t.create("logbase","BuiltIn.log_base",2),ln:t.create("ln","BuiltIn.log",1),exp:t.create("exp","Math.exp",1),floor:t.create("floor","Math.floor",1),ceil:t.create("ceil","Math.ceil",1),round:t.create("round","Math.round",1),abs:t.create("abs","Math.abs",1),sign:t.create("sign","BuiltIn.sign",1),mod:t.create("mod","BuiltIn.mod",2),nCr:t.create("nCr","BuiltIn.nCr",2),nPr:t.create("nPr","BuiltIn.nPr",2),factorial:t.create("factorial","BuiltIn.factorial",1),polyGamma:t.create("polyGamma","BuiltIn.polyGamma",2),lcm:s.create("lcm","BuiltIn.listLCM"),gcd:s.create("gcd","BuiltIn.listGCD"),mean:s.create("mean","BuiltIn.mean"),total:s.create("total","BuiltIn.total"),stdev:s.create("stdev","BuiltIn.stdev"),stdevp:s.create("stdevp","BuiltIn.stdevp"),mad:s.create("mad","BuiltIn.mad"),length:s.create("length","BuiltIn.length"),min:s.create("min","BuiltIn.listMin"),max:s.create("max","BuiltIn.listMax"),argmin:s.create("argmin","BuiltIn.argMin"),argmax:s.create("argmax","BuiltIn.argMax"),median:s.create("median","BuiltIn.median"),"var":s.create("var","BuiltIn.var"),cov:a.create("cov","BuiltIn.cov"),covp:a.create("covp","BuiltIn.covp"),corr:a.create("corr","BuiltIn.corr"),quantile:o.create("quantile","BuiltIn.quantile"),upperQuantileIndex:o.create("upperQuantileIndex","BuiltIn.upperQuantileIndex"),lowerQuantileIndex:o.create("lowerQuantileIndex","BuiltIn.lowerQuantileIndex"),distance:n.create("distance","BuiltIn.distance",[c.Point,c.Point],c.Number),midpoint:n.create("midpoint","BuiltIn.midpoint",[c.Point,c.Point],c.Point)}}),define("math/parsenode/identifier",["require","pjs","./expression","./freevariable","graphing/label","./builtinfunction","math/errormsg"],function(e){var t=e("pjs"),n=e("./expression"),i=e("./freevariable"),r=e("graphing/label"),s=e("./builtinfunction"),a=e("math/errormsg");return t(n,function(e,t,n){e.init=function(e){t.init.call(this,[]),this._symbol=r.latexToIdentifier(e),this.setInputString(e),this.addDependency(this._symbol)},e.evaluate=function(){throw"Cannot evaluate undefined variable "+this._symbol},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var n=e[this._symbol];if(n){if(n.isError)throw n;return n.isFunction?n.getConcreteInvocationTree(e,[],t):n.getConcreteTree(e,t)}if(s.hasOwnProperty(this._symbol))throw a.functionUnsupported(r.latexToIdentifier(this.getInputString()));return i(this._symbol)},e.okForImplicitFunction=function(){return!0}})}),define("math/parsenode/ans",["require","pjs","./identifier","math/errormsg"],function(e){var t=e("pjs"),n=e("./identifier"),i=e("math/errormsg");return t(n,function(e,t,n){e.getConcreteTree=function(e,n){if(n&&n[this.type])return n[this.type].call(this,e,n);if(void 0===e[this._symbol])throw i.ansUndefined();return t.getConcreteTree.call(this,e,n)}})}),define("math/parsenode/dummyindex",["require","pjs","./freevariable"],function(e){var t=e("pjs"),n=e("./freevariable");return t(n,function(e,t){e.init=function(){t.init.apply(this,arguments)}})}),define("math/parsenode/range",["require","pjs","./expression","math/errormsg","./list","./constant","math/distance"],function(e){var t=e("pjs"),n=e("./expression"),i=e("math/errormsg"),r=e("./list"),s=e("./constant"),a=e("math/distance");return t(n,function(e,t,n){function o(e,t,n,r,s){if(n<e.length&&!a.approx(s,e.elementAt(n).constantValue,10))throw i.nonArithmeticRange();if(r-n<=t.length&&r-n>1&&!a.approx(s,t.elementAt(t.length-r+n).constantValue,10))throw i.nonArithmeticRange()}e.init=function(e){t.init.call(this,e),this.beginning=e[0],this.end=e[1]},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var n=this.beginning.getConcreteTree(e,t),a=this.end.getConcreteTree(e,t);if(n.getDependencies().length)throw i.variableRange(n.getDependencies());if(a.getDependencies().length)throw i.variableRange(a.getDependencies());if(!n.isList||!a.isList)throw new Error("Programming Error: range bounds must be List nodes.");var c,l=n.elementAt(0).constantValue,u=a.elementAt(a.length-1).constantValue,h=u-l;c=1===n.length?h>=0?1:-1:n.elementAt(1).constantValue-l;var d=Math.round(h/c)+1;if(!isFinite(d)||d<n.length||d<a.length)throw i.nonArithmeticRange();for(var p=[s(l)],f=1;d>f;f++){var m=l+f*c;o(n,a,f,d,m),p.push(s(m))}return r(p)}})}),define("math/parsenode/listaccess",["require","pjs","./expression","math/errormsg"],function(e){var t=e("pjs"),n=e("./expression"),i=e("math/errormsg");return t(n,function(e,t){e.init=function(e){t.init.call(this,e),this.list=e[0],this.index=e[1]},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var n=this.index.getConcreteTree(e,t),r=this.list.getConcreteTree(e,t),s=[r,n];if(n.isList)throw i.listAsIndex();if(!r.isList)throw i.indexIntoNonList();return this.typeCheck(s),this._constantCollapsedCopy(s)},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.list.getEvalStrings(),n=e.statements.slice(),i=this.tmpVar();n.push("var "+i);for(var r=[],s=0;s<t.length;s++)r.push("case "+s+":"+t[s].statements.join(";")+";"+i+"="+t[s].expression);r.push("default:"+i+"=NaN");var a="switch(Math.floor("+e.expression+")-1){\n"+r.join(";break\n")+"\n}";return n.push(a),{statements:n,expression:i}}})}),define("math/parsenode/orderedpair",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),n=e("./scalarexpression");return t(n,function(e,t,n){e.asArray=function(){return[+this.args[0].constantValue,+this.args[1].constantValue]},e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies()).filter(function(t){return!e.validParametricVariable(t)})},e.getEvalStrings=function(){for(var e=[],t=[],n=0;n<this.args.length;n++){var i=this.args[n].getEvalStrings();e=e.concat(i.statements),t.push(i.expression)}return{statements:e,expression:"["+t.join(",")+"]"}}})}),define("math/parsenode/movablepoint",["require","pjs","./orderedpair"],function(e){var t=e("pjs"),n=e("./orderedpair");return t(n,function(e,t){e.init=function(e,n,i){t.init.call(this,e),this.moveStrategy=n,this.defaultDragMode=i},e.isMovablePoint=!0})}),define("math/parsenode/orderedpairaccess",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),n=e("./scalarexpression");return t(n,function(e,t){e.init=function(e){t.init.call(this,e),this.point=e[0],this.index=e[1]},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.point.getEvalStrings(),n=[];Array.prototype.push.apply(n,e.statements),Array.prototype.push.apply(n,t.statements);var i=t.expression+"["+e.expression+"-1]";return{statements:n,expression:i}}})}),define("math/comparators",["require"],function(e){var t={"<":{inclusive:!1,direction:-1},"!=":{inclusive:!1,direction:0},">":{inclusive:!1,direction:1},"<=":{inclusive:!0,direction:-1},"=":{inclusive:!0,direction:0},">=":{inclusive:!0,direction:1}},n=function(e,t){switch(t){case-1:return e?"<=":"<";case 0:return e?"=":"!=";case 1:return e?">=":">";default:throw"Programming error.  Comparators must have a direction of -1, 0, or 1"}};return{table:t,get:n}}),define("math/parsenode/basecomparator",["require","pjs","./scalarexpression","./expressionTypes","math/comparators","math/functions"],function(e){var t=e("pjs"),n=e("./scalarexpression"),i=e("./expressionTypes").Subtract,r=e("math/comparators").table,s=e("math/functions");return t(n,function(e,n,a){a.create=function(e,n){return n=n||e,t(a,function(t,i){t.operator=e,t.isInequality=function(){return 0!==r[e].direction},t.compiledOperator=n,t.scalarEvalExpression=function(e){return e.join(n)},t.evaluate=s.createEvaluateFunction(t.scalarEvalExpression,2)})},e.init=function(e){n.init.call(this,e),this._difference=i(-1===r[this.operator].direction?[e[1],e[0]]:[e[0],e[1]])}})}),define("math/parsenode/comparator",["require","math/parsenode/basecomparator"],function(e){var t=e("math/parsenode/basecomparator");return{"<":t.create("<"),">":t.create(">"),"<=":t.create("<="),">=":t.create(">="),"=":t.create("=","===")}}),define("math/parsenode/piecewise",["require","pjs","./scalarexpression","./constant"],function(e){var t=e("pjs"),n=e("./scalarexpression"),i=e("./constant"),r=t(n,{});return r.chain=function(e){for(var t,n=i(NaN);e.length;)t=e.pop(),n=r([t.condition,t.if_expr,n]);return n},r.empty=function(){return r([i(!0),i(1),i(NaN)])},r}),define("math/parsenode/doubleinequality",["require","pjs","./base","./identifier","./constant","./piecewise","math/comparators","./comparator"],function(e){var t=e("pjs"),n=e("./base"),i=e("./identifier"),r=e("./constant"),s=e("./piecewise"),a=e("math/comparators"),o=e("./comparator");return t(n,function(e,t){e.init=function(e){t.init.call(this),this.args=e,this._symbol=e[2]._symbol,this._operators=[e[1],e[3]],this._expressions=[e[0],e[4]];var n=a.get(a.table[e[1]].inclusive&&a.table[e[3]].inclusive,a.table[e[1]].direction);this._indicator=o[n]([e[0],e[4]]),this.addDependency(this._symbol),this.addDependencies(this._expressions[0].getDependencies()),this.addDependencies(this._expressions[1].getDependencies())},e.isInequality=function(){return!0},e.isShadeBetween=function(){return!0},e.getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor([s([this._indicator,this._expressions[0],r(NaN)]).getConcreteTree(e,t),this._operators[0],i(this._symbol),this._operators[1],s([this._indicator,this._expressions[1],r(NaN)]).getConcreteTree(e,t)])},e.getCompiledFunctions=function(e){return[this._expressions[0].getCompiledFunctions(e)[0],this._expressions[1].getCompiledFunctions(e)[0]]},e.getCompiledDerivatives=function(){return[this._expressions[0].getCompiledDerivatives()[0],this._expressions[1].getCompiledDerivatives()[0]]}})}),define("math/parsenode/repeatedoperator",["require","pjs","./scalarexpression","./dummyindex","./constant","math/errormsg"],function(e){var t=e("pjs"),n=e("./scalarexpression"),i=e("./dummyindex"),r=e("./constant"),s=e("math/errormsg");return t(n,function(e,t){e.init=function(e){t.init.call(this,e),this._index=e[0],this._index instanceof i&&this.removeDependency(this._index._symbol)},e.getEvalStrings=function(){var e=[],t=this.tmpVar(),n=this._index._symbol,i=this.tmpVar(),r=this.tmpVar(),s=this.args[1].getEvalStrings(),a=this.args[2].getEvalStrings(),o=this.args[3].getEvalStrings();Array.prototype.push.apply(e,s.statements),e.push("var "+i+" = Math.round("+s.expression+")"),Array.prototype.push.apply(e,a.statements),e.push("var "+r+" = Math.round("+a.expression+")"),e.push("var "+t+"="+this.starting_value);var c="for (var "+n+"="+i+";"+n+"<="+r+";"+n+"++) {"+o.statements.join(";")+";"+t+this.in_place_operator+o.expression+"};",l="if(!isFinite("+r+"-"+i+")) {"+t+"=("+r+"<"+i+"?"+this.starting_value+":NaN);}else{"+c+"}";return e.push(l),{statements:e,expression:t}},e.getConcreteTree=function(e,n){if(n&&n[this.type])return n[this.type].call(this,e,n);if(e[this._index._symbol])throw s.shadowedIndex(this._index._symbol);var r=Object.create(e);r[this._index._symbol]=i(this._index._symbol);var a=t.getConcreteTree.call(this,r,n);return a},e.evaluate=function(e,t,n){var i=n.getCompiledFunctions([this._index._symbol])[0].fn;if(t=Math.round(t),e=Math.round(e),!isFinite(t-e))return e>t?this.starting_value:NaN;for(var r=this.starting_value,s=e;t>=s;s++)r=this.update(r,i(s));return r},e._constantCollapsedCopy=function(e){if(e[1].isConstant&&e[2].isConstant){var t=e[1].constantValue,n=e[2].constantValue,i=e[3];if(i.isConstant)return r(this.evaluateConstant([t,n,i.constantValue]));var s=i.getDependencies();if(0===s.length||1===s.length&&s[0]===e[0]._symbol)return r(this.evaluate(t,n,i))}return this.copyWithArgs(e)}})}),define("math/parsenode/sum",["require","pjs","./repeatedoperator"],function(e){var t=e("pjs"),n=e("./repeatedoperator");return t(n,function(e,t){e.in_place_operator="+=",e.starting_value=0,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return 0>=t?this.starting_value:t*e[2]},e.update=function(e,t){return e+t}})}),define("math/parsenode/product",["require","pjs","./repeatedoperator"],function(e){var t=e("pjs"),n=e("./repeatedoperator");return t(n,function(e,t){e.in_place_operator="*=",e.starting_value=1,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return 0>=t?this.starting_value:Math.pow(e[2],t)},e.update=function(e,t){return e*t}})}),define("math/parsenode/integral",["require","pjs","./scalarexpression","./dummyindex","./constant","./expressionTypes","math/errormsg","math/builtin"],function(e){var t=e("pjs"),n=e("./scalarexpression"),i=e("./dummyindex"),r=e("./constant"),s=e("./expressionTypes"),a=e("math/errormsg"),o=e("math/builtin"),c=s.Multiply,l=s.Subtract;return t(n,function(e,t){e.init=function(e){t.init.call(this,e),this._differential=e[0],this._differential instanceof i&&this.removeDependency(this._differential._symbol)},e.getEvalStrings=function(){var e=this.args[0],t=this.args[1],n=this.args[2],i=this.args[3],r=[],s=this.tmpVar(),a=e._symbol,o=this.tmpVar(),c=this.tmpVar(),l=t.getEvalStrings(),u=n.getEvalStrings(),h=i.getEvalStrings();r.push("var "+o+" = "+l.expression),r.push("var "+c+" = "+u.expression),Array.prototype.push.apply(r,l.statements),Array.prototype.push.apply(r,u.statements),r.push("var "+s+" = function ("+a+") { "+h.statements.join("; ")+"; return "+h.expression+";}");var d="BuiltIn.quad("+[s,o,c].join(", ")+")";return{statements:r,expression:d}},e.getConcreteTree=function(e,n){if(n&&n[this.type])return n[this.type].call(this,e,n);if(e[this._differential._symbol])throw a.shadowedIntegrationVariable(this._differential._symbol);var r=Object.create(e);r[this._differential._symbol]=i(this._differential._symbol);var s=t.getConcreteTree.call(this,r,n);return s},e.evaluate=function(e,t,n){var i=this.args[0],r=n.getCompiledFunctions([i._symbol])[0].fn;return o.quad(r,e,t)},e._constantCollapsedCopy=function(e){var t=e[0],n=e[1],i=e[2],s=e[3];if(n.dependsOn(t._symbol)||i.dependsOn(t._symbol))throw a.badIntegralBoundDependency(t._symbol);var o=s.getDependencies();if(n.isConstant&&i.isConstant){var u=i.constantValue-n.constantValue;if(s.isConstant)return r(s.constantValue*u);if(!s.dependsOn(t._symbol))return c([s,r(u)]);if(1===o.length&&o[0]===t._symbol)return r(this.evaluate(n.constantValue,i.constantValue,s))}else if(!s.dependsOn(t._symbol))return c([s,l([i,n])]);return this.copyWithArgs(e)}})}),define("math/parsenode/functioncall",["require","pjs","./expression","math/errormsg","./identifier","./expressionTypes","./builtinfunction","graphing/label"],function(e){var t=e("pjs"),n=e("./expression"),i=e("math/errormsg"),r=e("./identifier"),s=e("./expressionTypes").Multiply,a=e("./builtinfunction"),o=e("graphing/label");return t(n,function(e,t){e.init=function(e,n){"string"==typeof e&&(e=r(e)),this._identifier=e,this._symbol=e._symbol,t.init.call(this,n),this.addDependency(this._symbol)},e.copyWithArgs=function(e){return new this.constructor(r(this._symbol),e)},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var n=e[this._symbol];if(n&&n.isError)throw n;if(!n||!n.isFunction){if(a.hasOwnProperty(this._symbol))throw i.functionUnsupported(o.latexToIdentifier(this._identifier.getInputString()));if(1==this.args.length){var c=[r(this._symbol),this.args[0]];return s(c).getConcreteTree(e,t)}if(n)throw i.variableAsFunction(this._symbol);throw i.functionNotDefined(this._symbol)}for(var l=[],u=0;u<this.args.length;u++){var h=this.args[u].getConcreteTree(e,t);l.push(h)}return n.getConcreteInvocationTree(e,l,t)}})}),define("math/parsenode/functionexponent",["require","pjs","./expression","./expressionTypes","./functioncall"],function(e){var t=e("pjs"),n=e("./expression"),i=e("./expressionTypes"),r=i.Multiply,s=i.Exponent,a=e("./functioncall");return t(n,function(e,t){e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var n=this.args[0]._symbol;return e[n]&&e[n].isFunction?s([a(n,[this.args[1]]),this.args[2]]).getConcreteTree(e,t):r([this.args[0],s([this.args[1],this.args[2]])]).getConcreteTree(e,t)}})}),define("math/parsenode/prime",["require","pjs","./expression","./identifier","math/errormsg"],function(e){var t=e("pjs"),n=e("./expression"),i=e("./identifier"),r=e("math/errormsg");return t(n,function(e,t){e.init=function(e,n){t.init.call(this,n),this.order=e},e.copyWithArgs=function(e){return new this.constructor(this.order,e)},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var n=this.args[0],s=n.args[0];if(!e[n._symbol])throw r.functionNotDefined(n._symbol);var a,o=this.tmpVar();if("logbase"===n._symbol){if(2!==n.args.length)throw r.primedFunctionArity();a=[i(o),n.args[1]]}else{if(1!==n.args.length)throw r.primedFunctionArity();a=[i(o)]}for(var c=n.copyWithArgs(a).getConcreteTree(e,t),l=0;l<this.order;l++)c=c.takeDerivative(o);var u={};return u[o]=s,c.substitute(u).getConcreteTree(e,t)}})}),define("math/builtinconstants",["require","math/parsenode/constant"],function(e){var t=e("math/parsenode/constant");return{pi:t(Math.PI),tau:t(2*Math.PI),e:t(Math.E),trigAngleMultiplier:t(1)}}),define("math/builtinframe",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){var t,n=e("math/builtinconstants"),i=e("math/parsenode/builtinfunction"),r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);for(t in i)i.hasOwnProperty(t)&&(r[t]=i[t]);return r}),define("math/parsenode/derivative",["require","pjs","./scalarexpression","./freevariable","./identifier","math/builtinframe","math/errormsg","math/types"],function(e){var t=e("pjs"),n=e("./scalarexpression"),i=e("./freevariable"),r=e("./identifier"),s=e("math/builtinframe"),a=e("math/errormsg"),o=e("math/types");return t(n,function(e,t){e.init=function(e,n){this._symbol=r(e)._symbol,t.init.call(this,n)},e.getConcreteTree=function(e,n){if(n&&n[this.type])return n[this.type].call(this,e,n);if(e[this._symbol]){var r=Object.create(e);r[this._symbol]=i(this._symbol);var s=e[this._symbol].getConcreteTree(e,n);if(s.valueType!==o.Number&&s.valueType!==o.ListOfNumber)throw a.derivativeVariableTypeError(this._symbol,[s.valueType]);var c={};return c[this._symbol]=s,t.getConcreteTree.call(this,r,n).substitute(c).getConcreteTree(e,n)}return t.getConcreteTree.call(this,e,n)},e._constantCollapsedCopy=function(e){return e[0].takeDerivative(this._symbol).getConcreteTree(s)}})}),define("math/parsenode/equation",["require","./base","pjs","./expressionTypes","math/parsenode/comparator"],function(e){var t=e("./base"),n=e("pjs"),i=e("./expressionTypes").Subtract,r=e("math/parsenode/comparator");return n(t,function(e,t){e.init=function(e,n){t.init.call(this),this.addDependencies(e.getDependencies()),this.addDependencies(n.getDependencies()),this._lhs=e,this._rhs=n,this._difference=i([this._lhs,this._rhs])},e.asComparator=function(){return r["="]([this._lhs,this._rhs])},e.getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this.asComparator().getConcreteTree(e,t)}})}),define("math/parsenode/assignment",["require","./base","./equation","./identifier","pjs"],function(e){var t=e("./base"),n=e("./equation"),i=e("./identifier"),r=e("pjs");return r(t,function(e,t){e.init=function(e,n){t.init.call(this),e=e._symbol,this.addDependencies(n.getDependencies()),this._expression=n,this._symbol=e,this._exports=this.computeExports()},e.shouldExportAns=function(){return!0},e.computeExports=function(){for(var e=this._symbol,t=this.getDependencies(),n=0;n<t.length;n++)if(t[n]===e)return[];return[e]},e.getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this._expression.getConcreteTree(e,t)},e.isEquation=function(e){return-1!==e.getDependencies().indexOf(this._symbol)},e.asEquation=function(){var e=n(i(this._symbol),this._expression);return e.userData=this.userData,e},e.getSliderInfo=function(){return this._expression.isConstant&&"number"==typeof this._expression.constantValue&&isFinite(this._expression.constantValue)?{value:this._expression.constantValue}:void 0}})}),define("math/parsenode/functiondefinition",["require","pjs","./base","math/errormsg"],function(e){var t=e("pjs"),n=e("./base"),i=e("math/errormsg");return t(n,function(e,t){e.init=function(e,n,i){t.init.call(this),e=e._symbol,this._argSymbols=n.map(function(e){return e._symbol}),this._symbol=e,this._exports=[e],this._expression=i,this.addDependencies(this._argSymbols),this.addDependencies(this._expression.getDependencies())},e.isFunction=!0,e.getConcreteInvocationTree=function(e,t,n){if(t.length!==this._argSymbols.length)throw i.wrongArity(this._symbol,this._argSymbols.length,t.length);for(var r=Object.create(e),s=0;s<this._argSymbols.length;s++)r[this._argSymbols[s]]=t[s];return this._expression.getConcreteTree(r,n)},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var n=0;n<this._argSymbols.length;n++){if(e[this._argSymbols[n]])throw i.parameterAlreadyDefined(this._argSymbols[n]);if(this._argSymbols[n]===this._symbol)throw i.parameterAlreadyDefined(this._argSymbols[n])}return this._expression.getConcreteTree(e,t)},e.getArgs=function(){return this._args},e.getSliderVariables=function(e,t){var n=this._argSymbols;return e.sliderVariables(t.getDependencies()).filter(function(e){return-1===n.indexOf(e)})}})}),define("math/parsenode/optimizedregression",["require","pjs","./base"],function(e){var t=e("pjs"),n=e("./base");return t(n,function(e,t){e.init=function(e,n,i,r,s){t.init.call(this),this.parameters=e,this.residuals=n,this.statistics=i,this.model=r,this.isModelValid=s.isModelValid,this.residualVariable=s.residualVariable,this.residualSuggestionId=s.residualSuggestionId,this.shouldSuggestLogMode=s.shouldSuggestLogMode,this._exports=[this.residualVariable];for(var a in e)e.hasOwnProperty(a)&&this._exports.push(a);this.addDependencies(r.getDependencies())},e.getCompiledFunctions=function(){return this.model.getCompiledFunctions.apply(this.model,arguments)},e.evaluate=function(){return this.model.evaluate.apply(this.model,arguments)}})}),define("math/parsenode/regression",["require","pjs","./base","numeric","math/distance","math/builtin","graphing/label","math/errormsg","./error","./optimizedregression","./list","./functioncall","./identifier","./constant","./freevariable","./expressionTypes"],function(e){var t=e("pjs"),n=e("./base"),i=e("numeric"),r=e("math/distance"),s=e("math/builtin"),a=e("graphing/label"),o=e("math/errormsg"),c=e("./error"),l=e("./optimizedregression"),u=e("./list"),h=e("./functioncall"),d=e("./identifier"),p=e("./constant"),f=e("./freevariable"),m=e("./expressionTypes"),g=m.Subtract;return t(n,function(e,t,n){function m(e,t){for(var n=0,i=0;i<e.length;i++){var r=e[i].fn.apply(void 0,t);n+=r*r}return n/e.length}function v(e,t){for(var n=[],i=0;i<e.length;i++)n.push(e[i].fn.apply(void 0,t));return n}function y(e,t){for(var n=[],i=0;i<e.length;i++){for(var r=[],s=0;s<e[i].length;s++)r.push(e[i][s].fn.apply(void 0,t));n.push(r)}return n}function b(e,t,n,r,s){for(var a=[],o=0;o<t.length;o++)a.push(0);for(var c=y(t,a),l=i.LU(i.dot(c,i.transpose(c)),!0),u=a,h=!1,d=0;5>d;d++){var p=v(e,a),f=i.neg(i.LUsolve(l,i.dot(c,p)));if(!i.all(i.isFinite(f)))return x(e,t,n,r,s);if(a=i.add(u,f),h=i.all(i.eq(u,a)))break;u=a}return{solution:a,MSE:m(e,a)}}function _(e,t,n,r){for(var s=n,a=m(e,s),o=.001,c=2,l=.1,u=[],h=0;h<t.length;h++)u.push(1);for(var d=0,p=!1,f=y(t,s),g=s,b=a;r>d&&!p;){var _=v(e,s),x=i.transpose(f),w=i.dot(f,x);if(!i.all(i.isFinite(_)))break;if(!i.all(i.isFinite(w)))break;for(var S=!1;r>d&&!p&&!S;){d+=1;var k=i.LU(i.add(w,i.diag(i.mul(o,u))),!0),E=i.neg(i.LUsolve(k,i.dot(f,_))),T=E;if(s=i.add(g,T),a=m(e,s),p=i.all(i.eq(s,g))){g=s,b=a;break}var C;if(isFinite(a)&&b>=a&&(C=y(t,s),S=i.all(i.isFinite(C))),S){f=C,g=s,b=a,o*=l,o=Math.max(1e-64,o);break}o*=c}}return{solution:g,MSE:m(e,g)}}function x(e,t,n,i,s){var a,o=[];for(i||(i={}),s||(s={}),a=0;a<n.length;a++){var c=n[a];s[c]&&isFinite(s[c].constantValue)?o.push(+s[c].constantValue):i.hasOwnProperty(c)&&isFinite(i[c])?o.push(+i[c]):o.push(1)}var l=C(30,n),u=M(e,t,l,3,5),h=M(e,t,u,60,1),d=_(e,t,h[0],250),p=_(e,t,o,100);return isFinite(p.MSE)?p.MSE<d.MSE?p:r.approx(p.MSE,d.MSE,8)?p:d:d}function w(e,t,n,i){var r,s,a=t.getDependencies();for(s=0;s<a.length;s++)if(!e.validRegressionParameter(a[s]))throw o.invalidRegressionParameter(a[s]);var c=t.getCompiledFunctions(a);if(a.length){var l={};for(s=1;s<a.length;s++)l[a[s]]=f(a[0]);var u=t.substitute(l).isLinear(a[0]),h=[];for(s=0;s<a.length;s++)h.push(t.takeDerivative(a[s]).getCompiledFunctions(a));r=u?b(c,h,a,n,i):x(c,h,a,n,i)}else r={solution:[],MSE:m(c,[])};var d={};for(s=0;s<a.length;s++)d[a[s]]=p(r.solution[s]);return d}function S(e,t){var n=e.length,i=e[0],s=t[0],a=e[n-1],o=t[n-1];if(!(isFinite(i)&&isFinite(a)&&isFinite(s)&&isFinite(o)))return!1;if(o-s===0)return!1;var c=a-i;if(0===c)return!1;for(var l=1;n-1>l;l++){var u=e[l],h=t[l],d=(o*(u-i)+s*(a-u))/c;if(!r.approx(h,d,5))return!1}return!0}function k(e,t,n){var i=Object.create(t);for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r]);return e.getConcreteTree(i)}e.init=function(e,n){t.init.call(this),this._lhs=e,this.isLhsSimple=e instanceof d||e instanceof u,this._logLhs=h("ln",[e]),this._rhs=n,this._difference=g([e,n]),this._logDifference=g([h("ln",[e]),h("ln",[n])]),this.addDependencies(e.getDependencies()),this.addDependencies(n.getDependencies())},e.isRegression=!0,e.chooseResidualVariable=function(e){if(this.userData&&this.userData.residualVariable){var t=a.latexToIdentifier(this.userData.residualVariable);if(!e[t])return t}for(var n,i=this.getDependencies(),r=0;r<i.length;r++){var s=i[r].match(/_(.*)/);if(s&&(n="e_"+s[1],!e[n]))return n}for(var o=1;;){if(n="e_"+o,!e[n])return n;o++}},e.getRHSModel=function(e,t){function n(e,t){for(var n=0;n<i.length;n++)if(i[n].node===this)return i[n].tmpVar;var s=f(this.tmpVar()),a=this.getConcreteTree(e);return a.getDependencies().length&&(r=!1),i.push({node:this,tmpVar:s,symbol:s._symbol,concrete:a}),s}var i=[],r=!0,s={List:n,TableColumn:n,Range:n},a=this._rhs.tryGetConcreteTree(e,s);return{node:a,substituted:a.isError?a:a.substitute(t),replacedNodes:i,isValid:r}};var E=[18.9,.105,.0113,.089,4.414,34.32,8.61,.373,.06,.149,1.84,9.26,5,.7,.2,1.13,2.61,1.89,1,.007,30,120,1500,4e-4,7.23,-1,-.0081,-.03,-28.6,-1.71,-.4,-6.94,-.777],T=function(e){var t=503*e%E.length;return E[t]},C=function(e,t){for(var n,i=[],r=t.length,s=0;e>s;s++){n=[];for(var a=0;r>a;a++)0===s?n[a]=0:1===s?n[a]=1:n[a]=T(s*r+a);i.push(n)}return i},M=function(e,t,n,i,r){for(var s=[],a=0;a<n.length;a++)s.push({soln:_(e,t,n[a],i),startingVals:n[a]});s.sort(function(e,t){return isNaN(e.soln.MSE)?1:isNaN(t.soln.MSE)?-1:e.soln.MSE-t.soln.MSE});for(var o=[],c=0;r>c;c++)o.push(s[c].startingVals);return o};e.computeStatistics=function(e,t,n,i,a){for(var c=0,l=0;l<n.length;l++){var h=n.args[l].constantValue;c+=h*h}var d=c/n.length;if(!isFinite(d))throw o.optimizationError();var p=e.isList?s.varp(e.args.map(function(e){return+e.constantValue})):0;if(e.getDependencies().length||!isFinite(p)||0>=p||!this.isLhsSimple)return{RMSE:Math.sqrt(d)};var f=1-d/p;if(t.isValid&&1===t.replacedNodes.length){var m=[],g=[],v=i&&(a===P.LINLOG||a===P.LOGLOG);u.eachArgs([t.replacedNodes[0].concrete,e],function(e){m.push(v?Math.log(e[0].constantValue):+e[0].constantValue),g.push(+e[1].constantValue)});var y=s.corr(m,g);if(r.approx(y*y,f,8))return{r:y,rsquared:y*y}}return{Rsquared:f}},e.getResidualSuggestionId=function(e,t){var n,i=this._rhs.getDependencies();for(var r in t)if(t.hasOwnProperty(r)&&t[r].concreteTree.isTable&&t[r].concreteTree.columns[0]){var s=t[r].rawTree.columns;if(s&&s.length){var a=s[0].getExports();if(1===a.length&&-1!==i.indexOf(a[0])){for(var o=1;o<s.length;o++)if(-1!==s[o].getDependencies().indexOf(e))return;n=n?n:r}}}return n?n:void 0;
};var P={NONE:0,LOGLIN:1,LOGLOG:2,LINLOG:3};e.linearizingTransformation=function(e,t){if(!this.isLhsSimple)return P.NONE;var n=t.substituted;if(n.isError)return P.NONE;var i=n.getDependencies();if(1!==i.length)return P.NONE;if(isFinite(t.node.polynomialOrder(i[0])))return P.NONE;var r=n.getCompiledFunctions(i);if(1!==r.length)return P.NONE;var s=r[0].fn,a=t.replacedNodes[0].concrete;if(!a.isList)return P.NONE;var o=a.args.map(function(e){return+e.constantValue});if(o.length<3)return P.NONE;o.sort(function(e,t){return e-t});var c=o.map(s),l=c.map(Math.log),u=o.map(Math.log),h=e.args.every(function(e){return isFinite(Math.log(+e.constantValue))});return S(o,l)&&h?P.LOGLIN:S(u,l)&&h?P.LOGLOG:S(u,c)?P.LINLOG:P.NONE},e.optimize=function(e,t,n,i,r){var s=this._lhs.getConcreteTree(t),c=this._difference.getConcreteTree(t);if(!c.isList)throw o.nonListRegression();var u,h=w(e,c,this.userData.regressionParameters,i),d=this.getRHSModel(t,h),p=k(this._difference,t,h),f=this.linearizingTransformation(s,d);if(!this.userData.isLogModeRegression||f!==P.LOGLIN&&f!==P.LOGLOG)u=this.computeStatistics(s,d,p,this.userData.isLogModeRegression,f);else{var m=this._logDifference.getConcreteTree(t),g=this._logLhs.getConcreteTree(t);h=w(e,m,this.userData.regressionParamters,i),d=this.getRHSModel(t,h),p=k(this._difference,t,h);var v=k(this._logDifference,t,h);u=this.computeStatistics(g,d,v,this.userData.isLogModeRegression,f)}var y=this.chooseResidualVariable(n),b=this.getResidualSuggestionId(y,r);return this.userData.residualVariable=a.identifierToLatex(y),l(h,p,u,d.substituted,{isModelValid:d.isValid,residualVariable:y,residualSuggestionId:b,shouldSuggestLogMode:f!==P.NONE})},e.tryOptimize=function(){try{return this.optimize.apply(this,arguments)}catch(e){if(e instanceof c)return e;throw e}},e.exportTo=function(e,t,n){if(!t.isError){for(var i in t.parameters)t.parameters.hasOwnProperty(i)&&(e.assignmentForbidden(i)||(n[i]=n[i]?o.multiplyDefined(i):t.parameters[i]));e.assignmentForbidden(t.residualVariable)||(n[t.residualVariable]=t.residuals)}},e.getSliderVariables=function(){return[]}})}),define("math/parsenode/table",["require","pjs","./base"],function(e){var t=e("pjs"),n=e("./base");return t(n,function(e,t){e.init=function(e){t.init.call(this),this.columns=e,this._exports=[];for(var n=0;n<e.length;n++)this.addDependencies(e[n].getDependencies()),Array.prototype.push.apply(this._exports,e[n].getExports())},e.exportPenalty=1,e.isTable=!0,e.exportTo=function(e,t,n){for(var i=0;i<this.columns.length;i++){var r=this.columns[i].getExports();if(r.length){var s=r[0];e.assignmentForbidden(s)||n[s]||(t.isError?n[s]=t:this.columns[i].exportTo(e,t.columns[i],n))}}},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var n=[],i=Object.create(e),r=0;r<this.columns.length;r++){var s=this.columns[r].getConcreteTree(i,e,t);s.isIndependent&&this.columns[r].exportToLocal(s,i),n.push(s)}return new this.constructor(n)},e.getAllIds=function(){return this.columns.map(function(e){return e.header.userData.id})}})}),define("math/parsenode/tablecolumn",["require","pjs","./base","./list","./constant","./identifier","math/types","math/errormsg"],function(e){var t=e("pjs"),n=e("./base"),i=e("./list"),r=e("./constant"),s=e("./identifier"),a=e("math/types"),o=e("math/errormsg");return t(n,function(e,t){function c(e){return e.isError?r(NaN):e}e.init=function(e,n,i){t.init.call(this),this.header=e,this.length=n,this.values=i,this.isIndependent=!1,this.registerDependencies(),this._exports=this.computeExports()},e.registerDependencies=function(){this.addDependencies(this.header.getDependencies());for(var e=0;e<this.values.length;e++)this.addDependencies(this.values[e].getDependencies())},e.computeExports=function(){return this.header instanceof s?[this.header._symbol]:[]},e.getConcreteTree=function(e,t){var n,i,r=this.header.getConcreteTree(e);if(r.isFreeVariable){n=[];for(var s=0;s<this.values.length;s++){var c=this.values[s].tryGetConcreteTree(e);c.isError?n.push(c):c.valueType===a.Number?n.push(c):n.push(o.tableEntryTypeError([c.valueType]))}return i=new this.constructor(r,this.length,n),i.isIndependent=!0,i}if(r.isConstant){for(var l=[],u=0;u<this.length;u++)l.push(r);n=l}else n=r.isList?r.args:[];return r=this.header.getConcreteTree(t),r.isError||r.valueType===a.Number||r.valueType===a.ListOfNumber||(r=o.tableHeaderTypeError([r.valueType])),i=new this.constructor(r,this.length,n)},e.isDiscrete=function(e){return 1!==this.header.getDependencies().length||1!==e.header.getDependencies().length||this.header.getDependencies()[0]!==e.header.getDependencies()[0]},e._exportSymbolsTo=function(e,t,r){if(e.length){var s=e[0];if(t.isError)r[s]=t;else try{r[s]=i(t.values.map(c))}catch(a){if(!(a instanceof n))throw a;r[s]=a}}},e.exportTo=function(e,t,n){var i=this.getLegalExports(e);this._exportSymbolsTo(i,t,n)},e.exportToLocal=function(e,t){this._exportSymbolsTo(this.getExports(),e,t)}})}),define("math/parsenode/solvedequation",["require","pjs","./base"],function(e){var t=e("pjs"),n=e("./base");return t(n,function(e,t){e.init=function(e,n){t.init.call(this),this._symbol=e,this._expression=n,this.addDependencies(n.getDependencies())},e.getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor(this._symbol,this._expression.getConcreteTree(e,t))},e.getEvaluationInfo=function(){return this._expression.isList?this._expression.args.map(function(e){return{val:e.constantValue,operator:"="}}):this._expression.getEvaluationInfo()},e.getCompiledFunctions=function(){return this._expression.getCompiledFunctions.apply(this._expression,arguments)},e.evaluate=function(){return this._expression.evaluate.apply(this._expression,arguments)}})}),define("parsenodes",["require","math/parsenode/expressionTypes","math/parsenode/base","math/parsenode/expression","math/parsenode/scalarexpression","math/parsenode/error","math/parsenode/constant","math/parsenode/identifier","math/parsenode/ans","math/parsenode/freevariable","math/parsenode/dummyindex","math/parsenode/list","math/parsenode/range","math/parsenode/listaccess","math/parsenode/orderedpair","math/parsenode/movablepoint","math/parsenode/orderedpairaccess","math/parsenode/basecomparator","math/parsenode/comparator","math/parsenode/doubleinequality","math/parsenode/repeatedoperator","math/parsenode/sum","math/parsenode/product","math/parsenode/integral","math/parsenode/functioncall","math/parsenode/functionexponent","math/parsenode/prime","math/parsenode/piecewise","math/parsenode/derivative","math/parsenode/builtinfunction","math/parsenode/nativefunction","math/parsenode/typedfunction","math/parsenode/reducerfunction","math/parsenode/parametrizedreducerfunction","math/parsenode/doublereducerfunction","math/parsenode/assignment","math/parsenode/functiondefinition","math/parsenode/equation","math/parsenode/regression","math/parsenode/table","math/parsenode/tablecolumn","math/parsenode/solvedequation","math/parsenode/optimizedregression"],function(e){var t=e("math/parsenode/expressionTypes"),n={Base:e("math/parsenode/base"),Expression:e("math/parsenode/expression"),ScalarExpression:e("math/parsenode/scalarexpression"),Error:e("math/parsenode/error"),Constant:e("math/parsenode/constant"),Identifier:e("math/parsenode/identifier"),Ans:e("math/parsenode/ans"),FreeVariable:e("math/parsenode/freevariable"),DummyIndex:e("math/parsenode/dummyindex"),List:e("math/parsenode/list"),Range:e("math/parsenode/range"),ListAccess:e("math/parsenode/listaccess"),OrderedPair:e("math/parsenode/orderedpair"),MovablePoint:e("math/parsenode/movablepoint"),OrderedPairAccess:e("math/parsenode/orderedpairaccess"),BaseComparator:e("math/parsenode/basecomparator"),Comparator:e("math/parsenode/comparator"),DoubleInequality:e("math/parsenode/doubleinequality"),RepeatedOperator:e("math/parsenode/repeatedoperator"),Sum:e("math/parsenode/sum"),Product:e("math/parsenode/product"),Integral:e("math/parsenode/integral"),FunctionCall:e("math/parsenode/functioncall"),FunctionExponent:e("math/parsenode/functionexponent"),Prime:e("math/parsenode/prime"),Piecewise:e("math/parsenode/piecewise"),Derivative:e("math/parsenode/derivative"),BuiltInFunction:e("math/parsenode/builtinfunction"),NativeFunction:e("math/parsenode/nativefunction"),TypedFunction:e("math/parsenode/typedfunction"),ReducerFunction:e("math/parsenode/reducerfunction"),ParametrizedReducerFunction:e("math/parsenode/parametrizedreducerfunction"),DoubleReducerFunction:e("math/parsenode/doublereducerfunction"),Assignment:e("math/parsenode/assignment"),FunctionDefinition:e("math/parsenode/functiondefinition"),Equation:e("math/parsenode/equation"),Regression:e("math/parsenode/regression"),Table:e("math/parsenode/table"),TableColumn:e("math/parsenode/tablecolumn"),SolvedEquation:e("math/parsenode/solvedequation"),OptimizedRegression:e("math/parsenode/optimizedregression")};for(var i in t)n[i]=t[i];for(var r in n)n.hasOwnProperty(r)&&"Comparator"!==r&&"BuiltInFunction"!==r&&(n[r].prototype.type=r);for(var s in n.Comparator)n.Comparator.hasOwnProperty(s)&&(n.Comparator[s].prototype.type="Comparator['"+s+"']");for(var a in n.BuiltInFunction)n.BuiltInFunction.hasOwnProperty(a)&&(n.BuiltInFunction[a].prototype.type="BuiltInFunction['"+a+"']");return n}),define("math/inverses",[],function(){var e={},t=["sin","cos","tan","cot","sec","csc","sinh","cosh","tanh","coth","sech","csch"];return t.forEach(function(t){e[t]="arc"+t,e["arc"+t]=t}),e}),define("math/baseparser",["require","jison","parsenodes","math/inverses","math/errormsg"],function(e){function t(){throw c.featureUnavailable()}function n(e){e=e||[];for(var n in a)s[n]=e.indexOf(n)<0?a[n]:t}function i(e){var t="\\operatorname";return e.slice(0,t.length)===t?"\\"+e.slice(t.length+1,e.length-1):e}var r=e("jison"),s=r.yy,a=e("parsenodes"),o=e("math/inverses"),c=e("math/errormsg"),l=function(e,t){t=t||{};var i,o,l=void 0!==t.index;try{return l&&(i=s.currentIndex,s.currentIndex=t.index),n(t.disabledFeatures),o=r.parse("###"+e),l&&(s.currentIndex=i),o}catch(u){return u instanceof a.Error?u:c.parseError()}};return s.ErrorMsg=c,s.setInput=function(e,t){e.setInputString(s.lexer.matched.slice(Math.max(3,t.first_column),t.last_column))},n(),s.inverses=o,s.parseFunctionDeclaration=function(e){e=e.replace("###","");var t="(?:\\s|\\\\space|\\\\ |\\\\\\:)*",n="(?:\\\\operatorname\\{[a-zA-Z]+\\}|[a-zA-Z]|\\\\[a-zA-Z]+)",r="(?:_[a-zA-Z0-9]|_{[a-zA-Z0-9]+})?",s=n+r,o="(?:"+s+"(?:\\,"+s+")*)",c="("+s+")(?:\\\\left)?\\(("+o+")(?:\\\\right)?\\)=",l=new RegExp(c),u=new RegExp(t,"g");e=e.replace(u,"");var h=l.exec(e);return{identifier:a.Identifier(i(h[1])),args:h[2].split(",").map(function(e){return a.Identifier(e)})}},{parse:l}}),define("math/features/getValueType",["require","parsenodes","math/types"],function(e){function t(){return a.Number}function n(){return a.Bool}function i(){return a.Point}function r(){return a.Any}var s=e("parsenodes"),a=e("math/types"),o={Add:t,Multiply:t,Divide:t,Subtract:t,Exponent:t,Negative:t,And:n,Piecewise:function(e){return e[1].valueType},BaseComparator:n,RepeatedOperator:t,List:function(e){if(0===e.length)return a.ListOfAny;for(var t=e[0].valueType,n=1;n<e.length;n++)if(e[n].valueType!==t)return a.ListOfAny;return a.listType(t)},ListAccess:function(e){return a.elementType(e[0].valueType)},OrderedPairAccess:t,OrderedPair:i,NativeFunction:t,ReducerFunction:t,DoubleReducerFunction:t,ParametrizedReducerFunction:t,DummyIndex:t,FreeVariable:t,Constant:function(){switch(typeof this.constantValue){case"number":return a.Number;case"boolean":return a.Bool;default:throw new Error("Constant node expects value of type number or boolean, but saw "+typeof value)}},TypedFunction:function(){return this._outputType},Derivative:t,Integral:t,Identifier:r};for(var c in o)s[c].prototype._getValueType=o[c]}),define("math/features/typeCheck",["require","parsenodes","math/types","math/errormsg"],function(e){function t(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].valueType);return t}function n(e,n){return function(i){for(var r=0;r<i.length;r++)if(i[r].valueType!==e[r])throw n(t(i))}}var i=e("parsenodes"),r=e("math/types"),s=e("math/errormsg"),a={Add:n([r.Number,r.Number],s.addTypeError),Multiply:n([r.Number,r.Number],s.multiplyTypeError),Divide:n([r.Number,r.Number],s.divideTypeError),Subtract:n([r.Number,r.Number],s.subtractTypeError),Exponent:n([r.Number,r.Number],s.exponentTypeError),Negative:n([r.Number],s.negativeTypeError),BaseComparator:n([r.Number,r.Number],s.comparatorTypeError),And:n([r.Bool,r.Bool],s.andTypeError),List:function(e){if(0!==e.length){var t=e[0].valueType;if(!r.hasListType(t))throw s.listTypeError([t]);for(var n=0;n<e.length;n++){var i=e[n].valueType;if(!r.hasListType(i))throw s.listTypeError([i]);if(i!==t)throw s.heterogeneousList()}}},OrderedPair:n([r.Number,r.Number],s.pointTypeError),Piecewise:function(e){if(e[0].valueType!==r.Bool)throw s.piecewiseConditionTypeError(t(e));if(e[1].valueType!==r.Number)throw s.piecewiseBranchTypeError([e[1].valueType]);if(e[2].valueType!==r.Number)throw s.piecewiseBranchTypeError([e[2].valueType])},ListAccess:function(e){if(!r.isList(e[0].valueType)||e[1].valueType!==r.Number)throw s.indexTypeError(t(e))},OrderedPairAccess:n([r.Point,r.Number],s.indexTypeError),Sum:function(e){if(e[1].valueType!==r.Number)throw s.sumLowerBoundTypeError([e[1].valueType]);if(e[2].valueType!==r.Number)throw s.sumUpperBoundTypeError([e[2].valueType]);if(e[3].valueType!==r.Number)throw s.sumArgumentTypeError([e[3].valueType])},Product:function(e){if(e[1].valueType!==r.Number)throw s.productLowerBoundTypeError([e[1].valueType]);if(e[2].valueType!==r.Number)throw s.productUpperBoundTypeError([e[2].valueType]);if(e[3].valueType!==r.Number)throw s.productArgumentTypeError([e[3].valueType])},Integral:function(e){if(e[1].valueType!==r.Number)throw s.integralLowerBoundTypeError([e[1].valueType]);if(e[2].valueType!==r.Number)throw s.integralUpperBoundTypeError([e[2].valueType]);if(e[3].valueType!==r.Number)throw s.integralArgumentTypeError([e[3].valueType])},NativeFunction:function(e){for(var n=0;n<e.length;n++)if(e[n].valueType!==r.Number)throw s.functionTypeError(this._symbol,t(e))},ReducerFunction:function(e){if(e[0].valueType!==r.ListOfNumber)throw s.functionTypeError(this._symbol,t(e))},DoubleReducerFunction:function(e){if(e[0].valueType!==r.ListOfNumber)throw s.functionTypeError(this._symbol,t(e))},ParametrizedReducerFunction:function(e){if(e[0].valueType!==r.ListOfNumber||e[1].valueType!==r.Number)throw s.functionTypeError(this._symbol,t(e))},TypedFunction:function(e){for(var n=0;n<e.length;n++)if(e[n].valueType!==this._inputTypes[n])throw s.functionTypeError(this._symbol,t(e))},Derivative:n([r.Number],s.derivativeTypeError)};for(var o in a)i[o].prototype.typeCheck=a[o]}),define("math/features/repr",["require","parsenodes"],function(e){var t=e("parsenodes"),n=function(e,t,n){n=n||0;var i=Array(n+1).join("  "),r=i+"  ";return"[\n"+r+e.map(function(e){return e.repr(t,n+1)}).join(",\n"+r)+"\n"+i+"]"},i=function(e,t){return t=t||"",""+t+e};t.Expression.prototype.repr=function(e,t){return i(this.type,e)+"("+n(this.args,e,t)+")"},t.DoubleInequality.prototype.repr=function(e,t){t=t||0;var n=Array(t+1).join("  "),r=n+"  ";return i(this.type,e)+"([\n"+r+this.args[0].repr(e,t+1)+",\n"+r+"'"+this.args[1]+"',\n"+r+this.args[2].repr(e,t+1)+",\n"+r+"'"+this.args[3]+"',\n"+r+this.args[4].repr(e,t+1)+"\n"+n+"])"},t.Identifier.prototype.repr=t.FreeVariable.prototype.repr=function(e){return i(this.type,e)+"('"+this._symbol+"')"},t.Constant.prototype.repr=function(e){return i(this.type,e)+"("+this.constantValue+")"},t.FunctionCall.prototype.repr=function(e,t){return i(this.type,e)+"('"+this._symbol+"', "+n(this.args,e,t)+")"},t.Assignment.prototype.repr=function(e,n){return i(this.type,e)+"("+t.Identifier(this._symbol).repr(e,n)+", "+this._expression.repr(e,n)+")"},t.Regression.prototype.repr=t.Equation.prototype.repr=function(e,t){return i(this.type,e)+"("+this._lhs.repr(e,t)+", "+this._rhs.repr(e,t)+")"},t.FunctionDefinition.prototype.repr=function(e,r){return i(this.type,e)+"("+t.Identifier(this._symbol).repr(e,r)+", "+n(this._argSymbols.map(function(e){return t.Identifier(e)}),e,r)+", "+this._expression.repr(e,r)+")"},t.Error.prototype.repr=function(e,t){return i(this.type,e)+"('"+this._msg+"')"},t.Derivative.prototype.repr=function(e,t){return i(this.type,e)+"('"+this._symbol+"', "+n(this.args,e,t)+")"},t.SolvedEquation.prototype.repr=function(e,t){return i(this.type,e)+"('"+this._symbol+"', "+this._expression.repr(e,t)+")"},t.OptimizedRegression.prototype.repr=function(e,t){return i(this.type,e)+"("+JSON.stringify(this.parameters)+", "+JSON.stringify(this.residuals)+", "+JSON.stringify(this.statistics)+", "+this.model.repr(e,t+1)+", "+JSON.stringify({isModelValid:this.isModelValid,residualVariable:this.residualVariable,residualSuggestionId:this.residualSuggestionId,shouldSuggestLogMode:this.shouldSuggestLogMode})+")"},t.Table.prototype.repr=function(e,t){return i(this.type,e)+"("+n(this.columns,e,t)+")"},t.TableColumn.prototype.repr=function(e,t){return i(this.type,e)+"("+this.header.repr(e,t)+", "+this.length+", "+n(this.values,e,t)+")"}}),define("math/features/scalarEvalExpression",["require","parsenodes","math/functions"],function(e){var t=e("parsenodes"),n=e("math/functions"),i={Add:function(e){return"("+e.join("+")+")"},Multiply:function(e){return"("+e.join("*")+")"},Divide:function(e){return"BuiltIn.div("+e.join(",")+")"},RawDivide:function(e){return"("+e.join("/")+")"},Subtract:function(e){return"("+e.join("-")+")"},Exponent:function(e){return"BuiltIn.pow("+e.join(",")+")"},RawExponent:function(e){return"Math.pow("+e.join(",")+")"},Negative:function(e){return"(-"+e[0]+")"},And:function(e){return e.join("&&")},Piecewise:function(e){return"("+e[0]+"?"+e[1]+":"+e[2]+")"}},r={Add:2,Multiply:2,Divide:2,RawDivide:2,Subtract:2,Exponent:2,RawExponent:2,Negative:1,And:2,Piecewise:3};for(var s in i){var a=t[s].prototype;a.scalarEvalExpression=i[s],a.evaluate=n.createEvaluateFunction(a.scalarEvalExpression,r[s])}}),define("math/features/okForImplicitFunction",["require","parsenodes"],function(e){var t=e("parsenodes");t.Add.prototype.okForImplicitFunction=t.Subtract.prototype.okForImplicitFunction=t.Add.prototype.okForImplicitFunction=t.Multiply.prototype.okForImplicitFunction=t.Divide.prototype.okForImplicitFunction=t.Exponent.prototype.okForImplicitFunction=function(){for(var e=0;e<this.args.length;e++)if(!this.args[e].okForImplicitFunction())return!1;return!0},t.Piecewise.prototype.okForImplicitFunction=function(){return this.args[1].isConstant&&1===this.args[1].constantValue&&this.args[2].isConstant&&this.args[2].isNaN()}}),define("math/features/constantcollapsedcopy",["require","parsenodes","math/builtin","math/distance"],function(e){var t=e("parsenodes"),n=t.Constant,i=t.Multiply,r=t.RawExponent,s=t.BuiltInFunction,a=e("math/builtin"),o=e("math/distance"),c={ScalarExpression:function(e){for(var t=[],i=0;i<e.length;i++){if(!e[i].isConstant)return this.copyWithArgs(e);t.push(e[i].constantValue)}return n(this.evaluate(t))},OrderedPair:function(e){return this.copyWithArgs(e)},Add:function(e){return e[0].isConstant&&e[1].isConstant?n(this.evaluate([e[0].constantValue,e[1].constantValue])):0===e[0].constantValue?e[1]:0===e[1].constantValue?e[0]:this.copyWithArgs(e)},Multiply:function(e){return e[0].isConstant&&e[1].isConstant?n(this.evaluate([e[0].constantValue,e[1].constantValue])):1===e[0].constantValue?e[1]:1===e[1].constantValue?e[0]:this.copyWithArgs(e)},Subtract:function(e){return e[0].isConstant&&e[1].isConstant?n(this.evaluate([e[0].constantValue,e[1].constantValue])):0===e[0].constantValue?t.Negative([e[1]]):0===e[1].constantValue?e[0]:this.copyWithArgs(e)},Divide:function(e){return e[0].isConstant&&e[1].isConstant?n(this.evaluate([e[0].constantValue,e[1].constantValue])):e[1].isConstant?1===e[1].constantValue?e[0]:0===e[1].constantValue?n(NaN):t.RawDivide(e):this.copyWithArgs(e)},RawDivide:function(e){return e[0].isConstant&&e[1].isConstant?n(this.evaluate([e[0].constantValue,e[1].constantValue])):this.copyWithArgs(e)},Exponent:function(e){if(e[0].isConstant&&e[1].isConstant)return n(this.evaluate([e[0].constantValue,e[1].constantValue]));if(e[0].isConstant){if(e[0].constantValue===Math.E)return s.exp([e[1]]);if(e[0].constantValue>0)return r(e)}if(e[1].isConstant){var t=e[1].constantValue;if(1===t)return e[0];if(t===Math.floor(t))return r(e);var c=a.toFraction(t,100);return o.approx(c.n/c.d,t,2)&&c.d%2===1?i([c.n%2===0?n(1):s.sign([e[0]]),r([s.abs([e[0]]),e[1]])]):r(e)}return this.copyWithArgs(e)},RawExponent:function(e){return e[0].isConstant&&e[1].isConstant?n(this.evaluate([e[0].constantValue,e[1].constantValue])):this.copyWithArgs(e)},Negative:function(e){return e[0].isConstant?n(-e[0].constantValue):e[0]instanceof t.Negative?e[0].args[0]:this.copyWithArgs(e)},And:function(e){return e[0].isConstant&&e[1].isConstant?n(e[0].constantValue&&e[1].constantValue):e[0].isConstant&&e[0]===!0?e[1]:e[0].isConstant&&e[0]===!1?n(!1):e[1].isConstant&&e[1]===!0?e[0]:e[1].isConstant&&e[1]===!1?n(!1):this.copyWithArgs(e)},Piecewise:function(e){return e[0].isConstant&&e[0].constantValue===!0?e[1]:e[0].isConstant&&e[0].constantValue===!1?e[2]:this.copyWithArgs(e)},ListAccess:function(e){return e[1].isConstant?e[0].elementAt(e[1].constantValue-1):this.copyWithArgs(e)},OrderedPairAccess:function(e){return e[1].isConstant&&e[0]instanceof t.OrderedPair?e[0].elementAt(e[1].constantValue-1):this.copyWithArgs(e)}};for(var l in c)t[l].prototype._constantCollapsedCopy=c[l];s.distance.prototype._constantCollapsedCopy=function(e){return 0===e[0].getDependencies().length&&0===e[1].getDependencies().length?n(this.evaluate([e[0].asArray(),e[1].asArray()])):this.copyWithArgs(e)},s.midpoint.prototype._constantCollapsedCopy=function(e){if(0===e[0].getDependencies().length&&0===e[1].getDependencies().length){var i=this.evaluate([e[0].asArray(),e[1].asArray()]);return t.OrderedPair([n(i[0]),n(i[1])])}return this.copyWithArgs(e)}}),define("math/features/polynomialorder",["require","parsenodes"],function(e){var t=e("parsenodes"),n={Expression:"this.dependsOn(symbol) ? Infinity : 0",FreeVariable:"(symbol === this._symbol ? 1 : 0)",Constant:"0",Add:"Math.max(order0, order1)",Subtract:"Math.max(order0, order1)",Multiply:"order0 + order1",Negative:"order0",Divide:"order1 > 0 ? Infinity : order0"},i=function(e){return e=e.replace("order0","this.args[0].polynomialOrder(symbol)"),e=e.replace("order1","this.args[1].polynomialOrder(symbol)"),new Function(["symbol"],"return "+e)};for(var r in n){var s=n[r];t[r].prototype.polynomialOrder=i(s)}t.Exponent.prototype.polynomialOrder=function(e){var t=this.args[0].polynomialOrder(e),n=this.args[1].polynomialOrder(e);if(0===t&&0===n)return 0;var i=this.args[1];return i.isConstant&&i.constantValue===Math.round(i.constantValue)&&i.constantValue>0?t*i.constantValue:1/0},t.Piecewise.prototype.polynomialOrder=function(e){return this.dependsOn(e)?this.args[2].isConstant&&this.args[2].isNaN()?this.args[1].dependsOn(e)?1/0:0:1/0:0},t.List.prototype.polynomialOrder=function(e){return 1/0}}),define("math/features/polynomialcoefficients",["require","parsenodes"],function(e){var t=e("parsenodes"),n=t.Constant(0),i=t.Constant(1);t.FreeVariable.prototype.getPolynomialCoefficients=function(e){return e===this._symbol?[n,i]:[this]},t.Constant.prototype.getPolynomialCoefficients=function(e){return[this]},t.Add.prototype.getPolynomialCoefficients=function(e){for(var n=this.args[0].getPolynomialCoefficients(e),i=this.args[1].getPolynomialCoefficients(e),r=n.length-1,s=i.length-1,a=[],o=0;o<=Math.max(r,s);o++)r>=o&&s>=o?a.push(t.Add([n[o],i[o]])):a.push(r>s?n[o]:i[o]);return a},t.Subtract.prototype.getPolynomialCoefficients=function(e){for(var n=this.args[0].getPolynomialCoefficients(e),i=this.args[1].getPolynomialCoefficients(e),r=n.length-1,s=i.length-1,a=[],o=0;o<=Math.max(r,s);o++)r>=o&&s>=o?a.push(t.Subtract([n[o],i[o]])):a.push(r>s?n[o]:t.Negative([i[o]]));return a},t.Negative.prototype.getPolynomialCoefficients=function(e){for(var n=this.args[0].getPolynomialCoefficients(e),i=[],r=0;r<n.length;r++)i.push(t.Negative([n[r]]));return i},t.Exponent.prototype.getPolynomialCoefficients=function(e){var i=this.args[0].getPolynomialCoefficients(e),r=this.args[1].getPolynomialCoefficients(e),s=i.length-1,a=r.length-1;if(a>0)throw"can't solve for variable in exponent";if(0===s)return[t.Exponent([i[0],r[0]])];if(this.args[1].isConstant){var o=this.args[1].constantValue;switch(o){case 0:return[n];case 1:return i;case 2:return t.Multiply([this.args[0],this.args[0]]).getPolynomialCoefficients(e)}}throw"Unable to compile polynomial representation"},t.Multiply.prototype.getPolynomialCoefficients=function(e){for(var n=this.args[0].getPolynomialCoefficients(e),i=this.args[1].getPolynomialCoefficients(e),r=n.length-1,s=i.length-1,a=[],o=0;r>=o;o++)for(var c=0;s>=c;c++){var l=t.Multiply([n[o],i[c]]),u=a[o+c];void 0===u?a[o+c]=l:a[o+c]=t.Add([u,l])}return a},t.Divide.prototype.getPolynomialCoefficients=function(e){var n=this.args[0].getPolynomialCoefficients(e),i=this.args[1].getPolynomialCoefficients(e),r=i.length-1,s=[];if(r>0)throw"Can't solve for variable in denominator";for(var a=0;a<n.length;a++)s.push(t.Divide([n[a],i[0]]));return s},t.Expression.prototype.getPolynomialCoefficients=function(e){if(this.dependsOn(e))throw"Unimplemented polynomialCoefficient call";return[this]},t.Piecewise.prototype.getPolynomialCoefficients=function(e){if(!this.dependsOn(e))return[this];var n=this.args[1].getPolynomialCoefficients(e);return this.args[0].dependsOn(e)?n:[t.Piecewise(this.args[0],n[0],this.args[2])]}}),define("math/features/extractconditions",["require","parsenodes"],function(e){var t=e("parsenodes");t.Expression.prototype.extractConditions=function(e,t){for(var n=0;n<this.args.length;n++){var i=this.args[n];t=i.extractConditions(e,t)}return t},t.Constant.prototype.extractConditions=function(e,t){return t},t.Piecewise.prototype.extractConditions=function(e,n){if(!this.dependsOn(e))return n;if(!this.args[0].dependsOn(e))return n=this.args[1].extractConditions(e,n),n=this.args[2].extractConditions(e,n);var i={};return i[e]=n,t.Piecewise([this.args[0].substitute(i),n,t.Constant(NaN)])}}),define("math/domaintypes",["require"],function(e){function t(){return{type:"empty"}}function n(){return{type:"unknown"}}function i(e){return isNaN(e[0])||isNaN(e[1])||e[1]<e[0]?t():{type:"known",bounds:e}}function r(){return i([-(1/0),1/0])}function s(e,r){if("empty"===e.type||"empty"===r.type)return t();if("unknown"===e.type||"unknown"===r.type)return n();var s=[Math.max(e.bounds[0],r.bounds[0]),Math.min(e.bounds[1],r.bounds[1])];return i(s)}return{emptyDomain:t,unknownDomain:n,knownDomain:i,allReals:r,intersectDomains:s}}),define("math/features/bounddomain",["require","parsenodes","math/builtinframe","math/domaintypes"],function(e){var t=e("parsenodes"),n=e("math/builtinframe"),i=e("math/domaintypes"),r=t.Constant(0);t.Base.prototype.boundDomain=function(e){return i.unknownDomain()},t.List.prototype.boundDomain=function(e){return i.unknownDomain()},t.Expression.prototype.boundDomain=function(e){for(var t=i.allReals(),n=0;n<this.args.length;n++)t=i.intersectDomains(t,this.args[n].boundDomain(e));return t},t.Constant.prototype.boundDomain=function(e){return this.isNaN()?i.emptyDomain():i.allReals()},t.Piecewise.prototype.boundDomain=function(e){return this.args[2].isConstant&&isNaN(this.args[2].constantValue)?i.intersectDomains(this.args[0].boundDomain(e),this.args[1].boundDomain(e)):i.unknownDomain()},t.BaseComparator.prototype.boundDomain=function(e){if("="===this.operator)return i.emptyDomain();var t=this._difference,s=t.polynomialOrder(e);if(s>1)return i.unknownDomain();var a=t.getPolynomialCoefficients(e),o=a[1]?a[1].getConcreteTree(n):r,c=a[0]?a[0].getConcreteTree(n):r;if(!o.isConstant||!c.isConstant)return i.unknownDomain();if(isNaN(o.constantValue)||isNaN(c.constantValue))return i.emptyDomain();if(0===o.constantValue)return c.constantValue>=0?i.allReals():i.emptyDomain();var l=-c.constantValue/o.constantValue,u=o.constantValue<0?[-(1/0),l]:[l,1/0];return i.knownDomain(u)}}),define("math/features/derivative",["require","parsenodes","math/baseparser","math/builtinframe","math/parsenode/builtinfunction"],function(e){var t=e("parsenodes"),n=e("math/baseparser"),i=e("math/builtinframe"),r=e("math/parsenode/builtinfunction"),s=t.Constant(0),a=t.Constant(1),o=t.Constant(2),c={FreeVariable:function(e){return e===this._symbol?a:s},Constant:function(e){return isFinite(this.constantValue)?s:t.Constant(this.constantValue)},Negative:function(e){return t.Negative([this.args[0].takeDerivative(e)])},Add:function(e){return t.Add([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Subtract:function(e){return t.Subtract([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Multiply:function(e){return t.Add([f(e,this.args[0],t.Multiply([this.args[0].takeDerivative(e),this.args[1]])),f(e,this.args[1],t.Multiply([this.args[0],this.args[1].takeDerivative(e)]))])},Divide:function(e){return t.Subtract([f(e,this.args[0],t.Divide([this.args[0].takeDerivative(e),this.args[1]])),f(e,this.args[1],t.Divide([t.Multiply([this.args[0],this.args[1].takeDerivative(e)]),t.Exponent([this.args[1],o])]))])},Exponent:function(e){return t.Add([f(e,this.args[0],t.Multiply([t.Multiply([this.args[1],t.Exponent([this.args[0],t.Subtract([this.args[1],a])])]),this.args[0].takeDerivative(e)])),f(e,this.args[1],t.Multiply([t.Piecewise([t.Comparator["="]([this.args[0],s]),t.Piecewise([t.Comparator[">"]([this.args[1],s]),s,t.Constant(NaN)]),t.Multiply([t.FunctionCall("\\ln",[this.args[0]]),t.Exponent([this.args[0],this.args[1]])])]),this.args[1].takeDerivative(e)]))]).getConcreteTree(i)},Sum:function(e){return this.copyWithArgs([this.args[0],this.args[1],this.args[2],this.args[3].takeDerivative(e)])},Product:function(e){var n=t.Sum([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([s,this.args[3]]),a,s])]),i=t.Multiply([t.Sum([this.args[0],this.args[1],this.args[2],t.Divide([this.args[3].takeDerivative(e),this.args[3]])]),t.Product(this.args)]),r=t.Product([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([s,this.args[3]]),this.args[3].takeDerivative(e),this.args[3]])]);return t.Piecewise([t.Comparator["="]([s,n]),i,t.Piecewise([t.Comparator["="]([a,n]),r,s])])},Piecewise:function(e){return 2===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e)]):3===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e),this.args[2].takeDerivative(e)]):void 0},List:function(e){return t.List(this.args.map(function(t){return t.takeDerivative(e)}))},ListAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},OrderedPair:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},OrderedPairAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},Integral:function(e){var n=this.args[0],i=this.args[1],r=this.args[2],s=this.args[3],a={};a[n._symbol]=r;var o={};return o[n._symbol]=i,t.Add([f(e,s,this.copyWithArgs([n,i,r,s.takeDerivative(e)])),t.Subtract([f(e,r,t.Multiply([s.substitute(a),r.takeDerivative(e)])),f(e,i,t.Multiply([s.substitute(o),i.takeDerivative(e)]))])])},SolvedEquation:function(e){return this._expression.takeDerivative(e)},OptimizedRegression:function(e){return this.model.takeDerivative(e)}},l={exp:"\\exp(x)*x_1",ln:"\\{x >= 0: x_1/x \\}",log:"\\{ x >= 0: x_1/(x*\\ln(10)) \\}",sqrt:"x_1/(2*\\sqrt{x})",rtxsqpone:"x*x_1/\\rtxsqpone(x)",rtxsqmone:"x*x_1/\\rtxsqmone(x)",sin:"\\cos(x)*x_1",cos:"-\\sin(x)*x_1",tan:"\\sec(x)^2*x_1",arcsin:"x_1/\\sqrt{1 - x^2}",arccos:"-x_1/\\sqrt{1 - x^2}",arctan:"x_1/(1+x^2)",sinh:"\\cosh(x)*x_1",cosh:"\\sinh(x)*x_1",tanh:"(\\sech(x))^2*x_1",arcsinh:"x_1/\\sqrt{x^2 + 1}",arccosh:"\\{ x > 0: x_1/\\rtxsqmone(x) \\}",
arctanh:"\\{ \\abs(x) < 1: x_1/(1 - x^2) \\}",csc:"-\\cot(x)*\\csc(x)*x_1",sec:"\\tan(x)*\\sec(x)*x_1",cot:"-\\csc(x)^2*x_1",arccsc:"-x_1/(\\abs(x)*\\rtxsqmone(x))",arcsec:"x_1/(\\abs(x)*\\rtxsqmone(x))",arccot:"-x_1/(1+x^2)",csch:"-\\coth(x)*\\csch(x)*x_1",sech:"-\\tanh(x)*\\sech(x)*x_1",coth:"-(\\csch(x))^2*x_1",arccsch:"-x_1/(\\abs(x)*\\rtxsqpone(x))",arcsech:"\\{ x >= 0: -x_1/(x*\\sqrt{1 - x^2}) \\}",arccoth:"\\{ \\abs(x) > 1 : x_1/(1 - x^2) \\}",factorial:"(x)!*\\polyGamma(0, x + 1)*x_1",floor:"\\{ \\mod(x, 1) > 0: 0*x_1 \\}",ceil:"\\{ \\mod(x, 1) > 0: 0*x_1 \\}",round:"\\{ \\abs(\\mod(x, 1) - 0.5) > 0: 0*x_1 \\}",abs:"\\{ \\abs(x) > 0: \\sign(x)*x_1 \\}",sign:"\\{ \\abs(x) > 0: 0*x_1 \\}",mean:"\\mean(x_1)",total:"\\total(x_1)",length:"0","var":"2*\\cov(x, x_1)",stdev:"\\cov(x, x_1)/\\stdev(x)",stdevp:"\\covp(x, x_1)/\\stdevp(x)",mad:"\\mean(\\sign(x-\\mean(x))*(x_1 - \\mean(x_1)))",min:"x_1[\\argmin(x)]",max:"x_1[\\argmax(x)]",median:"0.5*(x_1[\\lowerQuantileIndex(x, 0.5)] + x_1[\\upperQuantileIndex(x, 0.5)])",argmin:"0/0",argmax:"0/0",gcd:"0/0",lcm:"0/0"},u={logbase:["\\{x > 0: \\frac{x_1}{x*\\ln(y)}\\}","\\frac{-\\log_{y}(x)*y_1}{y*\\ln(y)}"],nthroot:["x^{1/y - 1}/y*x_1","-\\frac{x^{1/y}*\\ln(x)*y_1}{y^2}"],polyGamma:["0/0","\\polyGamma(1 + x, y)*y_1"],mod:["\\{ \\abs(\\mod(x, y)) > 0: x_1 \\}","\\{ \\mod(x/y, 1) > 0: -\\floor(x/y)*y_1 \\}"],cov:["\\cov(x_1, y)","\\cov(x, y_1)"],covp:["\\covp(x_1, y)","\\covp(x, y_1)"],corr:["(\\cov(x_1, y) - (\\cov(x, y)*\\cov(x, x_1)/\\var(x)))/(\\stdevp(x)\\stdevp(y))","(\\cov(x, y_1) - (\\cov(x, y)*\\cov(y, y_1)/\\var(y)))/(\\stdevp(x)\\stdevp(y))"],quantile:["\\{ \\floor(y*(\\length(x)-1)) = y*(\\length(x)-1) :   x_1[\\upperQuantileIndex(x, y)],  (\\ceil(y*(\\length(x)-1)) - y*(\\length(x)-1))*x_1[\\lowerQuantileIndex(x, y)] +   (y*(\\length(x)-1) - \\floor(y*(\\length(x)-1)))*x_1[\\upperQuantileIndex(x, y)]\\}","\\{ \\floor(y*(\\length(x)-1)) < y*(\\length(x)-1) :   (x[\\upperQuantileIndex(x, y)] - x[\\lowerQuantileIndex(x, y)])*y_1\\}"],upperQuantileIndex:["0/0","0/0"],lowerQuantileIndex:["0/0","0/0"],nCr:["0/0","0/0"],nPr:["0/0","0/0"]},h=function(e){return function(t){var n=this.args,r={x:n[0],x_1:n[0].takeDerivative(t)};return f(t,n[0],e.substitute(r)).getConcreteTree(i)}},d=function(e,n){return function(r){var s=this.args,a={x:s[0],x_1:s[0].takeDerivative(r),y:s[1],y_1:s[1].takeDerivative(r)};return t.Add([f(r,s[0],e.substitute(a)),f(r,s[1],n.substitute(a))]).getConcreteTree(i)}};for(var p in l)r[p].prototype.takeDerivative=h(n.parse(l[p]));for(p in u)r[p].prototype.takeDerivative=d(n.parse(u[p][0]),n.parse(u[p][1]));r.distance.prototype.takeDerivative=function(e){var n=this.args[0],s=this.args[1],c=t.OrderedPairAccess([n,a]),l=t.OrderedPairAccess([n,o]),u=t.OrderedPairAccess([s,a]),h=t.OrderedPairAccess([s,o]),d=f(e,c,c.takeDerivative(e)),p=f(e,l,l.takeDerivative(e)),m=f(e,u,u.takeDerivative(e)),g=f(e,h,h.takeDerivative(e));return f(e,this,t.Divide([t.Add([t.Add([t.Subtract([t.Multiply([d,c]),t.Multiply([d,u])]),t.Subtract([t.Multiply([m,u]),t.Multiply([m,c])])]),t.Add([t.Subtract([t.Multiply([p,l]),t.Multiply([p,h])]),t.Subtract([t.Multiply([g,h]),t.Multiply([g,l])])])]),r.distance([this.args[0],this.args[1]])])).getConcreteTree(i)},r.midpoint.prototype.takeDerivative=function(e){var n=this.args[0],s=this.args[1],c=t.OrderedPairAccess([n,a]),l=t.OrderedPairAccess([n,o]),u=t.OrderedPairAccess([s,a]),h=t.OrderedPairAccess([s,o]),d=f(e,c,c.takeDerivative(e)),p=f(e,l,l.takeDerivative(e)),m=f(e,u,u.takeDerivative(e)),g=f(e,h,h.takeDerivative(e));return t.OrderedPair([r.mean([d,m]),r.mean([p,g])]).getConcreteTree(i)};var f=function(e,t,n){return t.dependsOn(e)?n:s};for(var m in c){var g=c[m];t[m].prototype.takeDerivative=g}}),define("math/features/substitute",["require","parsenodes"],function(e){var t=e("parsenodes"),n={Identifier:function(e){return e[this._symbol]?e[this._symbol]:this},FreeVariable:function(e){return e[this._symbol]?e[this._symbol]:this},Constant:function(e){return this},Expression:function(e){return this.copyWithArgs(this.args.map(function(t){return t.substitute(e)}))},List:function(e){return t.List(this.args.map(function(t){return t.substitute(e)}))},SolvedEquation:function(e){return new this.constructor(this._symbol,this._expression.substitute(e))},OptimizedRegression:function(e){return new this.constructor(this.model.substitute(e),this.parameters,this.residualVariables,this.residuals,this.statistics)}};for(var i in n)t[i].prototype.substitute=n[i]}),define("math/features/solve",["require","math/baseparser","parsenodes","math/errormsg","math/builtinframe"],function(e){function t(e){return a(e),0===e.a.constantValue?0===e.b.constantValue?u(0===e.c.constantValue):y.getConcreteTree(e):e.f.constantValue-e.g.constantValue<0?f([u(!1)]):e.f.constantValue-e.g.constantValue===0?b.getConcreteTree(e):_.getConcreteTree(e)}function n(e){var t=Object.create(g);return t.a=e[2]?e[2].tryGetConcreteTree(g):v,t.b=e[1]?e[1].tryGetConcreteTree(g):v,t.c=e[0]?e[0].tryGetConcreteTree(g):v,t}function i(e){return 0===e.a.constantValue?0===e.b.constantValue?0:1:2}function r(e,t,r,s){for(var a,o,c=[],l=[],u=0;u<r.length;u++){var h=r[u],d=0;f.eachArgs([t],function(e){var t=e[0];d=Math.max(d,t.polynomialOrder(h))});var p=d>2,m=r.length>1&&!e.validSolvedVariable(h),g=s&&t.extractConditions(h,v)!==v;p||m||g?(l[u]={},c[u]=1/0):(l[u]=[],c[u]=0,f.eachArgs([t],function(e){var t=e[0];o=n(t.getPolynomialCoefficients(h)),l[u].push(o),c[u]=Math.max(c[u],i(o))}))}var y;if(1===r.length)o=l[0],a=r[0],y=c[0];else{var b;b=0===c[0]?1:0===c[1]?0:c[0]<c[1]?0:1,o=l[b],a=r[b],y=c[b]}return{localFrame:o,variableOfInterest:a,effectiveOrder:y}}function s(e,t){return t?C.inequality:1===e.length?C.singleVariable:C.generalEquation}function a(e){e.f=x.getConcreteTree(e),e.g=w.getConcreteTree(e),e.p=S.getConcreteTree(e),e.q=k.getConcreteTree(e),e.m=u(1e305)}var o=e("math/baseparser"),c=e("parsenodes"),l=c.Base,u=c.Constant,h=c.Equation,d=c.SolvedEquation,p=c.BaseComparator,f=c.List,m=e("math/errormsg"),g=e("math/builtinframe"),v=u(0),y=o.parse("[-c/b]"),b=o.parse("[-b/(2*a)]"),_=o.parse("[\\{a>0:q,p\\},\\{a>0:p,q\\}]"),x=o.parse("b*b"),w=o.parse("4*a*c"),S=o.parse("(-b+\\sqrt{b*b-4*a*c})/(2*a)"),k=o.parse("(-b-\\sqrt{b*b-4*a*c})/(2*a)"),E=o.parse("[\\{a=0:\\{b<0:-c/b\\},q\\},\\{a=0:\\{b>=0:-c/b\\},p\\}]"),T=o.parse("[\\{a=0:\\{b<0:-c/b\\},a>0:q\\},\\{a=0:\\{b=0:\\{c>0:-m\\}\\},a>0:\\{f<g:-m\\},p\\},\\{a=0:\\{b=0:\\{c>0:m\\}\\},a>0:\\{f<g:m\\},q\\},\\{a=0:\\{b>0:-c/b\\},a>0:p\\}]"),C={singleVariable:t,inequality:function(e){return a(e),T.getConcreteTree(e)},generalEquation:function(e){return a(e),E.getConcreteTree(e)}};l.prototype.trySolve=function(e,t){try{return this.solve(e,t)}catch(n){if(n instanceof c.Error)return n;throw n}},h.prototype.solve=function(e,t){return this.asComparator().solve(e,t)},p.prototype.solve=function(e,t){var n=this.tryGetConcreteTree(t);if(n.isError)return n;if(n.isConstant)return n;var i="="!==this.getOperator(),a=this._difference.tryGetConcreteTree(t),o=a.getDependencies();if(0===o.length)return a.isList?f(a.args.map(function(e){return u(0===e.constantValue)})):u(0===a.constantValue);if(1===o.length&&a.isList&&!i)return m.singleVariableListSolve();var c=a.isList?a:f([a]);if(o.length>2)return m.tooManyVariables(this.getSliderVariables(e,n)).setDependencies(o);if(i&&!e.validInequalityVariables(o))return m.invalidInequalityVariables().setDependencies(o);if(2===o.length&&!e.validImplicitVariables(o))return m.invalidImplicitVariables().setDependencies(o);var l=r(e,c,o,i),h=l.localFrame,p=l.effectiveOrder,g=l.variableOfInterest;if(e.complicatedPolarImplicit(g,p)&&(i||o.length>1))return m.complicatedPolarImplicit().setDependencies(o);if(p>2)return 1===o.length?m.unsolvable().setDependencies(o):a;for(var v=s(o,i),y=[],b=0;b<h.length;b++){var _=v(h[b]);if(_.isError)return _;if(_.isConstant)y.push(_);else for(var x=0;x<_.args.length;x++){var w=_.args[x],S=c.args[b].extractConditions(g,w).getConcreteTree(t);y.push(S)}}return d(g,f(y))}}),define("graphing/graphmode",{X:1,Y:2,XYPOINT:3,XYPOINT_MOVABLE:4,PARAMETRIC:5,POLAR:6,POLYGONFILL:7,IMPLICIT:8,NONE:10}),define("math/evaluationstate",["require","graphing/graphmode","parsenodes","graphing/label","worker/workerconfig","math/errormsg"],function(e){function t(e){return e.isError?e.getError():void 0===e.constantValue?"":+e.constantValue}function n(e,n){for(var i=[],r=0;r<e.columns.length;r++){var s=n.columns[r],a={dependent:!s.isIndependent,discrete:s.isIndependent};s.isError?(a.error=s.getError(),a.values=[]):a.values=s.values.map(t),i.push(a)}return{column_data:i}}var i=e("graphing/graphmode"),r=e("parsenodes"),s=e("graphing/label"),a=e("worker/workerconfig"),o=e("math/errormsg"),c=function(){return{operator:"=",variables:[]}},l=function(e,t,l){if(t.isTable)return n(t,l);var u=c();if(l.isError&&(!(t instanceof r.FunctionDefinition)||l.blocksExport))return u.error=l.getError(),u.variables=t.getSliderVariables(e,l),u.is_single_identifier=t instanceof r.Identifier,u;l.moveStrategy&&(u.move_strategy=l.moveStrategy,u.default_drag_mode=l.defaultDragMode),t.isInequality()&&(u.is_inequality=!0),u.operator=t.getOperator(),l instanceof r.SolvedEquation?l._expression.constantValue!==!0&&l._expression.constantValue!==!1&&(u.assignment=l._symbol):t instanceof r.Assignment&&(u.assignment=t._symbol);var h=e.graphingEnabled()?t.getGraphMode(e,l):i.NONE;if(h!==i.NONE){u.is_graphable=!0,h===i.XYPOINT&&(u.is_point_list=!0),h===i.XYPOINT_MOVABLE&&(u.is_point_list=!0),h===i.PARAMETRIC&&(u.is_parametric=!0),l.isShadeBetween()&&(u.is_shade_between=!0);var d=t.tableInfo(e,l);d&&(u.is_tableable=!0,u.table_info=d)}u.variables=u.is_graphable?[]:t.getSliderVariables(e,l),u.is_single_identifier=t instanceof r.Identifier;var p=t.getSliderInfo();p?(u.is_slidable=!0,u.is_animatable=!u.is_graphable,u.constant_value=p.value):l.isConstant&&(u.constant_value=l.constantValue);var f=l.getEvaluationInfo();if(!f||t.isConstant||t.isFunction||u.is_graphable||u.is_slidable||(!a.singleVariableSolutions&&l instanceof r.SolvedEquation?u.error=o.unsolvable().getError():(u.is_evaluable=!0,u.zero_values=f)),l instanceof r.OptimizedRegression){var m={};for(var g in l.parameters)l.parameters.hasOwnProperty(g)&&(m[s.identifierToLatex(g)]=+l.parameters[g].constantValue);u.is_regression=!0,u.regression={parameters:m,residualVariable:s.identifierToLatex(l.residualVariable),residualSuggestionId:l.residualSuggestionId,shouldSuggestLogMode:l.shouldSuggestLogMode,statistics:l.statistics}}return u};return l["default"]=c,l}),define("math/statementanalysis",["require","math/evaluationstate","pjs","graphing/graphmode","worker/workerconfig"],function(e){var t=e("math/evaluationstate"),n=e("pjs"),i=e("graphing/graphmode"),r=e("worker/workerconfig");return n(function(e){e.init=function(e,n,i){this.policy=e,this.rawTree=n,this.concreteTree=i,this.evaluationState=t(e,n,i)},e.exportTo=function(e,t){this.rawTree.exportTo(e,this.concreteTree,t)},e.graph=function(e){return this.rawTree.graph(this.policy,this.concreteTree,e)},e.getGraphMode=function(){return this.rawTree.getGraphMode(this.policy,this.concreteTree)},e.getGraphInfo=function(){return this.rawTree.getGraphInfo(this.policy,this.concreteTree)},e.shouldIntersect=function(){if(!this.evaluationState.is_graphable)return!1;if(!this.rawTree.userData.shouldGraph)return!1;if(!r.pointsOfInterest)return!1;var e=this.getGraphMode();return e===i.X||e===i.Y}})}),define("math/features/analyze",["require","parsenodes","math/statementanalysis","math/builtinframe","math/parsenode/builtinfunction","math/errormsg","math/comparators","math/types"],function(e){function t(e,t,n,i){var s=i.getDependencies();switch(i.valueType){case l.Point:case l.ListOfPoint:return s.length?e.validParametricVariables(s)?r(e,n,i):r(e,n,o.tooManyVariables(n.getSliderVariables(e,i)).setDependencies(s)):r(e,n,i);case l.Number:case l.ListOfNumber:switch(s.length){case 0:return r(e,n,i);case 1:return e.validExpressionVariable(s[0])?r(e,n,i):r(e,n,o.equationRequired(e.implicitDependency(s[0])).setDependencies(s));default:return e.validImplicitVariables(s)?r(e,n,o.equationRequired().setDependencies(s)):r(e,n,o.tooManyVariables(n.getSliderVariables(e,i)).setDependencies(s))}}}function n(e,t){return e.filter(function(e){return!t[e]})}var i=e("parsenodes"),r=e("math/statementanalysis"),s=e("math/builtinframe"),a=e("math/parsenode/builtinfunction"),o=e("math/errormsg"),c=e("math/comparators"),l=e("math/types");i.Base.prototype.analyze=function(e,t){return r(e,this,this.tryGetConcreteTree(t))},i.Expression.prototype.analyze=function(e,n){var i=this.tryGetConcreteTree(n);return i.isError?r(e,this,i):t(e,n,this,i)},i.Identifier.prototype.analyze=function(e,t){return r(e,this,this.tryGetConcreteTree(t))},i.FunctionDefinition.prototype.analyze=function(e,t){var n=/^log_[\d|e]/;if(s[this._symbol]||n.test(this._symbol))return r(e,this,o.cannotRedefine(this._symbol));var i=this._symbol.split("_")[0];if(a[i])return r(e,this,o.cannotRedefine(this._symbol,i));var c=this.tryGetConcreteTree(t);if(c.isError)return r(e,this,c);var l=this._argSymbols,u=c.getDependencies();if(-1!==u.indexOf(this._symbol))return r(e,this,o.selfReferentialFunction(this._symbol));var h=u.filter(function(e){return-1===l.indexOf(e)});return e.unplottablePolarFunction(this._symbol,u)?r(e,this,o.unplottablePolarFunction()):h.some(e.assignmentForbidden)?r(e,this,o.addArgumentsToDefinition(h,this._symbol,l).setDependencies(u)):h.length?r(e,this,o.tooManyVariables(this.getSliderVariables(e,c)).setDependencies(u)):r(e,this,c)},i.Assignment.prototype.analyze=function(e,t,n){var a=this._symbol;if(!e.validLHS(a))return r(e,this,o.invalidLHS(a));if(s[a])return r(e,this,o.cannotRedefine(a));var c=this.tryGetConcreteTree(t);if(c.isError)return r(e,this,c);var l=c.getDependencies();if(this.isEquation(c)){var u=this.asEquation().analyze(e,t);return r(e,this,u.concreteTree)}if(l.length>1)return r(e,this,o.tooManyVariables(this.getSliderVariables(e,c)).allowExport().setDependencies(l));var h=this.getMoveStrategy(t,c,n);if(h){var d=this.getDefaultDragMode(h);return r(e,this,i.MovablePoint(c.args,h,d))}return r(e,this,c)},i.Regression.prototype.analyze=function(e,t,n,i,s){return r(e,this,this.tryOptimize(e,t,n,i,s))},i.Equation.prototype.analyze=i.BaseComparator.prototype.analyze=function(e,t){return r(e,this,this.trySolve(e,t))},i.DoubleInequality.prototype.analyze=function(e,t){var n=this.tryGetConcreteTree(t);if(n.isError)return r(e,this,n);var i=n.getDependencies();return c.table[this._operators[0]].direction!==c.table[this._operators[1]].direction?r(e,this,o.mismatchedDoubleInequality()):e.validDoubleInequalitySymbol(n._symbol)&&e.validDoubleInequalityVariables(i)?i.length>2?r(e,this,o.tooManyVariables(this.getSliderVariables(e,n)).setDependencies(i)):-1!==n._expressions[0].getDependencies().indexOf(n._symbol)||-1!==n._expressions[1].getDependencies().indexOf(n._symbol)?r(e,this,o.complicatedDoubleInequality().setDependencies(i)):r(e,this,n):r(e,this,o.invalidDoubleInequalityVariables().setDependencies(i))},i.And.prototype.analyze=function(e,t){var n=this.tryGetConcreteTree(t);if(n.isError)return r(e,this,n);var i=n.getDependencies();return i.length?e.validDoubleInequalityVariables(i)?r(e,this,o.complicatedDoubleInequality().setDependencies(i)):r(e,this,o.tooManyVariables(this.getSliderVariables(e,n)).setDependencies(i)):r(e,this,n)},i.OrderedPair.prototype.analyze=function(e,n,s){var a=this.tryGetConcreteTree(n);if(a.isError)return r(e,this,a);var o=this.getMoveStrategy(n,a,s);if(o){var c=this.getDefaultDragMode(o);return r(e,this,i.MovablePoint(a.args,o,c))}return t(e,n,this,a)},i.Table.prototype.analyze=function(e,t){for(var s,a=Object.create(t),c=[],l=0;l<this.columns.length;l++){var u=this.columns[l].analyze(e,a,t);if(0===l&&(u.concreteTree.isIndependent?e.validFirstColumnVariable(u.concreteTree.header._symbol)?s=u.concreteTree.header._symbol:u=r(e,this.columns[l],o.invalidFirstTableColumn()):u=r(e,this.columns[l],o.invalidDependentFirstTableColumn())),u.concreteTree.isIndependent)u.rawTree.exportToLocal(u.concreteTree,a);else if(!u.concreteTree.isError){var h=u.concreteTree.header.getDependencies(),d=n(h,a);d.length&&(u=r(e,this.columns[l],o.tooManyVariables(d).setDependencies(d)))}c.push(u.concreteTree)}var p=i.Table(c),f=r(e,this,p);return f.evaluationState.is_graphable=!0,f},i.TableColumn.prototype.analyze=function(e,t,n){var i=this.header.tableError();if(i)return r(e,this,o.invalidTableHeader(i));var s=this.tryGetConcreteTree(t,n);if(s.isError)return r(e,this,s);if(s.header.isError)return r(e,this,s.header);if(s.values.isError)return r(e,this,s.values);for(var a=0;a<s.values.length;a++)if(!s.values[a].isError){var c=this.values[a]&&this.values[a].tableError();if(c)s.values[a]=o.invalidTableEntry(c);else{var l=s.values[a].getDependencies();l.length&&(s.values[a]=o.tooManyVariables(l).setDependencies(l))}}return r(e,this,s)}}),define("math/features/analyzeFourFunction",["require","parsenodes","math/statementanalysis","math/errormsg","math/parsenode/builtinfunction","math/builtinconstants"],function(e){var t=e("parsenodes"),n=e("math/statementanalysis"),i=e("math/errormsg"),r=e("math/parsenode/builtinfunction"),s=e("math/builtinconstants");t.Base.prototype.analyzeFourFunction=function(e,t){var r=this.tryGetConcreteTree(t);return r.isError?n(e,this,r):n(e,this,i.parseError())},t.Expression.prototype.analyzeFourFunction=function(e,t){var a=this.tryGetConcreteTree(t);if(a.isError)return n(e,this,a);var o=a.getDependencies();if(o.length>0){var c,l=o[0];return c=r.hasOwnProperty(l)?i.functionUnsupported(l):s.hasOwnProperty(l)?i.constantUnsupported(l):i.variablesUnsupported(l),n(e,this,c)}return n(e,this,a)},t.Assignment.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.assignmentsUnsupported())},t.FunctionDefinition.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.functionDefinitionsUnsupported())},t.Equation.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.equationsUnsupported())},t.And.prototype.analyzeFourFunction=t.DoubleInequality.prototype.analyzeFourFunction=t.BaseComparator.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.inequalitiesUnsupported())},t.Regression.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.regressionsUnsupported())},t.OrderedPair.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("math/features/analyzeScientific",["require","parsenodes","math/statementanalysis","math/errormsg","math/builtinframe"],function(e){var t=e("parsenodes"),n=e("math/statementanalysis"),i=e("math/errormsg"),r=e("math/builtinframe");t.Base.prototype.analyzeScientific=function(e,t){var r=this.tryGetConcreteTree(t);return r.isError?n(e,this,r):n(e,this,i.parseError())},t.Expression.prototype.analyzeScientific=function(e,t){var r=this.tryGetConcreteTree(t);if(r.isError)return n(e,this,r);var s=r.getDependencies();return s.length>0?n(e,this,i.tooManyVariables(s)):n(e,this,r)},t.Assignment.prototype.analyzeScientific=function(e,t){var s=this._symbol;if(r[s])return n(e,this,i.cannotRedefine(s));var a=this.tryGetConcreteTree(t);if(a.isError)return n(e,this,a);var o=a.getDependencies();return this.isEquation(a)?n(e,this,i.equationsUnsupported()):o.length>0?n(e,this,i.tooManyVariables(o)):n(e,this,a)},t.FunctionDefinition.prototype.analyzeScientific=function(e,t){if(r[this._symbol])return n(e,this,i.cannotRedefine(this._symbol));var s=this.tryGetConcreteTree(t);if(s.isError)return n(e,this,s);var a=this._argSymbols,o=s.getDependencies();if(-1!==o.indexOf(this._symbol))return n(e,this,i.selfReferentialFunction(this._symbol));var c=o.filter(function(e){return-1===a.indexOf(e)});return c.length?n(e,this,i.addArgumentsToDefinition(c,this._symbol,a)):n(e,this,s)},t.Equation.prototype.analyzeScientific=function(e,t){return n(e,this,i.equationsUnsupported())},t.And.prototype.analyzeScientific=t.DoubleInequality.prototype.analyzeScientific=t.BaseComparator.prototype.analyzeScientific=function(e,t){return n(e,this,i.inequalitiesUnsupported())},t.Regression.prototype.analyzeScientific=function(e,t){return n(e,this,i.regressionsUnsupported())},t.OrderedPair.prototype.analyzeScientific=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("math/features/analyzeNeuteredScientific",["require","parsenodes","math/statementanalysis","math/errormsg","math/parsenode/builtinfunction","math/builtinconstants"],function(e){var t=e("parsenodes"),n=e("math/statementanalysis"),i=e("math/errormsg"),r=e("math/parsenode/builtinfunction"),s=e("math/builtinconstants");t.Base.prototype.analyzeNeuteredScientific=function(e,t){var r=this.tryGetConcreteTree(t);return r.isError?n(e,this,r):n(e,this,i.parseError())},t.Expression.prototype.analyzeNeuteredScientific=function(e,t){var a=this.tryGetConcreteTree(t);if(a.isError)return n(e,this,a);var o=a.getDependencies();if(o.length>0){var c,l=o[0];return c=r.hasOwnProperty(l)?i.functionUnsupported(l):s.hasOwnProperty(l)?i.constantUnsupported(l):i.variablesUnsupported(l),n(e,this,c)}return n(e,this,a)},t.Assignment.prototype.analyzeNeuteredScientific=function(e,t){return n(e,this,i.assignmentsUnsupported())},t.FunctionDefinition.prototype.analyzeNeuteredScientific=function(e,t){return n(e,this,i.functionDefinitionsUnsupported())},t.Equation.prototype.analyzeNeuteredScientific=function(e,t){return n(e,this,i.equationsUnsupported())},t.And.prototype.analyzeNeuteredScientific=t.DoubleInequality.prototype.analyzeNeuteredScientific=t.BaseComparator.prototype.analyzeNeuteredScientific=function(e,t){return n(e,this,i.inequalitiesUnsupported())},t.Regression.prototype.analyzeNeuteredScientific=function(e,t){return n(e,this,i.regressionsUnsupported())},t.OrderedPair.prototype.analyzeNeuteredScientific=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("graphing/dragmode",{NONE:"NONE",X:"X",Y:"Y",XY:"XY",AUTO:"AUTO"}),define("graphing/reconcileDragMode",["require","graphing/dragmode"],function(e){function t(e){return e?"none"===e[0].type&&"none"===e[1].type?i.NONE:"none"===e[1].type?i.X:"none"===e[0].type?i.Y:i.XY:i.NONE}function n(e,n){var r=t(n);switch(e){case i.NONE:return i.NONE;case i.AUTO:return r;case i.XY:return r;case i.X:return r===i.X||r===i.XY?i.X:i.NONE;case i.Y:return r===i.Y||r===i.XY?i.Y:i.NONE;default:return i.NONE}}var i=e("graphing/dragmode");return n}),define("math/features/getgraphmode",["require","parsenodes","graphing/graphmode","graphing/reconcileDragMode","graphing/dragmode","math/types"],function(e){function t(e,t){var n;return n=e&&e.hasOwnProperty("dragMode")?e.dragMode===o.AUTO?t.defaultDragMode:e.dragMode:t.defaultDragMode,a(n,t.moveStrategy)}function n(e,n){var i=n.getDependencies();switch(n.valueType){case c.Point:case c.ListOfPoint:return n.isMovablePoint&&t(this.userData,n)!==o.NONE?s.XYPOINT_MOVABLE:0===i.length?s.XYPOINT:e.validParametricVariables(i)?s.PARAMETRIC:s.NONE;case c.Number:case c.ListOfNumber:return 1===i.length?s.Y:s.NONE;default:return s.NONE}}function i(e,t){var n=t._expression.getDependencies();if(1!==n.length)return s.NONE;var i=t._symbol,r=n[0];return e.graphMode(i,r)}var r=e("parsenodes"),s=e("graphing/graphmode"),a=e("graphing/reconcileDragMode"),o=e("graphing/dragmode"),c=e("math/types");r.Base.prototype.getGraphMode=function(e,t){return s.NONE},r.Identifier.prototype.getGraphMode=function(e,t){return e.graphableAsBareIdentifier(this._symbol)?s.Y:s.NONE},r.Expression.prototype.getGraphMode=n,r.BaseComparator.prototype.getGraphMode=function(e,t){var n=t.getDependencies();return t.isConstant?s.NONE:t instanceof r.SolvedEquation?0===n.length?e.graphableAsConstant(t._symbol)?e.constantGraphMode(t._symbol):s.NONE:i(e,t):2===n.length?s.IMPLICIT:s.NONE},r.DoubleInequality.prototype.getGraphMode=function(e,t){return e.constantGraphMode(t._symbol)},r.Equation.prototype.getGraphMode=function(e,t){return t.isConstant?s.NONE:t instanceof r.SolvedEquation?i(e,t):2!==t.getDependencies().length?s.NONE:s.IMPLICIT},r.Assignment.prototype.getGraphMode=function(e,t){if(t instanceof r.SolvedEquation)return i(e,t);var a=t.getDependencies();switch(t.valueType){case c.Number:case c.ListOfNumber:switch(a.length){case 0:return e.graphableAsConstant(this._symbol)?e.constantGraphMode(this._symbol):s.NONE;case 1:return t.isList&&!e.graphableListVariables(this._symbol,a[0])?s.NONE:e.graphMode(this._symbol,a[0]);case 2:return s.IMPLICIT;default:return s.NONE}break;default:return n.call(this,e,t)}},r.FunctionDefinition.prototype.getGraphMode=function(e,t){if(1!==this._argSymbols.length)return s.NONE;var n=e.graphMode(this._symbol,this._argSymbols[0]),i=t.getDependencies();switch(t.valueType){case c.Number:case c.ListOfNumber:switch(i.length){case 0:return n;case 1:return i[0]!==this._argSymbols[0]?s.NONE:n;default:return s.NONE}break;default:return s.NONE}},r.Regression.prototype.getGraphMode=function(e,t){return this.isLhsSimple&&t.isModelValid?1!==t.model.getDependencies().length?s.NONE:s.Y:s.NONE}}),define("math/features/getgraphinfo",["require","parsenodes","math/builtinframe","math/domaintypes"],function(e){var t=e("parsenodes"),n=e("math/builtinframe"),i=e("math/domaintypes");t.Base.prototype.getGraphInfo=function(e,t){var r,s,a=t.getDependencies(),o=[NaN,NaN];switch(a.length){case 0:r=!0,o=[+t.constantValue,0],s=t.boundDomain("x");break;case 1:if(s=t.boundDomain(a[0]),r="known"===s.type?t.isLinear(a[0]):!1){var c=t.getPolynomialCoefficients(a[0]);o[0]=c[0]?+c[0].getConcreteTree(n).constantValue:0,o[1]=c[1]?+c[1].getConcreteTree(n).constantValue:0}break;case 2:r=!1,s=i.unknownDomain()}return{graphMode:this.getGraphMode(e,t),color:this.userData.color,style:this.userData.style,operator:this.getOperator(),isLinear:r,linearCoefficients:o,domainBound:s}}}),define("math/features/getMoveStrategy",["require","parsenodes","math/types"],function(e){function t(e){return{type:"none",inputString:e}}function n(e){return{type:"updateCoordinate",inputString:e}}function i(e,t,n){return{type:"updateSlider",inputString:e,id:t,coefficients:n}}function r(e,t){for(var n in t)if(t[n].evaluationState.assignment===e&&t[n].evaluationState.is_slidable)return n}var s=e("parsenodes"),a=e("math/types"),o=s.Constant(0);s.Base.prototype.getMoveStrategy=function(){},s.Assignment.prototype.getMoveStrategy=function(e,t,n){return this._expression instanceof s.OrderedPair&&(!this.userData||this.userData.shouldGraph!==!1)?this._expression.getMoveStrategy(e,t,n):void 0},s.OrderedPair.prototype.getMoveStrategy=function(e,c,l){if(c.valueType===a.Point&&0===c.getDependencies().length&&(!this.userData||this.userData.shouldGraph!==!1)){for(var u=[],h=!1,d=0;2>d;d++){var p=this.args[d],f=p.getInputString();if(p.isConstant)u[d]=n(f);else if(h)u[d]=t(f);else{for(var m=p.getDependencies(),g=this.args[0===d?1:0],v=m.length-1;v>=0;v--){var y=m[v],b=r(y,l);if(void 0!==b){var _=Object.create(e);_[y]=s.FreeVariable(y);var x=p.tryGetConcreteTree(_);if(!x.isError){var w=x.polynomialOrder(y);if(1===w){var S=x.getPolynomialCoefficients(y),k=S[1]?S[1].getConcreteTree(_):o,E=S[0]?S[0].getConcreteTree(_):o;if(E.isConstant&&k.isConstant&&isFinite(E.constantValue)&&isFinite(k.constantValue)&&0!==k.constantValue){var T=g.tryGetConcreteTree(_);if(!T.isError){var C=T.polynomialOrder(y);if(C>0){if(1===d&&"none"!==u[0].type)continue;h=!0}var M=[-E.constantValue/k.constantValue,1/k.constantValue];u[d]=i(f,b,M);break}}}}}}u[d]||(u[d]=t(f))}}if("none"!==u[0].type||"none"!==u[1].type)return u}}}),define("math/features/getDefaultDragMode",["require","parsenodes","graphing/dragmode"],function(e){var t=e("parsenodes"),n=e("graphing/dragmode");t.Base.prototype.getMoveStrategy=function(){return n.NONE},t.Assignment.prototype.getDefaultDragMode=function(e){return"none"!==e[0].type&&"none"!==e[1].type?n.XY:"none"!==e[0].type?n.X:"none"!==e[1].type?n.Y:n.NONE},t.OrderedPair.prototype.getDefaultDragMode=function(e){return"updateSlider"===e[0].type&&"updateSlider"===e[1].type?n.XY:"updateSlider"===e[0].type?n.X:"updateSlider"===e[1].type?n.Y:n.NONE}}),define("math/features/tableinfo",["require","parsenodes","math/types"],function(e){var t=e("parsenodes"),n=t.List,i=e("math/types"),r=function(e){return e.replace(/^( |\\space)+/,"").replace(/( |\\space)+$/,"")};t.Base.prototype.tableInfo=function(e,t){return!1},t.Identifier.prototype.tableInfo=function(e,t){return e.graphableAsBareIdentifier(this._symbol)&&e.validFirstColumnVariable(this._symbol)?{independent_variable:this._symbol,dependent_column:this._inputString,by_reference:!1}:!1},t.Expression.prototype.tableInfo=function(e,t){var r=t.getDependencies();switch(t.valueType){case i.Point:case i.ListOfPoint:if(0!==r.length)return!1;if(t.isMovablePoint&&("updateSlider"===t.moveStrategy[0].type||"updateSlider"===t.moveStrategy[1].type))return!1;var s=n.wrap(t).args.map(function(e){return e.asArray()});return{independent_variable:"x",dependent_column:"y",by_reference:!1,values:s};case i.Number:if(1!==r.length)return!1;var a=r[0];return e.validFirstColumnVariable(a)?{independent_variable:a,dependent_column:this._inputString,by_reference:!1}:!1;default:return!1}},t.Assignment.prototype.tableInfo=function(e,n){if(n instanceof t.SolvedEquation)return!1;if(!this._inputString.length)return!1;var i=n.getDependencies();if(i.length>1)return!1;var s;if(0===i.length){if(!e.tableableAsConstant(this._symbol))return!1;s=e.implicitIndependent(this._symbol)}else s=i[0];if(!e.validFirstColumnVariable(s))return!1;var a=r(e.assignmentForbidden(this._symbol)?this._inputString.replace(/[^=]*=/,""):this._inputString.split("=")[0]);return{independent_variable:s,dependent_column:a,by_reference:!e.assignmentForbidden(this._symbol)}},t.FunctionDefinition.prototype.tableInfo=function(e,t){if(1!==this._argSymbols.length)return!1;if(!this._inputString.length)return!1;var n=t.getDependencies();if(n.length>1)return!1;var i=this._argSymbols[0];if(!e.validFirstColumnVariable(i))return!1;var s=e.assignmentForbidden(this._symbol),a=r(s?this._inputString.replace(/[^=]*=/,""):this._inputString.split("=")[0]);return{independent_variable:i,dependent_column:a,by_reference:!s}},t.BaseComparator.prototype.tableInfo=function(e,t){return!1},t.DoubleInequality.prototype.tableInfo=function(e,t){return!1},t.Equation.prototype.tableInfo=function(e,t){return!1}}),define("math/features/tableerror",["require","parsenodes","lib/worker-i18n"],function(e){var t=e("parsenodes"),n=e("lib/worker-i18n");t.Base.prototype.tableError=function(){return this.isInequality()?n.t("Inequalities are not allowed."):!1},t.List.prototype.tableError=function(){return n.t("Lists are not allowed.")},t.Equation.prototype.tableError=t.Assignment.prototype.tableError=function(){return n.t("Equations are not allowed.")},t.FunctionDefinition.prototype.tableError=function(){return n.t("Function definitions are not allowed.")}}),define("math/features/islinear",["require","parsenodes"],function(e){var t=e("parsenodes");t.Base.prototype.isLinear=function(e){return!1},t.Expression.prototype.isLinear=function(e){return this.polynomialOrder(e)<=1},t.SolvedEquation.prototype.isLinear=function(e){return this._expression.isLinear(e)},t.OptimizedRegression.prototype.isLinear=function(e){return this.model.isLinear(e)}}),define("math/curve-accumulator",["require","./distance","pjs"],function(e){var t=e("./distance"),n=e("pjs"),i=n(function(e){e.init=function(e){this.domain=e,e?(this.xtolerance=e.xtolerance||e.tolerance||0,this.ytolerance=e.ytolerance||e.tolerance||0,this.map=e.map):this.xtolerance=this.ytolerance=0,this.segments=[],this.segment=null,this.pivotPoint=null,this.pendingPoint=null},e.colinear=function(e,n,i){this.map&&(e=this.map(e),n=this.map(n),i=this.map(i));var r=t.pointToSegmentParameter(i[0],i[1],e[0],e[1],n[0],n[1]);if(1>r)return!1;var s=[e[0]+r*(n[0]-e[0]),e[1]+r*(n[1]-e[1])];return Math.abs(i[0]-s[0])<=this.xtolerance&&Math.abs(i[1]-s[1])<=this.ytolerance},e.addPoint=function(e){if(!this.segment)return void(this.segment=[e[0],e[1]]);if(this.xtolerance<0&&this.ytolerance<0)return void this.segment.push(e[0],e[1]);
var n=[this.segment[this.segment.length-2],this.segment[this.segment.length-1]];if(e[0]!==n[0]||e[1]!==n[1]){if(!this.pivotPoint)return this.pivotPoint=e,void(this.pendingPoint=e);(!this.colinear(n,this.pivotPoint,e)||t.hypot(n[0]-e[0],n[1]-e[1])<t.hypot(n[0]-this.pendingPoint[0],n[1]-this.pendingPoint[1]))&&(this.flushPending(),this.pivotPoint=e),this.pendingPoint=e}},e.flushPending=function(){this.pendingPoint&&(this.segment.push(this.pendingPoint[0],this.pendingPoint[1]),this.pivotPoint=null,this.pendingPoint=null)},e.breakSegment=function(){this.flushPending(),this.segment&&(this.segment.length>2&&this.segments.push(this.segment),this.segment=null)},e.getSegments=function(){return this.breakSegment(),this.segments},e.finish=function(){return{segments:this.getSegments(),resolved:!0}},e.exhaust=function(){}});return i}),define("math/implicit-plotter",["require","math/distance","./curve-accumulator"],function(e){"use strict";function t(e,t){var i=n(e,t);return{segments:i.contours.strokeSegments,fillSegments:i.contours.fillSegments,resolved:i.quadTree.resolved}}function n(e,t){var n=Math.pow(2,-z),i=c(t,n),r=c(t,2*n),s=l(e,i,r),a=E(s.root,e,i),o=j(a,e,i);return{paddedDomain:i,rootDomain:r,quadTree:s,triangles:a,contours:o}}function i(e,t,n){return{x:e,y:t,z:n}}function r(e,t,n){return{x:e,y:t,isZero:n}}function s(e,t,n){return{vertices:[e,t,n],visited:!1,next:void 0}}function a(e,t){return{isLeaf:!1,depth:e,vertices:t,children:void 0,center:void 0}}function o(e,t,n){e.isLeaf=!0,e.center=x(e.vertices[0],e.vertices[1],e.vertices[2],e.vertices[3],t,n)}function c(e,t){var n=(1+t)*e.xmin-t*e.xmax,i=(1+t)*e.xmax-t*e.xmin,r=(1+t)*e.ymin-t*e.ymax,s=(1+t)*e.ymax-t*e.ymin;return{xmin:n,ymin:r,xmax:i,ymax:s,xtolerance:e.xtolerance,ytolerance:e.ytolerance}}function l(e,t,n){var i=u(e,n),r=[],s=[];s.push(i);var a=1,c=!0;e:for(;s.length;){var l=r;for(r=s,s=l;r.length;){var p=r.pop();if(d(p,e,t)){if(h(p,e),s.push(p.children[0]),s.push(p.children[1]),s.push(p.children[2]),s.push(p.children[3]),a+=3,a>=U){c=!1;break e}}else o(p,e,t)}}var f;for(f=0;f<r.length;f++)o(r[f],e,t);for(f=0;f<s.length;f++)o(s[f],e,t);return{root:i,resolved:c}}function u(e,t){var n=t.xmin,i=t.xmax,r=t.ymin,s=t.ymax;return a(0,[y(n,s,e),y(i,s,e),y(i,r,e),y(n,r,e)])}function h(e,t){var n=e.depth+1,i=e.vertices[0],r=e.vertices[1],s=e.vertices[2],o=e.vertices[3],c=b(i,r,t),l=b(r,s,t),u=b(s,o,t),h=b(o,i,t),d=b(i,s,t);e.children=[a(n,[i,c,d,h]),a(n,[c,r,l,d]),a(n,[d,l,s,u]),a(n,[h,d,u,o])]}function d(e,t,n){if(e.depth<z)return!0;if(g(e,n))return!1;if(m(e,n))return!1;var i=e.vertices[0],r=e.vertices[1],s=e.vertices[2],a=e.vertices[3];if(isNaN(i.z)&&isNaN(r.z)&&isNaN(s.z)&&isNaN(a.z))return!1;if(isNaN(i.z)||isNaN(r.z)||isNaN(s.z)||isNaN(a.z))return!0;var o=x(i,r,s,a,t,n),c=_(i,r,t,n),l=_(r,s,t,n),u=_(s,a,t,n),h=_(a,i,t,n);return f(i,c,t,n)||f(r,c,t,n)||f(r,l,t,n)||f(s,l,t,n)||f(s,u,t,n)||f(a,u,t,n)||f(a,h,t,n)||f(i,h,t,n)||p(i,c,o,t,n)||p(c,r,o,t,n)||p(r,l,o,t,n)||p(l,s,o,t,n)||p(s,u,o,t,n)||p(u,a,o,t,n)||p(a,h,o,t,n)||p(h,i,o,t,n)}function p(e,t,n,i,r){if(e.z>0==t.z>0&&t.z>0==n.z>0)return!1;var s,a,o,c;if(e.z>0==t.z>0){if(s=b(e,t,i),s.z>0!=e.z>0)return!0;a=S(e,n,i,r),o=S(t,n,i,r),c=S(s,n,i,r)}if(t.z>0==n.z>0){if(s=b(t,n,i),s.z>0!=t.z>0)return!0;a=S(t,e,i,r),o=S(n,e,i,r),c=S(s,e,i,r)}if(n.z>0==e.z>0){if(s=b(n,e,i),s.z>0!=n.z>0)return!0;a=S(n,t,i,r),o=S(e,t,i,r),c=S(s,t,i,r)}var l=r.xtolerance,u=r.ytolerance,h=B.pointToSegment(u*c.x,l*c.y,u*a.x,l*a.y,u*o.x,l*o.y);return h>l*u}function f(e,t,n,i){if(isNaN(e.z)&&isNaN(t.z))return!1;if(isNaN(e.z)||isNaN(t.z))return e.z>0||t.z>0;var r=b(e,t,n),s=4*r.z-t.z-3*e.z,a=1e-4,o=(n((1-a)*e.x+a*t.x,(1-a)*e.y+a*t.y)-e.z)/a,c=Math.max(Math.abs(e.z),Math.abs(t.z));return Math.abs(s-o)>.125*c}function m(e,t){return e.vertices[1].x-e.vertices[0].x<10*t.xtolerance?!0:e.vertices[0].y-e.vertices[3].y<10*t.ytolerance?!0:!1}function g(e,t){return e.vertices[0].x<t.xmin||e.vertices[0].y>t.ymax||e.vertices[2].x>t.xmax||e.vertices[2].y<t.ymin}function v(e,t){return e.x<t.xmin||e.x>t.xmax||e.y<t.ymin||e.y>t.ymax}function y(e,t,n){return i(e,t,n(e,t))}function b(e,t,n){return y(.5*(e.x+t.x),.5*(e.y+t.y),n)}function _(e,t,n,r){if(v(e,r)||v(t,r))return b(e,t,n);if(isNaN(e.z)||isNaN(t.z))return k(e,t,n,r);if(e.z>0!=t.z>0)return b(e,t,n);var s=.01,a=n((1-s)*e.x+s*t.x,(1-s)*e.y+s*t.y)-e.z,o=t.z-n(s*e.x+(1-s)*t.x,s*e.y+(1-s)*t.y);return isNaN(a)||isNaN(o)?b(e,t,n):a>0==o>0?b(e,t,n):w(i(e.x,e.y,a),i(t.x,t.y,o),n)}function x(e,t,n,i,r,s){var a=_(e,n,r,s);return e.z>0==n.z>0&&a.z>0!=e.z>0?a:(a=_(t,i,r,s),t.z>0==i.z>0&&a.z>0!=t.z>0?a:b(e,n,r))}function w(e,t,n){if(isNaN(e.z))return t;if(isNaN(t.z))return e;if(isFinite(e.z)||isFinite(t.z)){if(isFinite(e.z)){if(isFinite(t.z)){var i=1-e.z/t.z,r=1-t.z/e.z;return y(e.x/i+t.x/r,e.y/i+t.y/r,n)}return e}return t}return b(e,t,n)}function S(e,t,n,s){var a=e.x,o=t.x,c=e.y,l=t.y,u=e.z,h=t.z,d=s.xtolerance,p=s.ytolerance;if(v(e,s)||v(t,s)){var f=b(e,t,n);return r(f.x,f.y,!1)}for(;Math.abs(a-o)>d||Math.abs(c-l)>p;){var m=.5*(a+o),g=.5*(c+l),y=n(m,g);y>0==u>0?(a=m,c=g,u=y):(o=m,l=g,h=y)}if(isNaN(u))return r(o,l,!1);if(isNaN(h))return r(a,c,!1);var _=w(i(a,c,u),i(o,l,h),n),x=0===u||0===h||0===_.z||_.z>=u==h>=_.z&&Math.abs(_.z)<1e250;return r(_.x,_.y,x)}function k(e,t,n,r){if(isNaN(e.z)===isNaN(t.z))return b(e,t,n);var s;isNaN(e.z)&&(s=e,e=t,t=s);for(var a=e.x,o=t.x,c=e.y,l=t.y,u=e.z,h=t.z,d=r.xtolerance,p=r.ytolerance;Math.abs(a-o)>d||Math.abs(c-l)>p;){var f=.5*(a+o),m=.5*(c+l),g=n(f,m);isNaN(g)===isNaN(u)?(a=f,c=m,u=g):(o=f,l=m,h=g)}return i(a,c,u)}function E(e,t,n){var i={triangles:[],edgeCache:{},domain:n,fn:t};return T(e,i),i.triangles}function T(e,t){e.isLeaf||(T(e.children[0],t),T(e.children[1],t),T(e.children[2],t),T(e.children[3],t),C(e.children[0],e.children[1],t),C(e.children[3],e.children[2],t),M(e.children[1],e.children[2],t),M(e.children[0],e.children[3],t))}function C(e,t,n){e.isLeaf&&t.isLeaf?P(e,t,n):e.isLeaf?(C(e,t.children[0],n),C(e,t.children[3],n)):t.isLeaf?(C(e.children[1],t,n),C(e.children[2],t,n)):(C(e.children[1],t.children[0],n),C(e.children[2],t.children[3],n))}function M(e,t,n){e.isLeaf&&t.isLeaf?A(e,t,n):e.isLeaf?(M(e,t.children[1],n),M(e,t.children[0],n)):t.isLeaf?(M(e.children[2],t,n),M(e.children[3],t,n)):(M(e.children[2],t.children[1],n),M(e.children[3],t.children[0],n))}function P(e,t,n){var i,r;e.depth>=t.depth?(i=_(e.vertices[1],e.vertices[2],n.fn,n.domain),r=I(e.vertices[1],t.center,e.vertices[2],e.center,i)):(i=_(t.vertices[0],t.vertices[3],n.fn,n.domain),r=I(t.vertices[0],t.center,t.vertices[3],e.center,i)),L(r,n.edgeCache,n.domain);for(var s=0;4>s;s++)n.triangles.push(r[s])}function A(e,t,n){var i,r;e.depth>=t.depth?(i=_(e.vertices[3],e.vertices[2],n.fn,n.domain),r=I(e.vertices[2],t.center,e.vertices[3],e.center,i)):(i=_(t.vertices[1],t.vertices[0],n.fn,n.domain),r=I(t.vertices[1],t.center,t.vertices[0],e.center,i)),L(r,n.edgeCache,n.domain);for(var s=0;4>s;s++)n.triangles.push(r[s])}function I(e,t,n,i,r){return[s(e,r,t),s(t,r,n),s(n,r,i),s(i,r,e)]}function q(e,t,n){return e.z>0&&!v(e,n)&&(!(t.z>0)||v(t,n))}function D(e,t){return""+e.x+","+e.y+","+t.x+","+t.y}function L(e,t,n){O(e[0],e[1],e[2],D(e[1].vertices[2],e[1].vertices[0]),t,n),O(e[1],e[2],e[3],D(e[2].vertices[0],e[2].vertices[2]),t,n),O(e[2],e[3],e[0],D(e[3].vertices[2],e[3].vertices[0]),t,n),O(e[3],e[0],e[1],D(e[0].vertices[0],e[0].vertices[2]),t,n)}function O(e,t,n,i,r,s){var a=t.vertices[0],o=t.vertices[1],c=t.vertices[2];q(o,c,s)&&(t.next=n),q(a,o,s)&&(t.next=e),q(c,a,s)&&F(t,i,r),q(a,c,s)&&N(t,i,r)}function N(e,t,n){n[t]?n[t].next=e:n[t]=e}function F(e,t,n){n[t]?e.next=n[t]:n[t]=e}function j(e,t,n){for(var i={fillAccumulator:new G(n),strokeAccumulator:new G(n),fn:t,domain:n},r=0;r<e.length;r++){var s=e[r];s.next&&!s.visited&&V(s,i)}return{strokeSegments:i.strokeAccumulator.finish().segments,fillSegments:i.fillAccumulator.finish().segments}}function V(e,t){for(;;){var n=e.vertices[0],i=e.vertices[1],r=e.vertices[2];if(R(n,i,r,t),R(i,r,n,t),R(r,n,i,t),e.visited)break;e.visited=!0,e=e.next}t.strokeAccumulator.breakSegment(),t.fillAccumulator.breakSegment()}function R(e,t,n,i){if(q(e,t,i.domain)){var r=S(e,t,i.fn,i.domain);i.fillAccumulator.addPoint([r.x,r.y]),r.isZero?i.strokeAccumulator.addPoint([r.x,r.y]):i.strokeAccumulator.breakSegment()}}function $(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push([i.vertices[0].x,i.vertices[0].y,i.vertices[1].x,i.vertices[1].y,i.vertices[2].x,i.vertices[2].y,i.vertices[0].x,i.vertices[0].y])}return t}var B=e("math/distance"),G=e("./curve-accumulator"),z=5,U=Math.pow(2,14);return{sampleImplicit:t,sampleImplicitDiagnostic:n,buildQuadTree:l,triangulate:E,traceContours:j,displayTrianges:$}}),define("math/plotter",["require","./distance","./poi","graphing/graphmode","./implicit-plotter","./curve-accumulator","math/domaintypes"],function(e){function t(e,t){for(var n,i=new w,r=t.min;r<=t.max+t.step/2;r+=t.step)n=e(r),isFinite(n[0])&&isFinite(n[1])?i.addPoint(n):i.breakSegment();return i.finish()}function n(e,t){for(var n,i=new w(t),r=t.min;r<=t.max+t.step/2;r+=t.step)n=e(r),isFinite(n)?i.addPoint([r,n]):i.breakSegment();return i.finish()}function i(e,t){var n=new w(t);return n.addPoint([t.min,e[0]+t.min*e[1]]),n.addPoint([t.max,e[0]+t.max*e[1]]),n.finish()}function r(e,t,n){var i,r,s,a,o,c,l=n.fn,u=n.jumpTolerance,h=n.stepPerturbation;i=e[0],r=e[1],o=t[0],c=t[1],s=y.mean(i,o),a=l(s);var d=b.bisectJump(i,r,s,a,o,c,l,u);if(d)for(var p=[-h,h],f=0;f<p.length;f++)if(i=e[0]+p[f],r=l(i),isFinite(r)||(i=e[0],r=e[1]),o=t[0]+p[f],c=l(o),isFinite(c)||(o=t[0],c=t[1]),s=y.mean(i,o),a=l(s),b.bisectJump(i,r,s,a,o,c,l,u))return d}function s(e,t){var n,i=new E(e,t),r=t.min,s=e(r),a=[r,s];for(isFinite(s)&&i.accumulator.addPoint([r,s]),r+=t.step;r<=t.max+t.step/2;r+=t.step){var o=r;s=e(o),isFinite(s)||(o=r+i.stepPerturbation,s=e(o)),isFinite(s)||(o=r-i.stepPerturbation,s=e(o)),isFinite(s)&&isFinite(a[1])?(k(a,[o,s],i),i.accumulator.addPoint([o,s])):isFinite(s)&&!isFinite(a[1])?(n=b.bisectFinite(a[0],a[1],o,s,e),n[0]!==o&&i.accumulator.addPoint(n),k(n,[o,s],i),i.accumulator.addPoint([o,s])):!isFinite(s)&&isFinite(a[1])&&(n=b.bisectFinite(a[0],a[1],o,s,e),k(a,n,i),n[0]!==a[0]&&i.accumulator.addPoint(n),i.accumulator.breakSegment()),a=[o,s]}return i.accumulator.finish()}function a(e,t,n,i){function r(e,t){var r=t%2===0?1:-1;if(!i&&-1===r)return!1;for(var s=t*(Math.PI/n),a=[c,c+1,c+2,c+3],o=!1,l=0,h=a.length;h>l;l++){var d=e(a[l]),p=e(a[l]+s);if(isFinite(d)&&isFinite(p)&&(o=!0),isFinite(d)!==isFinite(p)||Math.abs(d-r*p)>u)return!1}return o?!0:!1}var s,a,o,c=t.min,l=t.max-t.min,u=t.xtolerance&&t.ytolerance?Math.min(t.xtolerance,t.ytolerance):t.tolerance,h=Math.floor(l/(Math.PI/n));for(s=1;h>=s;s++)if(r(e,s)){for(o=s,a=2;h>=a*s;a++)r(e,a*s)||(o=void 0);if(o)break}return o?o*(Math.PI/n):null}function o(e){return[e[1]*Math.cos(e[0]),e[1]*Math.sin(e[0])]}function c(e,t){return t.map=o,s(e,t)}function l(e,t){for(var n=e.min,i=e.max,r=e.step,s=i-n,a=Math.ceil(s/r),o=s/a,c=0;a>c;c++)t(n+c*o);t(i)}function u(e,t){if(t.max<t.min)return[];var n=new w(t),i=10,r=t.min,s=e(r);isFinite(s[0])&&isFinite(s[1])&&n.addPoint(s);var a;return l(t,function(t){a=e(t),h(e,r,s,t,a,i,n),r=t,s=a}),n.finish()}function h(e,t,n,i,r,s,a){if(i!==t){var o=a.xtolerance,c=a.ytolerance,l=y.mean(t,i),u=e(l,!0),d=isFinite(n[0])&&isFinite(n[1]),p=isFinite(r[0])&&isFinite(r[1]),f=isFinite(u[0])&&isFinite(u[1]);if(0===s||l===t||l===i)return a.breakSegment(),void(p&&a.addPoint(r));if(d||p){if(d!==p){for(var m=t,g=i,v=n,b=r;t!==l&&l!==i;)f==d?(t=l,n=u,d=f):(i=l,r=u,p=f),l=t+(i-t)/2,u=e(l,!0),f=isFinite(u[0])&&isFinite(u[1]);return void(d?(h(e,m,v,t,n,s-1,a),a.breakSegment()):(a.breakSegment(),a.addPoint(r),h(e,i,r,g,b,s-1,a)))}if(d&&f&&p){var _=y.pointToSegmentParameter(u[0],u[1],n[0],n[1],r[0],r[1]);if(_>.2&&.8>_&&Math.abs(u[0]-(n[0]+_*(r[0]-n[0])))<=o&&Math.abs(u[1]-(n[1]+_*(r[1]-n[1])))<=c)return void a.addPoint(r)}(n[0]!==u[0]||n[1]!==u[1])&&h(e,t,n,l,u,s-1,a),(r[0]!==u[0]||r[1]!==u[1])&&h(e,l,u,i,r,s-1,a)}}}function d(e){if(!e)return!1;var t=e.viewport.xmin,n=e.viewport.xmax,i=e.viewport.ymin,r=e.viewport.ymax;return!isFinite(t)||!isFinite(n)||t>=n?!1:!isFinite(i)||!isFinite(r)||i>=r?!1:!isFinite(e.screen.width)||e.screen.width<=0?!1:!isFinite(e.screen.height)||e.screen.height<=0?!1:!0}function p(e,t,n){var i,r,s=e.viewport.xmin,o=e.viewport.xmax,c=e.viewport.ymin,l=e.viewport.ymax,u=e.trigAngleMultiplier||1,h=e.oversample||4,d=1/h*(o-s)/e.screen.width,p=1/h*(l-c)/e.screen.height,f=t.domainBound;switch(t.graphMode){case _.X:switch(i=S.intersectDomains(S.knownDomain([c,l]),f),i.type){case"empty":return!1;case"known":c=i.bounds[0],l=i.bounds[1]}r={min:c,max:l,xtolerance:p,ytolerance:d,step:p};break;case _.Y:switch(i=S.intersectDomains(S.knownDomain([s,o]),f),i.type){case"empty":return!1;case"known":s=i.bounds[0],o=i.bounds[1]}r={min:s,max:o,xtolerance:d,ytolerance:p,step:d};break;case _.POLAR:r={min:0,max:2*Math.PI/u*6,step:2*Math.PI/u/1e3,tolerance:Math.min(d,p)};var m=a(n,r,u,"="===t.operator);m&&(r.max=r.min+m);break;case _.PARAMETRIC:t.domain&&(r={min:t.domain.min,max:t.domain.max,step:t.domain.step,xtolerance:d,ytolerance:p});break;case _.IMPLICIT:r={xmin:s,xmax:o,ymin:c,ymax:l,xtolerance:d,ytolerance:p};break;default:return!1}return r}function f(e,t,n,r){var a,o,l,h=p(e,t,n);if(h){switch(t.graphMode){case _.X:case _.Y:a=t.isLinear?i(t.linearCoefficients,h):s(n,h);break;case _.POLAR:a=c(n,h);break;case _.IMPLICIT:a=x(n,h);break;case _.PARAMETRIC:h.step||(h.step=(h.max-h.min)/1e3),a=u(n,h)}o=a.segments}else o=[],a={resolved:!0};var d;if(t.graphMode!==_.PARAMETRIC&&t.graphMode!==_.IMPLICIT&&(d=b.findPOIs(o,n,r),o=m(o,d)),(!d||d.zeros.x.length+d.extrema.x.length+d.intercept.x.length>250)&&(d={zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}}),t.graphMode===_.X)for(var f in d)d.hasOwnProperty(f)&&(l=d[f].y,d[f].y=d[f].x,d[f].x=l);var g={segments:o,resolved:a.resolved,graphMode:t.graphMode,color:t.color,style:t.style,operator:t.operator,poi:d,expr:null};return a.fillSegments&&(g.fillSegments=a.fillSegments),g}function m(e,t){for(var n,i,r,s=e.length,a=Array(s),o=t.extrema,c=0,l=o.x.length,u=0;s>u;u++){n=e[u],r=n.length,i=[];for(var h=0;r>h;h+=2){for(;l>c&&o.x[c]<=n[h];)o.x[c]!==n[h]&&i.push(o.x[c],o.y[c]),c++;i.push(n[h],n[h+1])}a[u]=i}return a}function g(e,t,n){var i,r,s,a,o,c=[];switch(n){case _.POLAR:o=this.mapPolar;break;case _.X:o=function(e){return[e[1],e[0]]}}for(i=0;i<e.length;i++)for(a=e[i],r=0;r<a.length;r+=2)s=[a[r],a[r+1]],o&&(s=o(s)),c.push(s[0],s[1]);for(i=t.length-1;i>=0;i--)for(a=t[i],r=a.length-2;r>=0;r-=2)s=[a[r],a[r+1]],o&&(s=o(s)),c.push(s[0],s[1]);return c}function v(e,t,n){for(var i=function(e){var t=e[e.length-1];return t[t.length-2]},r=[],s=0,a=0,o=[],c=[],l=-(1/0),u=-(1/0);;){if(u>=l){if(s>=t.length)break;c.push(t[s++])}if(l>=u){if(a>=e.length)break;o.push(e[a++])}if(l=i(c),u=i(o),y.approx(l,u,4)){r.push(g(o,c,n)),c=[],o=[];var h=Math.max(l,u);l=h,u=h}}return r}var y=e("./distance"),b=e("./poi"),_=e("graphing/graphmode"),x=e("./implicit-plotter").sampleImplicit,w=e("./curve-accumulator"),S=e("math/domaintypes"),k=function(e,t,n){if(isFinite(n.jumpTolerance)&&!(n.jumpTolerance<=0)){var i=r(e,t,n);i&&(n.accumulator.addPoint(i[0]),n.accumulator.breakSegment(),n.accumulator.addPoint(i[1]))}},E=function(e,t){this.accumulator=new w(t),this.fn=e,this.jumpTolerance=t.ytolerance||t.tolerance,this.stepPerturbation=t.step/10};return{Accumulator:w,sampleParametricNaive:t,sampleXYNaive:n,sampleLinear:i,sampleXY:s,findPiPeriod:a,samplePolar:c,sampleParametricRecursive:u,subsampleParametricRecursive:h,validateViewState:d,computeDomain:p,computeGraphData:f,polygonsFromSegments:v}}),define("graphing/columnmode",{POINTS:"POINTS",LINES:"LINES",POINTS_AND_LINES:"POINTS_AND_LINES"}),define("math/features/graph",["require","underscore","parsenodes","math/plotter","graphing/graphmode","math/comparators","graphing/columnmode","graphing/dragmode"],function(e){function t(e){for(var t=[],n=[],i=e.length,r=0;i>r;r++)t.push(e[r][0]),n.push(e[r][1]);return{defined:{x:t,y:n}}}function n(e){return Array.prototype.concat.apply([],e)}var i=e("underscore"),r=e("parsenodes"),s=e("math/plotter"),a=e("graphing/graphmode"),o=e("math/comparators"),c=e("graphing/columnmode"),l=e("graphing/dragmode"),u=r.List;r.Base.prototype._graph=function(e,n,r,o){var c,l;switch(o.graphMode){case a.XYPOINT_MOVABLE:return c=[n.asArray()],[{segments:[c],graphMode:o.graphMode,color:this.userData.color,style:this.userData.style,poi:t(c)}];case a.XYPOINT:return c=u.wrap(n).args.map(function(e){return e.asArray()}),[{segments:[c],graphMode:o.graphMode,color:this.userData.color,style:this.userData.style,label:this.userData.label,poi:t(c)}];case a.PARAMETRIC:var h=this.userData;return l=u.wrap(n).args.map(function(e){if(0===e.getDependencies().length)return c=[e.asArray()],{segments:[c],graphMode:a.XYPOINT,color:h.color,style:h.style,poi:t(c)};var n=e.getCompiledFunctions()[0].fn;return o.domain=h.domain,s.computeGraphData(r,o,n)});case a.X:case a.Y:case a.IMPLICIT:case a.POLAR:var d,p=n.getCompiledFunctions();try{d=n.getCompiledDerivatives()}catch(f){}l=[];for(var m=0;m<p.length;m++){var g;n.isList?(g=this.getGraphInfo(e,n.args[m]),g.graphMode=o.graphMode):g=o;var v=d?s.computeGraphData(r,g,p[m].fn,d[m].fn):s.computeGraphData(r,g,p[m].fn);v.compiled=p[m],l.push(i.omit(v,"fillSegments")),g.graphMode===a.IMPLICIT&&"="!==g.operator&&l.push({graphMode:a.POLYGONFILL,segments:v.fillSegments,poi:{}})}return l;default:return!1}},r.Base.prototype.graph=function(e,t,n){var i=this.getGraphInfo(e,t);return this._graph(e,t,n,i)},r.BaseComparator.prototype.graph=function(e,t,n){var i=this.getGraphInfo(e,t),c=i.graphMode;if(c===a.IMPLICIT)return this._graph(e,t,n,i);if(c===a.NONE)return!1;if(!t instanceof r.SolvedEquation)return!1;var l,u=this.getOperator(),h=t.getCompiledFunctions();try{l=t.getCompiledDerivatives()}catch(d){}var p,f,m=[],g=[-1,0,0,1],v=h.length;for(f=0;v>f;f++){var y=this.getGraphInfo(e,t._expression.args[f]);y.graphMode=c,p=l?s.computeGraphData(n,y,h[f].fn,l[f].fn):s.computeGraphData(n,y,h[f].fn),p.compiled=h[f],p.operator=o.get(o.table[u].inclusive,g[f%4]),m.push(p)}for(f=0;v>f;f+=4){var b=s.polygonsFromSegments(m[f+1].segments,m[f+2].segments,c);m.push({graphMode:a.POLYGONFILL,segments:b,poi:{}})}return m},r.DoubleInequality.prototype.graph=function(e,t,n){var i=this.getGraphInfo(e,t);if(i.graphMode===a.NONE)return!1;var r=[],c=o.get(o.table[this._operators[0]].inclusive,0),l=o.get(o.table[this._operators[1]].inclusive,0),h=this.userData,d=this;return u.eachArgs(t._expressions,function(t){var o,u;t[0].userData=t[1].userData=h,o=d._graph(e,t[0],n,i)[0],o.operator=c,r.push(o),u=d._graph(e,t[1],n,i)[0],u.operator=l,r.push(u);var p=s.polygonsFromSegments(o.segments,u.segments,o.graphMode);r.push({graphMode:a.POLYGONFILL,segments:p,poi:{}})}),r},r.Regression.prototype.graph=function(e,t,n){var i=this.getGraphInfo(e,t);return this._graph(e,t.model,n,i)},r.Table.prototype.isValueDraggable=function(e,t,n){if(!e.columns[t].isIndependent)return!1;var i=this.columns[t],r=i.values,s=r&&r[n];return s&&isFinite(s.constantValue)&&0===s._dependencies.length?!0:!1},r.Table.prototype.graph=function(e,i,r){var s=[];if(i.columns[0].isError)return s;for(var o=i.columns[0],u=o.values,h=1;h<this.columns.length;h++){var d=i.columns[h];if(!d.isError){var p=this.columns[h].header.userData;if(!p.hidden){for(var f=p.columnMode,m=p.dragMode,g=m===l.X||m===l.XY,v=m===l.Y||m===l.XY,y=f===c.POINTS||f===c.POINTS_AND_LINES,b=f===c.LINES||f===c.POINTS_AND_LINES,_=d.isDiscrete(o),x=b&&_,w=b&&!_,S=[],k=[],E=[],T=[],C=[],M=[],P=0;P<u.length;P++){var A=u[P],I=d.values[P];if(A&&I&&isFinite(A.constantValue)&&isFinite(I.constantValue)){if(y){var q=g&&this.isValueDraggable(i,0,P),D=v&&this.isValueDraggable(i,h,P);q||D?(E.push([A.constantValue,I.constantValue]),T.push({index:P,dragX:q,dragY:D})):k.push([A.constantValue,I.constantValue])}x&&M.push([A.constantValue,I.constantValue])}else x&&(M.length>1&&C.push(M),M=[])}if(E.length&&S.push({graphMode:a.XYPOINT_MOVABLE,segments:[E],color:p.color,tableId:p.tableId,poi:t(E),movablePointInfo:T}),k.length&&S.push({segments:[k],graphMode:a.XYPOINT,poi:t(k),color:p.color,style:p.style}),(C.length||M.length)&&(C.push(M),S.push({segments:C.map(n),graphMode:a.PARAMETRIC,poi:[],color:p.color,style:p.style})),w){var L=this.columns[h].header.graph(e,i.columns[h].header,r);L.length&&Array.prototype.push.apply(S,L)}S.length&&(s[p.id]=S)}}}return s}}),define("math/features/elementAt",["require","parsenodes"],function(e){var t=e("parsenodes");t.List.prototype.elementAt=function(e){return e=Math.floor(e),e>=0&&e<this.args.length?this.args[e]:t.Constant(NaN)},t.OrderedPair.prototype.elementAt=function(e){switch(e){case 0:return this.args[0];case 1:return this.args[1];default:return t.Constant(NaN)}}}),define("math/features/printLatex",["require","parsenodes","graphing/label"],function(e){function t(e){switch(e){case">":return"\\gt";case"<":return"\\lt";case">=":return"\\ge";case"<=":return"\\le";case"=":return"="}}function n(e){return e.printLatex()}function i(e){return e.isConstant&&e.constantValue===!0}function r(e){return e.isConstant&&e.isNaN()}var s=e("parsenodes"),a=e("graphing/label");s.Identifier.prototype.printLatex=s.FreeVariable.prototype.printLatex=function(){return a.identifierToLatex(this._symbol)},s.Constant.prototype.printLatex=function(){return a.numberToLatex(this.constantValue)},s.Negative.prototype.printLatex=function(){return"-\\left("+this.args[0].printLatex()+"\\right)"},s.Add.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)+\\left("+this.args[1].printLatex()+"\\right)"},s.Subtract.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)-\\left("+this.args[1].printLatex()+"\\right)"},s.Multiply.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)*\\left("+this.args[1].printLatex()+"\\right)"},s.Divide.prototype.printLatex=function(){return"\\frac{"+this.args[0].printLatex()+"}{"+this.args[1].printLatex()+"}"},s.Exponent.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)^{"+this.args[1].printLatex()+"}"},s.Assignment.prototype.printLatex=function(){return a.identifierToLatex(this._symbol)+"="+this._expression.printLatex()},s.Equation.prototype.printLatex=function(){return this._lhs.printLatex()+"="+this._rhs.printLatex()},s.BaseComparator.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)"+t(this.operator)+"\\left("+this.args[1].printLatex()+"\\right)"},s.DoubleInequality.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)"+t(this.args[1])+this.args[2].printLatex()+t(this.args[3])+"\\left("+this.args[4].printLatex()+"\\right)"},s.And.prototype.printLatex=function(){if(!(this.args[0]instanceof s.BaseComparator&&this.args[1]instanceof s.BaseComparator))throw new Error("Not implemented");if(this.args[0].args[1].printLatex()!==this.args[1].args[0].printLatex())throw new Error("Not implemented");return"\\left("+this.args[0].args[0].printLatex()+"\\right)"+t(this.args[0].operator)+"\\left("+this.args[0].args[1].printLatex()+"\\right)"+t(this.args[1].operator)+"\\left("+this.args[1].args[1].printLatex()+"\\right)"},s.NativeFunction.prototype.printLatex=s.TypedFunction.prototype.printLatex=s.ReducerFunction.prototype.printLatex=s.ParametrizedReducerFunction.prototype.printLatex=s.DoubleReducerFunction.prototype.printLatex=s.FunctionCall.prototype.printLatex=function(){switch(this._symbol){case"sqrt":return"\\sqrt{"+this.args[0].printLatex()+"}";case"nthroot":return"\\sqrt["+this.args[1].printLatex()+"]{"+this.args[0].printLatex()+"}";case"logbase":return"\\log_{"+this.args[1].printLatex()+"}\\left("+this.args[0].printLatex()+"\\right)";default:return a.identifierToLatex(this._symbol)+"\\left("+this.args.map(n).join(", ")+"\\right)"}},s.Prime.prototype.printLatex=function(){switch(this.args[0]._symbol){case"logbase":return"\\log_{"+this.args[0].args[1].printLatex()+"}"+Array(this.order+1).join("'")+"\\left("+this.args[0].args[0].printLatex()+"\\right)";default:return a.identifierToLatex(this.args[0]._symbol)+Array(this.order+1).join("'")+"\\left("+this.args[0].args.map(n).join(", ")+"\\right)"}},s.List.prototype.printLatex=function(){return"\\left["+this.args.map(n).join(", ")+"\\right]"},s.Range.prototype.printLatex=function(){return"\\left["+this.args[0].args.map(n).join(", ")+" ... "+this.args[1].args.map(n).join(", ")+"\\right]"},s.ListAccess.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)\\left["+this.args[1].printLatex()+"\\right]"},s.OrderedPair.prototype.printLatex=function(){return"\\left("+this.args.map(n).join(", ")+"\\right)"},s.Sum.prototype.printLatex=function(){return"\\sum_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\left("+this.args[3].printLatex()+"\\right)"},s.Product.prototype.printLatex=function(){return"\\prod_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\left("+this.args[3].printLatex()+"\\right)"},s.Integral.prototype.printLatex=function(){return"\\int_{"+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\left("+this.args[3].printLatex()+"\\right)d"+this.args[0].printLatex()},s.FunctionExponent.prototype.printLatex=function(){return this.args[0].printLatex()+"\\left("+this.args[1].printLatex()+"\\right)^{"+this.args[2].printLatex()+"}"},s.Piecewise.prototype.printLatex=function(){var e=this;if(i(e.args[0]))return e.args[1].printLatex();for(var t=["\\left\\{"];;){if(i(e.args[0])){t.push(e.args[1].printLatex());break}if(t.push(e.args[0].printLatex(),": "),r(e.args[2])){t.push(e.args[1].printLatex());break}if(t.push(e.args[1].printLatex(),", "),!(e.args[2]instanceof s.Piecewise)){t.push(e.args[2].printLatex());break}e=e.args[2]}return t.push("\\right\\}"),t.join("")},s.FunctionDefinition.prototype.printLatex=function(){return a.identifierToLatex(this._symbol)+"\\left("+this._argSymbols.map(a.identifierToLatex).join(", ")+"\\right) = "+this._expression.printLatex()},s.Derivative.prototype.printLatex=function(){return"\\frac{d}{d"+a.identifierToLatex(this._symbol)+"}\\left("+this.args[0].printLatex()+"\\right)"},s.Regression.prototype.printLatex=function(){return"\\left("+this._lhs.printLatex()+"\\right)\\sim\\left("+this._rhs.printLatex()+"\\right)"}}),define("parser",["require","math/baseparser","math/features/getValueType","math/features/typeCheck","math/features/repr","math/features/scalarEvalExpression","math/features/okForImplicitFunction","math/features/constantcollapsedcopy","math/features/polynomialorder","math/features/polynomialcoefficients","math/features/extractconditions","math/features/bounddomain","math/features/derivative","math/features/substitute","math/features/solve","math/features/analyze","math/features/analyzeFourFunction","math/features/analyzeScientific","math/features/analyzeNeuteredScientific","math/features/getgraphmode","math/features/getgraphinfo","math/features/getMoveStrategy","math/features/getDefaultDragMode","math/features/tableinfo","math/features/tableerror","math/features/islinear","math/features/graph","math/features/elementAt","math/features/printLatex"],function(e){var t=e("math/baseparser");return e("math/features/getValueType"),e("math/features/typeCheck"),e("math/features/repr"),e("math/features/scalarEvalExpression"),e("math/features/okForImplicitFunction"),e("math/features/constantcollapsedcopy"),e("math/features/polynomialorder"),e("math/features/polynomialcoefficients"),e("math/features/extractconditions"),e("math/features/bounddomain"),e("math/features/derivative"),e("math/features/substitute"),e("math/features/solve"),e("math/features/analyze"),e("math/features/analyzeFourFunction"),e("math/features/analyzeScientific"),e("math/features/analyzeNeuteredScientific"),e("math/features/getgraphmode"),e("math/features/getgraphinfo"),e("math/features/getMoveStrategy"),e("math/features/getDefaultDragMode"),e("math/features/tableinfo"),e("math/features/tableerror"),e("math/features/islinear"),e("math/features/graph"),e("math/features/elementAt"),e("math/features/printLatex"),t}),define("predicates/common",["require","parser","math/distance"],function(e){var t=e("parser"),n=e("math/distance");return{FOCUSED_EXP:function(e,t){return e.selected&&e.isExpression},FOCUSED_OR_EMPTY_EXP:function(e,t){return e.selected&&e.isExpression?!0:e.isExpression&&e.isEmpty()},COMPLEX_EXP:function(e,t){return e.isGraphable&&e.isExpression&&t&&t.branches[0]&&"line"!==n.classifyBranchConic(t.branches[0].segments)},TABLEABLE_EXP:function(e,t){return e.isGraphable&&e.isTableable},EXP:function(e,t){return e.isExpression},GRAPHABLE_EXP:function(e,t){return e.isGraphable},HAS_ERROR:function(e,t){return e.error&&!e.isEmpty()},DEPENDS_ON:function(e){return function(n,i){if(!n.latex)return!1;var r=t.parse(n.latex);return r.getDependencies().indexOf(e)>=0}},DEFINES:function(e){return function(n,i){if(!n.latex)return!1;var r=t.parse(n.latex);return r.getExports().indexOf(e)>=0}},HAS_N_DEPENDENCIES:function(e){return function(t,n){return t.isExpression&&t.formula&&t.formula.variables&&t.formula.variables.length>=e}},NONCONSTANT_LINE:function(e,t){return t&&"line"===n.classifyBranchConic(t.branches[0].segments)&&!isFinite(e.formula.constant_value)},RESTRICTED_LINE:function(e,t){return this.NONCONSTANT_LINE(e,t)&&this.RESTRICTED(e,t)},EXP_NOT_RESTRICTED_LINE:function(e,t){return this.EXP(e,t)&&!this.RESTRICTED_LINE(e,t)},PARABOLA:function(e,t){return t&&t.branches&&t.branches.some(function(e){return"parabola"===n.classifyBranchConic(e.segments)})},RESTRICTED:function(e,t){return e&&e.latex?!!e.latex.match(/\\left\\{(.+)\\right\\}/):!1},SHIFTED_PARABOLA:function(e,t){if(!this.PARABOLA(e,t))return!1;var n=t.branches[0].compiled.fn;return 0!==n(0)||1!==n(1)},EVALUATION:function(e,t){return e.formula&&e.formula.is_evaluable&&isFinite(e.formula.constant_value)},HAS_DEPENDENT_Y:function(e,t){return"y"===e.formula.assignment},SLIDER:function(e,t){return!!e.slider&&!e.isGraphable},ANIMATING_SLIDER:function(e,t){return e.slider&&e.slider.isPlaying},SLID_SLIDER:function(e,t){return e.slider&&!e.isGraphable&&1!==e.slider.value},TABLE:function(e,t){return e.isTable},REGRESSION:function(e,t){return e.formula&&e.formula.regression},HAS_DATA_COLUMN:function(e,t){if(!this.TABLE(e,t))return!1;for(var n=1;n<e.columns.length;n++)if(e.columns[n].discrete)return!0;return!1},HAS_FUNCTION_COLUMN:function(e,t){if(!this.TABLE(e,t))return!1;for(var n=1;n<e.columns.length;n++)if(e.columns[n].discrete===!1)return!0;return!1}}}),define("tours/base_tour",["require","pjs","jquery","underscore","i18n","../predicates/common"],function(e){var t=e("pjs"),n=e("jquery"),i=e("underscore"),r=e("i18n"),s=e("../predicates/common");return t(function(e){e.init=function(e){this.Calc=e,this.expressionsView=this.Calc.expressions},e.expressionsVisible=function(){return this.expressionsView.getProperty("expressionsVisible")},e.requireExpressionsVisible=function(){return{position:"e",content:r.t("Click to show the list of expressions."),sel:n(".dcg-action-showexpressions"),delayBeforeEnter:400,delayBeforeExit:400}},e.resourcesOpen=function(){return n("body").hasClass("resources-open")},e.requireResourcesNotOpen=function(){return{position:"e",content:r.t("Click to return to this graph."),sel:n(".dcg-action-opendrawer"),delayBeforeEnter:400,delayBeforeExit:400}},e.editListMode=function(){return this.expressionsView.getProperty("editListMode")},e.requireNotEditListMode=function(){return{position:"s",content:r.t("Click to return to your expressions."),sel:n(".dcg-action-toggle-edit")}},e.expressionCount=function(){return this.expressionsView.model.getItemsByIndexRange(0,1/0).length},e.getExpSketch=function(e){var t=this.Calc.grapher.graphSketches[e.id];if(!t||t.visible)return t},e.getAvailableExp=function(e){var t=this.getMatchingExp(s.FOCUSED_OR_EMPTY_EXP,e);
return t?t.$():".dcg-new-math-div"},e.expList=function(){return this.Calc.expressionsView.$exppanel},e.expMatches=function(e,t){if(!e)return!1;if("function"==typeof t)return t.call(s,e,this.getExpSketch(e));for(var n=0;n<t.length;n++)if(!t[n].call(s,e,this.getExpSketch(e)))return!1;return!0},e.getMatchingExp=function(e,t){var n=this.expressionsView.model.getSelected(),r=i.map(i.filter(t,function(e){return!!e}),function(e){return e.model.id});if(this.expMatches(n,e)&&-1===r.indexOf(n.id))return this.expressionsView.getItemView(n.id);var s=this.expressionsView.model.getItemsByIndexRange(0,1/0);s=i.filter(s,function(e){return!(e.folder&&e.folder.collapsed||-1!==r.indexOf(e.id))});for(var a=0;a<s.length;a++)if(n=s[a],this.expMatches(n,e))return this.expressionsView.getItemView(n.id);return null},e.filterSelectedExp=function(e){var t=this.expressionsView.model.getSelected();return this.expMatches(t,e)?this.expressionsView.getItemView(t.id):null}})}),define("tours/sliders",["require","pjs","./base_tour","i18n","predicates/common"],function(e){var t=e("pjs"),n=e("./base_tour"),i=e("i18n"),r=e("predicates/common");return t(n,function(e,t){e.sliderHasSlid=!1,e.shouldPopup=function(){return!!this.getMatchingExp(r.SLIDER)},e.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var e=this.getMatchingExp(r.GRAPHABLE_EXP),t=this.getMatchingExp(r.SLIDER),n=this.getMatchingExp(r.ANIMATING_SLIDER),s=this.getMatchingExp(r.SLID_SLIDER);if(e&&n)return{"final":!0,position:"s",endingMsg:i.t("You're a slider pro!"),sel:n.$(".dcg-animate-pause")};if(e&&s)return s.$(".dcg-depressed").length?{doNotUpdate:!0}:{position:"s",content:"<b>"+i.t('Go "Hands-free"')+"</b><br>"+i.t("Press play to animate the slider."),sel:s.$(".dcg-animate-play")};if(e&&t)return{position:"s",content:i.t("Drag the handle to change the value."),sel:t.$(".dcg-thumb")};var a;return(a=this.expressionCount()>1?this.getMatchingExp(r.HAS_N_DEPENDENCIES(1)):this.getMatchingExp(r.HAS_N_DEPENDENCIES(2)))?{position:"s",content:"<b>"+i.t("Awesome!")+"</b> "+i.t("Now click here to add the sliders."),sel:a.$(".dcg-slider-btn-container:last .dcg-btn-blue")}:(a=this.getMatchingExp(r.FOCUSED_OR_EMPTY_EXP),a?{position:"e",content:"<b>"+i.t("Let's make some sliders!")+"</b><br>"+i.t("Try typing __sample_expression__",{sample_expression:'<span class="trip-math">y=mx+b</span>'}),sel:a.$(),delayBeforeExit:600}:{position:"e",content:i.t("Click here to create a new blank expression."),sel:".dcg-action-newmath"})}})}),define("tours/scatter_plot",["require","pjs","jquery","./base_tour","i18n","predicates/common"],function(e){var t=e("pjs"),n=e("jquery"),i=e("./base_tour"),r=e("i18n"),s=e("predicates/common");return t(i,function(e,t){e.shouldPopup=function(){return this.getMatchingExp(s.TABLE)?!0:!1},e.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var e=this.getMatchingExp(s.HAS_DATA_COLUMN);if(!e){var t=n(".dcg-action-newtable:visible");return 0===t.length?{position:"e",content:"<b>"+r.t("Let's make a table!")+"</b><br>"+r.t("Click here to add a new item."),sel:n(".dcg-add-expression-btn")}:{position:"e",content:r.t('... and select the "table" option.'),sel:t,delayBeforeExit:300}}for(var i=e.model,a=i.selectedCell,o=i.columns[0].cells.length,c=0,l=0;o>l&&3>l;l++)i.columns[0].cells[l].value&&!i.columns[0].cells[l].error&&i.columns[1].cells[l].value&&!i.columns[1].cells[l].error&&c++;if(3===c){var u="POINTS_AND_LINES"===i.columns[1].columnMode,h=n(".dcg-table-column-menu").length>0;return u&&!h?{"final":!0,position:"e",endingMsg:r.t("You're a tables whiz!"),sel:e.$()}:u?{position:"e",content:r.t("Click anywhere to close the drawing options."),sel:e.$()}:h?{content:r.t("Click here to connect the dots."),position:"e",sel:".dcg-table-points-and-lines"}:{content:["<b>"+r.t("Last trick!")+"</b><br>",r.t("Click and hold on this icon until the options menu opens up.")].join(""),position:"e",sel:e.rowViews[0][1].$(".dcg-graph-icon")}}var d,p;for(d=0;o>d;d++)for(p=0;2>p;p++)if(i.columns[p].cells[d].error)return{position:"e",content:r.t("Uh-oh! Type a valid number here."),sel:e.rowViews[d+1][p].$()};if(!a)return{position:"e",content:r.t("Click back to continue editing."),sel:e.rowViews[o-1][1].$()};if(2===o&&1===c&&a&&1===a.row)return{position:"e",content:r.t("Go down to the next row to add more data."),sel:e.rowViews[a.row][1].$()};if(3===o&&2===c&&a&&3!==a.row)return{position:"e",content:"<b>"+r.t("Awesome!")+"</b><br>"+r.t("Now try pressing Enter."),sel:e.rowViews[a.row][1].$()};for(d=0;o>d;d++)for(p=0;2>p;p++)if(!i.columns[p].cells[d].value){var f=r.t("Fill in this whole row.");return 2===d&&1===p&&(f=r.t("Just fill in one more...")),0===d&&1===p&&(f="<b>"+r.t("Fill it in.")+"</b><br>"+r.t("Type any number here.")),{position:"e",content:f,sel:e.rowViews[d+1][1].$()}}}})}),define("tours/function_table",["require","pjs","./base_tour","i18n","jquery","predicates/common"],function(e){var t=e("pjs"),n=e("./base_tour"),i=e("i18n"),r=e("jquery"),s=e("predicates/common");return t(n,function(e,t){e.shouldPopup=function(){return this.getMatchingExp(s.TABLE)?!0:!1},e.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();var e=this.getMatchingExp(s.HAS_FUNCTION_COLUMN),t=this.getMatchingExp(s.FOCUSED_OR_EMPTY_EXP),n=this.getMatchingExp([s.COMPLEX_EXP,s.TABLEABLE_EXP]);if(e){var a=e.model,o="POINTS"===a.columns[1].columnMode,c=r(".dcg-table-column-menu").length>0,l=a.columns.length>3&&a.columns[2].discrete===!1,u=a.selectedCell;return l?{"final":!0,position:"e",endingMsg:i.t("You're a table wizard!"),sel:e.$()}:u&&0===u.row&&2===u.column?{position:"e",content:i.t("Try typing __sample_expression__",{sample_expression:'<span class="trip-math">cos\\left(x\\right)</span>'}),sel:e.rowViews[0][2].$()}:!u||0===u.row&&2===u.column?o&&!u?{position:"e",content:i.t("Click here to continue editing this table."),sel:e.rowViews[0][1].$()}:c?{content:i.t("Click here to only show the dots."),position:"e",sel:".dcg-table-points"}:{content:i.t("Click and hold on this icon until the options menu opens up."),position:"e",sel:e.rowViews[0][1].$(".dcg-graph-icon")}:{position:"e",content:i.t("Move right to add a new column."),sel:e.rowViews[0][2].$()}}return n?this.editListMode()?{position:"e",content:i.t("Click here to generate a table."),sel:".dcg-action-createtable",delayBeforeExit:400}:{position:"s",content:"<b>"+i.t("Convert this to a table.")+"</b><br>"+i.t('Click the "Edit List" button.'),sel:".dcg-action-toggle-edit"}:t?{position:"e",content:["<b>"+i.t("Start by graphing a function.")+"</b><br>",i.t("Try typing __sample_expression__",{sample_expression:'<span class="trip-math">y=sin\\left(x\\right)</span>'})].join(""),sel:t.$()}:{position:"e",content:i.t("Let's make a function. First: click here to create a new blank expression."),sel:".dcg-new-math-div"}}})}),define("tours/restrictions",["require","pjs","./base_tour","i18n","predicates/common"],function(e){var t=e("pjs"),n=e("./base_tour"),i=e("i18n"),r=e("predicates/common");return t(n,function(e){e.shouldPopup=function(){return this.getMatchingExp(r.RESTRICTED)?!0:!1},e.restrictedLineTour=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();var e=this.getMatchingExp(r.RESTRICTED_LINE),t=this.getMatchingExp(r.EXP_NOT_RESTRICTED_LINE);if(e)return t?(this.phaseOn++,this.update()):{position:"e",content:"<b>"+i.t("Brilliant!")+"</b><br>"+i.t("Click here to create a new expression."),sel:".dcg-new-math-div"};var n=this.getMatchingExp(r.FOCUSED_OR_EMPTY_EXP);if(n){var s=this.expMatches(n.model,r.NONCONSTANT_LINE),a=this.expMatches(n.model,r.HAS_ERROR);return a?{doNotUpdate:!0}:s?{position:"e",content:["<b>"+i.t("Awesome!")+"</b><br>",i.t("Restrict the domain of this line by adding __sample_expression__ to the end.",{sample_expression:'<span class="trip-math">\\left\\{x<0\\right\\}</span>'}),"<br><i>"+i.t("Hint: press the 'A B C' button on the keypad to find the { } buttons")+"</i>"].join(""),sel:n.$()}:{position:"e",content:["<b>"+i.t("Let's get started!")+"</b><br>",i.t("Try graphing a straight line, like __sample_expression__",{sample_expression:'<span class="trip-math">y=2x</span>'})].join(""),sel:n.$()}}return{position:"e",content:i.t("Click here to make a new blank expression."),sel:".dcg-new-math-div"}},e.restrictedParabolaTour=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();var e=this.getMatchingExp([r.RESTRICTED,r.PARABOLA]);if(e)return{"final":!0,position:"e",endingMsg:i.t("You're a restrictions star!"),sel:".dcg-exppanel-container"};var t=this.getMatchingExp([r.EXP_NOT_RESTRICTED_LINE,r.FOCUSED_EXP]);if(t){var n=this.expMatches(t.model,[r.PARABOLA,r.HAS_DEPENDENT_Y]),s=this.expMatches(t.model,r.SHIFTED_PARABOLA),a=this.expMatches(t.model,r.PARABOLA),o=this.expMatches(t.model,r.HAS_ERROR);return o?{doNotUpdate:!0}:a?n?s?{position:"e",content:["<b>"+i.t("Nice!")+"</b><br>"+i.t("Now let's restrict the range. Add __sample_expression__ to the end.",{sample_expression:'<span class="trip-math">\\left\\{y<4\\right\\}</span>'})].join(""),sel:t.$()}:{position:"e",content:["<b>"+i.t("Move the parabola.")+"</b><br>",i.t("Change this equation to __sample_expression__",{sample_expression:'<span class="trip-math">y=x^2-2</span>'})].join(""),sel:t.$()}:{position:"e",content:["<b>"+i.t('Don\'t forget the "y="!')+"</b><br>",i.t("Try typing all of __sample_expression__",{sample_expression:'<span class="trip-math">y=x^2</span>'})].join(""),sel:t.$()}:{position:"e",content:[i.t("Now graph: __sample_expression__",{sample_expression:'<span class="trip-math">y=x^2</span>'})+"<br><i>"+i.t('Hint: you can type y=x^2, or use the <span class="trip-math">a^2</span> button on the keypad below.')+"</i>"].join(""),sel:t.$()}}return{position:"e",content:i.t("Click here to make a new blank expression."),sel:".dcg-new-math-div"}},e.phaseOn=0,e.phases=[e.restrictedLineTour,e.restrictedParabolaTour],e.update=function(){return this.phases[this.phaseOn].call(this)}})}),define("loadcss!css/regression-tour",function(){}),define("tours/regressions",["require","pjs","jquery","./base_tour","i18n","underscore","loadcss!css/regression-tour","browser","predicates/common"],function(e){var t=e("pjs"),n=e("jquery"),i=e("./base_tour"),r=e("i18n"),s=e("underscore");e("loadcss!css/regression-tour");var a=e("browser"),o=e("predicates/common");return t(i,function(e,t){e.shouldPopup=function(){return this.getMatchingExp(o.TABLE)?!0:!1},e.hasCreatedLinearRegression=!1,e.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var e=this.getMatchingExp(o.REGRESSION)||this.getMatchingExp(o.EXP),t=this.getMatchingExp(o.HAS_DATA_COLUMN);if(!t||!t.model.columns[1]){var i=n(".dcg-action-newtable:visible"),c=!a.IS_IPAD&&!a.IS_MOBILE;return 0===i.length&&c?{position:"e",content:'<div class="trip-title">'+r.t("First, let's get some data.")+"</div>"+r.t("Head over to Google Docs and copy and paste this __sample_data_link__.",{sample_data_link:'<a class="trip-link" target="_blank" href="https://docs.google.com/spreadsheets/u/1/d/1h4kYwWka_1PvI5G-hPYz_QBe1FrYLo9Gb1XvxJz-QYE/pubhtml?gid=728738737&single=true">'+r.t("sample data")+"</a>"})+' <div class="trip-hint"><br>'+r.t("Note: you can add your own data instead by clicking the __plus_icon__ button.",{plus_icon:'<i class="dcg-icon-plus"></i>'})+"</div>",sel:e?e.$():n(".dcg-exppanel")}:0===i.length?{position:"e",content:'<div class="trip-title">'+r.t("Let's start with some data!")+"</div>"+r.t("Click here to add a new item."),sel:n(".dcg-add-expression-btn"),delayBeforeExit:150}:{position:"e",content:r.t("Click here to add a new table."),sel:i,delayBeforeExit:250}}var l=s.filter(t.model.columns[1].cells,function(e){return e.value});if(l.length<5)return{position:"e",content:'<div class="trip-title">'+r.t("Fill in the sample data:")+"</div><table class='dcg-regression-tour-table'><tr><td><span class='trip-math'>x_1</span></td><td><span class='trip-math'>y_1</span></td></tr><tr><td>1</td><td>0.8</td></tr><tr><td>2</td><td>2.7</td></tr><tr><td>3</td><td>3.9</td></tr><tr><td>4</td><td>4.6</td></tr><tr><td>5</td><td>5</td></tr></table>",sel:t.$(".dcg-row:nth-of-type(2) .dcg-cell:nth-of-type(2)")};var u=this.getMatchingExp(o.REGRESSION)||this.getMatchingExp(o.FOCUSED_EXP);if(u=u?u.model:this.expressionsView.model.getItemByIndex(0),!u.isExpression){var h=n(".dcg-action-newexpression:visible");return 0===h.length?{position:"e",content:'<div class="trip-title">'+r.t("Awesome!")+"</div>"+r.t("Click here to add a new item."),sel:n(".dcg-add-expression-btn"),delayBeforeExit:150}:{position:"e",content:r.t('... and select the "expression" option.'),sel:h,delayBeforeExit:150}}var d=e.model.formula,p=d?d.regression:void 0,f=p?p.statistics:void 0,m=p?p.parameters:void 0;if(f&&f.r&&(this.hasCreatedLinearRegression=!0),!this.hasCreatedLinearRegression)return{position:"e",content:r.t("Now type: __equation__",{equation:"<span class='trip-math'>y_1\\sim mx_1+b</span>"})+"<div class='trip-hint'>"+r.t("Hint #1: to get __y_1__ type __y1__.",{y_1:"<span class='trip-math'>y_1</span>",y1:"<span class='trip-math'>y1</span>"})+"</div><div class='trip-hint'>"+r.t("Hint #2: __twiddle__ is in our onscreen keypad in the 'A B C' section.",{twiddle:"<span class='trip-math'>~</span>"})+"</div>",sel:e.$(),delayBeforeExit:150};var g=n(".dcg-residual-suggestion.dcg-visible");return g.length?{position:"e",content:"<div class='trip-title'>"+r.t("Nice. Let's check the model.")+"</div>"+r.t("Residuals are the difference between your data and your model. Click here to add them to your table and plot them on the graph."),sel:g,delayBeforeExit:250}:f&&(f.Rsquared>=.99||f.r>=.99||m&&m.a&&m.k&&m.h)?{"final":!0,position:"e",endingMsg:"<div class='trip-title'>"+r.t("Nice work &ndash; Keep exploring!")+"</div>",sel:n(".dcg-exppanel")}:{position:"e",content:"<div class='trip-title'>"+r.t("Now, let's try a new model.")+"</div>"+r.t("Edit this equation to find a better fit. Try, for example:<br>__equation__",{equation:"<span class='trip-math'>y_1~a(x_1-h)^2+b</span>"}),sel:e.$(),delayBeforeExit:300}}})}),define("tours/list_predicates",["require","predicates/common","parser"],function(e){var t=e("predicates/common"),n=e("parser"),i=function(e){return function(t,i){if(!t.latex)return!1;var r=n.parse(t.latex);if(!r._expression)return!1;if("List"!==r._expression.type&&"Range"!==r._expression.type)return!1;if(e.dependent&&e.dependent!==t.dependent)return!1;var s=r.getConcreteTree();return e.minLength&&s.args.length<e.minLength?!1:!0}};return{ANY_LIST:i({}),A_LIST:i({dependent:"a",minLength:3}),B_LIST:i({dependent:"b",minLength:5}),C_LIST:i({dependent:"c",minLength:10}),A_DEP:function(e,n){return t.GRAPHABLE_EXP(e,n)&&t.DEPENDS_ON("a")(e,n)},B_DEP:function(e,n){return t.GRAPHABLE_EXP(e,n)&&t.DEPENDS_ON("b")(e,n)},C_DEP:function(e,n){return t.DEPENDS_ON("c")(e,n)&&t.EVALUATION(e,n)}}}),define("tours/lists",["require","pjs","./base_tour","./list_predicates","i18n"],function(e){var t=e("pjs"),n=e("./base_tour"),i=e("./list_predicates"),r=e("i18n"),s=r.t("<b>Lists are powerful. Let's see.</b><br>Begin by typing __equation__",{equation:"<span class='trip-math'>a=\\left[1,2,3\\right]</span>"})+"<div class='trip-hint'>"+r.t("Hint: press the 'A B C' button on the keypad to find the [ ] buttons"),a="<b>"+r.t("Nice. Let's put that list to work.")+"</b> "+r.t("Graph: __equation__",{equation:"<span class='trip-math'>y=x^2+a</span>"})+"<div class='trip-hint'>"+r.t("Hint: you can type y=x^2+a or use the a<sup>2</sup> button on the keypad below.")+"</div>",o="<b>"+r.t("Awesome!")+"</b> "+r.t("You can create lists of integers even more easily. Try this: __equation__",{equation:"<span class='trip-math'>b=\\left[0...8\\right]</span>"}),c=r.t("If you want to count by 5 instead, just write something like this: __equation__",{equation:"<span class='trip-math'>c=\\left[10, 15, ..., 95\\right]</span>"}),l="<b>"+r.t("Let's graph a few points.")+"</b> "+r.t("Try this: __equation__",{equation:"<span class='trip-math'>\\left(b, sin\\left(b\\right)\\right)</span>"})+"<div class='trip-hint'>"+r.t("Hint: this will plot a point for each item of b.")+"</div>",u="<b>"+r.t("Last thing!")+"</b> "+r.t("You can do a computation on a list. For example: __equation__",{equation:"<span class='trip-math'>total\\left(c\\right)</span>"})+"<div class='trip-hint'>";return t(n,function(e,t){e.shouldPopup=function(){return this.getMatchingExp(i.ANY_LIST)?!0:!1},e.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var e=this.getMatchingExp(i.A_LIST),t=this.getMatchingExp(i.B_LIST),n=this.getMatchingExp(i.C_LIST),r=this.getMatchingExp(i.A_DEP),h=this.getMatchingExp(i.B_DEP),d=this.getMatchingExp(i.C_DEP);return e?r?t?n?h?d?{"final":!0,position:"e",endingMsg:"Great job!",sel:d.$(".dcg-evaluation"),scrollContainer:this.expList()}:{position:"e",content:u,sel:this.getAvailableExp([e,t,r,n,h]),scrollContainer:this.expList(),delayBeforeExit:600}:{position:"e",content:l,sel:this.getAvailableExp([e,t,r,n]),scrollContainer:this.expList()}:{position:"e",content:c,sel:this.getAvailableExp([e,t,r]),scrollContainer:this.expList(),delayBeforeExit:600}:{position:"e",content:o,sel:this.getAvailableExp([e,r]),scrollContainer:this.expList(),delayBeforeExit:600}:{position:"e",content:a,sel:this.getAvailableExp([e]),scrollContainer:this.expList()}:{position:"e",content:s,sel:this.getAvailableExp(),scrollContainer:this.expList(),delayBeforeExit:600}}})}),define("tours/folders",["require","pjs","./base_tour","i18n","jquery","underscore"],function(e){var t=e("pjs"),n=e("./base_tour"),i=e("i18n"),r=e("jquery"),s=e("underscore"),a=function(e,t){return"folder"==e.type},o=function(e,t){return e.isGraphable&&!e.folder},c="<b>"+i.t("Awesome!")+"</b> "+i.t("Let's make a new equation. For example, type: __equation__",{equation:"<span class='trip-math'>x+y=3</span>"}),l=i.t("Now grab this equation by its left edge and drag it into the folder.")+"<div class='trip-hint'>"+i.t("Hint: The gray line will show you if the expression is in the folder.")+"</div>",u="<b>"+i.t("Thats a great start!")+"</b> "+i.t("Now well explore some folder functionality. Click here to collapse the folder."),h="<b>"+i.t("Did You Know...")+"</b>"+i.t("You can hide everything in the folder with one click. Click here to try.");return t(n,function(e,t){e.shouldPopup=function(){return this.getMatchingExp(a)?!0:!1},e.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var e=this.getMatchingExp(a),t=this.getMatchingExp(o);if(!e){var n=r(".dcg-action-newfolder:visible");return 0===n.length?{position:"e",content:"<b>"+i.t("Let's make a folder!")+"</b><br>"+i.t("Click here to add a new item."),sel:r(".dcg-add-expression-btn")}:{position:"e",content:i.t('... and select the "folder" option.'),sel:n}}return this.cachedTitle!=e.model.title&&(this.cachedTitle=e.model.title,this.lastChange=new Date),!this.cachedTitle||new Date-this.lastChange<1e3?{position:"e",content:i.t("Give your folder a name."),sel:e.$()}:0===s.size(e.model.memberIds)?t?{position:"e",content:l,scrollContainer:this.expList(),sel:t.$()}:{position:"e",content:c,scrollContainer:this.expList(),sel:this.getAvailableExp(),delayBeforeExit:500}:e.model.collapsed?e.model.hidden?{"final":!0,position:"e",endingMsg:"Great job!",sel:".dcg-exppanel-container",scrollContainer:this.expList()}:{position:"s",content:h,scrollContainer:this.expList(),sel:e.$(".dcg-action-toggle-folder-hidden")}:{position:"e",content:u,scrollContainer:this.expList(),sel:e.$(".dcg-caret-container")}}})}),define("tours/mathart",["require","underscore","jquery","pjs","./base_tour","predicates/common"],function(e){var t=e("underscore"),n=e("jquery"),i=e("pjs"),r=e("./base_tour"),s=e("predicates/common");return{mathart_intro:i(r,function(e){e.restrictedLineTour=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();var e=this.getMatchingExp(s.RESTRICTED_LINE),t=this.getMatchingExp(s.EXP_NOT_RESTRICTED_LINE);if(e)return t?(this.phaseOn++,this.update()):{position:"e",content:"<b>Brilliant!</b><br>Click here to create a new expression",sel:".dcg-new-math-div"};var n=this.getMatchingExp(s.EXP);if(n){var i=this.expMatches(n.model,s.NONCONSTANT_LINE),r=this.expMatches(n.model,s.HAS_ERROR);return r?{doNotUpdate:!0}:i?{position:"e",content:["<b>Awesome!</b><br>","Restrict the domain of this line by making it!<br>",'<span class="trip-math">y=2x\\left\\{1 < x < 2\\right\\}</span><br>',"<i>Hint: press the 'A B C' button on the keypad to find the { } buttons</i>"].join(""),sel:n.$()}:{position:"e",content:["<b>Let's get started!</b><br>",'Try graphing a straight line, like <span class="trip-math">y=2x</span>'].join(""),sel:n.$()}}return{position:"e",content:"Click here to make a new blank expression",sel:".dcg-new-math-div"}},e.restrictedParabolaTour=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();var e=this.getMatchingExp([s.RESTRICTED,s.PARABOLA]);if(e)return this.phaseOn++,this.update();var t=this.getMatchingExp(s.EXP_NOT_RESTRICTED_LINE);if(t){var n=this.expMatches(t.model,[s.PARABOLA,s.HAS_DEPENDENT_Y]),i=this.expMatches(t.model,s.SHIFTED_PARABOLA),r=this.expMatches(t.model,s.PARABOLA),a=this.expMatches(t.model,s.HAS_ERROR);return a?{doNotUpdate:!0}:r?n?i?{position:"e",content:["<b>Nice!</b><br>Now let's restrict the range. Change this to:<br>",'<span class="trip-math">y=x^2-2\\left\\{y<4\\right\\}</span>'].join(""),sel:t.$()}:{position:"e",content:["<b>Move the parabola.</b><br>",'Change this equation to <span class="trip-math">y=x^2-2</span>'].join(""),sel:t.$()}:{position:"e",content:['<b>Don\'t forget the "y="!</b><br>','Try typing all of <span class="trip-math">y=x^2</span>'].join(""),sel:t.$()}:{position:"e",content:['Now graph: <span class="trip-math">y=x^2</span><br>',"<i>Hint: you can type y=x^2,"," or use the a<sup>2</sup> button on the keypad below</i>"].join(""),sel:t.$()}}return{position:"e",content:"Click here to make a new blank expression",sel:".dcg-new-math-div"}},e.colorWasChanged=!1,e.changeColorTour=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();var e=this;if(t.each(this.expressionsView.model.getItemsByIndexRange(0,1/0),function(t){t.unobserve("color.tour"),t.observe("color.tour",function(){e.colorWasChanged=!0})}),this.colorWasChanged)return n(".dcg-options-menu").length?{position:"e",content:"... and click anywhere to close the color menu.",sel:".dcg-exppanel"}:{"final":!0,position:"e",endingMsg:"Great job! Now to complete your mission: make a face. Good luck!",sel:".dcg-exppanel"};if(n(".dcg-options-menu").length)return{position:"e",content:"<b>Last step...</b><br>Change the color!",sel:".dcg-options-menu"};var i=this.getMatchingExp(s.GRAPHABLE_EXP),r=this.getMatchingExp(s.EXP);return i?{position:"e",content:"<b>Great!</b><br>Click and hold to open the secret drawing menu.",sel:i.iconView.$icon}:{position:"e",content:'<b>Oops...</b><br>Make this graphable by typing <span class="trip-math">y=x</span>',sel:r.$()}},e.phaseOn=0,e.phases=[e.restrictedLineTour,e.restrictedParabolaTour,e.changeColorTour],e.update=function(){return this.phases[this.phaseOn].call(this)}})}}),define("tours/derivatives_predicates",["require","predicates/common"],function(e){var t=e("predicates/common"),n=function(e,t){return e.latex.indexOf("\\frac{d}{dx}")>=0};return{DEFINE_F:function(e,n){return t.DEFINES("f")(e,n)&&t.COMPLEX_EXP(e,n)?!0:!1},DEFINE_G:function(e,i){return t.DEFINES("g")(e,i)&&t.DEPENDS_ON("f")(e,i)&&t.GRAPHABLE_EXP(e,i)?n(e,i):!1},INLINE_DERIVATIVE:function(e,i){return t.COMPLEX_EXP(e,i)?t.DEPENDS_ON("f")(e,i)?!1:n(e,i):!1}}}),define("tours/derivatives",["require","pjs","./base_tour","./derivatives_predicates","i18n"],function(e){var t=e("pjs"),n=e("./base_tour"),i=e("./derivatives_predicates"),r=e("i18n"),s=r.t("<b>Let's graph a derivative!</b><br>Start with a function: __equation__",{equation:"<span class='trip-math'>f\\left(x\\right)=x\\sin \\left(x\\right)</span>"}),a=r.t("To graph its derivative: __equation__",{equation:"<span class='trip-math'>g\\left(x\\right)=\\frac{d}{dx}f\\left(x\\right)</span>"})+"<div class='trip-hint'>"+r.t("Hint: To get the derivative operator, just type d/dx.")+"</div>",o=r.t("Let's try one more: __equation__",{equation:"<span class='trip-math'>\\frac{d}{dx}\\ln \\left(x\\right)</span>"});return t(n,function(e,t){e.shouldPopup=function(){return!1},e.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var e=this.getMatchingExp(i.DEFINE_F),t=this.getMatchingExp(i.DEFINE_G),n=this.getMatchingExp(i.INLINE_DERIVATIVE);return e?t?n?{"final":!0,position:"e",endingMsg:"Great job!",sel:n.$(),scrollContainer:this.expList()}:{position:"e",content:o,sel:this.getAvailableExp([e,t]),scrollContainer:this.expList()}:{position:"e",content:a,sel:this.getAvailableExp([e]),scrollContainer:this.expList()}:{position:"e",content:s,sel:this.getAvailableExp(),scrollContainer:this.expList()}}})}),define("tours/all_tours",["require","tours/sliders","tours/scatter_plot","tours/function_table","tours/restrictions","tours/regressions","tours/lists","tours/folders","tours/mathart","tours/derivatives","i18n","underscore"],function(e){var t=e("tours/sliders"),n=e("tours/scatter_plot"),i=e("tours/function_table"),r=e("tours/restrictions"),s=e("tours/regressions"),a=e("tours/lists"),o=e("tours/folders"),c=e("tours/mathart"),l=e("tours/derivatives"),u=e("i18n"),h=e("underscore");u.t("Sliders"),u.t("Tables"),u.t("Restrictions"),u.t("Advanced Tables"),u.t("Regressions"),u.t("Lists"),u.t("Folders"),u.t("Derivatives");var d={sliders:{tour:t,title:"Sliders"},tables:{tour:n,title:"Tables"},restrictions:{tour:r,title:"Restrictions"},functiontable:{tour:i,title:"Advanced Tables",hideInHelp:!0},regressions:{tour:s,title:"Regressions"},lists:{tour:a,title:"Lists",hideInHelp:!0},mathart:{tour:c.mathart_intro,title:"Math Art Intro",hideInHelp:!0},folders:{tour:o,title:"Folders",hideInHelp:!0},derivatives:{tour:l,title:"Derivatives",hideInHelp:!0}};return h.each(d,function(e,t){e.name=t}),d}),define("main/help_dropdown",["require","loadcss!css/help","loadcss!css/spinner","jquery","underscore","pjs","main/popover_view","main/parse_json_errors","main/calculator_backend","template!help_dropdown","i18n","config","main/tour_link","tours/all_tours","conditional_focus","vendor/jquery.html5-placeholder-shim"],function(e){e("loadcss!css/help"),e("loadcss!css/spinner");var t=e("jquery"),n=e("underscore"),i=e("pjs"),r=e("main/popover_view"),s=e("main/parse_json_errors"),a=e("main/calculator_backend"),o=e("template!help_dropdown"),c=e("i18n"),l=e("config"),u=e("main/tour_link"),h=e("tours/all_tours"),d=e("conditional_focus");e("vendor/jquery.html5-placeholder-shim");var p=i(r,function(e,i){e.template=o,e.pointToSelector=".dcg-action-help i",e.init=function(e,t,n,r,s){i.init.call(this),this.userController=e,this.graphsController=t,this.Calc=n,this.modals=r,this.tourController=s},e.renderIsVisible=function(){i.renderIsVisible.call(this),this.isVisible?t.placeholder&&t.placeholder.shim():this.setErrors([])},e.getTemplateParams=function(){var e=c.enabled_languages[c.detectLanguage()]?c.enabled_languages[c.detectLanguage()].userGuideURL:c.enabled_languages.en.userGuideURL;return{maintenance:l.get("maintenance"),previewMode:l.get("previewMode"),previewFeedbackUrl:l.get("previewFeedbackUrl"),previewMessage:l.get("previewMessage"),userGuideURL:e}},e.eventShouldClosePopover=function(e){var n=t(e.target);return this.eventIsWithinPopover(e)?!1:!n.closest("#state-modals").length&&"modal_background"!=n.attr("id")},e.setErrors=function(e){if(!n.isEqual(e,this.errors)){this.errors=e;var t=this.$(".template-errors");t.children().remove();for(var i=0;i<e.length;i++)t.append('<div class="dcg-errors">'+e[i].message+"</div>")}},e.setProcessing=function(e){e!==this.processing&&(this.processing=e,this.$(".template-processing").toggle(e))},e.setLoggedIn=function(e){e!==this.loggedIn&&(this.loggedIn=e,this.$(".template-unlessuser").toggle(!e))},e.didCreateElement=function(){i.didCreateElement.call(this);var e=this;this.$(".dcg-suggestions textarea").on("focus",function(){t(this).animate({height:"80px"},{duration:200,complete:function(){t.placeholder&&t.placeholder.shim()}}),e.$(".dcg-suggestions-expansion").show()}),this.$(".dcg-action-submit").on("submit",this.sendFeedback.bind(this)),this.$(".dcg-action-closesuggestion").on("dcg-tap",this.closeSuggestion.bind(this));var n=function(){this.setProperty("isVisible",!1)};for(var r in h)if(!h[r].hideInHelp){var s=u(this.tourController,h[r]);s.appendTo(this.$(".dcg-tours-content")),s.observeEvent("tourLaunched",n.bind(this))}this.setErrors([]),this.setProcessing(!1),this.setLoggedIn(!!this.userController.currentUser),this.userController.observe("currentUser",function(){e.setLoggedIn(!!e.userController.currentUser)}),this.$(".dcg-action-show-hotkeys").on("dcg-tap",this.showHotkeys.bind(this))},e.closeSuggestion=function(){this.$(".dcg-suggestions textarea").animate({height:"33px"},200).val(""),this.$(".dcg-suggestions-expansion").fadeOut(200),this.setProcessing(!1),this.setErrors([])},e.sendFeedback=function(e){if(e.preventDefault(),!this.processing){var n=t.trim(this.$('textarea[name="message"]').val());if(!n)return this.setErrors([{message:c.t("Please enter your feedback.")}]),void d(this.$(".dcg-suggestions"));var i={message:n,state:JSON.stringify(this.Calc.getState()),userAgent:navigator.userAgent,"anonymous-email":this.$('input[name="anonymous-email"]').val()},r=this;this.setProcessing(!0),a.emailFeedback(i).done(function(e){r.$(".dcg-feedback-email-sent").show(),r.setErrors([]),r.closeSuggestion(),setTimeout(function(){r.$(".dcg-feedback-email-sent").slideUp()},2e3)}).fail(function(e){r.setErrors(s(e))}).always(function(e){r.setProcessing(!1)})}},e.showHotkeys=function(){this.modals.hotkeysDialog.show()}});return p}),define("loadcss!css/language",function(){}),define("template!language",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{}){__p+="<div class=\"dcg-language-container dcg-popover dcg-bottom dcg-constrained-height-popover\" role='complementary' aria-label='Language Options Menu'>\n\n  <div class='dcg-popover-interior'>\n    <div class='dcg-popover-title'>\n      "+(null==(__t=t("Language"))?"":_.escape(__t))+"\n    </div>\n    <div class='dcg-popover-content'>\n      <table>\n        <tr>\n      ";var i=0;_.each(enabled_languages,function(e,t){__p+="\n       <td>\n        <div role='link' tabindex=0 lang='"+(null==(__t=t)?"":_.escape(__t))+"' class='dcg-language-option"+(null==(__t=t===selected_language?" dcg-selected":"")?"":_.escape(__t))+"'>\n            "+(null==(__t=e.displayName)?"":_.escape(__t))+"\n\n        </div>\n        </td>\n        "+(null==(__t=++i%2===0?"</tr><tr>":"")?"":__t)+"\n\n      ";
}),__p+="\n        </tr>\n      </table>\n\n      <div class='dcg-translate-invite'>\n        Don't see your language?\n        <a\n          target='_blank'\n          href='http://support.desmos.com/entries/28346817-Help-us-translate-Desmos-'\n        >\n          Help us translate\n        </a>\n      </div>\n    </div>\n  </div>\n  <div class='dcg-arrow'></div>\n</div>\n"}return __p}}),define("main/preserved_state",["require"],function(e){var t=function(e){var t=JSON.stringify(e);try{sessionStorage.preservedState=t}catch(n){}},n=function(){var e;try{e=sessionStorage.preservedState,sessionStorage.preservedState=""}catch(t){return}if(e)return JSON.parse(e)},i=function(){try{return!!sessionStorage.preservedState}catch(e){return!1}};return{pushState:t,popState:n,hasState:i}}),define("main/language",["require","loadcss!css/language","jquery","pjs","underscore","main/popover_view","template!language","i18n","main/cookie","main/preserved_state"],function(e){e("loadcss!css/language");var t=e("jquery"),n=e("pjs"),i=e("underscore"),r=e("main/popover_view"),s=e("template!language"),a=e("i18n"),o=e("main/cookie"),c=e("main/preserved_state"),l=n(r,function(e,n){e.template=s,e.pointToSelector=".dcg-action-language i",e.init=function(e){n.init.call(this),this.Calc=e},e.getTemplateParams=function(){return{enabled_languages:a.enabled_languages,selected_language:a.detectLanguage()}},e.didCreateElement=function(){n.didCreateElement.call(this),this.$(".dcg-language-option").on("dcg-tap",this.selectLanguage.bind(this))},e.selectLanguage=function(e){var n=t(e.target);if(!n.hasClass("dcg-selected")){this.closePopover();var r=this.Calc.getState(),s=0===i.filter(r.expressions.list,function(e){return!e.hasOwnProperty("latex")||e.latex}).length;s||c.pushState({unsavedState:r}),o.setCookie("lang",n.attr("lang")),location.reload()}}});return l}),define("template!account_dropdown",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="<div\n  role='complementary'\n  class=\"dcg-logout-options dcg-popover dcg-bottom\"\n  aria-label='Account Information'\n>\n  <div class=\"dcg-popover-interior\">\n    <div class=\"dcg-popover-content\">\n      <div class='user-info'>\n        <span class='account-name'></span>\n        <span class='account-email'></span>\n        <a class=\"dcg-action-editaccount\" role=\"link\" tabindex=0>"+(null==(__t=t("Edit Account"))?"":_.escape(__t))+"</a>\n      </div>\n      ",includeFeedbackLink&&(__p+='\n        <a class="dcg-action-feedback" role="link" tabindex=0>'+(null==(__t=t("Send Feedback"))?"":_.escape(__t))+"</a>\n      "),__p+='\n      <a class="dcg-action-logout" role="link" tabindex=0>'+(null==(__t=t("Sign Out"))?"":_.escape(__t))+"</a>\n    </div>\n  </div>\n  <div class='dcg-arrow'></div>\n</div>\n";return __p}}),define("main/account_dropdown",["require","loadcss!css/help","jquery","pjs","main/popover_view","template!account_dropdown"],function(e){e("loadcss!css/help");var t=e("jquery"),n=e("pjs"),i=e("main/popover_view"),r=e("template!account_dropdown"),s=n(i,function(e,n){e.template=r,e.pointToSelector=".dcg-account-link .email i",e.init=function(e,t){n.init.call(this),this.userController=e,this.modals=t},e.editAccount=function(){this.modals.editAccountDialog.show(),this.closePopover()},e.logout=function(){this.userController.logout(),this.closePopover()},e.feedback=function(){this.closePopover(),this.modals.rateView.show()},e.eventShouldClosePopover=function(e){var n=t(e.target);return this.eventIsWithinPopover(e)?!1:!n.closest("#state-modals").length&&"modal_background"!=n.attr("id")},e.getTemplateParams=function(){return{includeFeedbackLink:!!this.modals.rateView}},e.didCreateElement=function(){n.didCreateElement.call(this),this.$(".dcg-action-logout").on("dcg-tap",this.logout.bind(this)),this.$(".dcg-action-feedback").on("dcg-tap",this.feedback.bind(this)),this.$(".dcg-action-editaccount").on("dcg-tap",this.editAccount.bind(this)),this.userController.observe("currentUser",this.renderUser.bind(this)),this.renderUser()},e.renderUser=function(){var e=this.userController.currentUser;e||(e={}),this.$(".account-name").text(e.name),this.$(".account-email").text(e.email)}});return s}),define("../vendor/dcgview/attr-event-handler",[],function(){function e(e,t){if(null!==t&&void 0!==t){if("string"!=typeof e)throw new Error("Must pass a string for an EventHandler name");if("function"!=typeof t)throw new Error("Must pass a function for an EventHandler callback");return{bindings:{onMount:function(n){n[e.toLowerCase()]=t}}}}}return e}),define("../vendor/dcgview/const",["require"],function(e){function t(e){var t=function(){return e};return t.isDCGViewConst=!0,t}function n(e){return"function"==typeof e&&e.isDCGViewConst?!0:!1}return{isConst:n,makeConst:t}}),define("../vendor/dcgview/escape",["require"],function(e){function t(e){return null===e||void 0===e?"":(e+="",e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"))}function n(e){return null===e||void 0===e?"":(e+="",e=e.replace(/"/g,"&quot;"),e=e.replace(/'/g,"&apos;"))}return{text:t,attr:n}}),define("../vendor/dcgview/attr",["require","./escape"],function(e){function t(e,t){return void 0!==t?e+'="'+i.attr(t)+'"':void 0}function n(e,t,n){void 0===n?e.removeAttribute(t):e.setAttribute(t,n+"")}var i=e("./escape");return{string:t,update:n}}),define("../vendor/dcgview/attr-generic",["require","./const","./attr"],function(e){function t(e,t){var r,s=t();return n.isConst(t)||(r={onUpdate:function(n){var r=t();r!==s&&(s=r,i.update(n,e,r))}}),{value:s,bindings:r}}var n=e("./const"),i=e("./attr");return t}),define("../vendor/dcgview/is-event-handler",[],function(){function e(e){return"o"===e[0]&&"n"===e[1]&&e[2].toUpperCase()===e[2]}return e}),define("../vendor/dcgview/custom-attributes",["require"],function(e){function t(e,t){r[e]=t}function n(e){return r.hasOwnProperty(e)}function i(e,t){var n=r[e];return n(t)}var r={};return{isCustomAttribute:n,add:t,parse:i}}),define("../vendor/dcgview/ensure-constant-string",["require","./const"],function(e){function t(e,t){if(!n.isConst(t))throw new Error(e+" must be a const getter. It is: "+t);var i=t();if("string"!=typeof i)throw new Error(e+" must return a string. It returned: "+i);if(""===i)throw new Error(e+" must not return ''")}var n=e("./const");return t}),define("../vendor/dcgview/bindings",["require"],function(e){function t(e,t,n){var i=e._bindings[t];i?i.push(n):e._bindings[t]=[n]}function n(e,t){var n=e._bindings[t];if(n)for(var i=n.length,r=0;i>r;r++)n[r]()}return{add:t,invoke:n}}),define("../vendor/dcgview/bind-attrs",["require","./attr-event-handler","./attr-generic","./is-event-handler","./custom-attributes","./ensure-constant-string","./bindings","./attr"],function(e){function t(e,t,i){var r=i.bindings;if(r)for(var s in r){var a=r[s];s in d&&(a=n.bind(null,t,a)),u.add(e,s,a)}}function n(e,t){t(document.getElementById(e))}function i(e,t){if("function"!=typeof t)throw new Error('The "'+e+'" attr must be a function. It is: '+JSON.stringify(t));if("id"!==e&&"ref"!==e)return c.isCustomAttribute(e)?c.parse(e,t):o(e)?s(e,t):a(e,t)}function r(e,n,r,s){var a,o=[];if(!r)return"";"ref"in r&&(l("ref",r.ref),a=r.ref());for(var c in r){var u=i(c,r[c]);if(u){var d=h.string(c,u.value);d&&o.push(d),u.bindings&&t(n,s,u)}}return void 0!==a&&e._setNodeRef(a,s),o.length?" "+o.join(" "):""}var s=e("./attr-event-handler"),a=e("./attr-generic"),o=e("./is-event-handler"),c=e("./custom-attributes"),l=e("./ensure-constant-string"),u=e("./bindings"),h=e("./attr"),d={onMount:!0,didMount:!0,willUnmount:!0,willUpdate:!0,onUpdate:!0,didUpdate:!0};return r}),define("../vendor/dcgview/ids",["require"],function(e){function t(){return a+"-"+o++}function n(){r=o,s=a,a="dcg",o=0}function i(){o=r,a=s}var r,s,a="dcg-"+Math.round(1e5*Math.random()),o=0;return{generate:t,stub:n,unstub:i}}),define("../vendor/dcgview/bind-text",["require","./ids","./bindings","./escape"],function(e){function t(e,t,s){if("function"!=typeof s)throw new Error("bindText expects a function");var a=n.generate(),o=s();i.add(e,"onUpdate",function(){var e=s();o!==e&&(document.getElementById(a).innerHTML=r.text(e),o=e)}),t.push('<span id="',a,'">',r.text(o),"</span>")}var n=e("./ids"),i=e("./bindings"),r=e("./escape");return t}),define("../vendor/dcgview/warnings",["require"],function(e){function t(e){r.push(e)}function n(e){var t=r;r=[];for(var n=0;n<t.length;n++){var i=t[n];i!==e&&r.push(i)}}function i(e){try{throw new Error(e)}catch(t){console.warn(t);for(var n=0;n<r.length;n++)r[n](t)}}var r=[];return{warn:i,addWarningHandler:t,removeWarningHandler:n}}),define("../vendor/dcgview/dcg-element",["require","./bind-attrs","./bind-text","./ensure-constant-string","./const","./ids","./warnings","./escape"],function(e){function t(e,t,n,i){this.owner=e,this.tagName=t,this.attrs=n,this.children=i}var n=e("./bind-attrs"),i=e("./bind-text"),r=e("./ensure-constant-string"),s=e("./const"),a=e("./ids"),o=e("./warnings"),c=e("./escape");return t.prototype._isDCGElement=!0,t.prototype.findNode=function(){return document.getElementById(this.id)},t.prototype.pushHTMLToArray=function(e,t){this.attrs&&"id"in this.attrs?(r("id",this.attrs.id),this.id=this.attrs.id()):this.id=a.generate();var l=this.children,u=n(this.owner,t,this.attrs,this.id);e.push("<"+this.tagName+' id="'+this.id+'"'+u+">");for(var h=l.length,d=0;h>d;d++){var p=l[d];p._isDCGElement?p.pushHTMLToArray(e,t):s.isConst(p)?e.push(c.text(p())):"function"==typeof p?i(t,e,p):(o.warn("Text should be a const or a getter: "+JSON.stringify(p)),e.push(c.text(p)))}e.push("</"+this.tagName+">")},t}),define("../vendor/dcgview/create-element",["require","./dcg-element"],function(e){function t(e,n){if(null!==e&&void 0!==e)if(Array.isArray(e))for(var i=0;i<e.length;i++)t(e[i],n);else n.push(e)}function n(e,n){for(var r=this,s=[],a=arguments.length-1,o=2;a>=o;o++)t(arguments[o],s);if("string"==typeof e)return new i(r,e,n,s);if(e&&e._isDCGViewClass){var c=new e(n,s);return n&&"ref"in n&&r._setViewRef(n.ref(),c),r._ownedViews.push(c),c}throw new Error("createElement expects a String or DCGViewClass")}var i=e("./dcg-element");return n}),define("../vendor/dcgview/mounting",["require","./bindings"],function(e){function t(){return this._element._isDCGView?this._element.findRootNode():this._element.findNode()}function n(e,t){t&&t._childViews.push(this),this._element.pushHTMLToArray(e,this)}function i(e,t,n){if(!e||!e._isDCGViewClass)throw new Error("Must pass a DCGView class to be mounted");if(1!==t.nodeType)throw new Error("Must pass an HTMLElement for the node");if(t._mountedDCGView)throw new Error("This node is already mounted by a view");var i=new e(n),r=[];i.pushHTMLToArray(r);var c=r.join("");return s(i),t._mountedDCGView=i,t.innerHTML=c,a(i),o(i),i}function r(e){var t=e._mountedDCGView;if(!t)throw new Error("This node is not mounted by a DCGView");c(t),e.innerHTML="",delete e._mountedDCGView,l(t),u(t)}function s(e){e.willMount&&e.willMount(),p.invoke(e,"willMount"),e._childViews.forEach(s)}function a(e){e._isMounted=!0,e.onMount&&e.onMount(),p.invoke(e,"onMount"),e._childViews.forEach(a)}function o(e){e.didMount&&e.didMount(),p.invoke(e,"didMount"),e._childViews.forEach(o)}function c(e){e.willUnmount&&e.willUnmount(),p.invoke(e,"willUnmount"),e._childViews.forEach(c)}function l(e){e._isMounted=!1,e._childViews.forEach(l),p.invoke(e,"onUnmount"),e.onUnmount&&e.onUnmount()}function u(e){e._childViews.forEach(u),p.invoke(e,"didUnmount"),e.didUnmount&&e.didUnmount()}function h(e,t){var n=document.createElement("div"),i=[];return e.pushHTMLToArray(i,t),n.innerHTML=i.join(""),n.firstChild}function d(e,t){var n=t._ownedViews.indexOf(e);if(-1===n)throw Error("This is not an owned view");var i=t._childViews.indexOf(e);if(-1===i)throw Error("this is not a child view");for(var r in t._refs){var s=t._refs[r];if(s&&s.view===e){delete t._refs[r];break}}t._ownedViews.splice(n,1),t._childViews.splice(i,1)}var p=e("./bindings");return{pushHTMLToArray:n,findRootNode:t,createNodeForView:h,detachView:d,willMount:s,onMount:a,didMount:o,willUnmount:c,onUnmount:l,didUnmount:u,mountToNode:i,unmountFromNode:r}}),define("../vendor/dcgview/refs",["require"],function(e){function t(e){var t=this._refs[e];if(!t)throw new Error('The "'+e+'" ref is not defined.');if(t.node)return t.node;if(t.view)throw new Error('Use .findView() to access the "'+e+'" ref.');var n=document.getElementById(t.id);if(!n)throw new Error('Could not find node with "'+e+'" ref.');return t.node=n,n}function n(e){var t=this._refs[e];if(!t)throw new Error('The "'+e+'" ref is not defined.');if(t.view)return t.view;throw new Error('Use .findNode() to access the "'+e+'" ref.')}function i(e,t){if(e in this._refs)throw new Error('The "'+e+'" ref is already defined.');this._refs[e]={id:t}}function r(e,t){if(e in this._refs)throw new Error('The "'+e+'" ref is already defined.');this._refs[e]={view:t}}return{_setViewRef:r,_setNodeRef:i,findNode:t,findView:n}}),define("../vendor/dcgview/update",["require","./bindings","./warnings"],function(e){function t(){if(!this._isMounted)return i.warn("Trying to update view that is not mounted. Ignoring update.");if(!this.shouldUpdate||this.shouldUpdate()){if(this.willUpdate&&this.willUpdate(),n.invoke(this,"willUpdate"),n.invoke(this,"onUpdate"),this.onUpdate&&this.onUpdate(),this.overrideChildUpdates)this.overrideChildUpdates();else for(var e=this._childViews,t=e.length,r=0;t>r;r++)e[r].update();n.invoke(this,"didUpdate"),this.didUpdate&&this.didUpdate()}}var n=e("./bindings"),i=e("./warnings");return{update:t}}),define("../vendor/dcgview/spread",["require"],function(e){function t(e){var t=arguments.length;if(2>t)return e;for(var n=1;t>n;n++)for(var i=arguments[n],r=Object.keys(i),s=r.length,a=0;s>a;a++){var o=r[a];e[o]=i[o]}return e}return t}),define("../vendor/dcgview/create-class",["require","./create-element","./mounting","./refs","./update","./const","./ensure-constant-string","./spread"],function(e){function t(e){if(!e)throw new Error("must pass a spec to DCGView.createClass");if("function"!=typeof e.template)throw new Error("must pass a template function to DCGView.createClass");var t=e.template,l=function(e,n){var i={};if(e){"ref"in e&&o("ref",e.ref);for(var r in e){var s=e[r];if("function"!=typeof s)throw new Error('The "'+r+'" prop must be a function. It is: '+JSON.stringify(s));i[r]=e[r]}delete i.ref,this.props=i}else this.props={};if(this.children=n,this._ownedViews=[],this._childViews=[],this._refs={},this._bindings={},this._element=t.call(this),!this._element||!this._element._isDCGElement)throw new Error("template() must return a DCGElement")};l.prototype.findView=r.findView,l.prototype.findNode=r.findNode,l.prototype.findRootNode=i.findRootNode,l.prototype.pushHTMLToArray=i.pushHTMLToArray,l.prototype["const"]=a.makeConst,l.prototype.spread=c,l.prototype.createElement=n,l.prototype.update=s.update,l.prototype._setNodeRef=r._setNodeRef,l.prototype._setViewRef=r._setViewRef;for(var u in e)if(e.hasOwnProperty(u)){if(l.prototype.hasOwnProperty(u))throw new Error("Cannot override the "+u+"() method");l.prototype[u]=e[u]}return delete l.prototype.template,l._isDCGViewClass=!0,l.prototype._isDCGView=!0,l.prototype._isDCGElement=!0,l}var n=e("./create-element"),i=e("./mounting"),r=e("./refs"),s=e("./update"),a=e("./const"),o=e("./ensure-constant-string"),c=e("./spread");return t}),define("../vendor/dcgview/attr-style",["require","./const","./attr"],function(e){function t(e){var t=e(),n=typeof t;if("string"===n)return t;if(!n||"object"!==n)throw new Error("Unsupported type returned from style getter: "+n);var i={},r=[];for(var s in t){var a=t[s];t.hasOwnProperty(s)&&null!==a&&void 0!==a&&(i[s]=a,r.push(s+":"+a))}return i.transform&&r.push("-webkit-transform:"+i.transform),i.transition&&r.push("-webkit-transition:"+i.transition),r.join(";")}function n(e){var n,s=t(e);return i.isConst(e)||(n={onUpdate:function(n){var i=t(e);s!==i&&(r.update(n,"style",i),s=i)}}),{value:s,bindings:n}}var i=e("./const"),r=e("./attr");return n}),define("../vendor/dcgview/attr-class",["require","./const"],function(e){function t(e){var t=e(),n=typeof t;if("string"===n)return t;if(!n||"object"!==n)throw new Error("Unsupported type returned from class getter: "+n);var i=[];for(var r in t){var s=t[r];t.hasOwnProperty(r)&&s&&i.push(r)}return i.join(" ")}function n(e,t,n){for(var i=[],r=e.className.replace(/^\s+|\s+$/g,"").split(/\s+/),s=t.replace(/^\s+|\s+$/g,"").split(/\s+/),a={},o=s.length-1;o>=0;o--)a[s[o]]=!0;var c=r.length;for(o=0;c>o;o++){var l=r[o];a.hasOwnProperty(l)||i.push(l)}return n?i.length?n+" "+i.join(" "):n:i.join(" ")}function i(e){var i,s=t(e);return r.isConst(e)||(i={onUpdate:function(i){var r=t(e);s!==r&&(i.className===s?(i.className=r,s=r):(i.className=n(i,s,r),s=r))}}),{value:s,bindings:i}}var r=e("./const");return i}),define("../vendor/dcgview/attr-lifecycle",["require","./const"],function(e){function t(e){return function(t){if("function"!=typeof t)throw new Error("The "+e+" attribute expects a function for the value");if(n.isConst(t))throw new Error("The "+e+" attribute does not expect a const for the value");var i={bindings:{}};return i.bindings[e]=t,i}}var n=e("./const");return t}),define("../vendor/dcgview/longest-subsequence",["require"],function(e){return function(e){var t,n,i=e.length,r=new Array(i),s=new Array(i+1),a=0;for(n=0;i>n;n++){if(e[s[a]]<e[n])t=a+1;else{for(var o=1,c=a-1;c>=o;){var l=Math.ceil((o+c)/2);e[s[l]]<e[n]?o=l+1:c=l-1}t=o}r[n]=s[t-1],s[t]=n,t>a&&(a=t)}var u=new Array(a),h=s[a];for(n=a-1;n>=0;n--)u[n]=e[h],h=r[h];return u}}),define("../vendor/dcgview/compute-key-mutations",["require","./longest-subsequence"],function(e){function t(e,t){var i,r,s,a,o={},c={},l=[],u=[];for(i=0;i<e.length;i++)o[e[i]]=i;for(i=0;i<t.length;i++)c[t[i]]=i;var h=[];for(i=0;i<e.length;i++)r=e[i],s=c[r],void 0!==s&&h.push(s);var d=n(h),p={};for(i=0;i<d.length;i++)r=t[d[i]],p[r]=!0;for(i=e.length-1;i>=0;i--)r=e[i],p[r]||(s=c[r],l.push({fromIndex:i,key:r,toIndex:s}));for(i=0;i<t.length;i++)r=t[i],p[r]||(a=o[r],u.push({fromIndex:a,toIndex:i,key:r}));return{removes:l,adds:u}}var n=e("./longest-subsequence");return t}),define("../vendor/dcgview/for",["require","./create-class","./compute-key-mutations","./const","./mounting"],function(e){var t=e("./create-class"),n=e("./compute-key-mutations"),i=e("./const"),r=e("./mounting"),s=t({template:function(){return this.props.contents(this)}}),a=t({_isDCGFor:!0,getKeys:function(){this._keyToItem={};var e=this.props.each();if(!Array.isArray(e))throw new Error("<For each={}> must return an array");var t=this.props.key?e.map(this.props.key):e.slice(0);if(!this._chosenKeyType&&t.length&&(this._chosenKeyType=typeof t[0],"string"!==this._chosenKeyType&&"number"!==this._chosenKeyType))throw new Error("The key: "+JSON.stringify(t[0])+" is not a string or number");for(var n=0;n<t.length;n++){var i=t[n];if(typeof i!==this._chosenKeyType)throw new Error("Keys must be the same type. "+JSON.stringify(i)+" is not a "+this._chosenKeyType);if(i in this._keyToItem)throw new Error("The key: "+JSON.stringify(i)+" is not unique");this._keyToItem[i]=e[n]}return t},createViewForKey:function(e){var t=this._keyToItem[e],n=this,i=function(i){return n._viewFunction.call(i,t,e)},r=this.createElement(s,{contents:i});return this._keyToView[e]=r,r},template:function(){if(this._keyToView={},"function"!=typeof this.props.each)throw new Error("<For each={}> must be a function");if(1!==this.children.length)throw new Error("<For> expects a single child. You passed "+this.children.length);var e=this.children[0];if(!e||!e._isDCGElement)throw new Error("<For> expects the root node to be a DCGElement. You passed "+JSON.stringify(e));if(e._isDCGView)throw new Error("<For> expects the root node to not be a DCGView. Pass in something like <div> or <span>");if(1!==e.children.length)throw new Error("<For> expects a root node with a single child. You passed "+e.children.length);if(this._viewFunction=e.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<For> expects a function that constructs a DCGElement. You passed a DCGElement directly");if("function"!=typeof this._viewFunction){var t=JSON.stringify(this._viewFunction);throw new Error("<For> expects a function that constructs a DCGElement. You passed "+t)}if(i.isConst(this._viewFunction))throw new Error("<For> expects a function that constructs a DCGElement. You passed a constant");this._keys=this.getKeys();for(var n=[],r=0;r<this._keys.length;r++){var s=this._keys[r];n.push(this.createViewForKey(s))}return e.children=n,e},overrideChildUpdates:function(){var e=this._keys,t=this.getKeys(),i={};this._keys=t;var s,a,o,c,l,u,h=n(e,t),d=this.findRootNode(),p=[];for(s=0;s<h.removes.length;s++)u=h.removes[s],void 0===u.toIndex&&p.push(this._keyToView[u.key]);for(p.forEach(r.willUnmount),s=0;s<h.removes.length;s++)u=h.removes[s],o=d.children[u.fromIndex],void 0!==u.toIndex?i[u.key]=o:(a=this._keyToView[u.key],delete this._keyToView[u.key],r.detachView(a,this)),d.removeChild(o);p.forEach(r.onUnmount),p.forEach(r.didUnmount);var f=0,m=[],g=[];for(s=0;s<h.adds.length;s++)l=h.adds[s],void 0===l.fromIndex&&(a=this.createViewForKey(l.key),m.push(a),g.push(r.createNodeForView(a,this)));for(m.forEach(r.willMount),s=0;s<h.adds.length;s++)l=h.adds[s],void 0!==l.fromIndex?(c=d.children[l.toIndex],d.insertBefore(i[l.key],c||null)):(c=0===l.toIndex?d.firstChild:d.children[l.toIndex-1].nextSibling,d.insertBefore(g[f],c),f++);m.forEach(r.onMount),m.forEach(r.didMount);var v=this._childViews,y=v.length-f;for(s=0;y>s;s++)v[s].update()}});return a}),define("../vendor/dcgview/switch",["require","./create-class","./const","./mounting"],function(e){var t=e("./create-class"),n=e("./const"),i=e("./mounting"),r=t({template:function(){return this.children[0]}}),s=t({_isDCGSwitch:!0,updateKey:function(){this._key=this.props.key()},createView:function(){var e=this._viewFunction(this._key);return(null===e||void 0===e)&&(e=this.createElement("div",{style:this["const"]("display: none")})),this.createElement(r,null,e)},template:function(){if(this._key=void 0,"function"!=typeof this.props.key)throw new Error("<Switch key={}> must be a function");if(1!==this.children.length)throw new Error("<Switch> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a DCGElement directly");if("function"!=typeof this._viewFunction){var e=JSON.stringify(this._viewFunction);throw new Error("<Switch> expects a function that constructs a DCGElement. You passed "+e)}if(n.isConst(this._viewFunction))throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a constant");return this.updateKey(),this.createView()},overrideChildUpdates:function(){var e=this._key;this.updateKey();var t=this._key;if(e===t)this._element.update();else{var n=this.findRootNode(),r=document.createTextNode("");n.parentNode.insertBefore(r,n),i.willUnmount(this._element),i.detachView(this._element,this),n.parentNode.removeChild(n),i.onUnmount(this._element),i.didUnmount(this._element),this._element=this.createView();var s=i.createNodeForView(this._element,this);i.willMount(this._element),r.parentNode.insertBefore(s,r),r.parentNode.removeChild(r),i.onMount(this._element),i.didMount(this._element)}}});return s}),define("../vendor/dcgview/if",["require","./create-class","./const","./switch"],function(e){var t=e("./create-class"),n=e("./const"),i=e("./switch"),r=t({_isDCGIf:!0,template:function(){if("function"!=typeof this.props.predicate)throw new Error("<If predicate={}> must be a function");if(1!==this.children.length)throw new Error("<If> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<If> expects a function that constructs a DCGElement. You passed a DCGElement directly");if("function"!=typeof this._viewFunction){var e=JSON.stringify(this._viewFunction);throw new Error("<If> expects a function that constructs a DCGElement. You passed "+e)}if(n.isConst(this._viewFunction))throw new Error("<If> expects a function that constructs a DCGElement. You passed a constant");var t=function(){return!!this.props.predicate()}.bind(this),r=function(e){return e?this._viewFunction():void 0}.bind(this);return this.createElement(i,{key:t},r)}});return r}),define("../vendor/dcgview/textarea",["require","./create-class","./spread"],function(e){var t=e("./create-class"),n=e("./spread");return t({computeValue:function(){var e=this.props.value();return null===e||void 0===e?"":e+""},template:function(){if(!this.props.value)throw new Error('<Textarea> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Textarea> expects an "onInput={}" prop');var e=n({},this.props,{onInput:function(e){this.props.onInput(e.target.value),this.update()}.bind(this)});return delete e.value,this.createElement("textarea",e,this["const"](this.computeValue()))},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeValue();this.rootDOM.value!==e&&(this.rootDOM.value=e)}})}),define("../vendor/dcgview/input",["require","./create-class","./spread"],function(e){var t=e("./create-class"),n=e("./spread");return t({computeValue:function(){var e=this.props.value();return null===e||void 0===e?"":e+""},template:function(){if(!this.props.value)throw new Error('<Input> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Input> expects an "onInput={}" prop');var e=n({},this.props,{value:this["const"](this.computeValue()),onInput:function(e){this.props.onInput(e.target.value),this.update()}.bind(this)});return this.createElement("input",e)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeValue();this.rootDOM.value!==e&&(this.rootDOM.value=e)}})}),define("../vendor/dcgview/checkbox",["require","./create-class","./spread"],function(e){var t=e("./create-class"),n=e("./spread");return t({computeChecked:function(){return!!this.props.checked()},template:function(){if(!this.props.checked)throw new Error('<Checkbox> expects a "checked={}" prop');if(!this.props.onChange)throw new Error('<Checkbox> expects an "onChange={}" prop');var e=n({},this.props,{type:this["const"]("checkbox"),checked:this["const"](this.computeChecked()?"checked":void 0),onChange:function(e){this.props.onChange(e.target.checked),this.update()}.bind(this)});return this.createElement("input",e)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeChecked();this.rootDOM.checked!==e&&(this.rootDOM.checked=e)}})}),define("../vendor/dcgview/components",["require","./for","./switch","./if","./textarea","./input","./checkbox"],function(e){var t=e("./for"),n=e("./switch"),i=e("./if"),r=e("./textarea"),s=e("./input"),a=e("./checkbox");return{For:t,Switch:n,If:i,Textarea:r,Input:s,Checkbox:a}}),define("../vendor/dcgview/dcg-view",["require","./create-class","./mounting","./spread","./const","./custom-attributes","./attr-style","./attr-class","./attr-lifecycle","./components","./warnings"],function(e){var t=e("./create-class"),n=e("./mounting"),i=e("./spread"),r=e("./const"),s=e("./custom-attributes"),a=e("./attr-style"),o=e("./attr-class"),c=e("./attr-lifecycle"),l=e("./components"),u=e("./warnings"),h={createClass:t,mountToNode:n.mountToNode,unmountFromNode:n.unmountFromNode,spread:i,"const":r.makeConst,addCustomAttribute:s.add,Components:l,addWarningHandler:u.addWarningHandler,removeWarningHandler:u.removeWarningHandler};return h.addCustomAttribute("style",a),h.addCustomAttribute("class",o),h.addCustomAttribute("willMount",c("willMount")),h.addCustomAttribute("onMount",c("onMount")),h.addCustomAttribute("didMount",c("didMount")),h.addCustomAttribute("willUnmount",c("willUnmount")),h.addCustomAttribute("onUnmount",c("onUnmount")),h.addCustomAttribute("didUnmount",c("didUnmount")),h.addCustomAttribute("willUpdate",c("willUpdate")),h.addCustomAttribute("onUpdate",c("onUpdate")),h.addCustomAttribute("didUpdate",c("didUpdate")),window.DCGView=h,h}),define("loadcss!css/dcgview-shim",function(){}),function(){define("dcgview",["require","jquery","../vendor/dcgview/dcg-view","loadcss!css/dcgview-shim","touchtracking"],function(e){var t,n;return t=e("jquery"),n=e("../vendor/dcgview/dcg-view"),e("loadcss!css/dcgview-shim"),e("touchtracking"),n.addWarningHandler(function(e){return"undefined"!=typeof Bugsnag&&null!==Bugsnag?Bugsnag.notifyException(e,"DCGViewWarning"):void 0}),n.addCustomAttribute("onTap",function(e){return{value:"",bindings:{onMount:function(n){return t(n).on("dcg-tap",e)}}}}),n.addCustomAttribute("onTapStart",function(e){return{bindings:{onMount:function(n){return t(n).on("dcg-tapstart",e)}}}}),n.addCustomAttribute("onTapMove",function(e){return{bindings:{onMount:function(n){return t(n).on("dcg-tapmove",e)}}}}),n.addCustomAttribute("onTapEnd",function(e){return{bindings:{onMount:function(n){return t(n).on("dcg-tapend",e)}}}}),n.addCustomAttribute("onLongHold",function(e){return{bindings:{onMount:function(n){return t(n).on("dcg-longhold",e)}}}}),n})}.call(this),define("loadcss!css/mygraphs/item",function(){}),function(){define("cjsx/mygraphs/item",["require","dcgview","i18n","loadcss!css/mygraphs/item"],function(e){var t,n,i;return t=e("dcgview"),n=t.Components.If,i=e("i18n"),e("loadcss!css/mygraphs/item"),t.createClass({template:function(){return this.createElement("div",{"class":function(e){return function(){return{"saved-graph":!0,"graph-link-container":!0,"dcg-selected":e.props.isSelected()}}}(this),onTap:function(e){return function(t){return t.wasHandled()?void 0:e.props.onTap()}}(this)},this.createElement(n,{predicate:function(e){return function(){return!e.props.isDeletingGraph()&&!e.props.didDeleteGraphFail()}}(this)},function(e){return function(){return e.createElement("div",{"class":function(){return{"graph-link":!0,"dcg-action-preview-graph":!0,"example-graph":e.props.isExample()}}},e.createElement("span",{"class":t["const"]("dcg-thumb"),style:e["const"]({"background-image":"url("+e.props.getThumbURL()+")"})}),e.createElement("span",{"class":t["const"]("dcg-title")},e.props.getTitle),e.createElement("span",{"class":t["const"]("date")},function(){return e.props.isExample()?i.t("example"):e.props.getDisplayDate()}))}}(this)),this.createElement(n,{predicate:this.props.isDeletingGraph},function(e){return function(){return e.createElement("div",{"class":t["const"]("deleting"),handleEvent:t["const"]("true"),onTap:function(t){return e.props.canCancelDelete()?e.props.cancelDeleteGraph():void 0}},e["const"](i.t("Deleting this graph...")),e.createElement(n,{predicate:e.props.canCancelDelete},function(){return e.createElement("div",{"class":t["const"]("cancel-delete")},e["const"](i.t("Cancel")))}))}}(this)),this.createElement(n,{predicate:this.props.didDeleteGraphFail},function(e){return function(){return e.createElement("div",{"class":t["const"]("retry-delete"),handleEvent:t["const"]("true")},e["const"](i.t("Error deleting.")),e.createElement("a",{role:t["const"]("button"),tabindex:t["const"](0),"class":t["const"]("dcg-action-removegraph"),onTap:e.props.requestDeleteGraph},e["const"](i.t("Try again"))),e["const"](i.t("or")),e.createElement("a",{role:t["const"]("button"),tabindex:t["const"](0),"class":t["const"]("dcg-action-cancelremovegraph"),onTap:e.props.cancelDeleteGraph},e["const"](i.t("Cancel"))))}}(this)),this.createElement(n,{predicate:function(e){return function(){return!e.props.isExample()&&!e.props.isDeletingGraph()&&!e.props.didDeleteGraphFail()}}(this)},function(e){return function(){return e.createElement("span",{"class":t["const"]("actions"),handleEvent:t["const"]("true")},e.createElement("span",{role:t["const"]("button"),tabindex:t["const"](0),"aria-label":t["const"]('{i18n.t "Delete"}'),"class":t["const"]("dcg-icon-remove dcg-action-removegraph"),
onTap:e.props.requestDeleteGraph}))}}(this)))}})})}.call(this),define("loadcss!css/mygraphs/save-btn",function(){}),function(){define("cjsx/mygraphs/save-btn",["require","dcgview","i18n","loadcss!css/mygraphs/save-btn"],function(e){var t,n,i;return t=e("dcgview"),n=t.Components.If,i=e("i18n"),e("loadcss!css/mygraphs/save-btn"),t.createClass({shouldShowSaveButton:function(){return!this.props.isSaving()&&!this.props.didSaveRecentlySucceed()&&!this.props.didSaveRecentlyFail()},template:function(){return this.createElement("div",{"class":t["const"]("save-btn-container")},this.createElement(n,{predicate:function(e){return function(){return e.shouldShowSaveButton()}}(this)},function(e){return function(){return e.createElement("div",{"class":t["const"]("save-button")},e.createElement("span",{role:t["const"]("button"),tabindex:t["const"](0),onTap:e.props.onTap,"class":function(){return{"dcg-btn-green":e.props.didGraphChange(),"disabled-save-btn":!e.props.didGraphChange()}}},e["const"](i.t("Save"))))}}(this)),this.createElement(n,{predicate:this.props.isSaving},function(e){return function(){return e.createElement("div",{"class":t["const"]("save-saving")},e.createElement("span",{"class":t["const"]("dcg-spinner-dark")}))}}(this)),this.createElement(n,{predicate:this.props.didSaveRecentlyFail},function(e){return function(){return e.createElement("div",{"class":t["const"]("save-error")},e.createElement("i",{"class":t["const"]("dcg-icon-remove")}),t["const"](" "),e["const"](i.t("error")))}}(this)),this.createElement(n,{predicate:this.props.didSaveRecentlySucceed},function(e){return function(){return e.createElement("div",{"class":t["const"]("save-success")},e.createElement("i",{"class":t["const"]("dcg-icon-check")}),t["const"](" "),e["const"](i.t("saved")))}}(this)))}})})}.call(this),define("loadcss!css/mygraphs/graph-in-progress",function(){}),function(){define("cjsx/mygraphs/graph-in-progress",["require","dcgview","i18n","cjsx/mygraphs/save-btn","loadcss!css/mygraphs/item","loadcss!css/mygraphs/graph-in-progress"],function(e){var t,n,i;return t=e("dcgview"),i=e("i18n"),n=e("cjsx/mygraphs/save-btn"),e("loadcss!css/mygraphs/item"),e("loadcss!css/mygraphs/graph-in-progress"),t.createClass({template:function(){return this.createElement("div",{"class":t["const"]("graph-link-container graph-in-progress")},this.createElement("div",{role:t["const"]("link"),"aria-label":t["const"]('{i18n.t "Save"}'),"class":t["const"]("graph-link dcg-action-preview-graph"),onTap:this.props.openSaveDialog},this.createElement("span",{"class":t["const"]("dcg-thumb"),style:function(e){return function(){return{"background-image":"url("+e.props.getThumbnail()+")"}}}(this)}),this.createElement("span",{"class":t["const"]("dcg-title")},this.props.getTitle),this.createElement("span",{"class":t["const"]("date")},function(e){return function(){return e.props.didGraphChange()?e.props.wasCurrentGraphEverSaved()?i.t("last saved: "+e.props.getDisplayDate()):i.t("unsaved graph"):i.t("no unsaved changes")}}(this))),this.createElement(n,{didGraphChange:this.props.didGraphChange,isSaving:this.props.isSaving,didSaveRecentlySucceed:this.props.didSaveRecentlySucceed,didSaveRecentlyFail:this.props.didSaveRecentlyFail,onTap:this.props.simpleSave}))},shouldUpdate:function(){return this.props.isOpen()}})})}.call(this),define("loadcss!css/mygraphs/user-bar",function(){}),function(){define("cjsx/mygraphs/user-bar",["require","dcgview","loadcss!css/mygraphs/user-bar","jquery","i18n","conditional_blur"],function(e){var t,n,i,r,s,a,o;return n=e("dcgview"),e("loadcss!css/mygraphs/user-bar"),t=e("jquery"),o=n.Components,r=o.Input,i=o.If,a=e("i18n"),s=e("conditional_blur"),n.createClass({willUpdate:function(){return this.props.isSearching()?void 0:this.searchValue=""},template:function(){return this.searchValue="",this.createElement("div",{"class":n["const"]("dcg-user-bar")},this.createElement(i,{predicate:function(e){return function(){return!e.props.isSearching()}}(this)},function(e){return function(){return e.createElement("span",{role:n["const"]("button"),tabindex:n["const"](0),"class":n["const"]("dcg-action-toggle-dropdown"),onTap:e.props.toggleDropdown},e.createElement("span",{"class":n["const"]("dcg-variable-name")},function(){var t;return null!=(t=e.props.user())?t.firstName():void 0}),e.createElement("span",{"class":n["const"]("dcg-caret-container"),style:function(){return{transform:e.props.isDropdownOpen()?"rotate(-180deg)":"rotate(0)"}}},e.createElement("i",{"class":n["const"]("dcg-icon-chevron-down")})))}}(this)),this.createElement(i,{predicate:function(e){return function(){return!e.props.isDropdownOpen()}}(this)},function(e){return function(){return e.createElement("div",{"class":function(){return{"search-container":!0,"search-open":e.props.isSearching()}}},e.createElement("i",{"class":n["const"]("dcg-icon-search search-icon")}),e.createElement(r,{placeholder:e["const"](a.t("search by title")),onInput:function(t){return e.searchValue=t,e.props.updateFilter(t)},onFocus:e.props.openSearch,value:function(){return e.searchValue}}),e.createElement("span",{role:n["const"]("button"),tabindex:n["const"](0),"class":n["const"]("dcg-icon-remove dcg-action-close-search"),onTap:function(t){return t.preventDefault(),s(),e.props.closeSearch()}}))}}(this)))}})})}.call(this),define("loadcss!css/mygraphs/load-graph-view",function(){}),function(){define("cjsx/mygraphs/load-graph-view",["require","dcgview","loadcss!css/mygraphs/load-graph-view","i18n","jquery","underscore"],function(e){var t,n,i,r,s;return n=e("dcgview"),e("loadcss!css/mygraphs/load-graph-view"),i=n.Components.If,s=e("i18n"),t=e("jquery"),r=e("underscore"),n.createClass({template:function(){return this.createElement("div",{"class":n["const"]("dcg-loading-container")},this.createElement(i,{predicate:function(e){return function(){return!e.props.didDataLoadFail()}}(this)},function(e){return function(){return e.createElement("div",{"class":n["const"]("dcg-graph-loading")},e.createElement("div",{"class":n["const"]("pulsing-message")},e["const"](s.t("Loading..."))),e.createElement("div",{"class":n["const"]("cancel-while-loading"),onTap:e.props.onCancel},e["const"](s.t("Cancel"))))}}(this)),this.createElement(i,{predicate:function(e){return function(){return e.props.didDataLoadFail()}}(this)},function(e){return function(){return e.createElement("div",{"class":n["const"]("dcg-graph-loading-error")},e.createElement("div",{"class":n["const"]("dcg-graph-loading-error-title")},e["const"](s.t("Error loading graph"))),e.createElement("div",{"class":n["const"]("dcg-graph-loading-error-subtitle")},e["const"](s.t("Check your internet connection?"))),e.createElement("div",{"class":n["const"]("dcg-graph-loading-error-options")},e.createElement("span",{role:n["const"]("button"),tabindex:n["const"](0),"class":n["const"]("dcg-action-try-again dcg-btn-blue dcg-btn-medium"),onTap:e.props.requestLoadGraphData},e["const"](s.t("Try Again"))),e["const"](s.t("or")),e.createElement("span",{role:n["const"]("button"),tabindex:n["const"](0),"class":n["const"]("dcg-action-cancel dcg-btn-light-gray dcg-btn-medium"),onTap:e.props.onCancel},e["const"](s.t("Cancel")))))}}(this)))}})})}.call(this),define("text!worker_src_underlying",[],function(){return'var requirejs,require,define;!function(e){function t(e,t){return y.call(e,t)}function r(e,t){var r,n,i,a,o,s,u,c,l,h,f=t&&t.split("/"),p=d.map,m=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(f=f.slice(0,f.length-1),e=f.concat(e.split("/")),c=0;c<e.length;c+=1)if(h=e[c],"."===h)e.splice(c,1),c-=1;else if(".."===h){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||m)&&p){for(r=e.split("/"),c=r.length;c>0;c-=1){if(n=r.slice(0,c).join("/"),f)for(l=f.length;l>0;l-=1)if(i=p[f.slice(0,l).join("/")],i&&(i=i[n])){a=i,o=c;break}if(a)break;!s&&m&&m[n]&&(s=m[n],u=c)}!a&&s&&(a=s,o=u),a&&(r.splice(0,o,a),e=r.join("/"))}return e}function n(t,r){return function(){return l.apply(e,v.call(arguments,0).concat([t,r]))}}function i(e){return function(t){return r(t,e)}}function a(e){return function(t){p[e]=t}}function o(r){if(t(m,r)){var n=m[r];delete m[r],g[r]=!0,c.apply(e,n)}if(!t(p,r)&&!t(g,r))throw new Error("No "+r);return p[r]}function s(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function u(e){return function(){return d&&d.config&&d.config[e]||{}}}var c,l,h,f,p={},m={},d={},g={},y=Object.prototype.hasOwnProperty,v=[].slice;h=function(e,t){var n,a=s(e),u=a[0];return e=a[1],u&&(u=r(u,t),n=o(u)),u?e=n&&n.normalize?n.normalize(e,i(t)):r(e,t):(e=r(e,t),a=s(e),u=a[0],e=a[1],u&&(n=o(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:n}},f={require:function(e){return n(e)},exports:function(e){var t=p[e];return"undefined"!=typeof t?t:p[e]={}},module:function(e){return{id:e,uri:"",exports:p[e],config:u(e)}}},c=function(r,i,s,u){var c,l,d,y,v,b,x=[];if(u=u||r,"function"==typeof s){for(i=!i.length&&s.length?["require","exports","module"]:i,v=0;v<i.length;v+=1)if(y=h(i[v],u),l=y.f,"require"===l)x[v]=f.require(r);else if("exports"===l)x[v]=f.exports(r),b=!0;else if("module"===l)c=x[v]=f.module(r);else if(t(p,l)||t(m,l)||t(g,l))x[v]=o(l);else{if(!y.p)throw new Error(r+" missing "+l);y.p.load(y.n,n(u,!0),a(l),{}),x[v]=p[l]}d=s.apply(p[r],x),r&&(c&&c.exports!==e&&c.exports!==p[r]?p[r]=c.exports:d===e&&b||(p[r]=d))}else r&&(p[r]=s)},requirejs=require=l=function(t,r,n,i,a){return"string"==typeof t?f[t]?f[t](r):o(h(t,r).f):(t.splice||(d=t,r.splice?(t=r,r=n,n=null):t=e),r=r||function(){},"function"==typeof n&&(n=i,i=a),i?c(e,t,r,n):setTimeout(function(){c(e,t,r,n)},4),l)},l.config=function(e){return d=e,d.deps&&l(d.deps,d.callback),l},define=function(e,r,n){r.splice||(n=r,r=[]),t(p,e)||t(m,e)||(m[e]=[e,r,n])},define.amd={jQuery:!0}}(),"undefined"!=typeof ALMOND_OVERRIDES&&ALMOND_OVERRIDES&&(define=ALMOND_OVERRIDES.define||define,require=ALMOND_OVERRIDES.require||require,requirejs=ALMOND_OVERRIDES.requirejs||requirejs),define("vendor/almond",function(){}),define("testbridge",["require"],function(e){var t={ready:function(){window.TestBridge=t}};return t}),define("console",["require"],function(e){var t=function(){},r=["log","info","warn","error","assert","dir","clear","profile","profileEnd"],n={},i=function(e){"undefined"!=typeof window&&window.console&&window.console[e]?n[e]=function(){Function.prototype.apply.call(window.console[e],window.console,arguments)}:n[e]=t};return r.forEach(i),n}),define("pjs",[],function(){var e=function(e,t,r){function n(e){return"object"==typeof e}function i(e){return"function"==typeof e}function a(){}function o(s,u){function c(){var e=new l;return i(e.init)&&e.init.apply(e,arguments),e}function l(){}u===r&&(u=s,s=Object),c.Bare=l;var h,f=a[e]=s[e],p=l[e]=c[e]=new a;return p.constructor=c,c.mixin=function(t){return l[e]=c[e]=o(c,t)[e],c},(c.open=function(e){if(h={},i(e)?h=e.call(c,p,f,c,s):n(e)&&(h=e),n(h))for(var r in h)t.call(h,r)&&(p[r]=h[r]);return i(p.init)||(p.init=s),c})(u)}return o}("prototype",{}.hasOwnProperty);return e}),function(){function e(e){function t(t,r,n,i,a,o){for(;a>=0&&o>a;a+=e){var s=i?i[a]:a;n=r(n,t[s],s,t)}return n}return function(r,n,i,a){n=b(n,a,4);var o=!S(r)&&v.keys(r),s=(o||r).length,u=e>0?0:s-1;return arguments.length<3&&(i=r[o?o[u]:u],u+=e),t(r,n,i,o,u,s)}}function t(e){return function(t,r,n){r=x(r,n);for(var i=E(t),a=e>0?0:i-1;a>=0&&i>a;a+=e)if(r(t[a],a,t))return a;return-1}}function r(e,t,r){return function(n,i,a){var o=0,s=E(n);if("number"==typeof a)e>0?o=a>=0?a:Math.max(a+s,o):s=a>=0?Math.min(a+1,s):a+s+1;else if(r&&a&&s)return a=r(n,i),n[a]===i?a:-1;if(i!==i)return a=t(l.call(n,o,s),v.isNaN),a>=0?a+o:-1;for(a=e>0?o:s-1;a>=0&&s>a;a+=e)if(n[a]===i)return a;return-1}}function n(e,t){var r=A.length,n=e.constructor,i=v.isFunction(n)&&n.prototype||s,a="constructor";for(v.has(e,a)&&!v.contains(t,a)&&t.push(a);r--;)a=A[r],a in e&&e[a]!==i[a]&&!v.contains(t,a)&&t.push(a)}var i=this,a=i._,o=Array.prototype,s=Object.prototype,u=Function.prototype,c=o.push,l=o.slice,h=s.toString,f=s.hasOwnProperty,p=Array.isArray,m=Object.keys,d=u.bind,g=Object.create,y=function(){},v=function(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports._=v):i._=v,v.VERSION="1.8.3";var b=function(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,a){return e.call(t,r,n,i,a)}}return function(){return e.apply(t,arguments)}},x=function(e,t,r){return null==e?v.identity:v.isFunction(e)?b(e,t,r):v.isObject(e)?v.matcher(e):v.property(e)};v.iteratee=function(e,t){return x(e,t,1/0)};var _=function(e,t){return function(r){var n=arguments.length;if(2>n||null==r)return r;for(var i=1;n>i;i++)for(var a=arguments[i],o=e(a),s=o.length,u=0;s>u;u++){var c=o[u];t&&void 0!==r[c]||(r[c]=a[c])}return r}},w=function(e){if(!v.isObject(e))return{};if(g)return g(e);y.prototype=e;var t=new y;return y.prototype=null,t},M=function(e){return function(t){return null==t?void 0:t[e]}},T=Math.pow(2,53)-1,E=M("length"),S=function(e){var t=E(e);return"number"==typeof t&&t>=0&&T>=t};v.each=v.forEach=function(e,t,r){t=b(t,r);var n,i;if(S(e))for(n=0,i=e.length;i>n;n++)t(e[n],n,e);else{var a=v.keys(e);for(n=0,i=a.length;i>n;n++)t(e[a[n]],a[n],e)}return e},v.map=v.collect=function(e,t,r){t=x(t,r);for(var n=!S(e)&&v.keys(e),i=(n||e).length,a=Array(i),o=0;i>o;o++){var s=n?n[o]:o;a[o]=t(e[s],s,e)}return a},v.reduce=v.foldl=v.inject=e(1),v.reduceRight=v.foldr=e(-1),v.find=v.detect=function(e,t,r){var n;return n=S(e)?v.findIndex(e,t,r):v.findKey(e,t,r),void 0!==n&&-1!==n?e[n]:void 0},v.filter=v.select=function(e,t,r){var n=[];return t=x(t,r),v.each(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n},v.reject=function(e,t,r){return v.filter(e,v.negate(x(t)),r)},v.every=v.all=function(e,t,r){t=x(t,r);for(var n=!S(e)&&v.keys(e),i=(n||e).length,a=0;i>a;a++){var o=n?n[a]:a;if(!t(e[o],o,e))return!1}return!0},v.some=v.any=function(e,t,r){t=x(t,r);for(var n=!S(e)&&v.keys(e),i=(n||e).length,a=0;i>a;a++){var o=n?n[a]:a;if(t(e[o],o,e))return!0}return!1},v.contains=v.includes=v.include=function(e,t,r,n){return S(e)||(e=v.values(e)),("number"!=typeof r||n)&&(r=0),v.indexOf(e,t,r)>=0},v.invoke=function(e,t){var r=l.call(arguments,2),n=v.isFunction(t);return v.map(e,function(e){var i=n?t:e[t];return null==i?i:i.apply(e,r)})},v.pluck=function(e,t){return v.map(e,v.property(t))},v.where=function(e,t){return v.filter(e,v.matcher(t))},v.findWhere=function(e,t){return v.find(e,v.matcher(t))},v.max=function(e,t,r){var n,i,a=-(1/0),o=-(1/0);if(null==t&&null!=e){e=S(e)?e:v.values(e);for(var s=0,u=e.length;u>s;s++)n=e[s],n>a&&(a=n)}else t=x(t,r),v.each(e,function(e,r,n){i=t(e,r,n),(i>o||i===-(1/0)&&a===-(1/0))&&(a=e,o=i)});return a},v.min=function(e,t,r){var n,i,a=1/0,o=1/0;if(null==t&&null!=e){e=S(e)?e:v.values(e);for(var s=0,u=e.length;u>s;s++)n=e[s],a>n&&(a=n)}else t=x(t,r),v.each(e,function(e,r,n){i=t(e,r,n),(o>i||i===1/0&&a===1/0)&&(a=e,o=i)});return a},v.shuffle=function(e){for(var t,r=S(e)?e:v.values(e),n=r.length,i=Array(n),a=0;n>a;a++)t=v.random(0,a),t!==a&&(i[a]=i[t]),i[t]=r[a];return i},v.sample=function(e,t,r){return null==t||r?(S(e)||(e=v.values(e)),e[v.random(e.length-1)]):v.shuffle(e).slice(0,Math.max(0,t))},v.sortBy=function(e,t,r){return t=x(t,r),v.pluck(v.map(e,function(e,r,n){return{value:e,index:r,criteria:t(e,r,n)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(n>r||void 0===n)return-1}return e.index-t.index}),"value")};var N=function(e){return function(t,r,n){var i={};return r=x(r,n),v.each(t,function(n,a){var o=r(n,a,t);e(i,n,o)}),i}};v.groupBy=N(function(e,t,r){v.has(e,r)?e[r].push(t):e[r]=[t]}),v.indexBy=N(function(e,t,r){e[r]=t}),v.countBy=N(function(e,t,r){v.has(e,r)?e[r]++:e[r]=1}),v.toArray=function(e){return e?v.isArray(e)?l.call(e):S(e)?v.map(e,v.identity):v.values(e):[]},v.size=function(e){return null==e?0:S(e)?e.length:v.keys(e).length},v.partition=function(e,t,r){t=x(t,r);var n=[],i=[];return v.each(e,function(e,r,a){(t(e,r,a)?n:i).push(e)}),[n,i]},v.first=v.head=v.take=function(e,t,r){return null!=e?null==t||r?e[0]:v.initial(e,e.length-t):void 0},v.initial=function(e,t,r){return l.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))},v.last=function(e,t,r){return null!=e?null==t||r?e[e.length-1]:v.rest(e,Math.max(0,e.length-t)):void 0},v.rest=v.tail=v.drop=function(e,t,r){return l.call(e,null==t||r?1:t)},v.compact=function(e){return v.filter(e,v.identity)};var I=function(e,t,r,n){for(var i=[],a=0,o=n||0,s=E(e);s>o;o++){var u=e[o];if(S(u)&&(v.isArray(u)||v.isArguments(u))){t||(u=I(u,t,r));var c=0,l=u.length;for(i.length+=l;l>c;)i[a++]=u[c++]}else r||(i[a++]=u)}return i};v.flatten=function(e,t){return I(e,t,!1)},v.without=function(e){return v.difference(e,l.call(arguments,1))},v.uniq=v.unique=function(e,t,r,n){v.isBoolean(t)||(n=r,r=t,t=!1),null!=r&&(r=x(r,n));for(var i=[],a=[],o=0,s=E(e);s>o;o++){var u=e[o],c=r?r(u,o,e):u;t?(o&&a===c||i.push(u),a=c):r?v.contains(a,c)||(a.push(c),i.push(u)):v.contains(i,u)||i.push(u)}return i},v.union=function(){return v.uniq(I(arguments,!0,!0))},v.intersection=function(e){for(var t=[],r=arguments.length,n=0,i=E(e);i>n;n++){var a=e[n];if(!v.contains(t,a)){for(var o=1;r>o&&v.contains(arguments[o],a);o++);o===r&&t.push(a)}}return t},v.difference=function(e){var t=I(arguments,!0,!0,1);return v.filter(e,function(e){return!v.contains(t,e)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(e){for(var t=e&&v.max(e,E).length||0,r=Array(t),n=0;t>n;n++)r[n]=v.pluck(e,n);return r},v.object=function(e,t){for(var r={},n=0,i=E(e);i>n;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},v.findIndex=t(1),v.findLastIndex=t(-1),v.sortedIndex=function(e,t,r,n){r=x(r,n,1);for(var i=r(t),a=0,o=E(e);o>a;){var s=Math.floor((a+o)/2);r(e[s])<i?a=s+1:o=s}return a},v.indexOf=r(1,v.findIndex,v.sortedIndex),v.lastIndexOf=r(-1,v.findLastIndex),v.range=function(e,t,r){null==t&&(t=e||0,e=0),r=r||1;for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),a=0;n>a;a++,e+=r)i[a]=e;return i};var C=function(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var a=w(e.prototype),o=e.apply(a,i);return v.isObject(o)?o:a};v.bind=function(e,t){if(d&&e.bind===d)return d.apply(e,l.call(arguments,1));if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),n=function(){return C(e,n,t,this,r.concat(l.call(arguments)))};return n},v.partial=function(e){var t=l.call(arguments,1),r=function(){for(var n=0,i=t.length,a=Array(i),o=0;i>o;o++)a[o]=t[o]===v?arguments[n++]:t[o];for(;n<arguments.length;)a.push(arguments[n++]);return C(e,r,this,this,a)};return r},v.bindAll=function(e){var t,r,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(t=1;n>t;t++)r=arguments[t],e[r]=v.bind(e[r],e);return e},v.memoize=function(e,t){var r=function(n){var i=r.cache,a=""+(t?t.apply(this,arguments):n);return v.has(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return r.cache={},r},v.delay=function(e,t){var r=l.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},v.defer=v.partial(v.delay,v,1),v.throttle=function(e,t,r){var n,i,a,o=null,s=0;r||(r={});var u=function(){s=r.leading===!1?0:v.now(),o=null,a=e.apply(n,i),o||(n=i=null)};return function(){var c=v.now();s||r.leading!==!1||(s=c);var l=t-(c-s);return n=this,i=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),s=c,a=e.apply(n,i),o||(n=i=null)):o||r.trailing===!1||(o=setTimeout(u,l)),a}},v.debounce=function(e,t,r){var n,i,a,o,s,u=function(){var c=v.now()-o;t>c&&c>=0?n=setTimeout(u,t-c):(n=null,r||(s=e.apply(a,i),n||(a=i=null)))};return function(){a=this,i=arguments,o=v.now();var c=r&&!n;return n||(n=setTimeout(u,t)),c&&(s=e.apply(a,i),a=i=null),s}},v.wrap=function(e,t){return v.partial(t,e)},v.negate=function(e){return function(){return!e.apply(this,arguments)}},v.compose=function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},v.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},v.before=function(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),1>=e&&(t=null),r}},v.once=v.partial(v.before,2);var k=!{toString:null}.propertyIsEnumerable("toString"),A=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];v.keys=function(e){if(!v.isObject(e))return[];if(m)return m(e);var t=[];for(var r in e)v.has(e,r)&&t.push(r);return k&&n(e,t),t},v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var r in e)t.push(r);return k&&n(e,t),t},v.values=function(e){for(var t=v.keys(e),r=t.length,n=Array(r),i=0;r>i;i++)n[i]=e[t[i]];return n},v.mapObject=function(e,t,r){t=x(t,r);for(var n,i=v.keys(e),a=i.length,o={},s=0;a>s;s++)n=i[s],o[n]=t(e[n],n,e);return o},v.pairs=function(e){for(var t=v.keys(e),r=t.length,n=Array(r),i=0;r>i;i++)n[i]=[t[i],e[t[i]]];return n},v.invert=function(e){for(var t={},r=v.keys(e),n=0,i=r.length;i>n;n++)t[e[r[n]]]=r[n];return t},v.functions=v.methods=function(e){var t=[];for(var r in e)v.isFunction(e[r])&&t.push(r);return t.sort()},v.extend=_(v.allKeys),v.extendOwn=v.assign=_(v.keys),v.findKey=function(e,t,r){t=x(t,r);for(var n,i=v.keys(e),a=0,o=i.length;o>a;a++)if(n=i[a],t(e[n],n,e))return n},v.pick=function(e,t,r){var n,i,a={},o=e;if(null==o)return a;v.isFunction(t)?(i=v.allKeys(o),n=b(t,r)):(i=I(arguments,!1,!1,1),n=function(e,t,r){return t in r},o=Object(o));for(var s=0,u=i.length;u>s;s++){var c=i[s],l=o[c];n(l,c,o)&&(a[c]=l)}return a},v.omit=function(e,t,r){if(v.isFunction(t))t=v.negate(t);else{var n=v.map(I(arguments,!1,!1,1),String);t=function(e,t){return!v.contains(n,t)}}return v.pick(e,t,r)},v.defaults=_(v.allKeys,!0),v.create=function(e,t){var r=w(e);return t&&v.extendOwn(r,t),r},v.clone=function(e){return v.isObject(e)?v.isArray(e)?e.slice():v.extend({},e):e},v.tap=function(e,t){return t(e),e},v.isMatch=function(e,t){var r=v.keys(t),n=r.length;if(null==e)return!n;for(var i=Object(e),a=0;n>a;a++){var o=r[a];if(t[o]!==i[o]||!(o in i))return!1}return!0};var D=function(e,t,r,n){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof v&&(e=e._wrapped),t instanceof v&&(t=t._wrapped);var i=h.call(e);if(i!==h.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var a="[object Array]"===i;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,s=t.constructor;if(o!==s&&!(v.isFunction(o)&&o instanceof o&&v.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var u=r.length;u--;)if(r[u]===e)return n[u]===t;if(r.push(e),n.push(t),a){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!D(e[u],t[u],r,n))return!1}else{var c,l=v.keys(e);if(u=l.length,v.keys(t).length!==u)return!1;for(;u--;)if(c=l[u],!v.has(t,c)||!D(e[c],t[c],r,n))return!1}return r.pop(),n.pop(),!0};v.isEqual=function(e,t){return D(e,t)},v.isEmpty=function(e){return null==e?!0:S(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e))?0===e.length:0===v.keys(e).length},v.isElement=function(e){return!(!e||1!==e.nodeType)},v.isArray=p||function(e){return"[object Array]"===h.call(e)},v.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){v["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),v.isArguments(arguments)||(v.isArguments=function(e){return v.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(e){return"function"==typeof e||!1}),v.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},v.isNaN=function(e){return v.isNumber(e)&&e!==+e},v.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===h.call(e)},v.isNull=function(e){return null===e},v.isUndefined=function(e){return void 0===e},v.has=function(e,t){return null!=e&&f.call(e,t)},v.noConflict=function(){return i._=a,this},v.identity=function(e){return e},v.constant=function(e){return function(){return e}},v.noop=function(){},v.property=M,v.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},v.matcher=v.matches=function(e){return e=v.extendOwn({},e),function(t){return v.isMatch(t,e)}},v.times=function(e,t,r){var n=Array(Math.max(0,e));t=b(t,r,1);for(var i=0;e>i;i++)n[i]=t(i);return n},v.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},v.now=Date.now||function(){return(new Date).getTime()};var F={"&":"&amp;","<":"&lt;",">":"&gt;",\'"\':"&quot;","\'":"&#x27;","`":"&#x60;"},P=v.invert(F),O=function(e){var t=function(t){return e[t]},r="(?:"+v.keys(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,t):e}};v.escape=O(F),v.unescape=O(P),v.result=function(e,t,r){var n=null==e?void 0:e[t];return void 0===n&&(n=r),v.isFunction(n)?n.call(e):n};var L=0;v.uniqueId=function(e){var t=++L+"";return e?e+t:t},v.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g};var q=/(.)^/,V={"\'":"\'","\\\\":"\\\\","\\r":"r","\\n":"n","\\u2028":"u2028","\\u2029":"u2029"},j=/\\\\|\'|\\r|\\n|\\u2028|\\u2029/g,R=function(e){return"\\\\"+V[e]};v.template=function(e,t,r){!t&&r&&(t=r),t=v.defaults({},t,v.templateSettings);var n=RegExp([(t.escape||q).source,(t.interpolate||q).source,(t.evaluate||q).source].join("|")+"|$","g"),i=0,a="__p+=\'";e.replace(n,function(t,r,n,o,s){return a+=e.slice(i,s).replace(j,R),i=s+t.length,r?a+="\'+\\n((__t=("+r+"))==null?\'\':_.escape(__t))+\\n\'":n?a+="\'+\\n((__t=("+n+"))==null?\'\':__t)+\\n\'":o&&(a+="\';\\n"+o+"\\n__p+=\'"),t}),a+="\';\\n",t.variable||(a="with(obj||{}){\\n"+a+"}\\n"),a="var __t,__p=\'\',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,\'\');};\\n"+a+"return __p;\\n";try{var o=new Function(t.variable||"obj","_",a)}catch(s){throw s.source=a,s}var u=function(e){return o.call(this,e,v)},c=t.variable||"obj";return u.source="function("+c+"){\\n"+a+"}",u},v.chain=function(e){var t=v(e);return t._chain=!0,t};var z=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){v.each(v.functions(e),function(t){var r=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),z(this,r.apply(v,e))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];v.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0],z(this,r)}}),v.each(["concat","join","slice"],function(e){var t=o[e];v.prototype[e]=function(){return z(this,t.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}.call(this),define("numeric",[],function(){"use strict";var numeric="undefined"==typeof exports?function(){}:exports;return"undefined"!=typeof global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,t){var r,n,i,a;for("undefined"==typeof t&&(t=15),i=.5,r=new Date;;){for(i*=2,a=i;a>3;a-=4)e(),e(),e(),e();for(;a>0;)e(),a--;if(n=new Date,n-r>t)break}for(a=i;a>3;a-=4)e(),e(),e(),e();for(;a>0;)e(),a--;return n=new Date,1e3*(3*i-1)/(n-r)},numeric._myIndexOf=function(e){var t,r=this.length;for(t=0;r>t;++t)if(this[t]===e)return t;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.precision=4,numeric.largeArray=50,numeric.compile=function(){var e=Array.prototype.slice.call(arguments),t=e.pop();return t="return function ("+e.join(",")+") {"+t+"}",new Function(["numeric"],t)(numeric)},numeric.prettyPrint=function(e){function t(e){if(0===e)return"0";if(isNaN(e))return"NaN";if(0>e)return"-"+t(-e);if(isFinite(e)){var r=Math.floor(Math.log(e)/Math.log(10)),n=e/Math.pow(10,r),i=n.toPrecision(numeric.precision);return 10===parseFloat(i)&&(r++,n=1,i=n.toPrecision(numeric.precision)),parseFloat(i).toString()+"e"+r.toString()}return"Infinity"}function r(e){var i;if("undefined"==typeof e)return n.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof e)return n.push(\'"\'+e+\'"\'),!1;if("boolean"==typeof e)return n.push(e.toString()),!1;if("number"==typeof e){var a=t(e),o=e.toPrecision(numeric.precision),s=parseFloat(e.toString()).toString(),u=[a,o,s,parseFloat(o).toString(),parseFloat(s).toString()];for(i=1;i<u.length;i++)u[i].length<a.length&&(a=u[i]);return n.push(Array(numeric.precision+8-a.length).join(" ")+a),!1}if(null===e)return n.push("null"),!1;if("function"==typeof e){n.push(e.toString());var c=!1;for(i in e)e.hasOwnProperty(i)&&(c?n.push(",\\n"):n.push("\\n{"),c=!0,n.push(i),n.push(": \\n"),r(e[i]));return c&&n.push("}\\n"),!0}if(e instanceof Array){if(e.length>numeric.largeArray)return n.push("...Large Array..."),!0;var c=!1;for(n.push("["),i=0;i<e.length;i++)i>0&&(n.push(","),c&&n.push("\\n ")),c=r(e[i]);return n.push("]"),!0}n.push("{");var c=!1;for(i in e)e.hasOwnProperty(i)&&(c&&n.push(",\\n"),c=!0,n.push(i),n.push(": \\n"),r(e[i]));return n.push("}"),!0}var n=[];return r(e),n.join("")},numeric.parseDate=function(e){function t(e){if("string"==typeof e)return Date.parse(e.replace(/-/g,"/"));if(!(e instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var r,n=[];for(r=0;r<e.length;r++)n[r]=t(e[r]);return n}return t(e)},numeric.parseFloat=function(e){function t(e){if("string"==typeof e)return parseFloat(e);if(!(e instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var r,n=[];for(r=0;r<e.length;r++)n[r]=t(e[r]);return n}return t(e)},numeric.parseCSV=function(e){var t,r,n=e.split("\\n"),i=[],a=/(([^\'",]*)|(\'[^\']*\')|("[^"]*")),/g,o=/^\\s*(([+-]?[0-9]+(\\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\\.[0-9]+)?(e[+-]?[0-9]+)?))\\s*$/,s=function(e){return e.substr(0,e.length-1)},u=0;for(r=0;r<n.length;r++){var c,l=(n[r]+",").match(a);if(l.length>0){for(i[u]=[],t=0;t<l.length;t++)c=s(l[t]),o.test(c)?i[u][t]=parseFloat(c):i[u][t]=c;u++}}return i},numeric.toCSV=function(e){var t,r,n,i,a,o,s=numeric.dim(e);for(n=s[0],i=s[1],o=[],t=0;n>t;t++){for(a=[],r=0;n>r;r++)a[r]=e[t][r].toString();o[t]=a.join(", ")}return o.join("\\n")+"\\n"},numeric.getURL=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},numeric.imageURL=function(e){function t(e){var t,r,n,i,a,o,s,u,c=e.length,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="";for(t=0;c>t;t+=3)r=e[t],n=e[t+1],i=e[t+2],a=r>>2,o=((3&r)<<4)+(n>>4),s=((15&n)<<2)+(i>>6),u=63&i,t+1>=c?s=u=64:t+2>=c&&(u=64),h+=l.charAt(a)+l.charAt(o)+l.charAt(s)+l.charAt(u);return h}function r(e,t,r){"undefined"==typeof t&&(t=0),"undefined"==typeof r&&(r=e.length);var n,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],a=-1,o=0;e.length;for(n=t;r>n;n++)o=255&(a^e[n]),a=a>>>8^i[o];return-1^a}var n,i,a,o,s,u,c,l,h,f,p=e[0].length,m=e[0][0].length,d=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,m>>24&255,m>>16&255,m>>8&255,255&m,p>>24&255,p>>16&255,p>>8&255,255&p,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(f=r(d,12,29),d[29]=f>>24&255,d[30]=f>>16&255,d[31]=f>>8&255,d[32]=255&f,n=1,i=0,c=0;p>c;c++){for(p-1>c?d.push(0):d.push(1),s=3*m+1+(0===c)&255,u=3*m+1+(0===c)>>8&255,d.push(s),d.push(u),d.push(255&~s),d.push(255&~u),0===c&&d.push(0),l=0;m>l;l++)for(a=0;3>a;a++)s=e[a][c][l],s=s>255?255:0>s?0:Math.round(s),n=(n+s)%65521,i=(i+n)%65521,d.push(s);d.push(0)}return h=(i<<16)+n,d.push(h>>24&255),d.push(h>>16&255),d.push(h>>8&255),d.push(255&h),o=d.length-41,d[33]=o>>24&255,d[34]=o>>16&255,d[35]=o>>8&255,d[36]=255&o,f=r(d,37),d.push(f>>24&255),d.push(f>>16&255),d.push(f>>8&255),d.push(255&f),d.push(0),d.push(0),d.push(0),d.push(0),d.push(73),d.push(69),d.push(78),d.push(68),d.push(174),d.push(66),d.push(96),d.push(130),"data:image/png;base64,"+t(d)},numeric._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},numeric.dim=function(e){var t,r;return"object"==typeof e?(t=e[0],"object"==typeof t?(r=t[0],"object"==typeof r?numeric._dim(e):[e.length,t.length]):[e.length]):[]},numeric.mapreduce=function(e,t){return numeric.compile("x","accum","_s","_k",\'if(typeof accum === "undefined") accum = \'+t+\';\\nif(typeof x === "number") { var xi = x; \'+e+\'; return accum; }\\nif(typeof _s === "undefined") _s = numeric.dim(x);\\nif(typeof _k === "undefined") _k = 0;\\nvar _n = _s[_k];\\nvar i,xi;\\nif(_k < _s.length-1) {\\n    for(i=_n-1;i>=0;i--) {\\n        accum = arguments.callee(x[i],accum,_s,_k+1);\\n    }    return accum;\\n}\\nfor(i=_n-1;i>=1;i-=2) { \\n    xi = x[i];\\n    \'+e+";\\n    xi = x[i-1];\\n    "+e+";\\n}\\nif(i === 0) {\\n    xi = x[i];\\n    "+e+"\\n}\\nreturn accum;")},numeric.mapreduce2=function(e,t){return numeric.compile("x","var n = x.length;\\nvar i,xi;\\n"+t+"\\nfor(i=n-1;i!==-1;--i) { \\n    xi = x[i];\\n    "+e+"\\n}\\nreturn accum;")},numeric.same=function e(t,r){var n,i;if(!(t instanceof Array&&r instanceof Array))return!1;if(i=t.length,i!==r.length)return!1;for(n=0;i>n;n++)if(t[n]!==r[n]){if("object"!=typeof t[n])return!1;if(!e(t[n],r[n]))return!1}return!0},numeric.rep=function(e,t,r){"undefined"==typeof r&&(r=0);var n,i=e[r],a=Array(i);if(r===e.length-1){for(n=i-2;n>=0;n-=2)a[n+1]=t,a[n]=t;return-1===n&&(a[0]=t),a}for(n=i-1;n>=0;n--)a[n]=numeric.rep(e,t,r+1);return a},numeric.dotMMsmall=function(e,t){var r,n,i,a,o,s,u,c,l,h,f;for(a=e.length,o=t.length,s=t[0].length,u=Array(a),r=a-1;r>=0;r--){for(c=Array(s),l=e[r],i=s-1;i>=0;i--){for(h=l[o-1]*t[o-1][i],n=o-2;n>=1;n-=2)f=n-1,h+=l[n]*t[n][i]+l[f]*t[f][i];0===n&&(h+=l[0]*t[0][i]),c[i]=h}u[r]=c}return u},numeric._getCol=function(e,t,r){var n,i=e.length;for(n=i-1;n>0;--n)r[n]=e[n][t],--n,r[n]=e[n][t];0===n&&(r[0]=e[0][t])},numeric.dotMMbig=function(e,t){var r,n,i,a,o=numeric._getCol,s=t.length,u=Array(s),c=e.length,l=t[0].length,h=new Array(c),f=numeric.dotVV;for(--s,--c,n=c;-1!==n;--n)h[n]=Array(l);for(--l,n=l;-1!==n;--n)for(o(t,n,u),i=c;-1!==i;--i)a=0,r=e[i],h[i][n]=f(r,u);return h},numeric.dotMV=function(e,t){var r,n=e.length,i=(t.length,Array(n)),a=numeric.dotVV;for(r=n-1;r>=0;r--)i[r]=a(e[r],t);return i},numeric.dotVM=function(e,t){var r,n,i,a,o,s,u;for(i=e.length,a=t[0].length,o=Array(a),n=a-1;n>=0;n--){for(s=e[i-1]*t[i-1][n],r=i-2;r>=1;r-=2)u=r-1,s+=e[r]*t[r][n]+e[u]*t[u][n];0===r&&(s+=e[0]*t[0][n]),o[n]=s}return o},numeric.dotVV=function(e,t){var r,n,i=e.length,a=e[i-1]*t[i-1];for(r=i-2;r>=1;r-=2)n=r-1,a+=e[r]*t[r]+e[n]*t[n];return 0===r&&(a+=e[0]*t[0]),a},numeric.dot=function(e,t){var r=numeric.dim;switch(1e3*r(e).length+r(t).length){case 2002:return t.length<10?numeric.dotMMsmall(e,t):numeric.dotMMbig(e,t);case 2001:return numeric.dotMV(e,t);case 1002:return numeric.dotVM(e,t);case 1001:return numeric.dotVV(e,t);case 1e3:return numeric.mulVS(e,t);case 1:return numeric.mulSV(e,t);case 0:return e*t;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var t,r,n,i,a=e.length,o=Array(a);for(t=a-1;t>=0;t--){for(i=Array(a),r=t+2,n=a-1;n>=r;n-=2)i[n]=0,i[n-1]=0;for(n>t&&(i[n]=0),i[t]=e[t],n=t-1;n>=1;n-=2)i[n]=0,i[n-1]=0;0===n&&(i[0]=0),o[t]=i}return o},numeric.getDiag=function(e){var t,r=Math.min(e.length,e[0].length),n=Array(r);for(t=r-1;t>=1;--t)n[t]=e[t][t],--t,n[t]=e[t][t];return 0===t&&(n[0]=e[0][0]),n},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,t,r){"undefined"==typeof r&&(r="");var n,i,a=[],o=/\\[i\\]$/,s="",u=!1;for(n=0;n<e.length;n++)o.test(e[n])?(i=e[n].substring(0,e[n].length-3),s=i):i=e[n],"ret"===i&&(u=!0),a.push(i);return a[e.length]="_s",a[e.length+1]="_k",a[e.length+2]=\'if(typeof _s === "undefined") _s = numeric.dim(\'+s+\');\\nif(typeof _k === "undefined") _k = 0;\\nvar _n = _s[_k];\\nvar i\'+(u?"":", ret = Array(_n)")+";\\nif(_k < _s.length-1) {\\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\\n    return ret;\\n}\\n"+r+"\\nfor(i=_n-1;i!==-1;--i) {\\n    "+t+"\\n}\\nreturn ret;",numeric.compile.apply(null,a)},numeric.pointwise2=function(e,t,r){"undefined"==typeof r&&(r="");var n,i,a=[],o=/\\[i\\]$/,s="",u=!1;for(n=0;n<e.length;n++)o.test(e[n])?(i=e[n].substring(0,e[n].length-3),\ns=i):i=e[n],"ret"===i&&(u=!0),a.push(i);return a[e.length]="var _n = "+s+".length;\\nvar i"+(u?"":", ret = Array(_n)")+";\\n"+r+"\\nfor(i=_n-1;i!==-1;--i) {\\n"+t+"\\n}\\nreturn ret;",numeric.compile.apply(null,a)},numeric._biforeach=function t(e,r,n,i,a){if(i===n.length-1)return void a(e,r);var o,s=n[i];for(o=s-1;o>=0;o--)t("object"==typeof e?e[o]:e,"object"==typeof r?r[o]:r,n,i+1,a)},numeric._biforeach2=function r(e,t,n,i,a){if(i===n.length-1)return a(e,t);var o,s=n[i],u=Array(s);for(o=s-1;o>=0;--o)u[o]=r("object"==typeof e?e[o]:e,"object"==typeof t?t[o]:t,n,i+1,a);return u},numeric._foreach=function n(e,t,r,i){if(r===t.length-1)return void i(e);var a,o=t[r];for(a=o-1;a>=0;a--)n(e[a],t,r+1,i)},numeric._foreach2=function i(e,t,r,n){if(r===t.length-1)return n(e);var a,o=t[r],s=Array(o);for(a=o-1;a>=0;a--)s[a]=i(e[a],t,r+1,n);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi);","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,t;for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],numeric.ops2[t]=t;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){t=numeric.ops2[e];var r,n,i="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,e)?(i="var "+t+" = Math."+t+";\\n",r=function(e,r,n){return e+" = "+t+"("+r+","+n+")"},n=function(e,r){return e+" = "+t+"("+e+","+r+")"}):(r=function(e,r,n){return e+" = "+r+" "+t+" "+n},n=numeric.opseq.hasOwnProperty(e+"eq")?function(e,r){return e+" "+t+"= "+r}:function(e,r){return e+" = "+e+" "+t+" "+r}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],r("ret[i]","x[i]","y[i]"),i),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],r("ret[i]","x","y[i]"),i),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],r("ret[i]","x[i]","y"),i),numeric[e]=numeric.compile("var n = arguments.length, i, x = arguments[0], y;\\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+\'SV;\\nvar dim = numeric.dim;\\nfor(i=1;i!==n;++i) { \\n  y = arguments[i];\\n  if(typeof x === "object") {\\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\\n  else \'+n("x","y")+"\\n}\\nreturn x;\\n"),numeric[t]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],n("ret[i]","x[i]"),i),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],n("ret[i]","x"),i),numeric[e+"eq"]=numeric.compile("var n = arguments.length, i, x = arguments[0], y;\\nvar V = numeric."+e+"eqV, S = numeric."+e+\'eqS\\nvar s = numeric.dim(x);\\nfor(i=1;i!==n;++i) { \\n  y = arguments[i];\\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\\n  else numeric._biforeach(x,y,s,0,S);\\n}\\nreturn x;\\n\')}for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],delete numeric.ops2[t];for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],numeric.ops1[t]=t;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(i="",t=numeric.ops1[e],-1!==numeric.myIndexOf.call(numeric.mathfuns,e)&&Math.hasOwnProperty(t)&&(i="var "+t+" = Math."+t+";\\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",i),numeric[e+"eq"]=numeric.compile("x",\'if(typeof x !== "object") return \'+t+"x\\nvar i;\\nvar V = numeric."+e+"eqV;\\nvar s = numeric.dim(x);\\nnumeric._foreach(x,s,0,V);\\nreturn x;\\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",i),numeric[e]=numeric.compile("x",\'if(typeof x !== "object") return \'+t+"(x)\\nvar i;\\nvar V = numeric."+e+"V;\\nvar s = numeric.dim(x);\\nreturn numeric._foreach2(x,s,0,V);\\n"));for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],delete numeric.ops1[t];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(t=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(t[0],t[1]),numeric[e]=numeric.compile("x","s","k",t[1]+\'if(typeof x !== "object") {    xi = x;\\n\'+t[0]+\'\\n    return accum;\\n}if(typeof s === "undefined") s = numeric.dim(x);\\nif(typeof k === "undefined") k = 0;\\nif(k === s.length-1) return numeric.\'+e+"V(x);\\nvar xi;\\nvar n = x.length, i;\\nfor(i=n-1;i!==-1;--i) {\\n   xi = arguments.callee(x[i]);\\n"+t[0]+"\\n}\\nreturn accum;\\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,t){return"object"==typeof e?"object"==typeof t?numeric.truncVV(e,t):numeric.truncVS(e,t):"object"==typeof t?numeric.truncSV(e,t):Math.round(e/t)*t},numeric.inv=function(e){var t,r,n,i,a,o,s,e,u=numeric.dim(e),c=Math.abs,l=u[0],h=u[1],f=numeric.clone(e),p=numeric.identity(l);for(o=0;h>o;++o){var m=-1,d=-1;for(a=o;a!==l;++a)s=c(f[a][o]),s>d&&(m=a,d=s);for(r=f[m],f[m]=f[o],f[o]=r,i=p[m],p[m]=p[o],p[o]=i,e=r[o],s=o;s!==h;++s)r[s]/=e;for(s=h-1;-1!==s;--s)i[s]/=e;for(a=l-1;-1!==a;--a)if(a!==o){for(t=f[a],n=p[a],e=t[o],s=o+1;s!==h;++s)t[s]-=r[s]*e;for(s=h-1;s>0;--s)n[s]-=i[s]*e,--s,n[s]-=i[s]*e;0===s&&(n[0]-=i[0]*e)}}return p},numeric.det=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: det() only works on square matrices");var r,n,i,a,o,s,u,c,l=t[0],h=1,f=numeric.clone(e);for(n=0;l-1>n;n++){for(i=n,r=n+1;l>r;r++)Math.abs(f[r][n])>Math.abs(f[i][n])&&(i=r);for(i!==n&&(u=f[i],f[i]=f[n],f[n]=u,h*=-1),a=f[n],r=n+1;l>r;r++){for(o=f[r],s=o[n]/a[n],i=n+1;l-1>i;i+=2)c=i+1,o[i]-=a[i]*s,o[c]-=a[c]*s;i!==l&&(o[i]-=a[i]*s)}if(0===a[n])return 0;h*=a[n]}return h*f[n][n]},numeric.transpose=function(e){var t,r,n,i,a,o=e.length,s=e[0].length,u=Array(s);for(r=0;s>r;r++)u[r]=Array(o);for(t=o-1;t>=1;t-=2){for(i=e[t],n=e[t-1],r=s-1;r>=1;--r)a=u[r],a[t]=i[r],a[t-1]=n[r],--r,a=u[r],a[t]=i[r],a[t-1]=n[r];0===r&&(a=u[0],a[t]=i[0],a[t-1]=n[0])}if(0===t){for(n=e[0],r=s-1;r>=1;--r)u[r][0]=n[r],--r,u[r][0]=n[r];0===r&&(u[0][0]=n[0])}return u},numeric.negtranspose=function(e){var t,r,n,i,a,o=e.length,s=e[0].length,u=Array(s);for(r=0;s>r;r++)u[r]=Array(o);for(t=o-1;t>=1;t-=2){for(i=e[t],n=e[t-1],r=s-1;r>=1;--r)a=u[r],a[t]=-i[r],a[t-1]=-n[r],--r,a=u[r],a[t]=-i[r],a[t-1]=-n[r];0===r&&(a=u[0],a[t]=-i[0],a[t-1]=-n[0])}if(0===t){for(n=e[0],r=s-1;r>=1;--r)u[r][0]=-n[r],--r,u[r][0]=-n[r];0===r&&(u[0][0]=-n[0])}return u},numeric._random=function a(e,t){var r,n,i=e[t],o=Array(i);if(t===e.length-1){for(n=Math.random,r=i-1;r>=1;r-=2)o[r]=n(),o[r-1]=n();return 0===r&&(o[0]=n()),o}for(r=i-1;r>=0;r--)o[r]=a(e,t+1);return o},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,t,r){if("undefined"==typeof r&&(r=Math.max(Math.round(t-e)+1,1)),2>r)return 1===r?[e]:[];var n,i=Array(r);for(r--,n=r;n>=0;n--)i[n]=(n*t+(r-n)*e)/r;return i},numeric.getBlock=function(e,t,r){function n(e,a){var o,s=t[a],u=r[a]-s,c=Array(u);if(a===i.length-1){for(o=u;o>=0;o--)c[o]=e[o+s];return c}for(o=u;o>=0;o--)c[o]=n(e[o+s],a+1);return c}var i=numeric.dim(e);return n(e,0)},numeric.setBlock=function(e,t,r,n){function i(e,n,o){var s,u=t[o],c=r[o]-u;if(o===a.length-1)for(s=c;s>=0;s--)e[s+u]=n[s];for(s=c;s>=0;s--)i(e[s+u],n[s],o+1)}var a=numeric.dim(e);return i(e,n,0),e},numeric.getRange=function(e,t,r){var n,i,a,o,s=t.length,u=r.length,c=Array(s);for(n=s-1;-1!==n;--n)for(c[n]=Array(u),a=c[n],o=e[t[n]],i=u-1;-1!==i;--i)a[i]=o[r[i]];return c},numeric.blockMatrix=function(e){var t=numeric.dim(e);if(t.length<4)return numeric.blockMatrix([e]);var r,n,i,a,o,s=t[0],u=t[1];for(r=0,n=0,i=0;s>i;++i)r+=e[i][0].length;for(a=0;u>a;++a)n+=e[0][a][0].length;var c=Array(r);for(i=0;r>i;++i)c[i]=Array(n);var l,h,f,p,m,d=0;for(i=0;s>i;++i){for(l=n,a=u-1;-1!==a;--a)for(o=e[i][a],l-=o[0].length,f=o.length-1;-1!==f;--f)for(m=o[f],h=c[d+f],p=m.length-1;-1!==p;--p)h[l+p]=m[p];d+=e[i][0].length}return c},numeric.tensor=function(e,t){if("number"==typeof e||"number"==typeof t)return numeric.mul(e,t);var r=numeric.dim(e),n=numeric.dim(t);if(1!==r.length||1!==n.length)throw new Error("numeric: tensor product is only defined for vectors");var i,a,o,s,u=r[0],c=n[0],l=Array(u);for(a=u-1;a>=0;a--){for(i=Array(c),s=e[a],o=c-1;o>=3;--o)i[o]=s*t[o],--o,i[o]=s*t[o],--o,i[o]=s*t[o],--o,i[o]=s*t[o];for(;o>=0;)i[o]=s*t[o],--o;l[a]=i}return l},numeric.T=function(e,t){this.x=e,this.y=t},numeric.t=function(e,t){return new numeric.T(e,t)},numeric.Tbinop=function(e,t,r,n,i){numeric.indexOf;if("string"!=typeof i){var a;i="";for(a in numeric)numeric.hasOwnProperty(a)&&(e.indexOf(a)>=0||t.indexOf(a)>=0||r.indexOf(a)>=0||n.indexOf(a)>=0)&&a.length>1&&(i+="var "+a+" = numeric."+a+";\\n")}return numeric.compile(["y"],"var x = this;\\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\\n"+i+"\\nif(x.y) {  if(y.y) {    return new numeric.T("+n+");\\n  }\\n  return new numeric.T("+r+");\\n}\\nif(y.y) {\\n  return new numeric.T("+t+");\\n}\\nreturn new numeric.T("+e+");\\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,t=numeric.div;if(this.y){var r=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(t(this.x,r),t(numeric.neg(this.y),r))}return new T(t(1,this.x))},numeric.T.prototype.div=function o(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var o=numeric.div;return this.y?new numeric.T(o(this.x,e.x),o(this.y,e.x)):new numeric.T(o(this.x,e.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,t=this.x,r=this.y;return r?new numeric.T(e(t),e(r)):new numeric.T(e(t))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,t=this.x,r=this.y;return r?new numeric.T(e(t),numeric.negtranspose(r)):new numeric.T(e(t))},numeric.Tunop=function(e,t,r){return"string"!=typeof r&&(r=""),numeric.compile("var x = this;\\n"+r+"\\nif(x.y) {  "+t+"\\n}\\n"+e+"\\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex);","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex));","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x));","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x));","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if("undefined"==typeof e.y)return new numeric.T(numeric.inv(e.x));var t,r,n,i,a,o,s,u,c,l,h,t,r,n,f,p,m,d,g,y,v,b=e.x.length,x=numeric.identity(b),_=numeric.rep([b,b],0),w=numeric.clone(e.x),M=numeric.clone(e.y);for(t=0;b>t;t++){for(m=w[t][t],d=M[t][t],f=m*m+d*d,n=t,r=t+1;b>r;r++)m=w[r][t],d=M[r][t],p=m*m+d*d,p>f&&(n=r,f=p);for(n!==t&&(v=w[t],w[t]=w[n],w[n]=v,v=M[t],M[t]=M[n],M[n]=v,v=x[t],x[t]=x[n],x[n]=v,v=_[t],_[t]=_[n],_[n]=v),i=w[t],a=M[t],u=x[t],c=_[t],m=i[t],d=a[t],r=t+1;b>r;r++)g=i[r],y=a[r],i[r]=(g*m+y*d)/f,a[r]=(y*m-g*d)/f;for(r=0;b>r;r++)g=u[r],y=c[r],u[r]=(g*m+y*d)/f,c[r]=(y*m-g*d)/f;for(r=t+1;b>r;r++){for(o=w[r],s=M[r],l=x[r],h=_[r],m=o[t],d=s[t],n=t+1;b>n;n++)g=i[n],y=a[n],o[n]-=g*m-y*d,s[n]-=y*m+g*d;for(n=0;b>n;n++)g=u[n],y=c[n],l[n]-=g*m-y*d,h[n]-=y*m+g*d}}for(t=b-1;t>0;t--)for(u=x[t],c=_[t],r=t-1;r>=0;r--)for(l=x[r],h=_[r],m=w[r][t],d=M[r][t],n=b-1;n>=0;n--)g=u[n],y=c[n],l[n]-=m*g-d*y,h[n]-=m*y+d*g;return new numeric.T(x,_)},numeric.T.prototype.get=function(e){var t,r=this.x,n=this.y,i=0,a=e.length;if(n){for(;a>i;)t=e[i],r=r[t],n=n[t],i++;return new numeric.T(r,n)}for(;a>i;)t=e[i],r=r[t],i++;return new numeric.T(r)},numeric.T.prototype.set=function(e,t){var r,n=this.x,i=this.y,a=0,o=e.length,s=t.x,u=t.y;if(0===o)return u?this.y=u:i&&(this.y=void 0),this.x=n,this;if(u){for(i||(i=numeric.rep(numeric.dim(n),0),this.y=i);o-1>a;)r=e[a],n=n[r],i=i[r],a++;return r=e[a],n[r]=s,i[r]=u,this}if(i){for(;o-1>a;)r=e[a],n=n[r],i=i[r],a++;return r=e[a],n[r]=s,s instanceof Array?i[r]=numeric.rep(numeric.dim(s),0):i[r]=0,this}for(;o-1>a;)r=e[a],n=n[r],a++;return r=e[a],n[r]=s,this},numeric.T.prototype.getRows=function(e,t){var r,n,i=t-e+1,a=Array(i),o=this.x,s=this.y;for(r=e;t>=r;r++)a[r-e]=o[r];if(s){for(n=Array(i),r=e;t>=r;r++)n[r-e]=s[r];return new numeric.T(a,n)}return new numeric.T(a)},numeric.T.prototype.setRows=function(e,t,r){var n,i=this.x,a=this.y,o=r.x,s=r.y;for(n=e;t>=n;n++)i[n]=o[n-e];if(s)for(a||(a=numeric.rep(numeric.dim(i),0),this.y=a),n=e;t>=n;n++)a[n]=s[n-e];else if(a)for(n=e;t>=n;n++)a[n]=numeric.rep([o[n-e].length],0);return this},numeric.T.prototype.getRow=function(e){var t=this.x,r=this.y;return r?new numeric.T(t[e],r[e]):new numeric.T(t[e])},numeric.T.prototype.setRow=function(e,t){var r=this.x,n=this.y,i=t.x,a=t.y;return r[e]=i,a?(n||(n=numeric.rep(numeric.dim(r),0),this.y=n),n[e]=a):n&&(n=numeric.rep([i.length],0)),this},numeric.T.prototype.getBlock=function(e,t){var r=this.x,n=this.y,i=numeric.getBlock;return n?new numeric.T(i(r,e,t),i(n,e,t)):new numeric.T(i(r,e,t))},numeric.T.prototype.setBlock=function(e,t,r){r instanceof numeric.T||(r=new numeric.T(r));var n=this.x,i=this.y,a=numeric.setBlock,o=r.x,s=r.y;return s?(i||(this.y=numeric.rep(numeric.dim(this),0),i=this.y),a(n,e,t,o),a(i,e,t,s),this):(a(n,e,t,o),void(i&&a(i,e,t,numeric.rep(numeric.dim(o),0))))},numeric.T.rep=function(e,t){var r=numeric.T;t instanceof r||(t=new r(t));var n=t.x,i=t.y,a=numeric.rep;return i?new r(a(e,n),a(e,i)):new r(a(e,n))},numeric.T.diag=function s(e){e instanceof numeric.T||(e=new numeric.T(e));var t=e.x,r=e.y,s=numeric.diag;return r?new numeric.T(s(t),s(r)):new numeric.T(s(t))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,t=this.x,r=this.y;return r?new e.T(e.getDiag(t),e.getDiag(r)):new e.T(e.getDiag(t))},numeric.house=function(e){var t=numeric.clone(e),r=e[0]>=0?1:-1,n=r*numeric.norm2(e);t[0]+=n;var i=numeric.norm2(t);if(0===i)throw new Error("eig: internal error");return numeric.div(t,i)},numeric.toUpperHessenberg=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var r,n,i,a,o,s,u,c,l,h,f=t[0],p=numeric.clone(e),m=numeric.identity(f);for(n=0;f-2>n;n++){for(a=Array(f-n-1),r=n+1;f>r;r++)a[r-n-1]=p[r][n];if(numeric.norm2(a)>0){for(o=numeric.house(a),s=numeric.getBlock(p,[n+1,n],[f-1,f-1]),u=numeric.tensor(o,numeric.dot(o,s)),r=n+1;f>r;r++)for(c=p[r],l=u[r-n-1],i=n;f>i;i++)c[i]-=2*l[i-n];for(s=numeric.getBlock(p,[0,n+1],[f-1,f-1]),u=numeric.tensor(numeric.dot(s,o),o),r=0;f>r;r++)for(c=p[r],l=u[r],i=n+1;f>i;i++)c[i]-=2*l[i-n-1];for(s=Array(f-n-1),r=n+1;f>r;r++)s[r-n-1]=m[r];for(u=numeric.tensor(o,numeric.dot(o,s)),r=n+1;f>r;r++)for(h=m[r],l=u[r-n-1],i=0;f>i;i++)h[i]-=2*l[i]}}return{H:p,Q:m}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(e,t){"undefined"==typeof t&&(t=1e4),e=numeric.clone(e);var r,n,i,a,o,s,u,c,l,h,f,p,m,d,g,y,v,b,x=(numeric.clone(e),numeric.dim(e)),_=x[0],w=numeric.identity(_);if(3>_)return{Q:w,B:[[0,_-1]]};var M=numeric.epsilon;for(b=0;t>b;b++){for(y=0;_-1>y;y++)if(Math.abs(e[y+1][y])<M*(Math.abs(e[y][y])+Math.abs(e[y+1][y+1]))){var T=numeric.QRFrancis(numeric.getBlock(e,[0,0],[y,y]),t),E=numeric.QRFrancis(numeric.getBlock(e,[y+1,y+1],[_-1,_-1]),t);for(p=Array(y+1),g=0;y>=g;g++)p[g]=w[g];for(m=numeric.dot(T.Q,p),g=0;y>=g;g++)w[g]=m[g];for(p=Array(_-y-1),g=y+1;_>g;g++)p[g-y-1]=w[g];for(m=numeric.dot(E.Q,p),g=y+1;_>g;g++)w[g]=m[g-y-1];return{Q:w,B:T.B.concat(numeric.add(E.B,y+1))}}if(i=e[_-2][_-2],a=e[_-2][_-1],o=e[_-1][_-2],s=e[_-1][_-1],c=i+s,u=i*s-a*o,l=numeric.getBlock(e,[0,0],[2,2]),c*c>=4*u){var S,N;S=.5*(c+Math.sqrt(c*c-4*u)),N=.5*(c-Math.sqrt(c*c-4*u)),l=numeric.add(numeric.sub(numeric.dot(l,l),numeric.mul(l,S+N)),numeric.diag(numeric.rep([3],S*N)))}else l=numeric.add(numeric.sub(numeric.dot(l,l),numeric.mul(l,c)),numeric.diag(numeric.rep([3],u)));for(r=[l[0][0],l[1][0],l[2][0]],n=numeric.house(r),p=[e[0],e[1],e[2]],m=numeric.tensor(n,numeric.dot(n,p)),g=0;3>g;g++)for(f=e[g],d=m[g],v=0;_>v;v++)f[v]-=2*d[v];for(p=numeric.getBlock(e,[0,0],[_-1,2]),m=numeric.tensor(numeric.dot(p,n),n),g=0;_>g;g++)for(f=e[g],d=m[g],v=0;3>v;v++)f[v]-=2*d[v];for(p=[w[0],w[1],w[2]],m=numeric.tensor(n,numeric.dot(n,p)),g=0;3>g;g++)for(h=w[g],d=m[g],v=0;_>v;v++)h[v]-=2*d[v];var I;for(y=0;_-2>y;y++){for(v=y;y+1>=v;v++)if(Math.abs(e[v+1][v])<M*(Math.abs(e[v][v])+Math.abs(e[v+1][v+1]))){var T=numeric.QRFrancis(numeric.getBlock(e,[0,0],[v,v]),t),E=numeric.QRFrancis(numeric.getBlock(e,[v+1,v+1],[_-1,_-1]),t);for(p=Array(v+1),g=0;v>=g;g++)p[g]=w[g];for(m=numeric.dot(T.Q,p),g=0;v>=g;g++)w[g]=m[g];for(p=Array(_-v-1),g=v+1;_>g;g++)p[g-v-1]=w[g];for(m=numeric.dot(E.Q,p),g=v+1;_>g;g++)w[g]=m[g-v-1];return{Q:w,B:T.B.concat(numeric.add(E.B,v+1))}}for(I=Math.min(_-1,y+3),r=Array(I-y),g=y+1;I>=g;g++)r[g-y-1]=e[g][y];for(n=numeric.house(r),p=numeric.getBlock(e,[y+1,y],[I,_-1]),m=numeric.tensor(n,numeric.dot(n,p)),g=y+1;I>=g;g++)for(f=e[g],d=m[g-y-1],v=y;_>v;v++)f[v]-=2*d[v-y];for(p=numeric.getBlock(e,[0,y+1],[_-1,I]),m=numeric.tensor(numeric.dot(p,n),n),g=0;_>g;g++)for(f=e[g],d=m[g],v=y+1;I>=v;v++)f[v]-=2*d[v-y-1];for(p=Array(I-y),g=y+1;I>=g;g++)p[g-y-1]=w[g];for(m=numeric.tensor(n,numeric.dot(n,p)),g=y+1;I>=g;g++)for(h=w[g],d=m[g-y-1],v=0;_>v;v++)h[v]-=2*d[v]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,t){var r,n,i,a,o,s,u,c,l,h,f,p,m,d,g,y,v,b=numeric.toUpperHessenberg(e),x=numeric.QRFrancis(b.H,t),_=numeric.T,w=e.length,M=x.B,T=numeric.dot(x.Q,numeric.dot(b.H,numeric.transpose(x.Q))),E=new _(numeric.dot(x.Q,b.Q)),S=M.length,N=Math.sqrt;for(n=0;S>n;n++)if(r=M[n][0],r===M[n][1]);else{if(a=r+1,o=T[r][r],s=T[r][a],u=T[a][r],c=T[a][a],0===s&&0===u)continue;l=-o-c,h=o*c-s*u,f=l*l-4*h,f>=0?(p=0>l?-.5*(l-N(f)):-.5*(l+N(f)),y=(o-p)*(o-p)+s*s,v=u*u+(c-p)*(c-p),y>v?(y=N(y),d=(o-p)/y,g=s/y):(v=N(v),d=u/v,g=(c-p)/v),i=new _([[g,-d],[d,g]]),E.setRows(r,a,i.dot(E.getRows(r,a)))):(p=-.5*l,m=.5*N(-f),y=(o-p)*(o-p)+s*s,v=u*u+(c-p)*(c-p),y>v?(y=N(y+m*m),d=(o-p)/y,g=s/y,p=0,m/=y):(v=N(v+m*m),d=u/v,g=(c-p)/v,p=m/v,m=0),i=new _([[g,-d],[d,g]],[[p,m],[m,-p]]),E.setRows(r,a,i.dot(E.getRows(r,a))))}var I=E.dot(e).dot(E.transjugate()),w=e.length,C=numeric.T.identity(w);for(a=0;w>a;a++)if(a>0)for(n=a-1;n>=0;n--){var k=I.get([n,n]),A=I.get([a,a]);numeric.neq(k.x,A.x)||numeric.neq(k.y,A.y)?(p=I.getRow(n).getBlock([n],[a-1]),m=C.getRow(a).getBlock([n],[a-1]),C.set([a,n],I.get([n,a]).neg().sub(p.dot(m)).div(k.sub(A)))):C.setRow(a,C.getRow(n))}for(a=0;w>a;a++)p=C.getRow(a),C.setRow(a,p.div(p.norm2()));return C=C.transpose(),C=E.transjugate().dot(C),{lambda:I.getDiag(),E:C}},numeric.ccsSparse=function(e){var t,r,n,i,a=e.length,o=[];for(n=a-1;-1!==n;--n){r=e[n];for(i in r){for(i=parseInt(i);i>=o.length;)o[o.length]=0;0!==r[i]&&o[i]++}}var t=o.length,s=Array(t+1);for(s[0]=0,n=0;t>n;++n)s[n+1]=s[n]+o[n];var u=Array(s[t]),c=Array(s[t]);for(n=a-1;-1!==n;--n){r=e[n];for(i in r)0!==r[i]&&(o[i]--,u[s[i]+o[i]]=n,c[s[i]+o[i]]=r[i])}return[s,u,c]},numeric.ccsFull=function(e){var t,r,n,i,a=e[0],o=e[1],s=e[2],u=numeric.ccsDim(e),c=u[0],l=u[1],h=numeric.rep([c,l],0);for(t=0;l>t;t++)for(n=a[t],i=a[t+1],r=n;i>r;++r)h[o[r]][t]=s[r];return h},numeric.ccsTSolve=function(e,t,r,n,i){function a(e){var t;if(0===r[e]){for(r[e]=1,t=o[e];t<o[e+1];++t)a(s[t]);i[h]=e,++h}}var o=e[0],s=e[1],u=e[2],c=o.length-1,l=Math.max,h=0;"undefined"==typeof n&&(r=numeric.rep([c],0)),"undefined"==typeof n&&(n=numeric.linspace(0,r.length-1)),"undefined"==typeof i&&(i=[]);var f,p,m,d,g,y,v;for(f=n.length-1;-1!==f;--f)a(n[f]);for(i.length=h,f=i.length-1;-1!==f;--f)r[i[f]]=0;for(f=n.length-1;-1!==f;--f)p=n[f],r[p]=t[p];for(f=i.length-1;-1!==f;--f){for(p=i[f],m=o[p],d=l(o[p+1],m),g=m;g!==d;++g)if(s[g]===p){r[p]/=u[g];break}for(v=r[p],g=m;g!==d;++g)y=s[g],y!==p&&(r[y]-=v*u[g])}return r},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,t,r,n,i,a){var o,s,u,c=0,l=i.length,h=this.k,f=this.k1,p=this.j;if(0===n[e])for(n[e]=1,p[0]=e,h[0]=s=t[e],f[0]=u=t[e+1];;)if(s>=u){if(i[l]=p[c],0===c)return;++l,--c,s=h[c],u=f[c]}else o=a[r[s]],0===n[o]?(n[o]=1,h[c]=s,++c,p[c]=o,s=t[o],f[c]=u=t[o+1]):++s},numeric.ccsLPSolve=function(e,t,r,n,i,a,o){var s,u,c,l,h,f,p,m,d,g=e[0],y=e[1],v=e[2],b=(g.length-1,t[0]),x=t[1],_=t[2];for(u=b[i],c=b[i+1],n.length=0,s=u;c>s;++s)o.dfs(a[x[s]],g,y,r,n,a);for(s=n.length-1;-1!==s;--s)r[n[s]]=0;for(s=u;s!==c;++s)l=a[x[s]],r[l]=_[s];for(s=n.length-1;-1!==s;--s){for(l=n[s],h=g[l],f=g[l+1],p=h;f>p;++p)if(a[y[p]]===l){r[l]/=v[p];break}for(d=r[l],p=h;f>p;++p)m=a[y[p]],m!==l&&(r[m]-=d*v[p])}return r},numeric.ccsLUP1=function(e,t){var r,n,i,a,o,s,u,c=e[0].length-1,l=[numeric.rep([c+1],0),[],[]],h=[numeric.rep([c+1],0),[],[]],f=l[0],p=l[1],m=l[2],d=h[0],g=h[1],y=h[2],v=numeric.rep([c],0),b=numeric.rep([c],0),x=numeric.ccsLPSolve,_=(Math.max,Math.abs),w=numeric.linspace(0,c-1),M=numeric.linspace(0,c-1),T=new numeric.ccsDFS(c);for("undefined"==typeof t&&(t=1),r=0;c>r;++r){for(x(l,e,v,b,r,M,T),a=-1,o=-1,n=b.length-1;-1!==n;--n)i=b[n],r>=i||(s=_(v[i]),s>a&&(o=i,a=s));for(_(v[r])<t*a&&(n=w[r],a=w[o],w[r]=a,M[a]=r,w[o]=n,M[n]=o,a=v[r],v[r]=v[o],v[o]=a),a=f[r],o=d[r],u=v[r],p[a]=w[r],m[a]=1,++a,n=b.length-1;-1!==n;--n)i=b[n],s=v[i],b[n]=0,v[i]=0,r>=i?(g[o]=i,y[o]=s,++o):(p[a]=w[i],m[a]=s/u,++a);f[r+1]=a,d[r+1]=o}for(n=p.length-1;-1!==n;--n)p[n]=M[p[n]];return{L:l,U:h,P:w,Pinv:M}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,t,r,n,i,a,o){var s,u,c,l=0,h=i.length,f=this.k,p=this.k1,m=this.j;if(0===n[e])for(n[e]=1,m[0]=e,f[0]=u=t[a[e]],p[0]=c=t[a[e]+1];;){if(isNaN(u))throw new Error("Ow!");if(u>=c){if(i[h]=a[m[l]],0===l)return;++h,--l,u=f[l],c=p[l]}else s=r[u],0===n[s]?(n[s]=1,f[l]=u,++l,m[l]=s,s=a[s],u=t[s],p[l]=c=t[s+1]):++u}},numeric.ccsLPSolve0=function(e,t,r,n,i,a,o,s){var u,c,l,h,f,p,m,d,g,y=e[0],v=e[1],b=e[2],x=(y.length-1,t[0]),_=t[1],w=t[2];for(c=x[i],l=x[i+1],n.length=0,u=c;l>u;++u)s.dfs(_[u],y,v,r,n,a,o);for(u=n.length-1;-1!==u;--u)h=n[u],r[o[h]]=0;for(u=c;u!==l;++u)h=_[u],r[h]=w[u];for(u=n.length-1;-1!==u;--u){for(h=n[u],d=o[h],f=y[h],p=y[h+1],m=f;p>m;++m)if(v[m]===d){r[d]/=b[m];break}for(g=r[d],m=f;p>m;++m)r[v[m]]-=g*b[m];r[d]=g}},numeric.ccsLUP0=function(e,t){var r,n,i,a,o,s,u,c=e[0].length-1,l=[numeric.rep([c+1],0),[],[]],h=[numeric.rep([c+1],0),[],[]],f=l[0],p=l[1],m=l[2],d=h[0],g=h[1],y=h[2],v=numeric.rep([c],0),b=numeric.rep([c],0),x=numeric.ccsLPSolve0,_=(Math.max,Math.abs),w=numeric.linspace(0,c-1),M=numeric.linspace(0,c-1),T=new numeric.ccsDFS0(c);for("undefined"==typeof t&&(t=1),r=0;c>r;++r){for(x(l,e,v,b,r,M,w,T),a=-1,o=-1,n=b.length-1;-1!==n;--n)i=b[n],r>=i||(s=_(v[w[i]]),s>a&&(o=i,a=s));for(_(v[w[r]])<t*a&&(n=w[r],a=w[o],w[r]=a,M[a]=r,w[o]=n,M[n]=o),a=f[r],o=d[r],u=v[w[r]],p[a]=w[r],m[a]=1,++a,n=b.length-1;-1!==n;--n)i=b[n],s=v[w[i]],b[n]=0,v[w[i]]=0,r>=i?(g[o]=i,y[o]=s,++o):(p[a]=w[i],m[a]=s/u,++a);f[r+1]=a,d[r+1]=o}for(n=p.length-1;-1!==n;--n)p[n]=M[p[n]];return{L:l,U:h,P:w,Pinv:M}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,t,r){var n=numeric.ccsDim(e),i=n[0],a=n[1];"undefined"==typeof t?t=numeric.linspace(0,i-1):"number"==typeof t&&(t=[t]),"undefined"==typeof r?r=numeric.linspace(0,a-1):"number"==typeof r&&(r=[r]);var o,s,u,c,l,h=t.length,f=r.length,p=numeric.rep([a],0),m=[],d=[],g=[p,m,d],y=e[0],v=e[1],b=e[2],x=numeric.rep([i],0),_=0,w=numeric.rep([i],0);for(s=0;f>s;++s){c=r[s];var M=y[c],T=y[c+1];for(o=M;T>o;++o)u=v[o],w[u]=1,x[u]=b[o];for(o=0;h>o;++o)l=t[o],w[l]&&(m[_]=o,d[_]=x[t[o]],++_);for(o=M;T>o;++o)u=v[o],w[u]=0;p[s+1]=_}return g},numeric.ccsDot=function(e,t){var r,n,i,a,o,s,u,c,l,h,f,p=e[0],m=e[1],d=e[2],g=t[0],y=t[1],v=t[2],b=numeric.ccsDim(e),x=numeric.ccsDim(t),_=b[0],w=(b[1],x[1]),M=numeric.rep([_],0),T=numeric.rep([_],0),E=Array(_),S=numeric.rep([w],0),N=[],I=[],C=[S,N,I];for(i=0;i!==w;++i){for(a=g[i],o=g[i+1],l=0,n=a;o>n;++n)for(h=y[n],f=v[n],s=p[h],u=p[h+1],r=s;u>r;++r)c=m[r],0===T[c]&&(E[l]=c,T[c]=1,l+=1),M[c]=M[c]+d[r]*f;for(a=S[i],o=a+l,S[i+1]=o,n=l-1;-1!==n;--n)f=a+n,r=E[n],N[f]=r,I[f]=M[r],T[r]=0,M[r]=0;S[i+1]=S[i]+l}return C},numeric.ccsLUPSolve=function(e,t){var r=e.L,n=e.U,i=(e.P,t[0]),a=!1;"object"!=typeof i&&(t=[[0,t.length],numeric.linspace(0,t.length-1),t],i=t[0],a=!0);var o,s,u,c,l,h,f=t[1],p=t[2],m=r[0].length-1,d=i.length-1,g=numeric.rep([m],0),y=Array(m),v=numeric.rep([m],0),b=Array(m),x=numeric.rep([d+1],0),_=[],w=[],M=numeric.ccsTSolve,T=0;for(o=0;d>o;++o){for(l=0,u=i[o],c=i[o+1],s=u;c>s;++s)h=e.Pinv[f[s]],b[l]=h,v[h]=p[s],++l;for(b.length=l,M(r,v,g,b,y),s=b.length-1;-1!==s;--s)v[b[s]]=0;if(M(n,g,v,y,b),a)return v;for(s=y.length-1;-1!==s;--s)g[y[s]]=0;for(s=b.length-1;-1!==s;--s)h=b[s],_[T]=h,w[T]=v[h],v[h]=0,++T;x[o+1]=T}return[x,_,w]},numeric.ccsbinop=function(e,t){return"undefined"==typeof t&&(t=""),numeric.compile("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\\nvar xk,yk,zk;\\nvar i,j,j0,j1,k,p=0;\\n"+t+"for(i=0;i<n;++i) {\\n  j0 = Xi[i]; j1 = Xi[i+1];\\n  for(j=j0;j!==j1;++j) {\\n    k = Xj[j];\\n    x[k] = 1;\\n    Zj[p] = k;\\n    ++p;\\n  }\\n  j0 = Yi[i]; j1 = Yi[i+1];\\n  for(j=j0;j!==j1;++j) {\\n    k = Yj[j];\\n    y[k] = Yv[j];\\n    if(x[k] === 0) {\\n      Zj[p] = k;\\n      ++p;\\n    }\\n  }\\n  Zi[i+1] = p;\\n  j0 = Xi[i]; j1 = Xi[i+1];\\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\\n  j0 = Zi[i]; j1 = Zi[i+1];\\n  for(j=j0;j!==j1;++j) {\\n    k = Zj[j];\\n    xk = x[k];\\n    yk = y[k];\\n"+e+"\\n    Zv[j] = zk;\\n  }\\n  j0 = Xi[i]; j1 = Xi[i+1];\\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\\n  j0 = Yi[i]; j1 = Yi[i+1];\\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\\n}\\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=numeric.compile("X","Y",\'if(typeof X === "number") return \'+A+\';\\nif(typeof Y === "number") return \'+B+";\\nreturn "+C+";\\n")}(),numeric.ccsScatter=function(e){var t,r=e[0],n=e[1],i=e[2],a=numeric.sup(n)+1,o=r.length,s=numeric.rep([a],0),u=Array(o),c=Array(o),l=numeric.rep([a],0);for(t=0;o>t;++t)l[n[t]]++;for(t=0;a>t;++t)s[t+1]=s[t]+l[t];var h,f,p=s.slice(0);for(t=0;o>t;++t)f=n[t],h=p[f],u[h]=r[t],c[h]=i[t],p[f]=p[f]+1;return[s,u,c]},numeric.ccsGather=function(e){var t,r,n,i,a,o=e[0],s=e[1],u=e[2],c=o.length-1,l=s.length,h=Array(l),f=Array(l),p=Array(l);for(a=0,t=0;c>t;++t)for(n=o[t],i=o[t+1],r=n;r!==i;++r)f[a]=t,h[a]=s[r],p[a]=u[r],++a;return[h,f,p]},numeric.sdim=function u(e,t,r){if("undefined"==typeof t&&(t=[]),"object"!=typeof e)return t;"undefined"==typeof r&&(r=0),r in t||(t[r]=0),e.length>t[r]&&(t[r]=e.length);var n;for(n in e)e.hasOwnProperty(n)&&u(e[n],t,r+1);return t},numeric.sclone=function c(e,t,r){"undefined"==typeof t&&(t=0),"undefined"==typeof r&&(r=numeric.sdim(e).length);var n,i=Array(e.length);if(t===r-1){for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i}for(n in e)e.hasOwnProperty(n)&&(i[n]=c(e[n],t+1,r));return i},numeric.sdiag=function(e){var t,r,n=e.length,i=Array(n);for(t=n-1;t>=1;t-=2)r=t-1,i[t]=[],i[t][t]=e[t],i[r]=[],i[r][r]=e[r];return 0===t&&(i[0]=[],i[0][0]=e[t]),i},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var t,r,n,i=[];e.length;for(t in e)if(e.hasOwnProperty(t)){n=e[t];for(r in n)n.hasOwnProperty(r)&&("object"!=typeof i[r]&&(i[r]=[]),i[r][t]=n[r])}return i},numeric.sLUP=function(e,t){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,t){var r,n,i,a,o,s,u,c=e.length,l=(t.length,numeric.stranspose(t)),h=l.length,f=Array(c);for(i=c-1;i>=0;i--){for(u=[],r=e[i],o=h-1;o>=0;o--){s=0,n=l[o];for(a in r)r.hasOwnProperty(a)&&a in n&&(s+=r[a]*n[a]);s&&(u[o]=s)}f[i]=u}return f},numeric.sdotMV=function(e,t){var r,n,i,a,o=e.length,s=Array(o);for(n=o-1;n>=0;n--){r=e[n],a=0;for(i in r)r.hasOwnProperty(i)&&t[i]&&(a+=r[i]*t[i]);a&&(s[n]=a)}return s},numeric.sdotVM=function(e,t){var r,n,i,a,o=[];for(r in e)if(e.hasOwnProperty(r)){i=t[r],a=e[r];for(n in i)i.hasOwnProperty(n)&&(o[n]||(o[n]=0),o[n]+=a*i[n])}return o},numeric.sdotVV=function(e,t){var r,n=0;for(r in e)e[r]&&t[r]&&(n+=e[r]*t[r]);return n},numeric.sdot=function(e,t){var r=numeric.sdim(e).length,n=numeric.sdim(t).length,i=1e3*r+n;switch(i){case 0:return e*t;case 1001:return numeric.sdotVV(e,t);case 2001:return numeric.sdotMV(e,t);case 1002:return numeric.sdotVM(e,t);case 2002:return numeric.sdotMM(e,t);default:throw new Error("numeric.sdot not implemented for tensors of order "+r+" and "+n)}},numeric.sscatter=function(e){var t,r,n,i,a=e[0].length,o=e.length,s=[];for(r=a-1;r>=0;--r)if(e[o-1][r]){for(i=s,n=0;o-2>n;n++)t=e[n][r],i[t]||(i[t]=[]),i=i[t];i[e[n][r]]=e[n+1][r]}return s},numeric.sgather=function l(e,t,r){"undefined"==typeof t&&(t=[]),"undefined"==typeof r&&(r=[]);var n,i,a;n=r.length;for(i in e)if(e.hasOwnProperty(i))if(r[n]=parseInt(i),a=e[i],"number"==typeof a){if(a){if(0===t.length)for(i=n+1;i>=0;--i)t[i]=[];for(i=n;i>=0;--i)t[i].push(r[i]);\nt[n+1].push(a)}}else l(a,t,r);return r.length>n&&r.pop(),t},numeric.cLU=function(e){var t,r,n,i,a,o,s=e[0],u=e[1],c=e[2],l=s.length,h=0;for(t=0;l>t;t++)s[t]>h&&(h=s[t]);h++;var f,p,m,d=Array(h),g=Array(h),y=numeric.rep([h],1/0),v=numeric.rep([h],-(1/0));for(n=0;l>n;n++)t=s[n],r=u[n],r<y[t]&&(y[t]=r),r>v[t]&&(v[t]=r);for(t=0;h-1>t;t++)v[t]>v[t+1]&&(v[t+1]=v[t]);for(t=h-1;t>=1;t--)y[t]<y[t-1]&&(y[t-1]=y[t]);var b=0,x=0;for(t=0;h>t;t++)g[t]=numeric.rep([v[t]-y[t]+1],0),d[t]=numeric.rep([t-y[t]],0),b+=t-y[t]+1,x+=v[t]-t+1;for(n=0;l>n;n++)t=s[n],g[t][u[n]-y[t]]=c[n];for(t=0;h-1>t;t++)for(i=t-y[t],f=g[t],r=t+1;y[r]<=t&&h>r;r++)if(a=t-y[r],o=v[t]-t,p=g[r],m=p[a]/f[i]){for(n=1;o>=n;n++)p[n+a]-=m*f[n+i];d[r][t-y[r]]=m}var l,_,w,f=[],p=[],M=[],T=[],E=[],S=[];for(l=0,_=0,t=0;h>t;t++){for(i=y[t],a=v[t],w=g[t],r=t;a>=r;r++)w[r-i]&&(f[l]=t,p[l]=r,M[l]=w[r-i],l++);for(w=d[t],r=i;t>r;r++)w[r-i]&&(T[_]=t,E[_]=r,S[_]=w[r-i],_++);T[_]=t,E[_]=t,S[_]=1,_++}return{U:[f,p,M],L:[T,E,S]}},numeric.cLUsolve=function(e,t){var r,n,i=e.L,a=e.U,o=numeric.clone(t),s=i[0],u=i[1],c=i[2],l=a[0],h=a[1],f=a[2],p=l.length,m=(s.length,o.length);for(n=0,r=0;m>r;r++){for(;u[n]<r;)o[r]-=c[n]*o[u[n]],n++;n++}for(n=p-1,r=m-1;r>=0;r--){for(;h[n]>r;)o[r]-=f[n]*o[h[n]],n--;o[r]/=f[n],n--}return o},numeric.cgrid=function(e,t){"number"==typeof e&&(e=[e,e]);var r,n,i,a=numeric.rep(e,-1);if("function"!=typeof t)switch(t){case"L":t=function(t,r){return t>=e[0]/2||r<e[1]/2};break;default:t=function(e,t){return!0}}for(i=0,r=1;r<e[0]-1;r++)for(n=1;n<e[1]-1;n++)t(r,n)&&(a[r][n]=i,i++);return a},numeric.cdelsq=function(e){var t,r,n,i,a,o=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(e),u=s[0],c=s[1],l=[],h=[],f=[];for(t=1;u-1>t;t++)for(r=1;c-1>r;r++)if(!(e[t][r]<0)){for(n=0;4>n;n++)i=t+o[n][0],a=r+o[n][1],e[i][a]<0||(l.push(e[t][r]),h.push(e[i][a]),f.push(-1));l.push(e[t][r]),h.push(e[t][r]),f.push(4)}return[l,h,f]},numeric.cdotMV=function(e,t){var r,n,i,a=e[0],o=e[1],s=e[2],u=a.length;for(i=0,n=0;u>n;n++)a[n]>i&&(i=a[n]);for(i++,r=numeric.rep([i],0),n=0;u>n;n++)r[a[n]]+=s[n]*t[o[n]];return r},numeric.Spline=function(e,t,r,n,i){this.x=e,this.yl=t,this.yr=r,this.kl=n,this.kr=i},numeric.Spline.prototype._at=function(e,t){var e,r,n,i,a=this.x,o=this.yl,s=this.yr,u=this.kl,c=this.kr,l=numeric.add,h=numeric.sub,f=numeric.mul;r=h(f(u[t],a[t+1]-a[t]),h(s[t+1],o[t])),n=l(f(c[t+1],a[t]-a[t+1]),h(s[t+1],o[t])),i=(e-a[t])/(a[t+1]-a[t]);var p=i*(1-i);return l(l(l(f(1-i,o[t]),f(i,s[t+1])),f(r,p*(1-i))),f(n,p*i))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var t,r,n,i=this.x,a=i.length,o=Math.floor;for(t=0,r=a-1;r-t>1;)n=o((t+r)/2),i[n]<=e?t=n:r=n;return this._at(e,t)}var s,a=e.length,u=Array(a);for(s=a-1;-1!==s;--s)u[s]=this.at(e[s]);return u},numeric.Spline.prototype.diff=function(){var e,t,r,n=this.x,i=this.yl,a=this.yr,o=this.kl,s=this.kr,u=i.length,c=o,l=s,h=Array(u),f=Array(u),p=numeric.add,m=numeric.mul,d=numeric.div,g=numeric.sub;for(e=u-1;-1!==e;--e)t=n[e+1]-n[e],r=g(a[e+1],i[e]),h[e]=d(p(m(r,6),m(o[e],-4*t),m(s[e+1],-2*t)),t*t),f[e+1]=d(p(m(r,-6),m(o[e],2*t),m(s[e+1],4*t)),t*t);return new numeric.Spline(n,c,l,h,f)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var t=[],r=this.x,n=this.yl,i=this.yr,a=this.kl,o=this.kr;"number"==typeof n[0]&&(n=[n],i=[i],a=[a],o=[o]);var s,u,c,l,h,f,p,m,d,g,y,v,b,x,_,w,M,T,E,S,N,I,C,k,A=n.length,D=r.length-1,t=Array(A),F=Math.sqrt;for(s=0;s!==A;++s){for(l=n[s],h=i[s],f=a[s],p=o[s],m=[],u=0;u!==D;u++){for(u>0&&h[u]*l[u]<0&&m.push(r[u]),w=r[u+1]-r[u],M=r[u],y=l[u],v=h[u+1],d=f[u]/w,g=p[u+1]/w,_=e(d-g+3*(y-v))+12*g*y,b=g+3*y+2*d-3*v,x=3*(g+d+2*(y-v)),0>=_?(E=b/x,T=E>r[u]&&E<r[u+1]?[r[u],E,r[u+1]]:[r[u],r[u+1]]):(E=(b-F(_))/x,S=(b+F(_))/x,T=[r[u]],E>r[u]&&E<r[u+1]&&T.push(E),S>r[u]&&S<r[u+1]&&T.push(S),T.push(r[u+1])),I=T[0],E=this._at(I,u),c=0;c<T.length-1;c++)if(C=T[c+1],S=this._at(C,u),0!==E)if(0===S||E*S>0)I=C,E=S;else{for(var P=0;;){if(k=(E*C-S*I)/(E-S),I>=k||k>=C)break;if(N=this._at(k,u),N*S>0)C=k,S=N,-1===P&&(E*=.5),P=-1;else{if(!(N*E>0))break;I=k,E=N,1===P&&(S*=.5),P=1}}m.push(k),I=T[c+1],E=this._at(I,u)}else m.push(I),I=C,E=S;0===S&&m.push(C)}t[s]=m}return"number"==typeof this.yl[0]?t[0]:t},numeric.spline=function(e,t,r,n){var i,a=e.length,o=[],s=[],u=[],c=numeric.sub,l=numeric.mul,h=numeric.add;for(i=a-2;i>=0;i--)s[i]=e[i+1]-e[i],u[i]=c(t[i+1],t[i]);("string"==typeof r||"string"==typeof n)&&(r=n="periodic");var f=[[],[],[]];switch(typeof r){case"undefined":o[0]=l(3/(s[0]*s[0]),u[0]),f[0].push(0,0),f[1].push(0,1),f[2].push(2/s[0],1/s[0]);break;case"string":o[0]=h(l(3/(s[a-2]*s[a-2]),u[a-2]),l(3/(s[0]*s[0]),u[0])),f[0].push(0,0,0),f[1].push(a-2,0,1),f[2].push(1/s[a-2],2/s[a-2]+2/s[0],1/s[0]);break;default:o[0]=r,f[0].push(0),f[1].push(0),f[2].push(1)}for(i=1;a-1>i;i++)o[i]=h(l(3/(s[i-1]*s[i-1]),u[i-1]),l(3/(s[i]*s[i]),u[i])),f[0].push(i,i,i),f[1].push(i-1,i,i+1),f[2].push(1/s[i-1],2/s[i-1]+2/s[i],1/s[i]);switch(typeof n){case"undefined":o[a-1]=l(3/(s[a-2]*s[a-2]),u[a-2]),f[0].push(a-1,a-1),f[1].push(a-2,a-1),f[2].push(1/s[a-2],2/s[a-2]);break;case"string":f[1][f[1].length-1]=0;break;default:o[a-1]=n,f[0].push(a-1),f[1].push(a-1),f[2].push(1)}o="number"!=typeof o[0]?numeric.transpose(o):[o];var p=Array(o.length);if("string"==typeof r)for(i=p.length-1;-1!==i;--i)p[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(f)),o[i]),p[i][a-1]=p[i][0];else for(i=p.length-1;-1!==i;--i)p[i]=numeric.cLUsolve(numeric.cLU(f),o[i]);return p="number"==typeof t[0]?p[0]:numeric.transpose(p),new numeric.Spline(e,t,t,p,p)},numeric.fftpow2=function h(e,t){var r=e.length;if(1!==r){var n,i,a=Math.cos,o=Math.sin,s=Array(r/2),u=Array(r/2),c=Array(r/2),l=Array(r/2);for(i=r/2,n=r-1;-1!==n;--n)--i,c[i]=e[n],l[i]=t[n],--n,s[i]=e[n],u[i]=t[n];h(s,u),h(c,l),i=r/2;var f,p,m,d=-6.283185307179586/r;for(n=r-1;-1!==n;--n)--i,-1===i&&(i=r/2-1),f=d*n,p=a(f),m=o(f),e[n]=s[i]+p*c[i]-m*l[i],t[n]=u[i]+p*l[i]+m*c[i]}},numeric._ifftpow2=function f(e,t){var r=e.length;if(1!==r){var n,i,a=Math.cos,o=Math.sin,s=Array(r/2),u=Array(r/2),c=Array(r/2),l=Array(r/2);for(i=r/2,n=r-1;-1!==n;--n)--i,c[i]=e[n],l[i]=t[n],--n,s[i]=e[n],u[i]=t[n];f(s,u),f(c,l),i=r/2;var h,p,m,d=6.283185307179586/r;for(n=r-1;-1!==n;--n)--i,-1===i&&(i=r/2-1),h=d*n,p=a(h),m=o(h),e[n]=s[i]+p*c[i]-m*l[i],t[n]=u[i]+p*l[i]+m*c[i]}},numeric.ifftpow2=function(e,t){numeric._ifftpow2(e,t),numeric.diveq(e,e.length),numeric.diveq(t,t.length)},numeric.convpow2=function(e,t,r,n){numeric.fftpow2(e,t),numeric.fftpow2(r,n);var i,a,o,s,u,c=e.length;for(i=c-1;-1!==i;--i)a=e[i],s=t[i],o=r[i],u=n[i],e[i]=a*o-s*u,t[i]=a*u+s*o;numeric.ifftpow2(e,t)},numeric.T.prototype.fft=function(){var e,t,r=this.x,n=this.y,i=r.length,a=Math.log,o=a(2),s=Math.ceil(a(2*i-1)/o),u=Math.pow(2,s),c=numeric.rep([u],0),l=numeric.rep([u],0),h=Math.cos,f=Math.sin,p=-3.141592653589793/i,m=numeric.rep([u],0),d=numeric.rep([u],0);Math.floor(i/2);for(e=0;i>e;e++)m[e]=r[e];if("undefined"!=typeof n)for(e=0;i>e;e++)d[e]=n[e];for(c[0]=1,e=1;u/2>=e;e++)t=p*e*e,c[e]=h(t),l[e]=f(t),c[u-e]=h(t),l[u-e]=f(t);var g=new numeric.T(m,d),y=new numeric.T(c,l);return g=g.mul(y),numeric.convpow2(g.x,g.y,numeric.clone(y.x),numeric.neg(y.y)),g=g.mul(y),g.x.length=i,g.y.length=i,g},numeric.T.prototype.ifft=function(){var e,t,r=this.x,n=this.y,i=r.length,a=Math.log,o=a(2),s=Math.ceil(a(2*i-1)/o),u=Math.pow(2,s),c=numeric.rep([u],0),l=numeric.rep([u],0),h=Math.cos,f=Math.sin,p=3.141592653589793/i,m=numeric.rep([u],0),d=numeric.rep([u],0);Math.floor(i/2);for(e=0;i>e;e++)m[e]=r[e];if("undefined"!=typeof n)for(e=0;i>e;e++)d[e]=n[e];for(c[0]=1,e=1;u/2>=e;e++)t=p*e*e,c[e]=h(t),l[e]=f(t),c[u-e]=h(t),l[u-e]=f(t);var g=new numeric.T(m,d),y=new numeric.T(c,l);return g=g.mul(y),numeric.convpow2(g.x,g.y,numeric.clone(y.x),numeric.neg(y.y)),g=g.mul(y),g.x.length=i,g.y.length=i,g.div(i)},numeric.gradient=function(e,t){var r=t.length,n=e(t);if(isNaN(n))throw new Error("gradient: f(x) is a NaN!");var i,a,o,s,u,c,l,h,f,p,m=Math.max,d=numeric.clone(t),g=Array(r),m=(numeric.div,numeric.sub,Math.max),y=.001,v=Math.abs,b=Math.min,x=0;for(i=0;r>i;i++)for(var _=m(1e-6*n,1e-8);;){if(++x,x>20)throw new Error("Numerical gradient fails");if(d[i]=t[i]+_,a=e(d),d[i]=t[i]-_,o=e(d),d[i]=t[i],isNaN(a)||isNaN(o))_/=16;else{if(g[i]=(a-o)/(2*_),u=t[i]-_,c=t[i],l=t[i]+_,h=(a-n)/_,f=(n-o)/_,p=m(v(g[i]),v(n),v(a),v(o),v(u),v(c),v(l),1e-8),s=b(m(v(h-g[i]),v(f-g[i]),v(h-f))/p,_/p),!(s>y))break;_/=16}}return g},numeric.uncmin=function(e,t,r,n,i,a,o){var s=numeric.gradient;"undefined"==typeof o&&(o={}),"undefined"==typeof r&&(r=1e-8),"undefined"==typeof n&&(n=function(t){return s(e,t)}),"undefined"==typeof i&&(i=1e3),t=numeric.clone(t);var u,c,l=t.length,h=e(t);if(isNaN(h))throw new Error("uncmin: f(x0) is a NaN!");var f=Math.max,p=numeric.norm2;r=f(r,numeric.epsilon);var m,d,g,y,v,b,x,_,w,M,T=o.Hinv||numeric.identity(l),E=numeric.dot,S=(numeric.inv,numeric.sub),N=numeric.add,I=numeric.tensor,C=numeric.div,k=numeric.mul,A=numeric.all,D=numeric.isFinite,F=numeric.neg,P=0,O="";for(d=n(t);i>P;){if("function"==typeof a&&a(P,t,h,d,T)){O="Callback returned true";break}if(!A(D(d))){O="Gradient has Infinity or NaN";break}if(m=F(E(T,d)),!A(D(m))){O="Search direction has Infinity or NaN";break}if(M=p(m),r>M){O="Newton step smaller than tol";break}for(w=1,c=E(d,m),v=t;i>P&&!(r>w*M)&&(y=k(m,w),v=N(t,y),u=e(v),u-h>=.1*w*c||isNaN(u));)w*=.5,++P;if(r>w*M){O="Line search step size smaller than tol";break}if(P===i){O="maxit reached during line search";break}g=n(v),b=S(g,d),_=E(b,y),x=E(T,b),T=S(N(T,k((_+E(b,x))/(_*_),I(y,y))),C(N(I(x,y),I(y,x)),_)),t=v,h=u,d=g,++P}return{solution:t,f:h,gradient:d,invHessian:T,iterations:P,message:O}},numeric.Dopri=function(e,t,r,n,i,a,o){this.x=e,this.y=t,this.f=r,this.ymid=n,this.iterations=i,this.events=o,this.message=a},numeric.Dopri.prototype._at=function(e,t){function r(e){return e*e}var n,i,a,o,s,u,e,c,l,h,f,p=this,m=p.x,d=p.y,g=p.f,y=p.ymid,v=(m.length,Math.floor,.5),b=numeric.add,x=numeric.mul,_=numeric.sub;return n=m[t],i=m[t+1],o=d[t],s=d[t+1],c=i-n,a=n+v*c,u=y[t],l=_(g[t],x(o,1/(n-a)+2/(n-i))),h=_(g[t+1],x(s,1/(i-a)+2/(i-n))),f=[r(e-i)*(e-a)/r(n-i)/(n-a),r(e-n)*r(e-i)/r(n-a)/r(i-a),r(e-n)*(e-a)/r(i-n)/(i-a),(e-n)*r(e-i)*(e-a)/r(n-i)/(n-a),(e-i)*r(e-n)*(e-a)/r(n-i)/(i-a)],b(b(b(b(x(o,f[0]),x(u,f[1])),x(s,f[2])),x(l,f[3])),x(h,f[4]))},numeric.Dopri.prototype.at=function(e){var t,r,n,i=Math.floor;if("number"!=typeof e){var a=e.length,o=Array(a);for(t=a-1;-1!==t;--t)o[t]=this.at(e[t]);return o}var s=this.x;for(t=0,r=s.length-1;r-t>1;)n=i(.5*(t+r)),s[n]<=e?t=n:r=n;return this._at(e,t)},numeric.dopri=function(e,t,r,n,i,a,o){"undefined"==typeof i&&(i=1e-6),"undefined"==typeof a&&(a=1e3);var s,u,c,l,h,f,p,m,d,g,y,v,b,x=[e],_=[r],w=[n(e,r)],M=[],T=.2,E=[.075,.225],S=[44/45,-56/15,32/9],N=[19372/6561,-25360/2187,64448/6561,-212/729],I=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],C=[35/384,0,500/1113,125/192,-2187/6784,11/84],k=[.10013431883002395,0,.3918321794184259,-0.02982460176594817,.05893268337240795,-0.04497888809104361,.023904308236133973],A=[.2,.3,.8,8/9,1,1],D=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],F=0,P=(t-e)/10,O=0,L=numeric.add,q=numeric.mul,V=(Math.max,Math.min),j=Math.abs,R=numeric.norminf,z=Math.pow,B=numeric.any,$=numeric.lt,G=numeric.and,U=(numeric.sub,new numeric.Dopri(x,_,w,M,-1,""));for("function"==typeof o&&(y=o(e,r));t>e&&a>O;)if(++O,e+P>t&&(P=t-e),s=n(e+A[0]*P,L(r,q(T*P,w[F]))),u=n(e+A[1]*P,L(L(r,q(E[0]*P,w[F])),q(E[1]*P,s))),c=n(e+A[2]*P,L(L(L(r,q(S[0]*P,w[F])),q(S[1]*P,s)),q(S[2]*P,u))),l=n(e+A[3]*P,L(L(L(L(r,q(N[0]*P,w[F])),q(N[1]*P,s)),q(N[2]*P,u)),q(N[3]*P,c))),h=n(e+A[4]*P,L(L(L(L(L(r,q(I[0]*P,w[F])),q(I[1]*P,s)),q(I[2]*P,u)),q(I[3]*P,c)),q(I[4]*P,l))),d=L(L(L(L(L(r,q(w[F],P*C[0])),q(u,P*C[2])),q(c,P*C[3])),q(l,P*C[4])),q(h,P*C[5])),f=n(e+P,d),p=L(L(L(L(L(q(w[F],P*D[0]),q(u,P*D[2])),q(c,P*D[3])),q(l,P*D[4])),q(h,P*D[5])),q(f,P*D[6])),g="number"==typeof p?j(p):R(p),g>i){if(P=.2*P*z(i/g,.25),e+P===e){U.msg="Step size became too small";break}}else{if(M[F]=L(L(L(L(L(L(r,q(w[F],P*k[0])),q(u,P*k[2])),q(c,P*k[3])),q(l,P*k[4])),q(h,P*k[5])),q(f,P*k[6])),++F,x[F]=e+P,_[F]=d,w[F]=f,"function"==typeof o){var Y,X,Z=e,W=e+.5*P;if(v=o(W,M[F-1]),b=G($(y,0),$(0,v)),B(b)||(Z=W,W=e+P,y=v,v=o(W,d),b=G($(y,0),$(0,v))),B(b)){for(var Q,H,J=0,K=1,ee=1;;){if("number"==typeof y)X=(ee*v*Z-K*y*W)/(ee*v-K*y);else for(X=W,m=y.length-1;-1!==m;--m)y[m]<0&&v[m]>0&&(X=V(X,(ee*v[m]*Z-K*y[m]*W)/(ee*v[m]-K*y[m])));if(Z>=X||X>=W)break;Y=U._at(X,F-1),H=o(X,Y),Q=G($(y,0),$(0,H)),B(Q)?(W=X,v=H,b=Q,ee=1,-1===J?K*=.5:K=1,J=-1):(Z=X,y=H,K=1,1===J?ee*=.5:ee=1,J=1)}return d=U._at(.5*(e+X),F-1),U.f[F]=n(X,Y),U.x[F]=X,U.y[F]=Y,U.ymid[F-1]=d,U.events=b,U.iterations=O,U}}e+=P,r=d,y=v,P=V(.8*P*z(i/g,.25),4*P)}return U.iterations=O,U},numeric.LU=function(e,t){t=t||!1;var r,n,i,a,o,s,u,c,l,h=Math.abs,f=e.length,p=f-1,m=new Array(f);for(t||(e=numeric.clone(e)),i=0;f>i;++i){for(u=i,s=e[i],l=h(s[i]),n=i+1;f>n;++n)a=h(e[n][i]),a>l&&(l=a,u=n);for(m[i]=u,u!=i&&(e[i]=e[u],e[u]=s,s=e[i]),o=s[i],r=i+1;f>r;++r)e[r][i]/=o;for(r=i+1;f>r;++r){for(c=e[r],n=i+1;p>n;++n)c[n]-=c[i]*s[n],++n,c[n]-=c[i]*s[n];n===p&&(c[n]-=c[i]*s[n])}}return{LU:e,P:m}},numeric.LUsolve=function(e,t){var r,n,i,a,o,s=e.LU,u=s.length,c=numeric.clone(t),l=e.P;for(r=u-1;-1!==r;--r)c[r]=t[r];for(r=0;u>r;++r)for(i=l[r],l[r]!==r&&(o=c[r],c[r]=c[i],c[i]=o),a=s[r],n=0;r>n;++n)c[r]-=c[n]*a[n];for(r=u-1;r>=0;--r){for(a=s[r],n=r+1;u>n;++n)c[r]-=c[n]*a[n];c[r]/=a[r]}return c},numeric.solve=function(e,t,r){return numeric.LUsolve(numeric.LU(e,r),t)},numeric.echelonize=function(e){var t,r,n,i,a,o,s,u,c=numeric.dim(e),l=c[0],h=c[1],f=numeric.identity(l),p=Array(l),m=Math.abs,d=numeric.diveq;for(e=numeric.clone(e),t=0;l>t;++t){for(n=0,a=e[t],o=f[t],r=1;h>r;++r)m(a[n])<m(a[r])&&(n=r);for(p[t]=n,d(o,a[n]),d(a,a[n]),r=0;l>r;++r)if(r!==t){for(s=e[r],u=s[n],i=h-1;-1!==i;--i)s[i]-=a[i]*u;for(s=f[r],i=l-1;-1!==i;--i)s[i]-=o[i]*u}}return{I:f,A:e,P:p}},numeric.__solveLP=function(e,t,r,n,i,a,o){var s,u,c,l,h=numeric.sum,f=(numeric.log,numeric.mul),p=numeric.sub,m=numeric.dot,d=numeric.div,g=numeric.add,y=e.length,v=r.length,b=!1,x=0,_=1,w=(numeric.transpose(t),numeric.svd,numeric.transpose),M=(numeric.leq,Math.sqrt),T=Math.abs,E=(numeric.muleq,numeric.norminf,numeric.any,Math.min),S=numeric.all,N=numeric.gt,I=Array(y),C=Array(v),k=(numeric.rep([v],1),numeric.solve),A=p(r,m(t,a)),D=m(e,e);for(c=x;i>c;++c){var F,P;for(F=v-1;-1!==F;--F)C[F]=d(t[F],A[F]);var O=w(C);for(F=y-1;-1!==F;--F)I[F]=h(O[F]);_=.25*T(D/m(e,I));var L=100*M(D/m(I,I));for((!isFinite(_)||_>L)&&(_=L),l=g(e,f(_,I)),u=m(O,C),F=y-1;-1!==F;--F)u[F][F]+=1;P=k(u,d(l,_),!0);var q=d(A,m(t,P)),V=1;for(F=v-1;-1!==F;--F)q[F]<0&&(V=E(V,-.999*q[F]));if(s=p(a,f(P,V)),A=p(r,m(t,s)),!S(N(A,0)))return{solution:a,message:"",iterations:c};if(a=s,n>_)return{solution:s,message:"",iterations:c};if(o){var j=m(e,l),R=m(t,l);for(b=!0,F=v-1;-1!==F;--F)if(j*R[F]<0){b=!1;break}}else b=a[y-1]>=0?!1:!0;if(b)return{solution:s,message:"Unbounded",iterations:c}}return{solution:a,message:"maximum iteration count exceeded",iterations:c}},numeric._solveLP=function(e,t,r,n,i){var a,o=e.length,s=r.length,u=(numeric.sum,numeric.log,numeric.mul,numeric.sub),c=numeric.dot,l=(numeric.div,numeric.add,numeric.rep([o],0).concat([1])),h=numeric.rep([s,1],-1),f=numeric.blockMatrix([[t,h]]),p=r,a=numeric.rep([o],0).concat(Math.max(0,numeric.sup(numeric.neg(r)))+1),m=numeric.__solveLP(l,f,p,n,i,a,!1),d=numeric.clone(m.solution);d.length=o;var g=numeric.inf(u(r,c(t,d)));if(0>g)return{solution:NaN,message:"Infeasible",iterations:m.iterations};var y=numeric.__solveLP(e,t,r,n,i-m.iterations,d,!0);return y.iterations+=m.iterations,y},numeric.solveLP=function(e,t,r,n,i,a,o){if("undefined"==typeof o&&(o=1e3),"undefined"==typeof a&&(a=numeric.epsilon),"undefined"==typeof n)return numeric._solveLP(e,t,r,a,o);var s,u=n.length,c=n[0].length,l=t.length,h=numeric.echelonize(n),f=numeric.rep([c],0),p=h.P,m=[];for(s=p.length-1;-1!==s;--s)f[p[s]]=1;for(s=c-1;-1!==s;--s)0===f[s]&&m.push(s);var d=numeric.getRange,g=numeric.linspace(0,u-1),y=numeric.linspace(0,l-1),v=d(n,g,m),b=d(t,y,p),x=d(t,y,m),_=numeric.dot,w=numeric.sub,M=_(b,h.I),T=w(x,_(M,v)),E=w(r,_(M,i)),S=Array(p.length),N=Array(m.length);for(s=p.length-1;-1!==s;--s)S[s]=e[p[s]];for(s=m.length-1;-1!==s;--s)N[s]=e[m[s]];var I=w(N,_(S,_(h.I,v))),C=numeric._solveLP(I,T,E,a,o),k=C.solution;if(k!==k)return C;var A=_(h.I,w(i,_(v,k))),D=Array(e.length);for(s=p.length-1;-1!==s;--s)D[p[s]]=A[s];for(s=m.length-1;-1!==s;--s)D[m[s]]=k[s];return{solution:D,message:C.message,iterations:C.iterations}},numeric.MPStoLP=function(e){function t(t){throw new Error("MPStoLP: "+t+"\\nLine "+r+": "+e[r]+"\\nCurrent state: "+s[o]+"\\n")}e instanceof String&&e.split("\\n");var r,n,i,a,o=0,s=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],u=e.length,c=0,l={},h=[],f=0,p={},m=0,d=[],g=[],y=[];for(r=0;u>r;++r){i=e[r];var v=i.match(/\\S*/g),b=[];for(n=0;n<v.length;++n)""!==v[n]&&b.push(v[n]);if(0!==b.length){for(n=0;n<s.length&&i.substr(0,s[n].length)!==s[n];++n);if(n<s.length){if(o=n,1===n&&(a=b[1]),6===n)return{name:a,c:d,A:numeric.transpose(g),b:y,rows:l,vars:p}}else switch(o){case 0:case 1:t("Unexpected line");case 2:switch(b[0]){case"N":0===c?c=b[1]:t("Two or more N rows");break;case"L":l[b[1]]=f,h[f]=1,y[f]=0,++f;break;case"G":l[b[1]]=f,h[f]=-1,y[f]=0,++f;break;case"E":l[b[1]]=f,h[f]=0,y[f]=0,++f;break;default:t("Parse error "+numeric.prettyPrint(b))}break;case 3:p.hasOwnProperty(b[0])||(p[b[0]]=m,d[m]=0,g[m]=numeric.rep([f],0),++m);var x=p[b[0]];for(n=1;n<b.length;n+=2)if(b[n]!==c){var _=l[b[n]];g[x][_]=(h[_]<0?-1:1)*parseFloat(b[n+1])}else d[x]=parseFloat(b[n+1]);break;case 4:for(n=1;n<b.length;n+=2)y[l[b[n]]]=(h[l[b[n]]]<0?-1:1)*parseFloat(b[n+1]);break;case 5:break;case 6:t("Internal error")}}}t("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,t,r,n,i,a,o){function s(e){var t,n,i=this,a=e.length,o=0,s=i.i=i.j=i.m=0;for(i.S=[],i.c=[],a||(e=[a++]);r>o;)i.S[o]=o++;for(o=0;r>o;o++)t=i.S[o],s=l(s+t+e[o%a]),n=i.S[s],i.S[o]=n,i.S[s]=t;i.g=function(e){var t=i.S,n=l(i.i+1),a=t[n],o=l(i.j+a),s=t[o];t[n]=s,t[o]=a;for(var u=t[l(a+s)];--e;)n=l(n+1),a=t[n],o=l(o+a),s=t[o],t[n]=s,t[o]=a,u=u*r+t[l(a+s)];return i.i=n,i.j=o,u},i.g(r)}function u(e,t,r,n,i){if(r=[],i=typeof e,t&&"object"==i)for(n in e)if(n.indexOf("S")<5)try{r.push(u(e[n],t-1))}catch(a){}return r.length?r:e+("string"!=i?"\\x00":"")}function c(e,t,r,n){for(e+="",r=0,n=0;n<e.length;n++)t[l(n)]=l((r^=19*t[l(n)])+e.charCodeAt(n));e="";for(n in t)e+=String.fromCharCode(t[n]);return e}function l(e){return e&r-1}t.seedrandom=function(l,h){var f,p=[];return l=c(u(h?[l,e]:arguments.length?l:[(new Date).getTime(),e,window],3),p),f=new s(p),c(f.S,e),t.random=function(){for(var e=f.g(n),t=o,s=0;i>e;)e=(e+s)*r,t*=r,s=f.g(1);for(;e>=a;)e/=2,t/=2,s>>>=1;return(e+s)/t},l},o=t.pow(r,n),i=t.pow(2,i),a=2*i,c(t.random(),e)}([],numeric.seedrandom,256,6,52),function(e){function t(e){if("object"!=typeof e)return e;var r,n=[],i=e.length;for(r=0;i>r;r++)n[r+1]=t(e[r]);return n}function r(e){if("object"!=typeof e)return e;var t,n=[],i=e.length;for(t=1;i>t;t++)n[t-1]=r(e[t]);return n}function n(e,t,r){var n,i,a,o,s;for(a=1;r>=a;a+=1){for(e[a][a]=1/e[a][a],s=-e[a][a],n=1;a>n;n+=1)e[n][a]=s*e[n][a];if(o=a+1,o>r)break;for(i=o;r>=i;i+=1)for(s=e[a][i],e[a][i]=0,n=1;a>=n;n+=1)e[n][i]=e[n][i]+s*e[n][a]}}function i(e,t,r,n){var i,a,o,s;for(a=1;r>=a;a+=1){for(s=0,i=1;a>i;i+=1)s+=e[i][a]*n[i];n[a]=(n[a]-s)/e[a][a]}for(o=1;r>=o;o+=1)for(a=r+1-o,n[a]=n[a]/e[a][a],s=-n[a],i=1;a>i;i+=1)n[i]=n[i]+s*e[i][a]}function a(e,t,r,n){var i,a,o,s,u,c;for(a=1;r>=a;a+=1){if(n[1]=a,c=0,o=a-1,1>o){if(c=e[a][a]-c,0>=c)break;e[a][a]=Math.sqrt(c)}else{for(s=1;o>=s;s+=1){for(u=e[s][a],i=1;s>i;i+=1)u-=e[i][a]*e[i][s];u/=e[s][s],e[s][a]=u,c+=u*u}if(c=e[a][a]-c,0>=c)break;e[a][a]=Math.sqrt(c)}n[1]=0}}function o(e,t,r,o,s,u,c,l,h,f,p,m,d,g,y,v){function b(){for(g[1]=g[1]+1,S=F,T=1;f>=T;T+=1){for(S+=1,j=-l[T],E=1;o>=E;E+=1)j+=c[E][T]*s[E];if(Math.abs(j)<X&&(j=0),T>p)y[S]=j;else if(y[S]=-Math.abs(j),j>0){for(E=1;o>=E;E+=1)c[E][T]=-c[E][T];l[T]=-l[T]}}for(T=1;d>=T;T+=1)y[F+m[T]]=0;for(O=0,V=0,T=1;f>=T;T+=1)y[F+T]<V*y[q+T]&&(O=T,V=y[F+T]/y[q+T]);return 0===O?999:0}function x(){for(T=1;o>=T;T+=1){for(j=0,E=1;o>=E;E+=1)j+=e[E][T]*c[E][O];y[T]=j}for(N=k,T=1;o>=T;T+=1)y[N+T]=0;for(E=d+1;o>=E;E+=1)for(T=1;o>=T;T+=1)y[N+T]=y[N+T]+e[T][E]*y[E];for(U=!0,T=d;T>=1;T-=1){for(j=y[T],S=D+T*(T+3)/2,N=S-T,E=T+1;d>=E;E+=1)j-=y[S]*y[A+E],S+=E;if(j/=y[N],y[A+T]=j,m[T]<p)break;if(0>j)break;U=!1,C=T}if(!U)for(R=y[P+C]/y[A+C],T=1;d>=T&&!(m[T]<p)&&!(y[A+T]<0);T+=1)V=y[P+T]/y[A+T],R>V&&(R=V,C=T);for(j=0,T=k+1;k+o>=T;T+=1)j+=y[T]*y[T];if(Math.abs(j)<=X){if(U)return v[1]=1,999;for(T=1;d>=T;T+=1)y[P+T]=y[P+T]-R*y[A+T];return y[P+d+1]=y[P+d+1]+R,700}for(j=0,T=1;o>=T;T+=1)j+=y[k+T]*c[T][O];for(z=-y[F+O]/j,Y=!0,U||z>R&&(z=R,Y=!1),T=1;o>=T;T+=1)s[T]=s[T]+z*y[k+T],Math.abs(s[T])<X&&(s[T]=0);for(u[1]=u[1]+z*j*(z/2+y[P+d+1]),T=1;d>=T;T+=1)y[P+T]=y[P+T]-z*y[A+T];if(y[P+d+1]=y[P+d+1]+z,!Y){for(j=-l[O],E=1;o>=E;E+=1)j+=s[E]*c[E][O];if(O>p)y[F+O]=j;else if(y[F+O]=-Math.abs(j),j>0){for(E=1;o>=E;E+=1)c[E][O]=-c[E][O];l[O]=-l[O]}return 700}for(d+=1,m[d]=O,S=D+(d-1)*d/2+1,T=1;d-1>=T;T+=1)y[S]=y[T],S+=1;if(d===o)y[S]=y[o];else{for(T=o;T>=d+1&&0!==y[T]&&(B=Math.max(Math.abs(y[T-1]),Math.abs(y[T])),$=Math.min(Math.abs(y[T-1]),Math.abs(y[T])),V=y[T-1]>=0?Math.abs(B*Math.sqrt(1+$*$/(B*B))):-Math.abs(B*Math.sqrt(1+$*$/(B*B))),B=y[T-1]/V,$=y[T]/V,1!==B);T-=1)if(0===B)for(y[T-1]=$*V,E=1;o>=E;E+=1)V=e[E][T-1],e[E][T-1]=e[E][T],e[E][T]=V;else for(y[T-1]=V,G=$/(1+B),E=1;o>=E;E+=1)V=B*e[E][T-1]+$*e[E][T],e[E][T]=G*(e[E][T-1]+V)-e[E][T],e[E][T-1]=V;y[S]=y[d]}return 0}function _(){if(S=D+C*(C+1)/2+1,N=S+C,0===y[N])return 798;if(B=Math.max(Math.abs(y[N-1]),Math.abs(y[N])),$=Math.min(Math.abs(y[N-1]),Math.abs(y[N])),V=y[N-1]>=0?Math.abs(B*Math.sqrt(1+$*$/(B*B))):-Math.abs(B*Math.sqrt(1+$*$/(B*B))),B=y[N-1]/V,$=y[N]/V,1===B)return 798;if(0===B){for(T=C+1;d>=T;T+=1)V=y[N-1],y[N-1]=y[N],y[N]=V,N+=T;for(T=1;o>=T;T+=1)V=e[T][C],e[T][C]=e[T][C+1],e[T][C+1]=V}else{for(G=$/(1+B),T=C+1;d>=T;T+=1)V=B*y[N-1]+$*y[N],y[N]=G*(y[N-1]+V)-y[N],y[N-1]=V,N+=T;for(T=1;o>=T;T+=1)V=B*e[T][C]+$*e[T][C+1],e[T][C+1]=G*(e[T][C]+V)-e[T][C+1],e[T][C]=V}return 0}function w(){for(N=S-C,T=1;C>=T;T+=1)y[N]=y[S],S+=1,N+=1;return y[P+C]=y[P+C+1],m[C]=m[C+1],C+=1,d>C?797:0}function M(){return y[P+d]=y[P+d+1],y[P+d+1]=0,m[d]=0,d-=1,g[2]=g[2]+1,0}var T,E,S,N,I,C,k,A,D,F,P,O,L,q,V,j,R,z,B,$,G,U,Y,X,Z,W,Q;L=Math.min(o,f),S=2*o+L*(L+5)/2+2*f+1,X=1e-60;do X+=X,Z=1+.1*X,W=1+.2*X;while(1>=Z||1>=W);for(T=1;o>=T;T+=1)y[T]=t[T];for(T=o+1;S>=T;T+=1)y[T]=0;for(T=1;f>=T;T+=1)m[T]=0;if(I=[],0===v[1]){if(a(e,r,o,I),0!==I[1])return void(v[1]=2);i(e,r,o,t),n(e,r,o)}else{for(E=1;o>=E;E+=1)for(s[E]=0,T=1;E>=T;T+=1)s[E]=s[E]+e[T][E]*t[T];for(E=1;o>=E;E+=1)for(t[E]=0,T=E;o>=T;T+=1)t[E]=t[E]+e[E][T]*s[T]}for(u[1]=0,E=1;o>=E;E+=1)for(s[E]=t[E],u[1]=u[1]+y[E]*s[E],y[E]=0,T=E+1;o>=T;T+=1)e[T][E]=0;for(u[1]=-u[1]/2,v[1]=0,k=o,A=k+o,P=A+L,D=P+L+1,F=D+L*(L+1)/2,q=F+f,T=1;f>=T;T+=1){for(j=0,E=1;o>=E;E+=1)j+=c[E][T]*c[E][T];y[q+T]=Math.sqrt(j)}for(d=0,g[1]=0,g[2]=0,Q=0;;){if(Q=b(),999===Q)return;for(;;){if(Q=x(),0===Q)break;if(999===Q)return;if(700===Q)if(C===d)M();else{for(;;)if(_(),Q=w(),797!==Q)break;M()}}}}function s(e,n,i,a,s,u){e=t(e),n=t(n),i=t(i);var c,l,h,f,p,m,d=[],g=[],y=[],v=[],b=[];if(s=s||0,u=u?t(u):[void 0,0],a=a?t(a):[],l=e.length-1,h=i[1].length-1,!a)for(c=1;h>=c;c+=1)a[c]=0;for(c=1;h>=c;c+=1)g[c]=0;for(f=0,p=Math.min(l,h),c=1;l>=c;c+=1)y[c]=0;for(d[1]=0,c=1;2*l+p*(p+5)/2+2*h+1>=c;c+=1)v[c]=0;for(c=1;2>=c;c+=1)b[c]=0;return o(e,n,l,l,y,d,i,a,l,h,s,g,f,b,v,u),m="",1===u[1]&&(m="constraints are inconsistent, no solution!"),2===u[1]&&(m="matrix D in quadratic function is not positive definite!"),{solution:r(y),value:r(d),unconstrained_solution:r(n),iterations:r(b),iact:r(g),message:m}}e.solveQP=s}(numeric),numeric.svd=function(e){function t(e,t){return e=Math.abs(e),t=Math.abs(t),e>t?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var r,n=numeric.epsilon,i=1e-64/n,a=50,o=0,s=0,u=0,c=0,l=0,h=numeric.clone(e),f=h.length,p=h[0].length;if(p>f)throw"Need more rows than columns";var m=new Array(p),d=new Array(p);for(s=0;p>s;s++)m[s]=d[s]=0;var g=numeric.rep([p,p],0),y=0,v=0,b=0,x=0,_=0,w=0,M=0;for(s=0;p>s;s++){for(m[s]=v,M=0,l=s+1,u=s;f>u;u++)M+=h[u][s]*h[u][s];if(i>=M)v=0;else for(y=h[s][s],v=Math.sqrt(M),y>=0&&(v=-v),b=y*v-M,h[s][s]=y-v,u=l;p>u;u++){for(M=0,c=s;f>c;c++)M+=h[c][s]*h[c][u];for(y=M/b,c=s;f>c;c++)h[c][u]+=y*h[c][s]}for(d[s]=v,M=0,u=l;p>u;u++)M+=h[s][u]*h[s][u];if(i>=M)v=0;else{for(y=h[s][s+1],v=Math.sqrt(M),y>=0&&(v=-v),b=y*v-M,h[s][s+1]=y-v,u=l;p>u;u++)m[u]=h[s][u]/b;for(u=l;f>u;u++){for(M=0,c=l;p>c;c++)M+=h[u][c]*h[s][c];for(c=l;p>c;c++)h[u][c]+=M*m[c]}}_=Math.abs(d[s])+Math.abs(m[s]),_>x&&(x=_)}for(s=p-1;-1!=s;s+=-1){if(0!=v){for(b=v*h[s][s+1],u=l;p>u;u++)g[u][s]=h[s][u]/b;for(u=l;p>u;u++){for(M=0,c=l;p>c;c++)M+=h[s][c]*g[c][u];for(c=l;p>c;c++)g[c][u]+=M*g[c][s]}}for(u=l;p>u;u++)g[s][u]=0,g[u][s]=0;g[s][s]=1,v=m[s],l=s}for(s=p-1;-1!=s;s+=-1){for(l=s+1,v=d[s],u=l;p>u;u++)h[s][u]=0;if(0!=v){for(b=h[s][s]*v,u=l;p>u;u++){for(M=0,c=l;f>c;c++)M+=h[c][s]*h[c][u];for(y=M/b,c=s;f>c;c++)h[c][u]+=y*h[c][s]}for(u=s;f>u;u++)h[u][s]=h[u][s]/v}else for(u=s;f>u;u++)h[u][s]=0;h[s][s]+=1}for(n*=x,c=p-1;-1!=c;c+=-1)for(var T=0;a>T;T++){var E=!1;for(l=c;-1!=l;l+=-1){if(Math.abs(m[l])<=n){E=!0;break}if(Math.abs(d[l-1])<=n)break}if(!E){o=0,M=1;var S=l-1;for(s=l;c+1>s&&(y=M*m[s],m[s]=o*m[s],!(Math.abs(y)<=n));s++)for(v=d[s],b=t(y,v),d[s]=b,o=v/b,M=-y/b,u=0;f>u;u++)_=h[u][S],w=h[u][s],h[u][S]=_*o+w*M,h[u][s]=-_*M+w*o}if(w=d[c],l==c){if(0>w)for(d[c]=-w,u=0;p>u;u++)g[u][c]=-g[u][c];break}if(T>=a-1)throw"Error: no convergence.";for(x=d[l],_=d[c-1],v=m[c-1],b=m[c],y=((_-w)*(_+w)+(v-b)*(v+b))/(2*b*_),v=t(y,1),y=0>y?((x-w)*(x+w)+b*(_/(y-v)-b))/x:((x-w)*(x+w)+b*(_/(y+v)-b))/x,o=1,M=1,s=l+1;c+1>s;s++){for(v=m[s],_=d[s],b=M*v,v=o*v,w=t(y,b),m[s-1]=w,o=y/w,M=b/w,y=x*o+v*M,v=-x*M+v*o,b=_*M,_*=o,u=0;p>u;u++)x=g[u][s-1],w=g[u][s],g[u][s-1]=x*o+w*M,g[u][s]=-x*M+w*o;for(w=t(y,b),d[s-1]=w,o=y/w,M=b/w,y=o*v+M*_,x=-M*v+o*_,u=0;f>u;u++)_=h[u][s-1],w=h[u][s],h[u][s-1]=_*o+w*M,h[u][s]=-_*M+w*o}m[l]=0,m[c]=y,d[c]=x}for(s=0;s<d.length;s++)d[s]<n&&(d[s]=0);for(s=0;p>s;s++)for(u=s-1;u>=0;u--)if(d[u]<d[s]){for(o=d[u],d[u]=d[s],d[s]=o,c=0;c<h.length;c++)r=h[c][s],h[c][s]=h[c][u],h[c][u]=r;for(c=0;c<g.length;c++)r=g[c][s],g[c][s]=g[c][u],g[c][u]=r;s=u}return{U:h,S:d,V:g}},numeric}),define("math/distance",["require","numeric"],function(e){var t=e("numeric"),r={hypot:Math.hypot||function(e,t){return 0===e&&0===t?0:Math.abs(e)>Math.abs(t)?Math.abs(e)*Math.sqrt(t/e*(t/e)+1):Math.abs(t)*Math.sqrt(e/t*(e/t)+1)},mean:function(e,t){return e>0==t>0?e+.5*(t-e):.5*(e+t)},dot:function(e,t,r,n){return e*r+t*n},pointToSegmentParameter:function(e,t,r,n,i,a){var o=this.hypot(i-r,a-n);if(0===o)return 0;var s=this.dot((e-r)/o,(t-n)/o,(i-r)/o,(a-n)/o);return s},closestPointOnSegment:function(e,t,r,n,i,a){var o=this.pointToSegmentParameter(e,t,r,n,i,a);return 0>=o?[r,n]:o>=1?[i,a]:[r+o*(i-r),n+o*(a-n)]},pointToSegment:function(e,t,r,n,i,a){var o=this.closestPointOnSegment(e,t,r,n,i,a);return this.hypot(e-o[0],t-o[1])},approx:function(e,t,r){if(r>50)throw new Error("Within "+(52-r)+" bits isn\'t really approximate any more");var n=Math.max(Math.max(Math.abs(e),Math.abs(t)),1),i=void 0===r?.5:Math.pow(.5,r);return n===n+i*Math.abs(t-e)},isLine:function(e,n,i,a,o,s){var u=t.svd([[e,n,1],[i,a,1],[o,s,1]]).S;return r.approx(u[u.length-1]/u[0],0)},isCircle:function(e,n,i,a,o,s,u,c){var l=t.svd([[e*e+n*n,e,n,1],[i*i+a*a,i,a,1],[o*o+s*s,o,s,1],[u*u+c*c,u,c,1]]).S;return r.approx(l[l.length-1]/l[0],0)},isConic:function(e,n,i,a,o,s,u,c,l,h,f,p){var m=t.svd([[e*e,n*n,2*e*n,e,n,1],[i*i,a*a,2*i*a,i,a,1],[o*o,s*s,2*o*s,o,s,1],[u*u,c*c,2*u*c,u,c,1],[l*l,h*h,2*l*h,l,h,1],[f*f,p*p,2*f*p,f,p,1]]).S;return r.approx(m[m.length-1]/m[0],0)},conicQuadraticParameters:function(e,r,n,i,a,o,s,u,c,l){return{a:t.det([[r*r,2*e*r,e,r,1],[i*i,2*n*i,n,i,1],[o*o,2*a*o,a,o,1],[u*u,2*s*u,s,u,1],[l*l,2*c*l,c,l,1]]),b:t.det([[e*e,r*r,e,r,1],[n*n,i*i,n,i,1],[a*a,o*o,a,o,1],[s*s,u*u,s,u,1],[c*c,l*l,c,l,1]]),c:-t.det([[e*e,2*e*r,e,r,1],[n*n,2*n*i,n,i,1],[a*a,2*a*o,a,o,1],[s*s,2*s*u,s,u,1],[c*c,2*c*l,c,l,1]])}},classifyConic:function(e,n,i,a,o,s,u,c,l,h,f,p){if(r.isLine(e,n,o,s,f,p))return"line";if(r.isCircle(e,n,i,a,l,h,f,p))return"circle";if(!r.isConic(e,n,i,a,o,s,u,c,l,h,f,p))return"none";var m=r.conicQuadraticParameters(e,n,i,a,o,s,u,c,l,h),d=t.svd([[m.a,m.b],[m.b,m.c]]).S;return r.approx(d[d.length-1]/d[0],0,20)?"parabola":m.b*m.b>m.a*m.c?"hyperbola":"ellipse"},classifyBranchConic:function(e){var t,n;if(1===e.length&&4===e[0].length)return"line";for(var i=0;i<e.length;i++){var a=e[i],o=a.length;if(12>o)return"unknown";try{n=r.classifyConic(a[0],a[1],a[2*Math.floor(1*o/12)],a[2*Math.floor(1*o/12)+1],a[2*Math.floor(2*o/12)],a[2*Math.floor(2*o/12)+1],a[2*Math.floor(3*o/12)],a[2*Math.floor(3*o/12)+1],a[2*Math.floor(4*o/12)],a[2*Math.floor(4*o/12)+1],a[o-2],a[o-1])}catch(s){return"unknown"}if("none"===n)return"none";if(t&&n!==t)return"none";t=n}return t}};return r}),define("worker/workerconfig",[],function(){return{singleVariableSolutions:!0,pointsOfInterest:!0}}),define("math/poi",["require","console","./distance","worker/workerconfig"],function(e){function t(e,t){var r;e>t&&(r=e,e=t,t=r);var n=e>0,i=t>0,a=Math.abs(e)>.01,o=Math.abs(t)>.01;if(a||o)return g.mean(e,t);if(0===e)return t*Math.abs(t);if(0===t)return e*Math.abs(e);if(n!==i)return 0;var s=n?Math.sqrt(e*t):-Math.sqrt(e*t);return s>=e&&t>=s?s:g.mean(e,t)}function r(e,r,i,a,o){if(!isFinite(r)||!isFinite(a)||0>r==0>a)return d.log("bisectZero called with bad y values",[r,a]),null;for(;;){var s=t(e,i),u=o(s);if(!isFinite(u))return null;if(s===e||s===i)return Math.abs(r)<=Math.abs(a)?[e,r]:[i,a];if(0===u)return n(e,r,s,u,i,a,o);0>r!=0>u?(i=s,a=u):(e=s,r=u)}}function n(e,r,n,o,s,u,c){var l;if(!isFinite(o))return null;isFinite(r)||(l=i(e,r,n,o,c),e=l[0],r=l[1]),isFinite(u)||(l=i(n,o,s,u,c),s=l[0],u=l[1]);var h,f;h=r===o?[e,r]:a(e,r,n,o,c,o),f=u===o?[s,u]:a(n,o,s,u,c,o);var p=t(h[0],f[0]);return[p,c(p)]}function i(e,r,n,i,a){if(isFinite(r)===isFinite(i))return d.log("bisectFinite called with bad y values",[r,i]),null;for(;;){var o=t(e,n),s=a(o);if(o===e||o===n)return isFinite(r)?[e,r]:[n,i];isFinite(s)!==isFinite(r)?(n=o,i=s):(e=o,r=s)}}function a(e,r,n,i,a,o){if(r===o==(i===o))return d.log("bisectConstant called with bad y values",[r,i,o]),null;for(;;){var s=t(e,n),u=a(s);if(s===e||s===n)return r===o?[e,r]:[n,i];u===o!=(r===o)?(n=s,i=u):(e=s,r=u)}}function o(e,r,i,a,o,s,u){if(!(i>e&&o>i))return d.log("bisectExtremum called with bad x values",[e,i,o]),null;if(!(isFinite(r)&&isFinite(a)&&isFinite(s)&&r!==a&&a!==s&&a>r==a>s))return d.log("bisectExtremum called with bad y values",[r,a,s]),null;for(;;){var c=t(e,i),l=u(c),h=t(i,o),f=u(h);if(!isFinite(l)||!isFinite(f))return null;if(c===e||c===i||h===i||h===o)return l>a==a>r?[c,l]:f>a==a>r?[h,f]:[i,a];if(l===a||f===a)return n(e,r,i,a,o,s,u);l>r==a>r&&l>r==l>a?(o=i,s=a,i=c,a=l):f>s==a>s&&f>a==f>s?(e=i,r=a,i=h,a=f):(e=c,r=l,o=h,s=f)}}function s(e,t,r,n,i,a,o,s){var u=Math.abs(n-t),c=Math.abs(a-n),l=Math.abs(s-a);return u>c&&u>l?[[e,t],[r,n]]:l>c&&l>u?[[i,a],[o,s]]:[[r,n],[i,a]]}function u(e,r,n,a,o,u,c,l){if(l||(l=0),0>=(n-e)*(o-n))return null;if(!isFinite(e)||!isFinite(n)||!isFinite(o))return null;if(!isFinite(r)||!isFinite(u))return null;if(!isFinite(a))return[i(e,r,n,a,c),i(n,a,o,u,c)];if(Math.abs(a-((o-n)*r+(n-e)*u)/(o-e))<l)return null;for(;;){var h,f,p=t(e,n),m=c(p),d=t(n,o),y=c(d),v=Math.abs(m-g.mean(r,a)),b=Math.abs(a-g.mean(m,y)),x=Math.abs(y-g.mean(a,u));if(l>=v&&l>=b&&l>=x)return null;if(!isFinite(m))return h=i(e,r,p,m,c),f=i(p,m,o,u,c),[h,f];if(!isFinite(y))return h=i(e,r,d,y,c),f=i(d,y,o,u,c),[h,f];if(!(p!==e&&p!==n||d!==n&&d!==o))return Math.abs(a-r)>Math.abs(u-a)?(h=[e,r],f=[n,a]):(h=[n,a],f=[o,u]),[h,f];if(p===e||p===n)return s(e,r,n,a,d,y,o,u);\nif(d===n||d===o)return s(e,r,p,m,n,a,o,u);v>x&&v>=b?(o=n,u=a,n=p,a=m):x>v&&x>=b?(e=n,r=a,n=d,a=y):(e=p,r=m,o=d,u=y)}}function c(e,t){for(var i,a,o,s,u,c,l,h={x:[],y:[]},f=0,p=e.length;p>f;f++){i=e[f],l=void 0,0===i[1]&&(l=[i[0],i[1]]);for(var m=0,d=i.length;d-2>m;m+=2)a=i[m],o=i[m+1],s=i[m+2],u=i[m+3],l?0!==u&&(l[0]!==i[0]&&(c=n(l[0],l[1],a,o,s,u,t),h.x.push(c[0]),h.y.push(c[1])),l=void 0):0===u?l=[a,o]:0>o!=0>u&&(c=r(a,o,s,u,t),c&&(h.x.push(c[0]),h.y.push(c[1])))}return h}function l(e,t,i){for(var a,s,u,c,l,h,f,p,m,d={x:[],y:[]},g=0,y=e.length;y>g;g++){a=e[g];for(var v=0,b=a.length;b-4>v;v+=2)if(s=a[v],u=a[v+1],c=a[v+2],l=a[v+3],h=a[v+4],f=a[v+5],isFinite(u)&&isFinite(l)&&isFinite(f))if(u!==l&&l===f)m=[s,u];else if(u===l&&l!==f&&m)l>m[1]==l>f&&(p=n(m[0],m[1],c,l,h,f,t),d.x.push(p[0]),d.y.push(p[1])),m=void 0;else if(u===l&&l===f);else if(l>u==l>f)if(i){if(i(s)>0==i(h)>0)continue;p=r(s,i(s),h,i(h),i),null===p&&(p=o(s,u,c,l,h,f,t)),p&&(d.x.push(p[0]),d.y.push(t(p[0])))}else p=o(s,u,c,l,h,f,t),p&&(d.x.push(p[0]),d.y.push(p[1]))}return d}function h(e,t){var r=t(0);return isFinite(r)?{x:[0],y:[t(0)]}:{x:[],y:[]}}function f(e,t){for(var r=e.length,n={x:[],y:[]},i=0;r>i;i++){var a=e[i];0===parseFloat(a[1].toFixed(7))&&(n.x.push(a[0]),n.y.push(a[1])),0===parseFloat(a[a.length-1].toFixed(7))&&(n.x.push(a[a.length-2]),n.y.push(a[a.length-1]))}return n}function p(e,t,r){if(!y.pointsOfInterest)return{zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}};var n=c(e,t),i=f(e,t);return n.x.push.apply(n.x,i.x),n.y.push.apply(n.y,i.y),{zeros:n,intercept:h(e,t),extrema:l(e,t,r)}}function m(e,t,r){var n,i,a,o=c(e,r),s=l(e,r);for(n=0,i=s.x.length;i>n;n++)g.approx(s.y[n],0)&&(o.x.push(s.x[n]),o.y.push(s.y[n]));for(n=0,a=o.x.length;a>n;n++)o.y[n]=t(o.x[n]);return o}var d=e("console"),g=e("./distance"),y=e("worker/workerconfig");return{bisectJump:u,bisectExtremum:o,bisectFinite:i,bisectZero:r,findExtrema:l,findZeros:c,findPOIs:p,findIntersections:m,INTERSECTION:1001,ZERO:1002,INTERCEPT:1003,EXTREMUM:1004,EDGE:1005,DEFINITION:1006,TRACE:1007}}),define("graphing/graphmode",{X:1,Y:2,XYPOINT:3,XYPOINT_MOVABLE:4,PARAMETRIC:5,POLAR:6,POLYGONFILL:7,IMPLICIT:8,NONE:10}),define("math/curve-accumulator",["require","./distance","pjs"],function(e){var t=e("./distance"),r=e("pjs"),n=r(function(e){e.init=function(e){this.domain=e,e?(this.xtolerance=e.xtolerance||e.tolerance||0,this.ytolerance=e.ytolerance||e.tolerance||0,this.map=e.map):this.xtolerance=this.ytolerance=0,this.segments=[],this.segment=null,this.pivotPoint=null,this.pendingPoint=null},e.colinear=function(e,r,n){this.map&&(e=this.map(e),r=this.map(r),n=this.map(n));var i=t.pointToSegmentParameter(n[0],n[1],e[0],e[1],r[0],r[1]);if(1>i)return!1;var a=[e[0]+i*(r[0]-e[0]),e[1]+i*(r[1]-e[1])];return Math.abs(n[0]-a[0])<=this.xtolerance&&Math.abs(n[1]-a[1])<=this.ytolerance},e.addPoint=function(e){if(!this.segment)return void(this.segment=[e[0],e[1]]);if(this.xtolerance<0&&this.ytolerance<0)return void this.segment.push(e[0],e[1]);var r=[this.segment[this.segment.length-2],this.segment[this.segment.length-1]];if(e[0]!==r[0]||e[1]!==r[1]){if(!this.pivotPoint)return this.pivotPoint=e,void(this.pendingPoint=e);(!this.colinear(r,this.pivotPoint,e)||t.hypot(r[0]-e[0],r[1]-e[1])<t.hypot(r[0]-this.pendingPoint[0],r[1]-this.pendingPoint[1]))&&(this.flushPending(),this.pivotPoint=e),this.pendingPoint=e}},e.flushPending=function(){this.pendingPoint&&(this.segment.push(this.pendingPoint[0],this.pendingPoint[1]),this.pivotPoint=null,this.pendingPoint=null)},e.breakSegment=function(){this.flushPending(),this.segment&&(this.segment.length>2&&this.segments.push(this.segment),this.segment=null)},e.getSegments=function(){return this.breakSegment(),this.segments},e.finish=function(){return{segments:this.getSegments(),resolved:!0}},e.exhaust=function(){}});return n}),define("math/implicit-plotter",["require","math/distance","./curve-accumulator"],function(e){"use strict";function t(e,t){var n=r(e,t);return{segments:n.contours.strokeSegments,fillSegments:n.contours.fillSegments,resolved:n.quadTree.resolved}}function r(e,t){var r=Math.pow(2,-G),n=u(t,r),i=u(t,2*r),a=c(e,n,i),o=E(a.root,e,n),s=V(o,e,n);return{paddedDomain:n,rootDomain:i,quadTree:a,triangles:o,contours:s}}function n(e,t,r){return{x:e,y:t,z:r}}function i(e,t,r){return{x:e,y:t,isZero:r}}function a(e,t,r){return{vertices:[e,t,r],visited:!1,next:void 0}}function o(e,t){return{isLeaf:!1,depth:e,vertices:t,children:void 0,center:void 0}}function s(e,t,r){e.isLeaf=!0,e.center=_(e.vertices[0],e.vertices[1],e.vertices[2],e.vertices[3],t,r)}function u(e,t){var r=(1+t)*e.xmin-t*e.xmax,n=(1+t)*e.xmax-t*e.xmin,i=(1+t)*e.ymin-t*e.ymax,a=(1+t)*e.ymax-t*e.ymin;return{xmin:r,ymin:i,xmax:n,ymax:a,xtolerance:e.xtolerance,ytolerance:e.ytolerance}}function c(e,t,r){var n=l(e,r),i=[],a=[];a.push(n);var o=1,u=!0;e:for(;a.length;){var c=i;for(i=a,a=c;i.length;){var p=i.pop();if(f(p,e,t)){if(h(p,e),a.push(p.children[0]),a.push(p.children[1]),a.push(p.children[2]),a.push(p.children[3]),o+=3,o>=U){u=!1;break e}}else s(p,e,t)}}var m;for(m=0;m<i.length;m++)s(i[m],e,t);for(m=0;m<a.length;m++)s(a[m],e,t);return{root:n,resolved:u}}function l(e,t){var r=t.xmin,n=t.xmax,i=t.ymin,a=t.ymax;return o(0,[v(r,a,e),v(n,a,e),v(n,i,e),v(r,i,e)])}function h(e,t){var r=e.depth+1,n=e.vertices[0],i=e.vertices[1],a=e.vertices[2],s=e.vertices[3],u=b(n,i,t),c=b(i,a,t),l=b(a,s,t),h=b(s,n,t),f=b(n,a,t);e.children=[o(r,[n,u,f,h]),o(r,[u,i,c,f]),o(r,[f,c,a,l]),o(r,[h,f,l,s])]}function f(e,t,r){if(e.depth<G)return!0;if(g(e,r))return!1;if(d(e,r))return!1;var n=e.vertices[0],i=e.vertices[1],a=e.vertices[2],o=e.vertices[3];if(isNaN(n.z)&&isNaN(i.z)&&isNaN(a.z)&&isNaN(o.z))return!1;if(isNaN(n.z)||isNaN(i.z)||isNaN(a.z)||isNaN(o.z))return!0;var s=_(n,i,a,o,t,r),u=x(n,i,t,r),c=x(i,a,t,r),l=x(a,o,t,r),h=x(o,n,t,r);return m(n,u,t,r)||m(i,u,t,r)||m(i,c,t,r)||m(a,c,t,r)||m(a,l,t,r)||m(o,l,t,r)||m(o,h,t,r)||m(n,h,t,r)||p(n,u,s,t,r)||p(u,i,s,t,r)||p(i,c,s,t,r)||p(c,a,s,t,r)||p(a,l,s,t,r)||p(l,o,s,t,r)||p(o,h,s,t,r)||p(h,n,s,t,r)}function p(e,t,r,n,i){if(e.z>0==t.z>0&&t.z>0==r.z>0)return!1;var a,o,s,u;if(e.z>0==t.z>0){if(a=b(e,t,n),a.z>0!=e.z>0)return!0;o=M(e,r,n,i),s=M(t,r,n,i),u=M(a,r,n,i)}if(t.z>0==r.z>0){if(a=b(t,r,n),a.z>0!=t.z>0)return!0;o=M(t,e,n,i),s=M(r,e,n,i),u=M(a,e,n,i)}if(r.z>0==e.z>0){if(a=b(r,e,n),a.z>0!=r.z>0)return!0;o=M(r,t,n,i),s=M(e,t,n,i),u=M(a,t,n,i)}var c=i.xtolerance,l=i.ytolerance,h=B.pointToSegment(l*u.x,c*u.y,l*o.x,c*o.y,l*s.x,c*s.y);return h>c*l}function m(e,t,r,n){if(isNaN(e.z)&&isNaN(t.z))return!1;if(isNaN(e.z)||isNaN(t.z))return e.z>0||t.z>0;var i=b(e,t,r),a=4*i.z-t.z-3*e.z,o=1e-4,s=(r((1-o)*e.x+o*t.x,(1-o)*e.y+o*t.y)-e.z)/o,u=Math.max(Math.abs(e.z),Math.abs(t.z));return Math.abs(a-s)>.125*u}function d(e,t){return e.vertices[1].x-e.vertices[0].x<10*t.xtolerance?!0:e.vertices[0].y-e.vertices[3].y<10*t.ytolerance?!0:!1}function g(e,t){return e.vertices[0].x<t.xmin||e.vertices[0].y>t.ymax||e.vertices[2].x>t.xmax||e.vertices[2].y<t.ymin}function y(e,t){return e.x<t.xmin||e.x>t.xmax||e.y<t.ymin||e.y>t.ymax}function v(e,t,r){return n(e,t,r(e,t))}function b(e,t,r){return v(.5*(e.x+t.x),.5*(e.y+t.y),r)}function x(e,t,r,i){if(y(e,i)||y(t,i))return b(e,t,r);if(isNaN(e.z)||isNaN(t.z))return T(e,t,r,i);if(e.z>0!=t.z>0)return b(e,t,r);var a=.01,o=r((1-a)*e.x+a*t.x,(1-a)*e.y+a*t.y)-e.z,s=t.z-r(a*e.x+(1-a)*t.x,a*e.y+(1-a)*t.y);return isNaN(o)||isNaN(s)?b(e,t,r):o>0==s>0?b(e,t,r):w(n(e.x,e.y,o),n(t.x,t.y,s),r)}function _(e,t,r,n,i,a){var o=x(e,r,i,a);return e.z>0==r.z>0&&o.z>0!=e.z>0?o:(o=x(t,n,i,a),t.z>0==n.z>0&&o.z>0!=t.z>0?o:b(e,r,i))}function w(e,t,r){if(isNaN(e.z))return t;if(isNaN(t.z))return e;if(isFinite(e.z)||isFinite(t.z)){if(isFinite(e.z)){if(isFinite(t.z)){var n=1-e.z/t.z,i=1-t.z/e.z;return v(e.x/n+t.x/i,e.y/n+t.y/i,r)}return e}return t}return b(e,t,r)}function M(e,t,r,a){var o=e.x,s=t.x,u=e.y,c=t.y,l=e.z,h=t.z,f=a.xtolerance,p=a.ytolerance;if(y(e,a)||y(t,a)){var m=b(e,t,r);return i(m.x,m.y,!1)}for(;Math.abs(o-s)>f||Math.abs(u-c)>p;){var d=.5*(o+s),g=.5*(u+c),v=r(d,g);v>0==l>0?(o=d,u=g,l=v):(s=d,c=g,h=v)}if(isNaN(l))return i(s,c,!1);if(isNaN(h))return i(o,u,!1);var x=w(n(o,u,l),n(s,c,h),r),_=0===l||0===h||0===x.z||x.z>=l==h>=x.z&&Math.abs(x.z)<1e250;return i(x.x,x.y,_)}function T(e,t,r,i){if(isNaN(e.z)===isNaN(t.z))return b(e,t,r);var a;isNaN(e.z)&&(a=e,e=t,t=a);for(var o=e.x,s=t.x,u=e.y,c=t.y,l=e.z,h=t.z,f=i.xtolerance,p=i.ytolerance;Math.abs(o-s)>f||Math.abs(u-c)>p;){var m=.5*(o+s),d=.5*(u+c),g=r(m,d);isNaN(g)===isNaN(l)?(o=m,u=d,l=g):(s=m,c=d,h=g)}return n(o,u,l)}function E(e,t,r){var n={triangles:[],edgeCache:{},domain:r,fn:t};return S(e,n),n.triangles}function S(e,t){e.isLeaf||(S(e.children[0],t),S(e.children[1],t),S(e.children[2],t),S(e.children[3],t),N(e.children[0],e.children[1],t),N(e.children[3],e.children[2],t),I(e.children[1],e.children[2],t),I(e.children[0],e.children[3],t))}function N(e,t,r){e.isLeaf&&t.isLeaf?C(e,t,r):e.isLeaf?(N(e,t.children[0],r),N(e,t.children[3],r)):t.isLeaf?(N(e.children[1],t,r),N(e.children[2],t,r)):(N(e.children[1],t.children[0],r),N(e.children[2],t.children[3],r))}function I(e,t,r){e.isLeaf&&t.isLeaf?k(e,t,r):e.isLeaf?(I(e,t.children[1],r),I(e,t.children[0],r)):t.isLeaf?(I(e.children[2],t,r),I(e.children[3],t,r)):(I(e.children[2],t.children[1],r),I(e.children[3],t.children[0],r))}function C(e,t,r){var n,i;e.depth>=t.depth?(n=x(e.vertices[1],e.vertices[2],r.fn,r.domain),i=A(e.vertices[1],t.center,e.vertices[2],e.center,n)):(n=x(t.vertices[0],t.vertices[3],r.fn,r.domain),i=A(t.vertices[0],t.center,t.vertices[3],e.center,n)),P(i,r.edgeCache,r.domain);for(var a=0;4>a;a++)r.triangles.push(i[a])}function k(e,t,r){var n,i;e.depth>=t.depth?(n=x(e.vertices[3],e.vertices[2],r.fn,r.domain),i=A(e.vertices[2],t.center,e.vertices[3],e.center,n)):(n=x(t.vertices[1],t.vertices[0],r.fn,r.domain),i=A(t.vertices[1],t.center,t.vertices[0],e.center,n)),P(i,r.edgeCache,r.domain);for(var a=0;4>a;a++)r.triangles.push(i[a])}function A(e,t,r,n,i){return[a(e,i,t),a(t,i,r),a(r,i,n),a(n,i,e)]}function D(e,t,r){return e.z>0&&!y(e,r)&&(!(t.z>0)||y(t,r))}function F(e,t){return""+e.x+","+e.y+","+t.x+","+t.y}function P(e,t,r){O(e[0],e[1],e[2],F(e[1].vertices[2],e[1].vertices[0]),t,r),O(e[1],e[2],e[3],F(e[2].vertices[0],e[2].vertices[2]),t,r),O(e[2],e[3],e[0],F(e[3].vertices[2],e[3].vertices[0]),t,r),O(e[3],e[0],e[1],F(e[0].vertices[0],e[0].vertices[2]),t,r)}function O(e,t,r,n,i,a){var o=t.vertices[0],s=t.vertices[1],u=t.vertices[2];D(s,u,a)&&(t.next=r),D(o,s,a)&&(t.next=e),D(u,o,a)&&q(t,n,i),D(o,u,a)&&L(t,n,i)}function L(e,t,r){r[t]?r[t].next=e:r[t]=e}function q(e,t,r){r[t]?e.next=r[t]:r[t]=e}function V(e,t,r){for(var n={fillAccumulator:new $(r),strokeAccumulator:new $(r),fn:t,domain:r},i=0;i<e.length;i++){var a=e[i];a.next&&!a.visited&&j(a,n)}return{strokeSegments:n.strokeAccumulator.finish().segments,fillSegments:n.fillAccumulator.finish().segments}}function j(e,t){for(;;){var r=e.vertices[0],n=e.vertices[1],i=e.vertices[2];if(R(r,n,i,t),R(n,i,r,t),R(i,r,n,t),e.visited)break;e.visited=!0,e=e.next}t.strokeAccumulator.breakSegment(),t.fillAccumulator.breakSegment()}function R(e,t,r,n){if(D(e,t,n.domain)){var i=M(e,t,n.fn,n.domain);n.fillAccumulator.addPoint([i.x,i.y]),i.isZero?n.strokeAccumulator.addPoint([i.x,i.y]):n.strokeAccumulator.breakSegment()}}function z(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push([n.vertices[0].x,n.vertices[0].y,n.vertices[1].x,n.vertices[1].y,n.vertices[2].x,n.vertices[2].y,n.vertices[0].x,n.vertices[0].y])}return t}var B=e("math/distance"),$=e("./curve-accumulator"),G=5,U=Math.pow(2,14);return{sampleImplicit:t,sampleImplicitDiagnostic:r,buildQuadTree:c,triangulate:E,traceContours:V,displayTrianges:z}}),define("math/domaintypes",["require"],function(e){function t(){return{type:"empty"}}function r(){return{type:"unknown"}}function n(e){return isNaN(e[0])||isNaN(e[1])||e[1]<e[0]?t():{type:"known",bounds:e}}function i(){return n([-(1/0),1/0])}function a(e,i){if("empty"===e.type||"empty"===i.type)return t();if("unknown"===e.type||"unknown"===i.type)return r();var a=[Math.max(e.bounds[0],i.bounds[0]),Math.min(e.bounds[1],i.bounds[1])];return n(a)}return{emptyDomain:t,unknownDomain:r,knownDomain:n,allReals:i,intersectDomains:a}}),define("math/plotter",["require","./distance","./poi","graphing/graphmode","./implicit-plotter","./curve-accumulator","math/domaintypes"],function(e){function t(e,t){for(var r,n=new w,i=t.min;i<=t.max+t.step/2;i+=t.step)r=e(i),isFinite(r[0])&&isFinite(r[1])?n.addPoint(r):n.breakSegment();return n.finish()}function r(e,t){for(var r,n=new w(t),i=t.min;i<=t.max+t.step/2;i+=t.step)r=e(i),isFinite(r)?n.addPoint([i,r]):n.breakSegment();return n.finish()}function n(e,t){var r=new w(t);return r.addPoint([t.min,e[0]+t.min*e[1]]),r.addPoint([t.max,e[0]+t.max*e[1]]),r.finish()}function i(e,t,r){var n,i,a,o,s,u,c=r.fn,l=r.jumpTolerance,h=r.stepPerturbation;n=e[0],i=e[1],s=t[0],u=t[1],a=v.mean(n,s),o=c(a);var f=b.bisectJump(n,i,a,o,s,u,c,l);if(f)for(var p=[-h,h],m=0;m<p.length;m++)if(n=e[0]+p[m],i=c(n),isFinite(i)||(n=e[0],i=e[1]),s=t[0]+p[m],u=c(s),isFinite(u)||(s=t[0],u=t[1]),a=v.mean(n,s),o=c(a),b.bisectJump(n,i,a,o,s,u,c,l))return f}function a(e,t){var r,n=new E(e,t),i=t.min,a=e(i),o=[i,a];for(isFinite(a)&&n.accumulator.addPoint([i,a]),i+=t.step;i<=t.max+t.step/2;i+=t.step){var s=i;a=e(s),isFinite(a)||(s=i+n.stepPerturbation,a=e(s)),isFinite(a)||(s=i-n.stepPerturbation,a=e(s)),isFinite(a)&&isFinite(o[1])?(T(o,[s,a],n),n.accumulator.addPoint([s,a])):isFinite(a)&&!isFinite(o[1])?(r=b.bisectFinite(o[0],o[1],s,a,e),r[0]!==s&&n.accumulator.addPoint(r),T(r,[s,a],n),n.accumulator.addPoint([s,a])):!isFinite(a)&&isFinite(o[1])&&(r=b.bisectFinite(o[0],o[1],s,a,e),T(o,r,n),r[0]!==o[0]&&n.accumulator.addPoint(r),n.accumulator.breakSegment()),o=[s,a]}return n.accumulator.finish()}function o(e,t,r,n){function i(e,t){var i=t%2===0?1:-1;if(!n&&-1===i)return!1;for(var a=t*(Math.PI/r),o=[u,u+1,u+2,u+3],s=!1,c=0,h=o.length;h>c;c++){var f=e(o[c]),p=e(o[c]+a);if(isFinite(f)&&isFinite(p)&&(s=!0),isFinite(f)!==isFinite(p)||Math.abs(f-i*p)>l)return!1}return s?!0:!1}var a,o,s,u=t.min,c=t.max-t.min,l=t.xtolerance&&t.ytolerance?Math.min(t.xtolerance,t.ytolerance):t.tolerance,h=Math.floor(c/(Math.PI/r));for(a=1;h>=a;a++)if(i(e,a)){for(s=a,o=2;h>=o*a;o++)i(e,o*a)||(s=void 0);if(s)break}return s?s*(Math.PI/r):null}function s(e){return[e[1]*Math.cos(e[0]),e[1]*Math.sin(e[0])]}function u(e,t){return t.map=s,a(e,t)}function c(e,t){for(var r=e.min,n=e.max,i=e.step,a=n-r,o=Math.ceil(a/i),s=a/o,u=0;o>u;u++)t(r+u*s);t(n)}function l(e,t){if(t.max<t.min)return[];var r=new w(t),n=10,i=t.min,a=e(i);isFinite(a[0])&&isFinite(a[1])&&r.addPoint(a);var o;return c(t,function(t){o=e(t),h(e,i,a,t,o,n,r),i=t,a=o}),r.finish()}function h(e,t,r,n,i,a,o){if(n!==t){var s=o.xtolerance,u=o.ytolerance,c=v.mean(t,n),l=e(c,!0),f=isFinite(r[0])&&isFinite(r[1]),p=isFinite(i[0])&&isFinite(i[1]),m=isFinite(l[0])&&isFinite(l[1]);if(0===a||c===t||c===n)return o.breakSegment(),void(p&&o.addPoint(i));if(f||p){if(f!==p){for(var d=t,g=n,y=r,b=i;t!==c&&c!==n;)m==f?(t=c,r=l,f=m):(n=c,i=l,p=m),c=t+(n-t)/2,l=e(c,!0),m=isFinite(l[0])&&isFinite(l[1]);return void(f?(h(e,d,y,t,r,a-1,o),o.breakSegment()):(o.breakSegment(),o.addPoint(i),h(e,n,i,g,b,a-1,o)))}if(f&&m&&p){var x=v.pointToSegmentParameter(l[0],l[1],r[0],r[1],i[0],i[1]);if(x>.2&&.8>x&&Math.abs(l[0]-(r[0]+x*(i[0]-r[0])))<=s&&Math.abs(l[1]-(r[1]+x*(i[1]-r[1])))<=u)return void o.addPoint(i)}(r[0]!==l[0]||r[1]!==l[1])&&h(e,t,r,c,l,a-1,o),(i[0]!==l[0]||i[1]!==l[1])&&h(e,c,l,n,i,a-1,o)}}}function f(e){if(!e)return!1;var t=e.viewport.xmin,r=e.viewport.xmax,n=e.viewport.ymin,i=e.viewport.ymax;return!isFinite(t)||!isFinite(r)||t>=r?!1:!isFinite(n)||!isFinite(i)||n>=i?!1:!isFinite(e.screen.width)||e.screen.width<=0?!1:!isFinite(e.screen.height)||e.screen.height<=0?!1:!0}function p(e,t,r){var n,i,a=e.viewport.xmin,s=e.viewport.xmax,u=e.viewport.ymin,c=e.viewport.ymax,l=e.trigAngleMultiplier||1,h=e.oversample||4,f=1/h*(s-a)/e.screen.width,p=1/h*(c-u)/e.screen.height,m=t.domainBound;switch(t.graphMode){case x.X:switch(n=M.intersectDomains(M.knownDomain([u,c]),m),n.type){case"empty":return!1;case"known":u=n.bounds[0],c=n.bounds[1]}i={min:u,max:c,xtolerance:p,ytolerance:f,step:p};break;case x.Y:switch(n=M.intersectDomains(M.knownDomain([a,s]),m),n.type){case"empty":return!1;case"known":a=n.bounds[0],s=n.bounds[1]}i={min:a,max:s,xtolerance:f,ytolerance:p,step:f};break;case x.POLAR:i={min:0,max:2*Math.PI/l*6,step:2*Math.PI/l/1e3,tolerance:Math.min(f,p)};var d=o(r,i,l,"="===t.operator);d&&(i.max=i.min+d);break;case x.PARAMETRIC:t.domain&&(i={min:t.domain.min,max:t.domain.max,step:t.domain.step,xtolerance:f,ytolerance:p});break;case x.IMPLICIT:i={xmin:a,xmax:s,ymin:u,ymax:c,xtolerance:f,ytolerance:p};break;default:return!1}return i}function m(e,t,r,i){var o,s,c,h=p(e,t,r);if(h){switch(t.graphMode){case x.X:case x.Y:o=t.isLinear?n(t.linearCoefficients,h):a(r,h);break;case x.POLAR:o=u(r,h);break;case x.IMPLICIT:o=_(r,h);break;case x.PARAMETRIC:h.step||(h.step=(h.max-h.min)/1e3),o=l(r,h)}s=o.segments}else s=[],o={resolved:!0};var f;if(t.graphMode!==x.PARAMETRIC&&t.graphMode!==x.IMPLICIT&&(f=b.findPOIs(s,r,i),s=d(s,f)),(!f||f.zeros.x.length+f.extrema.x.length+f.intercept.x.length>250)&&(f={zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}}),t.graphMode===x.X)for(var m in f)f.hasOwnProperty(m)&&(c=f[m].y,f[m].y=f[m].x,f[m].x=c);var g={segments:s,resolved:o.resolved,graphMode:t.graphMode,color:t.color,style:t.style,operator:t.operator,poi:f,expr:null};return o.fillSegments&&(g.fillSegments=o.fillSegments),g}function d(e,t){for(var r,n,i,a=e.length,o=Array(a),s=t.extrema,u=0,c=s.x.length,l=0;a>l;l++){r=e[l],i=r.length,n=[];for(var h=0;i>h;h+=2){for(;c>u&&s.x[u]<=r[h];)s.x[u]!==r[h]&&n.push(s.x[u],s.y[u]),u++;n.push(r[h],r[h+1])}o[l]=n}return o}function g(e,t,r){var n,i,a,o,s,u=[];switch(r){case x.POLAR:s=this.mapPolar;break;case x.X:s=function(e){return[e[1],e[0]]}}for(n=0;n<e.length;n++)for(o=e[n],i=0;i<o.length;i+=2)a=[o[i],o[i+1]],s&&(a=s(a)),u.push(a[0],a[1]);for(n=t.length-1;n>=0;n--)for(o=t[n],i=o.length-2;i>=0;i-=2)a=[o[i],o[i+1]],s&&(a=s(a)),u.push(a[0],a[1]);return u}function y(e,t,r){for(var n=function(e){var t=e[e.length-1];return t[t.length-2]},i=[],a=0,o=0,s=[],u=[],c=-(1/0),l=-(1/0);;){if(l>=c){if(a>=t.length)break;u.push(t[a++])}if(c>=l){if(o>=e.length)break;s.push(e[o++])}if(c=n(u),l=n(s),v.approx(c,l,4)){i.push(g(s,u,r)),u=[],s=[];var h=Math.max(c,l);c=h,l=h}}return i}var v=e("./distance"),b=e("./poi"),x=e("graphing/graphmode"),_=e("./implicit-plotter").sampleImplicit,w=e("./curve-accumulator"),M=e("math/domaintypes"),T=function(e,t,r){if(isFinite(r.jumpTolerance)&&!(r.jumpTolerance<=0)){var n=i(e,t,r);n&&(r.accumulator.addPoint(n[0]),r.accumulator.breakSegment(),r.accumulator.addPoint(n[1]))}},E=function(e,t){this.accumulator=new w(t),this.fn=e,this.jumpTolerance=t.ytolerance||t.tolerance,this.stepPerturbation=t.step/10};return{Accumulator:w,sampleParametricNaive:t,sampleXYNaive:r,sampleLinear:n,sampleXY:a,findPiPeriod:o,samplePolar:u,sampleParametricRecursive:l,subsampleParametricRecursive:h,validateViewState:f,computeDomain:p,computeGraphData:m,polygonsFromSegments:y}}),define("jison",[],function(){var e={trace:function(){},yy:{},symbols_:{error:2,sentence:3,expr:4,EOF:5,assignment:6,equation:7,function_declaration:8,regression:9,ordered_pair_list:10,double_inequality:11,"boolean":12,identifier:13,"=":14,FUNCTION_PROTOTYPE:15,",":16,"~":17,comparator:18,IDENTIFIER_BASE:19,ordered_pair:20,ordered_pair_list_elements:21,"(":22,")":23,list:24,"[":25,list_elements:26,"]":27,range:28,optional_commas_ellipsis:29,"...":30,list_element_access_impmul:31,expr_atom_impmul:32,list_element_access:33,expr_atom:34,expr_sum:35,"<":36,">":37,">=":38,"<=":39,"+":40,expr_product:41,"-":42,"*":43,"/":44,exponent:45,"^N":46,"^I":47,"^":48,"{":49,"}":50,subscript:51,_N:52,_I:53,_:54,function_call:55,primed_function_call:56,function_call_unary:57,trig_function_call:58,ln_log_function_call:59,logbase_function_call:60,ANS:61,"left|":62,"right|":63,FRAC:64,SQRT:65,"!":66,repeated_operator:67,integral:68,DERIVATIVE:69,expr_piecewise:70,constant:71,NUMBER:72,expr_atom_error:73,repeated_operator_symbol:74,SUM:75,PROD:76,INT:77,DIFFERENTIAL:78,"{_visible":79,piecewise_list:80,"}_visible":81,incomplete_piecewise_list:82,piecewise_element:83,":":84,trig_function:85,TRIG_FUNCTION:86,logbase_prefix:87,LOG:88,LOG_BASE_N:89,ln_log_prefix:90,LN:91,function_argument_list:92,primes:93,PRIME:94,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"=",15:"FUNCTION_PROTOTYPE",16:",",17:"~",19:"IDENTIFIER_BASE",22:"(",23:")",25:"[",27:"]",30:"...",36:"<",37:">",38:">=",39:"<=",40:"+",42:"-",43:"*",44:"/",46:"^N",47:"^I",48:"^",49:"{",50:"}",52:"_N",53:"_I",54:"_",61:"ANS",62:"left|",63:"right|",64:"FRAC",65:"SQRT",66:"!",69:"DERIVATIVE",72:"NUMBER",75:"SUM",76:"PROD",77:"INT",78:"DIFFERENTIAL",79:"{_visible",81:"}_visible",84:":",86:"TRIG_FUNCTION",88:"LOG",89:"LOG_BASE_N",91:"LN",94:"PRIME"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,3],[3,2],[3,4],[3,1],[6,3],[9,3],[7,3],[11,5],[13,1],[10,3],[21,1],[21,3],[20,5],[24,3],[28,5],[29,1],[29,2],[29,2],[29,3],[26,1],[26,3],[31,4],[33,4],[4,1],[18,1],[18,1],[18,1],[18,1],[12,3],[12,3],[12,5],[35,3],[35,3],[35,2],[35,2],[35,1],[41,2],[41,3],[41,3],[41,2],[41,2],[41,1],[45,1],[45,1],[45,4],[51,1],[51,1],[51,4],[32,1],[32,1],[32,1],[32,1],[32,1],[32,1],[32,1],[32,1],[32,1],[32,3],[32,3],[32,3],[32,2],[32,5],[32,6],[32,6],[32,7],[32,4],[32,7],[32,2],[32,1],[32,1],[32,2],[32,1],[34,1],[34,3],[34,2],[34,2],[34,2],[34,1],[34,1],[34,1],[34,1],[34,1],[34,1],[73,2],[73,1],[73,1],[73,2],[73,1],[73,2],[74,1],[74,1],[67,9],[68,5],[68,4],[68,2],[70,3],[70,2],[80,3],[80,1],[82,3],[82,1],[83,3],[83,1],[71,1],[71,2],[57,5],[57,4],[85,1],[58,4],[58,2],[58,7],[58,9],[58,3],[58,5],[87,2],[87,1],[60,4],[60,2],[60,5],[60,3],[90,1],[90,1],[59,4],[59,2],[59,5],[59,3],[55,4],[56,5],[56,5],[56,5],[56,5],[56,5],[93,2],[93,1],[92,3],[92,3],[8,2]],performAction:function(e,t,r,n,i,a,o){var s=a.length-1;switch(i){case 1:return a[s-1];case 2:return a[s-1];case 3:return a[s-1];case 4:return a[s-1];case 5:return a[s-1];case 6:return a[s-1];case 7:return a[s-1];case 8:return a[s-1];case 9:return n.ErrorMsg.missingRHS(a[s-2]._symbol);case 10:var u=n.parseFunctionDeclaration(a[s-1]).identifier._symbol;return n.ErrorMsg.missingRHS(u);case 11:return n.ErrorMsg.malformedPoint();case 12:return n.ErrorMsg.blankExpression();case 13:this.$=n.Assignment(a[s-2],a[s]),n.setInput(this.$,this._$);break;case 14:this.$=n.Regression(a[s-2],a[s]),n.setInput(this.$,this._$);break;case 15:this.$=n.Equation(a[s-2],a[s]),n.setInput(this.$,this._$);break;case 16:this.$=n.DoubleInequality([a[s-4],a[s-3],a[s-2],a[s-1],a[s]]),n.setInput(this.$,this._$);break;case 17:this.$=n.Identifier(e),n.setInput(this.$,this._$);break;case 18:a[s].unshift(a[s-2]),this.$=n.List(a[s]),n.setInput(this.$,this._$);break;case 19:this.$=[a[s]];break;case 20:a[s-2].push(a[s]),this.$=a[s-2];break;case 21:this.$=n.OrderedPair([a[s-3],a[s-1]]);break;case 22:this.$=n.List(a[s-1]),n.setInput(this.$,this._$);break;case 23:this.$=n.Range([n.List(a[s-3]),n.List(a[s-1])]);break;case 28:this.$=[a[s]];break;case 29:a[s-2].push(a[s]),this.$=a[s-2];break;case 30:this.$=n.ListAccess([a[s-3],a[s-1]]);break;case 31:this.$=n.ListAccess([a[s-3],a[s-1]]);break;case 32:this.$=a[s],n.setInput(this.$,this._$);break;case 33:this.$="<";break;case 34:this.$=">";break;case 35:this.$=">=";break;case 36:this.$="<=";break;case 37:this.$=n.Comparator[a[s-1]]([a[s-2],a[s]]),n.setInput(this.$,this._$);break;case 38:this.$=n.Comparator["="]([a[s-2],a[s]]),n.setInput(this.$,this._$);break;case 39:var c=n.Comparator[a[s-3]]([a[s-4],a[s-2]]),l=n.Comparator[a[s-1]]([a[s-2],a[s]]);this.$=n.And([c,l]),n.setInput(this.$,this._$);break;case 40:this.$=n.Add([a[s-2],a[s]]);break;case 41:this.$=n.Subtract([a[s-2],a[s]]);break;case 42:throw n.ErrorMsg.binaryOperatorMissingOperand("+");case 43:throw n.ErrorMsg.binaryOperatorMissingOperand("-");case 44:this.$=a[s];break;case 45:this.$=n.Multiply([a[s-1],a[s]]);break;case 46:this.$=n.Multiply([a[s-2],a[s]]);break;case 47:this.$=n.Divide([a[s-2],a[s]]);break;case 48:throw n.ErrorMsg.binaryOperatorMissingOperand("*");case 49:throw n.ErrorMsg.binaryOperatorMissingOperand("");case 50:this.$=a[s];break;case 51:this.$=n.Constant(Number(a[s]));break;case 52:this.$=n.Identifier(a[s]),n.setInput(this.$,""+a[s-0]);break;case 53:this.$=a[s-1];break;case 54:this.$=n.Constant(Number(a[s]));break;case 55:this.$=n.Identifier(a[s]),n.setInput(this.$,""+a[s-0]);break;case 56:this.$=a[s-1];break;case 57:this.$=a[s];break;case 58:this.$=a[s];break;case 59:this.$=a[s];break;case 60:this.$=a[s];break;case 61:this.$=a[s];break;case 62:this.$=a[s];break;case 63:this.$=a[s];break;case 64:this.$=a[s];break;case 65:if(void 0===n.currentIndex)throw n.ErrorMsg.badAnsContext();this.$=n.Ans("ans_{"+(n.currentIndex-1)+"}");break;case 66:this.$=a[s-1];break;case 67:this.$=a[s-1];break;case 68:this.$=n.FunctionCall("\\\\abs",[a[s-1]]);break;case 69:this.$=n.Exponent([a[s-1],a[s]]);break;case 70:throw n.ErrorMsg.fractionEmpty();case 71:throw n.ErrorMsg.fractionMissingNumerator();case 72:throw n.ErrorMsg.fractionMissingDenominator();case 73:this.$=n.Divide([a[s-4],a[s-1]]);break;case 74:this.$=n.FunctionCall("\\\\sqrt",[a[s-1]]);break;case 75:this.$=n.FunctionCall("\\\\nthroot",[a[s-1],a[s-4]]);break;case 76:this.$=n.FunctionCall("\\\\factorial",[a[s-1]]);break;case 77:this.$=a[s];break;case 78:this.$=a[s];break;case 79:this.$=n.Derivative(a[s-1],[a[s]]);break;case 80:this.$=a[s];break;case 81:this.$=a[s];break;case 82:this.$=n.Negative([n.Exponent([n.Constant(Number(a[s-1])),a[s]])]);break;case 83:this.$=n.Exponent([a[s-1],a[s]]);break;case 84:this.$=n.FunctionCall("\\\\factorial",[a[s-1]]);break;case 85:this.$=n.Negative([a[s]]);break;case 86:this.$=a[s];break;case 87:this.$=a[s];break;case 88:this.$=a[s];break;case 89:this.$=a[s];break;case 90:this.$=a[s];break;case 91:this.$=a[s];break;case 92:throw n.ErrorMsg.binaryOperatorMissingOperand("+");case 93:throw n.ErrorMsg.binaryOperatorMissingOperand("+");case 94:throw n.ErrorMsg.binaryOperatorMissingOperand("*");case 95:throw n.ErrorMsg.binaryOperatorMissingOperand("*");case 96:throw n.ErrorMsg.binaryOperatorMissingOperand("");case 97:throw n.ErrorMsg.binaryOperatorMissingOperand("");case 98:this.$=n.Sum;break;case 99:this.$=n.Product;break;case 100:this.$=a[s-8]([a[s-5],a[s-3],a[s-1],a[s]]);break;case 101:this.$=n.Integral([n.Identifier(a[s]),a[s-3],a[s-2],a[s-1]]);break;case 102:this.$=n.Integral([n.Identifier(a[s]),a[s-2],a[s-1],n.Constant(1)]);break;case 103:throw n.ErrorMsg.missingIntegralBounds();case 104:this.$=n.Piecewise.chain(a[s-1]);break;case 105:this.$=n.Piecewise.empty();break;case 106:a[s-2].push({condition:n.Constant(!0),if_expr:a[s]}),this.$=a[s-2];break;case 107:this.$=a[s];break;case 108:a[s-2].push(a[s]),this.$=a[s-2];break;case 109:this.$=[a[s]];break;case 110:this.$={condition:a[s-2],if_expr:a[s]};break;case 111:this.$={condition:a[s],if_expr:n.Constant(1)};break;case 112:this.$=n.Constant(Number(e));break;case 113:this.$=n.Constant(-a[s]);break;case 114:this.$=n.FunctionExponent([a[s-4],a[s-2],a[s]]);break;case 115:this.$=n.FunctionCall(a[s-3],[a[s-1]]);break;case 116:this.$=n.Identifier(e),n.setInput(this.$,this._$);break;case 117:this.$=n.FunctionCall(a[s-3],[a[s-1]]);break;case 118:if(!a[s].okForImplicitFunction())throw n.ErrorMsg.badImplicitMultiply(a[s-1]._symbol);this.$=n.FunctionCall(a[s-1],[a[s]]);break;case 119:if(!a[s].okForImplicitFunction())throw n.ErrorMsg.badImplicitMultiply(a[s-6]._symbol);if(1!=a[s-2].constantValue)throw n.ErrorMsg.badTrigExponent(a[s-6]._symbol);this.$=n.FunctionCall(n.inverses[a[s-6]._symbol],[a[s]]);break;case 120:if(1!=a[s-4].constantValue)throw n.ErrorMsg.badTrigExponent(a[s-8]._symbol);this.$=n.FunctionCall(n.inverses[a[s-8]._symbol],[a[s-1]]);break;case 121:if(!a[s].okForImplicitFunction())throw n.ErrorMsg.badImplicitMultiply(a[s-2]._symbol);if("2"!=a[s-1])throw n.ErrorMsg.badTrigExponent(a[s-2]._symbol);this.$=n.Exponent([n.FunctionCall(a[s-2],[a[s]]),n.Constant(2)]);break;case 122:if("2"!=a[s-3])throw n.ErrorMsg.badTrigExponent(a[s-4]._symbol);this.$=n.Exponent([n.FunctionCall(a[s-4],[a[s-1]]),n.Constant(2)]);break;case 123:this.$=a[s];break;case 124:this.$=n.Constant(Number(e));break;case 125:this.$=n.FunctionCall("logbase",[a[s-1],a[s-3]]);break;case 126:if(!a[s].okForImplicitFunction())throw n.ErrorMsg.badImplicitMultiply("logbase");this.$=n.FunctionCall("logbase",[a[s],a[s-1]]);break;case 127:if("2"!=a[s-3])throw n.ErrorMsg.badLogExponent("logbase");this.$=n.Exponent([n.FunctionCall("logbase",[a[s-1],a[s-4]]),n.Constant(2)]);break;case 128:if(!a[s].okForImplicitFunction())throw n.ErrorMsg.badImplicitMultiply("logbase");if("2"!=a[s-1])throw n.ErrorMsg.badLogExponent("logbase");this.$=n.Exponent([n.FunctionCall("logbase",[a[s],a[s-2]]),n.Constant(2)]);break;case 129:this.$="ln";break;case 130:this.$="log";break;case 131:this.$=n.FunctionCall(a[s-3],[a[s-1]]);break;case 132:if(!a[s].okForImplicitFunction())throw n.ErrorMsg.badImplicitMultiply(a[s-1]);this.$=n.FunctionCall(a[s-1],[a[s]]);break;case 133:if("2"!=a[s-3])throw n.ErrorMsg.badLogExponent(a[s-4]);this.$=n.Exponent([n.FunctionCall(a[s-4],[a[s-1]]),n.Constant(2)]);break;case 134:if(!a[s].okForImplicitFunction())throw n.ErrorMsg.badImplicitMultiply(a[s-2]);if("2"!=a[s-1])throw n.ErrorMsg.badLogExponent(a[s-2]);this.$=n.Exponent([n.FunctionCall(a[s-2],[a[s]]),n.Constant(2)]);break;case 135:this.$=n.FunctionCall(a[s-3],a[s-1]);break;case 136:this.$=n.Prime(a[s-3],[n.FunctionCall(a[s-4],[a[s-1]])]);break;case 137:this.$=n.Prime(a[s-3],[n.FunctionCall(a[s-4],[a[s-1]])]);break;case 138:this.$=n.Prime(a[s-3],[n.FunctionCall(a[s-4],[a[s-1]])]);break;case 139:this.$=n.Prime(a[s-3],[n.FunctionCall("logbase",[a[s-1],a[s-4]])]);break;case 140:throw n.ErrorMsg.primedFunctionArity();case 141:this.$=a[s-1]+1;break;case 142:this.$=1;break;case 143:this.$=a[s-2].concat([a[s]]);break;case 144:this.$=[a[s-2],a[s]];break;case 145:var h=n.parseFunctionDeclaration(a[s-1]);this.$=n.FunctionDefinition(h.identifier,h.args,a[s]),n.setInput(this.$,this._$)}},table:[{3:1,4:2,5:[1,12],6:3,7:4,8:5,9:6,10:7,11:8,12:9,13:10,15:[1,11],19:[1,15],20:14,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{1:[3]},{5:[1,59],14:[1,61],16:[1,60],17:[1,62],18:63,36:[1,64],37:[1,65],38:[1,66],39:[1,67]},{5:[1,68]},{5:[1,69]},{5:[1,70]},{5:[1,71]},{5:[1,72]},{5:[1,73]},{5:[1,74]},{5:[2,57],14:[1,75],16:[2,57],17:[2,57],19:[2,57],22:[1,76],25:[2,57],36:[2,57],37:[2,57],38:[2,57],39:[2,57],40:[2,57],42:[2,57],43:[2,57],44:[2,57],46:[2,57],47:[2,57],48:[2,57],49:[2,57],61:[2,57],62:[2,57],64:[2,57],65:[2,57],66:[2,57],69:[2,57],75:[2,57],76:[2,57],77:[2,57],79:[2,57],86:[2,57],88:[2,57],89:[2,57],91:[2,57],93:77,94:[1,78]},{4:80,5:[1,79],13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{1:[2,12]},{5:[2,32],14:[2,32],16:[2,32],17:[2,32],19:[2,32],22:[2,32],23:[2,32],25:[2,32],27:[2,32],30:[2,32],36:[2,32],37:[2,32],38:[2,32],39:[2,32],40:[1,83],42:[1,84],43:[2,32],44:[2,32],46:[2,32],47:[2,32],48:[2,32],49:[2,32],50:[2,32],61:[2,32],62:[2,32],63:[2,32],64:[2,32],65:[2,32],66:[2,32],69:[2,32],75:[2,32],76:[2,32],77:[2,32],78:[2,32],79:[2,32],81:[2,32],84:[2,32],86:[2,32],\n88:[2,32],89:[2,32],91:[2,32]},{5:[2,89],14:[2,89],16:[1,85],17:[2,89],19:[2,89],22:[2,89],25:[2,89],36:[2,89],37:[2,89],38:[2,89],39:[2,89],40:[2,89],42:[2,89],43:[2,89],44:[2,89],46:[2,89],47:[2,89],48:[2,89],49:[2,89],61:[2,89],62:[2,89],64:[2,89],65:[2,89],66:[2,89],69:[2,89],75:[2,89],76:[2,89],77:[2,89],79:[2,89],86:[2,89],88:[2,89],89:[2,89],91:[2,89]},{5:[2,17],14:[2,17],16:[2,17],17:[2,17],19:[2,17],22:[2,17],23:[2,17],25:[2,17],27:[2,17],30:[2,17],36:[2,17],37:[2,17],38:[2,17],39:[2,17],40:[2,17],42:[2,17],43:[2,17],44:[2,17],46:[2,17],47:[2,17],48:[2,17],49:[2,17],50:[2,17],61:[2,17],62:[2,17],63:[2,17],64:[2,17],65:[2,17],66:[2,17],69:[2,17],75:[2,17],76:[2,17],77:[2,17],78:[2,17],79:[2,17],81:[2,17],84:[2,17],86:[2,17],88:[2,17],89:[2,17],91:[2,17],94:[2,17]},{5:[2,44],13:82,14:[2,44],16:[2,44],17:[2,44],19:[1,15],22:[1,89],23:[2,44],25:[2,44],27:[2,44],30:[2,44],31:34,32:86,36:[2,44],37:[2,44],38:[2,44],39:[2,44],40:[2,44],42:[2,44],43:[1,87],44:[1,88],46:[2,44],47:[2,44],48:[2,44],49:[1,36],50:[2,44],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,44],64:[1,38],65:[1,39],66:[2,44],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,44],79:[1,52],81:[2,44],84:[2,44],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:90,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,50],14:[2,50],16:[2,50],17:[2,50],19:[2,50],22:[2,50],23:[2,50],25:[1,93],27:[2,50],30:[2,50],36:[2,50],37:[2,50],38:[2,50],39:[2,50],40:[2,50],42:[2,50],43:[2,50],44:[2,50],45:91,46:[1,94],47:[1,95],48:[1,96],49:[2,50],50:[2,50],61:[2,50],62:[2,50],63:[2,50],64:[2,50],65:[2,50],66:[1,92],69:[2,50],75:[2,50],76:[2,50],77:[2,50],78:[2,50],79:[2,50],81:[2,50],84:[2,50],86:[2,50],88:[2,50],89:[2,50],91:[2,50]},{5:[2,81],14:[2,81],16:[2,81],17:[2,81],19:[2,81],22:[2,81],23:[2,81],25:[2,81],27:[2,81],30:[2,81],36:[2,81],37:[2,81],38:[2,81],39:[2,81],40:[2,81],42:[2,81],43:[2,81],44:[2,81],46:[2,81],47:[2,81],48:[2,81],49:[2,81],50:[2,81],61:[2,81],62:[2,81],63:[2,81],64:[2,81],65:[2,81],66:[2,81],69:[2,81],75:[2,81],76:[2,81],77:[2,81],78:[2,81],79:[2,81],81:[2,81],84:[2,81],86:[2,81],88:[2,81],89:[2,81],91:[2,81]},{13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:98,40:[1,44],42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,97],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,86],14:[2,86],16:[2,86],17:[2,86],19:[2,86],22:[2,86],23:[2,86],25:[2,86],27:[2,86],30:[2,86],36:[2,86],37:[2,86],38:[2,86],39:[2,86],40:[2,86],42:[2,86],43:[2,86],44:[2,86],46:[2,86],47:[2,86],48:[2,86],49:[2,86],50:[2,86],61:[2,86],62:[2,86],63:[2,86],64:[2,86],65:[2,86],66:[2,86],69:[2,86],75:[2,86],76:[2,86],77:[2,86],78:[2,86],79:[2,86],81:[2,86],84:[2,86],86:[2,86],88:[2,86],89:[2,86],91:[2,86]},{5:[2,87],14:[2,87],16:[2,87],17:[2,87],19:[2,87],22:[2,87],23:[2,87],25:[2,87],27:[2,87],30:[2,87],36:[2,87],37:[2,87],38:[2,87],39:[2,87],40:[2,87],42:[2,87],43:[2,87],44:[2,87],46:[2,87],47:[2,87],48:[2,87],49:[2,87],50:[2,87],61:[2,87],62:[2,87],63:[2,87],64:[2,87],65:[2,87],66:[2,87],69:[2,87],75:[2,87],76:[2,87],77:[2,87],78:[2,87],79:[2,87],81:[2,87],84:[2,87],86:[2,87],88:[2,87],89:[2,87],91:[2,87]},{5:[2,88],14:[2,88],16:[2,88],17:[2,88],19:[2,88],22:[2,88],23:[2,88],25:[2,88],27:[2,88],30:[2,88],36:[2,88],37:[2,88],38:[2,88],39:[2,88],40:[2,88],42:[2,88],43:[2,88],44:[2,88],46:[2,88],47:[2,88],48:[2,88],49:[2,88],50:[2,88],61:[2,88],62:[2,88],63:[2,88],64:[2,88],65:[2,88],66:[2,88],69:[2,88],75:[2,88],76:[2,88],77:[2,88],78:[2,88],79:[2,88],81:[2,88],84:[2,88],86:[2,88],88:[2,88],89:[2,88],91:[2,88]},{5:[2,90],14:[2,90],16:[2,90],17:[2,90],19:[2,90],22:[2,90],23:[2,90],25:[1,101],27:[2,90],30:[2,90],36:[2,90],37:[2,90],38:[2,90],39:[2,90],40:[2,90],42:[2,90],43:[2,90],44:[2,90],45:99,46:[1,94],47:[1,95],48:[1,96],49:[2,90],50:[2,90],61:[2,90],62:[2,90],63:[2,90],64:[2,90],65:[2,90],66:[1,100],69:[2,90],75:[2,90],76:[2,90],77:[2,90],78:[2,90],79:[2,90],81:[2,90],84:[2,90],86:[2,90],88:[2,90],89:[2,90],91:[2,90]},{5:[2,91],14:[2,91],16:[2,91],17:[2,91],19:[2,91],22:[2,91],23:[2,91],25:[2,91],27:[2,91],30:[2,91],36:[2,91],37:[2,91],38:[2,91],39:[2,91],40:[2,91],42:[2,91],43:[2,91],44:[2,91],46:[2,91],47:[2,91],48:[2,91],49:[2,91],50:[2,91],61:[2,91],62:[2,91],63:[2,91],64:[2,91],65:[2,91],66:[2,91],69:[2,91],75:[2,91],76:[2,91],77:[2,91],78:[2,91],79:[2,91],81:[2,91],84:[2,91],86:[2,91],88:[2,91],89:[2,91],91:[2,91]},{5:[2,112],14:[2,112],16:[2,112],17:[2,112],19:[2,112],22:[2,112],23:[2,112],25:[2,112],27:[2,112],30:[2,112],36:[2,112],37:[2,112],38:[2,112],39:[2,112],40:[2,112],42:[2,112],43:[2,112],44:[2,112],46:[2,112],47:[2,112],48:[2,112],49:[2,112],50:[2,112],61:[2,112],62:[2,112],63:[2,112],64:[2,112],65:[2,112],66:[2,112],69:[2,112],75:[2,112],76:[2,112],77:[2,112],78:[2,112],79:[2,112],81:[2,112],84:[2,112],86:[2,112],88:[2,112],89:[2,112],91:[2,112]},{4:103,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],26:102,28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,58],14:[2,58],16:[2,58],17:[2,58],19:[2,58],22:[2,58],23:[2,58],25:[2,58],27:[2,58],30:[2,58],36:[2,58],37:[2,58],38:[2,58],39:[2,58],40:[2,58],42:[2,58],43:[2,58],44:[2,58],46:[2,58],47:[2,58],48:[2,58],49:[2,58],50:[2,58],61:[2,58],62:[2,58],63:[2,58],64:[2,58],65:[2,58],66:[2,58],69:[2,58],75:[2,58],76:[2,58],77:[2,58],78:[2,58],79:[2,58],81:[2,58],84:[2,58],86:[2,58],88:[2,58],89:[2,58],91:[2,58]},{5:[2,59],14:[2,59],16:[2,59],17:[2,59],19:[2,59],22:[2,59],23:[2,59],25:[2,59],27:[2,59],30:[2,59],36:[2,59],37:[2,59],38:[2,59],39:[2,59],40:[2,59],42:[2,59],43:[2,59],44:[2,59],46:[2,59],47:[2,59],48:[2,59],49:[2,59],50:[2,59],61:[2,59],62:[2,59],63:[2,59],64:[2,59],65:[2,59],66:[2,59],69:[2,59],75:[2,59],76:[2,59],77:[2,59],78:[2,59],79:[2,59],81:[2,59],84:[2,59],86:[2,59],88:[2,59],89:[2,59],91:[2,59]},{5:[2,60],14:[2,60],16:[2,60],17:[2,60],19:[2,60],22:[2,60],23:[2,60],25:[2,60],27:[2,60],30:[2,60],36:[2,60],37:[2,60],38:[2,60],39:[2,60],40:[2,60],42:[2,60],43:[2,60],44:[2,60],46:[2,60],47:[2,60],48:[2,60],49:[2,60],50:[2,60],61:[2,60],62:[2,60],63:[2,60],64:[2,60],65:[2,60],66:[2,60],69:[2,60],75:[2,60],76:[2,60],77:[2,60],78:[2,60],79:[2,60],81:[2,60],84:[2,60],86:[2,60],88:[2,60],89:[2,60],91:[2,60]},{5:[2,61],14:[2,61],16:[2,61],17:[2,61],19:[2,61],22:[2,61],23:[2,61],25:[2,61],27:[2,61],30:[2,61],36:[2,61],37:[2,61],38:[2,61],39:[2,61],40:[2,61],42:[2,61],43:[2,61],44:[2,61],46:[2,61],47:[2,61],48:[2,61],49:[2,61],50:[2,61],61:[2,61],62:[2,61],63:[2,61],64:[2,61],65:[2,61],66:[2,61],69:[2,61],75:[2,61],76:[2,61],77:[2,61],78:[2,61],79:[2,61],81:[2,61],84:[2,61],86:[2,61],88:[2,61],89:[2,61],91:[2,61]},{5:[2,62],14:[2,62],16:[2,62],17:[2,62],19:[2,62],22:[2,62],23:[2,62],25:[2,62],27:[2,62],30:[2,62],36:[2,62],37:[2,62],38:[2,62],39:[2,62],40:[2,62],42:[2,62],43:[2,62],44:[2,62],46:[2,62],47:[2,62],48:[2,62],49:[2,62],50:[2,62],61:[2,62],62:[2,62],63:[2,62],64:[2,62],65:[2,62],66:[2,62],69:[2,62],75:[2,62],76:[2,62],77:[2,62],78:[2,62],79:[2,62],81:[2,62],84:[2,62],86:[2,62],88:[2,62],89:[2,62],91:[2,62]},{5:[2,63],14:[2,63],16:[2,63],17:[2,63],19:[2,63],22:[2,63],23:[2,63],25:[2,63],27:[2,63],30:[2,63],36:[2,63],37:[2,63],38:[2,63],39:[2,63],40:[2,63],42:[2,63],43:[2,63],44:[2,63],46:[2,63],47:[2,63],48:[2,63],49:[2,63],50:[2,63],61:[2,63],62:[2,63],63:[2,63],64:[2,63],65:[2,63],66:[2,63],69:[2,63],75:[2,63],76:[2,63],77:[2,63],78:[2,63],79:[2,63],81:[2,63],84:[2,63],86:[2,63],88:[2,63],89:[2,63],91:[2,63]},{5:[2,64],14:[2,64],16:[2,64],17:[2,64],19:[2,64],22:[2,64],23:[2,64],25:[2,64],27:[2,64],30:[2,64],36:[2,64],37:[2,64],38:[2,64],39:[2,64],40:[2,64],42:[2,64],43:[2,64],44:[2,64],46:[2,64],47:[2,64],48:[2,64],49:[2,64],50:[2,64],61:[2,64],62:[2,64],63:[2,64],64:[2,64],65:[2,64],66:[2,64],69:[2,64],75:[2,64],76:[2,64],77:[2,64],78:[2,64],79:[2,64],81:[2,64],84:[2,64],86:[2,64],88:[2,64],89:[2,64],91:[2,64]},{5:[2,65],14:[2,65],16:[2,65],17:[2,65],19:[2,65],22:[2,65],23:[2,65],25:[2,65],27:[2,65],30:[2,65],36:[2,65],37:[2,65],38:[2,65],39:[2,65],40:[2,65],42:[2,65],43:[2,65],44:[2,65],46:[2,65],47:[2,65],48:[2,65],49:[2,65],50:[2,65],61:[2,65],62:[2,65],63:[2,65],64:[2,65],65:[2,65],66:[2,65],69:[2,65],75:[2,65],76:[2,65],77:[2,65],78:[2,65],79:[2,65],81:[2,65],84:[2,65],86:[2,65],88:[2,65],89:[2,65],91:[2,65]},{4:104,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:105,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{49:[1,106]},{25:[1,108],49:[1,107]},{5:[2,77],14:[2,77],16:[2,77],17:[2,77],19:[2,77],22:[2,77],23:[2,77],25:[2,77],27:[2,77],30:[2,77],36:[2,77],37:[2,77],38:[2,77],39:[2,77],40:[2,77],42:[2,77],43:[2,77],44:[2,77],46:[2,77],47:[2,77],48:[2,77],49:[2,77],50:[2,77],61:[2,77],62:[2,77],63:[2,77],64:[2,77],65:[2,77],66:[2,77],69:[2,77],75:[2,77],76:[2,77],77:[2,77],78:[2,77],79:[2,77],81:[2,77],84:[2,77],86:[2,77],88:[2,77],89:[2,77],91:[2,77]},{5:[2,78],14:[2,78],16:[2,78],17:[2,78],19:[2,78],22:[2,78],23:[2,78],25:[2,78],27:[2,78],30:[2,78],36:[2,78],37:[2,78],38:[2,78],39:[2,78],40:[2,78],42:[2,78],43:[2,78],44:[2,78],46:[2,78],47:[2,78],48:[2,78],49:[2,78],50:[2,78],61:[2,78],62:[2,78],63:[2,78],64:[2,78],65:[2,78],66:[2,78],69:[2,78],75:[2,78],76:[2,78],77:[2,78],78:[2,78],79:[2,78],81:[2,78],84:[2,78],86:[2,78],88:[2,78],89:[2,78],91:[2,78]},{13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:109,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,80],14:[2,80],16:[2,80],17:[2,80],19:[2,80],22:[2,80],23:[2,80],25:[2,80],27:[2,80],30:[2,80],36:[2,80],37:[2,80],38:[2,80],39:[2,80],40:[2,80],42:[2,80],43:[2,80],44:[2,80],46:[2,80],47:[2,80],48:[2,80],49:[2,80],50:[2,80],61:[2,80],62:[2,80],63:[2,80],64:[2,80],65:[2,80],66:[2,80],69:[2,80],75:[2,80],76:[2,80],77:[2,80],78:[2,80],79:[2,80],81:[2,80],84:[2,80],86:[2,80],88:[2,80],89:[2,80],91:[2,80]},{5:[2,93],13:82,14:[2,93],16:[2,93],17:[2,93],19:[1,15],20:81,22:[1,17],23:[2,93],24:21,25:[1,27],27:[2,93],28:22,30:[2,93],31:34,32:24,33:23,34:110,36:[2,93],37:[2,93],38:[2,93],39:[2,93],40:[1,44],42:[1,20],43:[1,45],44:[1,46],46:[2,93],47:[2,93],48:[2,93],49:[1,36],50:[2,93],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,93],64:[1,38],65:[1,39],66:[2,93],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,93],79:[1,52],81:[2,93],84:[2,93],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,94],13:82,14:[2,94],16:[2,94],17:[2,94],19:[1,15],20:81,22:[1,17],23:[2,94],24:21,25:[1,27],27:[2,94],28:22,30:[2,94],31:34,32:24,33:23,34:111,36:[2,94],37:[2,94],38:[2,94],39:[2,94],40:[1,44],42:[1,20],43:[1,45],44:[1,46],46:[2,94],47:[2,94],48:[2,94],49:[1,36],50:[2,94],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,94],64:[1,38],65:[1,39],66:[2,94],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,94],79:[1,52],81:[2,94],84:[2,94],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,96],13:82,14:[2,96],16:[2,96],17:[2,96],19:[1,15],20:81,22:[1,17],23:[2,96],24:21,25:[1,27],27:[2,96],28:22,30:[2,96],31:34,32:24,33:23,34:112,36:[2,96],37:[2,96],38:[2,96],39:[2,96],40:[1,44],42:[1,20],43:[1,45],44:[1,46],46:[2,96],47:[2,96],48:[2,96],49:[1,36],50:[2,96],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,96],64:[1,38],65:[1,39],66:[2,96],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,96],79:[1,52],81:[2,96],84:[2,96],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{13:82,19:[1,15],20:81,22:[1,114],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:115,42:[1,20],43:[1,45],44:[1,46],46:[1,117],48:[1,116],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54],93:113,94:[1,78]},{13:82,19:[1,15],20:81,22:[1,119],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:120,42:[1,20],43:[1,45],44:[1,46],46:[1,121],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54],93:118,94:[1,78]},{13:82,19:[1,15],20:81,22:[1,123],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:124,42:[1,20],43:[1,45],44:[1,46],46:[1,125],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54],93:122,94:[1,78]},{54:[1,126]},{4:128,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],51:127,52:[1,129],53:[1,130],54:[1,131],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:137,12:136,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],80:132,81:[1,133],82:134,83:135,85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{19:[2,116],22:[2,116],25:[2,116],40:[2,116],42:[2,116],43:[2,116],44:[2,116],46:[2,116],48:[2,116],49:[2,116],61:[2,116],62:[2,116],64:[2,116],65:[2,116],69:[2,116],72:[2,116],75:[2,116],76:[2,116],77:[2,116],79:[2,116],86:[2,116],88:[2,116],89:[2,116],91:[2,116],94:[2,116]},{19:[2,129],22:[2,129],25:[2,129],40:[2,129],42:[2,129],43:[2,129],44:[2,129],46:[2,129],49:[2,129],61:[2,129],62:[2,129],64:[2,129],65:[2,129],69:[2,129],72:[2,129],75:[2,129],76:[2,129],77:[2,129],79:[2,129],86:[2,129],88:[2,129],89:[2,129],91:[2,129],94:[2,129]},{19:[2,130],22:[2,130],25:[2,130],40:[2,130],42:[2,130],43:[2,130],44:[2,130],46:[2,130],49:[2,130],51:138,52:[1,129],53:[1,130],54:[1,131],61:[2,130],62:[2,130],64:[2,130],65:[2,130],69:[2,130],72:[2,130],75:[2,130],76:[2,130],77:[2,130],79:[2,130],86:[2,130],88:[2,130],89:[2,130],91:[2,130],94:[2,130]},{19:[2,124],22:[2,124],25:[2,124],40:[2,124],42:[2,124],43:[2,124],44:[2,124],46:[2,124],49:[2,124],61:[2,124],62:[2,124],64:[2,124],65:[2,124],69:[2,124],72:[2,124],75:[2,124],76:[2,124],77:[2,124],79:[2,124],86:[2,124],88:[2,124],89:[2,124],91:[2,124],94:[2,124]},{54:[2,98]},{54:[2,99]},{1:[2,1]},{4:139,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:140,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:141,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:143,13:142,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{19:[2,33],22:[2,33],25:[2,33],40:[2,33],42:[2,33],43:[2,33],44:[2,33],49:[2,33],61:[2,33],62:[2,33],64:[2,33],65:[2,33],69:[2,33],72:[2,33],75:[2,33],76:[2,33],77:[2,33],79:[2,33],86:[2,33],88:[2,33],89:[2,33],91:[2,33]},{19:[2,34],22:[2,34],25:[2,34],40:[2,34],42:[2,34],43:[2,34],44:[2,34],49:[2,34],61:[2,34],62:[2,34],64:[2,34],65:[2,34],69:[2,34],72:[2,34],75:[2,34],76:[2,34],77:[2,34],79:[2,34],86:[2,34],88:[2,34],89:[2,34],91:[2,34]},{19:[2,35],22:[2,35],25:[2,35],40:[2,35],42:[2,35],43:[2,35],44:[2,35],49:[2,35],61:[2,35],62:[2,35],64:[2,35],65:[2,35],69:[2,35],72:[2,35],75:[2,35],76:[2,35],77:[2,35],79:[2,35],86:[2,35],88:[2,35],89:[2,35],91:[2,35]},{19:[2,36],22:[2,36],25:[2,36],40:[2,36],42:[2,36],43:[2,36],44:[2,36],49:[2,36],61:[2,36],62:[2,36],64:[2,36],65:[2,36],69:[2,36],72:[2,36],75:[2,36],76:[2,36],77:[2,36],79:[2,36],86:[2,36],88:[2,36],89:[2,36],91:[2,36]},{1:[2,2]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{1:[2,8]},{4:145,5:[1,144],13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:147,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54],92:146},{22:[1,148],94:[1,149]},{22:[2,142],94:[2,142]},{1:[2,10]},{5:[2,145]},{5:[2,89],14:[2,89],16:[2,89],17:[2,89],19:[2,89],22:[2,89],23:[2,89],25:[2,89],27:[2,89],30:[2,89],36:[2,89],37:[2,89],38:[2,89],39:[2,89],40:[2,89],42:[2,89],43:[2,89],44:[2,89],46:[2,89],47:[2,89],48:[2,89],49:[2,89],50:[2,89],61:[2,89],62:[2,89],63:[2,89],64:[2,89],65:[2,89],66:[2,89],69:[2,89],75:[2,89],76:[2,89],77:[2,89],78:[2,89],79:[2,89],81:[2,89],84:[2,89],86:[2,89],88:[2,89],89:[2,89],91:[2,89]},{5:[2,57],14:[2,57],16:[2,57],17:[2,57],19:[2,57],22:[1,76],23:[2,57],25:[2,57],27:[2,57],30:[2,57],36:[2,57],37:[2,57],38:[2,57],39:[2,57],40:[2,57],42:[2,57],43:[2,57],44:[2,57],46:[2,57],47:[2,57],48:[2,57],49:[2,57],50:[2,57],61:[2,57],62:[2,57],63:[2,57],64:[2,57],65:[2,57],66:[2,57],69:[2,57],75:[2,57],76:[2,57],77:[2,57],78:[2,57],79:[2,57],81:[2,57],84:[2,57],86:[2,57],88:[2,57],89:[2,57],91:[2,57],93:77,94:[1,78]},{5:[2,42],13:82,14:[2,42],16:[2,42],17:[2,42],19:[1,15],20:81,22:[1,17],23:[2,42],24:21,25:[1,27],27:[2,42],28:22,30:[2,42],31:34,32:24,33:23,34:18,36:[2,42],37:[2,42],38:[2,42],39:[2,42],40:[1,44],41:150,42:[1,20],43:[1,45],44:[1,46],46:[2,42],47:[2,42],48:[2,42],49:[1,36],50:[2,42],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,42],64:[1,38],65:[1,39],66:[2,42],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,42],79:[1,52],81:[2,42],84:[2,42],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,43],13:82,14:[2,43],16:[2,43],17:[2,43],19:[1,15],20:81,22:[1,17],23:[2,43],24:21,25:[1,27],27:[2,43],28:22,30:[2,43],31:34,32:24,33:23,34:18,36:[2,43],37:[2,43],38:[2,43],39:[2,43],40:[1,44],41:151,42:[1,20],43:[1,45],44:[1,46],46:[2,43],47:[2,43],48:[2,43],49:[1,36],50:[2,43],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,43],64:[1,38],65:[1,39],66:[2,43],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,43],79:[1,52],81:[2,43],84:[2,43],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{20:153,21:152,22:[1,154]},{5:[2,45],14:[2,45],16:[2,45],17:[2,45],19:[2,45],22:[2,45],23:[2,45],25:[1,101],27:[2,45],30:[2,45],36:[2,45],37:[2,45],38:[2,45],39:[2,45],40:[2,45],42:[2,45],43:[2,45],44:[2,45],45:99,46:[1,94],47:[1,95],48:[1,96],49:[2,45],50:[2,45],61:[2,45],62:[2,45],63:[2,45],64:[2,45],65:[2,45],66:[1,100],69:[2,45],75:[2,45],76:[2,45],77:[2,45],78:[2,45],79:[2,45],81:[2,45],84:[2,45],86:[2,45],88:[2,45],89:[2,45],91:[2,45]},{5:[2,48],13:82,14:[2,48],16:[2,48],17:[2,48],19:[1,15],20:81,22:[1,17],23:[2,48],24:21,25:[1,27],27:[2,48],28:22,30:[2,48],31:34,32:24,33:23,34:155,36:[2,48],37:[2,48],38:[2,48],39:[2,48],40:[1,44],42:[1,20],43:[1,45],44:[1,46],46:[2,48],47:[2,48],48:[2,48],49:[1,36],50:[2,48],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,48],64:[1,38],65:[1,39],66:[2,48],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,48],79:[1,52],81:[2,48],84:[2,48],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,49],13:82,14:[2,49],16:[2,49],17:[2,49],19:[1,15],20:81,22:[1,17],23:[2,49],24:21,25:[1,27],27:[2,49],28:22,30:[2,49],31:34,32:24,33:23,34:156,36:[2,49],37:[2,49],38:[2,49],39:[2,49],40:[1,44],42:[1,20],43:[1,45],44:[1,46],46:[2,49],47:[2,49],48:[2,49],49:[1,36],50:[2,49],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,49],64:[1,38],65:[1,39],66:[2,49],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,49],79:[1,52],81:[2,49],84:[2,49],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:157,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{16:[1,158],23:[1,159]},{5:[2,83],14:[2,83],16:[2,83],17:[2,83],19:[2,83],22:[2,83],23:[2,83],25:[2,83],27:[2,83],30:[2,83],36:[2,83],37:[2,83],38:[2,83],39:[2,83],40:[2,83],42:[2,83],43:[2,83],44:[2,83],46:[2,83],47:[2,83],48:[2,83],49:[2,83],50:[2,83],61:[2,83],62:[2,83],63:[2,83],64:[2,83],65:[2,83],66:[2,83],69:[2,83],75:[2,83],76:[2,83],77:[2,83],78:[2,83],79:[2,83],81:[2,83],84:[2,83],86:[2,83],88:[2,83],89:[2,83],91:[2,83]},{5:[2,84],14:[2,84],16:[2,84],17:[2,84],19:[2,84],22:[2,84],23:[2,84],25:[2,84],27:[2,84],30:[2,84],36:[2,84],37:[2,84],38:[2,84],39:[2,84],40:[2,84],42:[2,84],43:[2,84],44:[2,84],46:[2,84],47:[2,84],48:[2,84],49:[2,84],50:[2,84],61:[2,84],62:[2,84],63:[2,84],64:[2,84],65:[2,84],66:[2,84],69:[2,84],75:[2,84],76:[2,84],77:[2,84],78:[2,84],79:[2,84],81:[2,84],84:[2,84],86:[2,84],88:[2,84],89:[2,84],91:[2,84]},{4:160,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,51],14:[2,51],16:[2,51],17:[2,51],19:[2,51],22:[2,51],23:[2,51],25:[2,51],27:[2,51],30:[2,51],36:[2,51],37:[2,51],38:[2,51],39:[2,51],40:[2,51],42:[2,51],43:[2,51],44:[2,51],46:[2,51],47:[2,51],48:[2,51],49:[2,51],50:[2,51],61:[2,51],62:[2,51],63:[2,51],64:[2,51],65:[2,51],66:[2,51],69:[2,51],72:[2,51],75:[2,51],76:[2,51],77:[2,51],78:[2,51],79:[2,51],81:[2,51],84:[2,51],86:[2,51],88:[2,51],89:[2,51],91:[2,51]},{5:[2,52],14:[2,52],16:[2,52],17:[2,52],19:[2,52],22:[2,52],23:[2,52],25:[2,52],27:[2,52],30:[2,52],36:[2,52],37:[2,52],38:[2,52],39:[2,52],40:[2,52],42:[2,52],43:[2,52],44:[2,52],46:[2,52],47:[2,52],48:[2,52],49:[2,52],50:[2,52],61:[2,52],62:[2,52],63:[2,52],64:[2,52],65:[2,52],66:[2,52],69:[2,52],72:[2,52],75:[2,52],76:[2,52],77:[2,52],78:[2,52],79:[2,52],81:[2,52],84:[2,52],86:[2,52],88:[2,52],89:[2,52],91:[2,52]},{49:[1,161]},{5:[2,113],14:[2,113],16:[2,113],17:[2,113],19:[2,113],22:[2,113],23:[2,113],25:[2,113],27:[2,113],30:[2,113],36:[2,113],37:[2,113],38:[2,113],39:[2,113],40:[2,113],42:[2,113],43:[2,113],44:[2,113],45:162,46:[1,94],47:[1,95],48:[1,96],49:[2,113],50:[2,113],61:[2,113],62:[2,113],63:[2,113],64:[2,113],65:[2,113],66:[2,113],69:[2,113],75:[2,113],76:[2,113],77:[2,113],78:[2,113],79:[2,113],81:[2,113],84:[2,113],86:[2,113],88:[2,113],89:[2,113],91:[2,113]},{5:[2,85],14:[2,85],16:[2,85],17:[2,85],19:[2,85],22:[2,85],23:[2,85],25:[1,93],27:[2,85],30:[2,85],36:[2,85],37:[2,85],38:[2,85],39:[2,85],40:[2,85],42:[2,85],43:[2,85],44:[2,85],45:91,46:[1,94],47:[1,95],48:[1,96],49:[2,85],50:[2,85],61:[2,85],62:[2,85],63:[2,85],64:[2,85],65:[2,85],66:[1,92],69:[2,85],75:[2,85],76:[2,85],77:[2,85],78:[2,85],79:[2,85],81:[2,85],84:[2,85],86:[2,85],88:[2,85],89:[2,85],91:[2,85]},{5:[2,69],14:[2,69],16:[2,69],17:[2,69],19:[2,69],22:[2,69],23:[2,69],25:[2,69],27:[2,69],30:[2,69],36:[2,69],37:[2,69],38:[2,69],39:[2,69],40:[2,69],42:[2,69],43:[2,69],44:[2,69],46:[2,69],47:[2,69],48:[2,69],49:[2,69],50:[2,69],61:[2,69],62:[2,69],63:[2,69],64:[2,69],65:[2,69],66:[2,69],69:[2,69],75:[2,69],76:[2,69],77:[2,69],78:[2,69],79:[2,69],81:[2,69],84:[2,69],86:[2,69],88:[2,69],89:[2,69],91:[2,69]},{5:[2,76],14:[2,76],16:[2,76],17:[2,76],19:[2,76],22:[2,76],23:[2,76],25:[2,76],27:[2,76],30:[2,76],36:[2,76],37:[2,76],38:[2,76],39:[2,76],40:[2,76],42:[2,76],43:[2,76],44:[2,76],46:[2,76],47:[2,76],48:[2,76],49:[2,76],50:[2,76],61:[2,76],62:[2,76],63:[2,76],64:[2,76],65:[2,76],66:[2,76],69:[2,76],75:[2,76],76:[2,76],77:[2,76],78:[2,76],79:[2,76],81:[2,76],84:[2,76],86:[2,76],88:[2,76],89:[2,76],91:[2,76]},{4:163,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{16:[1,166],27:[1,164],29:165,30:[1,167]},{16:[2,28],27:[2,28],30:[2,28]},{50:[1,168]},{63:[1,169]},{4:171,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],50:[1,170],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:172,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:173,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,79],13:82,14:[2,79],16:[2,79],17:[2,79],19:[1,15],22:[1,89],23:[2,79],25:[2,79],27:[2,79],30:[2,79],31:34,32:86,36:[2,79],37:[2,79],38:[2,79],39:[2,79],40:[2,79],42:[2,79],43:[1,87],44:[1,88],46:[2,79],47:[2,79],48:[2,79],49:[1,36],50:[2,79],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,79],64:[1,38],65:[1,39],66:[2,79],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,79],79:[1,52],81:[2,79],84:[2,79],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,92],14:[2,92],16:[2,92],17:[2,92],19:[2,92],22:[2,92],23:[2,92],25:[1,93],27:[2,92],30:[2,92],36:[2,92],37:[2,92],38:[2,92],39:[2,92],40:[2,92],42:[2,92],43:[2,92],44:[2,92],45:91,46:[1,94],47:[1,95],48:[1,96],49:[2,92],50:[2,92],61:[2,92],62:[2,92],63:[2,92],64:[2,92],65:[2,92],66:[1,92],69:[2,92],75:[2,92],76:[2,92],77:[2,92],78:[2,92],79:[2,92],81:[2,92],84:[2,92],86:[2,92],88:[2,92],89:[2,92],91:[2,92]},{5:[2,95],14:[2,95],16:[2,95],17:[2,95],19:[2,95],22:[2,95],23:[2,95],25:[1,93],27:[2,95],30:[2,95],36:[2,95],37:[2,95],38:[2,95],39:[2,95],40:[2,95],42:[2,95],43:[2,95],44:[2,95],45:91,46:[1,94],47:[1,95],48:[1,96],49:[2,95],50:[2,95],61:[2,95],62:[2,95],63:[2,95],64:[2,95],65:[2,95],66:[1,92],69:[2,95],75:[2,95],76:[2,95],77:[2,95],78:[2,95],79:[2,95],81:[2,95],84:[2,95],86:[2,95],88:[2,95],89:[2,95],91:[2,95]},{5:[2,97],14:[2,97],16:[2,97],17:[2,97],19:[2,97],22:[2,97],23:[2,97],25:[1,93],27:[2,97],30:[2,97],36:[2,97],37:[2,97],38:[2,97],39:[2,97],40:[2,97],42:[2,97],43:[2,97],44:[2,97],45:91,46:[1,94],47:[1,95],48:[1,96],49:[2,97],50:[2,97],61:[2,97],62:[2,97],63:[2,97],64:[2,97],65:[2,97],66:[1,92],69:[2,97],75:[2,97],76:[2,97],77:[2,97],78:[2,97],79:[2,97],81:[2,97],84:[2,97],86:[2,97],88:[2,97],89:[2,97],91:[2,97]},{22:[1,174],94:[1,149]},{4:175,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,118],13:82,14:[2,118],16:[2,118],17:[2,118],19:[1,15],22:[1,89],23:[2,118],25:[2,118],27:[2,118],30:[2,118],31:34,32:86,36:[2,118],37:[2,118],38:[2,118],39:[2,118],40:[2,118],42:[2,118],43:[1,87],44:[1,88],46:[2,118],47:[2,118],48:[2,118],49:[1,36],50:[2,118],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,118],64:[1,38],65:[1,39],66:[2,118],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,118],79:[1,52],81:[2,118],84:[2,118],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{49:[1,176]},{13:82,19:[1,15],20:81,22:[1,178],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:177,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]\n},{22:[1,179],94:[1,149]},{4:180,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,132],13:82,14:[2,132],16:[2,132],17:[2,132],19:[1,15],22:[1,89],23:[2,132],25:[2,132],27:[2,132],30:[2,132],31:34,32:86,36:[2,132],37:[2,132],38:[2,132],39:[2,132],40:[2,132],42:[2,132],43:[1,87],44:[1,88],46:[2,132],47:[2,132],48:[2,132],49:[1,36],50:[2,132],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,132],64:[1,38],65:[1,39],66:[2,132],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,132],79:[1,52],81:[2,132],84:[2,132],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{13:82,19:[1,15],20:81,22:[1,181],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:182,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{22:[1,183],94:[1,149]},{4:184,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,126],13:82,14:[2,126],16:[2,126],17:[2,126],19:[1,15],22:[1,89],23:[2,126],25:[2,126],27:[2,126],30:[2,126],31:34,32:86,36:[2,126],37:[2,126],38:[2,126],39:[2,126],40:[2,126],42:[2,126],43:[1,87],44:[1,88],46:[2,126],47:[2,126],48:[2,126],49:[1,36],50:[2,126],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,126],64:[1,38],65:[1,39],66:[2,126],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,126],79:[1,52],81:[2,126],84:[2,126],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{13:82,19:[1,15],20:81,22:[1,185],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:186,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{49:[1,187]},{45:188,46:[1,94],47:[1,95],48:[1,96]},{5:[2,103],14:[2,103],16:[2,103],17:[2,103],19:[2,103],22:[2,103],23:[2,103],25:[2,103],27:[2,103],30:[2,103],36:[2,103],37:[2,103],38:[2,103],39:[2,103],40:[2,103],42:[2,103],43:[2,103],44:[2,103],46:[2,103],47:[2,103],48:[2,103],49:[2,103],50:[2,103],61:[2,103],62:[2,103],63:[2,103],64:[2,103],65:[2,103],66:[2,103],69:[2,103],75:[2,103],76:[2,103],77:[2,103],78:[2,103],79:[2,103],81:[2,103],84:[2,103],86:[2,103],88:[2,103],89:[2,103],91:[2,103]},{19:[2,54],22:[2,54],25:[2,54],40:[2,54],42:[2,54],43:[2,54],44:[2,54],46:[2,54],47:[2,54],48:[2,54],49:[2,54],61:[2,54],62:[2,54],64:[2,54],65:[2,54],69:[2,54],72:[2,54],75:[2,54],76:[2,54],77:[2,54],79:[2,54],86:[2,54],88:[2,54],89:[2,54],91:[2,54],94:[2,54]},{19:[2,55],22:[2,55],25:[2,55],40:[2,55],42:[2,55],43:[2,55],44:[2,55],46:[2,55],47:[2,55],48:[2,55],49:[2,55],61:[2,55],62:[2,55],64:[2,55],65:[2,55],69:[2,55],72:[2,55],75:[2,55],76:[2,55],77:[2,55],79:[2,55],86:[2,55],88:[2,55],89:[2,55],91:[2,55],94:[2,55]},{49:[1,189]},{81:[1,190]},{5:[2,105],14:[2,105],16:[2,105],17:[2,105],19:[2,105],22:[2,105],23:[2,105],25:[2,105],27:[2,105],30:[2,105],36:[2,105],37:[2,105],38:[2,105],39:[2,105],40:[2,105],42:[2,105],43:[2,105],44:[2,105],46:[2,105],47:[2,105],48:[2,105],49:[2,105],50:[2,105],61:[2,105],62:[2,105],63:[2,105],64:[2,105],65:[2,105],66:[2,105],69:[2,105],75:[2,105],76:[2,105],77:[2,105],78:[2,105],79:[2,105],81:[2,105],84:[2,105],86:[2,105],88:[2,105],89:[2,105],91:[2,105]},{16:[1,191],81:[2,107]},{16:[2,109],81:[2,109]},{16:[2,111],81:[2,111],84:[1,192]},{14:[1,194],18:193,36:[1,64],37:[1,65],38:[1,66],39:[1,67]},{19:[2,123],22:[2,123],25:[2,123],40:[2,123],42:[2,123],43:[2,123],44:[2,123],46:[2,123],49:[2,123],61:[2,123],62:[2,123],64:[2,123],65:[2,123],69:[2,123],72:[2,123],75:[2,123],76:[2,123],77:[2,123],79:[2,123],86:[2,123],88:[2,123],89:[2,123],91:[2,123],94:[2,123]},{5:[1,195]},{5:[2,15]},{5:[2,14]},{5:[2,57],18:196,19:[2,57],22:[1,76],25:[2,57],36:[1,64],37:[1,65],38:[1,66],39:[1,67],40:[2,57],42:[2,57],43:[2,57],44:[2,57],46:[2,57],47:[2,57],48:[2,57],49:[2,57],61:[2,57],62:[2,57],64:[2,57],65:[2,57],66:[2,57],69:[2,57],75:[2,57],76:[2,57],77:[2,57],79:[2,57],86:[2,57],88:[2,57],89:[2,57],91:[2,57],93:77,94:[1,78]},{5:[2,37],16:[2,37],18:197,36:[1,64],37:[1,65],38:[1,66],39:[1,67],81:[2,37],84:[2,37]},{1:[2,9]},{5:[2,13]},{16:[1,199],23:[1,198]},{16:[1,201],23:[1,200]},{4:202,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54],92:203},{22:[2,141],94:[2,141]},{5:[2,40],13:82,14:[2,40],16:[2,40],17:[2,40],19:[1,15],22:[1,89],23:[2,40],25:[2,40],27:[2,40],30:[2,40],31:34,32:86,36:[2,40],37:[2,40],38:[2,40],39:[2,40],40:[2,40],42:[2,40],43:[1,87],44:[1,88],46:[2,40],47:[2,40],48:[2,40],49:[1,36],50:[2,40],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,40],64:[1,38],65:[1,39],66:[2,40],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,40],79:[1,52],81:[2,40],84:[2,40],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,41],13:82,14:[2,41],16:[2,41],17:[2,41],19:[1,15],22:[1,89],23:[2,41],25:[2,41],27:[2,41],30:[2,41],31:34,32:86,36:[2,41],37:[2,41],38:[2,41],39:[2,41],40:[2,41],42:[2,41],43:[1,87],44:[1,88],46:[2,41],47:[2,41],48:[2,41],49:[1,36],50:[2,41],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,41],64:[1,38],65:[1,39],66:[2,41],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,41],79:[1,52],81:[2,41],84:[2,41],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,18],16:[1,204]},{5:[2,19],16:[2,19]},{4:205,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,46],14:[2,46],16:[2,46],17:[2,46],19:[2,46],22:[2,46],23:[2,46],25:[1,93],27:[2,46],30:[2,46],36:[2,46],37:[2,46],38:[2,46],39:[2,46],40:[2,46],42:[2,46],43:[2,46],44:[2,46],45:91,46:[1,94],47:[1,95],48:[1,96],49:[2,46],50:[2,46],61:[2,46],62:[2,46],63:[2,46],64:[2,46],65:[2,46],66:[1,92],69:[2,46],75:[2,46],76:[2,46],77:[2,46],78:[2,46],79:[2,46],81:[2,46],84:[2,46],86:[2,46],88:[2,46],89:[2,46],91:[2,46]},{5:[2,47],14:[2,47],16:[2,47],17:[2,47],19:[2,47],22:[2,47],23:[2,47],25:[1,93],27:[2,47],30:[2,47],36:[2,47],37:[2,47],38:[2,47],39:[2,47],40:[2,47],42:[2,47],43:[2,47],44:[2,47],45:91,46:[1,94],47:[1,95],48:[1,96],49:[2,47],50:[2,47],61:[2,47],62:[2,47],63:[2,47],64:[2,47],65:[2,47],66:[1,92],69:[2,47],75:[2,47],76:[2,47],77:[2,47],78:[2,47],79:[2,47],81:[2,47],84:[2,47],86:[2,47],88:[2,47],89:[2,47],91:[2,47]},{23:[1,159]},{4:206,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,66],14:[2,66],16:[2,66],17:[2,66],19:[2,66],22:[2,66],23:[2,66],25:[2,66],27:[2,66],30:[2,66],36:[2,66],37:[2,66],38:[2,66],39:[2,66],40:[2,66],42:[2,66],43:[2,66],44:[2,66],46:[2,66],47:[2,66],48:[2,66],49:[2,66],50:[2,66],61:[2,66],62:[2,66],63:[2,66],64:[2,66],65:[2,66],66:[2,66],69:[2,66],75:[2,66],76:[2,66],77:[2,66],78:[2,66],79:[2,66],81:[2,66],84:[2,66],86:[2,66],88:[2,66],89:[2,66],91:[2,66]},{27:[1,207]},{4:208,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,82],14:[2,82],16:[2,82],17:[2,82],19:[2,82],22:[2,82],23:[2,82],25:[2,82],27:[2,82],30:[2,82],36:[2,82],37:[2,82],38:[2,82],39:[2,82],40:[2,82],42:[2,82],43:[2,82],44:[2,82],46:[2,82],47:[2,82],48:[2,82],49:[2,82],50:[2,82],61:[2,82],62:[2,82],63:[2,82],64:[2,82],65:[2,82],66:[2,82],69:[2,82],75:[2,82],76:[2,82],77:[2,82],78:[2,82],79:[2,82],81:[2,82],84:[2,82],86:[2,82],88:[2,82],89:[2,82],91:[2,82]},{27:[1,209]},{5:[2,22],14:[2,22],16:[2,22],17:[2,22],19:[2,22],22:[2,22],23:[2,22],25:[2,22],27:[2,22],30:[2,22],36:[2,22],37:[2,22],38:[2,22],39:[2,22],40:[2,22],42:[2,22],43:[2,22],44:[2,22],46:[2,22],47:[2,22],48:[2,22],49:[2,22],50:[2,22],61:[2,22],62:[2,22],63:[2,22],64:[2,22],65:[2,22],66:[2,22],69:[2,22],75:[2,22],76:[2,22],77:[2,22],78:[2,22],79:[2,22],81:[2,22],84:[2,22],86:[2,22],88:[2,22],89:[2,22],91:[2,22]},{4:103,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],26:210,28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:211,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,30:[1,212],31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{16:[1,213],19:[2,24],22:[2,24],25:[2,24],40:[2,24],42:[2,24],43:[2,24],44:[2,24],49:[2,24],61:[2,24],62:[2,24],64:[2,24],65:[2,24],69:[2,24],72:[2,24],75:[2,24],76:[2,24],77:[2,24],79:[2,24],86:[2,24],88:[2,24],89:[2,24],91:[2,24]},{5:[2,67],14:[2,67],16:[2,67],17:[2,67],19:[2,67],22:[2,67],23:[2,67],25:[2,67],27:[2,67],30:[2,67],36:[2,67],37:[2,67],38:[2,67],39:[2,67],40:[2,67],42:[2,67],43:[2,67],44:[2,67],46:[2,67],47:[2,67],48:[2,67],49:[2,67],50:[2,67],61:[2,67],62:[2,67],63:[2,67],64:[2,67],65:[2,67],66:[2,67],69:[2,67],75:[2,67],76:[2,67],77:[2,67],78:[2,67],79:[2,67],81:[2,67],84:[2,67],86:[2,67],88:[2,67],89:[2,67],91:[2,67]},{5:[2,68],14:[2,68],16:[2,68],17:[2,68],19:[2,68],22:[2,68],23:[2,68],25:[2,68],27:[2,68],30:[2,68],36:[2,68],37:[2,68],38:[2,68],39:[2,68],40:[2,68],42:[2,68],43:[2,68],44:[2,68],46:[2,68],47:[2,68],48:[2,68],49:[2,68],50:[2,68],61:[2,68],62:[2,68],63:[2,68],64:[2,68],65:[2,68],66:[2,68],69:[2,68],75:[2,68],76:[2,68],77:[2,68],78:[2,68],79:[2,68],81:[2,68],84:[2,68],86:[2,68],88:[2,68],89:[2,68],91:[2,68]},{49:[1,214]},{50:[1,215]},{50:[1,216]},{27:[1,217]},{4:218,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{16:[1,158],23:[1,219]},{42:[1,220]},{5:[2,121],13:82,14:[2,121],16:[2,121],17:[2,121],19:[1,15],22:[1,89],23:[2,121],25:[2,121],27:[2,121],30:[2,121],31:34,32:86,36:[2,121],37:[2,121],38:[2,121],39:[2,121],40:[2,121],42:[2,121],43:[1,87],44:[1,88],46:[2,121],47:[2,121],48:[2,121],49:[1,36],50:[2,121],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,121],64:[1,38],65:[1,39],66:[2,121],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,121],79:[1,52],81:[2,121],84:[2,121],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:221,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:222,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{16:[1,158],23:[1,223]},{4:224,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,134],13:82,14:[2,134],16:[2,134],17:[2,134],19:[1,15],22:[1,89],23:[2,134],25:[2,134],27:[2,134],30:[2,134],31:34,32:86,36:[2,134],37:[2,134],38:[2,134],39:[2,134],40:[2,134],42:[2,134],43:[1,87],44:[1,88],46:[2,134],47:[2,134],48:[2,134],49:[1,36],50:[2,134],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,134],64:[1,38],65:[1,39],66:[2,134],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,134],79:[1,52],81:[2,134],84:[2,134],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:225,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{16:[1,158],23:[1,226]},{4:227,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,128],13:82,14:[2,128],16:[2,128],17:[2,128],19:[1,15],22:[1,89],23:[2,128],25:[2,128],27:[2,128],30:[2,128],31:34,32:86,36:[2,128],37:[2,128],38:[2,128],39:[2,128],40:[2,128],42:[2,128],43:[1,87],44:[1,88],46:[2,128],47:[2,128],48:[2,128],49:[1,36],50:[2,128],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,128],64:[1,38],65:[1,39],66:[2,128],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,128],79:[1,52],81:[2,128],84:[2,128],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{13:228,19:[1,15]},{13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:229,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],78:[1,230],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:231,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,104],14:[2,104],16:[2,104],17:[2,104],19:[2,104],22:[2,104],23:[2,104],25:[2,104],27:[2,104],30:[2,104],36:[2,104],37:[2,104],38:[2,104],39:[2,104],40:[2,104],42:[2,104],43:[2,104],44:[2,104],46:[2,104],47:[2,104],48:[2,104],49:[2,104],50:[2,104],61:[2,104],62:[2,104],63:[2,104],64:[2,104],65:[2,104],66:[2,104],69:[2,104],75:[2,104],76:[2,104],77:[2,104],78:[2,104],79:[2,104],81:[2,104],84:[2,104],86:[2,104],88:[2,104],89:[2,104],91:[2,104]},{4:232,12:136,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],83:233,85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:234,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:143,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:235,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{1:[2,11]},{4:236,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:237,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,135],14:[2,135],16:[2,135],17:[2,135],19:[2,135],22:[2,135],23:[2,135],25:[2,135],27:[2,135],30:[2,135],36:[2,135],37:[2,135],38:[2,135],39:[2,135],40:[2,135],42:[2,135],43:[2,135],44:[2,135],46:[2,135],47:[2,135],48:[2,135],49:[2,135],50:[2,135],61:[2,135],62:[2,135],63:[2,135],64:[2,135],65:[2,135],66:[2,135],69:[2,135],75:[2,135],76:[2,135],77:[2,135],78:[2,135],79:[2,135],81:[2,135],84:[2,135],86:[2,135],88:[2,135],89:[2,135],91:[2,135]},{4:238,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,115],14:[2,115],16:[2,115],17:[2,115],19:[2,115],22:[2,115],23:[2,115],25:[2,115],27:[2,115],30:[2,115],36:[2,115],37:[2,115],38:[2,115],39:[2,115],40:[2,115],42:[2,115],43:[2,115],44:[2,115],45:239,46:[1,94],47:[1,95],48:[1,96],49:[2,115],50:[2,115],61:[2,115],62:[2,115],63:[2,115],64:[2,115],65:[2,115],66:[2,115],69:[2,115],75:[2,115],76:[2,115],77:[2,115],78:[2,115],79:[2,115],81:[2,115],84:[2,115],86:[2,115],88:[2,115],89:[2,115],91:[2,115]},{4:240,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{16:[1,201],23:[1,241]},{16:[1,199],23:[1,242]},{20:243,22:[1,154]},{16:[1,158]},{23:[1,244]},{5:[2,31],14:[2,31],16:[2,31],17:[2,31],19:[2,31],22:[2,31],23:[2,31],25:[2,31],27:[2,31],30:[2,31],36:[2,31],37:[2,31],38:[2,31],39:[2,31],40:[2,31],42:[2,31],43:[2,31],44:[2,31],46:[2,31],47:[2,31],48:[2,31],49:[2,31],50:[2,31],61:[2,31],62:[2,31],63:[2,31],64:[2,31],65:[2,31],66:[2,31],69:[2,31],75:[2,31],76:[2,31],77:[2,31],78:[2,31],79:[2,31],81:[2,31],84:[2,31],86:[2,31],88:[2,31],89:[2,31],91:[2,31]},{50:[1,245]},{5:[2,30],14:[2,30],16:[2,30],17:[2,30],19:[2,30],22:[2,30],23:[2,30],25:[2,30],27:[2,30],30:[2,30],36:[2,30],37:[2,30],38:[2,30],39:[2,30],40:[2,30],42:[2,30],43:[2,30],44:[2,30],46:[2,30],47:[2,30],48:[2,30],49:[2,30],50:[2,30],61:[2,30],62:[2,30],63:[2,30],64:[2,30],65:[2,30],66:[2,30],69:[2,30],75:[2,30],76:[2,30],77:[2,30],78:[2,30],79:[2,30],81:[2,30],84:[2,30],86:[2,30],88:[2,30],89:[2,30],91:[2,30]},{16:[1,247],27:[1,246]},{16:[2,29],27:[2,29],30:[2,29]},{16:[1,248],19:[2,25],22:[2,25],25:[2,25],40:[2,25],42:[2,25],43:[2,25],44:[2,25],49:[2,25],61:[2,25],62:[2,25],64:[2,25],65:[2,25],69:[2,25],72:[2,25],75:[2,25],76:[2,25],77:[2,25],79:[2,25],86:[2,25],88:[2,25],89:[2,25],91:[2,25]},{19:[2,26],22:[2,26],25:[2,26],40:[2,26],42:[2,26],43:[2,26],44:[2,26],49:[2,26],61:[2,26],62:[2,26],64:[2,26],65:[2,26],69:[2,26],72:[2,26],75:[2,26],76:[2,26],77:[2,26],79:[2,26],86:[2,26],88:[2,26],89:[2,26],91:[2,26]},{4:250,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],50:[1,249],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{49:[1,251]},{5:[2,74],14:[2,74],16:[2,74],17:[2,74],19:[2,74],22:[2,74],23:[2,74],25:[2,74],27:[2,74],30:[2,74],36:[2,74],37:[2,74],38:[2,74],39:[2,74],40:[2,74],42:[2,74],43:[2,74],44:[2,74],46:[2,74],47:[2,74],48:[2,74],49:[2,74],50:[2,74],61:[2,74],62:[2,74],63:[2,74],64:[2,74],65:[2,74],66:[2,74],69:[2,74],75:[2,74],76:[2,74],77:[2,74],78:[2,74],79:[2,74],81:[2,74],84:[2,74],86:[2,74],88:[2,74],89:[2,74],91:[2,74]},{49:[1,252]},{23:[1,253]},{5:[2,117],14:[2,117],16:[2,117],17:[2,117],19:[2,117],22:[2,117],23:[2,117],25:[2,117],27:[2,117],30:[2,117],36:[2,117],37:[2,117],38:[2,117],39:[2,117],40:[2,117],42:[2,117],43:[2,117],44:[2,117],46:[2,117],47:[2,117],48:[2,117],49:[2,117],50:[2,117],61:[2,117],62:[2,117],63:[2,117],64:[2,117],65:[2,117],66:[2,117],69:[2,117],75:[2,117],76:[2,117],77:[2,117],78:[2,117],79:[2,117],81:[2,117],84:[2,117],86:[2,117],88:[2,117],89:[2,117],91:[2,117]},{42:[1,255],71:254,72:[1,26]},{16:[1,158],23:[1,256]},{23:[1,257]},{5:[2,131],14:[2,131],16:[2,131],17:[2,131],19:[2,131],22:[2,131],23:[2,131],25:[2,131],27:[2,131],30:[2,131],36:[2,131],37:[2,131],38:[2,131],39:[2,131],40:[2,131],42:[2,131],43:[2,131],44:[2,131],46:[2,131],47:[2,131],48:[2,131],49:[2,131],50:[2,131],61:[2,131],62:[2,131],63:[2,131],64:[2,131],65:[2,131],66:[2,131],69:[2,131],75:[2,131],76:[2,131],77:[2,131],78:[2,131],79:[2,131],81:[2,131],84:[2,131],86:[2,131],88:[2,131],89:[2,131],91:[2,131]},{16:[1,158],23:[1,258]},{23:[1,259]},{5:[2,125],14:[2,125],16:[2,125],17:[2,125],19:[2,125],22:[2,125],23:[2,125],25:[2,125],27:[2,125],30:[2,125],36:[2,125],37:[2,125],38:[2,125],39:[2,125],40:[2,125],42:[2,125],43:[2,125],44:[2,125],46:[2,125],47:[2,125],48:[2,125],49:[2,125],50:[2,125],61:[2,125],62:[2,125],63:[2,125],64:[2,125],65:[2,125],66:[2,125],69:[2,125],75:[2,125],76:[2,125],77:[2,125],78:[2,125],79:[2,125],81:[2,125],84:[2,125],86:[2,125],88:[2,125],89:[2,125],91:[2,125]},{16:[1,158],23:[1,260]},{14:[1,261]},{13:82,19:[1,15],22:[1,89],31:34,32:86,43:[1,87],44:[1,88],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[1,262],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,102],14:[2,102],16:[2,102],17:[2,102],19:[2,102],22:[2,102],23:[2,102],25:[2,102],27:[2,102],30:[2,102],36:[2,102],37:[2,102],38:[2,102],39:[2,102],40:[2,102],42:[2,102],43:[2,102],44:[2,102],46:[2,102],47:[2,102],48:[2,102],49:[2,102],50:[2,102],61:[2,102],62:[2,102],63:[2,102],64:[2,102],65:[2,102],66:[2,102],69:[2,102],75:[2,102],76:[2,102],77:[2,102],78:[2,102],79:[2,102],81:[2,102],84:[2,102],86:[2,102],88:[2,102],89:[2,102],91:[2,102]},{50:[1,263]},{14:[1,194],18:193,36:[1,64],37:[1,65],38:[1,66],39:[1,67],81:[2,106]},{16:[2,108],81:[2,108]},{16:[2,110],81:[2,110]},{16:[2,38],81:[2,38],84:[2,38]},{5:[2,16]},{5:[2,39],16:[2,39],81:[2,39],84:[2,39]},{16:[2,143],23:[2,143]},{5:[2,114],14:[2,114],16:[2,114],17:[2,114],19:[2,114],22:[2,114],23:[2,114],25:[2,114],27:[2,114],30:[2,114],36:[2,114],37:[2,114],38:[2,114],39:[2,114],40:[2,114],42:[2,114],43:[2,114],44:[2,114],46:[2,114],47:[2,114],48:[2,114],49:[2,114],50:[2,114],61:[2,114],62:[2,114],63:[2,114],64:[2,114],65:[2,114],66:[2,114],69:[2,114],75:[2,114],76:[2,114],77:[2,114],78:[2,114],79:[2,114],81:[2,114],84:[2,114],86:[2,114],88:[2,114],89:[2,114],91:[2,114]},{16:[2,144],23:[2,144]},{5:[2,136],14:[2,136],16:[2,136],17:[2,136],19:[2,136],22:[2,136],23:[2,136],25:[2,136],27:[2,136],30:[2,136],36:[2,136],37:[2,136],38:[2,136],39:[2,136],40:[2,136],42:[2,136],43:[2,136],44:[2,136],46:[2,136],47:[2,136],48:[2,136],49:[2,136],50:[2,136],61:[2,136],62:[2,136],63:[2,136],64:[2,136],65:[2,136],66:[2,136],69:[2,136],75:[2,136],76:[2,136],77:[2,136],78:[2,136],79:[2,136],81:[2,136],84:[2,136],86:[2,136],88:[2,136],89:[2,136],91:[2,136]},{5:[2,140],14:[2,140],16:[2,140],17:[2,140],19:[2,140],22:[2,140],23:[2,140],25:[2,140],27:[2,140],30:[2,140],36:[2,140],37:[2,140],38:[2,140],39:[2,140],40:[2,140],42:[2,140],43:[2,140],44:[2,140],46:[2,140],47:[2,140],48:[2,140],49:[2,140],50:[2,140],61:[2,140],62:[2,140],63:[2,140],64:[2,140],65:[2,140],66:[2,140],69:[2,140],75:[2,140],76:[2,140],77:[2,140],78:[2,140],79:[2,140],81:[2,140],84:[2,140],86:[2,140],88:[2,140],89:[2,140],91:[2,140]},{5:[2,20],16:[2,20]},{5:[2,21],14:[2,21],16:[2,21],17:[2,21],19:[2,21],22:[2,21],23:[2,21],25:[2,21],27:[2,21],30:[2,21],36:[2,21],37:[2,21],38:[2,21],39:[2,21],40:[2,21],42:[2,21],43:[2,21],44:[2,21],46:[2,21],47:[2,21],48:[2,21],49:[2,21],50:[2,21],61:[2,21],62:[2,21],63:[2,21],64:[2,21],65:[2,21],66:[2,21],69:[2,21],75:[2,21],76:[2,21],77:[2,21],78:[2,21],79:[2,21],81:[2,21],84:[2,21],86:[2,21],88:[2,21],89:[2,21],91:[2,21]},{5:[2,53],14:[2,53],16:[2,53],17:[2,53],19:[2,53],22:[2,53],23:[2,53],25:[2,53],27:[2,53],30:[2,53],36:[2,53],37:[2,53],38:[2,53],39:[2,53],40:[2,53],42:[2,53],43:[2,53],44:[2,53],46:[2,53],47:[2,53],48:[2,53],49:[2,53],50:[2,53],61:[2,53],62:[2,53],63:[2,53],64:[2,53],65:[2,53],66:[2,53],69:[2,53],72:[2,53],75:[2,53],76:[2,53],77:[2,53],78:[2,53],79:[2,53],81:[2,53],84:[2,53],86:[2,53],88:[2,53],89:[2,53],91:[2,53]},{5:[2,23],14:[2,23],16:[2,23],17:[2,23],19:[2,23],22:[2,23],23:[2,23],25:[2,23],27:[2,23],30:[2,23],36:[2,23],37:[2,23],38:[2,23],39:[2,23],40:[2,23],42:[2,23],43:[2,23],44:[2,23],46:[2,23],47:[2,23],48:[2,23],49:[2,23],50:[2,23],61:[2,23],62:[2,23],63:[2,23],64:[2,23],65:[2,23],66:[2,23],69:[2,23],75:[2,23],76:[2,23],77:[2,23],78:[2,23],79:[2,23],81:[2,23],84:[2,23],86:[2,23],88:[2,23],89:[2,23],91:[2,23]},{4:211,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{19:[2,27],22:[2,27],25:[2,27],40:[2,27],42:[2,27],43:[2,27],44:[2,27],49:[2,27],61:[2,27],62:[2,27],64:[2,27],65:[2,27],69:[2,27],72:[2,27],75:[2,27],76:[2,27],77:[2,27],79:[2,27],86:[2,27],88:[2,27],89:[2,27],91:[2,27]},{5:[2,70],14:[2,70],16:[2,70],17:[2,70],19:[2,70],22:[2,70],23:[2,70],25:[2,70],27:[2,70],30:[2,70],36:[2,70],37:[2,70],38:[2,70],39:[2,70],40:[2,70],42:[2,70],43:[2,70],44:[2,70],46:[2,70],47:[2,70],48:[2,70],49:[2,70],50:[2,70],61:[2,70],62:[2,70],63:[2,70],64:[2,70],65:[2,70],66:[2,70],69:[2,70],75:[2,70],76:[2,70],77:[2,70],78:[2,70],79:[2,70],81:[2,70],84:[2,70],86:[2,70],88:[2,70],89:[2,70],91:[2,70]},{50:[1,264]},{4:266,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],50:[1,265],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:267,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,137],14:[2,137],16:[2,137],17:[2,137],19:[2,137],22:[2,137],23:[2,137],25:[2,137],27:[2,137],30:[2,137],36:[2,137],37:[2,137],38:[2,137],39:[2,137],40:[2,137],42:[2,137],43:[2,137],44:[2,137],46:[2,137],47:[2,137],48:[2,137],49:[2,137],50:[2,137],61:[2,137],62:[2,137],63:[2,137],64:[2,137],65:[2,137],66:[2,137],69:[2,137],75:[2,137],76:[2,137],77:[2,137],78:[2,137],79:[2,137],81:[2,137],84:[2,137],86:[2,137],88:[2,137],89:[2,137],91:[2,137]},{50:[1,268]},{72:[1,269]},{5:[2,122],14:[2,122],16:[2,122],17:[2,122],19:[2,122],22:[2,122],23:[2,122],25:[2,122],27:[2,122],30:[2,122],36:[2,122],37:[2,122],38:[2,122],39:[2,122],40:[2,122],42:[2,122],43:[2,122],44:[2,122],46:[2,122],47:[2,122],48:[2,122],49:[2,122],50:[2,122],61:[2,122],62:[2,122],63:[2,122],64:[2,122],65:[2,122],66:[2,122],69:[2,122],75:[2,122],76:[2,122],77:[2,122],78:[2,122],79:[2,122],81:[2,122],84:[2,122],86:[2,122],88:[2,122],89:[2,122],91:[2,122]},{5:[2,138],14:[2,138],16:[2,138],17:[2,138],19:[2,138],22:[2,138],23:[2,138],25:[2,138],27:[2,138],30:[2,138],36:[2,138],37:[2,138],38:[2,138],39:[2,138],40:[2,138],42:[2,138],43:[2,138],44:[2,138],46:[2,138],47:[2,138],48:[2,138],49:[2,138],50:[2,138],61:[2,138],62:[2,138],63:[2,138],64:[2,138],65:[2,138],66:[2,138],69:[2,138],75:[2,138],76:[2,138],77:[2,138],78:[2,138],79:[2,138],81:[2,138],84:[2,138],86:[2,138],88:[2,138],89:[2,138],91:[2,138]},{5:[2,133],14:[2,133],16:[2,133],17:[2,133],19:[2,133],22:[2,133],23:[2,133],25:[2,133],27:[2,133],30:[2,133],36:[2,133],37:[2,133],38:[2,133],39:[2,133],40:[2,133],42:[2,133],43:[2,133],44:[2,133],46:[2,133],47:[2,133],48:[2,133],49:[2,133],50:[2,133],61:[2,133],62:[2,133],63:[2,133],64:[2,133],65:[2,133],66:[2,133],69:[2,133],75:[2,133],76:[2,133],77:[2,133],78:[2,133],79:[2,133],81:[2,133],84:[2,133],86:[2,133],88:[2,133],89:[2,133],91:[2,133]},{5:[2,139],14:[2,139],16:[2,139],17:[2,139],19:[2,139],22:[2,139],23:[2,139],25:[2,139],27:[2,139],30:[2,139],36:[2,139],37:[2,139],38:[2,139],39:[2,139],40:[2,139],42:[2,139],43:[2,139],44:[2,139],46:[2,139],47:[2,139],48:[2,139],\n49:[2,139],50:[2,139],61:[2,139],62:[2,139],63:[2,139],64:[2,139],65:[2,139],66:[2,139],69:[2,139],75:[2,139],76:[2,139],77:[2,139],78:[2,139],79:[2,139],81:[2,139],84:[2,139],86:[2,139],88:[2,139],89:[2,139],91:[2,139]},{5:[2,127],14:[2,127],16:[2,127],17:[2,127],19:[2,127],22:[2,127],23:[2,127],25:[2,127],27:[2,127],30:[2,127],36:[2,127],37:[2,127],38:[2,127],39:[2,127],40:[2,127],42:[2,127],43:[2,127],44:[2,127],46:[2,127],47:[2,127],48:[2,127],49:[2,127],50:[2,127],61:[2,127],62:[2,127],63:[2,127],64:[2,127],65:[2,127],66:[2,127],69:[2,127],75:[2,127],76:[2,127],77:[2,127],78:[2,127],79:[2,127],81:[2,127],84:[2,127],86:[2,127],88:[2,127],89:[2,127],91:[2,127]},{4:270,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,101],14:[2,101],16:[2,101],17:[2,101],19:[2,101],22:[2,101],23:[2,101],25:[2,101],27:[2,101],30:[2,101],36:[2,101],37:[2,101],38:[2,101],39:[2,101],40:[2,101],42:[2,101],43:[2,101],44:[2,101],46:[2,101],47:[2,101],48:[2,101],49:[2,101],50:[2,101],61:[2,101],62:[2,101],63:[2,101],64:[2,101],65:[2,101],66:[2,101],69:[2,101],75:[2,101],76:[2,101],77:[2,101],78:[2,101],79:[2,101],81:[2,101],84:[2,101],86:[2,101],88:[2,101],89:[2,101],91:[2,101]},{19:[2,56],22:[2,56],25:[2,56],40:[2,56],42:[2,56],43:[2,56],44:[2,56],46:[2,56],47:[2,56],48:[2,56],49:[2,56],61:[2,56],62:[2,56],64:[2,56],65:[2,56],69:[2,56],72:[2,56],75:[2,56],76:[2,56],77:[2,56],79:[2,56],86:[2,56],88:[2,56],89:[2,56],91:[2,56],94:[2,56]},{5:[2,71],14:[2,71],16:[2,71],17:[2,71],19:[2,71],22:[2,71],23:[2,71],25:[2,71],27:[2,71],30:[2,71],36:[2,71],37:[2,71],38:[2,71],39:[2,71],40:[2,71],42:[2,71],43:[2,71],44:[2,71],46:[2,71],47:[2,71],48:[2,71],49:[2,71],50:[2,71],61:[2,71],62:[2,71],63:[2,71],64:[2,71],65:[2,71],66:[2,71],69:[2,71],75:[2,71],76:[2,71],77:[2,71],78:[2,71],79:[2,71],81:[2,71],84:[2,71],86:[2,71],88:[2,71],89:[2,71],91:[2,71]},{5:[2,72],14:[2,72],16:[2,72],17:[2,72],19:[2,72],22:[2,72],23:[2,72],25:[2,72],27:[2,72],30:[2,72],36:[2,72],37:[2,72],38:[2,72],39:[2,72],40:[2,72],42:[2,72],43:[2,72],44:[2,72],46:[2,72],47:[2,72],48:[2,72],49:[2,72],50:[2,72],61:[2,72],62:[2,72],63:[2,72],64:[2,72],65:[2,72],66:[2,72],69:[2,72],75:[2,72],76:[2,72],77:[2,72],78:[2,72],79:[2,72],81:[2,72],84:[2,72],86:[2,72],88:[2,72],89:[2,72],91:[2,72]},{50:[1,271]},{50:[1,272]},{13:82,19:[1,15],20:81,22:[1,274],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:273,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{50:[2,113]},{50:[1,275]},{5:[2,73],14:[2,73],16:[2,73],17:[2,73],19:[2,73],22:[2,73],23:[2,73],25:[2,73],27:[2,73],30:[2,73],36:[2,73],37:[2,73],38:[2,73],39:[2,73],40:[2,73],42:[2,73],43:[2,73],44:[2,73],46:[2,73],47:[2,73],48:[2,73],49:[2,73],50:[2,73],61:[2,73],62:[2,73],63:[2,73],64:[2,73],65:[2,73],66:[2,73],69:[2,73],75:[2,73],76:[2,73],77:[2,73],78:[2,73],79:[2,73],81:[2,73],84:[2,73],86:[2,73],88:[2,73],89:[2,73],91:[2,73]},{5:[2,75],14:[2,75],16:[2,75],17:[2,75],19:[2,75],22:[2,75],23:[2,75],25:[2,75],27:[2,75],30:[2,75],36:[2,75],37:[2,75],38:[2,75],39:[2,75],40:[2,75],42:[2,75],43:[2,75],44:[2,75],46:[2,75],47:[2,75],48:[2,75],49:[2,75],50:[2,75],61:[2,75],62:[2,75],63:[2,75],64:[2,75],65:[2,75],66:[2,75],69:[2,75],75:[2,75],76:[2,75],77:[2,75],78:[2,75],79:[2,75],81:[2,75],84:[2,75],86:[2,75],88:[2,75],89:[2,75],91:[2,75]},{5:[2,119],13:82,14:[2,119],16:[2,119],17:[2,119],19:[1,15],22:[1,89],23:[2,119],25:[2,119],27:[2,119],30:[2,119],31:34,32:86,36:[2,119],37:[2,119],38:[2,119],39:[2,119],40:[2,119],42:[2,119],43:[1,87],44:[1,88],46:[2,119],47:[2,119],48:[2,119],49:[1,36],50:[2,119],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,119],64:[1,38],65:[1,39],66:[2,119],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,119],79:[1,52],81:[2,119],84:[2,119],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{4:276,13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,35:13,40:[1,44],41:16,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{45:277,46:[1,94],47:[1,95],48:[1,96]},{16:[1,158],23:[1,278]},{13:82,19:[1,15],20:81,22:[1,17],24:21,25:[1,27],28:22,31:34,32:24,33:23,34:18,40:[1,44],41:279,42:[1,20],43:[1,45],44:[1,46],49:[1,36],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],64:[1,38],65:[1,39],67:40,68:41,69:[1,42],70:43,71:19,72:[1,26],73:25,74:50,75:[1,57],76:[1,58],77:[1,51],79:[1,52],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]},{5:[2,120],14:[2,120],16:[2,120],17:[2,120],19:[2,120],22:[2,120],23:[2,120],25:[2,120],27:[2,120],30:[2,120],36:[2,120],37:[2,120],38:[2,120],39:[2,120],40:[2,120],42:[2,120],43:[2,120],44:[2,120],46:[2,120],47:[2,120],48:[2,120],49:[2,120],50:[2,120],61:[2,120],62:[2,120],63:[2,120],64:[2,120],65:[2,120],66:[2,120],69:[2,120],75:[2,120],76:[2,120],77:[2,120],78:[2,120],79:[2,120],81:[2,120],84:[2,120],86:[2,120],88:[2,120],89:[2,120],91:[2,120]},{5:[2,100],13:82,14:[2,100],16:[2,100],17:[2,100],19:[1,15],22:[1,89],23:[2,100],25:[2,100],27:[2,100],30:[2,100],31:34,32:86,36:[2,100],37:[2,100],38:[2,100],39:[2,100],40:[2,100],42:[2,100],43:[1,87],44:[1,88],46:[2,100],47:[2,100],48:[2,100],49:[1,36],50:[2,100],55:28,56:29,57:30,58:31,59:32,60:33,61:[1,35],62:[1,37],63:[2,100],64:[1,38],65:[1,39],66:[2,100],67:40,68:41,69:[1,42],70:43,74:50,75:[1,57],76:[1,58],77:[1,51],78:[2,100],79:[1,52],81:[2,100],84:[2,100],85:47,86:[1,53],87:49,88:[1,55],89:[1,56],90:48,91:[1,54]}],defaultActions:{12:[2,12],57:[2,98],58:[2,99],59:[2,1],68:[2,2],69:[2,3],70:[2,4],71:[2,5],72:[2,6],73:[2,7],74:[2,8],79:[2,10],80:[2,145],140:[2,15],141:[2,14],144:[2,9],145:[2,13],195:[2,11],236:[2,16],269:[2,113]},parseError:function(e,t){throw new Error(e)},parse:function(e){function t(){var e;return e=r.lexer.lex()||1,"number"!=typeof e&&(e=r.symbols_[e]||e),e}var r=this,n=[0],i=[null],a=[],o=this.table,s="",u=0,c=0,l=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;a.push(h);var f=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,m,d,g,y,v,b,x,_,w={};;){if(d=n[n.length-1],this.defaultActions[d]?g=this.defaultActions[d]:((null===p||"undefined"==typeof p)&&(p=t()),g=o[d]&&o[d][p]),"undefined"==typeof g||!g.length||!g[0]){var M="";if(!l){_=[];for(v in o[d])this.terminals_[v]&&v>2&&_.push("\'"+this.terminals_[v]+"\'");M=this.lexer.showPosition?"Parse error on line "+(u+1)+":\\n"+this.lexer.showPosition()+"\\nExpecting "+_.join(", ")+", got \'"+(this.terminals_[p]||p)+"\'":"Parse error on line "+(u+1)+": Unexpected "+(1==p?"end of input":"\'"+(this.terminals_[p]||p)+"\'"),this.parseError(M,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:_})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+p);switch(g[0]){case 1:n.push(p),i.push(this.lexer.yytext),a.push(this.lexer.yylloc),n.push(g[1]),p=null,m?(p=m,m=null):(c=this.lexer.yyleng,s=this.lexer.yytext,u=this.lexer.yylineno,h=this.lexer.yylloc,l>0&&l--);break;case 2:if(b=this.productions_[g[1]][1],w.$=i[i.length-b],w._$={first_line:a[a.length-(b||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(b||1)].first_column,last_column:a[a.length-1].last_column},f&&(w._$.range=[a[a.length-(b||1)].range[0],a[a.length-1].range[1]]),y=this.performAction.call(w,s,c,u,this.yy,g[1],i,a),"undefined"!=typeof y)return y;b&&(n=n.slice(0,-1*b*2),i=i.slice(0,-1*b),a=a.slice(0,-1*b)),n.push(this.productions_[g[1]][0]),i.push(w.$),a.push(w._$),x=o[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\\r\\n?|\\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\\r\\n?|\\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\\r\\n?|\\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,r,n,i;this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),o=0;o<a.length&&(r=this._input.match(this.rules[a[o]]),!r||t&&!(r[0].length>t[0].length)||(t=r,n=o,this.options.flex));o++);return t?(i=t[0].match(/(?:\\r\\n?|\\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\\r?\\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,a[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,r,n){switch(r){case 0:break;case 1:return 49;case 2:return 50;case 3:return"MATH_SHIFT";case 4:return t.yytext=this.matches[this.matches.length-1],46;case 5:return t.yytext=this.matches[this.matches.length-1],47;case 6:return t.yytext=this.matches[this.matches.length-1],52;case 7:return t.yytext=this.matches[this.matches.length-1],53;case 8:return 48;case 9:return t.yytext=Number(this.matches[2])+Number(this.matches[5])/Number(this.matches[6]),72;case 10:return 72;case 11:return 94;case 12:return 43;case 13:return 43;case 14:return 44;case 15:return 44;case 16:return t.yytext=this.matches[3],69;case 17:return t.yytext=this.matches[2],this.popState(),78;case 18:return t.yytext=this.matches[this.matches.length-1],89;case 19:return 91;case 20:return 88;case 21:return 64;case 22:return 65;case 23:return"\\\\";case 24:return 75;case 25:return 76;case 26:return 61;case 27:return 61;case 28:return this.begin("integral"),77;case 29:return 19;case 30:return 17;case 31:return 62;case 32:return 63;case 33:return 42;case 34:return 40;case 35:return 14;case 36:return 17;case 37:return"...";case 38:return 54;case 39:return 66;case 40:return 5;case 41:return 22;case 42:return 23;case 43:return 25;case 44:return 27;case 45:return 79;case 46:return 81;case 47:return 84;case 48:return 38;case 49:return 39;case 50:return 37;case 51:return 36;case 52:return 16;case 53:return 15;case 54:return 86;case 55:return t.yytext="\\\\sign",19;case 56:return t.yytext="\\\\gcd",19;case 57:return t.yytext="\\\\lcm",19;case 58:return t.yytext="\\\\stdevp",19;case 59:return t.yytext="\\\\stdevp",19;case 60:return t.yytext="\\\\stdev",19;case 61:return t.yytext="\\\\stdev",19;case 62:return t.yytext="\\\\var",19;case 63:return t.yytext="\\\\sign",19;case 64:return t.yytext="\\\\gcd",19;case 65:return t.yytext="\\\\lcm",19;case 66:return t.yytext="\\\\stdevp",19;case 67:return t.yytext="\\\\stdevp",19;case 68:return t.yytext="\\\\stdev",19;case 69:return t.yytext="\\\\stdev",19;case 70:return t.yytext="\\\\var",19;case 71:return/^(arc)?(sin|cos|tan|cot|sec|csc)h?$/.test(this.matches[3])?(t.yytext="\\\\"+this.matches[3],86):(t.yytext="\\\\"+this.matches[3]+this.matches[4],"IDENTIFIER_BASE");case 72:return 19;case 73:break;case 74:return"UNRECOGNIZED"}},e.rules=[/^(?:(\\\\space|\\\\:|\\s|\\\\ )+)/,/^(?:\\{)/,/^(?:\\})/,/^(?:\\$)/,/^(?:\\^([0-9]))/,/^(?:\\^([a-zA-Z]))/,/^(?:_([0-9]))/,/^(?:_([a-zA-Z]))/,/^(?:\\^)/,/^(?:(([0-9]+)((?:\\s|\\\\space|\\\\:|\\\\ )*)\\\\frac((?:\\s|\\\\space|\\\\:|\\\\ )*)\\{([0-9]+)\\}\\{([0-9]+)\\}))/,/^(?:[0-9]+(\\.[0-9]+)?|(\\.[0-9]+))/,/^(?:\')/,/^(?:\\*|(\\\\cdot))/,/^(?:(\\\\times))/,/^(?:\\/)/,/^(?:(\\\\div))/,/^(?:(\\\\frac((?:\\s|\\\\space|\\\\:|\\\\ )*)\\{d\\}\\{d(((\\\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\\{[a-zA-Z0-9]+\\})?))\\}))/,/^(?:(d(((\\\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\\{[a-zA-Z0-9]+\\})?))))/,/^(?:(\\\\log)((?:\\s|\\\\space|\\\\:|\\\\ )*)*_([0-9]))/,/^(?:(\\\\ln))/,/^(?:(\\\\log))/,/^(?:(\\\\frac))/,/^(?:(\\\\sqrt))/,/^(?:(\\\\backslash))/,/^(?:(\\\\sum))/,/^(?:(\\\\prod))/,/^(?:(\\\\ans))/,/^(?:(\\\\operatorname{ans}))/,/^(?:(\\\\int))/,/^(?:(\\\\length))/,/^(?:(\\\\sim))/,/^(?:\\\\left\\|)/,/^(?:\\\\right\\|)/,/^(?:-)/,/^(?:\\+)/,/^(?:=)/,/^(?:~)/,/^(?:\\.\\.\\.)/,/^(?:[_])/,/^(?:!)/,/^(?:$)/,/^(?:(\\()|\\\\left\\()/,/^(?:(\\))|\\\\right\\))/,/^(?:(\\[)|\\\\left\\[)/,/^(?:(\\])|\\\\right\\])/,/^(?:(\\\\\\{)|\\\\left\\\\\\{)/,/^(?:(\\\\\\})|\\\\right\\\\\\})/,/^(?::)/,/^(?:(\\\\ge|>=))/,/^(?:(\\\\le|<=))/,/^(?:(\\\\gt|>))/,/^(?:(\\\\lt|<))/,/^(?:,)/,/^(?:(###)(((?:\\s|\\\\space|\\\\:|\\\\ )*)(?:((\\\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\\{[a-zA-Z0-9]+\\})?)|((\\\\operatorname\\{([a-zA-Z]+)\\})((_[a-zA-Z0-9]|_\\{[a-zA-Z0-9]+\\})?)))((?:\\s|\\\\space|\\\\:|\\\\ )*)(\\\\left\\(|\\()((?:\\s|\\\\space|\\\\:|\\\\ )*)((\\\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\\{[a-zA-Z0-9]+\\})?)(((?:\\s|\\\\space|\\\\:|\\\\ )*),((?:\\s|\\\\space|\\\\:|\\\\ )*)((\\\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\\{[a-zA-Z0-9]+\\})?)((?:\\s|\\\\space|\\\\:|\\\\ )*))*((?:\\s|\\\\space|\\\\:|\\\\ )*)(\\\\right\\)|\\))((?:\\s|\\\\space|\\\\:|\\\\ )*)=))/,/^(?:(\\\\(arc)?(sin|cos|tan|cot|sec|csc)h?))/,/^(?:(\\\\signum))/,/^(?:(\\\\(gcf|mcd)))/,/^(?:(\\\\mcm))/,/^(?:(\\\\stdDevP))/,/^(?:(\\\\stddevp))/,/^(?:(\\\\stdDev))/,/^(?:(\\\\stddev))/,/^(?:(\\\\variance))/,/^(?:(\\\\operatorname\\{signum\\}))/,/^(?:(\\\\operatorname\\{(gcf|mcd)\\}))/,/^(?:(\\\\operatorname\\{mcm\\}))/,/^(?:(\\\\operatorname\\{stdDevP\\}))/,/^(?:(\\\\operatorname\\{stddevp\\}))/,/^(?:(\\\\operatorname\\{stdDev\\}))/,/^(?:(\\\\operatorname\\{stddev\\}))/,/^(?:(\\\\operatorname\\{variance\\}))/,/^(?:((\\\\operatorname\\{([a-zA-Z]+)\\})((_[a-zA-Z0-9]|_\\{[a-zA-Z0-9]+\\})?)))/,/^(?:((\\\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\\{[a-zA-Z0-9]+\\})?))/,/^(?:(###))/,/^(?:.)/],e.conditions={integral:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0},conditional:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0}},e}();return e.lexer=t,e}),define("math/mathshim",["require"],function(e){var t={};return t.cosh=Math.cosh||function(e){return.5*(Math.exp(e)+Math.exp(-e))},t.sinh=Math.sinh&&0!==Math.sinh(1e-20)?Math.sinh:function(e){var r=e>0?1:-1;return e=e>0?e:-e,.5*-r*Math.exp(e)*t.expm1(-2*e)},t.tanh=Math.tanh&&0!==Math.tanh(1e-20)?Math.tanh:function(e){var r=e>0?1:-1;e=e>0?e:-e;var n=t.expm1(-2*e);return-r*n/(2+n)},t.acosh=Math.acosh||function(e){return 1>e?NaN:Math.log(e+t.sqrtxsqm1(e))},t.asinh=Math.asinh&&0!==Math.asinh(1e-20)?Math.asinh:function(e){var r=e>0?1:-1;return e=e>0?e:-e,1+e*e===1?r*t.log1p(e):r*Math.log(e+t.sqrtxsqp1(e))},t.atanh=Math.atanh&&0!==Math.atanh(1e-20)?Math.atanh:function(e){return.5*(t.log1p(e)-t.log1p(-e))},t.expm1=Math.expm1||function(e){return e+.5*e*e===e?e:Math.exp(e)-1},t.log1p=Math.log1p||function(e){return e-.5*e*e===e?e:Math.log(1+e)},t.sqrtxsqp1=function(e){var t=e*e;return 1+t===1?1:1+t===t?Math.abs(e):Math.sqrt(t+1)},t.sqrtxsqm1=function(e){var t=e*e;return 1>t?NaN:t-1===t?Math.abs(e):Math.sqrt(t-1)},t}),define("math/quadrature",["require","math/mathshim","math/poi"],function(e){"use strict";function t(e,t){for(var r=v;r>0;r--){var n=p/v*r,i=c.sinh(n),a=c.cosh(Math.PI/2*i),o=1/(Math.exp(Math.PI/2*i)*a),s=c.cosh(n)/(a*a);e.push(o),t.push(s)}}function r(e,t,r){return.5*(t*(2-r)+e*r)}function n(e,t,r){var n=.5*(t+r),i=h(t,e(t),n,e(n),r,e(r),e,0);return i?.5*(i[0][0]+i[1][0]):n}function i(e,t,r,n,i){return{x1:e,x2:t,value:r,error:n,minerror:i}}function a(e,t,n){var i=Math.abs(e(r(t,n,d))),a=Math.abs(e(r(t,n,2*d)));return d>i||d>a?!1:i>1.95*a}function o(e,t,n){var o,s,u=r(n,t,b[0]),c=r(t,n,b[0]),l=e(u),h=e(c),p=r(t,n,1),m=e(p);if(isFinite(m)&&!isFinite(l)){if(o=f(u,l,p,m,e),Math.abs((o[0]-t)/(n-t))>y)return i(t,n,NaN,NaN,NaN);t=o[0],l=o[1]}if(isFinite(m)&&!isFinite(h)){if(s=f(p,m,c,h,e),Math.abs((s[0]-n)/(n-t))>y)return i(t,n,NaN,NaN,NaN);n=s[0],h=s[1]}if(isFinite(l)&&isFinite(h)&&!isFinite(m)){if(o=f(u,l,p,m,e),s=f(p,m,c,h,e),Math.abs((s[0]-o[0])/(n-t))>y)return i(t,n,NaN,NaN,NaN);m=.5*(o[1]+s[1])}if(a(e,t,n)||a(e,n,t))return i(t,n,NaN,NaN,NaN);for(var d=m,g=0,_=0,w=0,T=0,E=0,S=0,N=0;v>N;N+=4)E=e(r(t,n,b[N])),S=e(r(n,t,b[N])),T=Math.max(T,Math.abs(E),Math.abs(S)),g+=x[N]*(E+S),E=e(r(t,n,b[N+1])),S=e(r(n,t,b[N+1])),T=Math.max(T,Math.abs(E),Math.abs(S)),w+=x[N+1]*(E+S),E=e(r(t,n,b[N+2])),S=e(r(n,t,b[N+2])),T=Math.max(T,Math.abs(E),Math.abs(S)),_+=x[N+2]*(E+S),E=e(r(t,n,b[N+3])),S=e(r(n,t,b[N+3])),T=Math.max(T,Math.abs(E),Math.abs(S)),w+=x[N+3]*(E+S);var I,C=d+g,k=C+_,A=k+w,D=Math.abs(_-C),F=Math.abs(w-k),P=M*(n-t)*A,O=M*Math.abs(n-t)*T*x[0];return I=0===D?M*Math.abs(n-t)*F:M*Math.abs(n-t)*F*(F/D)*(F/D),I=Math.max(I,O),i(t,n,P,I,O)}function s(e){for(var t=-(1/0),r=-(1/0),n=-1,i=0,a=0;a<e.length;a++){var o=e[a];i+=o.value,o.error>t&&(t=o.error,n=a),o.minerror>r&&(r=o.minerror)}return{maxerror:t,maxminerror:r,maxindex:n,totalvalue:i}}function u(e,t,i,a){if(void 0===a&&(a=32),!isFinite(t)||!isFinite(i))return NaN;for(var u=[o(e,t,i)],c=s(u),l=1;a>l&&!(Math.abs(c.maxerror/c.totalvalue)<=32*g||c.maxerror<=32*g||c.maxerror<=32*c.maxminerror);l++){var h=u[u.length-1];u[u.length-1]=u[c.maxindex],u[c.maxindex]=h;var f=u.pop(),p=n(e,r(f.x2,f.x1,.125),r(f.x1,f.x2,.125));u.push(o(e,f.x1,p)),u.push(o(e,p,f.x2)),c=s(u)}return c.totalvalue}var c=e("math/mathshim"),l=e("math/poi"),h=l.bisectJump,f=l.bisectFinite,p=3.154019550531224,m=Math.pow(2,-13),d=m*m,g=d*d,y=d,v=32,b=[],x=[];t(b,x);for(var _=0,w=0;w<x.length;w++)_+=x[w];var M=1/(1+2*_);return{quad:u}}),define("math/builtin",["require","math/mathshim","math/distance","math/quadrature"],function(e){function t(e){return e>1e12?!1:Math.round(s*e)*Math.PI===e}function r(e){if(e>1e12)return!1;var t=Math.round(2*s*e);return t%2===1&&t*Math.PI===2*e}var n=e("math/mathshim"),i=e("math/distance"),a=e("math/quadrature"),o={};o.cosh=n.cosh,o.sinh=n.sinh,o.tanh=n.tanh,o.acosh=n.acosh,o.asinh=n.asinh,o.atanh=n.atanh,o.expm1=n.expm1,o.log1p=n.log1p,o.sqrtxsqp1=n.sqrtxsqp1,o.sqrtxsqm1=n.sqrtxsqm1,o.mod=function(e,t){return e-t*Math.floor(e/t)},o.sign=Math.sign||function(e){return 0===e?0:e>0?1:0>e?-1:NaN},o.lcm=function(e,t){e=Math.round(e),t=Math.round(t);var r=o.gcd(e,t);return Math.abs(e*t/r)},o.gcd=function(e,t){if(e=Math.round(e),t=Math.round(t),0>e&&(e=-e),0>t&&(t=-t),t>e){var r=t;t=e,e=r}if(0===t)return e;for(var n=e%t;n>0;)e=t,t=n,n=e%t;return t},o.listGCD=function(e){if(0===e.length)return NaN;for(var t=e[0],r=1;r<e.length;r++)t=o.gcd(t,e[r]);return t},o.listLCM=function(e){if(0===e.length)return NaN;for(var t=e[0],r=1;r<e.length;r++)t=o.lcm(t,e[r]);return t},o.nCr=function(e,t){if(e=Math.round(e),t=Math.round(t),t>e||0>e||0>t)return 0;for(var r=1,n=0;t>n;n++)r*=(e-n)/(n+1);return r},o.nPr=function(e,t){if(e=Math.round(e),t=Math.round(t),t>e||0>e||0>t)return 0;for(var r=1,n=0;t>n;n++)r*=e-n;return r},o.factorial=function(e){return o.gamma(e+1)},o._integerFactorial=function(e){if(e!==Math.floor(e))return NaN;if(0>e)return NaN;if(e>170)return NaN;if(0===e||1===e)return 1;for(var t=1,r=2;e>=r;r++)t*=r;return t},o.gamma=function(e){return e===Math.floor(e)?o._integerFactorial(e-1):0>e?Math.PI/(Math.sin(Math.PI*e)*o.gamma(1-e)):Math.exp(o.lnGamma(e))},o.lnGamma=function(e){if(0>e)return NaN;for(var t=[57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],r=.9999999999999971,n=0;14>n;n++)r+=t[n]/(e+n+1);var i=e+5.2421875;return(e+.5)*Math.log(i)-i+Math.log(2.5066282746310007*r/e)},o.bernoulliTable=[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-236364091/2730,8553103/6,-23749461029/870],o.cotDerivative=function(e,t){if(e!==Math.floor(e))return NaN;if(0>e)return NaN;if(0===e)return 1/o.tan(t);var r=o.sin(t);if(1===e)return-1/(r*r);var n=o.cos(t);if(2===e)return 2*n/(r*r*r);var i,a,s,u,c,l=[0,2];for(a=3;e>=a;a++){for(i=[],s=0;a>s;s++)u=0,c=0,s>0&&(u=(a-s+1)*l[s-1]),a>s+2&&(c=(s+1)*l[s+1]),i.push(-(u+c));l=i}var h=0;for(s=e-1;s>=0;s--)h=i[s]+n*h;return h/Math.pow(r,e+1)},o.polyGamma=function(e,t){if(0>e)return NaN;if(e!==Math.floor(e))return NaN;var r=e%2===0?-1:1;if(0>t)return-r*o.polyGamma(e,1-t)-Math.pow(Math.PI,e+1)*o.cotDerivative(e,Math.PI*t);for(var n=o.factorial(e),i=0,a=Math.pow(t,-(e+1));10>t;)i+=a,t++,a=Math.pow(t,-(e+1));i+=0===e?-Math.log(t):a*t/e,i+=.5*a;for(var s=o.bernoulliTable,u=e+1,c=2,l=a*t*u/c,h=1/(t*t),f=1;14>=f;f++)l*=h,i+=l*s[f-1],u++,c++,l*=u/c,u++,c++,l*=u/c;return n*r*i},o.toFraction=function(e,t){if(e===1/0)return{n:1/0,d:1};if(e===-(1/0))return{n:-(1/0),d:1};if(!isFinite(e))return{n:NaN,d:1};var r,n,i,a=0,o=1,s=1,u=0;for(t||(t=1e6);;){if(r=Math.floor(e),n=r*o+a,i=r*u+s,i>t)break;if(a=o,s=u,o=n,u=i,e===r)break;e=1/(e-r)}return{n:o,d:u}},o.log=function(e){var t=Math.log(e);return Math.exp(Math.round(t))===e?Math.round(t):t},o.log_base=function(e,t){if(0===t)return NaN;var r=Math.log(e)/Math.log(t);return Math.pow(t,Math.round(r))===e?Math.round(r):r},o.common_log=function(e){return o.log_base(e,10)},o.pow=function(e,t){if(!isFinite(e)&&0===t)return NaN;if(e>=0||t===Math.floor(t))return Math.pow(e,t);var r=o.toFraction(t,100);return i.approx(r.n/r.d,t,2)&&r.d%2===1?(r.n%2===0?1:-1)*Math.pow(-e,t):NaN},o.div=function(e,t){return 0===t?NaN:e/t},o.reciprocal=function(e){return o.div(1,e)},o.nthroot=function(e,t){return o.pow(e,1/t)};var s=1/Math.PI;return o.sin=function(e){return t(Math.abs(e))?0:Math.sin(e)},o.cos=function(e){return r(Math.abs(e))?0:Math.cos(e)},o.tan=function(e){var n=Math.abs(e);return t(n)?0:r(n)?NaN:Math.tan(e)},o.sec=function(e){return r(Math.abs(e))?NaN:1/Math.cos(e)},o.csc=function(e){return t(Math.abs(e))?NaN:1/Math.sin(e)},o.cot=function(e){var n=Math.abs(e);return t(n)?NaN:r(n)?0:1/Math.tan(e)},o.acot=function(e){return Math.PI/2-Math.atan(e)},o.acsc=function(e){return Math.asin(o.reciprocal(e))},o.asec=function(e){return Math.acos(o.reciprocal(e))},o.sech=function(e){return o.reciprocal(o.cosh(e))},o.csch=function(e){return o.reciprocal(o.sinh(e))},o.coth=function(e){return o.reciprocal(o.tanh(e))},o.asech=function(e){return o.acosh(o.reciprocal(e))},o.acsch=function(e){return o.asinh(o.reciprocal(e))},o.acoth=function(e){return o.atanh(o.reciprocal(e))},o.mean=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t/e.length},o.total=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t},o.length=function(e){return e.length},o.listMin=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var r=1;r<e.length;r++){if(isNaN(e[r]))return NaN;e[r]<t&&(t=e[r])}return t},o.listMax=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var r=1;r<e.length;r++){if(isNaN(e[r]))return NaN;e[r]>=t&&(t=e[r])}return t},o.quantile=function(e,t){if(!isFinite(t)||0>t||t>1)return NaN;var r=e.length,n=o.sortPerm(e),i=t*(r-1);return Math.floor(i)===i?e[n[i]]:(Math.ceil(i)-i)*e[n[Math.floor(i)]]+(i-Math.floor(i))*e[n[Math.ceil(i)]]},o.sortPerm=function(e){for(var t=e.length,r=[],n=0;t>n;n++)r.push(n);return r.sort(function(t,r){return e[t]-e[r]}),r},o.upperQuantileIndex=function(e,t){return o.sortPerm(e)[Math.ceil(t*(e.length-1))]+1},o.lowerQuantileIndex=function(e,t){return o.sortPerm(e)[Math.floor(t*(e.length-1))]+1},o.median=function(e){return o.quantile(e,.5)},o.argMin=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var r=0,n=1;n<e.length;n++){if(isNaN(e[n]))return 0;e[n]<t&&(r=n,t=e[n])}return r+1},o.argMax=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var r=0,n=1;n<e.length;n++)if(e[n]>=t){if(isNaN(e[n]))return 0;r=n,t=e[n]}return r+1},o.varp=function(e){for(var t=o.mean(e),r=0,n=0;n<e.length;n++){var i=e[n]-t;r+=i*i}return r/e.length},o.mad=function(e){for(var t=o.mean(e),r=0,n=0;n<e.length;n++)r+=Math.abs(e[n]-t);return r/e.length},o["var"]=function(e){var t=e.length;return o.varp(e)*t/(t-1)},o.covp=function(e,t){if(e.length!==t.length)return NaN;for(var r=e.length,n=o.mean(e),i=o.mean(t),a=0,s=0;r>s;s++)a+=(e[s]-n)*(t[s]-i);return a/r},o.cov=function(e,t){if(e.length!==t.length)return NaN;var r=e.length;return o.covp(e,t)*r/(r-1)},o.corr=function(e,t){if(e.length!==t.length)return NaN;for(var r,n,i=e.length,a=o.mean(e),s=o.mean(t),u=0,c=0,l=0,h=0;i>h;h++)r=e[h]-a,n=t[h]-s,u+=r*r,c+=n*n,l+=r*n;return l/Math.sqrt(u*c)},o.stdev=function(e){return Math.sqrt(o["var"](e))},o.stdevp=function(e){return Math.sqrt(o.varp(e))},o.quad=a.quad,o.distance=function(e,t){return i.hypot(t[0]-e[0],t[1]-e[1])},o.midpoint=function(e,t){return[.5*(e[0]+t[0]),.5*(e[1]+t[1])]},o}),define("math/functions",["require","math/builtin"],function(e){function t(e){for(var t=0;t<e.length;t++)e[t].compiled&&delete e[t].compiled.fn}function r(e){for(var t=0;t<e.length;t++){var r=e[t].compiled;r&&(r.fn=i(r.args,r.source))}}function n(e,t){for(var r=[],n=0;t>n;n++)r.push("values["+n+"]");return i(["values"],"return "+e(r))}function i(e,t){var r=e.join(","),n="return (function("+r+"){"+t+"})",i=new Function(["BuiltIn"],n);return i(a)}var a=e("math/builtin");return{dehydrateGraphData:t,rehydrateGraphData:r,closureFunctionWithBuiltIn:i,createEvaluateFunction:n}});var define_enum_constant,enum_strings={},debuggable_enums=!0;if(debuggable_enums)define_enum_constant=function(e){this[e]=e};else{var next_enum=1e3;define_enum_constant=function(e){enum_strings[next_enum]=e,this[e]=next_enum++}}define_enum_constant("EXPRESSION"),define_enum_constant("FUNCTION_DEFINITION"),define_enum_constant("VARIABLE_DEFINITION"),define_enum_constant("ORDERED_PAIR_LIST"),define_enum_constant("DOUBLE_INEQUALITY"),define_enum_constant("COMPARATOR"),define_enum_constant("CHAINED_COMPARATOR"),define_enum_constant("EQUATION"),define_enum_constant("CONSTANT"),define_enum_constant("IDENTIFIER"),define_enum_constant("LIST"),define("math/enums",function(){}),define("math/parsenode/base",["require","console","pjs","math/functions","../enums"],function(e){var t=e("console"),r=e("pjs"),n=e("math/functions");return e("../enums"),r(function(e,r,i){e.init=function(){this._dependencies=[],this._inputString="",this._exports=[]},e.exportPenalty=0;var a=0;e.tmpVar=function(){return"tmp"+a++},e.statementType=EXPRESSION,e.dependencies=function(){return this.getDependencies()},e.evaluateOnce=function(e){void 0===e&&(e={});var t=this.getConcreteTree(e),r=t.getEvaluationInfo();return r?r[0].val:NaN},e.setInputString=function(e){this._inputString=e},e.getInputString=function(){return this._inputString},e.shouldExportAns=function(){return!1},e.getAnsVariable=function(){return this.shouldExportAns()&&this.userData&&this.userData.hasOwnProperty("index")?["ans_"+this.userData.index]:[]},e.addDependency=function(e){this.dependsOn(e)||this._dependencies.push(e)},e.addDependencies=function(e){for(var t=0;t<e.length;t++)this.addDependency(e[t])},e.getDependencies=function(){return this._dependencies},e.removeDependency=function(e){this._dependencies.splice(this._dependencies.indexOf(e),1)},e.dependsOn=function(e){return this._dependencies.indexOf(e)>-1},e.getExports=function(){var e=this._exports||[];return e.concat(this.getAnsVariable())},e.getLegalExports=function(e){return this.getExports().filter(function(t){return!e.assignmentForbidden(t)})},e.exportsSymbol=function(e){return this._exports.indexOf(e)>-1},e.exportTo=function(e,t,r){for(var n=this.getLegalExports(e),i=0;i<n.length;i++){var a=n[i];if(r[a])return;r[a]=t.blocksExport?t:this}},e.getOperator=function(){return this.operator||"="},e.isInequality=function(){return!1},e.isShadeBetween=function(){return!1},e.getAllIds=function(){return this.userData?[this.userData.id]:[]},e.getEvaluationInfo=function(){return!1},e.getSliderInfo=function(){return!1},e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies())},e.okForImplicitFunction=function(){return!1},e.getConcreteTree=function(e){return t.log("Warning - default empty version of getConcreteTree being called"),this},e.tryGetConcreteTree=function(){var e;try{e=this.getConcreteTree.apply(this,arguments)}catch(t){if(!(t instanceof i))throw t;e=t}return e},e.getCompiledFunctions=function(e){var t=this.getEvalStrings(),r=t.statements.join(";")+";return "+t.expression;if(void 0===e){e=this.getDependencies();var i=e.indexOf("x");if(-1!==i){var a=e[0];e[0]=e[i],e[i]=a}}return[{args:e,source:r,fn:n.closureFunctionWithBuiltIn(e,r)}]},e.getCompiledDerivatives=function(){var e=this.getDependencies(),t=this.takeDerivative(e[0]||"x");return t.getCompiledFunctions()}})}),define("lib/worker-i18n",["require","underscore"],function(e){var t=e("underscore"),r=function(e,r){return r&&0!==t.size(r)?JSON.stringify({msg:e,vars:r}):e};\nreturn{t:r}}),define("math/parsenode/error",["require","pjs","./base"],function(e){var t=e("pjs"),r=e("./base");return t(r,function(e,t){e.init=function(e){t.init.call(this),this._msg=e,this._sliderVariables=[],this.blocksExport=!0},e.evaluateOnce=function(e){return this._msg},e.getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this},e.isError=!0,e.getError=function(){return this._msg},e.setDependencies=function(e){return this._dependencies=e,this},e.allowExport=function(){return this.blocksExport=!1,this}})}),define("lib/number-to-latex",["require"],function(e){return function(e){if("string"==typeof e)return e;var t=e+"";return t=t.replace(/1e\\+?([-\\d]+)/,"10^{$1}"),t=t.replace(/([-\\d\\.]+)e\\+?([-\\d]+)/,"$1\\\\cdot 10^{$2}")}}),define("graphing/label",["require","underscore","math/builtin","math/distance","lib/number-to-latex"],function(e){function t(e,t){if(isNaN(e))return{ariaString:"undefined",string:"undefined",value:e};if(e===1/0)return{ariaString:"Infinity",string:"Infinity",value:e};if(e===-(1/0))return{ariaString:"minus Infinity",string:"-Infinity",value:e};if(0===e)return{ariaString:"0",string:"0",value:e};t||(t=e),Math.abs(e)>Math.abs(t)&&(t=e);var r,i,l,h=d.toFraction(e/Math.PI,24);if(u(t)&&g.approx(h.n/h.d*Math.PI,e,3))return r=0===h.n?"0":1===h.n?"":-1===h.n?"-":h.n.toString()+"",i=1===h.d?"":"/"+h.d.toString(),l=r+i,{ariaString:n(l),string:l,value:h.n/h.d*Math.PI};var f,p;if(u(t))l=s(a(e.toFixed(c(t)))),p=null,f=null;else{var m=o(e.toExponential(c(t/e))).split("e");f=m[0]+"10",p=m[1].replace("+",""),l=o(e.toExponential(c(t/e))).replace("+","")}return{ariaString:n(l),string:l,mantissa:f,superscript:p,value:parseFloat(l)}}function r(e){return v["["+e+"]"]}function n(e){return e.replace(b,r).replace(/ +/gi," ").trim()}function i(e,r,n,i){var a=t(e,r),o=t(i(a.value),n);return[a,o]}function a(e){return-1===e.indexOf(".")?e:e.replace(x,"")}function o(e){var t=/\\.?0+e/;return e.replace(t,"e")}function s(e){return"-0"===e?"0":e}function u(e){return e=Math.abs(e),e>1e-4&&1e7>e}function c(e){return e=Math.abs(e),e=Math.max(e,1e-16),Math.max(3,Math.floor(4.5-Math.log(e)/Math.LN10))}function l(e){var t={pi:"",tau:"",theta:"",phi:""};return t.hasOwnProperty(e)?t[e]:e}function h(e){var t=e.split("_"),r="";return t[0].length>1&&(r+="\\\\"),r+=t[0],t[1]&&(r+=1===t[1].length?"_"+t[1]:"_{"+t[1]+"}"),r}function f(e){var t=e.split("_").map(l).map(m.escape),r=t[0];return t[1]&&(r+="<sub>"+t[1]+"</sub>"),r}function p(e){return e=e.replace(/\\\\operatorname\\{(.*)\\}/,"$1"),e.replace(/[{}\\\\]/g,"")}var m=e("underscore"),d=e("math/builtin"),g=e("math/distance"),y=e("lib/number-to-latex"),v={"[e]":" times 10 to the ","[+]":" plus ","[-]":" minus ","[*]":" times ","[/]":" over ","[]":" pi ","[]":" tau ","[]":" theta ","[]":" phi "},b=new RegExp(Object.keys(v).join("|"),"gi"),x=/\\.?0+$/,_=function(e,t,r){if(r=r||{},isNaN(t))return"undefined";if(0===t)return"0";if(r.zeroCutoff&&Math.abs(t)<r.zeroCutoff)return"0";var n=r.smallCutoff||.001,i=r.bigCutoff||1e6,a=r.digits||10;if(!(Math.abs(t)>i||Math.abs(t)<n)){var s=Number(t.toPrecision(a));return t!==s&&r.addEllipses&&(s+="..."),s+""}var u=o(t.toExponential(a-2));return"latex"===e?u.replace(/([\\d\\.\\-]+)e\\+?([\\d\\-]+)/,"$1\\\\times10^{$2}"):"plainmath"===e?u.replace(/([\\d\\.\\-]+)e\\+?([\\d\\-]+)/,"$1 * 10^$2"):"html"===e?u.replace(/([\\d\\.\\-]+)e\\+?([\\d\\-]+)/,"$1<span class=\'dcg-cross\'></span>10<sup>$2</sup>"):void 0},w=function(e,t){return _("html",e,t)},M=function(e,t){return _("plainmath",e,t)},T=function(e,t){return _("latex",e,t)};return{value:t,point:i,formatSymbol:l,identifierToLatex:h,latexToIdentifier:p,numberToLatex:y,identifierToHTML:f,truncatedHTMLLabel:w,truncatedLatexLabel:T,truncatedPlainmathLabel:M}}),define("math/types",["require","lib/worker-i18n"],function(e){function t(e){switch(e){case u:return"Any";case c:return"Number";case l:return"Bool";case h:return"Point";case f:return"ListOfAny";case p:return"ListOfNumber";case m:return"ListOfBool";case d:return"ListOfPoint";case g:return"ErrorType";default:throw new Error("Invalid type")}}function r(e){switch(e){case u:return s.t("an unknown object");case c:return s.t("a number");case l:return s.t("a true/false value");case h:return s.t("a point");case f:return s.t("a list of unknown objects");case p:return s.t("a list of numbers");case m:return s.t("a list of true/false values");case d:return s.t("a list of points");case g:return s.t("an error object");default:throw new Error("Invalid type")}}function n(e){switch(e){case f:return!0;case p:return!0;case m:return!0;case d:return!0;default:return!1}}function i(e){switch(e){case f:return u;case p:return c;case m:return l;case d:return h;default:return u}}function a(e){switch(e){case u:return f;case c:return p;case l:return m;case h:return d;default:throw new Error("Type "+t(e)+" does not implement listType.")}}function o(e){switch(e){case u:return!0;case c:return!0;case l:return!0;case h:return!0;default:return!1}}var s=e("lib/worker-i18n"),u=0,c=1,l=2,h=3,f=4,p=5,m=6,d=7,g=8;return{Any:u,Number:c,Bool:l,Point:h,ListOfAny:f,ListOfNumber:p,ListOfBool:m,ListOfPoint:d,ErrorType:g,repr:t,prettyPrint:r,isList:n,elementType:i,listType:a,hasListType:o}}),define("math/errormsg",["require","lib/worker-i18n","math/parsenode/error","graphing/label","worker/workerconfig","math/types"],function(e){var t=e("lib/worker-i18n"),r=e("math/parsenode/error"),n=e("graphing/label"),i=e("worker/workerconfig"),a=e("math/types");return{parseError:function(){return r(t.t("Sorry, I don\'t understand this."))},addTypeError:function(e){return r(t.t("Cannot add __symbol2__ and __symbol1__.",{symbol1:a.prettyPrint(e[0]),symbol2:a.prettyPrint(e[1])})).allowExport()},subtractTypeError:function(e){return r(t.t("Cannot subtract __symbol2__ from __symbol1__.",{symbol1:a.prettyPrint(e[0]),symbol2:a.prettyPrint(e[1])})).allowExport()},multiplyTypeError:function(e){return r(t.t("Cannot multiply __symbol1__ by __symbol2__.",{symbol1:a.prettyPrint(e[0]),symbol2:a.prettyPrint(e[1])})).allowExport()},divideTypeError:function(e){return r(t.t("Cannot divide __symbol1__ by __symbol2__.",{symbol1:a.prettyPrint(e[0]),symbol2:a.prettyPrint(e[1])})).allowExport()},exponentTypeError:function(e){return r(t.t("Cannot raise __symbol1__ to __symbol2__.",{symbol1:a.prettyPrint(e[0]),symbol2:a.prettyPrint(e[1])})).allowExport()},negativeTypeError:function(e){return r(t.t("Cannot negate __symbol__.",{symbol:a.prettyPrint(e[0])})).allowExport()},comparatorTypeError:function(e){return r(t.t("Cannot compare __symbol1__ to __symbol2__.",{symbol1:a.prettyPrint(e[0]),symbol2:a.prettyPrint(e[1])})).allowExport()},andTypeError:function(e){return r(t.t("Cannot apply __symbol__ to __symbol1__ and __symbol2__.",{symbol:"and",symbol1:a.prettyPrint(e[0]),symbol2:a.prettyPrint(e[1])})).allowExport()},listTypeError:function(e){return r(t.t("Cannot store __symbol1__ in a list.",{symbol1:a.prettyPrint(e[0]),symbol2:a.prettyPrint(e[1])})).allowExport()},pointTypeError:function(e){return r(t.t("Cannot use __symbol1__ and __symbol2__ as the coordinates of __symbol3__.",{symbol1:a.prettyPrint(e[0]),symbol2:a.prettyPrint(e[1]),symbol3:a.prettyPrint(a.Point)})).allowExport()},indexTypeError:function(e){return r(t.t("Cannot index __symbol1__ with __symbol2__.",{symbol1:a.prettyPrint(e[0]),symbol2:a.prettyPrint(e[1])})).allowExport()},functionTypeError:function(e,i){switch(i.length){case 1:return r(t.t("Function \'__fn__\' cannot be applied to __arg__.",{fn:n.formatSymbol(e),arg:a.prettyPrint(i[0])})).allowExport();case 2:return r(t.t("Function \'__fn__\' cannot be applied to __arg1__ and __arg2__.",{fn:n.formatSymbol(e),arg1:a.prettyPrint(i[0]),arg2:a.prettyPrint(i[1])})).allowExport();default:return r(t.t("Function \'__fn__\' cannot be applied to these arguments.",{fn:n.formatSymbol(e)})).allowExport()}},sumLowerBoundTypeError:function(e){return r(t.t("Lower bound of a sum cannot be __symbol__.",{symbol:a.prettyPrint(e[0])})).allowExport()},sumUpperBoundTypeError:function(e){return r(t.t("Upper bound of a sum cannot be __symbol__.",{symbol:a.prettyPrint(e[0])})).allowExport()},sumArgumentTypeError:function(e){return r(t.t("Cannot take the sum of __symbol__.",{symbol:a.prettyPrint(e[0])})).allowExport()},productLowerBoundTypeError:function(e){return r(t.t("Lower bound of a product cannot be __symbol__.",{symbol:a.prettyPrint(e[0])})).allowExport()},productUpperBoundTypeError:function(e){return r(t.t("Upper bound of a product cannot be __symbol__.",{symbol:a.prettyPrint(e[0])})).allowExport()},productArgumentTypeError:function(e){return r(t.t("Cannot take the product of __symbol__.",{symbol:a.prettyPrint(e[0])})).allowExport()},integralLowerBoundTypeError:function(e){return r(t.t("Lower bound of an integral cannot be __symbol__.",{symbol:a.prettyPrint(e[0])})).allowExport()},integralUpperBoundTypeError:function(e){return r(t.t("Upper bound of an integral cannot be __symbol__.",{symbol:a.prettyPrint(e[0])})).allowExport()},integralArgumentTypeError:function(e){return r(t.t("Cannot take the integral of __symbol__.",{symbol:a.prettyPrint(e[0])})).allowExport()},derivativeTypeError:function(e){return r(t.t("Cannot take the derivative of __symbol__.",{symbol:a.prettyPrint(e[0])})).allowExport()},derivativeVariableTypeError:function(e,i){return r(t.t("Cannot take derivative with respect to \'__symbol1__\' because it is __symbol2__.",{symbol1:n.formatSymbol(e),symbol2:a.prettyPrint(i[0])}))},piecewiseConditionTypeError:function(e){return r(t.t("The condition in a piecewise expression must be __symbol1__ but was __symbol2__.",{symbol1:a.prettyPrint(a.Bool),symbol2:a.prettyPrint(e[0])})).allowExport()},piecewiseBranchTypeError:function(e){return r(t.t("Cannot use __symbol__ as a branch of a piecewise expression.",{symbol:a.prettyPrint(e[0])})).allowExport()},tableHeaderTypeError:function(e){return r(t.t("Table header cannot be __symbol__.",{symbol:a.prettyPrint(e[0])}))},tableEntryTypeError:function(e){return r(t.t("Table entry cannot be __symbol__.",{symbol:a.prettyPrint(e[0])}))},heterogeneousList:function(){return r(t.t("All elements of a list must have the same type.")).allowExport()},deeplyNested:function(){return r(t.t("Definitions are nested too deeply.")).allowExport()},wrongArity:function(e,i,a){e=n.formatSymbol(e);var o,s;if(1===i)s=t.t("For example, try typing: __dependency__(x).",{dependency:e}),o=a>1?t.t("Function \'__dependency__\' requires only 1 argument. __supplement__",{dependency:e,supplement:s}):t.t("Function \'__dependency__\' requires an argument. __supplement__",{dependency:e,supplement:s});else{for(var u=[],c=0;i>c;c++)u[c]=c+1;var l=n.formatSymbol(e)+"("+u.join(", ")+")";s=t.t("For example, try typing: __recommendation__.",{recommendation:l}),o=t.t("Function \'__dependency__\' requires __assignment_arity__ arguments. __supplement__",{dependency:e,assignment_arity:i,supplement:s})}return r(o)},wrongParametrizedReducerArity:function(e){return r(t.t("Function \'__symbol__\' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], 1)"}))},wrongDoubleReducerArity:function(e){return r(t.t("Function \'__symbol__\' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], [3,2,1])"}))},primedFunctionArity:function(){return r(t.t("Prime notation can only be used for functions of a single argument."))},zeroArgReducer:function(e){return r(t.t("Function \'__symbol__\' requires at least one argument. For example, try typing: __symbol__(1, 2).",{symbol:n.formatSymbol(e)}))},missingRHS:function(e){return e=n.formatSymbol(e),r(t.t("What do you want \'__symbol__\' to equal?",{symbol:e}))},malformedPoint:function(){return r(t.t("Points are written like this: (1, 2)."))},badImplicitMultiply:function(e){return e=n.formatSymbol(e),r(t.t("Use parentheses around the argument of \'__symbol__\'.",{symbol:e}))},binaryOperatorMissingOperand:function(e){return r(t.t("You need something on both sides of the \'__symbol__\' symbol.",{symbol:e}))},fractionMissingNumerator:function(){return r(t.t("You need a numerator for the top of your fraction."))},fractionMissingDenominator:function(){return r(t.t("You need a denominator for the bottom of your fraction."))},fractionEmpty:function(){return r(t.t("You need a numerator and denominator for your fraction."))},badTrigExponent:function(e){var n=e+"^2",i=e+"^-1";return r(t.t("Only __form1__ and __form2__ are supported. Otherwise, use parens.",{form1:n,form2:i}))},badLogExponent:function(e){var n=e+"^2";return r(t.t("Only __form__ is supported. Otherwise, use parens.",{form:n}))},blankExpression:function(){return r(t.t("You haven\'t written anything yet."))},functionNotDefined:function(e){return e=n.formatSymbol(e),r(t.t("Function \'__dependency__\' is not defined.",{dependency:e}))},parameterAlreadyDefined:function(e){return e=n.formatSymbol(e),r(t.t("You can\'t use \'__dependency__\' as a parameter of this function because \'__dependency__\' is already defined.",{dependency:e}))},cannotRedefine:function(e,i){return e=n.formatSymbol(e),r(void 0===i?t.t("You can\'t redefine \'__symbol__\' because it\'s already defined.",{symbol:e}):t.t("You can\'t redefine \'__symbol__\' because \'__symbolRoot__\' is already defined.",{symbol:e,symbolRoot:i}))},multiplyDefined:function(e){return e=n.formatSymbol(e),r(t.t("You\'ve defined \'__dependency__\' in more than one place. Try picking a different variable, or deleting some of the definitions of \'__dependency__\'.",{dependency:e}))},shadowedIndex:function(e){return e=n.formatSymbol(e),r(t.t("You can\'t use \'__symbol__\' as an index because it\'s already defined.",{symbol:e}))},cycle:function(e){e=e.map(n.formatSymbol);var i=e.pop();return r(t.t("\'__symbols__\' and \'__lastSymbol__\' can\'t be defined in terms of each other.",{symbols:e.join("\', \'"),lastSymbol:i}))},selfReferentialFunction:function(e){return r(t.t("The definition of function \'__symbol__\' cannot depend on \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},tooManyVariables:function(e){if(e=e.map(n.formatSymbol),0===e.length)return r(t.t("Too many variables, I don\'t know what to do with this."));var i=e.pop();return r(t.t("Too many variables. Try defining \'__variables__\'.",{variables:(e.length?e.join("\', \'")+"\' or \'":"")+i}))},addArgumentsToDefinition:function(e,i,a){e=e.map(n.formatSymbol),i=n.formatSymbol(i),a=a.map(n.formatSymbol);var o=i+"("+a.join(",")+","+e.join(",")+")",s=e.pop(),u={symbols:e.join("\', \'"),lastSymbol:s,newSignature:o};return r(e.length?t.t("Try including \'__symbols__\' and \'__lastSymbol__\' as arguments by defining the function as \'__newSignature__\'.",u):t.t("Try including \'__lastSymbol__\' as an argument by defining the function as \'__newSignature__\'.",u))},invalidLHS:function(e){return e=n.formatSymbol(e),r(t.t("Sorry, you can\'t graph __symbol__ as a function of anything yet.",{symbol:e}))},unplottablePolarFunction:function(){return r(t.t("We can\'t plot  as a function of r. Try plotting r() instead."))},invalidInequalityVariables:function(){return r(t.t("We only plot inequalities of x and y, or r and ."))},invalidImplicitVariables:function(){return r(t.t("We only support implicit equations of x and y."))},unsolvable:function(){return r(i.singleVariableSolutions?t.t("We don\'t solve complicated single-variable equations yet."):t.t("Solving single-variable equations is disabled."))},singleVariableListSolve:function(){return r(t.t("We don\'t solve single-variable equations involving lists yet."))},complicatedImplicitInequality:function(){return r(t.t("We can only plot inequalities when one variable is quadratic or linear."))},complicatedPolarImplicit:function(){return r(t.t("Polar equations must be linear in r."))},invalidDoubleInequalityVariables:function(){return r(t.t("We only plot double inequalities of x and y."))},mismatchedDoubleInequality:function(){return r(t.t("Double inequalities must both go the same way, e.g. 1 < y < 2."))},complicatedDoubleInequality:function(){return r(t.t("We only support solved double inequalities. Try deleting one side of the inequality."))},equationRequired:function(e){return e?(e=n.formatSymbol(e),r(t.t("Try adding \'__lhs__\' to the beginning of this equation.",{lhs:e+"="}))):r(t.t("Try adding an equals sign to turn this into an equation."))},variableAsFunction:function(e){return e=n.formatSymbol(e),r(t.t("Variable \'__dependency__\' can\'t be used as a function.",{dependency:e}))},nestedList:function(){return r(t.t("Nested lists are not allowed."))},emptyList:function(){return r(t.t("Empty lists are not allowed."))},invalidTableHeader:function(e){return r(t.t("Table headers must be simple expressions. __supplement__",{supplement:e}))},invalidTableEntry:function(e){return r(t.t("Table entries must be simple expressions. __supplement__",{supplement:e}))},invalidFirstTableColumn:function(){return r(t.t("First column may not be __most__ or __last__.",{most:"\'y\', \'r\',",last:"\'\'"}))},invalidDependentFirstTableColumn:function(){return r(t.t("This column header can\'t be defined elsewhere in the calculator."))},invalidRegressionParameter:function(e){return r(t.t("\'__symbol__\' may not be used as a regression parameter.",{symbol:n.formatSymbol(e)}))},optimizationError:function(){return r(t.t("We couldn\'t find any region where this model is defined."))},nonListRegression:function(){return r(t.t("Regressions must contain at least one list of data."))},badListInReducer:function(e){return r(t.t("When __symbol__ is called with more than two arguments, no argument can be a list.",{symbol:n.formatSymbol(e)})).allowExport()},nonListDoubleReducer:function(e){return r(t.t("Both arguments of \'__symbol__\' must be lists. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], [3,2,1])"})).allowExport()},nonListParametrizedReducer:function(e){return r(t.t("The first argument of \'__symbol__\' must be a list. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], 1)"})).allowExport()},indexIntoNonList:function(){return r(t.t("Cannot index into something that is not a list.")).allowExport()},listAsIndex:function(){return r(t.t("List index must not be a list.")).allowExport()},variableRange:function(e){return r(t.t("Range cannot depend on free variable \'__symbol__\'.",{symbol:n.formatSymbol(e[0])})).allowExport()},nonArithmeticRange:function(e){return r(t.t("Ranges must be arithmetic sequences.")).allowExport()},missingIntegralBounds:function(){return r(t.t("Integrals must have upper and lower bounds."))},shadowedIntegrationVariable:function(e){return r(t.t("You can\'t use \'__symbol__\' as an integration variable because it\'s already defined.",{symbol:n.formatSymbol(e)}))},badIntegralBoundDependency:function(e){return r(t.t("Integration bounds can\'t depend on integration variable \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},badAnsContext:function(){return r(t.t("You can\'t use \'ans\' in this context."))},ansUndefined:function(){return r(t.t("The previous expression didn\'t define any value for ans."))},variablesUnsupported:function(e){return r(t.t("This calculator does not support variables like \'__variable__\'.",{variable:n.formatSymbol(e)}))},functionUnsupported:function(e){return r(t.t("This calculator does not support the \'__symbol__\' function.",{symbol:n.formatSymbol(e)}))},constantUnsupported:function(e){return r(t.t("This calculator does not support the constant \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},assignmentsUnsupported:function(){return r(t.t("This calculator does not support assignments."))},functionDefinitionsUnsupported:function(){return r(t.t("This calculator does not support function definitions."))},equationsUnsupported:function(){return r(t.t("This calculator does not support equations."))},inequalitiesUnsupported:function(){return r(t.t("This calculator does not support inequalities."))},regressionsUnsupported:function(){return r(t.t("This calculator does not support regressions."))},pointsUnsupported:function(){return r(t.t("This calculator does not support points."))},featureUnavailable:function(){return r(t.t("This feature is not available in the current calculator."))}}}),define("math/parsenode/expression",["require","pjs","./base","math/errormsg","math/types"],function(e){var t=e("pjs"),r=e("./base"),n=e("math/errormsg"),i=e("math/types");return t(r,function(e,t){e.init=function(e){if(!Array.isArray(e))throw new TypeError("Argument to expression constructor must be an Array.");t.init.call(this),this.args=e,this.valueType=this._getValueType(e),this.registerDependencies(),this.computeTreeSize()},e._getValueType=function(e){return i.Any},e.shouldExportAns=function(){return!0},e.registerDependencies=function(){for(var e=0;e<this.args.length;e++)this.addDependencies(this.args[e].getDependencies())},e.computeTreeSize=function(){for(var e=0,t=0;t<this.args.length;t++)this.args[t].treeSize&&(e+=this.args[t].treeSize);if(this.treeSize=e+1,e>1e4)throw n.deeplyNested()},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var r=[],n=0;n<this.args.length;n++)r.push(this.args[n].getConcreteTree(e,t));return this.typeCheck(r),this.copyWithArgs(r)},e.copyWithArgs=function(e){return new this.constructor(e)}})}),define("math/parsenode/list",["require","pjs","./expression","math/errormsg"],function(e){var t=e("pjs"),r=e("./expression"),n=e("math/errormsg");return t(r,function(e,t,r){function i(e){for(var t=1/0,r=0;r<e.length;r++)e[r].isList&&(t=Math.min(t,e[r].length));return t}e.init=function(e){if(t.init.call(this,e),this.length=e.length,0===this.length)throw n.emptyList()},e.isList=!0,e.getEvalStrings=function(){for(var e=[],t=0;t<this.args.length;t++)e.push(this.args[t].getEvalStrings());return e},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var r=[],i=0;i<this.args.length;i++){var a=this.args[i].getConcreteTree(e,t);if(a.isList)throw n.nestedList();r.push(a)}return this.typeCheck(r),new this.constructor(r)},e.getEvaluationInfo=function(){return this.args.every(function(e){return e.isConstant})?[{val:this.args.map(function(e){return e.constantValue}),operator:"="}]:void 0},e.getCompiledFunctions=function(e){return this.args.map(function(t){return t.getCompiledFunctions(e)[0]})},r.eachArgs=function(e,t){var r=i(e);if(!isFinite(r))return void t(e);for(var n=0;r>n;n++){for(var a=[],o=0;o<e.length;o++)a.push(e[o].isList?e[o].elementAt(n):e[o]);t(a)}},r.mapArgs=function(e,t){var r=i(e);if(!isFinite(r))return[t(e)];for(var n=[],a=0;r>a;a++){for(var o=[],s=0;s<e.length;s++)o.push(e[s].isList?e[s].elementAt(a):e[s]);n.push(t(o))}return n},r.wrap=function(e){return e.isList?e:r([e])}})}),define("math/parsenode/scalarexpression",["require","pjs","./expression","./list"],function(e){var t=e("pjs"),r=e("./expression"),n=e("./list");return t(r,function(e,t){e.init=function(e){t.init.call(this,e)},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r,i=[],a=!1;for(r=0;r<this.args.length;r++){var o=this.args[r].getConcreteTree(e,t);o.isList&&(a=!0),i.push(o)}if(!a)return this.typeCheck(i),this._constantCollapsedCopy(i,e);var s=this,u=n.mapArgs(i,function(t){return s.typeCheck(t),s._constantCollapsedCopy(t,e)});return n(u)},e.getEvalStrings=function(){for(var e=[],t=[],r=0;r<this.args.length;r++){var n=this.args[r].getEvalStrings();e=e.concat(n.statements),t.push(n.expression)}return{statements:e,expression:this.scalarEvalExpression(t)}}})}),define("math/parsenode/expressionTypes",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n={Add:t(r,{}),Subtract:t(r,{}),Multiply:t(r,{}),Divide:t(r,{}),Exponent:t(r,{}),Negative:t(r,{}),And:t(r,{isInequality:function(){return this.args[0].isInequality()&&this.args[1].isInequality()}})};return n.RawExponent=t(n.Exponent,{}),n.RawDivide=t(n.Divide,{}),n}),define("math/parsenode/constant",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),r=e("./scalarexpression");return t(r,function(e,t){e.init=function(e){this.constantValue=e,t.init.call(this,[])},e.isConstant=!0,e.getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor(this.constantValue)},e.getEvalStrings=function(){return{statements:[],expression:this.scalarExprString()}},e.scalarExprString=function(){return this.constantValue>0?String(this.constantValue):"("+String(this.constantValue)+")"},e.getEvaluationInfo=function(){return[{val:this.constantValue,operator:"="}]},e.isNaN=function(){return"number"==typeof this.constantValue&&isNaN(this.constantValue)},e.okForImplicitFunction=function(){return!0}})}),define("math/parsenode/freevariable",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),r=e("./scalarexpression");return t(r,function(e,t){e.init=function(e){t.init.call(this,[]),this.addDependency(e),this._symbol=e},e.isFreeVariable=!0,e.scalarEvalExpression=function(e){return this._symbol},e.copyWithArgs=function(e){return this},e._constantCollapsedCopy=function(e){return this},e.getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this}})}),define("math/parsenode/nativefunction",["require","pjs","./scalarexpression","math/errormsg","math/functions"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("math/errormsg"),i=e("math/functions");return t(r,function(e,r,a){e.init=function(e){if(e.length!==this._arity)throw n.wrongArity(this._symbol,this._arity,e.length);r.init.call(this,e)},e.scalarEvalExpression=function(e){return this.head+"("+e.join(",")+")"},a.create=function(e,r,n){return t(this,function(t,a,o){o.isFunction=!0,t._symbol=e,t.head=r,t._arity=n,t.evaluate=i.createEvaluateFunction(t.scalarEvalExpression.bind(t),t._arity),o.getConcreteInvocationTree=function(e,t,r){return o(t).getConcreteTree(e,r)}})}})}),define("math/parsenode/typedfunction",["require","pjs","./nativefunction"],function(e){var t=e("pjs"),r=e("./nativefunction");return t(r,function(e,t,r,n){r.create=function(e,t,r,i){var a=r.length,o=n.create.call(this,e,t,a);return o.prototype._inputTypes=r,o.prototype._outputType=i,o}})}),define("math/parsenode/trigfunction",["require","pjs","./nativefunction","./expressionTypes"],function(e){var t=e("pjs"),r=e("./nativefunction"),n=e("./expressionTypes").Multiply;return t(r,function(e,t,r,i){r.create=function(e,t){var r=1,a=i.create(e,t,r);return a.getConcreteInvocationTree=function(e,t,r){var i=e.trigAngleMultiplier?[n([t[0],e.trigAngleMultiplier])]:t;return a(i).getConcreteTree(e,r)},a}})}),define("math/parsenode/inversetrigfunction",["require","pjs","./nativefunction","./expressionTypes"],function(e){var t=e("pjs"),r=e("./nativefunction"),n=e("./expressionTypes").Divide;return t(r,function(e,t,r,i){r.create=function(e,t){var r=1,a=i.create(e,t,r);return a.getConcreteInvocationTree=function(e,t,r){var i=a(t),o=e.trigAngleMultiplier?n([i,e.trigAngleMultiplier]):i;return o.getConcreteTree(e,r)},a}})}),define("math/parsenode/reducerfunction",["require","pjs","./expression","./list","./constant","math/functions","math/errormsg"],function(e){var t=e("pjs"),r=e("./expression"),n=e("./list"),i=e("./constant"),a=e("math/functions"),o=e("math/errormsg");return t(r,function(e,r,s){e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){for(var e=this.args[0],t=[],r=[],n=0;n<e.length;n++){var i=e.elementAt(n).getEvalStrings();t=t.concat(i.statements),r.push(i.expression)}var a=["["+r.join(",")+"]"];return{statements:t,expression:this.evalExpression(a)}},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r,i,a=this.args;if(0===a.length)throw o.zeroArgReducer(this._symbol);if(1===a.length)r=a[0].getConcreteTree(e,t),i=!r.isList;else{if(2===a.length&&(a[0].isList||a[1].isList)){var s=this;return n(n.mapArgs(this.args,function(r){return s.copyWithArgs(r).getConcreteTree(e,t)}))}i=!0}if(i){for(var u=0;u<a.length;u++)if(a[u].isList)throw o.badListInReducer(this._symbol);r=n(a).getConcreteTree(e,t)}return this.typeCheck([r]),this._constantCollapsedCopy([r])},e._constantCollapsedCopy=function(e){for(var t=e[0],r=[],n=0;n<t.length;n++){var a=t.elementAt(n);if(!a.isConstant)return this.copyWithArgs(e);r.push(a.constantValue)}return i(this.evaluate([r]))},s.create=function(e,r){return t(s,function(t,n,i){t._symbol=e,t.head=r,t._arity=1,i.isFunction=!0,t.evaluate=a.createEvaluateFunction(t.evalExpression.bind(t),t._arity),i.getConcreteInvocationTree=function(e,t,r){return i(t).getConcreteTree(e,r)}})}})}),define("math/parsenode/doublereducerfunction",["require","pjs","./expression","./constant","math/parsenode/list","math/functions","math/errormsg"],function(e){var t=e("pjs"),r=e("./expression"),n=e("./constant"),i=e("math/parsenode/list"),a=e("math/functions"),o=e("math/errormsg");return t(r,function(e,r,s){e.init=function(){if(r.init.apply(this,arguments),2!==this.args.length)throw o.wrongDoubleReducerArity(this._symbol)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){for(var e=[],t=[],r=0;r<this.args.length;r++){for(var n=this.args[r],i=[],a=0;a<n.length;a++){var o=n.elementAt(a).getEvalStrings();Array.prototype.push.apply(e,o.statements),i.push(o.expression)}t.push("["+i.join(",")+"]")}return{statements:e,expression:this.evalExpression(t)}},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=this.args.map(function(r){return r.getConcreteTree(e,t)});if(!r[0].isList||!r[1].isList)throw o.nonListDoubleReducer(this._symbol);return r[0].length>r[1].length&&(r[0]=i(r[0].args.slice(0,r[1].length))),r[1].length>r[0].length&&(r[1]=i(r[1].args.slice(0,r[0].length))),this.typeCheck(r),this._constantCollapsedCopy(r)},e._constantCollapsedCopy=function(e){for(var t=[],r=0;r<e.length;r++){for(var i=[],a=e[r],o=0;o<a.length;o++){var s=a.elementAt(o);if(!s.isConstant)return this.copyWithArgs(e);i.push(s.constantValue)}t.push(i)}return n(this.evaluate(t))},s.create=function(e,r){return t(s,function(t,n,i){t._symbol=e,t.head=r,t._arity=2,i.isFunction=!0,t.evaluate=a.createEvaluateFunction(t.evalExpression.bind(t),t._arity),i.getConcreteInvocationTree=function(e,t,r){return i(t).getConcreteTree(e,r)}})}})}),define("math/parsenode/parametrizedreducerfunction",["require","pjs","./expression","./list","./constant","math/functions","math/errormsg"],function(e){var t=e("pjs"),r=e("./expression"),n=e("./list"),i=e("./constant"),a=e("math/functions"),o=e("math/errormsg");return t(r,function(e,r,s){e.init=function(){if(r.init.apply(this,arguments),2!==this.args.length)throw o.wrongParametrizedReducerArity(this._symbol)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){for(var e=this.args[0],t=this.args[1],r=[],n=[],i=0;i<e.length;i++){var a=e.elementAt(i).getEvalStrings();Array.prototype.push.apply(r,a.statements),n.push(a.expression)}var o=t.getEvalStrings();Array.prototype.push.apply(r,o.statements);var s=["["+n.join(",")+"]",o.expression];return{statements:r,expression:this.evalExpression(s)}},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=this.args.map(function(r){return r.getConcreteTree(e,t)});if(!r[0].isList)throw o.nonListParametrizedReducer(this._symbol);return r[1].isList?n(r[1].args.map(function(e){return this.typeCheck([r[0],e]),this._constantCollapsedCopy([r[0],e])}.bind(this))):(this.typeCheck(r),this._constantCollapsedCopy(r))},e._constantCollapsedCopy=function(e){var t=e[0],r=e[1];if(!r.isConstant)return this.copyWithArgs(e);for(var n=[],a=0;a<t.length;a++){var o=t.elementAt(a);if(!o.isConstant)return this.copyWithArgs(e);n.push(o.constantValue)}return i(this.evaluate([n,r.constantValue]))},s.create=function(e,r){return t(s,function(t,n,i){t._symbol=e,t.head=r,t._arity=2,i.isFunction=!0,t.evaluate=a.createEvaluateFunction(t.evalExpression.bind(t),t._arity),\ni.getConcreteInvocationTree=function(e,t,r){return i(t).getConcreteTree(e,r)}})}})}),define("math/parsenode/builtinfunction",["require","math/parsenode/nativefunction","math/parsenode/typedfunction","math/parsenode/trigfunction","math/parsenode/inversetrigfunction","math/parsenode/reducerfunction","math/parsenode/doublereducerfunction","math/parsenode/parametrizedreducerfunction","math/types"],function(e){var t=e("math/parsenode/nativefunction"),r=e("math/parsenode/typedfunction"),n=e("math/parsenode/trigfunction"),i=e("math/parsenode/inversetrigfunction"),a=e("math/parsenode/reducerfunction"),o=e("math/parsenode/doublereducerfunction"),s=e("math/parsenode/parametrizedreducerfunction"),u=e("math/types");return{sin:n.create("sin","BuiltIn.sin"),cos:n.create("cos","BuiltIn.cos"),tan:n.create("tan","BuiltIn.tan"),cot:n.create("cot","BuiltIn.cot"),sec:n.create("sec","BuiltIn.sec"),csc:n.create("csc","BuiltIn.csc"),arcsin:i.create("arcsin","Math.asin"),arccos:i.create("arccos","Math.acos"),arctan:i.create("arctan","Math.atan"),arccot:i.create("arccot","BuiltIn.acot"),arcsec:i.create("arcsec","BuiltIn.asec"),arccsc:i.create("arccsc","BuiltIn.acsc"),sinh:t.create("sinh","BuiltIn.sinh",1),cosh:t.create("cosh","BuiltIn.cosh",1),tanh:t.create("tanh","BuiltIn.tanh",1),coth:t.create("coth","BuiltIn.coth",1),sech:t.create("sech","BuiltIn.sech",1),csch:t.create("csch","BuiltIn.csch",1),arcsinh:t.create("arcsinh","BuiltIn.asinh",1),arccosh:t.create("arccosh","BuiltIn.acosh",1),arctanh:t.create("arctanh","BuiltIn.atanh",1),arccoth:t.create("arccoth","BuiltIn.acoth",1),arcsech:t.create("arcsech","BuiltIn.asech",1),arccsch:t.create("arccsch","BuiltIn.acsch",1),sqrt:t.create("sqrt","Math.sqrt",1),rtxsqpone:t.create("rtxsqpone","BuiltIn.sqrtxsqp1",1),rtxsqmone:t.create("rtxsqmone","BuiltIn.sqrtxsqm1",1),nthroot:t.create("nthroot","BuiltIn.nthroot",2),log:t.create("log","BuiltIn.common_log",1),logbase:t.create("logbase","BuiltIn.log_base",2),ln:t.create("ln","BuiltIn.log",1),exp:t.create("exp","Math.exp",1),floor:t.create("floor","Math.floor",1),ceil:t.create("ceil","Math.ceil",1),round:t.create("round","Math.round",1),abs:t.create("abs","Math.abs",1),sign:t.create("sign","BuiltIn.sign",1),mod:t.create("mod","BuiltIn.mod",2),nCr:t.create("nCr","BuiltIn.nCr",2),nPr:t.create("nPr","BuiltIn.nPr",2),factorial:t.create("factorial","BuiltIn.factorial",1),polyGamma:t.create("polyGamma","BuiltIn.polyGamma",2),lcm:a.create("lcm","BuiltIn.listLCM"),gcd:a.create("gcd","BuiltIn.listGCD"),mean:a.create("mean","BuiltIn.mean"),total:a.create("total","BuiltIn.total"),stdev:a.create("stdev","BuiltIn.stdev"),stdevp:a.create("stdevp","BuiltIn.stdevp"),mad:a.create("mad","BuiltIn.mad"),length:a.create("length","BuiltIn.length"),min:a.create("min","BuiltIn.listMin"),max:a.create("max","BuiltIn.listMax"),argmin:a.create("argmin","BuiltIn.argMin"),argmax:a.create("argmax","BuiltIn.argMax"),median:a.create("median","BuiltIn.median"),"var":a.create("var","BuiltIn.var"),cov:o.create("cov","BuiltIn.cov"),covp:o.create("covp","BuiltIn.covp"),corr:o.create("corr","BuiltIn.corr"),quantile:s.create("quantile","BuiltIn.quantile"),upperQuantileIndex:s.create("upperQuantileIndex","BuiltIn.upperQuantileIndex"),lowerQuantileIndex:s.create("lowerQuantileIndex","BuiltIn.lowerQuantileIndex"),distance:r.create("distance","BuiltIn.distance",[u.Point,u.Point],u.Number),midpoint:r.create("midpoint","BuiltIn.midpoint",[u.Point,u.Point],u.Point)}}),define("math/parsenode/identifier",["require","pjs","./expression","./freevariable","graphing/label","./builtinfunction","math/errormsg"],function(e){var t=e("pjs"),r=e("./expression"),n=e("./freevariable"),i=e("graphing/label"),a=e("./builtinfunction"),o=e("math/errormsg");return t(r,function(e,t,r){e.init=function(e){t.init.call(this,[]),this._symbol=i.latexToIdentifier(e),this.setInputString(e),this.addDependency(this._symbol)},e.evaluate=function(){throw"Cannot evaluate undefined variable "+this._symbol},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=e[this._symbol];if(r){if(r.isError)throw r;return r.isFunction?r.getConcreteInvocationTree(e,[],t):r.getConcreteTree(e,t)}if(a.hasOwnProperty(this._symbol))throw o.functionUnsupported(i.latexToIdentifier(this.getInputString()));return n(this._symbol)},e.okForImplicitFunction=function(){return!0}})}),define("math/parsenode/ans",["require","pjs","./identifier","math/errormsg"],function(e){var t=e("pjs"),r=e("./identifier"),n=e("math/errormsg");return t(r,function(e,t,r){e.getConcreteTree=function(e,r){if(r&&r[this.type])return r[this.type].call(this,e,r);if(void 0===e[this._symbol])throw n.ansUndefined();return t.getConcreteTree.call(this,e,r)}})}),define("math/parsenode/dummyindex",["require","pjs","./freevariable"],function(e){var t=e("pjs"),r=e("./freevariable");return t(r,function(e,t){e.init=function(){t.init.apply(this,arguments)}})}),define("math/parsenode/range",["require","pjs","./expression","math/errormsg","./list","./constant","math/distance"],function(e){var t=e("pjs"),r=e("./expression"),n=e("math/errormsg"),i=e("./list"),a=e("./constant"),o=e("math/distance");return t(r,function(e,t,r){function s(e,t,r,i,a){if(r<e.length&&!o.approx(a,e.elementAt(r).constantValue,10))throw n.nonArithmeticRange();if(i-r<=t.length&&i-r>1&&!o.approx(a,t.elementAt(t.length-i+r).constantValue,10))throw n.nonArithmeticRange()}e.init=function(e){t.init.call(this,e),this.beginning=e[0],this.end=e[1]},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=this.beginning.getConcreteTree(e,t),o=this.end.getConcreteTree(e,t);if(r.getDependencies().length)throw n.variableRange(r.getDependencies());if(o.getDependencies().length)throw n.variableRange(o.getDependencies());if(!r.isList||!o.isList)throw new Error("Programming Error: range bounds must be List nodes.");var u,c=r.elementAt(0).constantValue,l=o.elementAt(o.length-1).constantValue,h=l-c;u=1===r.length?h>=0?1:-1:r.elementAt(1).constantValue-c;var f=Math.round(h/u)+1;if(!isFinite(f)||f<r.length||f<o.length)throw n.nonArithmeticRange();for(var p=[a(c)],m=1;f>m;m++){var d=c+m*u;s(r,o,m,f,d),p.push(a(d))}return i(p)}})}),define("math/parsenode/listaccess",["require","pjs","./expression","math/errormsg"],function(e){var t=e("pjs"),r=e("./expression"),n=e("math/errormsg");return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this.list=e[0],this.index=e[1]},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=this.index.getConcreteTree(e,t),i=this.list.getConcreteTree(e,t),a=[i,r];if(r.isList)throw n.listAsIndex();if(!i.isList)throw n.indexIntoNonList();return this.typeCheck(a),this._constantCollapsedCopy(a)},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.list.getEvalStrings(),r=e.statements.slice(),n=this.tmpVar();r.push("var "+n);for(var i=[],a=0;a<t.length;a++)i.push("case "+a+":"+t[a].statements.join(";")+";"+n+"="+t[a].expression);i.push("default:"+n+"=NaN");var o="switch(Math.floor("+e.expression+")-1){\\n"+i.join(";break\\n")+"\\n}";return r.push(o),{statements:r,expression:n}}})}),define("math/parsenode/orderedpair",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),r=e("./scalarexpression");return t(r,function(e,t,r){e.asArray=function(){return[+this.args[0].constantValue,+this.args[1].constantValue]},e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies()).filter(function(t){return!e.validParametricVariable(t)})},e.getEvalStrings=function(){for(var e=[],t=[],r=0;r<this.args.length;r++){var n=this.args[r].getEvalStrings();e=e.concat(n.statements),t.push(n.expression)}return{statements:e,expression:"["+t.join(",")+"]"}}})}),define("math/parsenode/movablepoint",["require","pjs","./orderedpair"],function(e){var t=e("pjs"),r=e("./orderedpair");return t(r,function(e,t){e.init=function(e,r,n){t.init.call(this,e),this.moveStrategy=r,this.defaultDragMode=n},e.isMovablePoint=!0})}),define("math/parsenode/orderedpairaccess",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),r=e("./scalarexpression");return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this.point=e[0],this.index=e[1]},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.point.getEvalStrings(),r=[];Array.prototype.push.apply(r,e.statements),Array.prototype.push.apply(r,t.statements);var n=t.expression+"["+e.expression+"-1]";return{statements:r,expression:n}}})}),define("math/comparators",["require"],function(e){var t={"<":{inclusive:!1,direction:-1},"!=":{inclusive:!1,direction:0},">":{inclusive:!1,direction:1},"<=":{inclusive:!0,direction:-1},"=":{inclusive:!0,direction:0},">=":{inclusive:!0,direction:1}},r=function(e,t){switch(t){case-1:return e?"<=":"<";case 0:return e?"=":"!=";case 1:return e?">=":">";default:throw"Programming error.  Comparators must have a direction of -1, 0, or 1"}};return{table:t,get:r}}),define("math/parsenode/basecomparator",["require","pjs","./scalarexpression","./expressionTypes","math/comparators","math/functions"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./expressionTypes").Subtract,i=e("math/comparators").table,a=e("math/functions");return t(r,function(e,r,o){o.create=function(e,r){return r=r||e,t(o,function(t,n){t.operator=e,t.isInequality=function(){return 0!==i[e].direction},t.compiledOperator=r,t.scalarEvalExpression=function(e){return e.join(r)},t.evaluate=a.createEvaluateFunction(t.scalarEvalExpression,2)})},e.init=function(e){r.init.call(this,e),this._difference=n(-1===i[this.operator].direction?[e[1],e[0]]:[e[0],e[1]])}})}),define("math/parsenode/comparator",["require","math/parsenode/basecomparator"],function(e){var t=e("math/parsenode/basecomparator");return{"<":t.create("<"),">":t.create(">"),"<=":t.create("<="),">=":t.create(">="),"=":t.create("=","===")}}),define("math/parsenode/piecewise",["require","pjs","./scalarexpression","./constant"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./constant"),i=t(r,{});return i.chain=function(e){for(var t,r=n(NaN);e.length;)t=e.pop(),r=i([t.condition,t.if_expr,r]);return r},i.empty=function(){return i([n(!0),n(1),n(NaN)])},i}),define("math/parsenode/doubleinequality",["require","pjs","./base","./identifier","./constant","./piecewise","math/comparators","./comparator"],function(e){var t=e("pjs"),r=e("./base"),n=e("./identifier"),i=e("./constant"),a=e("./piecewise"),o=e("math/comparators"),s=e("./comparator");return t(r,function(e,t){e.init=function(e){t.init.call(this),this.args=e,this._symbol=e[2]._symbol,this._operators=[e[1],e[3]],this._expressions=[e[0],e[4]];var r=o.get(o.table[e[1]].inclusive&&o.table[e[3]].inclusive,o.table[e[1]].direction);this._indicator=s[r]([e[0],e[4]]),this.addDependency(this._symbol),this.addDependencies(this._expressions[0].getDependencies()),this.addDependencies(this._expressions[1].getDependencies())},e.isInequality=function(){return!0},e.isShadeBetween=function(){return!0},e.getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor([a([this._indicator,this._expressions[0],i(NaN)]).getConcreteTree(e,t),this._operators[0],n(this._symbol),this._operators[1],a([this._indicator,this._expressions[1],i(NaN)]).getConcreteTree(e,t)])},e.getCompiledFunctions=function(e){return[this._expressions[0].getCompiledFunctions(e)[0],this._expressions[1].getCompiledFunctions(e)[0]]},e.getCompiledDerivatives=function(){return[this._expressions[0].getCompiledDerivatives()[0],this._expressions[1].getCompiledDerivatives()[0]]}})}),define("math/parsenode/repeatedoperator",["require","pjs","./scalarexpression","./dummyindex","./constant","math/errormsg"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./dummyindex"),i=e("./constant"),a=e("math/errormsg");return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this._index=e[0],this._index instanceof n&&this.removeDependency(this._index._symbol)},e.getEvalStrings=function(){var e=[],t=this.tmpVar(),r=this._index._symbol,n=this.tmpVar(),i=this.tmpVar(),a=this.args[1].getEvalStrings(),o=this.args[2].getEvalStrings(),s=this.args[3].getEvalStrings();Array.prototype.push.apply(e,a.statements),e.push("var "+n+" = Math.round("+a.expression+")"),Array.prototype.push.apply(e,o.statements),e.push("var "+i+" = Math.round("+o.expression+")"),e.push("var "+t+"="+this.starting_value);var u="for (var "+r+"="+n+";"+r+"<="+i+";"+r+"++) {"+s.statements.join(";")+";"+t+this.in_place_operator+s.expression+"};",c="if(!isFinite("+i+"-"+n+")) {"+t+"=("+i+"<"+n+"?"+this.starting_value+":NaN);}else{"+u+"}";return e.push(c),{statements:e,expression:t}},e.getConcreteTree=function(e,r){if(r&&r[this.type])return r[this.type].call(this,e,r);if(e[this._index._symbol])throw a.shadowedIndex(this._index._symbol);var i=Object.create(e);i[this._index._symbol]=n(this._index._symbol);var o=t.getConcreteTree.call(this,i,r);return o},e.evaluate=function(e,t,r){var n=r.getCompiledFunctions([this._index._symbol])[0].fn;if(t=Math.round(t),e=Math.round(e),!isFinite(t-e))return e>t?this.starting_value:NaN;for(var i=this.starting_value,a=e;t>=a;a++)i=this.update(i,n(a));return i},e._constantCollapsedCopy=function(e){if(e[1].isConstant&&e[2].isConstant){var t=e[1].constantValue,r=e[2].constantValue,n=e[3];if(n.isConstant)return i(this.evaluateConstant([t,r,n.constantValue]));var a=n.getDependencies();if(0===a.length||1===a.length&&a[0]===e[0]._symbol)return i(this.evaluate(t,r,n))}return this.copyWithArgs(e)}})}),define("math/parsenode/sum",["require","pjs","./repeatedoperator"],function(e){var t=e("pjs"),r=e("./repeatedoperator");return t(r,function(e,t){e.in_place_operator="+=",e.starting_value=0,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return 0>=t?this.starting_value:t*e[2]},e.update=function(e,t){return e+t}})}),define("math/parsenode/product",["require","pjs","./repeatedoperator"],function(e){var t=e("pjs"),r=e("./repeatedoperator");return t(r,function(e,t){e.in_place_operator="*=",e.starting_value=1,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return 0>=t?this.starting_value:Math.pow(e[2],t)},e.update=function(e,t){return e*t}})}),define("math/parsenode/integral",["require","pjs","./scalarexpression","./dummyindex","./constant","./expressionTypes","math/errormsg","math/builtin"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./dummyindex"),i=e("./constant"),a=e("./expressionTypes"),o=e("math/errormsg"),s=e("math/builtin"),u=a.Multiply,c=a.Subtract;return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this._differential=e[0],this._differential instanceof n&&this.removeDependency(this._differential._symbol)},e.getEvalStrings=function(){var e=this.args[0],t=this.args[1],r=this.args[2],n=this.args[3],i=[],a=this.tmpVar(),o=e._symbol,s=this.tmpVar(),u=this.tmpVar(),c=t.getEvalStrings(),l=r.getEvalStrings(),h=n.getEvalStrings();i.push("var "+s+" = "+c.expression),i.push("var "+u+" = "+l.expression),Array.prototype.push.apply(i,c.statements),Array.prototype.push.apply(i,l.statements),i.push("var "+a+" = function ("+o+") { "+h.statements.join("; ")+"; return "+h.expression+";}");var f="BuiltIn.quad("+[a,s,u].join(", ")+")";return{statements:i,expression:f}},e.getConcreteTree=function(e,r){if(r&&r[this.type])return r[this.type].call(this,e,r);if(e[this._differential._symbol])throw o.shadowedIntegrationVariable(this._differential._symbol);var i=Object.create(e);i[this._differential._symbol]=n(this._differential._symbol);var a=t.getConcreteTree.call(this,i,r);return a},e.evaluate=function(e,t,r){var n=this.args[0],i=r.getCompiledFunctions([n._symbol])[0].fn;return s.quad(i,e,t)},e._constantCollapsedCopy=function(e){var t=e[0],r=e[1],n=e[2],a=e[3];if(r.dependsOn(t._symbol)||n.dependsOn(t._symbol))throw o.badIntegralBoundDependency(t._symbol);var s=a.getDependencies();if(r.isConstant&&n.isConstant){var l=n.constantValue-r.constantValue;if(a.isConstant)return i(a.constantValue*l);if(!a.dependsOn(t._symbol))return u([a,i(l)]);if(1===s.length&&s[0]===t._symbol)return i(this.evaluate(r.constantValue,n.constantValue,a))}else if(!a.dependsOn(t._symbol))return u([a,c([n,r])]);return this.copyWithArgs(e)}})}),define("math/parsenode/functioncall",["require","pjs","./expression","math/errormsg","./identifier","./expressionTypes","./builtinfunction","graphing/label"],function(e){var t=e("pjs"),r=e("./expression"),n=e("math/errormsg"),i=e("./identifier"),a=e("./expressionTypes").Multiply,o=e("./builtinfunction"),s=e("graphing/label");return t(r,function(e,t){e.init=function(e,r){"string"==typeof e&&(e=i(e)),this._identifier=e,this._symbol=e._symbol,t.init.call(this,r),this.addDependency(this._symbol)},e.copyWithArgs=function(e){return new this.constructor(i(this._symbol),e)},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=e[this._symbol];if(r&&r.isError)throw r;if(!r||!r.isFunction){if(o.hasOwnProperty(this._symbol))throw n.functionUnsupported(s.latexToIdentifier(this._identifier.getInputString()));if(1==this.args.length){var u=[i(this._symbol),this.args[0]];return a(u).getConcreteTree(e,t)}if(r)throw n.variableAsFunction(this._symbol);throw n.functionNotDefined(this._symbol)}for(var c=[],l=0;l<this.args.length;l++){var h=this.args[l].getConcreteTree(e,t);c.push(h)}return r.getConcreteInvocationTree(e,c,t)}})}),define("math/parsenode/functionexponent",["require","pjs","./expression","./expressionTypes","./functioncall"],function(e){var t=e("pjs"),r=e("./expression"),n=e("./expressionTypes"),i=n.Multiply,a=n.Exponent,o=e("./functioncall");return t(r,function(e,t){e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=this.args[0]._symbol;return e[r]&&e[r].isFunction?a([o(r,[this.args[1]]),this.args[2]]).getConcreteTree(e,t):i([this.args[0],a([this.args[1],this.args[2]])]).getConcreteTree(e,t)}})}),define("math/parsenode/prime",["require","pjs","./expression","./identifier","math/errormsg"],function(e){var t=e("pjs"),r=e("./expression"),n=e("./identifier"),i=e("math/errormsg");return t(r,function(e,t){e.init=function(e,r){t.init.call(this,r),this.order=e},e.copyWithArgs=function(e){return new this.constructor(this.order,e)},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=this.args[0],a=r.args[0];if(!e[r._symbol])throw i.functionNotDefined(r._symbol);var o,s=this.tmpVar();if("logbase"===r._symbol){if(2!==r.args.length)throw i.primedFunctionArity();o=[n(s),r.args[1]]}else{if(1!==r.args.length)throw i.primedFunctionArity();o=[n(s)]}for(var u=r.copyWithArgs(o).getConcreteTree(e,t),c=0;c<this.order;c++)u=u.takeDerivative(s);var l={};return l[s]=a,u.substitute(l).getConcreteTree(e,t)}})}),define("math/builtinconstants",["require","math/parsenode/constant"],function(e){var t=e("math/parsenode/constant");return{pi:t(Math.PI),tau:t(2*Math.PI),e:t(Math.E),trigAngleMultiplier:t(1)}}),define("math/builtinframe",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){var t,r=e("math/builtinconstants"),n=e("math/parsenode/builtinfunction"),i={};for(t in r)r.hasOwnProperty(t)&&(i[t]=r[t]);for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i}),define("math/parsenode/derivative",["require","pjs","./scalarexpression","./freevariable","./identifier","math/builtinframe","math/errormsg","math/types"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./freevariable"),i=e("./identifier"),a=e("math/builtinframe"),o=e("math/errormsg"),s=e("math/types");return t(r,function(e,t){e.init=function(e,r){this._symbol=i(e)._symbol,t.init.call(this,r)},e.getConcreteTree=function(e,r){if(r&&r[this.type])return r[this.type].call(this,e,r);if(e[this._symbol]){var i=Object.create(e);i[this._symbol]=n(this._symbol);var a=e[this._symbol].getConcreteTree(e,r);if(a.valueType!==s.Number&&a.valueType!==s.ListOfNumber)throw o.derivativeVariableTypeError(this._symbol,[a.valueType]);var u={};return u[this._symbol]=a,t.getConcreteTree.call(this,i,r).substitute(u).getConcreteTree(e,r)}return t.getConcreteTree.call(this,e,r)},e._constantCollapsedCopy=function(e){return e[0].takeDerivative(this._symbol).getConcreteTree(a)}})}),define("math/parsenode/equation",["require","./base","pjs","./expressionTypes","math/parsenode/comparator"],function(e){var t=e("./base"),r=e("pjs"),n=e("./expressionTypes").Subtract,i=e("math/parsenode/comparator");return r(t,function(e,t){e.init=function(e,r){t.init.call(this),this.addDependencies(e.getDependencies()),this.addDependencies(r.getDependencies()),this._lhs=e,this._rhs=r,this._difference=n([this._lhs,this._rhs])},e.asComparator=function(){return i["="]([this._lhs,this._rhs])},e.getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this.asComparator().getConcreteTree(e,t)}})}),define("math/parsenode/assignment",["require","./base","./equation","./identifier","pjs"],function(e){var t=e("./base"),r=e("./equation"),n=e("./identifier"),i=e("pjs");return i(t,function(e,t){e.init=function(e,r){t.init.call(this),e=e._symbol,this.addDependencies(r.getDependencies()),this._expression=r,this._symbol=e,this._exports=this.computeExports()},e.shouldExportAns=function(){return!0},e.computeExports=function(){for(var e=this._symbol,t=this.getDependencies(),r=0;r<t.length;r++)if(t[r]===e)return[];return[e]},e.getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this._expression.getConcreteTree(e,t)},e.isEquation=function(e){return-1!==e.getDependencies().indexOf(this._symbol)},e.asEquation=function(){var e=r(n(this._symbol),this._expression);return e.userData=this.userData,e},e.getSliderInfo=function(){return this._expression.isConstant&&"number"==typeof this._expression.constantValue&&isFinite(this._expression.constantValue)?{value:this._expression.constantValue}:void 0}})}),define("math/parsenode/functiondefinition",["require","pjs","./base","math/errormsg"],function(e){var t=e("pjs"),r=e("./base"),n=e("math/errormsg");return t(r,function(e,t){e.init=function(e,r,n){t.init.call(this),e=e._symbol,this._argSymbols=r.map(function(e){return e._symbol}),this._symbol=e,this._exports=[e],this._expression=n,this.addDependencies(this._argSymbols),this.addDependencies(this._expression.getDependencies())},e.isFunction=!0,e.getConcreteInvocationTree=function(e,t,r){if(t.length!==this._argSymbols.length)throw n.wrongArity(this._symbol,this._argSymbols.length,t.length);for(var i=Object.create(e),a=0;a<this._argSymbols.length;a++)i[this._argSymbols[a]]=t[a];return this._expression.getConcreteTree(i,r)},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var r=0;r<this._argSymbols.length;r++){if(e[this._argSymbols[r]])throw n.parameterAlreadyDefined(this._argSymbols[r]);if(this._argSymbols[r]===this._symbol)throw n.parameterAlreadyDefined(this._argSymbols[r])}return this._expression.getConcreteTree(e,t)},e.getArgs=function(){return this._args},e.getSliderVariables=function(e,t){var r=this._argSymbols;return e.sliderVariables(t.getDependencies()).filter(function(e){return-1===r.indexOf(e)})}})}),define("math/parsenode/optimizedregression",["require","pjs","./base"],function(e){var t=e("pjs"),r=e("./base");return t(r,function(e,t){e.init=function(e,r,n,i,a){t.init.call(this),this.parameters=e,this.residuals=r,this.statistics=n,this.model=i,this.isModelValid=a.isModelValid,this.residualVariable=a.residualVariable,this.residualSuggestionId=a.residualSuggestionId,this.shouldSuggestLogMode=a.shouldSuggestLogMode,this._exports=[this.residualVariable];for(var o in e)e.hasOwnProperty(o)&&this._exports.push(o);this.addDependencies(i.getDependencies())},e.getCompiledFunctions=function(){return this.model.getCompiledFunctions.apply(this.model,arguments)},e.evaluate=function(){return this.model.evaluate.apply(this.model,arguments)}})}),define("math/parsenode/regression",["require","pjs","./base","numeric","math/distance","math/builtin","graphing/label","math/errormsg","./error","./optimizedregression","./list","./functioncall","./identifier","./constant","./freevariable","./expressionTypes"],function(e){var t=e("pjs"),r=e("./base"),n=e("numeric"),i=e("math/distance"),a=e("math/builtin"),o=e("graphing/label"),s=e("math/errormsg"),u=e("./error"),c=e("./optimizedregression"),l=e("./list"),h=e("./functioncall"),f=e("./identifier"),p=e("./constant"),m=e("./freevariable"),d=e("./expressionTypes"),g=d.Subtract;return t(r,function(e,t,r){function d(e,t){for(var r=0,n=0;n<e.length;n++){var i=e[n].fn.apply(void 0,t);r+=i*i}return r/e.length}function y(e,t){for(var r=[],n=0;n<e.length;n++)r.push(e[n].fn.apply(void 0,t));return r}function v(e,t){for(var r=[],n=0;n<e.length;n++){for(var i=[],a=0;a<e[n].length;a++)i.push(e[n][a].fn.apply(void 0,t));r.push(i)}return r}function b(e,t,r,i,a){for(var o=[],s=0;s<t.length;s++)o.push(0);for(var u=v(t,o),c=n.LU(n.dot(u,n.transpose(u)),!0),l=o,h=!1,f=0;5>f;f++){var p=y(e,o),m=n.neg(n.LUsolve(c,n.dot(u,p)));if(!n.all(n.isFinite(m)))return _(e,t,r,i,a);if(o=n.add(l,m),h=n.all(n.eq(l,o)))break;l=o}return{solution:o,MSE:d(e,o)}}function x(e,t,r,i){for(var a=r,o=d(e,a),s=.001,u=2,c=.1,l=[],h=0;h<t.length;h++)l.push(1);for(var f=0,p=!1,m=v(t,a),g=a,b=o;i>f&&!p;){var x=y(e,a),_=n.transpose(m),w=n.dot(m,_);if(!n.all(n.isFinite(x)))break;if(!n.all(n.isFinite(w)))break;for(var M=!1;i>f&&!p&&!M;){f+=1;var T=n.LU(n.add(w,n.diag(n.mul(s,l))),!0),E=n.neg(n.LUsolve(T,n.dot(m,x))),S=E;if(a=n.add(g,S),o=d(e,a),p=n.all(n.eq(a,g))){g=a,b=o;break}var N;if(isFinite(o)&&b>=o&&(N=v(t,a),M=n.all(n.isFinite(N))),M){m=N,g=a,b=o,s*=c,s=Math.max(1e-64,s);break}s*=u}}return{solution:g,MSE:d(e,g)}}function _(e,t,r,n,a){var o,s=[];for(n||(n={}),a||(a={}),o=0;o<r.length;o++){var u=r[o];a[u]&&isFinite(a[u].constantValue)?s.push(+a[u].constantValue):n.hasOwnProperty(u)&&isFinite(n[u])?s.push(+n[u]):s.push(1)}var c=N(30,r),l=I(e,t,c,3,5),h=I(e,t,l,60,1),f=x(e,t,h[0],250),p=x(e,t,s,100);return isFinite(p.MSE)?p.MSE<f.MSE?p:i.approx(p.MSE,f.MSE,8)?p:f:f}function w(e,t,r,n){var i,a,o=t.getDependencies();for(a=0;a<o.length;a++)if(!e.validRegressionParameter(o[a]))throw s.invalidRegressionParameter(o[a]);var u=t.getCompiledFunctions(o);if(o.length){var c={};for(a=1;a<o.length;a++)c[o[a]]=m(o[0]);var l=t.substitute(c).isLinear(o[0]),h=[];for(a=0;a<o.length;a++)h.push(t.takeDerivative(o[a]).getCompiledFunctions(o));i=l?b(u,h,o,r,n):_(u,h,o,r,n)}else i={solution:[],MSE:d(u,[])};var f={};for(a=0;a<o.length;a++)f[o[a]]=p(i.solution[a]);return f}function M(e,t){var r=e.length,n=e[0],a=t[0],o=e[r-1],s=t[r-1];if(!(isFinite(n)&&isFinite(o)&&isFinite(a)&&isFinite(s)))return!1;if(s-a===0)return!1;var u=o-n;if(0===u)return!1;for(var c=1;r-1>c;c++){var l=e[c],h=t[c],f=(s*(l-n)+a*(o-l))/u;if(!i.approx(h,f,5))return!1}return!0}function T(e,t,r){var n=Object.create(t);for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i]);return e.getConcreteTree(n)}e.init=function(e,r){t.init.call(this),this._lhs=e,this.isLhsSimple=e instanceof f||e instanceof l,this._logLhs=h("ln",[e]),this._rhs=r,this._difference=g([e,r]),this._logDifference=g([h("ln",[e]),h("ln",[r])]),this.addDependencies(e.getDependencies()),this.addDependencies(r.getDependencies())},e.isRegression=!0,e.chooseResidualVariable=function(e){if(this.userData&&this.userData.residualVariable){var t=o.latexToIdentifier(this.userData.residualVariable);if(!e[t])return t}for(var r,n=this.getDependencies(),i=0;i<n.length;i++){var a=n[i].match(/_(.*)/);if(a&&(r="e_"+a[1],!e[r]))return r}for(var s=1;;){if(r="e_"+s,!e[r])return r;s++}},e.getRHSModel=function(e,t){function r(e,t){for(var r=0;r<n.length;r++)if(n[r].node===this)return n[r].tmpVar;var a=m(this.tmpVar()),o=this.getConcreteTree(e);return o.getDependencies().length&&(i=!1),n.push({node:this,tmpVar:a,symbol:a._symbol,concrete:o}),a}var n=[],i=!0,a={List:r,TableColumn:r,Range:r},o=this._rhs.tryGetConcreteTree(e,a);return{node:o,substituted:o.isError?o:o.substitute(t),replacedNodes:n,isValid:i}};var E=[18.9,.105,.0113,.089,4.414,34.32,8.61,.373,.06,.149,1.84,9.26,5,.7,.2,1.13,2.61,1.89,1,.007,30,120,1500,4e-4,7.23,-1,-.0081,-.03,-28.6,-1.71,-.4,-6.94,-.777],S=function(e){var t=503*e%E.length;return E[t]},N=function(e,t){for(var r,n=[],i=t.length,a=0;e>a;a++){r=[];for(var o=0;i>o;o++)0===a?r[o]=0:1===a?r[o]=1:r[o]=S(a*i+o);n.push(r)}return n},I=function(e,t,r,n,i){for(var a=[],o=0;o<r.length;o++)a.push({soln:x(e,t,r[o],n),startingVals:r[o]});a.sort(function(e,t){return isNaN(e.soln.MSE)?1:isNaN(t.soln.MSE)?-1:e.soln.MSE-t.soln.MSE});for(var s=[],u=0;i>u;u++)s.push(a[u].startingVals);return s};e.computeStatistics=function(e,t,r,n,o){for(var u=0,c=0;c<r.length;c++){var h=r.args[c].constantValue;u+=h*h}var f=u/r.length;if(!isFinite(f))throw s.optimizationError();var p=e.isList?a.varp(e.args.map(function(e){return+e.constantValue})):0;if(e.getDependencies().length||!isFinite(p)||0>=p||!this.isLhsSimple)return{RMSE:Math.sqrt(f)};var m=1-f/p;if(t.isValid&&1===t.replacedNodes.length){var d=[],g=[],y=n&&(o===C.LINLOG||o===C.LOGLOG);l.eachArgs([t.replacedNodes[0].concrete,e],function(e){d.push(y?Math.log(e[0].constantValue):+e[0].constantValue),g.push(+e[1].constantValue)});var v=a.corr(d,g);if(i.approx(v*v,m,8))return{r:v,rsquared:v*v}}return{Rsquared:m}},e.getResidualSuggestionId=function(e,t){var r,n=this._rhs.getDependencies();for(var i in t)if(t.hasOwnProperty(i)&&t[i].concreteTree.isTable&&t[i].concreteTree.columns[0]){var a=t[i].rawTree.columns;if(a&&a.length){var o=a[0].getExports();if(1===o.length&&-1!==n.indexOf(o[0])){for(var s=1;s<a.length;s++)if(-1!==a[s].getDependencies().indexOf(e))return;r=r?r:i}}}return r?r:void 0};var C={NONE:0,LOGLIN:1,LOGLOG:2,LINLOG:3};e.linearizingTransformation=function(e,t){if(!this.isLhsSimple)return C.NONE;var r=t.substituted;if(r.isError)return C.NONE;var n=r.getDependencies();if(1!==n.length)return C.NONE;if(isFinite(t.node.polynomialOrder(n[0])))return C.NONE;var i=r.getCompiledFunctions(n);if(1!==i.length)return C.NONE;var a=i[0].fn,o=t.replacedNodes[0].concrete;if(!o.isList)return C.NONE;var s=o.args.map(function(e){return+e.constantValue});if(s.length<3)return C.NONE;s.sort(function(e,t){return e-t});var u=s.map(a),c=u.map(Math.log),l=s.map(Math.log),h=e.args.every(function(e){return isFinite(Math.log(+e.constantValue))});return M(s,c)&&h?C.LOGLIN:M(l,c)&&h?C.LOGLOG:M(l,u)?C.LINLOG:C.NONE},e.optimize=function(e,t,r,n,i){var a=this._lhs.getConcreteTree(t),u=this._difference.getConcreteTree(t);if(!u.isList)throw s.nonListRegression();var l,h=w(e,u,this.userData.regressionParameters,n),f=this.getRHSModel(t,h),p=T(this._difference,t,h),m=this.linearizingTransformation(a,f);if(!this.userData.isLogModeRegression||m!==C.LOGLIN&&m!==C.LOGLOG)l=this.computeStatistics(a,f,p,this.userData.isLogModeRegression,m);else{var d=this._logDifference.getConcreteTree(t),g=this._logLhs.getConcreteTree(t);h=w(e,d,this.userData.regressionParamters,n),f=this.getRHSModel(t,h),p=T(this._difference,t,h);var y=T(this._logDifference,t,h);l=this.computeStatistics(g,f,y,this.userData.isLogModeRegression,m)}var v=this.chooseResidualVariable(r),b=this.getResidualSuggestionId(v,i);return this.userData.residualVariable=o.identifierToLatex(v),c(h,p,l,f.substituted,{isModelValid:f.isValid,residualVariable:v,residualSuggestionId:b,shouldSuggestLogMode:m!==C.NONE})},e.tryOptimize=function(){try{return this.optimize.apply(this,arguments)}catch(e){if(e instanceof u)return e;throw e}},e.exportTo=function(e,t,r){if(!t.isError){for(var n in t.parameters)t.parameters.hasOwnProperty(n)&&(e.assignmentForbidden(n)||(r[n]=r[n]?s.multiplyDefined(n):t.parameters[n]));e.assignmentForbidden(t.residualVariable)||(r[t.residualVariable]=t.residuals)}},e.getSliderVariables=function(){return[]}})}),define("math/parsenode/table",["require","pjs","./base"],function(e){var t=e("pjs"),r=e("./base");return t(r,function(e,t){e.init=function(e){t.init.call(this),this.columns=e,this._exports=[];for(var r=0;r<e.length;r++)this.addDependencies(e[r].getDependencies()),\nArray.prototype.push.apply(this._exports,e[r].getExports())},e.exportPenalty=1,e.isTable=!0,e.exportTo=function(e,t,r){for(var n=0;n<this.columns.length;n++){var i=this.columns[n].getExports();if(i.length){var a=i[0];e.assignmentForbidden(a)||r[a]||(t.isError?r[a]=t:this.columns[n].exportTo(e,t.columns[n],r))}}},e.getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var r=[],n=Object.create(e),i=0;i<this.columns.length;i++){var a=this.columns[i].getConcreteTree(n,e,t);a.isIndependent&&this.columns[i].exportToLocal(a,n),r.push(a)}return new this.constructor(r)},e.getAllIds=function(){return this.columns.map(function(e){return e.header.userData.id})}})}),define("math/parsenode/tablecolumn",["require","pjs","./base","./list","./constant","./identifier","math/types","math/errormsg"],function(e){var t=e("pjs"),r=e("./base"),n=e("./list"),i=e("./constant"),a=e("./identifier"),o=e("math/types"),s=e("math/errormsg");return t(r,function(e,t){function u(e){return e.isError?i(NaN):e}e.init=function(e,r,n){t.init.call(this),this.header=e,this.length=r,this.values=n,this.isIndependent=!1,this.registerDependencies(),this._exports=this.computeExports()},e.registerDependencies=function(){this.addDependencies(this.header.getDependencies());for(var e=0;e<this.values.length;e++)this.addDependencies(this.values[e].getDependencies())},e.computeExports=function(){return this.header instanceof a?[this.header._symbol]:[]},e.getConcreteTree=function(e,t){var r,n,i=this.header.getConcreteTree(e);if(i.isFreeVariable){r=[];for(var a=0;a<this.values.length;a++){var u=this.values[a].tryGetConcreteTree(e);u.isError?r.push(u):u.valueType===o.Number?r.push(u):r.push(s.tableEntryTypeError([u.valueType]))}return n=new this.constructor(i,this.length,r),n.isIndependent=!0,n}if(i.isConstant){for(var c=[],l=0;l<this.length;l++)c.push(i);r=c}else r=i.isList?i.args:[];return i=this.header.getConcreteTree(t),i.isError||i.valueType===o.Number||i.valueType===o.ListOfNumber||(i=s.tableHeaderTypeError([i.valueType])),n=new this.constructor(i,this.length,r)},e.isDiscrete=function(e){return 1!==this.header.getDependencies().length||1!==e.header.getDependencies().length||this.header.getDependencies()[0]!==e.header.getDependencies()[0]},e._exportSymbolsTo=function(e,t,i){if(e.length){var a=e[0];if(t.isError)i[a]=t;else try{i[a]=n(t.values.map(u))}catch(o){if(!(o instanceof r))throw o;i[a]=o}}},e.exportTo=function(e,t,r){var n=this.getLegalExports(e);this._exportSymbolsTo(n,t,r)},e.exportToLocal=function(e,t){this._exportSymbolsTo(this.getExports(),e,t)}})}),define("math/parsenode/solvedequation",["require","pjs","./base"],function(e){var t=e("pjs"),r=e("./base");return t(r,function(e,t){e.init=function(e,r){t.init.call(this),this._symbol=e,this._expression=r,this.addDependencies(r.getDependencies())},e.getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor(this._symbol,this._expression.getConcreteTree(e,t))},e.getEvaluationInfo=function(){return this._expression.isList?this._expression.args.map(function(e){return{val:e.constantValue,operator:"="}}):this._expression.getEvaluationInfo()},e.getCompiledFunctions=function(){return this._expression.getCompiledFunctions.apply(this._expression,arguments)},e.evaluate=function(){return this._expression.evaluate.apply(this._expression,arguments)}})}),define("parsenodes",["require","math/parsenode/expressionTypes","math/parsenode/base","math/parsenode/expression","math/parsenode/scalarexpression","math/parsenode/error","math/parsenode/constant","math/parsenode/identifier","math/parsenode/ans","math/parsenode/freevariable","math/parsenode/dummyindex","math/parsenode/list","math/parsenode/range","math/parsenode/listaccess","math/parsenode/orderedpair","math/parsenode/movablepoint","math/parsenode/orderedpairaccess","math/parsenode/basecomparator","math/parsenode/comparator","math/parsenode/doubleinequality","math/parsenode/repeatedoperator","math/parsenode/sum","math/parsenode/product","math/parsenode/integral","math/parsenode/functioncall","math/parsenode/functionexponent","math/parsenode/prime","math/parsenode/piecewise","math/parsenode/derivative","math/parsenode/builtinfunction","math/parsenode/nativefunction","math/parsenode/typedfunction","math/parsenode/reducerfunction","math/parsenode/parametrizedreducerfunction","math/parsenode/doublereducerfunction","math/parsenode/assignment","math/parsenode/functiondefinition","math/parsenode/equation","math/parsenode/regression","math/parsenode/table","math/parsenode/tablecolumn","math/parsenode/solvedequation","math/parsenode/optimizedregression"],function(e){var t=e("math/parsenode/expressionTypes"),r={Base:e("math/parsenode/base"),Expression:e("math/parsenode/expression"),ScalarExpression:e("math/parsenode/scalarexpression"),Error:e("math/parsenode/error"),Constant:e("math/parsenode/constant"),Identifier:e("math/parsenode/identifier"),Ans:e("math/parsenode/ans"),FreeVariable:e("math/parsenode/freevariable"),DummyIndex:e("math/parsenode/dummyindex"),List:e("math/parsenode/list"),Range:e("math/parsenode/range"),ListAccess:e("math/parsenode/listaccess"),OrderedPair:e("math/parsenode/orderedpair"),MovablePoint:e("math/parsenode/movablepoint"),OrderedPairAccess:e("math/parsenode/orderedpairaccess"),BaseComparator:e("math/parsenode/basecomparator"),Comparator:e("math/parsenode/comparator"),DoubleInequality:e("math/parsenode/doubleinequality"),RepeatedOperator:e("math/parsenode/repeatedoperator"),Sum:e("math/parsenode/sum"),Product:e("math/parsenode/product"),Integral:e("math/parsenode/integral"),FunctionCall:e("math/parsenode/functioncall"),FunctionExponent:e("math/parsenode/functionexponent"),Prime:e("math/parsenode/prime"),Piecewise:e("math/parsenode/piecewise"),Derivative:e("math/parsenode/derivative"),BuiltInFunction:e("math/parsenode/builtinfunction"),NativeFunction:e("math/parsenode/nativefunction"),TypedFunction:e("math/parsenode/typedfunction"),ReducerFunction:e("math/parsenode/reducerfunction"),ParametrizedReducerFunction:e("math/parsenode/parametrizedreducerfunction"),DoubleReducerFunction:e("math/parsenode/doublereducerfunction"),Assignment:e("math/parsenode/assignment"),FunctionDefinition:e("math/parsenode/functiondefinition"),Equation:e("math/parsenode/equation"),Regression:e("math/parsenode/regression"),Table:e("math/parsenode/table"),TableColumn:e("math/parsenode/tablecolumn"),SolvedEquation:e("math/parsenode/solvedequation"),OptimizedRegression:e("math/parsenode/optimizedregression")};for(var n in t)r[n]=t[n];for(var i in r)r.hasOwnProperty(i)&&"Comparator"!==i&&"BuiltInFunction"!==i&&(r[i].prototype.type=i);for(var a in r.Comparator)r.Comparator.hasOwnProperty(a)&&(r.Comparator[a].prototype.type="Comparator[\'"+a+"\']");for(var o in r.BuiltInFunction)r.BuiltInFunction.hasOwnProperty(o)&&(r.BuiltInFunction[o].prototype.type="BuiltInFunction[\'"+o+"\']");return r}),define("math/inverses",[],function(){var e={},t=["sin","cos","tan","cot","sec","csc","sinh","cosh","tanh","coth","sech","csch"];return t.forEach(function(t){e[t]="arc"+t,e["arc"+t]=t}),e}),define("math/baseparser",["require","jison","parsenodes","math/inverses","math/errormsg"],function(e){function t(){throw u.featureUnavailable()}function r(e){e=e||[];for(var r in o)a[r]=e.indexOf(r)<0?o[r]:t}function n(e){var t="\\\\operatorname";return e.slice(0,t.length)===t?"\\\\"+e.slice(t.length+1,e.length-1):e}var i=e("jison"),a=i.yy,o=e("parsenodes"),s=e("math/inverses"),u=e("math/errormsg"),c=function(e,t){t=t||{};var n,s,c=void 0!==t.index;try{return c&&(n=a.currentIndex,a.currentIndex=t.index),r(t.disabledFeatures),s=i.parse("###"+e),c&&(a.currentIndex=n),s}catch(l){return l instanceof o.Error?l:u.parseError()}};return a.ErrorMsg=u,a.setInput=function(e,t){e.setInputString(a.lexer.matched.slice(Math.max(3,t.first_column),t.last_column))},r(),a.inverses=s,a.parseFunctionDeclaration=function(e){e=e.replace("###","");var t="(?:\\\\s|\\\\\\\\space|\\\\\\\\ |\\\\\\\\\\\\:)*",r="(?:\\\\\\\\operatorname\\\\{[a-zA-Z]+\\\\}|[a-zA-Z]|\\\\\\\\[a-zA-Z]+)",i="(?:_[a-zA-Z0-9]|_{[a-zA-Z0-9]+})?",a=r+i,s="(?:"+a+"(?:\\\\,"+a+")*)",u="("+a+")(?:\\\\\\\\left)?\\\\(("+s+")(?:\\\\\\\\right)?\\\\)=",c=new RegExp(u),l=new RegExp(t,"g");e=e.replace(l,"");var h=c.exec(e);return{identifier:o.Identifier(n(h[1])),args:h[2].split(",").map(function(e){return o.Identifier(e)})}},{parse:c}}),define("math/features/getValueType",["require","parsenodes","math/types"],function(e){function t(){return o.Number}function r(){return o.Bool}function n(){return o.Point}function i(){return o.Any}var a=e("parsenodes"),o=e("math/types"),s={Add:t,Multiply:t,Divide:t,Subtract:t,Exponent:t,Negative:t,And:r,Piecewise:function(e){return e[1].valueType},BaseComparator:r,RepeatedOperator:t,List:function(e){if(0===e.length)return o.ListOfAny;for(var t=e[0].valueType,r=1;r<e.length;r++)if(e[r].valueType!==t)return o.ListOfAny;return o.listType(t)},ListAccess:function(e){return o.elementType(e[0].valueType)},OrderedPairAccess:t,OrderedPair:n,NativeFunction:t,ReducerFunction:t,DoubleReducerFunction:t,ParametrizedReducerFunction:t,DummyIndex:t,FreeVariable:t,Constant:function(){switch(typeof this.constantValue){case"number":return o.Number;case"boolean":return o.Bool;default:throw new Error("Constant node expects value of type number or boolean, but saw "+typeof value)}},TypedFunction:function(){return this._outputType},Derivative:t,Integral:t,Identifier:i};for(var u in s)a[u].prototype._getValueType=s[u]}),define("math/features/typeCheck",["require","parsenodes","math/types","math/errormsg"],function(e){function t(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].valueType);return t}function r(e,r){return function(n){for(var i=0;i<n.length;i++)if(n[i].valueType!==e[i])throw r(t(n))}}var n=e("parsenodes"),i=e("math/types"),a=e("math/errormsg"),o={Add:r([i.Number,i.Number],a.addTypeError),Multiply:r([i.Number,i.Number],a.multiplyTypeError),Divide:r([i.Number,i.Number],a.divideTypeError),Subtract:r([i.Number,i.Number],a.subtractTypeError),Exponent:r([i.Number,i.Number],a.exponentTypeError),Negative:r([i.Number],a.negativeTypeError),BaseComparator:r([i.Number,i.Number],a.comparatorTypeError),And:r([i.Bool,i.Bool],a.andTypeError),List:function(e){if(0!==e.length){var t=e[0].valueType;if(!i.hasListType(t))throw a.listTypeError([t]);for(var r=0;r<e.length;r++){var n=e[r].valueType;if(!i.hasListType(n))throw a.listTypeError([n]);if(n!==t)throw a.heterogeneousList()}}},OrderedPair:r([i.Number,i.Number],a.pointTypeError),Piecewise:function(e){if(e[0].valueType!==i.Bool)throw a.piecewiseConditionTypeError(t(e));if(e[1].valueType!==i.Number)throw a.piecewiseBranchTypeError([e[1].valueType]);if(e[2].valueType!==i.Number)throw a.piecewiseBranchTypeError([e[2].valueType])},ListAccess:function(e){if(!i.isList(e[0].valueType)||e[1].valueType!==i.Number)throw a.indexTypeError(t(e))},OrderedPairAccess:r([i.Point,i.Number],a.indexTypeError),Sum:function(e){if(e[1].valueType!==i.Number)throw a.sumLowerBoundTypeError([e[1].valueType]);if(e[2].valueType!==i.Number)throw a.sumUpperBoundTypeError([e[2].valueType]);if(e[3].valueType!==i.Number)throw a.sumArgumentTypeError([e[3].valueType])},Product:function(e){if(e[1].valueType!==i.Number)throw a.productLowerBoundTypeError([e[1].valueType]);if(e[2].valueType!==i.Number)throw a.productUpperBoundTypeError([e[2].valueType]);if(e[3].valueType!==i.Number)throw a.productArgumentTypeError([e[3].valueType])},Integral:function(e){if(e[1].valueType!==i.Number)throw a.integralLowerBoundTypeError([e[1].valueType]);if(e[2].valueType!==i.Number)throw a.integralUpperBoundTypeError([e[2].valueType]);if(e[3].valueType!==i.Number)throw a.integralArgumentTypeError([e[3].valueType])},NativeFunction:function(e){for(var r=0;r<e.length;r++)if(e[r].valueType!==i.Number)throw a.functionTypeError(this._symbol,t(e))},ReducerFunction:function(e){if(e[0].valueType!==i.ListOfNumber)throw a.functionTypeError(this._symbol,t(e))},DoubleReducerFunction:function(e){if(e[0].valueType!==i.ListOfNumber)throw a.functionTypeError(this._symbol,t(e))},ParametrizedReducerFunction:function(e){if(e[0].valueType!==i.ListOfNumber||e[1].valueType!==i.Number)throw a.functionTypeError(this._symbol,t(e))},TypedFunction:function(e){for(var r=0;r<e.length;r++)if(e[r].valueType!==this._inputTypes[r])throw a.functionTypeError(this._symbol,t(e))},Derivative:r([i.Number],a.derivativeTypeError)};for(var s in o)n[s].prototype.typeCheck=o[s]}),define("math/features/repr",["require","parsenodes"],function(e){var t=e("parsenodes"),r=function(e,t,r){r=r||0;var n=Array(r+1).join("  "),i=n+"  ";return"[\\n"+i+e.map(function(e){return e.repr(t,r+1)}).join(",\\n"+i)+"\\n"+n+"]"},n=function(e,t){return t=t||"",""+t+e};t.Expression.prototype.repr=function(e,t){return n(this.type,e)+"("+r(this.args,e,t)+")"},t.DoubleInequality.prototype.repr=function(e,t){t=t||0;var r=Array(t+1).join("  "),i=r+"  ";return n(this.type,e)+"([\\n"+i+this.args[0].repr(e,t+1)+",\\n"+i+"\'"+this.args[1]+"\',\\n"+i+this.args[2].repr(e,t+1)+",\\n"+i+"\'"+this.args[3]+"\',\\n"+i+this.args[4].repr(e,t+1)+"\\n"+r+"])"},t.Identifier.prototype.repr=t.FreeVariable.prototype.repr=function(e){return n(this.type,e)+"(\'"+this._symbol+"\')"},t.Constant.prototype.repr=function(e){return n(this.type,e)+"("+this.constantValue+")"},t.FunctionCall.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._symbol+"\', "+r(this.args,e,t)+")"},t.Assignment.prototype.repr=function(e,r){return n(this.type,e)+"("+t.Identifier(this._symbol).repr(e,r)+", "+this._expression.repr(e,r)+")"},t.Regression.prototype.repr=t.Equation.prototype.repr=function(e,t){return n(this.type,e)+"("+this._lhs.repr(e,t)+", "+this._rhs.repr(e,t)+")"},t.FunctionDefinition.prototype.repr=function(e,i){return n(this.type,e)+"("+t.Identifier(this._symbol).repr(e,i)+", "+r(this._argSymbols.map(function(e){return t.Identifier(e)}),e,i)+", "+this._expression.repr(e,i)+")"},t.Error.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._msg+"\')"},t.Derivative.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._symbol+"\', "+r(this.args,e,t)+")"},t.SolvedEquation.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._symbol+"\', "+this._expression.repr(e,t)+")"},t.OptimizedRegression.prototype.repr=function(e,t){return n(this.type,e)+"("+JSON.stringify(this.parameters)+", "+JSON.stringify(this.residuals)+", "+JSON.stringify(this.statistics)+", "+this.model.repr(e,t+1)+", "+JSON.stringify({isModelValid:this.isModelValid,residualVariable:this.residualVariable,residualSuggestionId:this.residualSuggestionId,shouldSuggestLogMode:this.shouldSuggestLogMode})+")"},t.Table.prototype.repr=function(e,t){return n(this.type,e)+"("+r(this.columns,e,t)+")"},t.TableColumn.prototype.repr=function(e,t){return n(this.type,e)+"("+this.header.repr(e,t)+", "+this.length+", "+r(this.values,e,t)+")"}}),define("math/features/scalarEvalExpression",["require","parsenodes","math/functions"],function(e){var t=e("parsenodes"),r=e("math/functions"),n={Add:function(e){return"("+e.join("+")+")"},Multiply:function(e){return"("+e.join("*")+")"},Divide:function(e){return"BuiltIn.div("+e.join(",")+")"},RawDivide:function(e){return"("+e.join("/")+")"},Subtract:function(e){return"("+e.join("-")+")"},Exponent:function(e){return"BuiltIn.pow("+e.join(",")+")"},RawExponent:function(e){return"Math.pow("+e.join(",")+")"},Negative:function(e){return"(-"+e[0]+")"},And:function(e){return e.join("&&")},Piecewise:function(e){return"("+e[0]+"?"+e[1]+":"+e[2]+")"}},i={Add:2,Multiply:2,Divide:2,RawDivide:2,Subtract:2,Exponent:2,RawExponent:2,Negative:1,And:2,Piecewise:3};for(var a in n){var o=t[a].prototype;o.scalarEvalExpression=n[a],o.evaluate=r.createEvaluateFunction(o.scalarEvalExpression,i[a])}}),define("math/features/okForImplicitFunction",["require","parsenodes"],function(e){var t=e("parsenodes");t.Add.prototype.okForImplicitFunction=t.Subtract.prototype.okForImplicitFunction=t.Add.prototype.okForImplicitFunction=t.Multiply.prototype.okForImplicitFunction=t.Divide.prototype.okForImplicitFunction=t.Exponent.prototype.okForImplicitFunction=function(){for(var e=0;e<this.args.length;e++)if(!this.args[e].okForImplicitFunction())return!1;return!0},t.Piecewise.prototype.okForImplicitFunction=function(){return this.args[1].isConstant&&1===this.args[1].constantValue&&this.args[2].isConstant&&this.args[2].isNaN()}}),define("math/features/constantcollapsedcopy",["require","parsenodes","math/builtin","math/distance"],function(e){var t=e("parsenodes"),r=t.Constant,n=t.Multiply,i=t.RawExponent,a=t.BuiltInFunction,o=e("math/builtin"),s=e("math/distance"),u={ScalarExpression:function(e){for(var t=[],n=0;n<e.length;n++){if(!e[n].isConstant)return this.copyWithArgs(e);t.push(e[n].constantValue)}return r(this.evaluate(t))},OrderedPair:function(e){return this.copyWithArgs(e)},Add:function(e){return e[0].isConstant&&e[1].isConstant?r(this.evaluate([e[0].constantValue,e[1].constantValue])):0===e[0].constantValue?e[1]:0===e[1].constantValue?e[0]:this.copyWithArgs(e)},Multiply:function(e){return e[0].isConstant&&e[1].isConstant?r(this.evaluate([e[0].constantValue,e[1].constantValue])):1===e[0].constantValue?e[1]:1===e[1].constantValue?e[0]:this.copyWithArgs(e)},Subtract:function(e){return e[0].isConstant&&e[1].isConstant?r(this.evaluate([e[0].constantValue,e[1].constantValue])):0===e[0].constantValue?t.Negative([e[1]]):0===e[1].constantValue?e[0]:this.copyWithArgs(e)},Divide:function(e){return e[0].isConstant&&e[1].isConstant?r(this.evaluate([e[0].constantValue,e[1].constantValue])):e[1].isConstant?1===e[1].constantValue?e[0]:0===e[1].constantValue?r(NaN):t.RawDivide(e):this.copyWithArgs(e)},RawDivide:function(e){return e[0].isConstant&&e[1].isConstant?r(this.evaluate([e[0].constantValue,e[1].constantValue])):this.copyWithArgs(e)},Exponent:function(e){if(e[0].isConstant&&e[1].isConstant)return r(this.evaluate([e[0].constantValue,e[1].constantValue]));if(e[0].isConstant){if(e[0].constantValue===Math.E)return a.exp([e[1]]);if(e[0].constantValue>0)return i(e)}if(e[1].isConstant){var t=e[1].constantValue;if(1===t)return e[0];if(t===Math.floor(t))return i(e);var u=o.toFraction(t,100);return s.approx(u.n/u.d,t,2)&&u.d%2===1?n([u.n%2===0?r(1):a.sign([e[0]]),i([a.abs([e[0]]),e[1]])]):i(e)}return this.copyWithArgs(e)},RawExponent:function(e){return e[0].isConstant&&e[1].isConstant?r(this.evaluate([e[0].constantValue,e[1].constantValue])):this.copyWithArgs(e)},Negative:function(e){return e[0].isConstant?r(-e[0].constantValue):e[0]instanceof t.Negative?e[0].args[0]:this.copyWithArgs(e)},And:function(e){return e[0].isConstant&&e[1].isConstant?r(e[0].constantValue&&e[1].constantValue):e[0].isConstant&&e[0]===!0?e[1]:e[0].isConstant&&e[0]===!1?r(!1):e[1].isConstant&&e[1]===!0?e[0]:e[1].isConstant&&e[1]===!1?r(!1):this.copyWithArgs(e)},Piecewise:function(e){return e[0].isConstant&&e[0].constantValue===!0?e[1]:e[0].isConstant&&e[0].constantValue===!1?e[2]:this.copyWithArgs(e)},ListAccess:function(e){return e[1].isConstant?e[0].elementAt(e[1].constantValue-1):this.copyWithArgs(e)},OrderedPairAccess:function(e){return e[1].isConstant&&e[0]instanceof t.OrderedPair?e[0].elementAt(e[1].constantValue-1):this.copyWithArgs(e)}};for(var c in u)t[c].prototype._constantCollapsedCopy=u[c];a.distance.prototype._constantCollapsedCopy=function(e){return 0===e[0].getDependencies().length&&0===e[1].getDependencies().length?r(this.evaluate([e[0].asArray(),e[1].asArray()])):this.copyWithArgs(e)},a.midpoint.prototype._constantCollapsedCopy=function(e){if(0===e[0].getDependencies().length&&0===e[1].getDependencies().length){var n=this.evaluate([e[0].asArray(),e[1].asArray()]);return t.OrderedPair([r(n[0]),r(n[1])])}return this.copyWithArgs(e)}}),define("math/features/polynomialorder",["require","parsenodes"],function(e){var t=e("parsenodes"),r={Expression:"this.dependsOn(symbol) ? Infinity : 0",FreeVariable:"(symbol === this._symbol ? 1 : 0)",Constant:"0",Add:"Math.max(order0, order1)",Subtract:"Math.max(order0, order1)",Multiply:"order0 + order1",Negative:"order0",Divide:"order1 > 0 ? Infinity : order0"},n=function(e){return e=e.replace("order0","this.args[0].polynomialOrder(symbol)"),e=e.replace("order1","this.args[1].polynomialOrder(symbol)"),new Function(["symbol"],"return "+e)};for(var i in r){var a=r[i];t[i].prototype.polynomialOrder=n(a)}t.Exponent.prototype.polynomialOrder=function(e){var t=this.args[0].polynomialOrder(e),r=this.args[1].polynomialOrder(e);if(0===t&&0===r)return 0;var n=this.args[1];return n.isConstant&&n.constantValue===Math.round(n.constantValue)&&n.constantValue>0?t*n.constantValue:1/0},t.Piecewise.prototype.polynomialOrder=function(e){return this.dependsOn(e)?this.args[2].isConstant&&this.args[2].isNaN()?this.args[1].dependsOn(e)?1/0:0:1/0:0},t.List.prototype.polynomialOrder=function(e){return 1/0}}),define("math/features/polynomialcoefficients",["require","parsenodes"],function(e){var t=e("parsenodes"),r=t.Constant(0),n=t.Constant(1);t.FreeVariable.prototype.getPolynomialCoefficients=function(e){return e===this._symbol?[r,n]:[this]},t.Constant.prototype.getPolynomialCoefficients=function(e){return[this]},t.Add.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,o=[],s=0;s<=Math.max(i,a);s++)i>=s&&a>=s?o.push(t.Add([r[s],n[s]])):o.push(i>a?r[s]:n[s]);return o},t.Subtract.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,o=[],s=0;s<=Math.max(i,a);s++)i>=s&&a>=s?o.push(t.Subtract([r[s],n[s]])):o.push(i>a?r[s]:t.Negative([n[s]]));return o},t.Negative.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=[],i=0;i<r.length;i++)n.push(t.Negative([r[i]]));return n},t.Exponent.prototype.getPolynomialCoefficients=function(e){var n=this.args[0].getPolynomialCoefficients(e),i=this.args[1].getPolynomialCoefficients(e),a=n.length-1,o=i.length-1;if(o>0)throw"can\'t solve for variable in exponent";if(0===a)return[t.Exponent([n[0],i[0]])];if(this.args[1].isConstant){var s=this.args[1].constantValue;switch(s){case 0:return[r];case 1:return n;case 2:return t.Multiply([this.args[0],this.args[0]]).getPolynomialCoefficients(e)}}throw"Unable to compile polynomial representation"},t.Multiply.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,o=[],s=0;i>=s;s++)for(var u=0;a>=u;u++){var c=t.Multiply([r[s],n[u]]),l=o[s+u];void 0===l?o[s+u]=c:o[s+u]=t.Add([l,c])}return o},t.Divide.prototype.getPolynomialCoefficients=function(e){var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=n.length-1,a=[];if(i>0)throw"Can\'t solve for variable in denominator";for(var o=0;o<r.length;o++)a.push(t.Divide([r[o],n[0]]));return a},t.Expression.prototype.getPolynomialCoefficients=function(e){if(this.dependsOn(e))throw"Unimplemented polynomialCoefficient call";return[this]},t.Piecewise.prototype.getPolynomialCoefficients=function(e){if(!this.dependsOn(e))return[this];var r=this.args[1].getPolynomialCoefficients(e);return this.args[0].dependsOn(e)?r:[t.Piecewise(this.args[0],r[0],this.args[2])]}}),define("math/features/extractconditions",["require","parsenodes"],function(e){var t=e("parsenodes");t.Expression.prototype.extractConditions=function(e,t){for(var r=0;r<this.args.length;r++){var n=this.args[r];t=n.extractConditions(e,t)}return t},t.Constant.prototype.extractConditions=function(e,t){return t},t.Piecewise.prototype.extractConditions=function(e,r){if(!this.dependsOn(e))return r;if(!this.args[0].dependsOn(e))return r=this.args[1].extractConditions(e,r),r=this.args[2].extractConditions(e,r);var n={};return n[e]=r,t.Piecewise([this.args[0].substitute(n),r,t.Constant(NaN)])}}),define("math/features/bounddomain",["require","parsenodes","math/builtinframe","math/domaintypes"],function(e){var t=e("parsenodes"),r=e("math/builtinframe"),n=e("math/domaintypes"),i=t.Constant(0);t.Base.prototype.boundDomain=function(e){return n.unknownDomain()},t.List.prototype.boundDomain=function(e){return n.unknownDomain()},t.Expression.prototype.boundDomain=function(e){for(var t=n.allReals(),r=0;r<this.args.length;r++)t=n.intersectDomains(t,this.args[r].boundDomain(e));return t},t.Constant.prototype.boundDomain=function(e){return this.isNaN()?n.emptyDomain():n.allReals()},t.Piecewise.prototype.boundDomain=function(e){return this.args[2].isConstant&&isNaN(this.args[2].constantValue)?n.intersectDomains(this.args[0].boundDomain(e),this.args[1].boundDomain(e)):n.unknownDomain()},t.BaseComparator.prototype.boundDomain=function(e){if("="===this.operator)return n.emptyDomain();var t=this._difference,a=t.polynomialOrder(e);if(a>1)return n.unknownDomain();var o=t.getPolynomialCoefficients(e),s=o[1]?o[1].getConcreteTree(r):i,u=o[0]?o[0].getConcreteTree(r):i;if(!s.isConstant||!u.isConstant)return n.unknownDomain();if(isNaN(s.constantValue)||isNaN(u.constantValue))return n.emptyDomain();if(0===s.constantValue)return u.constantValue>=0?n.allReals():n.emptyDomain();var c=-u.constantValue/s.constantValue,l=s.constantValue<0?[-(1/0),c]:[c,1/0];return n.knownDomain(l)}}),define("math/features/derivative",["require","parsenodes","math/baseparser","math/builtinframe","math/parsenode/builtinfunction"],function(e){var t=e("parsenodes"),r=e("math/baseparser"),n=e("math/builtinframe"),i=e("math/parsenode/builtinfunction"),a=t.Constant(0),o=t.Constant(1),s=t.Constant(2),u={FreeVariable:function(e){return e===this._symbol?o:a},Constant:function(e){return isFinite(this.constantValue)?a:t.Constant(this.constantValue)},Negative:function(e){return t.Negative([this.args[0].takeDerivative(e)])},Add:function(e){return t.Add([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Subtract:function(e){return t.Subtract([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Multiply:function(e){return t.Add([m(e,this.args[0],t.Multiply([this.args[0].takeDerivative(e),this.args[1]])),m(e,this.args[1],t.Multiply([this.args[0],this.args[1].takeDerivative(e)]))])},Divide:function(e){return t.Subtract([m(e,this.args[0],t.Divide([this.args[0].takeDerivative(e),this.args[1]])),m(e,this.args[1],t.Divide([t.Multiply([this.args[0],this.args[1].takeDerivative(e)]),t.Exponent([this.args[1],s])]))])},Exponent:function(e){return t.Add([m(e,this.args[0],t.Multiply([t.Multiply([this.args[1],t.Exponent([this.args[0],t.Subtract([this.args[1],o])])]),this.args[0].takeDerivative(e)])),m(e,this.args[1],t.Multiply([t.Piecewise([t.Comparator["="]([this.args[0],a]),t.Piecewise([t.Comparator[">"]([this.args[1],a]),a,t.Constant(NaN)]),t.Multiply([t.FunctionCall("\\\\ln",[this.args[0]]),t.Exponent([this.args[0],this.args[1]])])]),this.args[1].takeDerivative(e)]))]).getConcreteTree(n)},Sum:function(e){return this.copyWithArgs([this.args[0],this.args[1],this.args[2],this.args[3].takeDerivative(e)])},Product:function(e){var r=t.Sum([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([a,this.args[3]]),o,a])]),n=t.Multiply([t.Sum([this.args[0],this.args[1],this.args[2],t.Divide([this.args[3].takeDerivative(e),this.args[3]])]),t.Product(this.args)]),i=t.Product([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([a,this.args[3]]),this.args[3].takeDerivative(e),this.args[3]])]);return t.Piecewise([t.Comparator["="]([a,r]),n,t.Piecewise([t.Comparator["="]([o,r]),i,a])])},Piecewise:function(e){return 2===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e)]):3===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e),this.args[2].takeDerivative(e)]):void 0},List:function(e){return t.List(this.args.map(function(t){return t.takeDerivative(e)}))},ListAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},OrderedPair:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},OrderedPairAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},Integral:function(e){var r=this.args[0],n=this.args[1],i=this.args[2],a=this.args[3],o={};o[r._symbol]=i;var s={};return s[r._symbol]=n,t.Add([m(e,a,this.copyWithArgs([r,n,i,a.takeDerivative(e)])),t.Subtract([m(e,i,t.Multiply([a.substitute(o),i.takeDerivative(e)])),m(e,n,t.Multiply([a.substitute(s),n.takeDerivative(e)]))])])},SolvedEquation:function(e){return this._expression.takeDerivative(e)},OptimizedRegression:function(e){return this.model.takeDerivative(e)}},c={exp:"\\\\exp(x)*x_1",ln:"\\\\{x >= 0: x_1/x \\\\}",log:"\\\\{ x >= 0: x_1/(x*\\\\ln(10)) \\\\}",sqrt:"x_1/(2*\\\\sqrt{x})",rtxsqpone:"x*x_1/\\\\rtxsqpone(x)",rtxsqmone:"x*x_1/\\\\rtxsqmone(x)",sin:"\\\\cos(x)*x_1",cos:"-\\\\sin(x)*x_1",tan:"\\\\sec(x)^2*x_1",arcsin:"x_1/\\\\sqrt{1 - x^2}",arccos:"-x_1/\\\\sqrt{1 - x^2}",arctan:"x_1/(1+x^2)",sinh:"\\\\cosh(x)*x_1",cosh:"\\\\sinh(x)*x_1",tanh:"(\\\\sech(x))^2*x_1",arcsinh:"x_1/\\\\sqrt{x^2 + 1}",arccosh:"\\\\{ x > 0: x_1/\\\\rtxsqmone(x) \\\\}",arctanh:"\\\\{ \\\\abs(x) < 1: x_1/(1 - x^2) \\\\}",csc:"-\\\\cot(x)*\\\\csc(x)*x_1",sec:"\\\\tan(x)*\\\\sec(x)*x_1",cot:"-\\\\csc(x)^2*x_1",arccsc:"-x_1/(\\\\abs(x)*\\\\rtxsqmone(x))",arcsec:"x_1/(\\\\abs(x)*\\\\rtxsqmone(x))",arccot:"-x_1/(1+x^2)",csch:"-\\\\coth(x)*\\\\csch(x)*x_1",sech:"-\\\\tanh(x)*\\\\sech(x)*x_1",coth:"-(\\\\csch(x))^2*x_1",arccsch:"-x_1/(\\\\abs(x)*\\\\rtxsqpone(x))",arcsech:"\\\\{ x >= 0: -x_1/(x*\\\\sqrt{1 - x^2}) \\\\}",arccoth:"\\\\{ \\\\abs(x) > 1 : x_1/(1 - x^2) \\\\}",factorial:"(x)!*\\\\polyGamma(0, x + 1)*x_1",floor:"\\\\{ \\\\mod(x, 1) > 0: 0*x_1 \\\\}",ceil:"\\\\{ \\\\mod(x, 1) > 0: 0*x_1 \\\\}",round:"\\\\{ \\\\abs(\\\\mod(x, 1) - 0.5) > 0: 0*x_1 \\\\}",abs:"\\\\{ \\\\abs(x) > 0: \\\\sign(x)*x_1 \\\\}",sign:"\\\\{ \\\\abs(x) > 0: 0*x_1 \\\\}",mean:"\\\\mean(x_1)",total:"\\\\total(x_1)",length:"0","var":"2*\\\\cov(x, x_1)",stdev:"\\\\cov(x, x_1)/\\\\stdev(x)",stdevp:"\\\\covp(x, x_1)/\\\\stdevp(x)",mad:"\\\\mean(\\\\sign(x-\\\\mean(x))*(x_1 - \\\\mean(x_1)))",min:"x_1[\\\\argmin(x)]",max:"x_1[\\\\argmax(x)]",median:"0.5*(x_1[\\\\lowerQuantileIndex(x, 0.5)] + x_1[\\\\upperQuantileIndex(x, 0.5)])",argmin:"0/0",argmax:"0/0",gcd:"0/0",lcm:"0/0"},l={logbase:["\\\\{x > 0: \\\\frac{x_1}{x*\\\\ln(y)}\\\\}","\\\\frac{-\\\\log_{y}(x)*y_1}{y*\\\\ln(y)}"],nthroot:["x^{1/y - 1}/y*x_1","-\\\\frac{x^{1/y}*\\\\ln(x)*y_1}{y^2}"],polyGamma:["0/0","\\\\polyGamma(1 + x, y)*y_1"],mod:["\\\\{ \\\\abs(\\\\mod(x, y)) > 0: x_1 \\\\}","\\\\{ \\\\mod(x/y, 1) > 0: -\\\\floor(x/y)*y_1 \\\\}"],cov:["\\\\cov(x_1, y)","\\\\cov(x, y_1)"],covp:["\\\\covp(x_1, y)","\\\\covp(x, y_1)"],corr:["(\\\\cov(x_1, y) - (\\\\cov(x, y)*\\\\cov(x, x_1)/\\\\var(x)))/(\\\\stdevp(x)\\\\stdevp(y))","(\\\\cov(x, y_1) - (\\\\cov(x, y)*\\\\cov(y, y_1)/\\\\var(y)))/(\\\\stdevp(x)\\\\stdevp(y))"],quantile:["\\\\{ \\\\floor(y*(\\\\length(x)-1)) = y*(\\\\length(x)-1) :   x_1[\\\\upperQuantileIndex(x, y)],  (\\\\ceil(y*(\\\\length(x)-1)) - y*(\\\\length(x)-1))*x_1[\\\\lowerQuantileIndex(x, y)] +   (y*(\\\\length(x)-1) - \\\\floor(y*(\\\\length(x)-1)))*x_1[\\\\upperQuantileIndex(x, y)]\\\\}","\\\\{ \\\\floor(y*(\\\\length(x)-1)) < y*(\\\\length(x)-1) :   (x[\\\\upperQuantileIndex(x, y)] - x[\\\\lowerQuantileIndex(x, y)])*y_1\\\\}"],upperQuantileIndex:["0/0","0/0"],lowerQuantileIndex:["0/0","0/0"],nCr:["0/0","0/0"],nPr:["0/0","0/0"]},h=function(e){return function(t){var r=this.args,i={x:r[0],x_1:r[0].takeDerivative(t)};return m(t,r[0],e.substitute(i)).getConcreteTree(n)}},f=function(e,r){return function(i){var a=this.args,o={x:a[0],x_1:a[0].takeDerivative(i),y:a[1],y_1:a[1].takeDerivative(i)};return t.Add([m(i,a[0],e.substitute(o)),m(i,a[1],r.substitute(o))]).getConcreteTree(n)}};for(var p in c)i[p].prototype.takeDerivative=h(r.parse(c[p]));for(p in l)i[p].prototype.takeDerivative=f(r.parse(l[p][0]),r.parse(l[p][1]));i.distance.prototype.takeDerivative=function(e){var r=this.args[0],a=this.args[1],u=t.OrderedPairAccess([r,o]),c=t.OrderedPairAccess([r,s]),l=t.OrderedPairAccess([a,o]),h=t.OrderedPairAccess([a,s]),f=m(e,u,u.takeDerivative(e)),p=m(e,c,c.takeDerivative(e)),d=m(e,l,l.takeDerivative(e)),g=m(e,h,h.takeDerivative(e));\nreturn m(e,this,t.Divide([t.Add([t.Add([t.Subtract([t.Multiply([f,u]),t.Multiply([f,l])]),t.Subtract([t.Multiply([d,l]),t.Multiply([d,u])])]),t.Add([t.Subtract([t.Multiply([p,c]),t.Multiply([p,h])]),t.Subtract([t.Multiply([g,h]),t.Multiply([g,c])])])]),i.distance([this.args[0],this.args[1]])])).getConcreteTree(n)},i.midpoint.prototype.takeDerivative=function(e){var r=this.args[0],a=this.args[1],u=t.OrderedPairAccess([r,o]),c=t.OrderedPairAccess([r,s]),l=t.OrderedPairAccess([a,o]),h=t.OrderedPairAccess([a,s]),f=m(e,u,u.takeDerivative(e)),p=m(e,c,c.takeDerivative(e)),d=m(e,l,l.takeDerivative(e)),g=m(e,h,h.takeDerivative(e));return t.OrderedPair([i.mean([f,d]),i.mean([p,g])]).getConcreteTree(n)};var m=function(e,t,r){return t.dependsOn(e)?r:a};for(var d in u){var g=u[d];t[d].prototype.takeDerivative=g}}),define("math/features/substitute",["require","parsenodes"],function(e){var t=e("parsenodes"),r={Identifier:function(e){return e[this._symbol]?e[this._symbol]:this},FreeVariable:function(e){return e[this._symbol]?e[this._symbol]:this},Constant:function(e){return this},Expression:function(e){return this.copyWithArgs(this.args.map(function(t){return t.substitute(e)}))},List:function(e){return t.List(this.args.map(function(t){return t.substitute(e)}))},SolvedEquation:function(e){return new this.constructor(this._symbol,this._expression.substitute(e))},OptimizedRegression:function(e){return new this.constructor(this.model.substitute(e),this.parameters,this.residualVariables,this.residuals,this.statistics)}};for(var n in r)t[n].prototype.substitute=r[n]}),define("math/features/solve",["require","math/baseparser","parsenodes","math/errormsg","math/builtinframe"],function(e){function t(e){return o(e),0===e.a.constantValue?0===e.b.constantValue?l(0===e.c.constantValue):v.getConcreteTree(e):e.f.constantValue-e.g.constantValue<0?m([l(!1)]):e.f.constantValue-e.g.constantValue===0?b.getConcreteTree(e):x.getConcreteTree(e)}function r(e){var t=Object.create(g);return t.a=e[2]?e[2].tryGetConcreteTree(g):y,t.b=e[1]?e[1].tryGetConcreteTree(g):y,t.c=e[0]?e[0].tryGetConcreteTree(g):y,t}function n(e){return 0===e.a.constantValue?0===e.b.constantValue?0:1:2}function i(e,t,i,a){for(var o,s,u=[],c=[],l=0;l<i.length;l++){var h=i[l],f=0;m.eachArgs([t],function(e){var t=e[0];f=Math.max(f,t.polynomialOrder(h))});var p=f>2,d=i.length>1&&!e.validSolvedVariable(h),g=a&&t.extractConditions(h,y)!==y;p||d||g?(c[l]={},u[l]=1/0):(c[l]=[],u[l]=0,m.eachArgs([t],function(e){var t=e[0];s=r(t.getPolynomialCoefficients(h)),c[l].push(s),u[l]=Math.max(u[l],n(s))}))}var v;if(1===i.length)s=c[0],o=i[0],v=u[0];else{var b;b=0===u[0]?1:0===u[1]?0:u[0]<u[1]?0:1,s=c[b],o=i[b],v=u[b]}return{localFrame:s,variableOfInterest:o,effectiveOrder:v}}function a(e,t){return t?N.inequality:1===e.length?N.singleVariable:N.generalEquation}function o(e){e.f=_.getConcreteTree(e),e.g=w.getConcreteTree(e),e.p=M.getConcreteTree(e),e.q=T.getConcreteTree(e),e.m=l(1e305)}var s=e("math/baseparser"),u=e("parsenodes"),c=u.Base,l=u.Constant,h=u.Equation,f=u.SolvedEquation,p=u.BaseComparator,m=u.List,d=e("math/errormsg"),g=e("math/builtinframe"),y=l(0),v=s.parse("[-c/b]"),b=s.parse("[-b/(2*a)]"),x=s.parse("[\\\\{a>0:q,p\\\\},\\\\{a>0:p,q\\\\}]"),_=s.parse("b*b"),w=s.parse("4*a*c"),M=s.parse("(-b+\\\\sqrt{b*b-4*a*c})/(2*a)"),T=s.parse("(-b-\\\\sqrt{b*b-4*a*c})/(2*a)"),E=s.parse("[\\\\{a=0:\\\\{b<0:-c/b\\\\},q\\\\},\\\\{a=0:\\\\{b>=0:-c/b\\\\},p\\\\}]"),S=s.parse("[\\\\{a=0:\\\\{b<0:-c/b\\\\},a>0:q\\\\},\\\\{a=0:\\\\{b=0:\\\\{c>0:-m\\\\}\\\\},a>0:\\\\{f<g:-m\\\\},p\\\\},\\\\{a=0:\\\\{b=0:\\\\{c>0:m\\\\}\\\\},a>0:\\\\{f<g:m\\\\},q\\\\},\\\\{a=0:\\\\{b>0:-c/b\\\\},a>0:p\\\\}]"),N={singleVariable:t,inequality:function(e){return o(e),S.getConcreteTree(e)},generalEquation:function(e){return o(e),E.getConcreteTree(e)}};c.prototype.trySolve=function(e,t){try{return this.solve(e,t)}catch(r){if(r instanceof u.Error)return r;throw r}},h.prototype.solve=function(e,t){return this.asComparator().solve(e,t)},p.prototype.solve=function(e,t){var r=this.tryGetConcreteTree(t);if(r.isError)return r;if(r.isConstant)return r;var n="="!==this.getOperator(),o=this._difference.tryGetConcreteTree(t),s=o.getDependencies();if(0===s.length)return o.isList?m(o.args.map(function(e){return l(0===e.constantValue)})):l(0===o.constantValue);if(1===s.length&&o.isList&&!n)return d.singleVariableListSolve();var u=o.isList?o:m([o]);if(s.length>2)return d.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(s);if(n&&!e.validInequalityVariables(s))return d.invalidInequalityVariables().setDependencies(s);if(2===s.length&&!e.validImplicitVariables(s))return d.invalidImplicitVariables().setDependencies(s);var c=i(e,u,s,n),h=c.localFrame,p=c.effectiveOrder,g=c.variableOfInterest;if(e.complicatedPolarImplicit(g,p)&&(n||s.length>1))return d.complicatedPolarImplicit().setDependencies(s);if(p>2)return 1===s.length?d.unsolvable().setDependencies(s):o;for(var y=a(s,n),v=[],b=0;b<h.length;b++){var x=y(h[b]);if(x.isError)return x;if(x.isConstant)v.push(x);else for(var _=0;_<x.args.length;_++){var w=x.args[_],M=u.args[b].extractConditions(g,w).getConcreteTree(t);v.push(M)}}return f(g,m(v))}}),define("math/evaluationstate",["require","graphing/graphmode","parsenodes","graphing/label","worker/workerconfig","math/errormsg"],function(e){function t(e){return e.isError?e.getError():void 0===e.constantValue?"":+e.constantValue}function r(e,r){for(var n=[],i=0;i<e.columns.length;i++){var a=r.columns[i],o={dependent:!a.isIndependent,discrete:a.isIndependent};a.isError?(o.error=a.getError(),o.values=[]):o.values=a.values.map(t),n.push(o)}return{column_data:n}}var n=e("graphing/graphmode"),i=e("parsenodes"),a=e("graphing/label"),o=e("worker/workerconfig"),s=e("math/errormsg"),u=function(){return{operator:"=",variables:[]}},c=function(e,t,c){if(t.isTable)return r(t,c);var l=u();if(c.isError&&(!(t instanceof i.FunctionDefinition)||c.blocksExport))return l.error=c.getError(),l.variables=t.getSliderVariables(e,c),l.is_single_identifier=t instanceof i.Identifier,l;c.moveStrategy&&(l.move_strategy=c.moveStrategy,l.default_drag_mode=c.defaultDragMode),t.isInequality()&&(l.is_inequality=!0),l.operator=t.getOperator(),c instanceof i.SolvedEquation?c._expression.constantValue!==!0&&c._expression.constantValue!==!1&&(l.assignment=c._symbol):t instanceof i.Assignment&&(l.assignment=t._symbol);var h=e.graphingEnabled()?t.getGraphMode(e,c):n.NONE;if(h!==n.NONE){l.is_graphable=!0,h===n.XYPOINT&&(l.is_point_list=!0),h===n.XYPOINT_MOVABLE&&(l.is_point_list=!0),h===n.PARAMETRIC&&(l.is_parametric=!0),c.isShadeBetween()&&(l.is_shade_between=!0);var f=t.tableInfo(e,c);f&&(l.is_tableable=!0,l.table_info=f)}l.variables=l.is_graphable?[]:t.getSliderVariables(e,c),l.is_single_identifier=t instanceof i.Identifier;var p=t.getSliderInfo();p?(l.is_slidable=!0,l.is_animatable=!l.is_graphable,l.constant_value=p.value):c.isConstant&&(l.constant_value=c.constantValue);var m=c.getEvaluationInfo();if(!m||t.isConstant||t.isFunction||l.is_graphable||l.is_slidable||(!o.singleVariableSolutions&&c instanceof i.SolvedEquation?l.error=s.unsolvable().getError():(l.is_evaluable=!0,l.zero_values=m)),c instanceof i.OptimizedRegression){var d={};for(var g in c.parameters)c.parameters.hasOwnProperty(g)&&(d[a.identifierToLatex(g)]=+c.parameters[g].constantValue);l.is_regression=!0,l.regression={parameters:d,residualVariable:a.identifierToLatex(c.residualVariable),residualSuggestionId:c.residualSuggestionId,shouldSuggestLogMode:c.shouldSuggestLogMode,statistics:c.statistics}}return l};return c["default"]=u,c}),define("math/statementanalysis",["require","math/evaluationstate","pjs","graphing/graphmode","worker/workerconfig"],function(e){var t=e("math/evaluationstate"),r=e("pjs"),n=e("graphing/graphmode"),i=e("worker/workerconfig");return r(function(e){e.init=function(e,r,n){this.policy=e,this.rawTree=r,this.concreteTree=n,this.evaluationState=t(e,r,n)},e.exportTo=function(e,t){this.rawTree.exportTo(e,this.concreteTree,t)},e.graph=function(e){return this.rawTree.graph(this.policy,this.concreteTree,e)},e.getGraphMode=function(){return this.rawTree.getGraphMode(this.policy,this.concreteTree)},e.getGraphInfo=function(){return this.rawTree.getGraphInfo(this.policy,this.concreteTree)},e.shouldIntersect=function(){if(!this.evaluationState.is_graphable)return!1;if(!this.rawTree.userData.shouldGraph)return!1;if(!i.pointsOfInterest)return!1;var e=this.getGraphMode();return e===n.X||e===n.Y}})}),define("math/features/analyze",["require","parsenodes","math/statementanalysis","math/builtinframe","math/parsenode/builtinfunction","math/errormsg","math/comparators","math/types"],function(e){function t(e,t,r,n){var a=n.getDependencies();switch(n.valueType){case c.Point:case c.ListOfPoint:return a.length?e.validParametricVariables(a)?i(e,r,n):i(e,r,s.tooManyVariables(r.getSliderVariables(e,n)).setDependencies(a)):i(e,r,n);case c.Number:case c.ListOfNumber:switch(a.length){case 0:return i(e,r,n);case 1:return e.validExpressionVariable(a[0])?i(e,r,n):i(e,r,s.equationRequired(e.implicitDependency(a[0])).setDependencies(a));default:return e.validImplicitVariables(a)?i(e,r,s.equationRequired().setDependencies(a)):i(e,r,s.tooManyVariables(r.getSliderVariables(e,n)).setDependencies(a))}}}function r(e,t){return e.filter(function(e){return!t[e]})}var n=e("parsenodes"),i=e("math/statementanalysis"),a=e("math/builtinframe"),o=e("math/parsenode/builtinfunction"),s=e("math/errormsg"),u=e("math/comparators"),c=e("math/types");n.Base.prototype.analyze=function(e,t){return i(e,this,this.tryGetConcreteTree(t))},n.Expression.prototype.analyze=function(e,r){var n=this.tryGetConcreteTree(r);return n.isError?i(e,this,n):t(e,r,this,n)},n.Identifier.prototype.analyze=function(e,t){return i(e,this,this.tryGetConcreteTree(t))},n.FunctionDefinition.prototype.analyze=function(e,t){var r=/^log_[\\d|e]/;if(a[this._symbol]||r.test(this._symbol))return i(e,this,s.cannotRedefine(this._symbol));var n=this._symbol.split("_")[0];if(o[n])return i(e,this,s.cannotRedefine(this._symbol,n));var u=this.tryGetConcreteTree(t);if(u.isError)return i(e,this,u);var c=this._argSymbols,l=u.getDependencies();if(-1!==l.indexOf(this._symbol))return i(e,this,s.selfReferentialFunction(this._symbol));var h=l.filter(function(e){return-1===c.indexOf(e)});return e.unplottablePolarFunction(this._symbol,l)?i(e,this,s.unplottablePolarFunction()):h.some(e.assignmentForbidden)?i(e,this,s.addArgumentsToDefinition(h,this._symbol,c).setDependencies(l)):h.length?i(e,this,s.tooManyVariables(this.getSliderVariables(e,u)).setDependencies(l)):i(e,this,u)},n.Assignment.prototype.analyze=function(e,t,r){var o=this._symbol;if(!e.validLHS(o))return i(e,this,s.invalidLHS(o));if(a[o])return i(e,this,s.cannotRedefine(o));var u=this.tryGetConcreteTree(t);if(u.isError)return i(e,this,u);var c=u.getDependencies();if(this.isEquation(u)){var l=this.asEquation().analyze(e,t);return i(e,this,l.concreteTree)}if(c.length>1)return i(e,this,s.tooManyVariables(this.getSliderVariables(e,u)).allowExport().setDependencies(c));var h=this.getMoveStrategy(t,u,r);if(h){var f=this.getDefaultDragMode(h);return i(e,this,n.MovablePoint(u.args,h,f))}return i(e,this,u)},n.Regression.prototype.analyze=function(e,t,r,n,a){return i(e,this,this.tryOptimize(e,t,r,n,a))},n.Equation.prototype.analyze=n.BaseComparator.prototype.analyze=function(e,t){return i(e,this,this.trySolve(e,t))},n.DoubleInequality.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(t);if(r.isError)return i(e,this,r);var n=r.getDependencies();return u.table[this._operators[0]].direction!==u.table[this._operators[1]].direction?i(e,this,s.mismatchedDoubleInequality()):e.validDoubleInequalitySymbol(r._symbol)&&e.validDoubleInequalityVariables(n)?n.length>2?i(e,this,s.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n)):-1!==r._expressions[0].getDependencies().indexOf(r._symbol)||-1!==r._expressions[1].getDependencies().indexOf(r._symbol)?i(e,this,s.complicatedDoubleInequality().setDependencies(n)):i(e,this,r):i(e,this,s.invalidDoubleInequalityVariables().setDependencies(n))},n.And.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(t);if(r.isError)return i(e,this,r);var n=r.getDependencies();return n.length?e.validDoubleInequalityVariables(n)?i(e,this,s.complicatedDoubleInequality().setDependencies(n)):i(e,this,s.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n)):i(e,this,r)},n.OrderedPair.prototype.analyze=function(e,r,a){var o=this.tryGetConcreteTree(r);if(o.isError)return i(e,this,o);var s=this.getMoveStrategy(r,o,a);if(s){var u=this.getDefaultDragMode(s);return i(e,this,n.MovablePoint(o.args,s,u))}return t(e,r,this,o)},n.Table.prototype.analyze=function(e,t){for(var a,o=Object.create(t),u=[],c=0;c<this.columns.length;c++){var l=this.columns[c].analyze(e,o,t);if(0===c&&(l.concreteTree.isIndependent?e.validFirstColumnVariable(l.concreteTree.header._symbol)?a=l.concreteTree.header._symbol:l=i(e,this.columns[c],s.invalidFirstTableColumn()):l=i(e,this.columns[c],s.invalidDependentFirstTableColumn())),l.concreteTree.isIndependent)l.rawTree.exportToLocal(l.concreteTree,o);else if(!l.concreteTree.isError){var h=l.concreteTree.header.getDependencies(),f=r(h,o);f.length&&(l=i(e,this.columns[c],s.tooManyVariables(f).setDependencies(f)))}u.push(l.concreteTree)}var p=n.Table(u),m=i(e,this,p);return m.evaluationState.is_graphable=!0,m},n.TableColumn.prototype.analyze=function(e,t,r){var n=this.header.tableError();if(n)return i(e,this,s.invalidTableHeader(n));var a=this.tryGetConcreteTree(t,r);if(a.isError)return i(e,this,a);if(a.header.isError)return i(e,this,a.header);if(a.values.isError)return i(e,this,a.values);for(var o=0;o<a.values.length;o++)if(!a.values[o].isError){var u=this.values[o]&&this.values[o].tableError();if(u)a.values[o]=s.invalidTableEntry(u);else{var c=a.values[o].getDependencies();c.length&&(a.values[o]=s.tooManyVariables(c).setDependencies(c))}}return i(e,this,a)}}),define("math/features/analyzeFourFunction",["require","parsenodes","math/statementanalysis","math/errormsg","math/parsenode/builtinfunction","math/builtinconstants"],function(e){var t=e("parsenodes"),r=e("math/statementanalysis"),n=e("math/errormsg"),i=e("math/parsenode/builtinfunction"),a=e("math/builtinconstants");t.Base.prototype.analyzeFourFunction=function(e,t){var i=this.tryGetConcreteTree(t);return i.isError?r(e,this,i):r(e,this,n.parseError())},t.Expression.prototype.analyzeFourFunction=function(e,t){var o=this.tryGetConcreteTree(t);if(o.isError)return r(e,this,o);var s=o.getDependencies();if(s.length>0){var u,c=s[0];return u=i.hasOwnProperty(c)?n.functionUnsupported(c):a.hasOwnProperty(c)?n.constantUnsupported(c):n.variablesUnsupported(c),r(e,this,u)}return r(e,this,o)},t.Assignment.prototype.analyzeFourFunction=function(e,t){return r(e,this,n.assignmentsUnsupported())},t.FunctionDefinition.prototype.analyzeFourFunction=function(e,t){return r(e,this,n.functionDefinitionsUnsupported())},t.Equation.prototype.analyzeFourFunction=function(e,t){return r(e,this,n.equationsUnsupported())},t.And.prototype.analyzeFourFunction=t.DoubleInequality.prototype.analyzeFourFunction=t.BaseComparator.prototype.analyzeFourFunction=function(e,t){return r(e,this,n.inequalitiesUnsupported())},t.Regression.prototype.analyzeFourFunction=function(e,t){return r(e,this,n.regressionsUnsupported())},t.OrderedPair.prototype.analyzeFourFunction=function(e,t){return r(e,this,n.pointsUnsupported())}}),define("math/features/analyzeScientific",["require","parsenodes","math/statementanalysis","math/errormsg","math/builtinframe"],function(e){var t=e("parsenodes"),r=e("math/statementanalysis"),n=e("math/errormsg"),i=e("math/builtinframe");t.Base.prototype.analyzeScientific=function(e,t){var i=this.tryGetConcreteTree(t);return i.isError?r(e,this,i):r(e,this,n.parseError())},t.Expression.prototype.analyzeScientific=function(e,t){var i=this.tryGetConcreteTree(t);if(i.isError)return r(e,this,i);var a=i.getDependencies();return a.length>0?r(e,this,n.tooManyVariables(a)):r(e,this,i)},t.Assignment.prototype.analyzeScientific=function(e,t){var a=this._symbol;if(i[a])return r(e,this,n.cannotRedefine(a));var o=this.tryGetConcreteTree(t);if(o.isError)return r(e,this,o);var s=o.getDependencies();return this.isEquation(o)?r(e,this,n.equationsUnsupported()):s.length>0?r(e,this,n.tooManyVariables(s)):r(e,this,o)},t.FunctionDefinition.prototype.analyzeScientific=function(e,t){if(i[this._symbol])return r(e,this,n.cannotRedefine(this._symbol));var a=this.tryGetConcreteTree(t);if(a.isError)return r(e,this,a);var o=this._argSymbols,s=a.getDependencies();if(-1!==s.indexOf(this._symbol))return r(e,this,n.selfReferentialFunction(this._symbol));var u=s.filter(function(e){return-1===o.indexOf(e)});return u.length?r(e,this,n.addArgumentsToDefinition(u,this._symbol,o)):r(e,this,a)},t.Equation.prototype.analyzeScientific=function(e,t){return r(e,this,n.equationsUnsupported())},t.And.prototype.analyzeScientific=t.DoubleInequality.prototype.analyzeScientific=t.BaseComparator.prototype.analyzeScientific=function(e,t){return r(e,this,n.inequalitiesUnsupported())},t.Regression.prototype.analyzeScientific=function(e,t){return r(e,this,n.regressionsUnsupported())},t.OrderedPair.prototype.analyzeScientific=function(e,t){return r(e,this,n.pointsUnsupported())}}),define("math/features/analyzeNeuteredScientific",["require","parsenodes","math/statementanalysis","math/errormsg","math/parsenode/builtinfunction","math/builtinconstants"],function(e){var t=e("parsenodes"),r=e("math/statementanalysis"),n=e("math/errormsg"),i=e("math/parsenode/builtinfunction"),a=e("math/builtinconstants");t.Base.prototype.analyzeNeuteredScientific=function(e,t){var i=this.tryGetConcreteTree(t);return i.isError?r(e,this,i):r(e,this,n.parseError())},t.Expression.prototype.analyzeNeuteredScientific=function(e,t){var o=this.tryGetConcreteTree(t);if(o.isError)return r(e,this,o);var s=o.getDependencies();if(s.length>0){var u,c=s[0];return u=i.hasOwnProperty(c)?n.functionUnsupported(c):a.hasOwnProperty(c)?n.constantUnsupported(c):n.variablesUnsupported(c),r(e,this,u)}return r(e,this,o)},t.Assignment.prototype.analyzeNeuteredScientific=function(e,t){return r(e,this,n.assignmentsUnsupported())},t.FunctionDefinition.prototype.analyzeNeuteredScientific=function(e,t){return r(e,this,n.functionDefinitionsUnsupported())},t.Equation.prototype.analyzeNeuteredScientific=function(e,t){return r(e,this,n.equationsUnsupported())},t.And.prototype.analyzeNeuteredScientific=t.DoubleInequality.prototype.analyzeNeuteredScientific=t.BaseComparator.prototype.analyzeNeuteredScientific=function(e,t){return r(e,this,n.inequalitiesUnsupported())},t.Regression.prototype.analyzeNeuteredScientific=function(e,t){return r(e,this,n.regressionsUnsupported())},t.OrderedPair.prototype.analyzeNeuteredScientific=function(e,t){return r(e,this,n.pointsUnsupported())}}),define("graphing/dragmode",{NONE:"NONE",X:"X",Y:"Y",XY:"XY",AUTO:"AUTO"}),define("graphing/reconcileDragMode",["require","graphing/dragmode"],function(e){function t(e){return e?"none"===e[0].type&&"none"===e[1].type?n.NONE:"none"===e[1].type?n.X:"none"===e[0].type?n.Y:n.XY:n.NONE}function r(e,r){var i=t(r);switch(e){case n.NONE:return n.NONE;case n.AUTO:return i;case n.XY:return i;case n.X:return i===n.X||i===n.XY?n.X:n.NONE;case n.Y:return i===n.Y||i===n.XY?n.Y:n.NONE;default:return n.NONE}}var n=e("graphing/dragmode");return r}),define("math/features/getgraphmode",["require","parsenodes","graphing/graphmode","graphing/reconcileDragMode","graphing/dragmode","math/types"],function(e){function t(e,t){var r;return r=e&&e.hasOwnProperty("dragMode")?e.dragMode===s.AUTO?t.defaultDragMode:e.dragMode:t.defaultDragMode,o(r,t.moveStrategy)}function r(e,r){var n=r.getDependencies();switch(r.valueType){case u.Point:case u.ListOfPoint:return r.isMovablePoint&&t(this.userData,r)!==s.NONE?a.XYPOINT_MOVABLE:0===n.length?a.XYPOINT:e.validParametricVariables(n)?a.PARAMETRIC:a.NONE;case u.Number:case u.ListOfNumber:return 1===n.length?a.Y:a.NONE;default:return a.NONE}}function n(e,t){var r=t._expression.getDependencies();if(1!==r.length)return a.NONE;var n=t._symbol,i=r[0];return e.graphMode(n,i)}var i=e("parsenodes"),a=e("graphing/graphmode"),o=e("graphing/reconcileDragMode"),s=e("graphing/dragmode"),u=e("math/types");i.Base.prototype.getGraphMode=function(e,t){return a.NONE},i.Identifier.prototype.getGraphMode=function(e,t){return e.graphableAsBareIdentifier(this._symbol)?a.Y:a.NONE},i.Expression.prototype.getGraphMode=r,i.BaseComparator.prototype.getGraphMode=function(e,t){var r=t.getDependencies();return t.isConstant?a.NONE:t instanceof i.SolvedEquation?0===r.length?e.graphableAsConstant(t._symbol)?e.constantGraphMode(t._symbol):a.NONE:n(e,t):2===r.length?a.IMPLICIT:a.NONE},i.DoubleInequality.prototype.getGraphMode=function(e,t){return e.constantGraphMode(t._symbol)},i.Equation.prototype.getGraphMode=function(e,t){return t.isConstant?a.NONE:t instanceof i.SolvedEquation?n(e,t):2!==t.getDependencies().length?a.NONE:a.IMPLICIT},i.Assignment.prototype.getGraphMode=function(e,t){if(t instanceof i.SolvedEquation)return n(e,t);var o=t.getDependencies();switch(t.valueType){case u.Number:case u.ListOfNumber:switch(o.length){case 0:return e.graphableAsConstant(this._symbol)?e.constantGraphMode(this._symbol):a.NONE;case 1:return t.isList&&!e.graphableListVariables(this._symbol,o[0])?a.NONE:e.graphMode(this._symbol,o[0]);case 2:return a.IMPLICIT;default:return a.NONE}break;default:return r.call(this,e,t)}},i.FunctionDefinition.prototype.getGraphMode=function(e,t){if(1!==this._argSymbols.length)return a.NONE;var r=e.graphMode(this._symbol,this._argSymbols[0]),n=t.getDependencies();switch(t.valueType){case u.Number:case u.ListOfNumber:switch(n.length){case 0:return r;case 1:return n[0]!==this._argSymbols[0]?a.NONE:r;default:return a.NONE}break;default:return a.NONE}},i.Regression.prototype.getGraphMode=function(e,t){return this.isLhsSimple&&t.isModelValid?1!==t.model.getDependencies().length?a.NONE:a.Y:a.NONE}}),define("math/features/getgraphinfo",["require","parsenodes","math/builtinframe","math/domaintypes"],function(e){var t=e("parsenodes"),r=e("math/builtinframe"),n=e("math/domaintypes");t.Base.prototype.getGraphInfo=function(e,t){var i,a,o=t.getDependencies(),s=[NaN,NaN];switch(o.length){case 0:i=!0,s=[+t.constantValue,0],a=t.boundDomain("x");break;case 1:if(a=t.boundDomain(o[0]),i="known"===a.type?t.isLinear(o[0]):!1){var u=t.getPolynomialCoefficients(o[0]);s[0]=u[0]?+u[0].getConcreteTree(r).constantValue:0,s[1]=u[1]?+u[1].getConcreteTree(r).constantValue:0}break;case 2:i=!1,a=n.unknownDomain()}return{graphMode:this.getGraphMode(e,t),color:this.userData.color,style:this.userData.style,operator:this.getOperator(),isLinear:i,linearCoefficients:s,domainBound:a}}}),define("math/features/getMoveStrategy",["require","parsenodes","math/types"],function(e){function t(e){return{type:"none",inputString:e}}function r(e){return{type:"updateCoordinate",inputString:e}}function n(e,t,r){return{type:"updateSlider",inputString:e,id:t,coefficients:r}}function i(e,t){for(var r in t)if(t[r].evaluationState.assignment===e&&t[r].evaluationState.is_slidable)return r}var a=e("parsenodes"),o=e("math/types"),s=a.Constant(0);a.Base.prototype.getMoveStrategy=function(){},a.Assignment.prototype.getMoveStrategy=function(e,t,r){return this._expression instanceof a.OrderedPair&&(!this.userData||this.userData.shouldGraph!==!1)?this._expression.getMoveStrategy(e,t,r):void 0},a.OrderedPair.prototype.getMoveStrategy=function(e,u,c){if(u.valueType===o.Point&&0===u.getDependencies().length&&(!this.userData||this.userData.shouldGraph!==!1)){for(var l=[],h=!1,f=0;2>f;f++){var p=this.args[f],m=p.getInputString();if(p.isConstant)l[f]=r(m);else if(h)l[f]=t(m);else{for(var d=p.getDependencies(),g=this.args[0===f?1:0],y=d.length-1;y>=0;y--){var v=d[y],b=i(v,c);if(void 0!==b){var x=Object.create(e);x[v]=a.FreeVariable(v);var _=p.tryGetConcreteTree(x);if(!_.isError){var w=_.polynomialOrder(v);if(1===w){var M=_.getPolynomialCoefficients(v),T=M[1]?M[1].getConcreteTree(x):s,E=M[0]?M[0].getConcreteTree(x):s;if(E.isConstant&&T.isConstant&&isFinite(E.constantValue)&&isFinite(T.constantValue)&&0!==T.constantValue){var S=g.tryGetConcreteTree(x);if(!S.isError){var N=S.polynomialOrder(v);if(N>0){if(1===f&&"none"!==l[0].type)continue;h=!0}var I=[-E.constantValue/T.constantValue,1/T.constantValue];l[f]=n(m,b,I);break}}}}}}l[f]||(l[f]=t(m))}}if("none"!==l[0].type||"none"!==l[1].type)return l}}}),define("math/features/getDefaultDragMode",["require","parsenodes","graphing/dragmode"],function(e){var t=e("parsenodes"),r=e("graphing/dragmode");t.Base.prototype.getMoveStrategy=function(){return r.NONE},t.Assignment.prototype.getDefaultDragMode=function(e){return"none"!==e[0].type&&"none"!==e[1].type?r.XY:"none"!==e[0].type?r.X:"none"!==e[1].type?r.Y:r.NONE},t.OrderedPair.prototype.getDefaultDragMode=function(e){return"updateSlider"===e[0].type&&"updateSlider"===e[1].type?r.XY:"updateSlider"===e[0].type?r.X:"updateSlider"===e[1].type?r.Y:r.NONE}}),define("math/features/tableinfo",["require","parsenodes","math/types"],function(e){var t=e("parsenodes"),r=t.List,n=e("math/types"),i=function(e){return e.replace(/^( |\\\\space)+/,"").replace(/( |\\\\space)+$/,"")};t.Base.prototype.tableInfo=function(e,t){return!1},t.Identifier.prototype.tableInfo=function(e,t){return e.graphableAsBareIdentifier(this._symbol)&&e.validFirstColumnVariable(this._symbol)?{independent_variable:this._symbol,dependent_column:this._inputString,by_reference:!1}:!1},t.Expression.prototype.tableInfo=function(e,t){var i=t.getDependencies();switch(t.valueType){case n.Point:case n.ListOfPoint:if(0!==i.length)return!1;if(t.isMovablePoint&&("updateSlider"===t.moveStrategy[0].type||"updateSlider"===t.moveStrategy[1].type))return!1;var a=r.wrap(t).args.map(function(e){return e.asArray()});return{independent_variable:"x",dependent_column:"y",by_reference:!1,values:a};case n.Number:if(1!==i.length)return!1;var o=i[0];return e.validFirstColumnVariable(o)?{independent_variable:o,dependent_column:this._inputString,by_reference:!1}:!1;default:return!1}},t.Assignment.prototype.tableInfo=function(e,r){if(r instanceof t.SolvedEquation)return!1;if(!this._inputString.length)return!1;var n=r.getDependencies();if(n.length>1)return!1;var a;if(0===n.length){if(!e.tableableAsConstant(this._symbol))return!1;a=e.implicitIndependent(this._symbol)}else a=n[0];if(!e.validFirstColumnVariable(a))return!1;var o=i(e.assignmentForbidden(this._symbol)?this._inputString.replace(/[^=]*=/,""):this._inputString.split("=")[0]);return{independent_variable:a,dependent_column:o,by_reference:!e.assignmentForbidden(this._symbol)}},t.FunctionDefinition.prototype.tableInfo=function(e,t){if(1!==this._argSymbols.length)return!1;if(!this._inputString.length)return!1;var r=t.getDependencies();if(r.length>1)return!1;var n=this._argSymbols[0];if(!e.validFirstColumnVariable(n))return!1;var a=e.assignmentForbidden(this._symbol),o=i(a?this._inputString.replace(/[^=]*=/,""):this._inputString.split("=")[0]);return{independent_variable:n,dependent_column:o,by_reference:!a}},t.BaseComparator.prototype.tableInfo=function(e,t){return!1},t.DoubleInequality.prototype.tableInfo=function(e,t){return!1},t.Equation.prototype.tableInfo=function(e,t){return!1}}),define("math/features/tableerror",["require","parsenodes","lib/worker-i18n"],function(e){var t=e("parsenodes"),r=e("lib/worker-i18n");t.Base.prototype.tableError=function(){return this.isInequality()?r.t("Inequalities are not allowed."):!1},t.List.prototype.tableError=function(){return r.t("Lists are not allowed.")},t.Equation.prototype.tableError=t.Assignment.prototype.tableError=function(){return r.t("Equations are not allowed.")},t.FunctionDefinition.prototype.tableError=function(){return r.t("Function definitions are not allowed.")}}),define("math/features/islinear",["require","parsenodes"],function(e){var t=e("parsenodes");t.Base.prototype.isLinear=function(e){return!1},t.Expression.prototype.isLinear=function(e){return this.polynomialOrder(e)<=1},t.SolvedEquation.prototype.isLinear=function(e){return this._expression.isLinear(e)},t.OptimizedRegression.prototype.isLinear=function(e){return this.model.isLinear(e)}}),define("graphing/columnmode",{POINTS:"POINTS",LINES:"LINES",POINTS_AND_LINES:"POINTS_AND_LINES"}),define("math/features/graph",["require","underscore","parsenodes","math/plotter","graphing/graphmode","math/comparators","graphing/columnmode","graphing/dragmode"],function(e){function t(e){for(var t=[],r=[],n=e.length,i=0;n>i;i++)t.push(e[i][0]),r.push(e[i][1]);return{defined:{x:t,y:r}}}function r(e){return Array.prototype.concat.apply([],e)}var n=e("underscore"),i=e("parsenodes"),a=e("math/plotter"),o=e("graphing/graphmode"),s=e("math/comparators"),u=e("graphing/columnmode"),c=e("graphing/dragmode"),l=i.List;i.Base.prototype._graph=function(e,r,i,s){var u,c;switch(s.graphMode){case o.XYPOINT_MOVABLE:return u=[r.asArray()],[{segments:[u],graphMode:s.graphMode,color:this.userData.color,style:this.userData.style,poi:t(u)}];case o.XYPOINT:return u=l.wrap(r).args.map(function(e){return e.asArray()}),[{segments:[u],graphMode:s.graphMode,color:this.userData.color,style:this.userData.style,label:this.userData.label,poi:t(u)}];case o.PARAMETRIC:var h=this.userData;return c=l.wrap(r).args.map(function(e){if(0===e.getDependencies().length)return u=[e.asArray()],{segments:[u],graphMode:o.XYPOINT,color:h.color,style:h.style,poi:t(u)};var r=e.getCompiledFunctions()[0].fn;return s.domain=h.domain,a.computeGraphData(i,s,r)});case o.X:case o.Y:case o.IMPLICIT:case o.POLAR:var f,p=r.getCompiledFunctions();try{f=r.getCompiledDerivatives()}catch(m){}c=[];for(var d=0;d<p.length;d++){var g;r.isList?(g=this.getGraphInfo(e,r.args[d]),g.graphMode=s.graphMode):g=s;var y=f?a.computeGraphData(i,g,p[d].fn,f[d].fn):a.computeGraphData(i,g,p[d].fn);y.compiled=p[d],c.push(n.omit(y,"fillSegments")),g.graphMode===o.IMPLICIT&&"="!==g.operator&&c.push({graphMode:o.POLYGONFILL,segments:y.fillSegments,poi:{}})}return c;default:return!1}},i.Base.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);return this._graph(e,t,r,n)},i.BaseComparator.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t),u=n.graphMode;if(u===o.IMPLICIT)return this._graph(e,t,r,n);if(u===o.NONE)return!1;if(!t instanceof i.SolvedEquation)return!1;var c,l=this.getOperator(),h=t.getCompiledFunctions();try{c=t.getCompiledDerivatives()}catch(f){}var p,m,d=[],g=[-1,0,0,1],y=h.length;for(m=0;y>m;m++){var v=this.getGraphInfo(e,t._expression.args[m]);v.graphMode=u,p=c?a.computeGraphData(r,v,h[m].fn,c[m].fn):a.computeGraphData(r,v,h[m].fn),p.compiled=h[m],p.operator=s.get(s.table[l].inclusive,g[m%4]),d.push(p)}for(m=0;y>m;m+=4){var b=a.polygonsFromSegments(d[m+1].segments,d[m+2].segments,u);d.push({graphMode:o.POLYGONFILL,segments:b,poi:{}})}return d},i.DoubleInequality.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);if(n.graphMode===o.NONE)return!1;var i=[],u=s.get(s.table[this._operators[0]].inclusive,0),c=s.get(s.table[this._operators[1]].inclusive,0),h=this.userData,f=this;return l.eachArgs(t._expressions,function(t){var s,l;t[0].userData=t[1].userData=h,s=f._graph(e,t[0],r,n)[0],s.operator=u,i.push(s),l=f._graph(e,t[1],r,n)[0],l.operator=c,i.push(l);var p=a.polygonsFromSegments(s.segments,l.segments,s.graphMode);i.push({graphMode:o.POLYGONFILL,segments:p,poi:{}})}),i},i.Regression.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);return this._graph(e,t.model,r,n)},i.Table.prototype.isValueDraggable=function(e,t,r){if(!e.columns[t].isIndependent)return!1;var n=this.columns[t],i=n.values,a=i&&i[r];return a&&isFinite(a.constantValue)&&0===a._dependencies.length?!0:!1},i.Table.prototype.graph=function(e,n,i){var a=[];if(n.columns[0].isError)return a;for(var s=n.columns[0],l=s.values,h=1;h<this.columns.length;h++){var f=n.columns[h];if(!f.isError){var p=this.columns[h].header.userData;if(!p.hidden){for(var m=p.columnMode,d=p.dragMode,g=d===c.X||d===c.XY,y=d===c.Y||d===c.XY,v=m===u.POINTS||m===u.POINTS_AND_LINES,b=m===u.LINES||m===u.POINTS_AND_LINES,x=f.isDiscrete(s),_=b&&x,w=b&&!x,M=[],T=[],E=[],S=[],N=[],I=[],C=0;C<l.length;C++){\nvar k=l[C],A=f.values[C];if(k&&A&&isFinite(k.constantValue)&&isFinite(A.constantValue)){if(v){var D=g&&this.isValueDraggable(n,0,C),F=y&&this.isValueDraggable(n,h,C);D||F?(E.push([k.constantValue,A.constantValue]),S.push({index:C,dragX:D,dragY:F})):T.push([k.constantValue,A.constantValue])}_&&I.push([k.constantValue,A.constantValue])}else _&&(I.length>1&&N.push(I),I=[])}if(E.length&&M.push({graphMode:o.XYPOINT_MOVABLE,segments:[E],color:p.color,tableId:p.tableId,poi:t(E),movablePointInfo:S}),T.length&&M.push({segments:[T],graphMode:o.XYPOINT,poi:t(T),color:p.color,style:p.style}),(N.length||I.length)&&(N.push(I),M.push({segments:N.map(r),graphMode:o.PARAMETRIC,poi:[],color:p.color,style:p.style})),w){var P=this.columns[h].header.graph(e,n.columns[h].header,i);P.length&&Array.prototype.push.apply(M,P)}M.length&&(a[p.id]=M)}}}return a}}),define("math/features/elementAt",["require","parsenodes"],function(e){var t=e("parsenodes");t.List.prototype.elementAt=function(e){return e=Math.floor(e),e>=0&&e<this.args.length?this.args[e]:t.Constant(NaN)},t.OrderedPair.prototype.elementAt=function(e){switch(e){case 0:return this.args[0];case 1:return this.args[1];default:return t.Constant(NaN)}}}),define("math/features/printLatex",["require","parsenodes","graphing/label"],function(e){function t(e){switch(e){case">":return"\\\\gt";case"<":return"\\\\lt";case">=":return"\\\\ge";case"<=":return"\\\\le";case"=":return"="}}function r(e){return e.printLatex()}function n(e){return e.isConstant&&e.constantValue===!0}function i(e){return e.isConstant&&e.isNaN()}var a=e("parsenodes"),o=e("graphing/label");a.Identifier.prototype.printLatex=a.FreeVariable.prototype.printLatex=function(){return o.identifierToLatex(this._symbol)},a.Constant.prototype.printLatex=function(){return o.numberToLatex(this.constantValue)},a.Negative.prototype.printLatex=function(){return"-\\\\left("+this.args[0].printLatex()+"\\\\right)"},a.Add.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)+\\\\left("+this.args[1].printLatex()+"\\\\right)"},a.Subtract.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)-\\\\left("+this.args[1].printLatex()+"\\\\right)"},a.Multiply.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)*\\\\left("+this.args[1].printLatex()+"\\\\right)"},a.Divide.prototype.printLatex=function(){return"\\\\frac{"+this.args[0].printLatex()+"}{"+this.args[1].printLatex()+"}"},a.Exponent.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)^{"+this.args[1].printLatex()+"}"},a.Assignment.prototype.printLatex=function(){return o.identifierToLatex(this._symbol)+"="+this._expression.printLatex()},a.Equation.prototype.printLatex=function(){return this._lhs.printLatex()+"="+this._rhs.printLatex()},a.BaseComparator.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)"+t(this.operator)+"\\\\left("+this.args[1].printLatex()+"\\\\right)"},a.DoubleInequality.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)"+t(this.args[1])+this.args[2].printLatex()+t(this.args[3])+"\\\\left("+this.args[4].printLatex()+"\\\\right)"},a.And.prototype.printLatex=function(){if(!(this.args[0]instanceof a.BaseComparator&&this.args[1]instanceof a.BaseComparator))throw new Error("Not implemented");if(this.args[0].args[1].printLatex()!==this.args[1].args[0].printLatex())throw new Error("Not implemented");return"\\\\left("+this.args[0].args[0].printLatex()+"\\\\right)"+t(this.args[0].operator)+"\\\\left("+this.args[0].args[1].printLatex()+"\\\\right)"+t(this.args[1].operator)+"\\\\left("+this.args[1].args[1].printLatex()+"\\\\right)"},a.NativeFunction.prototype.printLatex=a.TypedFunction.prototype.printLatex=a.ReducerFunction.prototype.printLatex=a.ParametrizedReducerFunction.prototype.printLatex=a.DoubleReducerFunction.prototype.printLatex=a.FunctionCall.prototype.printLatex=function(){switch(this._symbol){case"sqrt":return"\\\\sqrt{"+this.args[0].printLatex()+"}";case"nthroot":return"\\\\sqrt["+this.args[1].printLatex()+"]{"+this.args[0].printLatex()+"}";case"logbase":return"\\\\log_{"+this.args[1].printLatex()+"}\\\\left("+this.args[0].printLatex()+"\\\\right)";default:return o.identifierToLatex(this._symbol)+"\\\\left("+this.args.map(r).join(", ")+"\\\\right)"}},a.Prime.prototype.printLatex=function(){switch(this.args[0]._symbol){case"logbase":return"\\\\log_{"+this.args[0].args[1].printLatex()+"}"+Array(this.order+1).join("\'")+"\\\\left("+this.args[0].args[0].printLatex()+"\\\\right)";default:return o.identifierToLatex(this.args[0]._symbol)+Array(this.order+1).join("\'")+"\\\\left("+this.args[0].args.map(r).join(", ")+"\\\\right)"}},a.List.prototype.printLatex=function(){return"\\\\left["+this.args.map(r).join(", ")+"\\\\right]"},a.Range.prototype.printLatex=function(){return"\\\\left["+this.args[0].args.map(r).join(", ")+" ... "+this.args[1].args.map(r).join(", ")+"\\\\right]"},a.ListAccess.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)\\\\left["+this.args[1].printLatex()+"\\\\right]"},a.OrderedPair.prototype.printLatex=function(){return"\\\\left("+this.args.map(r).join(", ")+"\\\\right)"},a.Sum.prototype.printLatex=function(){return"\\\\sum_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)"},a.Product.prototype.printLatex=function(){return"\\\\prod_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)"},a.Integral.prototype.printLatex=function(){return"\\\\int_{"+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)d"+this.args[0].printLatex()},a.FunctionExponent.prototype.printLatex=function(){return this.args[0].printLatex()+"\\\\left("+this.args[1].printLatex()+"\\\\right)^{"+this.args[2].printLatex()+"}"},a.Piecewise.prototype.printLatex=function(){var e=this;if(n(e.args[0]))return e.args[1].printLatex();for(var t=["\\\\left\\\\{"];;){if(n(e.args[0])){t.push(e.args[1].printLatex());break}if(t.push(e.args[0].printLatex(),": "),i(e.args[2])){t.push(e.args[1].printLatex());break}if(t.push(e.args[1].printLatex(),", "),!(e.args[2]instanceof a.Piecewise)){t.push(e.args[2].printLatex());break}e=e.args[2]}return t.push("\\\\right\\\\}"),t.join("")},a.FunctionDefinition.prototype.printLatex=function(){return o.identifierToLatex(this._symbol)+"\\\\left("+this._argSymbols.map(o.identifierToLatex).join(", ")+"\\\\right) = "+this._expression.printLatex()},a.Derivative.prototype.printLatex=function(){return"\\\\frac{d}{d"+o.identifierToLatex(this._symbol)+"}\\\\left("+this.args[0].printLatex()+"\\\\right)"},a.Regression.prototype.printLatex=function(){return"\\\\left("+this._lhs.printLatex()+"\\\\right)\\\\sim\\\\left("+this._rhs.printLatex()+"\\\\right)"}}),define("parser",["require","math/baseparser","math/features/getValueType","math/features/typeCheck","math/features/repr","math/features/scalarEvalExpression","math/features/okForImplicitFunction","math/features/constantcollapsedcopy","math/features/polynomialorder","math/features/polynomialcoefficients","math/features/extractconditions","math/features/bounddomain","math/features/derivative","math/features/substitute","math/features/solve","math/features/analyze","math/features/analyzeFourFunction","math/features/analyzeScientific","math/features/analyzeNeuteredScientific","math/features/getgraphmode","math/features/getgraphinfo","math/features/getMoveStrategy","math/features/getDefaultDragMode","math/features/tableinfo","math/features/tableerror","math/features/islinear","math/features/graph","math/features/elementAt","math/features/printLatex"],function(e){var t=e("math/baseparser");return e("math/features/getValueType"),e("math/features/typeCheck"),e("math/features/repr"),e("math/features/scalarEvalExpression"),e("math/features/okForImplicitFunction"),e("math/features/constantcollapsedcopy"),e("math/features/polynomialorder"),e("math/features/polynomialcoefficients"),e("math/features/extractconditions"),e("math/features/bounddomain"),e("math/features/derivative"),e("math/features/substitute"),e("math/features/solve"),e("math/features/analyze"),e("math/features/analyzeFourFunction"),e("math/features/analyzeScientific"),e("math/features/analyzeNeuteredScientific"),e("math/features/getgraphmode"),e("math/features/getgraphinfo"),e("math/features/getMoveStrategy"),e("math/features/getDefaultDragMode"),e("math/features/tableinfo"),e("math/features/tableerror"),e("math/features/islinear"),e("math/features/graph"),e("math/features/elementAt"),e("math/features/printLatex"),t}),define("math/finddependencyorder",["require","math/builtinframe","underscore"],function(e){function t(e,t,i){function a(e){y[e]=y[e]||{};var r,n=y[e];n.id=e,n.index=v,n.lowlink=v,b.push(n),n.instack=!0,v++;for(var i=t[e].getDependencies(),u=0;u<i.length;u++){var c=i[u];if(m.hasOwnProperty(c))for(var l=m[c],h=0;h<l.length;h++){var f=l[h];y.hasOwnProperty(f)?(r=y[f],r.instack&&(n.lowlink=Math.min(n.lowlink,r.index))):(a(f),r=y[f],n.lowlink=Math.min(n.lowlink,r.lowlink))}}if(n.lowlink===n.index)if(r=b.pop(),r.instack=!1,r===n)o(n);else{for(var p=[r];;)if(r=b.pop(),r.instack=!1,p.push(r),r===n)break;s(p)}}function o(e){x.push(e.id)}function s(r){var i,a,o=[];for(a=r.length-1;a>=0;a--){i=r[a];var s=t[i.id].getLegalExports(e);Array.prototype.push.apply(o,s),o.push(s[0]),x.push(i.id)}for(o=n.unique(o),o.sort(),a=0;a<o.length;a++)g[o[a]]=o}var u,c,l,h,f,p=[],m={},d={},g={},y={},v=0,b=[],x=[];if(!i){i=[];for(u in t)t.hasOwnProperty(u)&&i.push(u)}for(u in t)if(t.hasOwnProperty(u)){for(f=t[u].exportPenalty||0;p.length<f+1;)p.push([]);p[f].push(u)}for(f=0;f<p.length;f++){var _={};for(c=0;c<p[f].length;c++){u=p[f][c];var w=t[u].getLegalExports(e);for(l=0;l<w.length;l++)h=w[l],r[h]||m[h]||(_[h]=_[h]||[],_[h].push(u),_[h].length>1&&(d[h]=!0))}for(h in _)m[h]=_[h]}for(c=0;c<i.length;c++)y.hasOwnProperty(i[c])||a(i[c]);return{resolved:x,multiplyDefined:d,cyclicallyDefined:g}}var r=e("math/builtinframe"),n=e("underscore");return t}),define("math/findIntersections",["require","graphing/graphmode","./poi","./plotter","parsenodes"],function(e){function t(e){for(var t=[],r=0;e>r;r++)t[r]={x:[],y:[],intersects:[]};return t}function r(e,t,r,n){return r===c.X&&n===c.X||r===c.Y&&n===c.Y?function(r){return t(r)-e(r)}:r===c.X&&n===c.Y||r===c.Y&&n===c.X?function(r){return r-t(e(r))}:!1}function n(e){for(var t=e.getCompiledFunctions(),r=[],n=0;n<t.length;n++)r[n]=e instanceof f.SolvedEquation&&e._expression.args[n].isConstant&&e._expression.args[n].isNaN();return{functions:t,skipIntersecting:r}}function i(e,t){var r=[];for(var i in e)if(e.hasOwnProperty(i)&&String(i)!==String(t)&&e[i].shouldIntersect()){var a=e[i],o=n(a.concreteTree);r.push({id:i,graphMode:a.getGraphMode(),functions:o.functions,skipIntersecting:o.skipIntersecting})}return r}function a(e,t){e.intersects=Array(e.x.length);for(var r=0;r<e.x.length;r++)e.intersects[r]=t}function o(e,t){if(t===c.X){var r=e.y;e.y=e.x,e.x=r}}function s(e,t){Array.prototype.push.apply(e.x,t.x),Array.prototype.push.apply(e.y,t.y),Array.prototype.push.apply(e.intersects,t.intersects)}function u(e,u,c){var f=e[c],m=f.getGraphInfo(),d=f.getGraphMode(),g=n(f.concreteTree),y=t(g.functions.length),v=i(e,c);if(!v)return y;for(var b=0,x=0;x<v.length;x++)for(var _=v[x],w=0;w<g.functions.length;w++)if(!g.skipIntersecting[w])for(var M=g.functions[w].fn,T=h.computeDomain(u,m,M),E=0;E<_.functions.length;E++)if(!v[x].skipIntersecting[E]){var S=_.functions[E].fn,N=r(M,S,d,_.graphMode);if(N){var I=l.findIntersections(h.sampleXY(N,T).segments,M,N);if(b+=I.x.length,b>p)return t(g.functions.length);a(I,_.id),o(I,d),s(y[w],I)}}return y}var c=e("graphing/graphmode"),l=e("./poi"),h=e("./plotter"),f=e("parsenodes"),p=100;return u}),define("math/frameScientific",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){function t(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error("Programming Error: key \'"+n+"\' does not exist in table. Must be one of:\\n"+Object.keys(t).join("\\n"))}}function r(e,r,n,i){t(r,i),t(n,i);for(var a=0;a<r.length;a++){var o=r[a];-1===n.indexOf(o)&&(e[o]=i[o])}}var n=e("math/builtinconstants"),i=e("math/parsenode/builtinfunction"),a={},o=["pi","e","trigAngleMultiplier"],s=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","mean","round","stdev","stdevp","nCr","nPr","exp","factorial"];return r(a,o,[],n),r(a,s,[],i),{frame:a,restrictedFunctionsFrame:a}}),define("math/policyFourFunction",["require"],function(e){var t={assignmentForbidden:function(e){return"ans"!==e.slice(0,3)},sliderForbidden:function(e){return!0},sliderVariables:function(){return[]},graphingEnabled:function(){return!1},ansEnabled:function(){return!0},disabledFeatures:function(){return["Sum","Product","Integral","List","Derivative","Piecewise"]}};return t}),define("math/policyScientific",["require"],function(e){var t={assignmentForbidden:function(e){return"tmp"===e.slice(0,3)},sliderForbidden:function(e){return!0},sliderVariables:function(){return[]},graphingEnabled:function(){return!1},ansEnabled:function(){return!0},disabledFeatures:function(){return["Sum","Product","Integral","Derivative","Piecewise"]}};return t}),define("math/policyNeuteredScientific",["require"],function(e){var t={assignmentForbidden:function(e){return"ans"!==e.slice(0,3)},sliderForbidden:function(e){return!0},sliderVariables:function(){return[]},graphingEnabled:function(){return!1},ansEnabled:function(){return!0},disabledFeatures:function(){return["Sum","Product","Integral","Derivative","Piecewise"]}};return t}),define("math/policyGraphing",["require","graphing/graphmode","math/parsenode/builtinfunction"],function(e){var t=e("graphing/graphmode"),r=e("math/parsenode/builtinfunction"),n={assignmentForbidden:function(e){return"x"===e||"y"===e||"theta"===e||"tmp"===e.slice(0,3)||r.hasOwnProperty(e)},sliderForbidden:function(e){return n.assignmentForbidden(e)||"ans"===e.slice(0,3)},sliderVariables:function(e){return-1!==e.indexOf("theta")&&(e=e.filter(function(e){return"r"!==e})),e.filter(function(e){return!n.sliderForbidden(e)})},graphingEnabled:function(){return!0},ansEnabled:function(){return!1},validRegressionParameter:function(e){return"x"!==e&&"y"!==e},validLHS:function(e){return"theta"!==e},unplottablePolarFunction:function(e,t){return"theta"!==e?!1:-1!==t.indexOf("r")},validDoubleInequalitySymbol:function(e){return"x"===e||"y"===e},validDoubleInequalityVariables:function(e){return e.length>2?!1:e.every(n.validDoubleInequalitySymbol)},validExpressionVariable:function(e){return"x"===e},validSolvedVariable:function(e){return"x"===e||"y"===e||"r"===e},validImplicitVariables:function(e){return 2!==e.length?!1:"x"===e[0]&&"y"===e[1]||"y"===e[0]&&"x"===e[1]||"r"===e[0]&&"theta"===e[1]||"theta"===e[0]&&"r"===e[1]},graphableListVariables:function(e,t){return"x"===e||"y"===e||"r"===e||"x"===t||"y"===t},validParametricVariable:function(e){return"t"===e},validParametricVariables:function(e){return 1===e.length&&n.validParametricVariable(e[0])},validInequalityVariables:function(e){switch(e.length){case 1:return"x"===e[0]||"y"===e[0]||"r"===e[0];case 2:return n.validImplicitVariables(e);default:return!1}},validFirstColumnVariable:function(e){return"y"!==e&&"r"!==e&&"theta"!==e&&!e.match(/y_(\\d+)/)},complicatedPolarImplicit:function(e,t){return"theta"===e||"r"===e&&1!==t},constantGraphMode:function(e){return"x"===e?t.X:"r"===e?t.POLAR:t.Y},graphMode:function(e,r){return"y"===r?t.X:"x"===e?t.X:"r"===e&&"theta"===r?t.POLAR:t.Y},tableableAsConstant:function(e){return"x"===e?!1:"r"===e?!1:"theta"===e?!1:!0},implicitIndependent:function(e){return"x"},implicitDependency:function(e){return"y"===e?"x":"theta"===e?"r":"y"},graphableAsConstant:function(e){return"y"===e||"x"===e||"r"===e},graphableAsBareIdentifier:function(e){return"x"===e},disabledFeatures:function(){return[]}};return n}),define("math/frameFourFunction",["require","math/parsenode/builtinfunction"],function(e){var t=e("math/parsenode/builtinfunction");return{frame:{sqrt:t.sqrt},restrictedFunctionsFrame:{sqrt:t.sqrt}}}),define("math/frameGraphing",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){var t,r=e("math/builtinconstants"),n=e("math/parsenode/builtinfunction"),i=["csc","sec","cot","arccsc","arcsec","arccot","csch","sech","coth","arccsch","arcsech","arccoth","mad","cov"],a={},o={};for(t in r)r.hasOwnProperty(t)&&(a[t]=r[t],o[t]=r[t]);for(t in n)n.hasOwnProperty(t)&&(a[t]=n[t],-1===i.indexOf(t)&&(o[t]=n[t]));return{frame:a,restrictedFunctionsFrame:o}}),define("math/context",["require","console","pjs","underscore","./plotter","parser","math/parsenode/constant","math/parsenode/table","math/parsenode/tablecolumn","math/parsenode/freevariable","math/finddependencyorder","math/errormsg","graphing/graphmode","worker/workerconfig","./findIntersections","math/frameScientific","math/policyFourFunction","math/policyScientific","math/policyNeuteredScientific","math/policyGraphing","math/frameFourFunction","math/frameGraphing"],function(e){function t(e,t){return t?v[e].restrictedFunctionsFrame:v[e].frame}var r=e("console"),n=e("pjs"),i=e("underscore"),a=e("./plotter"),o=e("parser"),s=e("math/parsenode/constant"),u=e("math/parsenode/table"),c=e("math/parsenode/tablecolumn"),l=e("math/parsenode/freevariable"),h=e("math/finddependencyorder"),f=e("math/errormsg"),p=e("graphing/graphmode"),m=e("worker/workerconfig"),d=e("./findIntersections"),g=e("math/frameScientific"),y={fourFunction:e("math/policyFourFunction"),scientific:e("math/policyScientific"),neuteredScientific:e("math/policyNeuteredScientific"),graphing:e("math/policyGraphing")},v={fourFunction:e("math/frameFourFunction"),scientific:g,neuteredScientific:g,graphing:e("math/frameGraphing")};return n(function(e){function n(e){return"ans"!==e.slice(0,3)}function g(e,t){var r,i=e.multiplyDefined,a=e.cyclicallyDefined;for(r in i)i.hasOwnProperty(r)&&(t[r]=f.multiplyDefined(r));for(r in a)a.hasOwnProperty(r)&&(t[r]=f.cycle(a[r].filter(n)))}e.triggerGraphComputed=function(){},e.triggerStatusChange=function(){},e.triggerRemoveGraph=function(){},e.triggerRender=function(){},e.triggerRenderSlowly=function(){},e.triggerDidAddStatement=function(){},e.triggerDidRemoveStatement=function(){},e.triggerDidUpdateIntersections=function(){},e.init=function(){this.statements={},this.analysis={},this.currentStatus={},this.unanalyzedIds={},this.unpublishedIds={},this.intersectIds={},this.setEvaluationMode("graphing"),this.setRestrictedFunctions(!1),this.setFunctionDefinition(!0),this.invalidate()},e.processChangeSet=function(e){e.isCompleteState&&(this.invalidate(),this.statements={}),e.viewState&&this.setViewState(e.viewState),e.hasOwnProperty("degreeMode")&&this.setDegreeMode(e.degreeMode),e.hasOwnProperty("evaluationMode")&&this.setEvaluationMode(e.evaluationMode),e.hasOwnProperty("restrictedFunctions")&&this.setRestrictedFunctions(e.restrictedFunctions),e.hasOwnProperty("functionDefinition")&&this.setFunctionDefinition(e.functionDefinition),e.hasOwnProperty("singleVariableSolutions")&&this.setSingleVariableSolutions(e.singleVariableSolutions),e.hasOwnProperty("pointsOfInterest")&&this.setPointsOfInterest(e.pointsOfInterest),e.hasOwnProperty("intersectIds")&&(this.intersectIds=e.intersectIds),this.processStatements(e),this.updateAnalysis(),e.hasOwnProperty("intersectId")&&this._updateIntersections(e.intersectId),this._publishAllStatuses(),this._graphAllChanged(),this.unpublishedIds={},e.isCompleteState?this.triggerRenderSlowly():this.triggerRender()},e.processStatements=function(e){var t;if(e.statements)for(var r in e.statements){var n=e.statements[r];if(null===n){if(!e.isCompleteState&&this.statements.hasOwnProperty(r)&&(t=this.statements[r].getAllIds()),this.removeStatement(r),!e.isCompleteState&&t){for(var i=0;i<t.length;i++)this.triggerRemoveGraph(t[i]);this.triggerDidRemoveStatement(r)}}else this.addStatement(n),e.isCompleteState||this.triggerDidAddStatement(n)}},e.setViewState=function(e){if(!i.isEqual(e,this.viewState)){this.viewState=e;for(var t in this.statements)this.statements.hasOwnProperty(t)&&(this.unpublishedIds[t]=!0)}},e.getViewState=function(){if(this.viewState){var e=Object.create(this.viewState);return this.parent_frame&&this.parent_frame.trigAngleMultiplier?e.trigAngleMultiplier=this.parent_frame.trigAngleMultiplier.constantValue:e.trigAngleMultiplier=1,e}},e.setDegreeMode=function(e){this.use_degrees=e,this.invalidate()},e.setEvaluationMode=function(e){this.evaluationMode=e,this.policy=y[e],this.invalidate()},e.setRestrictedFunctions=function(e){this.restrictedFunctions=e,this.invalidate()},e.setFunctionDefinition=function(e){this.functionDefinition=e,this.invalidate()},e.setSingleVariableSolutions=function(e){e!==m.singleVariableSolutions&&(m.singleVariableSolutions=e,this.invalidate())},e.setPointsOfInterest=function(e){e!==m.pointsOfInterest&&(m.pointsOfInterest=e,this.invalidate())},e._publishAllStatuses=function(){var e={},t=this.currentStatus;this.currentStatus={};for(var r in this.unpublishedIds)if(this.analysis.hasOwnProperty(r)){var n=this.analysis[r].evaluationState;JSON.stringify(n)!==JSON.stringify(t[r])&&(e[r]=n),this.currentStatus[r]=n}this.triggerStatusChange(e)},e._graphAllChanged=function(){var e=this.getViewState();if(a.validateViewState(e)){for(var t in this.unpublishedIds)if(this.analysis.hasOwnProperty(t)){var r=this.analysis[t];if(r.rawTree.isTable)for(var n=r.graph(e),o=r.rawTree.getAllIds(),s=0;s<o.length;s++)n[o[s]]?this.triggerGraphComputed(o[s],n[o[s]]):this.triggerRemoveGraph(o[s]);else r.evaluationState.is_graphable&&r.rawTree.userData.shouldGraph?(this.triggerGraphComputed(t,r.graph(e)),this.intersectIds.hasOwnProperty(t)&&this._updateIntersections(t)):this.triggerRemoveGraph(t)}if(i.keys(this.unpublishedIds).length)for(var u in this.intersectIds)this.unpublishedIds.hasOwnProperty(u)||this.intersectIds.hasOwnProperty(u)&&this._updateIntersections(u)}},e._updateIntersections=function(e){if(this.viewState){if(!this.analysis[e]||!this.analysis[e].shouldIntersect())return void this.triggerDidUpdateIntersections(e,[]);var t=d(this.analysis,this.viewState,e);this.triggerDidUpdateIntersections(e,t)}},e.addStatement=function(e){if(e){var t=e.id;if(this.markDirty(t),"table"===e.type){var r=[];this.statements.hasOwnProperty(t)&&(r=this.statements[t].getAllIds()),e.shouldGraph=!0;for(var n,i,a,l=e.columns,h=[],f=0,p=0;p<l.length;p++)f=Math.max(l[p].values.length,f);for(var m=0;m<l.length;m++){n=o.parse(l[m].latex),i=[];for(var d=-1,g=0;g<l[m].values.length;g++)l[m].values[g].replace(/\\\\space/g,"").match(/\\S/)?(i.push(o.parse(l[m].values[g])),d=g):i.push(s(NaN));i=i.slice(0,d+1),a=c(n,f,i),a.id=l[m].id,a.header&&(a.header.userData=l[m]),h.push(a)}this.statements[t]=u(h);var y=this,v=this.statements[t].getAllIds();r.forEach(function(e){-1===v.indexOf(e)&&y.triggerRemoveGraph(e)})}else{var b,x=this.policy.disabledFeatures();b=this.functionDefinition===!1?x.concat("FunctionDefinition"):x,this.statements[t]=o.parse(e.latex,{index:this.policy.ansEnabled()?e.index:void 0,disabledFeatures:b})}this.statements[t].userData=e,this.markClean(e.id),this.markDirty(e.id)}},e.removeStatement=function(e){if(this.statements.hasOwnProperty(e)){var t=this.statements[e];if(this.markDirty(e),t.isTable){var r=this;t.getAllIds().forEach(function(e){r.triggerRemoveGraph(e)})}else this.triggerRemoveGraph(e);delete this.statements[e]}},e.invalidate=function(){for(var e in this.statements)this.statements.hasOwnProperty(e)&&this.markDirty(e,{});this.currentStatus={},this.parent_frame=Object.create(t(this.evaluationMode,this.restrictedFunctions)),this.parent_frame.trigAngleMultiplier=s(this.use_degrees?Math.PI/180:1),this.frame=Object.create(this.parent_frame),this.lastFrame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)},e.buildSymbolToExpressionDirtyMap=function(){var e,t,r={};for(var n in this.statements)if(this.statements.hasOwnProperty(n)){var i=this.statements[n].getDependencies();for(e=0;e<i.length;e++)t=i[e],r[t]||(r[t]=[]),r[t].push(n);var a=this.statements[n].getExports();for(e=0;e<a.length;e++)t=a[e],r[t]||(r[t]=[]),r[t].push(n)}return r},e.markDirty=function(e,t){if(this.statements[e]&&!this.unanalyzedIds[e]){t||(t=this.buildSymbolToExpressionDirtyMap()),this.unanalyzedIds[e]=!0,this.unpublishedIds[e]=!0,delete this.analysis[e];for(var r=this.statements[e],n=r.getLegalExports(this.policy),i=0;i<n.length;i++)this.markSymbolDirty(n[i],t);if(r.isRegression){var a=this.lastFrame;this.invalidate(),this.lastFrame=a}}},e.markSymbolDirty=function(e,t){delete this.frame[e],delete this.regressionFrame[e];var r=t[e];if(r)for(var n=0;n<r.length;n++)this.markDirty(r[n],t)},e.markClean=function(e){delete this.unanalyzedIds[e]},e.getFrame=function(){return this.updateAnalysis(),this.frame},e.getAnalysis=function(){return this.updateAnalysis(),this.analysis},e.getStatus=function(e){return this.updateAnalysis(),this.analysis[e]?this.analysis[e].status:void 0},e.getEvaluationState=function(e){return this.updateAnalysis(),this.analysis[e]?this.analysis[e].evaluationState:void 0},e._updateRegressions=function(e){var t,r=this.frame,n=this.lastFrame,i=this.regressionFrame,a=[];for(t in e)e.hasOwnProperty(t)&&e[t].isRegression&&a.push(t);var o=this;a.sort(function(e,t){var r=o.statements[e].userData&&o.statements[e].userData.residualVariable,n=o.statements[t].userData&&o.statements[t].userData.residualVariable;return r&&!n?-1:n&&!r?1:0});var s=h(this.policy,e,a);g(s,i);for(var u=s.resolved,c={},l=0;l<u.length;l++)if(t=u[l],this.statements[t].isRegression)this.analysis[t]=e[t].analyze(this.policy,i,r,n,c),this.analysis[t].exportTo(this.policy,r),delete e[t];else{var f=e[t].tryGetConcreteTree(i);e[t].exportTo(this.policy,f,i),c[t]={rawTree:e[t],concreteTree:f}}},e.updateAnalysis=function(){var e,t={};for(e in this.unanalyzedIds)this.unanalyzedIds.hasOwnProperty(e)&&this.statements[e]&&(t[e]=this.statements[e]);"graphing"===this.evaluationMode&&this._updateRegressions(t);var r=this.analysis,n=this.frame,i=h(this.policy,t);g(i,n);for(var a=i.resolved,o=0;o<a.length;o++)switch(e=a[o],this.evaluationMode){case"fourFunction":r[e]=this.statements[e].analyzeFourFunction(this.policy,n,r),r[e].exportTo(this.policy,n);break;case"scientific":r[e]=this.statements[e].analyzeScientific(this.policy,n,r),r[e].exportTo(this.policy,n);break;case"neuteredScientific":r[e]=this.statements[e].analyzeNeuteredScientific(this.policy,n,r),r[e].exportTo(this.policy,n);break;case"graphing":if(n.r){var s=Object.create(n);if(s.r=l("r"),r[e]=this.statements[e].analyze(this.policy,s,r),r[e].getGraphMode()===p.POLAR){r[e].exportTo(this.policy,n);continue}}r[e]=this.statements[e].analyze(this.policy,n,r),r[e].exportTo(this.policy,n)}this.unanalyzedIds={},this.lastFrame=Object.create(this.parent_frame);for(var u in n)n.hasOwnProperty(u)&&(this.lastFrame[u]=n[u])},e.evaluateOnce=function(e){return r.log("Deprecated console.evaluateOnce - this should not run in production code"),this.analysis[e].concreteTree.constantValue},e.compile=function(e){r.log("Deprecated console.compile - this should not run in production code");var t=this.analysis[e].concreteTree.getCompiledFunctions();return 1===t.length?t[0]:t},e.evalStrings=function(e){return r.log("Deprecated console.evalStrings - this should not run in production code"),this.analysis[e].concreteTree.getEvalStrings()}})}),define("worker/workercore",["require","math/context","math/functions"],function(e){var t=e("math/context"),r=e("math/functions");return function(e){var n=t();return n.triggerGraphComputed=function(t,n){r.dehydrateGraphData(n),e("graphComputed",{id:t,graphData:n})},n.triggerDidUpdateIntersections=function(t,r){e("updateIntersections",{id:t,intersections:r})},n.triggerRender=function(){e("render")},n.triggerRenderSlowly=function(){e("renderSlowly")},n.triggerRemoveGraph=function(t){e("removeGraph",t)},n.triggerStatusChange=function(t){e("statusChange",t)},{processChangeSet:function(t){n.processChangeSet(t),e("processChangeSet",t)}}}}),define("worker/worker",["require","worker/workercore","console"],function(e){var t=e("worker/workercore"),r={},n=e("console");n.log=function(e){self.postMessage({log:JSON.stringify(e)})};var i=self;i.window=i,i.onmessage=function(e){var n=e.data&&e.data.connectionId;if(n){var a=r[n];a||(a=t(function(e,t){i.postMessage({connectionId:n,originalMessage:{type:e,payload:t}})}),r[n]=a),a.processChangeSet(e.data.originalMessage)}},i.loadMessageQueue&&i.loadMessageQueue.forEach(function(e){i.onmessage(e)})}),"undefined"==typeof window&&("undefined"==typeof requirejs&&(importScripts("../vendor/require.js"),importScripts("config.js")),self.loadMessageQueue=[],self.onmessage=function(e){self.loadMessageQueue.push(e)},requirejs(["worker/worker"])),define("toplevel/worker",function(){});';
}),define("worker_src",["require","text!worker_src_underlying"],function(e){return e("text!worker_src_underlying")}),define("worker/create_worker_url",["require","worker_src"],function(e){var t=e("worker_src");return function(){if(window.MSBlobBuilder)return null;if(!t.length)return"/assets/js/toplevel/worker.js";var e;try{e=new Blob([t],{type:"application/javascript"})}catch(n){try{var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,r=new i;r.append(t),e=r.getBlob("application/javascript")}catch(s){return null}}var a=window.URL||window.webkitURL;return a.createObjectURL(e)}}),define("math/finddependencyorder",["require","math/builtinframe","underscore"],function(e){function t(e,t,r){function s(e){v[e]=v[e]||{};var n,i=v[e];i.id=e,i.index=y,i.lowlink=y,b.push(i),i.instack=!0,y++;for(var r=t[e].getDependencies(),c=0;c<r.length;c++){var l=r[c];if(f.hasOwnProperty(l))for(var u=f[l],h=0;h<u.length;h++){var d=u[h];v.hasOwnProperty(d)?(n=v[d],n.instack&&(i.lowlink=Math.min(i.lowlink,n.index))):(s(d),n=v[d],i.lowlink=Math.min(i.lowlink,n.lowlink))}}if(i.lowlink===i.index)if(n=b.pop(),n.instack=!1,n===i)a(i);else{for(var p=[n];;)if(n=b.pop(),n.instack=!1,p.push(n),n===i)break;o(p)}}function a(e){_.push(e.id)}function o(n){var r,s,a=[];for(s=n.length-1;s>=0;s--){r=n[s];var o=t[r.id].getLegalExports(e);Array.prototype.push.apply(a,o),a.push(o[0]),_.push(r.id)}for(a=i.unique(a),a.sort(),s=0;s<a.length;s++)g[a[s]]=a}var c,l,u,h,d,p=[],f={},m={},g={},v={},y=0,b=[],_=[];if(!r){r=[];for(c in t)t.hasOwnProperty(c)&&r.push(c)}for(c in t)if(t.hasOwnProperty(c)){for(d=t[c].exportPenalty||0;p.length<d+1;)p.push([]);p[d].push(c)}for(d=0;d<p.length;d++){var x={};for(l=0;l<p[d].length;l++){c=p[d][l];var w=t[c].getLegalExports(e);for(u=0;u<w.length;u++)h=w[u],n[h]||f[h]||(x[h]=x[h]||[],x[h].push(c),x[h].length>1&&(m[h]=!0))}for(h in x)f[h]=x[h]}for(l=0;l<r.length;l++)v.hasOwnProperty(r[l])||s(r[l]);return{resolved:_,multiplyDefined:m,cyclicallyDefined:g}}var n=e("math/builtinframe"),i=e("underscore");return t}),define("math/findIntersections",["require","graphing/graphmode","./poi","./plotter","parsenodes"],function(e){function t(e){for(var t=[],n=0;e>n;n++)t[n]={x:[],y:[],intersects:[]};return t}function n(e,t,n,i){return n===l.X&&i===l.X||n===l.Y&&i===l.Y?function(n){return t(n)-e(n)}:n===l.X&&i===l.Y||n===l.Y&&i===l.X?function(n){return n-t(e(n))}:!1}function i(e){for(var t=e.getCompiledFunctions(),n=[],i=0;i<t.length;i++)n[i]=e instanceof d.SolvedEquation&&e._expression.args[i].isConstant&&e._expression.args[i].isNaN();return{functions:t,skipIntersecting:n}}function r(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)&&String(r)!==String(t)&&e[r].shouldIntersect()){var s=e[r],a=i(s.concreteTree);n.push({id:r,graphMode:s.getGraphMode(),functions:a.functions,skipIntersecting:a.skipIntersecting})}return n}function s(e,t){e.intersects=Array(e.x.length);for(var n=0;n<e.x.length;n++)e.intersects[n]=t}function a(e,t){if(t===l.X){var n=e.y;e.y=e.x,e.x=n}}function o(e,t){Array.prototype.push.apply(e.x,t.x),Array.prototype.push.apply(e.y,t.y),Array.prototype.push.apply(e.intersects,t.intersects)}function c(e,c,l){var d=e[l],f=d.getGraphInfo(),m=d.getGraphMode(),g=i(d.concreteTree),v=t(g.functions.length),y=r(e,l);if(!y)return v;for(var b=0,_=0;_<y.length;_++)for(var x=y[_],w=0;w<g.functions.length;w++)if(!g.skipIntersecting[w])for(var S=g.functions[w].fn,k=h.computeDomain(c,f,S),E=0;E<x.functions.length;E++)if(!y[_].skipIntersecting[E]){var T=x.functions[E].fn,C=n(S,T,m,x.graphMode);if(C){var M=u.findIntersections(h.sampleXY(C,k).segments,S,C);if(b+=M.x.length,b>p)return t(g.functions.length);s(M,x.id),a(M,m),o(v[w],M)}}return v}var l=e("graphing/graphmode"),u=e("./poi"),h=e("./plotter"),d=e("parsenodes"),p=100;return c}),define("math/frameScientific",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){function t(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(!t.hasOwnProperty(i))throw new Error("Programming Error: key '"+i+"' does not exist in table. Must be one of:\n"+Object.keys(t).join("\n"))}}function n(e,n,i,r){t(n,r),t(i,r);for(var s=0;s<n.length;s++){var a=n[s];-1===i.indexOf(a)&&(e[a]=r[a])}}var i=e("math/builtinconstants"),r=e("math/parsenode/builtinfunction"),s={},a=["pi","e","trigAngleMultiplier"],o=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","mean","round","stdev","stdevp","nCr","nPr","exp","factorial"];return n(s,a,[],i),n(s,o,[],r),{frame:s,restrictedFunctionsFrame:s}}),define("math/policyFourFunction",["require"],function(e){var t={assignmentForbidden:function(e){return"ans"!==e.slice(0,3)},sliderForbidden:function(e){return!0},sliderVariables:function(){return[]},graphingEnabled:function(){return!1},ansEnabled:function(){return!0},disabledFeatures:function(){return["Sum","Product","Integral","List","Derivative","Piecewise"]}};return t}),define("math/policyScientific",["require"],function(e){var t={assignmentForbidden:function(e){return"tmp"===e.slice(0,3)},sliderForbidden:function(e){return!0},sliderVariables:function(){return[]},graphingEnabled:function(){return!1},ansEnabled:function(){return!0},disabledFeatures:function(){return["Sum","Product","Integral","Derivative","Piecewise"]}};return t}),define("math/policyNeuteredScientific",["require"],function(e){var t={assignmentForbidden:function(e){return"ans"!==e.slice(0,3)},sliderForbidden:function(e){return!0},sliderVariables:function(){return[]},graphingEnabled:function(){return!1},ansEnabled:function(){return!0},disabledFeatures:function(){return["Sum","Product","Integral","Derivative","Piecewise"]}};return t}),define("math/policyGraphing",["require","graphing/graphmode","math/parsenode/builtinfunction"],function(e){var t=e("graphing/graphmode"),n=e("math/parsenode/builtinfunction"),i={assignmentForbidden:function(e){return"x"===e||"y"===e||"theta"===e||"tmp"===e.slice(0,3)||n.hasOwnProperty(e)},sliderForbidden:function(e){return i.assignmentForbidden(e)||"ans"===e.slice(0,3)},sliderVariables:function(e){return-1!==e.indexOf("theta")&&(e=e.filter(function(e){return"r"!==e})),e.filter(function(e){return!i.sliderForbidden(e)})},graphingEnabled:function(){return!0},ansEnabled:function(){return!1},validRegressionParameter:function(e){return"x"!==e&&"y"!==e},validLHS:function(e){return"theta"!==e},unplottablePolarFunction:function(e,t){return"theta"!==e?!1:-1!==t.indexOf("r")},validDoubleInequalitySymbol:function(e){return"x"===e||"y"===e},validDoubleInequalityVariables:function(e){return e.length>2?!1:e.every(i.validDoubleInequalitySymbol)},validExpressionVariable:function(e){return"x"===e},validSolvedVariable:function(e){return"x"===e||"y"===e||"r"===e},validImplicitVariables:function(e){return 2!==e.length?!1:"x"===e[0]&&"y"===e[1]||"y"===e[0]&&"x"===e[1]||"r"===e[0]&&"theta"===e[1]||"theta"===e[0]&&"r"===e[1]},graphableListVariables:function(e,t){return"x"===e||"y"===e||"r"===e||"x"===t||"y"===t},validParametricVariable:function(e){return"t"===e},validParametricVariables:function(e){return 1===e.length&&i.validParametricVariable(e[0])},validInequalityVariables:function(e){switch(e.length){case 1:return"x"===e[0]||"y"===e[0]||"r"===e[0];case 2:return i.validImplicitVariables(e);default:return!1}},validFirstColumnVariable:function(e){return"y"!==e&&"r"!==e&&"theta"!==e&&!e.match(/y_(\d+)/)},complicatedPolarImplicit:function(e,t){return"theta"===e||"r"===e&&1!==t},constantGraphMode:function(e){return"x"===e?t.X:"r"===e?t.POLAR:t.Y},graphMode:function(e,n){return"y"===n?t.X:"x"===e?t.X:"r"===e&&"theta"===n?t.POLAR:t.Y},tableableAsConstant:function(e){return"x"===e?!1:"r"===e?!1:"theta"===e?!1:!0},implicitIndependent:function(e){return"x"},implicitDependency:function(e){return"y"===e?"x":"theta"===e?"r":"y"},graphableAsConstant:function(e){return"y"===e||"x"===e||"r"===e},graphableAsBareIdentifier:function(e){return"x"===e},disabledFeatures:function(){return[]}};return i}),define("math/frameFourFunction",["require","math/parsenode/builtinfunction"],function(e){var t=e("math/parsenode/builtinfunction");return{frame:{sqrt:t.sqrt},restrictedFunctionsFrame:{sqrt:t.sqrt}}}),define("math/frameGraphing",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){var t,n=e("math/builtinconstants"),i=e("math/parsenode/builtinfunction"),r=["csc","sec","cot","arccsc","arcsec","arccot","csch","sech","coth","arccsch","arcsech","arccoth","mad","cov"],s={},a={};for(t in n)n.hasOwnProperty(t)&&(s[t]=n[t],a[t]=n[t]);for(t in i)i.hasOwnProperty(t)&&(s[t]=i[t],-1===r.indexOf(t)&&(a[t]=i[t]));return{frame:s,restrictedFunctionsFrame:a}}),define("math/context",["require","console","pjs","underscore","./plotter","parser","math/parsenode/constant","math/parsenode/table","math/parsenode/tablecolumn","math/parsenode/freevariable","math/finddependencyorder","math/errormsg","graphing/graphmode","worker/workerconfig","./findIntersections","math/frameScientific","math/policyFourFunction","math/policyScientific","math/policyNeuteredScientific","math/policyGraphing","math/frameFourFunction","math/frameGraphing"],function(e){function t(e,t){return t?y[e].restrictedFunctionsFrame:y[e].frame}var n=e("console"),i=e("pjs"),r=e("underscore"),s=e("./plotter"),a=e("parser"),o=e("math/parsenode/constant"),c=e("math/parsenode/table"),l=e("math/parsenode/tablecolumn"),u=e("math/parsenode/freevariable"),h=e("math/finddependencyorder"),d=e("math/errormsg"),p=e("graphing/graphmode"),f=e("worker/workerconfig"),m=e("./findIntersections"),g=e("math/frameScientific"),v={fourFunction:e("math/policyFourFunction"),scientific:e("math/policyScientific"),neuteredScientific:e("math/policyNeuteredScientific"),graphing:e("math/policyGraphing")},y={fourFunction:e("math/frameFourFunction"),scientific:g,neuteredScientific:g,graphing:e("math/frameGraphing")};return i(function(e){function i(e){return"ans"!==e.slice(0,3)}function g(e,t){var n,r=e.multiplyDefined,s=e.cyclicallyDefined;for(n in r)r.hasOwnProperty(n)&&(t[n]=d.multiplyDefined(n));for(n in s)s.hasOwnProperty(n)&&(t[n]=d.cycle(s[n].filter(i)))}e.triggerGraphComputed=function(){},e.triggerStatusChange=function(){},e.triggerRemoveGraph=function(){},e.triggerRender=function(){},e.triggerRenderSlowly=function(){},e.triggerDidAddStatement=function(){},e.triggerDidRemoveStatement=function(){},e.triggerDidUpdateIntersections=function(){},e.init=function(){this.statements={},this.analysis={},this.currentStatus={},this.unanalyzedIds={},this.unpublishedIds={},this.intersectIds={},this.setEvaluationMode("graphing"),this.setRestrictedFunctions(!1),this.setFunctionDefinition(!0),this.invalidate()},e.processChangeSet=function(e){e.isCompleteState&&(this.invalidate(),this.statements={}),e.viewState&&this.setViewState(e.viewState),e.hasOwnProperty("degreeMode")&&this.setDegreeMode(e.degreeMode),e.hasOwnProperty("evaluationMode")&&this.setEvaluationMode(e.evaluationMode),e.hasOwnProperty("restrictedFunctions")&&this.setRestrictedFunctions(e.restrictedFunctions),e.hasOwnProperty("functionDefinition")&&this.setFunctionDefinition(e.functionDefinition),e.hasOwnProperty("singleVariableSolutions")&&this.setSingleVariableSolutions(e.singleVariableSolutions),e.hasOwnProperty("pointsOfInterest")&&this.setPointsOfInterest(e.pointsOfInterest),e.hasOwnProperty("intersectIds")&&(this.intersectIds=e.intersectIds),this.processStatements(e),this.updateAnalysis(),e.hasOwnProperty("intersectId")&&this._updateIntersections(e.intersectId),this._publishAllStatuses(),this._graphAllChanged(),this.unpublishedIds={},e.isCompleteState?this.triggerRenderSlowly():this.triggerRender()},e.processStatements=function(e){var t;if(e.statements)for(var n in e.statements){var i=e.statements[n];if(null===i){if(!e.isCompleteState&&this.statements.hasOwnProperty(n)&&(t=this.statements[n].getAllIds()),this.removeStatement(n),!e.isCompleteState&&t){for(var r=0;r<t.length;r++)this.triggerRemoveGraph(t[r]);this.triggerDidRemoveStatement(n)}}else this.addStatement(i),e.isCompleteState||this.triggerDidAddStatement(i)}},e.setViewState=function(e){if(!r.isEqual(e,this.viewState)){this.viewState=e;for(var t in this.statements)this.statements.hasOwnProperty(t)&&(this.unpublishedIds[t]=!0)}},e.getViewState=function(){if(this.viewState){var e=Object.create(this.viewState);return this.parent_frame&&this.parent_frame.trigAngleMultiplier?e.trigAngleMultiplier=this.parent_frame.trigAngleMultiplier.constantValue:e.trigAngleMultiplier=1,e}},e.setDegreeMode=function(e){this.use_degrees=e,this.invalidate()},e.setEvaluationMode=function(e){this.evaluationMode=e,this.policy=v[e],this.invalidate()},e.setRestrictedFunctions=function(e){this.restrictedFunctions=e,this.invalidate()},e.setFunctionDefinition=function(e){this.functionDefinition=e,this.invalidate()},e.setSingleVariableSolutions=function(e){e!==f.singleVariableSolutions&&(f.singleVariableSolutions=e,this.invalidate())},e.setPointsOfInterest=function(e){e!==f.pointsOfInterest&&(f.pointsOfInterest=e,this.invalidate())},e._publishAllStatuses=function(){var e={},t=this.currentStatus;this.currentStatus={};for(var n in this.unpublishedIds)if(this.analysis.hasOwnProperty(n)){var i=this.analysis[n].evaluationState;JSON.stringify(i)!==JSON.stringify(t[n])&&(e[n]=i),this.currentStatus[n]=i}this.triggerStatusChange(e)},e._graphAllChanged=function(){var e=this.getViewState();if(s.validateViewState(e)){for(var t in this.unpublishedIds)if(this.analysis.hasOwnProperty(t)){var n=this.analysis[t];if(n.rawTree.isTable)for(var i=n.graph(e),a=n.rawTree.getAllIds(),o=0;o<a.length;o++)i[a[o]]?this.triggerGraphComputed(a[o],i[a[o]]):this.triggerRemoveGraph(a[o]);else n.evaluationState.is_graphable&&n.rawTree.userData.shouldGraph?(this.triggerGraphComputed(t,n.graph(e)),this.intersectIds.hasOwnProperty(t)&&this._updateIntersections(t)):this.triggerRemoveGraph(t)}if(r.keys(this.unpublishedIds).length)for(var c in this.intersectIds)this.unpublishedIds.hasOwnProperty(c)||this.intersectIds.hasOwnProperty(c)&&this._updateIntersections(c)}},e._updateIntersections=function(e){if(this.viewState){if(!this.analysis[e]||!this.analysis[e].shouldIntersect())return void this.triggerDidUpdateIntersections(e,[]);var t=m(this.analysis,this.viewState,e);this.triggerDidUpdateIntersections(e,t)}},e.addStatement=function(e){if(e){var t=e.id;if(this.markDirty(t),"table"===e.type){var n=[];this.statements.hasOwnProperty(t)&&(n=this.statements[t].getAllIds()),e.shouldGraph=!0;for(var i,r,s,u=e.columns,h=[],d=0,p=0;p<u.length;p++)d=Math.max(u[p].values.length,d);for(var f=0;f<u.length;f++){i=a.parse(u[f].latex),r=[];for(var m=-1,g=0;g<u[f].values.length;g++)u[f].values[g].replace(/\\space/g,"").match(/\S/)?(r.push(a.parse(u[f].values[g])),m=g):r.push(o(NaN));r=r.slice(0,m+1),s=l(i,d,r),s.id=u[f].id,s.header&&(s.header.userData=u[f]),h.push(s)}this.statements[t]=c(h);var v=this,y=this.statements[t].getAllIds();n.forEach(function(e){-1===y.indexOf(e)&&v.triggerRemoveGraph(e)})}else{var b,_=this.policy.disabledFeatures();b=this.functionDefinition===!1?_.concat("FunctionDefinition"):_,this.statements[t]=a.parse(e.latex,{index:this.policy.ansEnabled()?e.index:void 0,disabledFeatures:b})}this.statements[t].userData=e,this.markClean(e.id),this.markDirty(e.id)}},e.removeStatement=function(e){if(this.statements.hasOwnProperty(e)){var t=this.statements[e];if(this.markDirty(e),t.isTable){var n=this;t.getAllIds().forEach(function(e){n.triggerRemoveGraph(e)})}else this.triggerRemoveGraph(e);delete this.statements[e]}},e.invalidate=function(){for(var e in this.statements)this.statements.hasOwnProperty(e)&&this.markDirty(e,{});this.currentStatus={},this.parent_frame=Object.create(t(this.evaluationMode,this.restrictedFunctions)),this.parent_frame.trigAngleMultiplier=o(this.use_degrees?Math.PI/180:1),this.frame=Object.create(this.parent_frame),this.lastFrame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)},e.buildSymbolToExpressionDirtyMap=function(){var e,t,n={};for(var i in this.statements)if(this.statements.hasOwnProperty(i)){var r=this.statements[i].getDependencies();for(e=0;e<r.length;e++)t=r[e],n[t]||(n[t]=[]),n[t].push(i);var s=this.statements[i].getExports();for(e=0;e<s.length;e++)t=s[e],n[t]||(n[t]=[]),n[t].push(i)}return n},e.markDirty=function(e,t){if(this.statements[e]&&!this.unanalyzedIds[e]){t||(t=this.buildSymbolToExpressionDirtyMap()),this.unanalyzedIds[e]=!0,this.unpublishedIds[e]=!0,delete this.analysis[e];for(var n=this.statements[e],i=n.getLegalExports(this.policy),r=0;r<i.length;r++)this.markSymbolDirty(i[r],t);if(n.isRegression){var s=this.lastFrame;this.invalidate(),this.lastFrame=s}}},e.markSymbolDirty=function(e,t){delete this.frame[e],delete this.regressionFrame[e];var n=t[e];if(n)for(var i=0;i<n.length;i++)this.markDirty(n[i],t)},e.markClean=function(e){delete this.unanalyzedIds[e]},e.getFrame=function(){return this.updateAnalysis(),this.frame},e.getAnalysis=function(){return this.updateAnalysis(),this.analysis},e.getStatus=function(e){return this.updateAnalysis(),this.analysis[e]?this.analysis[e].status:void 0},e.getEvaluationState=function(e){return this.updateAnalysis(),this.analysis[e]?this.analysis[e].evaluationState:void 0},e._updateRegressions=function(e){var t,n=this.frame,i=this.lastFrame,r=this.regressionFrame,s=[];for(t in e)e.hasOwnProperty(t)&&e[t].isRegression&&s.push(t);var a=this;s.sort(function(e,t){var n=a.statements[e].userData&&a.statements[e].userData.residualVariable,i=a.statements[t].userData&&a.statements[t].userData.residualVariable;return n&&!i?-1:i&&!n?1:0});var o=h(this.policy,e,s);g(o,r);for(var c=o.resolved,l={},u=0;u<c.length;u++)if(t=c[u],this.statements[t].isRegression)this.analysis[t]=e[t].analyze(this.policy,r,n,i,l),this.analysis[t].exportTo(this.policy,n),delete e[t];else{var d=e[t].tryGetConcreteTree(r);e[t].exportTo(this.policy,d,r),l[t]={rawTree:e[t],concreteTree:d}}},e.updateAnalysis=function(){var e,t={};for(e in this.unanalyzedIds)this.unanalyzedIds.hasOwnProperty(e)&&this.statements[e]&&(t[e]=this.statements[e]);"graphing"===this.evaluationMode&&this._updateRegressions(t);var n=this.analysis,i=this.frame,r=h(this.policy,t);g(r,i);for(var s=r.resolved,a=0;a<s.length;a++)switch(e=s[a],this.evaluationMode){case"fourFunction":n[e]=this.statements[e].analyzeFourFunction(this.policy,i,n),n[e].exportTo(this.policy,i);break;case"scientific":n[e]=this.statements[e].analyzeScientific(this.policy,i,n),n[e].exportTo(this.policy,i);break;case"neuteredScientific":n[e]=this.statements[e].analyzeNeuteredScientific(this.policy,i,n),n[e].exportTo(this.policy,i);break;case"graphing":if(i.r){var o=Object.create(i);if(o.r=u("r"),n[e]=this.statements[e].analyze(this.policy,o,n),n[e].getGraphMode()===p.POLAR){n[e].exportTo(this.policy,i);continue}}n[e]=this.statements[e].analyze(this.policy,i,n),n[e].exportTo(this.policy,i)}this.unanalyzedIds={},this.lastFrame=Object.create(this.parent_frame);for(var c in i)i.hasOwnProperty(c)&&(this.lastFrame[c]=i[c])},e.evaluateOnce=function(e){return n.log("Deprecated console.evaluateOnce - this should not run in production code"),this.analysis[e].concreteTree.constantValue},e.compile=function(e){n.log("Deprecated console.compile - this should not run in production code");var t=this.analysis[e].concreteTree.getCompiledFunctions();return 1===t.length?t[0]:t},e.evalStrings=function(e){return n.log("Deprecated console.evalStrings - this should not run in production code"),this.analysis[e].concreteTree.getEvalStrings()}})}),define("worker/workercore",["require","math/context","math/functions"],function(e){var t=e("math/context"),n=e("math/functions");return function(e){var i=t();return i.triggerGraphComputed=function(t,i){n.dehydrateGraphData(i),e("graphComputed",{id:t,graphData:i})},i.triggerDidUpdateIntersections=function(t,n){e("updateIntersections",{id:t,intersections:n})},i.triggerRender=function(){e("render")},i.triggerRenderSlowly=function(){e("renderSlowly")},i.triggerRemoveGraph=function(t){e("removeGraph",t)},i.triggerStatusChange=function(t){e("statusChange",t)},{processChangeSet:function(t){i.processChangeSet(t),e("processChangeSet",t)}}}}),define("worker/fakeworker",["require","worker/workercore"],function(e){var t=e("worker/workercore");return function(e){function n(t,n){e({type:t,payload:n})}var i={},r=t(n);return i.postMessage=function(e){setTimeout(function(){r.processChangeSet(e)},0)},i}}),define("worker/workerpool",["require","console","./create_worker_url","pjs","underscore_model","./fakeworker","underscore"],function(e){var t=e("console"),n=e("./create_worker_url"),i=e("pjs"),r=e("underscore_model"),s=e("./fakeworker"),a=e("underscore"),o=i(r,function(e,i){e.init=function(e){i.init.call(this),this.workers=[],this.maxWorkers=e,this.workerURL=n()},e.allowedToSpawnWorker=function(){return this.workerURL&&this.workers.length<this.maxWorkers},e.killWorker=function(e){var t=a.indexOf(this.workers,e);-1!==t&&(e.terminate(),this.workers=a.without(this.workers,e),a.shuffle(a.values(e.__connections)).forEach(function(e){e&&e.onWorkerKilled&&e.onWorkerKilled()}))},e.spawnWorker=function(){try{var e=new Worker(this.workerURL);return e.__connections={},e.__isFake=!1,e.onerror=function(e){t.log(e)},e.addEventListener("message",function(t){var n=t.data;if((!n||!n.log)&&n&&n.connectionId){var i=e.__connections[n.connectionId];i&&i.onResponse(n.originalMessage)}}),this.workers.push(e),e}catch(n){return null}},e.spawnFakeWorker=function(){var e=s(function(t){a.values(e.__connections)[0].onResponse(t)});return e.__isFake=!0,e.__connections={},e},e.findLeastUsedWorker=function(){var e=function(e){return a.size(e.__connections)},t=a.sortBy(this.workers,e)[0];return t},e.allocateWorker=function(){var e=null;return this.allowedToSpawnWorker()&&(e=this.spawnWorker()),e||(e=this.findLeastUsedWorker()),e||(e=this.spawnFakeWorker()),e}});return o}),define("worker/workerpoolconnection",["require","pjs","underscore_model"],function(e){var t=e("pjs"),n=e("underscore_model"),i=t(n,function(e,t){e.init=function(e){t.init.call(this),this.workerPool=e,this.worker=e.allocateWorker(),this.worker.__connections[this.guid]=this},e.killWorker=function(){this.worker.__isFake||this.workerPool.killWorker(this.worker)},e.onWorkerKilled=function(){},e.onResponse=function(e){},e.sendMessage=function(e){this.worker.__isFake?this.worker.postMessage(e):this.worker.postMessage({connectionId:this.guid,originalMessage:e})}});return i}),define("main/evaluator",["require","math/functions","worker/workerpool","worker/workerpoolconnection","pjs","underscore_model"],function(e){var t=e("math/functions"),n=e("worker/workerpool"),i=e("worker/workerpoolconnection"),r=e("pjs"),s=e("underscore_model"),a=function(e){return void 0!==e?JSON.parse(JSON.stringify(e)):void 0},o=4e3,c=r(s,function(e,r){e.triggerStatusChange=function(e){},e.triggerRemove=function(e){},e.triggerGraphComputed=function(e,t){},e.triggerUpdateIntersections=function(e,t){},e.triggerRender=function(){},e.triggerRenderSlowly=function(){},e.init=function(e,t){r.init.call(this),this.__state={},this.changeSet=null,this.cumulativeChangeSet={},this.clearJobTimer(),this.syncId=1,this.processingDisabled=!1,this.undoRedo=t,e||(e=n()),this.workerPool=e,this.createWorkerPoolConnection(),this.syncRequests=[];var i=this;this.observeEvent("graphComputed",function(e,t){i.triggerGraphComputed(t.id,t.graphData)})},e.createWorkerPoolConnection=function(){this.workerPoolConnection&&(this.workerPoolConnection.onResponse=function(){},this.workerPoolConnection.onWorkerKilled=function(){}),this.workerPoolConnection=i(this.workerPool);var e=this;this.workerPoolConnection.onResponse=function(t){e.isSuspended()&&"processChangeSet"!==t.type||e.undoRedo.silent(function(){e.listeners[t.type].call(e,t.payload)})},this.workerPoolConnection.onWorkerKilled=function(){e.createWorkerPoolConnection(),e.resume(),e.hasJobInWorker()?(e.changeSet=a(e.cumulativeChangeSet),e.__state.changed=!0,e.__state.droppedMessage=!0,e.clearJobTimer()):(e.changeSet=a(e.cumulativeChangeSet),e.__state.changed=!1),e.processChangeSet()}},e.listeners={},e.listeners.processChangeSet=function(e){for(var t=e.syncId;this.syncRequests.length&&this.syncRequests[0].id<=t;){var n=this.syncRequests.shift();n.callback()}this.resume(),this.__state.droppedMessage=!1,this.clearJobTimer(),this.processChangeSet()},e.listeners.removeGraph=function(e){this.triggerRemove(e)},e.listeners.graphComputed=function(e){t.rehydrateGraphData(e.graphData),this.triggerEvent("graphComputed",e)},e.listeners.updateIntersections=function(e){this.triggerUpdateIntersections(e.id,e.intersections)},e.listeners.statusChange=function(e){this.triggerStatusChange(e)},e.listeners.render=function(){this.triggerRender()},e.listeners.renderSlowly=function(){this.triggerRenderSlowly()},e._disableProcessing=function(){this.processingDisabled=!0},e._enableProcessing=function(){this.processingDisabled=!1,this.processChangeSet()},e.batch=function(e){var t=this.processingDisabled;this._disableProcessing();try{e()}finally{t||this._enableProcessing()}},e.isSuspended=function(){return this.__isSuspended},e.suspend=function(){this.__isSuspended=!0},e.resume=function(){this.__isSuspended=!1},e.clearJobTimer=function(){this.__jobStartTime=-1},e.startJobTimer=function(){this.__jobStartTime=(new Date).getTime()},e.hasJobInWorker=function(){return-1!==this.__jobStartTime},e.getJobElapsedTime=function(){return this.hasJobInWorker()?(new Date).getTime()-this.__jobStartTime:NaN},e.processChangeSet=function(){if(!this.processingDisabled){this.__state.changed&&this.changeSet&&this.changeSet.isCompleteState&&this.hasJobInWorker()&&this.suspend();var e=this.getJobElapsedTime()>=o;if(this.__state.droppedMessage&&e)return void this.workerPoolConnection.killWorker();if(this.__state.changed&&this.changeSet)if(this.hasJobInWorker())this.changeSet.isCompleteState&&e&&this.workerPoolConnection.killWorker();else{var t=this.changeSet;this.changeSet=null,this.__state.changed=!1,this.startJobTimer(),this.workerPoolConnection.sendMessage(t)}}},e.applyToChangeSets=function(e){this.__state.changed=!0,this.changeSet||(this.changeSet={}),this.cumulativeChangeSet||(this.cumulativeChangeSet={});var t=this;this.batch(function(){e(t.changeSet),e(t.cumulativeChangeSet),t.processChangeSet()})},e.setViewState=function(e){this.applyToChangeSets(function(t){t.viewState=a(e)})},e.markAsCompleteState=function(){this.applyToChangeSets(function(e){e.isCompleteState=!0})},e.addStatement=function(e){this.applyToChangeSets(function(t){t.statements||(t.statements={}),t.statements[e.id]=a(e)})},e.addStatements=function(e){var t=this;this.batch(function(){for(var n=0;n<e.length;n++)t.addStatement(e[n])})},e.removeStatement=function(e){this.applyToChangeSets(function(t){t.statements||(t.statements={}),t.statements[e]=null})},e.removeStatements=function(e){var t=this;this.batch(function(){for(var n=0;n<e.length;n++)t.removeStatement(e[n])})},e.setIntersectIds=function(e){this.applyToChangeSets(function(t){t.intersectIds=a(e)})},e.updateIntersections=function(e){this.applyToChangeSets(function(t){t.intersectId=e})},e.setDegreeMode=function(e){this.applyToChangeSets(function(t){t.degreeMode=e})},e.setEvaluationMode=function(e){this.applyToChangeSets(function(t){t.evaluationMode=e})},e.setRestrictedFunctions=function(e){this.applyToChangeSets(function(t){t.restrictedFunctions=e})},e.setFunctionDefinition=function(e){this.applyToChangeSets(function(t){t.functionDefinition=e})},e.setSingleVariableSolutions=function(e){this.applyToChangeSets(function(t){t.singleVariableSolutions=e})},e.setPointsOfInterest=function(e){this.applyToChangeSets(function(t){t.pointsOfInterest=e})},e.notifyWhenSynced=function(e){this.syncId++,this.syncRequests.push({id:this.syncId,callback:e});var t=this;this.applyToChangeSets(function(e){e.syncId=t.syncId})}});return c}),define("graphing/viewport",["require"],function(e){function t(e,t,n,i){this.xmin=void 0!==e?e:-10,this.xmax=void 0!==t?t:10,this.ymin=void 0!==n?n:-10,this.ymax=void 0!==i?i:10}return t.prototype.toObject=function(){return{xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax}},t.fromObject=function(e){return new t(e.xmin,e.xmax,e.ymin,e.ymax)},t.prototype.equals=function(e){return this.xmin!==e.xmin?!1:this.ymin!==e.ymin?!1:this.xmax!==e.xmax?!1:this.ymax!==e.ymax?!1:!0},t.prototype.isXValid=function(){return this.xmin*(1-1e-8)+1e-8*this.xmax>this.xmin},t.prototype.isYValid=function(){return this.ymin*(1-1e-8)+1e-8*this.ymax>this.ymin},t.prototype.isValid=function(){return this.isXValid()&&this.isYValid()},t.prototype.isSquare=function(e){return Math.abs(e.height-e.width*this.aspectRatio())<1},t.prototype.aspectRatio=function(){return(this.ymax-this.ymin)/(this.xmax-this.xmin)},t.prototype.squareXAxis=function(e){var n=this.xmax-this.xmin,i=this.ymax-this.ymin,r=this.xmin+n/2,s=i/e.height*e.width;return new t(r-s/2,r+s/2,this.ymin,this.ymax)},t.prototype.squareYAxis=function(e){var n=this.xmax-this.xmin,i=this.ymax-this.ymin,r=this.ymin+i/2,s=n/e.width*e.height;return new t(this.xmin,this.xmax,r-s/2,r+s/2)},t.prototype.squareCrop=function(e){var t=this.aspectRatio()>e.height/e.width;return t?this.squareYAxis(e):this.squareXAxis(e)},t.prototype.polarDiameter=function(){var e=Math.abs(this.xmax),t=Math.abs(this.xmin),n=Math.abs(this.ymax),i=Math.abs(this.ymin);return 1.5*Math.max(e,t,n,i)},t.prototype.largestR=function(){return Math.sqrt(Math.pow(Math.max(-this.xmin,this.xmax),2)+Math.pow(Math.max(-this.ymin,this.ymax),2))},t.prototype.smallestR=function(){return this.xmin<=0&&this.xmax>=0&&this.ymin<=0&&this.ymax>=0?0:this.xmin<=0&&this.xmax>=0?Math.min(Math.abs(this.ymin),Math.abs(this.ymax)):this.ymin<=0&&this.ymax>=0?Math.min(Math.abs(this.xmin),Math.abs(this.xmax)):Math.sqrt(Math.pow(Math.max(this.xmin,-this.xmax),2)+Math.pow(Math.max(this.ymin,-this.ymax),2))},t}),define("graphing/screen",["require"],function(e){function t(e,t){return this.width=e,this.height=t,this}return t}),define("graphing/axisarrowmode",{NONE:"NONE",POSITIVE:"POSITIVE",BOTH:"BOTH"}),define("main/font_sizes",{VERY_SMALL:9,SMALL:12,MEDIUM:16,LARGE:20,VERY_LARGE:24}),define("main/graph_settings",["require","pjs","underscore","underscore_model","graphing/axisarrowmode","main/font_sizes","console"],function(e){var t=e("pjs"),n=e("underscore"),i=e("underscore_model"),r=e("graphing/axisarrowmode"),s=e("main/font_sizes"),a=e("console"),o=t(i,function(e,t,c){e.init=function(){function e(e,t,n){function i(){a.setProperty(e,a.projectorMode?n:t)}a.cloneProperties.push(e),a.observe("projectorMode",i),i()}function n(e,t,n,i,r){function s(){var s;s=a.projectorMode?a.highlight?r:i:a.highlight?n:t,a.setProperty(e,s)}a.cloneProperties.push(e),a.observe("projectorMode highlight",s),s()}t.init.call(this),this.stateProperties=[],this.cloneProperties=[],this.config=new i,this.addStateProperty("showGrid",!0),this.addStateProperty("showXAxis",!0),this.addStateProperty("showYAxis",!0),this.addStateProperty("xAxisStep",0),this.addStateProperty("yAxisStep",0),this.addStateProperty("xAxisMinorSubdivisions",0),this.addStateProperty("yAxisMinorSubdivisions",0),this.addStateProperty("xAxisArrowMode",r.NONE),this.addStateProperty("yAxisArrowMode",r.NONE),this.addStateProperty("xAxisLabel",""),this.addStateProperty("yAxisLabel",""),this.addStateProperty("xAxisNumbers",!0),this.addStateProperty("yAxisNumbers",!0),this.addStateProperty("polarMode",!1),this.addStateProperty("polarNumbers",!0),this.addStateProperty("degreeMode",!1),this.addStateProperty("projectorMode",!1),this.addStateProperty("squareAxes",!0),this.computedStepSizes={},this.instanceProperties=[],this.addInstanceProperty("fontSize",s.MEDIUM),this.addInstanceProperty("language","en"),this.labelHangingColor="rgba(150,150,150,1)",this.labelNormalColor="rgba(0,0,0,1)",this.lastChangedAxis="x";var a=this;e("labelSize",14,19),e("majorAxisOpacity",.4,1),e("minorAxisOpacity",.12,.25),e("axisOpacity",1,1),e("axisLineWidth",1.5,2),e("axisLineOffset",.25,0),e("pixelsPerLabel",80,120),n("graphLineWidth",2.5,3,5,6),
n("pointLineWidth",9,11,15,17)},e.addStateProperty=function(e,t){this[e]=t,this.stateProperties.push(e),this.cloneProperties.push(e)},e.addInstanceProperty=function(e,t){this[e]=t,this.instanceProperties.push(e)},c.fromObject=function(e){var t=o();return t.cloneProperties.forEach(function(n){e.hasOwnProperty(n)&&t.setProperty(n,e[n])}),t},e.registerCallbacks=function(e,t,n,i,r){var s=this;this.stateProperties.forEach(function(t){s.observe(t,function(){e.redrawAllLayers()}),s.observe(t,function(){var e=s.getProperty(t),n=s.getOldProperty(t);r.addTransaction({undo:function(){s.setProperty(t,n)},redo:function(){s.setProperty(t,e)}})})}),this.observe("squareAxes",function(){e.viewportController.enforceSquareAxes()}),this.observe("projectorMode",function(){n.toggleClass("dcg-PROJECTOR-MODE",!!s.projectorMode),t&&t.onProjectorModeChange(),e.redrawAllLayers()}),this.observe("degreeMode",function(){i.setDegreeMode(s.degreeMode)}),this.observe("fontSize",function(){n.css("fontSize",s.fontSize+"px")}),this.config.observeAndSync("restrictedFunctions",function(){i.setRestrictedFunctions(s.config.restrictedFunctions)}),this.config.observeAndSync("singleVariableSolutions",function(){i.setSingleVariableSolutions(s.config.singleVariableSolutions)}),this.config.observeAndSync("pointsOfInterest",function(){i.setPointsOfInterest(s.config.pointsOfInterest)})};var l=function(e,t){var i;switch(e){case"xAxisMinorSubdivisions":case"yAxisMinorSubdivisions":i=Math.round(Math.min(Math.max(0,t),5)),t!==i&&a.warn("minorSubdivisions must be an integer between 0 and 5. You provided "+t+", which we changed to "+i+".");break;case"degreeMode":case"projectorMode":case"showGrid":case"showXAxis":case"showYAxis":case"xAxisNumbers":case"yAxisNumbers":case"polarNumbers":i="false"===t?!1:!!t,t!==i&&a.warn(e+" must be a Boolean. You provided "+t+" ("+typeof t+"), which we changed to "+i+" ("+typeof i+").");break;case"xAxisStep":case"yAxisStep":i=parseFloat(t),isFinite(t)||(i=0,a.warn(e+" must be a number. You provided "+t+", which we changed to "+i+"."));break;case"yAxisMinorSubdivisions":i=Math.round(Math.min(Math.max(0,t),5)),t!==i&&a.warn("minorSubdivisions must be an integer between 0 and 5. You provided "+t+", which we changed to "+i+".");break;case"xAxisArrowMode":case"yAxisArrowMode":i=r[t],i!==t&&(i=r.NONE,a.warn("unknown AxisArrowMode. Allowed values are: \n"+n.keys(r).join("\n")));break;case"xAxisLabel":case"yAxisLabel":i=t,"string"!=typeof t&&(i="",a.warn(e+" must be a string. you provided a "+typeof t+"."));break;case"fontSize":i=t,"number"!=typeof t&&(i=parseInt(i,10),a.warn("fontSize must be a number. Attempted to convert "+t+" to "+i+"."));break;case"language":i=t,"string"!=typeof t&&(i="",a.warn(e+" must be a string. you provided a "+typeof t+".")),window.Desmos.supportedLanguages.indexOf(t)<0&&"en"!==t&&(i="en",a.warn(t+" is not currently an available language."));break;default:i=t}return i};e._validateSettings=function(e){var t={},n=!1;for(var i in e)this.stateProperties.indexOf(i)>=0||this.instanceProperties.indexOf(i)>=0?t[i]=l(i,e[i]):(a.warn('Invalid graph setting "'+i+'".'),n=!0);return n&&a.warn("Available graph settings are: \n"+this.stateProperties.join("\n")),t},e.setGraphSettings=function(e){var t=this._validateSettings(e);for(var n in t)t.hasOwnProperty(n)&&this.setProperty(n,t[n])}});return o}),function(e){e.fn.disableTextSelection=function(t){return t&&this.each(function(){e(this).bind("mousedown touchstart",function(){e(document.activeElement).focusout()})}),this.each(function(){e(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})})}}(jQuery),define("jquery.disabletextselection",["jquery"],function(){}),define("graphing/canvaslayer",["require","jquery","pjs","browser","jquery.disabletextselection"],function(e){var t=e("jquery"),n=e("pjs"),i=e("browser");e("jquery.disabletextselection");var r=n(function(e){e.init=function(){this.$=t("<div class='dcg-graph-outer'></div>").css("position","absolute").css("overflow","hidden").disableTextSelection(i.IS_IE),this.canvas_node=t("<canvas class='dcg-graph-inner'></canvas>").css("position","relative").css("display","block").disableTextSelection(i.IS_IE),this.devicePixelRatio=window.devicePixelRatio||1,this.ctx=this.canvas_node[0].getContext("2d"),this.resize(0,0),this.$.append(this.canvas_node)},e.resize=function(e,t,n){n=n||this.devicePixelRatio,(e!==this.width||t!==this.height)&&(this.width=e,this.height=t,this.$.css("width",e+"px").css("height",t+"px"),this.canvas_node.css("width",e+"px").css("height",t+"px").attr("width",e*n).attr("height",t*n),this.ctx=this.canvas_node[0].getContext("2d"),this.ctx.scale(n,n))},e.redraw=function(){}});return r}),define("loadcss!css/poi",function(){}),define("graphing/clipping",[],function(){function e(e){return Math.max(-1e40,Math.min(1e40,e))}var t={TOP:1,BOTTOM:2,LEFT:4,RIGHT:8,ALL:15,X:12,Y:3,POLAR_RADIAN_EQUALITY:1,POLAR_RADIAN_INEQUALITY:2,POLAR_DEGREE_EQUALITY:3,POLAR_DEGREE_INEQUALITY:4,Y_EQUALS:5,X_EQUALS:6,mapSegmentToCanvas:function(e,n,i,r){var s,a,o,c,l,u=[],h=n.xmin,d=n.ymin,p=n.xmax-n.xmin,f=n.ymax-n.ymin,m=i.width,g=i.height,v=m/p,y=-g/f,b=e.length;if(r===t.Y_EQUALS)for(s=0;b>s;s+=2)a=(e[s]-h)*v-.5,o=(e[s+1]-d)*y+g-.5,u.push(a,o);else if(r===t.X_EQUALS)for(s=0;b>s;s+=2)a=(e[s+1]-h)*v-.5,o=(e[s]-d)*y+g-.5,u.push(a,o);else if(r===t.POLAR_RADIAN_EQUALITY)for(s=0;s<e.length;s+=2)c=e[s],l=e[s+1],a=(l*Math.cos(c)-h)*v-.5,o=(l*Math.sin(c)-d)*y+g-.5,u.push(a,o);else if(r===t.POLAR_RADIAN_INEQUALITY)for(s=0;s<e.length;s+=2)c=e[s],l=e[s+1],0>l&&(l=0),a=(l*Math.cos(c)-h)*v-.5,o=(l*Math.sin(c)-d)*y+g-.5,u.push(a,o);else if(r===t.POLAR_DEGREE_EQUALITY)for(s=0;s<e.length;s+=2)c=e[s]*Math.PI/180,l=e[s+1],a=(l*Math.cos(c)-h)*v-.5,o=(l*Math.sin(c)-d)*y+g-.5,u.push(a,o);else if(r===t.POLAR_DEGREE_INEQUALITY)for(s=0;s<e.length;s+=2)c=e[s]*Math.PI/180,l=e[s+1],0>l&&(l=0),a=(l*Math.cos(c)-h)*v-.5,o=(l*Math.sin(c)-d)*y+g-.5,u.push(a,o);return u},clipStrokeEdges:function(e,n){return t.clipFillEdges(e,n,t.ALL,!0)},clipFillEdge:function(e,t,n,i){var r,s=[],a=[].push;i?(h=e[0],d=e[1],r=2,p=t(h,d),p&&s.push(h,d)):(h=e[e.length-2],d=e[e.length-1],r=0,p=t(h,d));for(var o=r;o<e.length;o+=2){var c=h,l=d,u=p,h=e[o],d=e[o+1],p=t(h,d);(p||u)&&(p&&u&&s.push(h,d),p&&!u&&(a.apply(s,n(h,d,c,l)),s.push(h,d)),!p&&u&&a.apply(s,n(c,l,h,d)))}return s},clipFillEdges:function(n,i,r,s){var a=i.xmin,o=i.xmax,c=i.ymin,l=i.ymax,u=function(e,t){return e>=a},h=function(e,t){return o>=e},d=function(e,t){return t>=c},p=function(e,t){return l>=t},f=function(t,n,i,r){t=e(t),n=e(n),i=e(i),r=e(r);var s=r-n;return[a,n+s*(a-t)/(i-t)]},m=function(t,n,i,r){t=e(t),n=e(n),i=e(i),r=e(r);var s=r-n;return[o,n+s*(o-t)/(i-t)]},g=function(t,n,i,r){t=e(t),n=e(n),i=e(i),r=e(r);var s=i-t;return[t+s*(c-n)/(r-n),c]},v=function(t,n,i,r){t=e(t),n=e(n),i=e(i),r=e(r);var s=i-t;return[t+s*(l-n)/(r-n),l]},y=n;return r&t.LEFT&&(y=t.clipFillEdge(n,u,f,s)),r&t.BOTTOM&&(y=t.clipFillEdge(y,d,g,s)),r&t.RIGHT&&(y=t.clipFillEdge(y,h,m,s)),r&t.TOP&&(y=t.clipFillEdge(y,p,v,s)),y},clipAllFillEdges:function(e,n){return t.clipFillEdges(e,n,t.ALL,!1)},computePolarFill:function(e,t,n){var i,r=[],s=e[0],a=s+n,o=[];r.push(o);for(var c=0;c<e.length;c+=2){i=e[c];var l=e[c+1];if(0>l&&(l=0),i>=a){for(o=[],r.push(o),s=e[c-2],a=s;i>=a;)a+=n;c-=4}else o.push(i,l)}if(0===t)for(c=0;c<r.length;c++)r[c].push(0,0);else{var u=n/16,h=t;for(c=0;c<r.length;c++){var d=r[c];for(s=d[0],a=d[d.length-2],i=a;i>s;i-=u)d.push(i,h);d.push(s,h)}}return r},computeCartesianFill:function(e,t){return e=e.slice(),e.push(e[e.length-2],t),e.push(e[0],t),[e]}};return t}),define("graphing/constants",[],function(){return{ANIMATE_ZOOM_DURATION:500,DOUBLETAP_ZOOM:2,ZOOM_FACTOR:1.0625,MAX_DOTTED_SEGMENTS:1e3,STROKE_ALPHA:.7,HIGHLIGHTED_STROKE_ALPHA:1,FILL_ALPHA:.4,POINT_ALPHA:.9,HIGHLIGHTED_POINT_ALPHA:.6,POLAR_ALPHA:.2,POI_ALPHA:.01,OFFSCREEN_RENDER_MARGIN:20}}),define("graphing/dasheddrawer",["require","./constants","math/distance"],function(e){function t(e,t,i){return this.pattern=i,this.replen=this.pattern[0]+this.pattern[1],null!==t&&t/this.replen>n.MAX_DOTTED_SEGMENTS&&(this.pattern[0]=t*this.pattern[0]/this.replen/n.MAX_DOTTED_SEGMENTS,this.pattern[1]=t*this.pattern[1]/this.replen/n.MAX_DOTTED_SEGMENTS),this.pstate=0,this.dstaccum=0,this.px=null,this.py=null,this.ctx=e,this}var n=e("./constants"),i=e("math/distance");return t.getTotalSegmentLength=function(e){if(e.length<4)return 0;for(var t=0,n=e[0],r=e[1],s=2;s<e.length;s+=2){var a=e[s],o=e[s+1];t+=i.hypot(a-n,o-r),n=a,r=o}return t},t.prototype.start=function(e,t){this.ctx.desmos_batching||this.ctx.beginPath(),this.px=e,this.py=t},t.prototype.next=function(e,t){var n=this.pattern[this.pstate],i=Math.sqrt(Math.pow(e-this.px,2)+Math.pow(t-this.py,2));if(i>1e-5){for(;i+this.dstaccum>=n;){var r=e-this.px,s=t-this.py,a=n-this.dstaccum;r*=a/i,s*=a/i,0===this.pstate&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(this.px+r,this.py+s)),this.dstaccum=0,this.px+=r,this.py+=s,this.pstate=1-this.pstate,n=this.pattern[this.pstate],i-=a}0===this.pstate&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(e,t))}this.px=e,this.py=t,this.dstaccum+=i},t.prototype.skip=function(e,t){this.px=e,this.py=t},t.prototype.close=function(){this.ctx.desmos_batching||this.ctx.stroke(),this.pstate=0,this.dstaccum=0,this.px=null,this.py=null},t}),define("graphing/graphslayer",["require","pjs","./clipping","./dasheddrawer","./constants","./viewport","graphing/graphmode"],function(e){var t=e("pjs"),n=e("./clipping"),i=e("./dasheddrawer"),r=e("./constants"),s=e("./viewport"),a=e("graphing/graphmode"),o=function(e){return new s(-3,e.width+3,-3,e.height+3)},c=t(function(e){e.redrawToCtx=function(e,t,n,i){if(void 0===i)throw new Error("Programming Error: missing drawOrder argument to redrawToCtx");i.forEach(function(i){var r=n[i];void 0!==r&&r.visible&&c.drawSketchToCtx(n[i],e,t)})}});return c.eachSegment=function(e,t){for(var n=0;n<e.branches.length;n++)for(var i=e.branches[n],r=0;r<i.segments.length;r++){var s=i.segments[r];t(i,s)}},c.drawSketchToCtx=function(e,t,n){if(e.branches&&e.branches.length){var i=t.lineWidth;t.strokeStyle=e.color,t.fillStyle=e.color,t.lineJoin="round",t.lineCap="round";var s=!!n.settings.takingScreenshot;c.eachSegment(e,function(e,i){(e.graphMode===a.XYPOINT||e.graphMode===a.XYPOINT_MOVABLE&&s)&&c.drawPointsToCtx(t,n,i,e.style)});for(var o=0;o<e.branches.length;o++){var l=e.branches[o];if(l.graphMode!==a.XYPOINT&&l.graphMode!==a.XYPOINT_MOVABLE){t.desmos_batching=!0,t.beginPath();for(var u=0;u<l.segments.length;u++){var h=l.segments[u],d=a.Y;if(l.flip&&(d=a.X),l.graphMode&&(d=l.graphMode),d===a.POLYGONFILL)c.fillPolygonToCtx(t,n,h);else if(d!==a.IMPLICIT){var p=l.operator,f="<"==p||">"==p||"<="==p||">="==p||"\\leq"==p||"\\le"==p||"\\geq"==p||"\\ge"==p,m="<="==p||"<"==p||"\\leq"==p||"\\le"==p;f&&c.fillGraphStrokeToCtx(t,n,h,m,d)}}t.globalAlpha=r.FILL_ALPHA,t.fill(),t.globalAlpha=1,t.desmos_batching=!1}}t.lineWidth=n.settings.graphLineWidth,"dotted"===e.style&&(t.lineWidth=2*n.settings.graphLineWidth),c.eachSegment(e,function(i,r){if(i.graphMode!==a.XYPOINT&&i.graphMode!==a.XYPOINT_MOVABLE){var s=a.Y;i.flip&&(s=a.X),i.graphMode&&(s=i.graphMode);var o=i.operator,l="default";"<"==o||">"==o||"!="==o||"dashed"===e.style?l="dashed":"dotted"===e.style&&(l="dotted"),c.drawGraphStrokeToCtx(t,n,r,l,s,o)}}),t.lineWidth=i}},c.drawGraphStrokeToCtx=function(e,t,s,a,l,u){e.globalAlpha=t.settings.highlight?r.HIGHLIGHTED_STROKE_ALPHA:r.STROKE_ALPHA;var h,d,p=c.getClippingGraphType(l,"="!==u,t.settings),f=n.mapSegmentToCanvas(s,t.viewport,t.screen,p),m=n.clipStrokeEdges(f,o(t.screen));if("dashed"==a){for(d=new i(e,i.getTotalSegmentLength(m),[11,7]),d.start(m[0],m[1]),h=2;h<m.length;h+=2)d.next(m[h],m[h+1]);d.close()}else if("dotted"==a){for(d=t.settings.projectorMode?new i(e,i.getTotalSegmentLength(m),[.1,16]):new i(e,i.getTotalSegmentLength(m),[.1,8]),d.start(m[0],m[1]),h=2;h<m.length;h+=2)d.next(m[h],m[h+1]);d.close()}else{for(e.desmos_batching||e.beginPath(),e.moveTo(m[0],m[1]),h=0;h<m.length;h+=2)e.lineTo(m[h],m[h+1]);e.desmos_batching||e.stroke()}e.globalAlpha=1},c.mapPointToScreen=function(e,t,n){var i=20,r=e.mapx(t)-.5;if(-i>r||r>e.screen.width+i)return null;var s=e.mapy(n)-.5;return-i>s||s>e.screen.height+i?null:{x:r,y:s}},c.drawPointToCtx=function(e,t,n,i,s,a){var o,l=e.lineWidth,u=c.mapPointToScreen(t,n,i);return u?(e.globalAlpha=t.settings.highlight?r.HIGHLIGHTED_POINT_ALPHA:r.POINT_ALPHA,s&&(e.globalAlpha=s),e.globalAlpha=r.POINT_ALPHA,e.desmos_batching||e.beginPath(),"cross"===a?(o=.4*t.settings.pointLineWidth,e.moveTo(u.x-o,u.y-o),e.lineTo(u.x+o,u.y+o),e.moveTo(u.x+o,u.y-o),e.lineTo(u.x-o,u.y+o),e.lineWidth=.3*t.settings.pointLineWidth):"open"===a?(o=.42*t.settings.pointLineWidth,e.moveTo(u.x+o,u.y),e.arc(u.x,u.y,o,0,2*Math.PI,!0),e.closePath(),e.fillStyle="white",e.lineWidth=.25*t.settings.pointLineWidth,e.fill()):(e.moveTo(u.x-.1,u.y-.1),e.lineTo(u.x-.1,u.y+.1),e.lineTo(u.x+.1,u.y+.1),e.lineTo(u.x+.1,u.y-.1)),e.desmos_batching||e.stroke(),e.globalAlpha=1,e.lineWidth=l,!0):!1},c.drawPointsToCtx=function(e,t,n,i){var r=e.lineWidth;e.lineWidth=t.settings.pointLineWidth;for(var s=0;s<n.length;s++)c.drawPointToCtx(e,t,n[s][0],n[s][1],!1,i);e.lineWidth=r},c.fillGraphStrokeToCtx=function(e,t,i,s,l){e.globalAlpha=l===a.POLAR?r.POLAR_ALPHA:r.FILL_ALPHA;var u,h=null,d=null;if(l===a.POLAR){d=n.ALL;var p=s?0:t.viewport.polarDiameter(),f=t.settings.degreeMode?180:2*Math.PI;h=n.computePolarFill(i,p,f)}else l===a.Y?(d=n.Y,u=s?t.viewport.ymin:t.viewport.ymax,h=n.computeCartesianFill(i,u)):l===a.X&&(d=n.X,u=s?t.viewport.xmin:t.viewport.xmax,h=n.computeCartesianFill(i,u));for(var m=o(t.screen),g=0;g<h.length;g++){var v=c.getClippingGraphType(l,!0,t.settings),y=n.mapSegmentToCanvas(h[g],t.viewport,t.screen,v),b=n.clipFillEdges(y,m,d);if(b.length>=6){e.desmos_batching||e.beginPath(),e.moveTo(b[0],b[1]);for(var _=2;_<b.length;_+=2)e.lineTo(b[_],b[_+1]);e.lineTo(b[0],b[1]),e.desmos_batching||e.fill()}}e.globalAlpha=1},c.fillPolygonToCtx=function(e,t,i){e.globalAlpha=r.FILL_ALPHA;var s=o(t.screen),a=n.mapSegmentToCanvas(i,t.viewport,t.screen,n.Y_EQUALS),c=n.clipFillEdges(a,s,n.ALL);if(c.length>=6){e.desmos_batching||e.beginPath(),e.moveTo(c[0],c[1]);for(var l=2;l<c.length;l+=2)e.lineTo(c[l],c[l+1]);e.desmos_batching||e.fill()}e.globalAlpha=1},c.getClippingGraphType=function(e,t,i){switch(e){case a.X:return n.X_EQUALS;case a.IMPLICIT:case a.PARAMETRIC:case a.Y:return n.Y_EQUALS;case a.POLAR:return i.degreeMode?t?n.POLAR_DEGREE_INEQUALITY:n.POLAR_DEGREE_EQUALITY:t?n.POLAR_RADIAN_INEQUALITY:n.POLAR_RADIAN_EQUALITY}},c}),define("graphing/poidotslayer",["require","loadcss!css/poi","pjs","./graphslayer","math/poi","./constants"],function(e){e("loadcss!css/poi");var t=e("pjs"),n=e("./graphslayer"),i=e("math/poi"),r=e("./constants"),s=t(function(e){e.init=function(){this.savedPOI=[]},e.redrawToCtx=function(e,t,n){var r=[];for(var a in n){var o=n[a];if(o.visible){o.showHighlight&&s.drawSketchHighlight(o,e,t);var c=o.getPOI();(o.showPOI||c.length&&c[0].type===i.DEFINITION)&&r.push.apply(r,s.drawPOIs(c,e,"#AAAAAA",t))}}this.savedPOI=r},e.getDrawnPOI=function(){return this.savedPOI}});return s.drawSketchHighlight=function(e,t,i){i.settings.setProperty("highlight",!0),n.drawSketchToCtx(e,t,i),i.settings.setProperty("highlight",!1)},s.drawPOIs=function(e,t,s,a){t.lineWidth=a.settings.pointLineWidth,t.strokeStyle=s||"#AAAAAA",t.fillStyle=s||"#AAAAAA",t.lineJoin="round",t.lineCap="round";var o=t.globalAlpha;t.globalAlpha=r.POI_ALPHA;var c,l,u=[],h=e.length;if(h&&e[0].type===i.DEFINITION)for(c=0;h>c;c++)l=e[c],n.mapPointToScreen(a,l.x,l.y)&&u.push(l);else for(c=0;h>c;c++)l=e[c],n.drawPointToCtx(t,a,l.x,l.y,r.POI_ALPHA)&&u.push(l);return t.globalAlpha=o,u},s}),define("graphing/domlayer",["require","pjs","jquery","browser","jquery.disabletextselection"],function(e){var t=e("pjs"),n=e("jquery"),i=e("browser");e("jquery.disabletextselection");var r=t(function(e){e.init=function(e){this.$=n("<div class='dcg-graph-outer'></div>").css("position","absolute").css("overflow","hidden").disableTextSelection(i.IS_IE),this.dom_node=n("<div></div>").css("position","relative").css("display","block").disableTextSelection(i.IS_IE),this.$root=e,this.$.append(this.dom_node)},e.addGlobalClass=function(e){this.$root.hasClass(e)||this.$root.addClass(e)},e.removeGlobalClass=function(e){this.$root.hasClass(e)&&this.$root.removeClass(e)},e.resize=function(e,t){(e!==this.width||t!==this.height)&&(this.width=e,this.height=t,this.$.css("width",e+"px").css("height",t+"px"),this.dom_node.css("width",e+"px").css("height",t+"px"))},e.redraw=function(){}});return r}),define("graphing/poi",[],function(){function e(e,n,i,r,s){this.x=e,this.y=n,this.type=i,this.sketch=r,this.branch=s,this.id=t++}var t=1;return e.prototype.getTextLabel=function(){var e=this.sketch&&this.sketch.branches[this.branch];return e?e.label||"":""},e.prototype.getGraphMode=function(){return this.sketch.branches[this.branch].graphMode},e.prototype.getCompiledFunction=function(){return this.sketch.branches[this.branch].compiled.fn},e.prototype.isOpen=function(){return this.sketch.openPOI.indexOf(this)>=0},e.prototype.close=function(){var e=this.sketch.openPOI.indexOf(this);return-1===e?!1:(this.sketch.openPOI.splice(e,1),!0)},e.prototype.open=function(){return this.isOpen()?!1:(this.sketch.openPOI.push(this),!0)},e}),define("graphing/automatic-label-placer",["require"],function(e){function t(e,t){var i=e.map(c),a=window.devicePixelRatio||1,o={left:0,top:0,bottom:t.canvas.height/a,right:t.canvas.width/a};i.forEach(function(n,i){n.forEach(function(n,a){n.staticScore+=s(n,o),n.staticScore+=r(n,t),e[i].lastOrientation===n.orientation&&(n.staticScore-=300)})});for(var l=0;l<i.length;l++){var u=n(l,i);i[l]=[u]}return i.map(function(e){return e[0]})}function n(e,t){for(var n=1/0,r=-1,s=t[e],a=0;a<s.length;a++){var o=t[e][a].staticScore,c=i(e,a,t),l=o+c;n>l&&(n=l,r=a)}return s[r]}function i(e,t,n){for(var i=0,r=n[e][t],s=0;s<n.length;s++)s!==e&&(i+=a(r,n[s]));return i}function r(e,t){for(var n=0,i=window.devicePixelRatio||1,r=t.getImageData(e.left*i,e.top*i,e.width*i,e.height*i).data,s=0;s<r.length;s+=4){var a=r[s],o=r[s+1],c=r[s+2],l=r[s+3];180>l&&0===a&&a===o&&o===c||l>0&&(n+=1)}return n/=i*i}function s(e,t){var n=o(e,t);return 10*(e.width*e.height-n)}function a(e,t){var n=0;return t.forEach(function(t){n+=o(e,t)}),n/t.length}function o(e,t){var n=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),i=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n*i}function c(e){var t=10,n=[],i=e.pt_x,r=e.pt_y,s=e.width,a=e.height,o=0,c=10,l=30,u=50;return n.push({left:i+t,top:r-a/2,staticScore:c}),n.push({left:i-(t+s),top:r-a/2,staticScore:l}),n.push({left:i-s/2,top:r-(a+t),staticScore:c}),n.push({left:i-(s+t/2),top:r-(a+t),staticScore:u}),n.push({left:i+t/2,top:r-(a+t),staticScore:o}),n.push({left:i-s/2,top:r+t,staticScore:o}),n.push({left:i-(s+t/2),top:r+t,staticScore:u}),n.push({left:i+t/2,top:r+t,staticScore:o}),n.forEach(function(e,t){e.pt_x=i,e.pt_y=r,e.right=e.left+s,e.bottom=e.top+a,e.width=s,e.height=a,e.orientation=t}),n}return{computePositions:t}}),define("graphing/poilabelslayer",["require","pjs","jquery","underscore","./domlayer","./label","graphing/graphmode","math/poi","./constants","./poi","./automatic-label-placer","config"],function(e){var t=e("pjs"),n=e("jquery"),i=e("underscore"),r=e("./domlayer"),s=e("./label"),a=e("graphing/graphmode"),o=e("math/poi"),c=e("./constants"),l=e("./poi"),u=e("./automatic-label-placer"),h=e("config"),d=t(r,function(e,t){e.init=function(e,i,r){t.init.call(this,e,i,r),this.$labelsLayer=n('<div class="dcg-poi-labels-layer"></div>'),this.$traceLayer=n('<div class="dcg-trace-layer"></div>'),this.cachedLabels={},this.dom_node.append(this.$labelsLayer),this.dom_node.append(this.$traceLayer)},e.renderPOILabels=function(e,t){var n=this.hoveredPOI,i=n?n.sketch:null,r=!1,s=[];for(var a in t){var o=t[a];if(o===i&&(r=!0),o.visible){var c=this.drawOpenPOI(o,e);c.length&&s.push.apply(s,c)}}r||(n=this.hoveredPOI=null),n&&n.sketch.visible?n.isOpen()?this.addGlobalClass("dcg-mouse-over-opened-poi"):(this.drawHoveredPOI(n,e),this.addGlobalClass("dcg-mouse-over-closed-poi")):(this.removeGlobalClass("dcg-mouse-over-closed-poi"),this.removeGlobalClass("dcg-mouse-over-opened-poi")),this.savedPOI=s},e.renderTracePt=function(e){var t=this.traceInfo?this.traceInfo.pt:null;if(t){var n=e.mapx(t.x),i=e.mapy(t.y);if(e.coordsAreOnscreen(n,i,c.OFFSCREEN_RENDER_MARGIN)){var r=new l(t.x,t.y,o.TRACE,this.traceInfo.branchInfo.sketch,this.traceInfo.branchInfo.branch);this.drawTracePt(r,e.viewport,{color:r.sketch.color,x:n,y:i})}}},e.drawTracePt=function(e,t,i){var r=d.getPointLabel(e,t),s=r.is_hole?" dcg-hole":"",a=e.type===o.DEFINITION,c=r.x_label.replace("","<span class='dcg-pi'></span>"),l=r.y_label.replace("","<span class='dcg-pi'></span>"),u="tracept",h=this.cachedLabels[u];h?h.removeClass("dcg-will-remove"):(h=n('<div class="dcg-poi-label dcg-tracept dcg-temp"><div class="dcg-pt"></div><div class="dcg-label"><span class="dcg-label-paren">(</span><span class="x-value"></span>, <span class="y-value"></span><span class="dcg-label-paren">)</span></div></div>'),h.data("id",u),this.$traceLayer.append(h)),h.find(".x-value").html(c),h.find(".y-value").html(l),h.toggleClass("dcg-hole",!!s),h.toggleClass("dcg-real",!!a),h.find(".dcg-pt").css("background-color",i.color),h.find(".dcg-pt").css("border-color",i.color),h.css({left:i.x+"px",top:i.y+"px"})},e.drawSinglePOI=function(e,t,i){var r=d.getPointLabel(e,t),s=r.is_hole,a=e.type===o.DEFINITION,c=r.x_label.replace("","<span class='dcg-pi'></span>"),l=r.y_label.replace("","<span class='dcg-pi'></span>"),u=e.getTextLabel(),h=e.id,p=this.cachedLabels[h];p?p.removeClass("dcg-will-remove"):(p=n('<div class="dcg-poi-label dcg-tracept dcg-poi"><div class="dcg-pt"></div><div class="dcg-label"><span class="pt-value"><span class="dcg-label-paren">(</span><span class="x-value"></span>, <span class="y-value"></span><span class="dcg-label-paren">)</span></span><span class="text-value"></span></div></div>'),p.data("id",h),this.$labelsLayer.append(p)),p.find(".x-value").html(c),p.find(".y-value").html(l),p.find(".text-value").text(u),p.find(".pt-value").toggle(!u),p.find(".text-value").toggle(!!u),p.toggleClass("dcg-hole",!!s),p.toggleClass("dcg-real",!!a),p.toggleClass("dcg-opened",!!i.opened),p.toggleClass("dcg-mouseover",!!i.hovered),p.css({left:i.x+"px",top:i.y+"px"})},e.drawHoveredPOI=function(e,t){var n=t.mapx(e.x),i=t.mapy(e.y);t.coordsAreOnscreen(n,i,c.OFFSCREEN_RENDER_MARGIN)&&this.drawSinglePOI(e,t.viewport,{hovered:!0,x:n,y:i})},e.drawOpenPOI=function(e,t){var n=e.openPOI;if(!n.length)return[];for(var i=[],r=0;r<n.length;r++){var s=n[r],a=t.mapx(s.x),o=t.mapy(s.y);t.coordsAreOnscreen(a,o,c.OFFSCREEN_RENDER_MARGIN)&&(this.drawSinglePOI(s,t.viewport,{opened:!0,x:a,y:o}),i.push(s))}return i},e.positionLabels_old=function(){this.$traceLayer.find(".dcg-label").css({left:10,bottom:12}),this.$labelsLayer.find(".dcg-label").css({left:-17,bottom:15})},e.positionLabels=function(e){var t=this;t.cachedLabels={};var r=this.$.find(".dcg-poi-label").map(function(){var e=n(this),i=e.position(),r=e.find(".dcg-label"),s=e.data("id");return s&&(t.cachedLabels[s]=e),{$label:r,pt_x:i.left,pt_y:i.top,width:r.outerWidth(),height:r.outerHeight(),lastOrientation:r.data("orientation")}}).get();r=i.filter(r,function(e){return e.width>0&&e.height>0});var s=u.computePositions(r,e);s.forEach(function(e,t){var n=r[t].$label;n.css({left:e.left-e.pt_x,top:e.top-e.pt_y}),n.data("orientation",e.orientation)})},e.redraw=function(e,t,n){this.resize(e.screen.width,e.screen.height),this.dom_node.find(".dcg-poi-label").addClass("dcg-will-remove"),this.renderPOILabels(e,t),this.renderTracePt(e),this.dom_node.find(".dcg-will-remove").remove(),h.get("labels")?this.positionLabels(n):this.positionLabels_old()},e.getDrawnPOI=function(){return this.savedPOI||[]}});return d.getPointLabel=function(e,t){var n,i=t.xmax-t.xmin,r=t.ymax-t.ymin,c=e.getGraphMode();if(e.type===o.TRACE){var l=c===a.X,u=l?e.y:e.x,h=e.getCompiledFunction();if(n=s.point(u,i,r,h),l){var d=n[0];n[0]=n[1],n[1]=d}}else n=[s.value(e.x,i),s.value(e.y,r)];var p=n[0].superscript?n[0].mantissa+"<sup>"+n[0].superscript+"</sup>":n[0].string,f=n[1].superscript?n[1].mantissa+"<sup>"+n[1].superscript+"</sup>":n[1].string;return{x:n[0].value,x_label:p,y:n[1].value,y_label:f,is_hole:!isFinite(n[1].value)}},d}),define("graphing/stepnumber",["require","pjs"],function(e){var t=e("pjs"),n=document.createElement("canvas").getContext("2d"),i=t(function(e){e.init=function(e,t){this._label=e,this._fontSize=t,this._layout=this._computeLayout(e,t)},e._computeLayout=function(e,t){var r={};return e.superscript?(r.mantissa_height=t,i.setCtxFontSize(n,r.mantissa_height),r.mantissa_width=n.measureText(e.mantissa).width,r.superscript_height=Math.round(.8*t),i.setCtxFontSize(n,r.superscript_height),r.superscript_width=n.measureText(e.superscript).width,r.mantissa_x=0,r.mantissa_y=t/5,r.superscript_x=r.mantissa_width/2+r.superscript_width/2,r.superscript_y=-t/4,r.top=r.superscript_y-r.superscript_height/2,r.bottom=r.mantissa_y+r.mantissa_height/2,r.left=r.mantissa_x-r.mantissa_width/2,r.right=r.superscript_x+r.superscript_width/2):(r.mantissa_height=t,i.setCtxFontSize(n,t),r.mantissa_width=n.measureText(e.string).width,r.mantissa_x=0,r.mantissa_y=0,r.top=r.mantissa_y-r.mantissa_height/2,r.bottom=r.mantissa_y+r.mantissa_height/2,r.left=r.mantissa_x-r.mantissa_width/2,r.right=r.mantissa_x+r.mantissa_width/2),r},e.getRect=function(){return this.getRectWhenCenteredAt({x:0,y:0})},e.getRectWhenCenteredAt=function(e){return{left:this._layout.left+e.x,right:this._layout.right+e.x,top:this._layout.top+e.y,bottom:this._layout.bottom+e.y}},e.getWidth=function(){return this._layout.right-this._layout.left},e.getHeight=function(){return this._layout.bottom-this._layout.top},e.clampBoundsWithinRect=function(e,t){var n={};return e.x+this._layout.left<t.left?n.x=t.left-this._layout.left:e.x+this._layout.right>t.right?n.x=t.right-this._layout.right:n.x=e.x,e.y+this._layout.top<t.top?n.y=t.top-this._layout.top:e.y+this._layout.bottom>t.bottom?n.y=t.bottom-this._layout.bottom:n.y=e.y,n},e.getValue=function(){return this._label.value},e.getMinusWidth=function(){return this.getValue()<0?(i.setCtxFontSize(n,this._fontSize),n.measureText("-1").width-n.measureText("1").width):0},e.getString=function(){return this._label.superscript?this._label.mantissa+"^"+this._label.superscript:this._label.string},e.drawCenteredAt=function(e,t){var n=t.x,r=t.y;e.save(),i.setCtxFontSize(e,this._fontSize),this._label.superscript?(e.strokeText(this._label.mantissa,this._layout.mantissa_x+n,this._layout.mantissa_y+r),e.strokeText(this._label.superscript,this._layout.superscript_x+n,this._layout.superscript_y+r),e.fillText(this._label.mantissa,this._layout.mantissa_x+n,this._layout.mantissa_y+r),e.fillText(this._label.superscript,this._layout.superscript_x+n,this._layout.superscript_y+r)):(e.strokeText(this._label.string,this._layout.mantissa_x+n,this._layout.mantissa_y+r),e.fillText(this._label.string,this._layout.mantissa_x+n,this._layout.mantissa_y+r)),e.restore()}});return i.setCtxFontSize=function(e,t){e.font=t+"px Arial",e.textAlign="center",e.textBaseline="middle"},i}),define("graphing/computestepsizes",["require","./stepnumber","./label"],function(e){function t(e){return e?{base:10,major:[e,2*e,5*e],minor:[4,4,5]}:r.RATIONAL_STEPS}var n=e("./stepnumber"),i=e("./label"),r={},s=function(e,t,n,i){var r=Math.ceil(e/n),s=Math.floor(t/n),a=1/n;if(!(r>s||s-r>1e4))for(var o=r;s>=o;o++)i(o/a)};return r.RATIONAL_STEPS={base:10,major:[1,2,5],minor:[5,4,5]},r.PI_STEPS={base:10,major:[Math.PI,2*Math.PI,5*Math.PI],minor:[4,4,5]},r.PI_FRAC_STEPS={base:2,major:[Math.PI/3],minor:[3]},r.bestStep=function(e,t){for(var n,i,r,s,a=1/0,o=0;o<t.major.length;o++)n=t.major[o],r=Math.ceil(Math.log(e/n)/Math.log(t.base)),s=n*Math.pow(t.base,r),a>s&&(a=s,i=a/t.minor[o]);return{major:a,minor:i}},r.countStepsInRange=function(e,t,n){return 1+(t-e)/n},r.calculateSpaceBetweenRects=function(e,t){var n,i;return i=e.right<t.left?t.left-e.right:t.right<e.left?e.left-t.right:0,n=e.bottom<t.top?t.top-e.bottom:t.bottom<e.top?e.top-t.bottom:0,Math.max(n,i)},r.estimateMajors=function(e){var t=e.screen.width,n=e.screen.height,i=e.viewport.xmax-e.viewport.xmin,r=e.viewport.ymax-e.viewport.ymin,s=e.settings.pixelsPerLabel;return{majorStepX:s/t*i,majorStepY:s/n*r}},r.cartesian=function(e){var a={},o=Math.abs(e.settings.xAxisStep),c=Math.abs(e.settings.yAxisStep),l=e.viewport.xmax-e.viewport.xmin,u=e.viewport.ymax-e.viewport.ymin,h=i.value(o,l).string.indexOf("")>=0,d=i.value(c,u).string.indexOf("")>=0,p=r.countStepsInRange(e.viewport.xmin,e.viewport.xmax,o),f=r.countStepsInRange(e.viewport.ymin,e.viewport.ymax,c),m=r.estimateMajors(e),g=e.settings.labelSize;if(o&&o!==Math.PI&&p>=3&&100>p){var v=0;s(e.viewport.xmin,e.viewport.xmax,o,function(e){var t=n(i.value(e,l),g);v=Math.max(t.getWidth(),v)}),p*(v+10)<=e.screen.width&&(a.majorStepX=o,3===o||5===o?a.minorStepX=1:a.minorStepX=o/4)}if(c&&c!==Math.PI&&f>=3&&100>f){var y=0;s(e.viewport.ymin,e.viewport.ymax,c,function(e){var t=n(i.value(e,u),g);y=Math.max(t.getHeight(),y)}),f*(y+10)<=e.screen.height&&(a.majorStepY=c,3===c||5===c?a.minorStepY=1:a.minorStepY=c/4)}if(!a.majorStepX){var b;b=h?m.majorStepX>=1?r.PI_STEPS:r.PI_FRAC_STEPS:t(o);var _=r.bestStep(m.majorStepX,b);a.majorStepX=_.major,a.minorStepX=_.minor}if(!a.majorStepY){var x;x=d?m.majorStepY>=1?r.PI_STEPS:r.PI_FRAC_STEPS:t(c);var w=r.bestStep(m.majorStepY,x);a.majorStepY=w.major,a.minorStepY=w.minor}if(o===c){var S=2,k=e.screen.width/l/(e.screen.height/u);k>=1&&S>=k?(a.majorStepX=a.majorStepY,a.minorStepX=a.minorStepY):1>=k&&k>=1/S&&(a.majorStepY=a.majorStepX,a.minorStepY=a.minorStepX)}return e.settings.xAxisMinorSubdivisions>0&&(a.minorStepX=a.majorStepX/e.settings.xAxisMinorSubdivisions),e.settings.yAxisMinorSubdivisions>0&&(a.minorStepY=a.majorStepY/e.settings.yAxisMinorSubdivisions),a},r.polar=function(e){var t=r.estimateMajors(e),n=r.bestStep(t.majorStepX,r.RATIONAL_STEPS),i=r.bestStep(t.majorStepY,r.RATIONAL_STEPS),s=n.major>i.major?n:i;return{majorStepR:s.major,minorStepR:s.minor}},r}),define("graphing/gridlayer",["require","pjs","./stepnumber","./label","./computestepsizes","./axisarrowmode"],function(e){var t=e("pjs"),n=e("./stepnumber"),i=e("./label"),r=e("./computestepsizes"),s=e("./axisarrowmode"),a=t(function(e){e.redrawToCtx=function(e,t,n){t.settings.polarMode?t.settings.setProperty("computedStepSizes",r.polar(t)):t.settings.setProperty("computedStepSizes",r.cartesian(t)),t.settings.showGrid&&(t.settings.polarMode?this.drawPolarGrid(e,t):this.drawCartesianGrid(e,t)),this.drawAxes(e,t,n);var i;t.settings.polarMode?(i=this.drawPolarStepNumbers(e,t),this.drawLabels(e,t,i)):(i=this.drawCartesianStepNumbers(e,t),this.drawLabels(e,t,i))},e.addTextShadow=function(e){e.strokeStyle="white",e.lineWidth=3,e.miterLimit=2},e.drawPolarGrid=function(e,t){e.save();var n=t.settings.computedStepSizes,i=t.settings.minorAxisOpacity,r=t.settings.majorAxisOpacity,s=1-(1-r)/(1-i),a=Math.round(t.mapx(0))-.5,c=Math.round(t.mapy(0))-.5,l=t.screen.height/(t.viewport.ymax-t.viewport.ymin),u=t.screen.width/(t.viewport.xmax-t.viewport.xmin),h=l/u,d=u/l,p=c/h,f=t.viewport.smallestR(),m=t.viewport.largestR(),g=n.minorStepR*Math.max(1,Math.floor(f/n.minorStepR)),v=n.majorStepR*Math.max(1,Math.floor(f/n.majorStepR));e.lineWidth=1,e.strokeStyle="rgba(0, 0 , 0, "+i+")",e.save(),o(g,m,n.minorStepR,function(n){e.beginPath(),e.scale(1,h);var i=t.mapx(n)-a;e.moveTo(a+i,p),e.arc(a,p,i,0,2*Math.PI),e.scale(1,d),e.stroke()}),e.restore();var y=f>0?5:15;o(0,359,y,function(n){if((0!==n&&180!==n||!t.settings.showXAxis)&&(90!==n&&270!==n||!t.settings.showYAxis)){e.beginPath(),e.moveTo(a,c);var i=t.mapx(m*Math.cos(n*Math.PI/180)),r=t.mapy(m*Math.sin(n*Math.PI/180));
e.lineTo(Math.round(i)-.5,Math.round(r)-.5),e.stroke()}}),e.lineWidth=1,e.strokeStyle="rgba(0, 0 , 0, "+s+")",e.save(),o(v,m,n.majorStepR,function(n){e.beginPath(),e.scale(1,h);var i=t.mapx(n)-a;e.moveTo(a+i,p),e.arc(a,p,i,0,2*Math.PI),e.scale(1,d),e.stroke()}),e.restore()},e.drawCartesianGrid=function(e,t){e.save();var n=t.settings.computedStepSizes,i=t.viewport.xmin,r=t.viewport.ymin,s=t.viewport.xmax,a=t.viewport.ymax,c=t.screen.width,l=t.screen.height,u=t.settings.minorAxisOpacity,h=t.settings.majorAxisOpacity;e.lineWidth=1,e.strokeStyle="rgba(0, 0 , 0, "+u+")",o(i,s,n.minorStepX,function(n){if(0!==n||!t.settings.showYAxis){var i=Math.round(t.mapx(n));i!==c&&(e.beginPath(),e.moveTo(i-.5,0),e.lineTo(i-.5,l),e.stroke())}}),o(r,a,n.minorStepY,function(n){if(0!==n||!t.settings.showXAxis){var i=Math.round(t.mapy(n));i!==l&&(e.beginPath(),e.moveTo(0,i-.5),e.lineTo(c,i-.5),e.stroke())}});var d=1-(1-h)/(1-u);e.strokeStyle="rgba(0, 0 , 0, "+d+")",o(i,s,n.majorStepX,function(n){if(0!==n||!t.settings.showYAxis){var i=Math.round(t.mapx(n));i!==c&&(e.beginPath(),e.moveTo(i-.5,0),e.lineTo(i-.5,l),e.stroke())}}),o(r,a,n.majorStepY,function(n){if(0!==n||!t.settings.showXAxis){var i=Math.round(t.mapy(n));i!==l&&(e.beginPath(),e.moveTo(0,i-.5),e.lineTo(c,i-.5),e.stroke())}}),e.restore()},e.drawAxes=function(e,t,n){function i(t,n,i){e.save();var r=Math.PI/12,s=8*Math.max(e.lineWidth,1.5);e.lineJoin="round",e.fillStyle=c,e.strokeStyle=c,e.beginPath(),e.moveTo(t,n),e.lineTo(t+Math.cos(i-r)*s,n+Math.sin(i-r)*s),e.lineTo(t+Math.cos(i+r)*s,n+Math.sin(i+r)*s),e.lineTo(t,n),e.lineTo(t+Math.cos(i-r)*s,n+Math.sin(i-r)*s),e.stroke(),e.fill(),e.restore()}var r=t.settings.axisLineOffset,a=t.settings.axisOpacity.toString(),o="rgba(127,205,230,"+a+")",c="rgba(0,0,0,"+a+")",l=t.settings.xAxisArrowMode,u=t.settings.yAxisArrowMode,h=t.settings.showXAxis,d=t.settings.showYAxis,p=1,f=Math.round(t.mapx(0))-r,m=Math.round(t.mapy(0))-r,g=t.screen.height,v=t.screen.width;d&&(e.lineWidth=t.settings.axisLineWidth*("y"===n?p:1),e.strokeStyle="y"===n?o:c,u===s.BOTH?(e.beginPath(),e.moveTo(f,2*t.settings.axisLineWidth),e.lineTo(f,g-2*t.settings.axisLineWidth),e.stroke(),i(f,g-t.settings.axisLineWidth,3*Math.PI/2),i(f,t.settings.axisLineWidth,Math.PI/2)):u===s.POSITIVE?(e.beginPath(),e.moveTo(f,2*t.settings.axisLineWidth),e.lineTo(f,g),e.stroke(),i(f,t.settings.axisLineWidth,Math.PI/2)):(e.beginPath(),e.moveTo(f,0),e.lineTo(f,g),e.stroke())),h&&(e.lineWidth=t.settings.axisLineWidth*("x"===n?p:1),e.strokeStyle="x"===n?o:c,l===s.BOTH?(e.beginPath(),e.moveTo(2*t.settings.axisLineWidth,m),e.lineTo(v-2*t.settings.axisLineWidth,m),e.stroke(),i(t.settings.axisLineWidth,m,0),i(v-t.settings.axisLineWidth,m,Math.PI)):l===s.POSITIVE?(e.beginPath(),e.moveTo(0,m),e.lineTo(v-2*t.settings.axisLineWidth,m),e.stroke(),i(v-t.settings.axisLineWidth,m,Math.PI)):(e.beginPath(),e.moveTo(0,m),e.lineTo(v,m),e.stroke()))},e.drawPolarStepNumbers=function(e,t){function r(e,n,i){var r=Math.sqrt(e*e-n*n);r>=y&&b>=r&&i.push({x:t.mapx(n),y:t.mapy(r)}),-r>=y&&b>=-r&&i.push({x:t.mapx(n),y:t.mapy(-r)})}function s(e,n,i){var r=Math.sqrt(e*e-n*n);r>=g&&v>=r&&i.push({x:t.mapx(r),y:t.mapy(n)}),-r>=g&&v>=-r&&i.push({x:t.mapx(-r),y:t.mapy(n)})}e.save();var a=t.settings.showGrid,u=t.settings.xAxisNumbers&&t.settings.showXAxis,h=t.settings.yAxisNumbers&&t.settings.showYAxis,d=a&&t.settings.polarNumbers,p=t.settings.computedStepSizes,f=t.viewport.largestR(),m=t.viewport.smallestR(),g=t.viewport.xmin,v=t.viewport.xmax,y=t.viewport.ymin,b=t.viewport.ymax,_=t.screen.width,x=t.screen.height,w={left:3,right:_-3,top:3,bottom:x-3},S=t.settings.labelHangingColor,k=t.settings.labelNormalColor,E=t.settings.labelSize,T=E;e.textAlign="center",e.textBaseline="middle",this.addTextShadow(e),e.font=E.toString()+"px Arial",e.fillStyle=k;var C=t.mapx(0),M=t.mapy(0),P=0>=y&&b>=0,A=0>=g&&v>=0,I=P&&u,q=A&&h,D="";if(!I&&!q&&a){var L,O,N,F,j=Math.abs(C),V=Math.abs(C-_),R=Math.abs(M),$=Math.abs(M-x);V>=j?(L="left",N=j):(L="right",N=V),$>=R?(O="top",F=R):(O="bottom",F=$),u&&h?D=F>=N?L:O:h?D=L:u&&(D=O)}var B={left:0,right:_,top:M-1,bottom:M+1},G={left:C-1,right:C+1,top:0,bottom:x};if(o(0,f,p.majorStepR,function(a){var o=[],c=[],d=[],p=n(i.value(a,f),E),m=p.getRect();switch(a>0?(q&&a>=y&&b>=a&&c.push({x:C-m.right-5,y:t.mapy(a)}),q&&-a>=y&&b>=-a&&c.push({x:C-m.right-5,y:t.mapy(-a)}),I&&a>=g&&v>=a&&o.push({x:t.mapx(a),y:M-m.top+3}),I&&-a>=g&&v>=-a&&o.push({x:t.mapx(-a),y:M-m.top+3})):q&&!u&&a>=y&&b>=a?c.push({x:C-m.right-5,y:t.mapy(a)}):I&&!h&&a>=g&&v>=a&&o.push({x:t.mapx(a),y:M-m.top+3}),D){case"top":s(a,b,d);break;case"bottom":s(a,y,d);break;case"left":r(a,g,d);break;case"right":r(a,v,d)}o.forEach(function(t){t=p.clampBoundsWithinRect(t,w),p.drawCenteredAt(e,t),l(B,p.getRectWhenCenteredAt(t))}),c.forEach(function(t){t=p.clampBoundsWithinRect(t,w),p.drawCenteredAt(e,t),l(G,p.getRectWhenCenteredAt(t))}),d.forEach(function(t){t=p.clampBoundsWithinRect(t,w),p.drawCenteredAt(e,t)})}),d){var z=Math.ceil(m/p.majorStepR),U=Math.floor(f/p.majorStepR),H=Math.ceil((z+U)/2),W=H*p.majorStepR,Y=m>0?15:30;o(0,359,Y,function(n){var r;r=t.settings.degreeMode?n.toString()+"":i.value(n*Math.PI/180,2*Math.PI).string;var s=e.measureText(r).width/2,a=W/1.05,o=a*Math.cos(n*Math.PI/180),l=a*Math.sin(n*Math.PI/180);if(!(g>o||o>v||y>l||l>b)){var u=t.mapx(o),h=t.mapy(l);0===n||180===n?h-=T:(90===n||270===n)&&(u+=s+3);var d=c(u,3+s,_-3-s),p=c(h,3+T,x-3-T);e.fillStyle=S,e.strokeText(r,d,p),e.fillText(r,d,p)}})}return e.restore(),{x:B,y:G}},e.drawLabels=function(e,t,n){var i=t.viewport.xmin,r=t.viewport.xmax,s=t.viewport.ymin,a=t.viewport.ymax,o=t.screen.width,c=t.screen.height,l=(r-i)/o,h=(a-s)/c,d=t.settings.labelNormalColor,p=t.mapx(0),f=t.mapy(0),m=t.settings.labelSize,g=15,v=t.settings.showXAxis&&t.settings.xAxisLabel,y=t.settings.showYAxis&&t.settings.yAxisLabel,b=n.x,_=n.y;if(v&&b){e.save(),e.fillStyle=d;var x;if(e.__xLabelOffset&&t.settings.isViewportTransient&&u(e.__xLabelOffset.xscale,l)&&u(e.__xLabelOffset.yscale,h)&&(x={x:e.__xLabelOffset.x+p,y:e.__xLabelOffset.y+f}),this._setAxisLabelFont(e,v,m),!x){var w=e.measureText(v).width,S=o-w-g,k=m;x=b.bottom+k<c?{x:S,y:b.bottom+k}:{x:S,y:b.top-k/2},e.__xLabelOffset={x:x.x-p,y:x.y-f,xscale:l,yscale:h}}e.strokeText(v,x.x,x.y),e.fillText(v,x.x,x.y),e.restore()}else e.__xLabelPosition=null;if(y&&_){e.save(),e.fillStyle=d;var E;if(e.__yLabelOffset&&t.settings.isViewportTransient&&u(e.__yLabelOffset.xscale,l)&&u(e.__yLabelOffset.yscale,h)&&(E={x:e.__yLabelOffset.x+p,y:e.__yLabelOffset.y+f}),this._setAxisLabelFont(e,y,m),!E){var T=e.measureText(y).width,C=m,M=T+5;if(!this._isShortMathyLabel(y)){var P=T;T=C,C=P,M=.5*T}var A=0+g+C;E=_.left-T>0?{x:_.left-M,y:A}:{x:_.right+T,y:A},e.__yLabelOffset={x:E.x-p,y:E.y-f,xscale:l,yscale:h}}e.translate(E.x,E.y),this._isShortMathyLabel(y)||e.rotate(-Math.PI/2),e.strokeText(y,0,0),e.fillText(y,0,0),e.restore()}else e.__yLabelPosition=null},e._isShortMathyLabel=function(e){return e.trim().match(/^([a-zA-Z]?)\(?([a-zA-Z]?)\)?$/)},e._setAxisLabelFont=function(e,t,n){this.addTextShadow(e),this._isShortMathyLabel(t)?e.font="italic "+Math.round(1.4*n.toString())+"px Times":e.font=Math.round(1.2*n.toString())+"px Arial"},e.drawCartesianStepNumbers=function(e,t){e.save();var r=t.settings.computedStepSizes,s=t.settings.showXAxis,a=t.settings.showYAxis,c=s&&t.settings.xAxisNumbers,u=a&&t.settings.yAxisNumbers,h=t.viewport.xmin,d=t.viewport.xmax,p=t.viewport.ymin,f=t.viewport.ymax,m=t.screen.width,g=t.screen.height,v={left:3,top:3,right:m-3,bottom:g-3},y=t.settings.labelHangingColor,b=t.settings.labelNormalColor,_=t.mapx(0),x=t.mapy(0),w=t.settings.labelSize;this.addTextShadow(e);var S={left:0,right:m,top:x-1,bottom:x+1},k={left:_-1,right:_+1,top:0,bottom:g},E=!1;if(s&&a&&(c||u)){E=!0,e.fillStyle=b;var T=n(i.value(0,1),w);T.drawCenteredAt(e,{x:_-T.getRect().right-5,y:x-T.getRect().top+3})}return c&&o(h,d,r.majorStepX,function(r){var s=n(i.value(r,d-h),w),a={x:t.mapx(s.getValue())-.5*s.getMinusWidth(),y:x-s.getRect().top+5},o=s.clampBoundsWithinRect(a,v);e.fillStyle=a.y===o.y?b:y,"0"===s.getString()&&E||(s.drawCenteredAt(e,o),l(S,s.getRectWhenCenteredAt(o)))}),u&&o(p,f,r.majorStepY,function(r){var s=n(i.value(r,f-p),w),a={x:_-5-s.getRect().right,y:t.mapy(s.getValue())},o=s.clampBoundsWithinRect(a,v);e.fillStyle=a.x===o.x?b:y,"0"===s.getString()&&E||(s.drawCenteredAt(e,o),l(k,s.getRectWhenCenteredAt(o)))}),e.restore(),{x:S,y:k}}}),o=function(e,t,n,i){var r=Math.ceil(e/n),s=Math.floor(t/n);if(isFinite(s-r)&&!(s-r>1e4))for(var a=r;s>=a;a++)i(a*n)},c=function(e,t,n){return t>e?t:e>n?n:e},l=function(e,t){t.left<e.left&&(e.left=t.left),t.right>e.right&&(e.right=t.right),t.top<e.top&&(e.top=t.top),t.bottom>e.bottom&&(e.bottom=t.bottom)},u=function(e,t){var n=Math.abs(e),i=Math.abs(t),r=1e-4;return Math.abs(n-i)<=(i>n?i:n)*r};return a}),define("graphing/graphsketch",["require","math/poi","./poi","math/distance","graphing/graphmode"],function(e){function t(e,t){this.color="#000000",this.style="normal",this.visible=!0,this.showPOI=!1,this.showHighlight=!1,this.selected=!1,this.openPOI=[],this.hiddenOpenPOI=[],this.id=e,this.branches=void 0!==t?t:[]}var n=e("math/poi"),i=e("./poi"),r=e("math/distance"),s=e("graphing/graphmode");return t.prototype.getPOI=function(){if(this.__cachedPOI)return this.__cachedPOI;var e,t;this.__cachedPOI=[];for(var i=0;i<this.branches.length;i++){e=this.branches[i],t=e.graphMode;var r=e.poi;t===s.X||t===s.Y?(this._pushPOI(r.zeros,i,n.ZERO),this._pushPOI(r.intercept,i,n.INTERCEPT),this._pushPOI(r.extrema,i,n.EXTREMUM),this._pushPOI(r.intersections,i,n.INTERSECTION)):(t===s.XYPOINT||t===s.XYPOINT_MOVABLE)&&this._pushPOI(r.defined,i,n.DEFINITION)}return this.__cachedPOI},t.prototype.getStaticPoints=function(){if(this.__cachedStaticPoints)return this.__cachedStaticPoints;this.__cachedStaticPoints=[];for(var e=0;e<this.branches.length;e++)if(this.branches[e].graphMode===s.XYPOINT)for(var t=this.branches[e].segments[0],n=0;n<t.length;n++)this.__cachedStaticPoints.push({id:"static:["+this.id+","+n+"]",sketch:this,color:this.color,x:t[n][0],y:t[n][1]});return this.__cachedStaticPoints},t.prototype.getMovablePoints=function(){if(this.__cachedMovablePoints)return this.__cachedMovablePoints;this.__cachedMovablePoints=[];var e=this.branches[0];if(e&&1===e.segments.length&&e.graphMode===s.XYPOINT_MOVABLE)for(var t=e.segments[0],n=0;n<t.length;n++){var i;e.tableId&&(i={tableId:e.tableId,columnId:this.id,rowIndex:e.movablePointInfo[n].index,dragX:e.movablePointInfo[n].dragX,dragY:e.movablePointInfo[n].dragY}),this.__cachedMovablePoints.push({id:"movable:["+this.id+","+(i?i.rowIndex:"")+"]",sketch:this,color:this.color,tableInfo:i,x:t[n][0],y:t[n][1],isMovable:!0})}return this.__cachedMovablePoints},t.prototype._pushPOI=function(e,t,n){if(e)for(var r=0,s=e.x.length;s>r;r++){var a=new i;a.type=n,a.x=e.x[r],a.y=e.y[r],a.branch=t,a.sketch=this,e.intersects&&(a.intersects=e.intersects[r]),this.__cachedPOI.push(a)}},t.prototype.updateIntersections=function(e){for(var t=0,n=this.branches.length;n>t;t++)this.branches[t].poi.intersections=e[t];this.__cachedPOI=void 0,this.getPOI(),this.reopenPOIFrom(this)},t.prototype.updateFrom=function(e){e&&(this.visible=!0,(e.openPOI.length||e.hiddenOpenPOI.length)&&this.reopenPOIFrom(e),this.showPOI=e.showPOI,this.showHighlight=e.showHighlight,this.selected=e.selected)},t.prototype.reopenPOIFrom=function(e){var t,n,i,s,a,o,c,l,u,h,d,p=[],f=[],m={},g={};for(t=this.getPOI(),h=0;h<t.length;h++)l=t[h],u=l.type,m[u]?m[u].push(l):m[u]=[l];for(t=e.openPOI.concat(e.hiddenOpenPOI),h=0;h<t.length;h++)l=t[h],u=l.type,g[u]?g[u].push(l):g[u]=[l];for(var v in g)for(c=g[v],n=m[v]||[],h=c.length-1;h>=0;h--){for(a=c[h],i=1/0,s=-1,d=n.length-1;d>=0;d--)if(o=n[d],o&&o.intersects===a.intersects){var y=r.hypot(a.x-o.x,a.y-o.y);i>y&&(s=d,i=y)}-1!=s?(n[s].id=a.id,p.push(n[s]),n[s]=null):f.push(a)}this.openPOI=p,this.hiddenOpenPOI=f},t}),define("graphing/imagelayer",["require","pjs","underscore"],function(e){var t=e("pjs"),n=e("underscore"),i=t(function(e){e.redrawToCtx=function(e,t,i,r){(void 0===r||r.length<n.size(i))&&(r=n.keys(i));for(var s=this,a=0;a<r.length;a++){var o=i[r[a]];o&&o.shouldGraph&&s.drawImageToCtx(o,e,t)}},e.drawImageToCtx=function(e,t,n){var i=e.computed_x,r=e.computed_y,s=e.computed_width,a=e.computed_height;if(isFinite(i)&&isFinite(r)&&isFinite(s)&&isFinite(a)){t.save(),t.strokeStyle="#6993C7",t.lineWidth=2,t.globalAlpha=e.opacity;var o=n.mapy(a)-n.mapy(0),c=n.mapx(s)-n.mapx(0),l=n.mapx(i)-c/2,u=n.mapy(r)+o/2,h=0>a?-1:1,d=0>s?-1:1;t.scale(d,h);var p=l*d,f=u*h,m=Math.abs(c),g=Math.abs(o);t.drawImage(e.imageObj,p,f,m,g),e.selected&&(t.beginPath(),t.rect(p,f,m,g),t.stroke()),t.restore()}}});return i}),define("math/recttransformation",["require","pjs"],function(e){var t=e("pjs"),n=t(function(e,t,i){function r(e,t){var n=e-1;return 1+n*n*n===1?t*(1+n*(t-1)*(.5+1/6*n*(t-2))):(Math.pow(e,t)-1)/n}e.init=function(e,t,n,i){this.tx=void 0!==e?e:0,this.ty=void 0!==t?t:0,this.sx=void 0!==n?n:1,this.sy=void 0!==i?i:this.sx},i.scale=function(e,t){return new n(0,0,e,t)},i.translate=function(e,t){return(new n).translate(e,t)},i.scaleAtPoint=function(e,t,i){return void 0===i&&(i=t),new n(e.x*(1-t),e.y*(1-i),t,i)},e.compose=function(e){return new n(this.sx*e.tx+this.tx,this.sy*e.ty+this.ty,this.sx*e.sx,this.sy*e.sy)},e.translate=function(e,t){var i=void 0===t?e.x:t.x-e.x,r=void 0===t?e.y:t.y-e.y;return new n(this.tx+i,this.ty+r,this.sx,this.sy)},e.scale=function(e,t){return n.scale(e,t).compose(this)},e.scaleAtPoint=function(e,t,i){return n.scaleAtPoint(e,t,i).compose(this)},e.inverse=function(){return new n(-this.tx/this.sx,-this.ty/this.sy,1/this.sx,1/this.sy)},e.div=function(e){return new n((this.tx*e.sx-this.sx*e.tx)/e.sx,(this.ty*e.sy-this.sy*e.ty)/e.sy,this.sx/e.sx,this.sy/e.sy)},e.conjugate=function(e){return new n(this.tx*e.sx+e.tx*(1-this.sx),this.ty*e.sy+e.ty*(1-this.sy),this.sx,this.sy)},e.pow=function(e){return new n(this.tx*r(this.sx,e),this.ty*r(this.sy,e),Math.pow(this.sx,e),Math.pow(this.sy,e))},i.fromRects=function(e,t){var i=(t.right-t.left)/(e.right-e.left),r=(t.top-t.bottom)/(e.top-e.bottom);return new n(t.left-i*e.left,t.bottom-r*e.bottom,i,r)},e.mapX=function(e){return this.sx*e+this.tx},e.mapY=function(e){return this.sy*e+this.ty},e.mapPoint=function(e){return{x:this.mapX(e.x),y:this.mapY(e.y)}},e.mapRect=function(e){return{left:this.mapX(e.left),right:this.mapX(e.right),bottom:this.mapY(e.bottom),top:this.mapY(e.top)}},e.toJSON=function(){return{tx:this.tx,ty:this.ty,sx:this.sx,sy:this.sy}},e.fromJSON=function(e){return new n(e.tx,e.tj,e.sx,e.sy)}});return n}),define("graphing/projection",["require","math/recttransformation"],function(e){function t(e){return{left:0,right:e.width,top:0,bottom:e.height}}function n(e){return{left:e.xmin,right:e.xmax,bottom:e.ymin,top:e.ymax}}var i=e("math/recttransformation"),r=function(e,r,s){this.screen=e,this.viewport=r,this.settings=s,this.mathCoordinates=n(r),this.pixelCoordinates=t(e),this.mathToPixels=i.fromRects(this.mathCoordinates,this.pixelCoordinates),this.pixelsToMath=i.fromRects(this.pixelCoordinates,this.mathCoordinates)};return r.prototype.mapx=function(e){return this.mathToPixels.mapX(e)},r.prototype.mapy=function(e){return this.mathToPixels.mapY(e)},r.prototype.map_pt=function(e){return this.mathToPixels.mapPoint(e)},r.prototype.reverse_mapx=function(e){return this.pixelsToMath.mapX(e)},r.prototype.reverse_mapy=function(e){return this.pixelsToMath.mapY(e)},r.prototype.reverse_map_pt=function(e){return this.pixelsToMath.mapPoint(e)},r.prototype.coordsAreOnscreen=function(e,t,n){return n=void 0===n?0:n,e>-n&&t>-n&&e<this.screen.width+n&&t<this.screen.height+n},r.prototype.closestPointOnScreen=function(e){var t=this.pixelCoordinates;return{x:Math.min(Math.max(e.x,t.left),t.right),y:Math.min(Math.max(e.y,t.top),t.bottom)}},r}),define("graphing/movablepointslayer",["require","pjs","jquery","./domlayer","browser","./constants"],function(e){var t=e("pjs"),n=e("jquery"),i=e("./domlayer"),r=e("browser"),s=e("./constants"),a=t(i,function(e,t){e.init=function(e,n,i){t.init.call(this,e,n,i),this.renderedMovablePoints={}},e.redraw=function(e,t){this.resize(e.screen.width,e.screen.height);var n=null,i=null;for(var r in this.renderedMovablePoints)this.renderedMovablePoints[r].shouldGarbageCollect=!0;for(r in t){var s=t[r];if(s.visible)for(var a=s.getMovablePoints(),o=0;o<a.length;o++){var c=a[o],l={};c.id===this.hoveredPointId&&(l.hovered=!0,n=c),c.id===this.pressedPointId&&(l.pressed=!0,i=c),this.drawMovablePoint(c,e,l)}}for(r in this.renderedMovablePoints)this.renderedMovablePoints[r].shouldGarbageCollect&&(this.renderedMovablePoints[r].$.remove(),delete this.renderedMovablePoints[r]);var u,h;n?(u=n.tableInfo&&n.tableInfo.dragX,h=n.tableInfo&&n.tableInfo.dragY,u&&h||!u&&!h?this.addGlobalClass("dcg-mouse-over-movable-point"):u?this.addGlobalClass("dcg-mouse-over-movable-point-ew"):this.addGlobalClass("dcg-mouse-over-movable-point-ns")):(this.hoveredPointId=null,this.removeGlobalClass("dcg-mouse-over-movable-point-ew"),this.removeGlobalClass("dcg-mouse-over-movable-point-ns"),this.removeGlobalClass("dcg-mouse-over-movable-point")),i?(u=i.tableInfo&&i.tableInfo.dragX,h=i.tableInfo&&i.tableInfo.dragY,u&&h||!u&&!h?this.addGlobalClass("dcg-dragging-movable-point"):u?this.addGlobalClass("dcg-dragging-movable-point-ew"):this.addGlobalClass("dcg-dragging-movable-point-ns")):(this.pressedPointId=null,this.removeGlobalClass("dcg-dragging-movable-point-ew"),this.removeGlobalClass("dcg-dragging-movable-point-ns"),this.removeGlobalClass("dcg-dragging-movable-point"))},e.drawMovablePoint=function(e,t,i){var a=e.id,o=e.color,c=e.x,l=e.y,u=t.mapx(c),h=t.mapy(l);if(!(a in this.renderedMovablePoints)){var d=e.tableInfo?"dcg-table-movable-point":"",p=n("<div class='dcg-movable-point "+d+"'>").append(n("<div class='dcg-background'></div>")).append(n("<div class='dcg-dot'></div></div>"));this.dom_node.append(p),this.renderedMovablePoints[a]={$:p,shouldGarbageCollect:!0}}var f=this.renderedMovablePoints[a].$;t.coordsAreOnscreen(u,h,s.OFFSCREEN_RENDER_MARGIN)&&(f.css({transform:r.translateRule(u,h),backgroundColor:o}),f.toggleClass("dcg-simulate-hovered",!!i.hovered),f.toggleClass("dcg-simulate-active",!!i.pressed),this.renderedMovablePoints[a].shouldGarbageCollect=!1)}});return a}),function(e){var t="_*_";e.Event.prototype.wasHandled=function(n){n=n?n:t;var i=this.originalEvent,r=i&&i.handledBy;if(r&&r[n])return!0;if(n!==t)return!1;var s=e(this.target).closest("[handleEvent]");return s.length&&s[0]!==this.currentTarget?"false"!==s.attr("handleEvent"):!1},e.Event.prototype.handle=function(e){e=e?e:t;var n=this.originalEvent;if(n){var i=n.handledBy;i||(i=n.handledBy={}),i[e]=!0}}}(jQuery),define("jquery.handleevent",["jquery"],function(){}),function(e){"function"==typeof define&&define.amd?define("vendor/jquery.mousewheel",["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a=t||window.event,o=c.call(arguments,1),l=0,u=0,h=0,d=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(h=-1*a.detail),"wheelDelta"in a&&(h=a.wheelDelta),"wheelDeltaY"in a&&(h=a.wheelDeltaY),"wheelDeltaX"in a&&(u=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(u=-1*h,h=0),l=0===h?u:h,"deltaY"in a&&(h=-1*a.deltaY,l=h),"deltaX"in a&&(u=a.deltaX,0===h&&(l=-1*u)),0!==h||0!==u){if(1===a.deltaMode){var p=e.data(this,"mousewheel-line-height");l*=p,h*=p,u*=p}else if(2===a.deltaMode){var f=e.data(this,"mousewheel-page-height");l*=f,h*=f,u*=f}return d=Math.max(Math.abs(h),Math.abs(u)),(!s||s>d)&&(s=d,i(a,d)&&(s/=40)),i(a,d)&&(l/=40,u/=40,h/=40),l=Math[l>=1?"floor":"ceil"](l/s),u=Math[u>=1?"floor":"ceil"](u/s),h=Math[h>=1?"floor":"ceil"](h/s),t.deltaX=u,t.deltaY=h,t.deltaFactor=s,t.deltaMode=0,o.unshift(t,l,u,h),r&&clearTimeout(r),r=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,o)}}function n(){s=null}function i(e,t){return u.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var r,s,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice;if(e.event.fixHooks)for(var l=a.length;l;)e.event.fixHooks[a[--l]]=e.event.mouseHooks;var u=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var n=o.length;n;)this.addEventListener(o[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",u.getLineHeight(this)),e.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=o.length;e;)this.removeEventListener(o[--e],t,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),define("graphing/viewportcontroller",["require","jquery","pjs","lib/aria","i18n","math/recttransformation","./viewport","math/distance","./constants","animation-frame","./projection","touchtracking","jquery.handleevent","vendor/jquery.mousewheel"],function(e){var t=e("jquery"),n=e("pjs"),i=e("lib/aria"),r=e("i18n"),s=e("math/recttransformation"),a=e("./viewport"),o=e("math/distance"),c=e("./constants"),l=e("animation-frame"),u=e("./projection");e("touchtracking"),e("jquery.handleevent"),e("vendor/jquery.mousewheel");var h=n(function(e){function n(e,t){var n=t.x-e.x,i=t.y-e.y,r=.5*(e.x+t.x),s=.5*(e.y+t.y),a=.5*o.hypot(n,i);return{center:d(r,s),radius:a}}function h(e,t){for(var n=[],i=0;i<e.length;i++)n.push(d(e[i].x-t.left,e[i].y-t.top));return n}function d(e,t){return{x:e,y:t}}function p(e){return d(.5*(e.left+e.right),.5*(e.bottom+e.top))}e.init=function(e,t){this.grapher=e,this.undoRedo=t,this.$=this.grapher.$,this.addMouseWheelEventHandler(),this.addTouchEventHandler()},e.t=function(e,t){return r.t(e,t,this.grapher.settings.language)},e.getViewport=function(){return this.grapher.getProjection().viewport},e.getProjection=function(){return this.grapher.getProjection()},e.getDefaultViewport=function(){return this.grapher.getDefaultViewport()},e._setViewportWithoutCancellingAnimation=function(e){if(e.isValid()&&!e.equals(this.getViewport())){var t=this.getViewport(),n=this.getProjection();this.grapher._setProjection(new u(n.screen,e,n.settings));var i=this.getViewport(),r=this;r.undoRedo.addTransaction({foldType:"viewport",undo:function(){r.setViewport(t)},redo:function(){r.setViewport(i)}})}},e.setViewport=function(e){this.cancelAnimation(),this._setViewportWithoutCancellingAnimation(e)},e.setScreen=function(e){var t=this.getProjection(),n=new u(e,this.getViewportForScreen(t.viewport,e),t.settings);this.grapher._setProjection(n)},e.getTransformedViewport=function(e){var t=this.getProjection(),n=t.pixelsToMath.div(e).mapRect(t.pixelCoordinates);return new a(n.left,n.right,n.bottom,n.top)},e.transformViewport=function(e){this.setViewport(this.getTransformedViewport(e))},e.animateTransformation=function(e){function t(a){i||(i=a);var o=(a-i)/c.ANIMATE_ZOOM_DURATION;s+=o,1>s?(n.__animationTimeout=l.requestAnimationFrame(t),n._setViewportWithoutCancellingAnimation(n.getTransformedViewport(e.pow(o)))):n.setViewport(r)}var n=this;this.cancelAnimation();var i,r=this.getTransformedViewport(e),s=0;this.__animationTimeout=l.requestAnimationFrame(t)},e.cancelAnimation=function(){l.cancelAnimationFrame(this.__animationTimeout)},e.addMouseWheelEventHandler=function(){var e,n,i=!1;t(window).on("scroll",function(e){i=!0}),t(window).on("mousewheel",function(t){e=t.originalEvent.clientX,n=t.originalEvent.clientY}),t(window).on("mousemove",function(t){if(i){var r=t.originalEvent.clientX-e,s=t.originalEvent.clientY-n,a=r*r+s*s;100>a||(i=!1)}});var r=0,a=function(e,t){var n=this.getProjection();if(!n.settings.config.lockViewport){var a=n.mathToPixels;if(!i){e.preventDefault();var o=this.$.offset(),u=d(e.pageX-o.left,e.pageY-o.top),h=a.mapPoint(d(0,0)),p=Math.abs(u.x-h.x)<50&&Math.abs(u.y-h.y)<50,f=p&&t>0?h:u;if(!(r>0)){r+=1,l.requestAnimationFrame(function(){r--}),t=t>0?1:-1;var m=t>0?c.ZOOM_FACTOR:1/c.ZOOM_FACTOR;this.transformViewport(s.scaleAtPoint(f,m))}}}};this.$.mousewheel(a.bind(this))},e.handleDoubleClick=function(e){var t=this.getProjection();if(!t.settings.config.lockViewport&&!t.settings.config.disable_dblclick_zooming&&!e.wasHandled()){e.preventDefault();var n=this.$.offset(),i=d(e.pageX-n.left,e.pageY-n.top);this.animateTransformation(s.scaleAtPoint(i,c.DOUBLETAP_ZOOM))}},e.applyPanTouchChanges=function(e,t){if(!this.getProjection().settings.config.lockViewport){var n=d(t[0].x-e[0].x,t[0].y-e[0].y);this.transformViewport(s.translate(n))}},e.applyScaleTouchChanges=function(e,t){if(!this.getProjection().settings.config.lockViewport){var i=this.grapher.scaleAxis,r=n(e[0],e[1]),a=n(t[0],t[1]),o=a.radius/r.radius,c="y"===i?1:o,l="x"===i?1:o,u=s.scaleAtPoint(r.center,c,l).translate(r.center,a.center);this.transformViewport(u)}},e.addTouchEventHandler=function(){var e=this,n=[],i=!1,r=function(n){e.getProjection().settings.config.lockViewport||n.wasHandled()||i||n.touches.length===n.changedTouches.length&&(i=!0,t(document).on("dcg-tapmove.graphdrag",c),t(document).on("dcg-tapstart.graphdrag dcg-tapend.graphdrag dcg-tapcancel.graphdrag",l))},s=function(t){if(!(t.length<2)){var n=e.grapher.getProjection(),i=n.pixelCoordinates,r=n.mathToPixels.mapX(0),s=n.mathToPixels.mapY(0);r=Math.min(Math.max(i.left,r),i.right),s=Math.min(Math.max(i.top,s),i.bottom);var a=t[1].x-t[0].x,o=t[1].y-t[0].y,c=40;return Math.abs(t[0].x-r)<c&&Math.abs(t[1].x-r)<c&&Math.abs(o)>3*Math.abs(a)?"y":Math.abs(t[0].y-s)<c&&Math.abs(t[1].y-s)<c&&Math.abs(a)>3*Math.abs(o)?"x":"both"}},a=function(t){return e.grapher.scaleAxis||(e.grapher.scaleAxis=s(t)),e.grapher.scaleAxis},o=function(){e.grapher.scaleAxis=void 0,e.grapher.redrawAllLayers()},c=function(t){if(i&&!e.getProjection().settings.config.lockViewport){var r=h(t.touches,e.$.offset());2===n.length&&2===r.length?(a(r),e.applyScaleTouchChanges(n,r)):o(),1===n.length&&e.applyPanTouchChanges(n,r),n=r}},l=function(r){i&&(e.cancelAnimation(),n=h(r.touches,e.$.offset()),0===r.touches.length&&(i=!1,t(document).off(".graphdrag")),r.touches.length<2&&o())};this.$.on("dcg-tapstart",r),this.$.on("dblclick",this.handleDoubleClick.bind(this))},e.zoom=function(e){var t=this.getProjection().pixelCoordinates;"in"===e?this.animateTransformation(s.scaleAtPoint(p(t),2)):"out"===e?this.animateTransformation(s.scaleAtPoint(p(t),.5)):"default"===e&&this.setViewport(this.getDefaultViewport());var n=this.grapher.getAudioTrace();n&&n.recomputePoints(),i.alert(this.t("Graph zoom __action__",{action:e}))},e.isZoomRestored=function(){var e=this.getProjection(),t=e.viewport,n=this.getDefaultViewport(),i=.05;return e.settings.squareAxes&&Math.abs((t.xmin-n.xmin)/t.xmin)<i&&Math.abs((t.xmax-n.xmax)/t.xmax)<i&&Math.abs((t.ymin-n.ymin)/t.ymin)<i&&Math.abs((t.ymax-n.ymax)/t.ymax)<i},e.getViewportForScreen=function(e,t){var n=this.getProjection(),i=n.settings;if(!i.squareAxes)return e;var r=i.lastChangedAxis;return"y"==r?e.squareXAxis(t):e.squareYAxis(t)},e.enforceSquareAxes=function(){var e=this.getProjection();this.setViewport(this.getViewportForScreen(e.viewport,e.screen))}});return h}),define("lib/rounding",["require","math/distance"],function(e){var t=e("math/distance"),n={shortestDecimalBetween:function(e,n){var i=t.mean(e,n);if(e>0!=n>0)return 0;if(0===e||0===n)return 0;var r=e>0?1:-1,s=Math.abs(e).toExponential().split("e"),a=Math.abs(n).toExponential().split("e"),o=s[0],c=a[0],l=s[1],u=a[1];if(u!==l)return r*Math.pow(10,Math.max(parseFloat(l),parseFloat(u)));if(o[0]!==c[0])return parseFloat(i.toPrecision(1));for(var h=1,d=2;d<Math.min(o.length,c.length)&&(h++,o[d]===c[d]);d++);return parseFloat(i.toPrecision(h))}};return n}),define("graphing/poicontroller",["require","jquery","math/distance","lib/rounding","graphing/graphmode","conditional_blur"],function(e){function t(e,t){this.manager=e,this.graphSettings=t,this.$=this.manager.$,this.triggerMovePoint=function(e,t,n){},this.triggerSelectExpression=function(e){},this.triggerStartMovingPoint=function(){},this.triggerStopMovingPoint=function(){},this.graphSettings.config.graphpaper&&!this.graphSettings.config.disableMouseInteractions&&(this.addTouchEventHandlers(),this.addHoverEventHandler())}var n=e("jquery"),i=e("math/distance"),r=e("lib/rounding"),s=e("graphing/graphmode"),a=e("conditional_blur");return t.prototype.getToleranceByDevice=function(e){return"touch"===e?20:10},t.prototype.addHoverEventHandler=function(){n(document).on("dcg-tapmove",function(e){if("touch"!==e.device){var t=this.getMouseRelativeToGrapher(e),n=this.getToleranceByDevice(e.device),i=this.getPointUnderPoint(t,n),r=null,s=null;i?i.isMovable&&(s=i.id):r=this.getPOIUnderPoint(t,n),r!=this.manager.poiLabelsLayer.hoveredPOI&&(this.manager.poiLabelsLayer.hoveredPOI=r,this.manager.redrawAllLayers()),s!=this.manager.movablePointsLayer.hoveredPointId&&(this.manager.movablePointsLayer.hoveredPointId=s,this.manager.redrawAllLayers())}}.bind(this))},t.prototype.addTouchEventHandlers=function(){this.$.on("dblclick",function(e){var t=this.getMouseRelativeToGrapher(e),n=this.getToleranceByDevice(e.device);(this.getPointUnderPoint(t,n)||this.getPOIUnderPoint(t,n)||this.getBranchInfoUnderPoint(t,n))&&(e.preventDefault(),e.handle())}.bind(this)),this.$.on("dcg-tapstart",function(e){var t=this.getMouseRelativeToGrapher(e),n=this.getToleranceByDevice(e.device);a(),this.pageOffset=this.$.offset();var i=this.getPointUnderPoint(t,n);if(i)return this.triggerStartMovingPoint(i),this.startMovingPoint(i),void e.handle();if(this.togglePOIUnderPoint(t,n))return void e.handle();var r=this.getBranchInfoUnderPoint(t,n);if(this.graphSettings.config.onlyTraceSelected){if(r&&r.sketch&&r.sketch.selected)return this.startTracingBranch(r,t),void e.handle()}else if(r)return this.triggerSelectExpression(r.id),this.startTracingBranch(r,t),void e.handle();var s=this;this.$.on("dcg-tapmove.poicontroller",function(){s.$.off(".poicontroller")}),this.$.on("dcg-tapend.poicontroller",function(e){s.$.off(".poicontroller"),this.pageOffset=void 0;var i=s.getBranchInfoUnderPoint(t,n);if(i&&i.sketch&&!i.sketch.selected)return void s.triggerSelectExpression(i.id);var r=s.getImgUnderMouse(t,n);return r?void s.triggerSelectExpression(r.id):void s.triggerSelectExpression(null)})}.bind(this))},t.prototype.getMouseRelativeToGrapher=function(e){var t=this.pageOffset||this.$.offset(),n=e.touches?e.touches[0]:e;return{x:n.pageX-t.left,y:n.pageY-t.top}},t.prototype.getPointUnderPoint=function(e,t){var n=t,r=null,s=!1,a=this.manager.graphSketches,o=this.manager.getProjection();for(var c in a){var l=a[c];if(l&&l.visible){var u,h,d,p,f=l.getMovablePoints();for(u=0;u<f.length;u++)h=f[u],d=o.map_pt(h),p=i.hypot(d.x-e.x,d.y-e.y),(n>p||!s&&t>p)&&(s=!0,n=p,r=h);if(!s){var m=l.getStaticPoints();for(u=0;u<m.length;u++)h=m[u],d=o.map_pt(h),p=i.hypot(d.x-e.x,d.y-e.y),n>p&&(n=p,r=h)}}}return r},t.prototype.getPOIUnderPoint=function(e,t){var n=this.manager.getProjection(),r=this.manager.poiLabelsLayer.getDrawnPOI();if(r=r.concat(this.manager.poiDotsLayer.getDrawnPOI()),!r.length)return null;var s=r[0],a=n.map_pt(s),o=t,c=null,l=i.hypot(a.x-e.x,a.y-e.y);o>l&&(c=s,o=l);for(var u=1;u<r.length;u++)s=r[u],a=n.map_pt(s),l=i.hypot(a.x-e.x,a.y-e.y),o>l&&(o=l,c=s);return c},t.prototype.getAllPOIAtSameLocation=function(e){if(!e)return[];var t=[],n=this.manager.poiLabelsLayer.getDrawnPOI(),i=this.manager.poiDotsLayer.getDrawnPOI(),r=n.concat(i);if(!r.length)return[];for(var s=0;s<r.length;s++){var a=r[s];a.x===e.x&&a.y===e.y&&t.push(a)}return t},t.prototype.togglePOIUnderPoint=function(e,t){var n=this.getPOIUnderPoint(e,t),i=this.getAllPOIAtSameLocation(n);if(i.length){for(var r=i[0].isOpen(),s=0;s<i.length;s++)r?(i[s].close(),
this.manager.poiLabelsLayer.hoveredPOI=null):(i[s].open(),this.speakPoint(i[s]));return this.manager.redrawAllLayers(),!0}return!1},t.prototype.getImgUnderMouse=function(e,t){var n=this.manager.getProjection(),i=n.reverse_map_pt(e),r=null,s=function(e,t,n,i){return e<t+.5*Math.abs(n)+i&&e>t-.5*Math.abs(n)+i};for(var a in this.manager.graphImages){var o=this.manager.graphImages[a];!o||o.hidden||o.folder&&o.folder.secret||s(i.x,o.computed_x,o.computed_width,0)&&s(i.y,o.computed_y,o.computed_height,0)&&(r={id:a,img:o})}return r},t.prototype.getBranchInfoUnderPoint=function(e,n){var i=null,r=n,s=this.manager.getProjection(),a=s.reverse_map_pt(e);for(var o in this.manager.graphSketches){var c=this.manager.graphSketches[o];if(c&&c.visible){var l=c.branches;if(l&&l.length)for(var u=0;u<l.length;u++){var h=t.calculateDistanceFromBranch(l[u],a,s);r>h&&(r=h,i={id:o,branch:u,sketch:c})}}}return i},t.calculateDistanceFromBranch=function(e,n,i){var r=t.getBranchesDistanceInfo(e,n,i);return r?r.minDistance:1/0},t.getBranchesDistanceInfo=function(e,t,n){var r=n.screen.width/(n.viewport.xmax-n.viewport.xmin),a=n.screen.height/(n.viewport.ymax-n.viewport.ymin),o=t.x,c=t.y;switch(e.graphMode){case s.Y:break;case s.X:var l=o;o=c,c=l,l=r,r=a,a=l;break;default:return null}for(var u,h,d=1/0,p=1/0,f=0;f<e.segments.length;f++)for(var m=e.segments[f],g=0;g<m.length-3;g+=2){var v=m[g],y=m[g+1],b=m[g+2],_=m[g+3],x=i.closestPointOnSegment(0,0,(v-o)*r,(y-c)*a,(b-o)*r,(_-c)*a),w=i.hypot(x[0],x[1]);x[0]<0?d>w&&(d=w,u=x):p>w&&(p=w,h=x)}var S=p>d?u:h;if(!S)return null;var k=S[0]/r+o,E=S[1]/a+c;return{closestPoint:{x:e.graphMode===s.Y?k:E,y:e.graphMode===s.Y?E:k},minDistance:Math.min(d,p),secondDistance:Math.max(d,p)}},t.getBranchesTracePoint=function(e,n,i){if(e&&e.compiled&&e.compiled.fn){var a=e.compiled.fn,o=i.screen.width/(i.viewport.xmax-i.viewport.xmin),c=i.screen.height/(i.viewport.ymax-i.viewport.ymin),l=this.getBranchesDistanceInfo(e,n,i);if(!l)return null;var u=l.minDistance/l.secondDistance;u*=u;var h=e.graphMode===s.Y?"x":"y",d=l.closestPoint[h]*(1-u)+n[h]*u,p=1/(2*o),f=1/(2*c),m=a(d-p),g=a(d),v=a(d+p),y=p*Math.min(1,f/Math.abs(m-g)),b=p*Math.min(1,f/Math.abs(v-g));isFinite(y)||(y=p),isFinite(b)||(b=p),d=r.shortestDecimalBetween(d-y,d+b);var _=t.fillHole(a,d,o,c,n.x,n.y);return{x:e.graphMode===s.Y?d:_,y:e.graphMode===s.Y?_:d}}},t.prototype.startMovingPoint=function(e){var t=!1;this.manager.movablePointsLayer.pressedPointId=e.isMovable?e.id:null,this.manager.redrawAllLayers();var i=null,r=function(){if(i){t=!0;var n=this.manager.getProjection(),r=this.getMouseRelativeToGrapher(i);i=null,this.triggerMovePoint(e,r,n)}}.bind(this);this.manager.registerMovablePointListener(r),n(document).on("dcg-tapmove.movepoint",function(e){i=e}),n(document).on("dcg-tapend.movepoint dcg-tapcancel.movepoint",function(i){if(this.manager.deregisterMovablePointListener(),n(document).off(".movepoint"),this.manager.movablePointsLayer.pressedPointId=null,this.manager.redrawAllLayers(),this.triggerStopMovingPoint(e),!t){var r=this.manager.getProjection(),s=this.getToleranceByDevice(i.device),a=r.map_pt(e),o=this.manager.getGraphSketch(e.sketch.id),c=o.openPOI.length;this.togglePOIUnderPoint(a,s);var l=o.openPOI.length;l>c&&this.triggerSelectExpression(e.sketch.id)}}.bind(this))},t.prototype.startTracingBranch=function(e,i){this.last_screen_pt=i;var r=this.manager.getProjection(),s=r.reverse_map_pt(i),a=e.sketch,o=a.branches[e.branch],c=t.getBranchesTracePoint(o,s,r);this.speakPoint(c),this.manager.traceLayer.traceInfo={pt:c,branchInfo:e},this.manager.redrawAllLayers(),n(document).on("dcg-tapmove.tracing",this.handleTraceUpdate.bind(this)),n(document).on("dcg-tapend.tracing dcg-tapcancel.tracing",this.stopTracingBranch.bind(this))},t.prototype.stopTracingBranch=function(e){var t=this.manager.poiLabelsLayer.hoveredPOI;t&&!t.isOpen()&&(t.open(),this.speakPoint(t),this.manager.redrawAllLayers()),this.last_screen_pt=null,this.manager.traceLayer.traceInfo=null,this.manager.redrawAllLayers(),n(document).off(".tracing")},t.prototype.handleTraceUpdate=function(e){if(this.manager.traceLayer.traceInfo){var n,i=this.manager.getProjection();if(e)n=this.getMouseRelativeToGrapher(e),this.last_screen_pt=n;else{if(!this.last_screen_pt)return;n=this.last_screen_pt}var r=i.reverse_map_pt(n),s=1/0,a=-1,o=this.manager.traceLayer.traceInfo,c=this.manager.graphSketches[o.branchInfo.sketch.id];o.branchInfo.sketch=c;for(var l=o.branchInfo.sketch.branches,u=0;u<l.length;u++){var h=t.calculateDistanceFromBranch(l[u],r,i);s>h&&(a=u,s=h)}var d=l[a],p=d?t.getBranchesTracePoint(d,r,i):null;this.speakPoint(p),this.manager.traceLayer.traceInfo.branchInfo.branch=a,this.manager.traceLayer.traceInfo.pt=p,this.manager.redrawAllLayers()}},t.prototype.speakPoint=function(e){var t=this.manager.getAudioTrace();t&&e&&t.queueCoordinates(e,void 0,!0)},t.fillHole=function(e,t,n,r,s,a){var o=e(t);if(isFinite(o))return o;var c=t-1e-11,l=t+1e-11,u=e(c),h=e(l);if(isNaN(u)&&isNaN(h))return NaN;if(isNaN(u))return h;if(isNaN(h))return u;var d=(s-c)*n,p=(s-l)*n,f=(a-u)*r,m=(a-h)*r;return i.hypot(d,f)<i.hypot(p,m)?u:h},t}),define("graphing/grapher",["require","jquery","browser","./viewport","./screen","main/graph_settings","./canvaslayer","./poidotslayer","./poilabelslayer","./gridlayer","./graphsketch","./graphslayer","./imagelayer","./projection","./movablepointslayer","math/poi","./viewportcontroller","./poicontroller","./axisarrowmode","animation-frame","underscore_model"],function(e){function t(){return new o(1024,768)}function n(){return new a(-10,10,-10,10)}function i(e,i,a,o){this.container=e,this.$=r(e),this.$root=a,this.settings=i;var c=t(),p=n().squareYAxis(c);this.__projection=new g(c,p,i),this.__audioTrace=null,this.triggerProjectionChanged=function(){},this.poiController=new _(this,i),this.viewportController=b(this,o),this.showPOIDots=!0,this.$.css("overflow","hidden"),this.canvasLayer=l(),this.$.append(this.canvasLayer.$),this.imageLayer=m(),this.gridLayer=d(),this.poiDotsLayer=u(),this.graphsLayer=f(),this.movablePointsLayer=v(this.$root),this.movablePointsLayer.$.css("z-index","0"),this.$.append(this.movablePointsLayer.$),this.poiLabelsLayer=h(this.$root),this.traceLayer=this.poiLabelsLayer,this.traceLayer.$.css("z-index","0"),this.$.append(this.traceLayer.$),s.IS_IE9&&this.traceLayer.$.addClass("dcg-transparent-bg"),this.scaleAxis=void 0,this.__transient=!1,this.graphSketches={},this.graphImages={},this.__sketchOrder=[],this.selectedId=null,this.__redrawRequested=!1,this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!1,this.events=S()}var r=e("jquery"),s=e("browser"),a=e("./viewport"),o=e("./screen"),c=e("main/graph_settings"),l=e("./canvaslayer"),u=e("./poidotslayer"),h=e("./poilabelslayer"),d=e("./gridlayer"),p=e("./graphsketch"),f=e("./graphslayer"),m=e("./imagelayer"),g=e("./projection"),v=e("./movablepointslayer"),y=e("math/poi"),b=e("./viewportcontroller"),_=e("./poicontroller"),x=e("./axisarrowmode"),w=e("animation-frame"),S=e("underscore_model");return i.prototype.tick=function(e){this.__isRedrawingSlowly?this._redrawSlowly():this.__redrawRequested&&this._redrawAllLayers(),this.__movablePointListener&&this.__movablePointListener()},i.prototype.registerMovablePointListener=function(e){this.__movablePointListener=e},i.prototype.deregisterMovablePointListener=function(){this.__movablePointListener=null},i.prototype.setSketchOrder=function(e){this.__sketchOrder=e,this.redrawAllLayers()},i.prototype.clear=function(){this.graphSketches={},this.graphImages={}},i.prototype.getGraphSketch=function(e){return e in this.graphSketches?this.graphSketches[e]:null},i.prototype.addGraphSketch=function(e){this.graphSketches[e.id]=e},i.prototype.removeGraphSketch=function(e){delete this.graphSketches[e]},i.prototype.addGraphImage=function(e){this.graphImages[e.id]=e},i.prototype.removeGraphImage=function(e){delete this.graphImages[e]},i.prototype.getProjection=function(){return this.__projection},i.prototype._setProjection=function(e){this.__projection=e,this.redrawAllLayers(),this.triggerProjectionChanged()},i.prototype.getAudioTrace=function(){return this.__audioTrace},i.prototype.setAudioTrace=function(e){this.__audioTrace=e},i.prototype.getDefaultViewport=function(){var e=this.getProjection();return n().squareYAxis(e.screen)},i.prototype.updateScreenSize=function(e,t){if(!(0>=e||0>=t)){var n=this.getProjection(),i=n.screen;if(i.width!==e||i.height!==t){this.$.width(e);var r=new o(e,t);this.viewportController.setScreen(r)}}},i.prototype.syncSquareAxes=function(){var e=this.getProjection();this.settings.setProperty("squareAxes",e.viewport.isSquare(e.screen))},i.prototype.setIsVisible=function(e){e!==this.isVisible&&(this.isVisible=e,e?this.redrawAllLayers():this.canvasLayer.resize(0,0))},i.prototype.hide=function(e){var t=this.getGraphSketch(e);t&&(t.visible=!1)},i.prototype.select=function(e){var t=this.getGraphSketch(this.selectedId);t&&(t.selected=t.showPOI=t.showHighlight=!1);var n=this.getGraphSketch(e);n&&(n.selected=n.showPOI=n.showHighlight=!0),this.selectedId=e},i.prototype.updateSketch=function(e,t){var n=this.getGraphSketch(e);if(!t.length)return this.hide(e);var i=new p(e,t);i.color=t[0].color,i.style=t[0].style,i.updateFrom(n),i.selected=i.showPOI=i.showHighlight=String(e)===String(this.selectedId),t[0].label&&i.getPOI().forEach(function(e){e.open()}),this.addGraphSketch(i)},i.prototype.updateIntersections=function(e,t){var n=this.getGraphSketch(e);n&&n.updateIntersections(t)},i.prototype.redrawAllLayers=function(){this.cancelRedrawSlowly(),this.__redrawRequested=!0},i.prototype._clear=function(){var e=this.getProjection(),t=e.screen;this.canvasLayer.resize(e.screen.width,e.screen.height),this.canvasLayer.ctx.clearRect(0,0,t.width,t.height)},i.prototype._redrawAllLayers=function(){this.isVisible&&(this._clear(),this._redrawImageLayer(),this._redrawGridLayer(),this._redrawGraphsLayer(),this._redrawPOILayer(),this._redrawMovablePointsLayer(),this.__redrawRequested=!1,this.events.triggerEvent("redraw"))},i.prototype.cancelRedrawSlowly=function(){this.__isRedrawingSlowly&&(this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!1,this.redrawAllLayers())},i.prototype.redrawSlowly=function(){this.__isRedrawingSlowly||(this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!0)},i.prototype._redrawSlowly=function(){var e=this.__redrawSlowlyIndex;if(0===e&&(this._clear(),this._redrawGridLayer()),e>=this.__sketchOrder.length)return void this.cancelRedrawSlowly();var t=this.__sketchOrder[e],n=this.graphSketches[t],i={};i[t]=n,n&&this.graphsLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),i,[t]),this.__redrawSlowlyIndex+=1},i.prototype._redrawGridLayer=function(){this.gridLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.scaleAxis)},i.prototype._redrawGraphsLayer=function(){this.graphsLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.graphSketches,this.__sketchOrder)},i.prototype._redrawPOILayer=function(){this.showPOIDots&&this.poiDotsLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.graphSketches),this.poiLabelsLayer.redraw(this.getProjection(),this.graphSketches,this.canvasLayer.ctx)},i.prototype._redrawImageLayer=function(){this.imageLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.graphImages,this.__sketchOrder)},i.prototype._redrawMovablePointsLayer=function(){this.movablePointsLayer.redraw(this.getProjection(),this.graphSketches)},i.prototype._parseScreenshotOpts=function(e){var t,n,i,r,s,a=this.getProjection();return e?(t=e.width||e.height||a.screen.width,n=e.height||e.width||a.screen.height,i=e.targetPixelRatio||1,r=(e.width<256||e.height<256)&&!e.preserveAxisNumbers,s=c.fromObject(this.settings||this.settings)):(t=a.screen.width,n=a.screen.height,i=1,r=!1,s=c.fromObject(this.settings)),r&&(s.setProperty("xAxisNumbers",!1),s.setProperty("yAxisNumbers",!1),s.setProperty("polarNumbers",!1)),{width:t,height:n,targetPixelRatio:i,settings:s}},i.prototype.screenshot=function(e){var t=this._parseScreenshotOpts(e),n=document.createElement("canvas");return n.width=t.width*t.targetPixelRatio,n.height=t.height*t.targetPixelRatio,this.screenshotToCanvas(n,e),n.toDataURL("image/png")},i.prototype.screenshotToCanvas=function(e,t){t=this._parseScreenshotOpts(t);var n=t.width,i=t.height,r=t.targetPixelRatio,s=t.settings;s.takingScreenshot=!0;var a=e.getContext("2d");a.scale(r,r);var c=new o(n,i),l=this.getProjection().viewport;this.getSetting("squareAxes")&&(l=l.squareCrop(c));var u=new g(c,l,s);a.fillStyle="white",a.fillRect(0,0,c.width,c.height),this.imageLayer.redrawToCtx(a,u,this.graphImages),this.gridLayer.redrawToCtx(a,u),this.graphsLayer.redrawToCtx(a,u,this.graphSketches,this.__sketchOrder)},i.prototype.thumbnail=i.prototype.screenshot,i.prototype.getOpenIntersectionIds=function(){var e,t,n,i={};for(var r in this.graphSketches)if(this.graphSketches.hasOwnProperty(r)){for(e=this.graphSketches[r].openPOI,n=e.length-1;n>=0;n--)e[n].type===y.INTERSECTION&&(i[r]=!0);for(t=this.graphSketches[r].hiddenOpenPOI,n=t.length-1;n>=0;n--)t[n].type===y.INTERSECTION&&(i[r]=!0)}return i},i.prototype.getSetting=function(e,t){var n=this.settings.getProperty(e);return void 0!==n?n:t},i.prototype.setSetting=function(e,t,n){this.settings.setProperty(e,void 0!==t?t:n)},i.prototype.getState=function(){var e={},t=this;return this.settings.stateProperties.forEach(function(n){e[n]=t.getSetting(n)}),e.viewport=this.viewportController.getViewport().toObject(),e},i.prototype.notifyAfterRedraw=function(e){if(this.__isRedrawingSlowly)w.requestAnimationFrame(this.notifyAfterRedraw.bind(this,e));else if(this.__redrawRequested){this.notifyAfterRedraw_i?this.notifyAfterRedraw_i++:this.notifyAfterRedraw_i=1;var t="redraw.notifyAfterRedraw"+this.notifyAfterRedraw_i;this.events.observeEvent(t,function(){this.events.unobserveEvent(t),e()}.bind(this))}else e()},i.prototype.setState=function(e){if(this.clear(),this.setSetting("showGrid",e.showGrid,!0),this.setSetting("polarMode",e.polarMode,!1),this.setSetting("showXAxis",e.showXAxis,!!e.showAxes),this.setSetting("showYAxis",e.showYAxis,!!e.showAxes),this.setSetting("squareAxes",e.squareAxes,!0),this.setSetting("xAxisStep",e.xAxisStep,"pi"===e.labelXMode?Math.PI:0),this.setSetting("yAxisStep",e.yAxisStep,"pi"===e.labelYMode?Math.PI:0),this.setSetting("xAxisMinorSubdivisions",e.xAxisMinorSubdivisions,0),this.setSetting("yAxisMinorSubdivisions",e.yAxisMinorSubdivisions,0),this.setSetting("degreeMode",e.degreeMode,!1),this.setSetting("projectorMode",e.projectorMode,!1),this.setSetting("xAxisArrowMode",e.xAxisArrowMode,x.NONE),this.setSetting("yAxisArrowMode",e.yAxisArrowMode,x.NONE),this.setSetting("xAxisLabel",e.xAxisLabel,""),this.setSetting("yAxisLabel",e.yAxisLabel,""),this.setSetting("xAxisNumbers",e.xAxisNumbers,!!e.showLabels),this.setSetting("yAxisNumbers",e.yAxisNumbers,!!e.showLabels),this.setSetting("polarNumbers",e.polarNumbers,!!e.showLabels),"viewport"in e){var t=a.fromObject(e.viewport),n=this.getProjection().screen;this.getSetting("squareAxes")&&!t.isSquare(n)&&(t=t.squareYAxis(n)),this.viewportController.setViewport(t)}this.redrawAllLayers()},i}),define("graphing/audiographnavigator",["require","underscore","pjs","lib/aria","graphing/graphmode","i18n"],function(e){var t=e("underscore"),n=e("pjs"),i=e("lib/aria"),r=e("graphing/graphmode"),s=e("i18n"),a=n(function(e){e.init=function(e,t,n){this.grapher=e,this.expressionsModel=t,this.tonegen=n,this.tonegen.audioPointMove=this.drawTrace.bind(this),this.tonegen.audioPointReset=this.resetTracePoint.bind(this),this.reset()},e.reset=function(){this.currentPoint=null,this.branch=0,this.cachedType=null,this.pois=[],this.independent=0,this.xmid=0,this.xstep=0,this.ymid=0,this.ystep=0},e.t=function(e,t){return s.t(e,t,this.grapher.settings.language)},e.getBranchPoints=function(e){var t=[];if(!isNaN(e)&&e>=0)for(var n=this.getPoints(),i=0;i<n.length;i++){var r=n[i];r.hasOwnProperty("branch")&&r.branch===e&&t.push(r)}return t},e.resetTracePoint=function(){var e=this.getCurrentPoint();this.drawTrace(e)},e.drawTrace=function(e){var t=this.getCurrentSketch();if(e&&t){var n={x:e.x,y:e.y};this.grapher.traceLayer.traceInfo={branchInfo:{branch:e.branch,id:t.id,sketch:t},pt:n},this.grapher.redrawAllLayers()}},e.moveToOrigin=function(){var e=this.getCurrentSketch();if(e){var t=e.branches[0].graphMode;t===r.Y||t===r.POLAR?this.setIndependent("x",0):t===r.X&&this.setIndependent("y",0)}},e.getCurrentSketch=function(){var e=this.expressionsModel.getSelected();return e?this.grapher.getGraphSketch(e.id):null},e.computeStepSizes=function(){var e=this.grapher.getProjection().viewport;if(e){this.viewport=e;var t=e.xmin,n=e.xmax;this.xmid=Math.abs(n-t)/2,this.xstep=Math.abs(n-t)/100;var i=e.ymin,s=e.ymax;this.ymid=Math.abs(s-i)/2,this.ystep=Math.abs(s-i)/100,this.tonegen.setMinMax(t,n,i,s);var a=this.getCurrentSketch();if(a){var o=a.branches[0].graphMode;o===r.Y||o===r.POLAR?this.independent<t?this.independent=t:this.independent>n&&(this.independent=n):o===r.X&&(this.independent<i?this.independent=i:this.independent>s&&(this.independent=s))}}},e.getPoint=function(e){var t=null,n=this.getCurrentSketch();if(n){var i,s,a,o,c,l=null;n.branches[this.branch].compiled&&(s=n.branches[this.branch].compiled.fn,i=n.branches[this.branch].graphMode,i===r.Y?(0===this.branch&&(l=this.getInterveningPOI(e,e+this.xstep,this.cachedType,i)),l?(isNaN(l.y)||!isNaN(l.y)&&(l.y<this.viewport.ymin||this.viewport.ymax<l.y))&&(l.y=void 0):(c=s(e),(isNaN(c)||!isNaN(c)&&(c<this.viewport.ymin||this.viewport.ymax<c))&&(c=void 0)),t=l?{x:l.x,y:l.y,type:l.type,branch:l.branch,graphMode:i}:{x:e,y:c,branch:this.branch,graphMode:i}):i===r.X?(0===this.branch&&(l=this.getInterveningPOI(e,e+this.ystep,this.cachedType,i)),l?(isNaN(l.x)||!isNaN(l.x)&&(l.x<this.viewport.xmin||this.viewport.xmax<l.x))&&(l.x=void 0):(c=s(e),(isNaN(c)||!isNaN(c)&&(c<this.viewport.xmin||this.viewport.xmax<c))&&(c=void 0)),t=l?{x:l.x,y:l.y,type:l.type,branch:l.branch,graphMode:i}:{y:e,x:c,branch:this.branch,graphMode:i}):i===r.POLAR&&(o=e,a=s(e),t={x:a*Math.cos(o),y:a*Math.sin(o),branch:this.branch,graphMode:i}))}return t},e.getPoints=function(){var e=[],t=this.getCurrentSketch();if(t){var n,i,s,a,o,c=t.branches[0].graphMode;for(c===r.Y||c===r.POLAR?(n=this.viewport.xmin,i=this.viewport.xmax,s=this.xstep):c===r.X&&(n=this.viewport.ymin,i=this.viewport.ymax,s=this.ystep),a=0;a<t.branches.length;a++)for(o=n;i>=o;o+=s){if(0===a){var l=this.getInterveningPOI(o,o+s,null,c);if(l){e.push(l);continue}}e.push(this.getPoint(o))}}return e},e.getCurrentPoint=function(){return this.currentPoint||this.updateCurrentPoint(),this.currentPoint},e.updateCurrentPoint=function(){this.currentPoint=this.getPoint(this.independent),this.currentPoint&&(this.cachedType=this.currentPoint.type)},e.prevPoint=function(){this.moveToPoint(-1)},e.nextPoint=function(){this.moveToPoint(1)},e.firstPoint=function(){var e=this.getCurrentSketch();if(e){var t=e.branches[0].graphMode;t===r.Y||t===r.POLAR?this.independent=this.viewport.xmin:t===r.X&&(this.independent=this.viewport.ymin),this.branch=0,this.updateCurrentPoint()}},e.lastPoint=function(){var e=this.getCurrentSketch();if(e){var t=e.branches[0].graphMode;t===r.Y||t===r.POLAR?this.independent=this.viewport.xmax:t===r.X&&(this.independent=this.viewport.ymax),this.branch=e.branches.length-1,this.updateCurrentPoint()}},e.moveToPoint=function(e){var t=this.getCurrentSketch();if(t){var n,a,o,c=t.branches[0].graphMode,l=this.independent,u=this.branch;c===r.Y||c===r.POLAR?(n=this.viewport.xmin,a=this.viewport.xmax,o=this.xstep):c===r.X&&(n=this.viewport.ymin,a=this.viewport.ymax,o=this.ystep);var h,d;do h=this.getPoint(l),this.cachedType=h.type,l+=o*e,(n>=l||l>=a)&&(u<=t.branches.length-1&&t.branches.length>1&&(u=this.branch+e,l=1===e?n:a),n>=l&&0>=u?(l=n,u=0,i.queue(s.t("First point"))):l>=a&&u>=t.branches.length-1&&(l=a,u=t.branches.length-1,i.queue(s.t("Last point")))),d=this.getPoint(l);while(h.x===d.x&&h.y===d.y&&this.cachedType===d.type&&l!==n&&l!==a);this.independent=l,this.branch=u,this.updateCurrentPoint()}},e.prevPOI=function(){this.moveToPOI(-1)},e.nextPOI=function(){this.moveToPOI(1)},e.getSortedPOI=function(){return this.pois&&0!==this.pois.length||this.updatePOI(),this.pois},e.updatePOI=function(){var e,n=[],i=this.getCurrentSketch();if(i){e=i.branches[0].graphMode,n=i.getPOI();for(var s=0;s<n.length;s++)n[s].branch=0;e===r.Y||e===r.POLAR?n=t.sortBy(n,"y"):e===r.X&&(n=t.sortBy(n,"x"))}this.pois=this.removeDuplicates(n,e)},e.removeDuplicates=function(e,t){for(var n=0;n<e.length-1;)Math.abs(e[n].x-e[n+1].x)<.5*this.xstep||t===r.X&&Math.abs(e[n].y-e[n+1].y)<.5*this.ystep&&e[n].branch===e[n+1].branch?e[n].type?e.splice(n+1,1):e.splice(n,1):n++;return e},e.getInterveningPOI=function(e,t,n,i){for(var s=null,a=this.getSortedPOI(),o=0,c=0;c<a.length;c++)if(i===r.Y||i===r.POLAR?o=a[c].x:i===r.X&&(o=a[c].y),a[c].type!==n&&(o>=e&&t>o||e>=o&&o>t)){s=a[c];break}return s},e.setIndependent=function(e,t){for(var n=this.getPoints(),i=0;i<n.length;i++){var r=n[i];if(r.hasOwnProperty(e)&&r[e]===t){if("x"===e)return this.independent=r.x,void this.updateCurrentPoint();if("y"===e)return this.independent=r.y,void this.updateCurrentPoint()}}"x"===e?this.independent=this.xmid:"y"===e&&(this.independent=this.ymid),this.updateCurrentPoint(),this.branch=0},e.moveToPOI=function(e){var t=this.getCurrentSketch();if(t){var n,a,o,c,l=t.branches[0].graphMode;l===r.Y||l===r.POLAR?(a=this.xstep*e,n=1===e?this.viewport.xmax:this.viewport.xmin):l===r.X&&(a=this.ystep*e,n=1===e?this.viewport.ymax:this.viewport.ymin);var u=!1;if(0===this.branch||this.branch>0&&-1===e){o=this.independent;do o+=a,c=this.getInterveningPOI(o,o+a,null,l),c&&(l===r.Y||l===r.POLAR?this.independent=c.x:l===r.X&&(this.independent=c.y),this.branch=c.branch,this.updateCurrentPoint(),u=!0);while(!u&&(1===e&&n>=o||-1===e&&o>=n))}u||i.queue(s.t("No more points of interest"))}}});return a}),define("analytics/bugsnag-stub",["require"],function(e){for(var t=["notify","notifyException"],n={},i=0;i<t.length;i++){if("init"===t[i])throw new Error('Stubbing method "init" is not supported.');n[t[i]]=function(){}}return n.init=function(e){for(var i=0;i<t.length;i++)n[t[i]]=e[t[i]].bind(e)},n}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("base64",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.base64js=e()}}(function(){return function e(t,n,i){function r(a,o){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!o&&c)return c(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({"/":[function(e,t,n){"use strict";function i(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function r(e){return 3*e.length/4-i(e)}function s(e){var t,n,r,s,a,o,c=e.length;a=i(e),o=new h(3*c/4-a),r=a>0?c-4:c;var l=0;for(t=0,n=0;r>t;t+=4,n+=3)s=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],o[l++]=s>>16&255,o[l++]=s>>8&255,o[l++]=255&s;return 2===a?(s=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,o[l++]=255&s):1===a&&(s=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,o[l++]=s>>8&255,o[l++]=255&s),o}function a(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function o(e,t,n){for(var i,r=[],s=t;n>s;s+=3)i=(e[s]<<16)+(e[s+1]<<8)+e[s+2],r.push(a(i));return r.join("")}function c(e){for(var t,n=e.length,i=n%3,r="",s=[],a=16383,c=0,u=n-i;u>c;c+=a)s.push(o(e,c,c+a>u?u:c+a));return 1===i?(t=e[n-1],r+=l[t>>2],r+=l[t<<4&63],r+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],r+=l[t>>10],r+=l[t>>4&63],r+=l[t<<2&63],r+="="),s.push(r),s.join("")}n.byteLength=r,n.toByteArray=s,n.fromByteArray=c;for(var l=[],u=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,f=d.length;f>p;++p)l[p]=d[p],u[d.charCodeAt(p)]=p;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}]},{},[])("/")}),define("bin",["base64"],function(e){var t={};return{load:function(e,n,i,r){var s=n.toUrl("assets_src/"+e);if(r.isBuild){var a=require.nodeRequire("fs");t[e]=a.readFileSync(s).toString("base64"),i()}else{var o=new XMLHttpRequest;o.open("GET",s,!0),o.responseType="arraybuffer",o.onload=function(){i(o.response)},o.send()}},write:function(e,n,i,r){n in t?i("define('"+e+"!"+n+"', ['base64'], function (base64) {  return base64.toByteArray('"+t[n]+"').buffer;});"):console.log("ERROR - failed to find file "+n+" in buildMap")}}}),define("bin!audio/poi.mp3",["base64"],function(e){return e.toByteArray("//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAIAAAHVwAgICAgICAgICAgICBAQEBAQEBAQEBAQEBgYGBgYGBgYGBgYGBggICAgICAgICAgICAoKCgoKCgoKCgoKCgoMDAwMDAwMDAwMDAwODg4ODg4ODg4ODg4OD///////////////8AAAA5TEFNRTMuOThyAaUAAAAALmcAABRAJAiwQgAAQAAAB1cctrbdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAjsKyK0YYABp52xtx8wAgAgBd34IAhAgnsECEe7QIAAgsPxACDgcBAEHQfD/g+D4PggCAIf///ghLny4Pg+D5+sHz/wf+XPwfB8H3iMHwfwffUCYPvz/Y7Hg/H4/H4/H4HAwADcoDwAP7XfuAFtXrhzjsjOXP8iCYM4IBVoH2DGAhQR2hm5vikA2IVEPX9nQaITi6IiLCKX/fxcg/DdGmS5BP7fIGQ0hw7DQi5Q//8midImXygdJ0tlz/1NAgXIANV6MA2Vy2y27jv/+1LEBIALOHOTvGGAMXWhbnTxGZ+LOa2FNMsDtj9/jUmPqqqARrNvlVjDDoGZqq0T11A0DVqeEnlQk8q4sVEp0FcqdxLoEJ0RPYWvIlQkbGA0Anw6VJJgqRKw1NJaAXkR4ag0/FwCCABbbdbJA0fzVgdvgvu5Px6Rwiv3VllZVDREqmWntLyBDka3sz951iTve+ddHP0/M3P/+ydU4zbqOZOeop5jfu1kwk8VezPeGc1hRMbWrJNv6SO/fH0Mc15KYvKqAAAAdrdsrbBDuBpp4v/7UsQGgguVE2ekjNP5aSBo6YSNgKAQUoCZEBJK8q73G/nhJFFmLY5dNc4b7gjBRyEs5yjJokY9TBoU/pXQBglyNjeiA87V8vkzaw019YTu2fxY0t6gteLMI37f9fYw7UVnWoE4NJOSpQBu3GfVAIVACgw+IikZZAnB7UKlLGnha4PDbIhsBhk4RYmlE2hYZ8NrQ5HnyEUvZxDyVG1hM33ZZH0OlrJV5///3/51qTGtJgxhREVLEfoO1w6686eRAAAAUicksbA1qegZCe2AuEgJ//tSxAkCDF0XSaw8ailyn+l1h4w1BvVY04S56fYY5nGkBZHMGLBjHDUMlORG4wcCT9R6RB+3vM8jVMU1hmlOoXIOMKqotE2HxWYNJq/7EZ2l63NJ+Z2aTA4Yq+7t0PhOxCz9WP1mA3DJZZGDkRfq+qFAGwhwHUAVqBfDiMUlypaMWApR1VoWLChfUpJzkBDMCTf85UZr6jyHa1psZnTS5iKatTVKcX/Ker9zMvM1T0okGyiQcreJbU1tc+Yj/ms3395FBIADkjlkjbAZNdiwgRD/+1LEBwAL8Tdbp6Rh+XmT6XWHjCx5U4sTCtlUidNtS9I7oUx7oxdIZlOghkIQYzB0vxtMs6QgCg4WMVakQMM5HRfrsdIEftM0yfOHnNGkiPRMoWCKSsxsChat8/vYw4c4t+CMMB5AAAAXZrftWiEVdbSgnURZoWvK2KhK9GfCkIGnQKxIqbYJ0JCNFJ3St1wuUNRLW4Kw5VhLVGrmgYKhhRe1qzzC7SqFFyjJlIqXcPD6gw//epZ9bwQFw+s+rdVAFtzl0AAAA3I3JK0QJxtCHv/7UsQGAApAM0WssGFpSCKqNYMMvgZph6CwIhKEt0yEiMwFKpnDBBajVc5jbTM7KayRt3I43h8Ag05kd9AtqO0bItmf/+Aevzf7dx28sK0hvP//3/izNwf1pfEAgANutuOJACSqWvuW+SKNLQSpOQKsrX3XxnZxy2Rus0Q1irPy9Mkg4kZGJFRQUax4R+jsACwavqYd2bmRX/6VnKrLk2Z2VGYwQNCIEasJh7/oBScAAMtBNgBWssKw0uCAgKkVpJirpZyBklUCwqaSIkW6BgIY//tSxBIDSYw3Km0kSoEzi9KAliSw9QNAydBqoFQVEQNBwiJYiBWdDqxiwVBUGqg6JgaBoGj3//////huVcFQsIRoPjBXLBGA8AkCwOhcD4KAmFAtEYcR6E8gD2OAXJ2N//uSJVZVJNRdh0gkLCwuKioqz4sLC3//////4sLC31ioqKpAoqKirOgFqkxBTUUzLjk4LjKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+1LEIwPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==").buffer}),define("graphing/tonegenerator",["require","pjs","analytics/bugsnag-stub","browser","graphing/graphmode","math/poi","bin!audio/poi.mp3"],function(e){var t=e("pjs"),n=e("analytics/bugsnag-stub"),i=e("browser"),r=e("graphing/graphmode"),s=e("math/poi"),a=e("bin!audio/poi.mp3"),o=t(function(e){e.init=function(e){if(this.toneType=e,this.pointArray=[],this.pointIndex=0,this.isPlaying=!1,this.audioSpeed=50,this.freqMin=125,this.freqBase=500,this.freqMax=2e3,this.audioPointMove=function(){},this.audioPointReset=function(){},this.playbackSupported)try{this.createNoiseNode()}catch(t){this.playbackSupported=!1}},e.createNoiseNode=function(){this.noiseNode&&(this.noiseNode.stop(),this.noiseNode.disconnect(),this.noiseNode=null);for(var e=2*this.audioCtx.sampleRate,t=0,n=this.audioCtx.createBuffer(1,e,this.audioCtx.sampleRate),i=n.getChannelData(0),r=0;e>r;r++){var s=2*Math.random()-1;i[r]=(t+.02*s)/1.02,t=i[r]}return this.noiseNode=this.audioCtx.createBufferSource(),this.noiseNode.buffer=n,this.noiseNode.loop=!0,this.noiseNode.start(),this},e.setMinMax=function(e,t,n,i){return this.xmin=e,this.xmax=t,this.ymin=n,this.ymax=i,this},e.queueArray=function(e){return e&&e.length&&(this.pointArray=this.pointArray.concat(e),this.pointIndex=0),this},e.queuePoint=function(e){return e&&e.hasOwnProperty("x")&&e.hasOwnProperty("y")&&(this.continuousPlay&&(this.pointArray.length=0),this.pointArray.push(e),this.pointIndex=0),this},e.createOscillator=function(e,t,n,r,s){return this.playbackSupported&&(this.oscillator=this.audioCtx.createOscillator(),this.oscillator.type=this.toneType||"sine",this.oscillatorHigh=this.audioCtx.createOscillator(),this.oscillatorHigh.type=this.toneType||"sine",this.gainOscillatorHigh=this.audioCtx.createGain(),this.gainOscillatorHigh.gain.value=.25,this.oscillatorHigh.connect(this.gainOscillatorHigh),this.gainLeft=this.audioCtx.createGain(),this.gainRight=this.audioCtx.createGain(),this.gainMaster=this.audioCtx.createGain(),this.splitter=this.audioCtx.createChannelSplitter(2),this.merger=this.audioCtx.createChannelMerger(2),this.oscillator.connect(this.splitter),this.splitter.connect(this.gainLeft,0),this.splitter.connect(this.gainRight,0),this.gainLeft.connect(this.merger,0,0),this.gainRight.connect(this.merger,0,1),this.merger.connect(this.gainMaster),this.gainMaster.connect(this.audioCtx.destination),i.IS_APPLE?this.masterVolume=1:this.masterVolume=.5,this.setPan(e),this.setFreq(t),this.setOriginCues(n,r,s)),this},e.startContinuousPlay=function(){return this.continuousPlay=!0,this},e.play=function(){if(this.pointArray.length>0&&this.pointIndex<this.pointArray.length){var e,t,n,i,s=1===this.pointArray.length,a=this.pointArray[this.pointIndex];if(a.graphMode&&a.graphMode!==r.Y&&a.graphMode!==r.POLAR?a.graphMode===r.X&&(t=void 0===a.x||a.x<this.xmin||a.x>this.xmax?-1:Math.abs((a.x-this.xmin+1e-5)/(this.xmax-this.xmin)),e=Math.abs((a.y-this.ymin+1e-5)/(this.ymax-this.ymin)),n=a.y,i=a.x):(e=Math.abs((a.x-this.xmin+1e-5)/(this.xmax-this.xmin)),t=void 0===a.y||a.y<this.ymin||a.y>this.ymax?-1:Math.abs((a.y-this.ymin+1e-5)/(this.ymax-this.ymin)),n=a.x,i=a.y),this.isPlaying?(this.setPan(e),this.setFreq(t),this.setOriginCues(n,i,a.type)):(this.resume(),this.createOscillator(e,t,n,i,a.type),this.playbackSupported&&(this.oscillator.start(),this.oscillatorHigh.start()),this.isPlaying=!0),this.continuousPlay)return;this.audioPointMove(a),s?(this.gainMaster.gain.value=this.masterVolume,this.playTimeout=setTimeout(this.play.bind(this),50)):this.playTimeout=setTimeout(this.play.bind(this),this.audioSpeed),this.pointIndex++}else this.stop();return this},e.setPan=function(e){return this.playbackSupported&&(isFinite(e)||(e=0),e=Math.max(Math.min(e,1),0),this.gainLeft.gain.value=Math.cos(Math.PI/2*e),this.gainRight.gain.value=Math.sin(Math.PI/2*e)),this},e.setFreq=function(e){if(this.playbackSupported){var t;void 0===e||isNaN(e)||0>=e?t=null:(t=parseInt(this.freqBase*Math.pow(2,e),10),t<this.freqMin&&(t=this.freqMin),t>this.freqMax&&(t=this.freqMax)),t?(this.oscillator.frequency.value=t,this.noiseNode.disconnect(),this.oscillator.connect(this.splitter)):(this.oscillator.disconnect(),this.oscillatorHigh.disconnect(),this.noiseNode.connect(this.splitter))}return this},e.setOriginCues=function(e,t,n){return void 0===e||isNaN(e)||void 0===t||isNaN(t)||(0>e?(this.oscillatorHigh.frequency.value=2*this.oscillator.frequency.value,this.gainOscillatorHigh.connect(this.splitter)):this.gainOscillatorHigh.disconnect(),0>t?this.noiseNode.connect(this.splitter):this.noiseNode.disconnect(),
isNaN(n)||n!==s.INTERSECTION||this.playPOI()),this},e.stop=function(){return this.playTimeout&&(clearTimeout(this.playTimeout),this.playTimeout=null),this.pointArray.length=0,this.pointIndex=0,this.isPlaying&&(this.playbackSupported&&(this.oscillator&&(this.oscillator.stop(),this.oscillator.disconnect(),this.oscillator=null),this.oscillatorHigh&&(this.oscillatorHigh.stop(),this.oscillatorHigh.disconnect(),this.oscillatorHigh=null),this.noiseNode.disconnect()),this.isPlaying=!1),this.audioPointReset(),this.continuousPlay=!1,this},e.suspend=function(){return this.playbackSupported&&this.audioCtx&&(this.stop(),this.noiseNode&&(this.noiseNode.stop(),this.noiseNode=null),this.audioCtx.suspend()),this},e.resume=function(){if(!this.audioCtx){var e=window.AudioContext||window.webkitAudioContext;if(i.IS_IE)this.playbackSupported=!1,this.audioCtx=null;else try{this.audioCtx=e?new e:void 0,this.playbackSupported=!0}catch(t){n.notify("Failed to instantiate audioContextClass",t),this.playbackSupported=!1,this.audioCtx=null}}return this.playbackSupported&&this.audioCtx&&("suspended"===this.audioCtx.state&&this.audioCtx.resume(),this.createNoiseNode(),this.loadPOI()),this},e.loadPOI=function(){return!this.playbackSupported||this.poiBuffer?this:(this.audioCtx.decodeAudioData(a,function(e){this.poiBuffer=e}.bind(this)),this)},e.playPOI=function(){if(!this.playbackSupported||!this.poiBuffer)return this;var e=this.audioCtx.createBufferSource();e.buffer=this.poiBuffer,e.connect(this.splitter),e.start()}});return o}),define("graphing/audiograph",["require","jquery","pjs","animation-frame","lib/aria","graphing/audiographnavigator","browser","graphing/graphmode","i18n","./label","keys","math/poi","./tonegenerator","conditional_blur"],function(e){var t=e("jquery"),n=e("pjs"),i=e("animation-frame"),r=e("lib/aria"),s=e("graphing/audiographnavigator"),a=e("browser"),o=e("graphing/graphmode"),c=e("i18n"),l=e("./label"),u=e("keys"),h=e("math/poi"),d=e("./tonegenerator"),p=e("conditional_blur"),f=n(function(e){e.init=function(e,n,i,r,a){e.setAudioTrace(this),this.grapher=e,this.viewport=this.grapher.getProjection().viewport,this.expressionsModel=n,this.expressionsView=i,this.expressionsView.audiograph=this,this.toastView=r,this.evaluator=a,this.audioTraceActive=!1,this.sliderTraceActive=!1,this.sliderIndex=0,this.sliderArray=[],this.lastSpokenBranch=0,this.tonegen=d("triangle"),this.tonegen.suspend(),this.agNavigator=new s(this.grapher,this.expressionsModel,this.tonegen),t(document).on("keydown",this.handleKeydown.bind(this))},e.t=function(e,t){return c.t(e,t,this.grapher.settings.language)},e.speakGraphingAlert=function(e){return!this.audioTraceActive||this.sliderTraceActive&&!this.hasActiveSliders()?(this.graphingAlertTimeout&&clearTimeout(this.graphingAlertTimeout),void(this.graphingAlertTimeout=setTimeout(function(){if(!this.audioTraceActive){var t=this.expressionsView.getItemView(e);if(t&&t.speakFormulaMessage){var n;n=t.regressionView?this.t("Has graph and regression."):this.t("Has graph."),n+=a.IS_APPLE?this.t(" Press OPTION+S for a summary. Press OPTION+T for audio trace."):this.t(" Press ALT+S for a summary. Press ALT+T for audio trace."),t.mathField&&t.mathField.setAriaPostLabel(n),t.speakFormulaMessage(n)}this.graphingAlertTimeout=null}}.bind(this),100))):void this.recomputePoints()},e.handleKeydown=function(e){var t,n=e.altKey||e.metaKey,i=n&&!e.ctrlKey&&!e.shiftKey,r=e.ctrlKey&&!e.metaKey&&!e.altKey;t=a.IS_APPLE?r:n;var s=t&&e.shiftKey&&(61===e.which||187===e.which),o=t&&!e.shiftKey&&(173===e.which||189===e.which),c=t&&!e.shiftKey&&"0"===u.lookupChar(e);i&&"S"===u.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.describeGraph()):i&&"T"===u.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.toggleAudioTrace()):s?(e.preventDefault(),e.stopPropagation(),this.zoom("in")):o?(e.preventDefault(),e.stopPropagation(),this.zoom("out")):c?(e.preventDefault(),e.stopPropagation(),this.zoom("default")):this.audioTraceActive&&(this.sliderTraceActive?this.sliderTraceKeydown(e):this.audioTraceKeydown(e))},e.sliderTraceKeydown=function(e){var t=e.altKey||e.metaKey,n=!t&&!e.ctrlKey&&!e.shiftKey;n&&u.lookup(e)===u.LEFT||"J"===u.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.decrementSliderValue()):n&&u.lookup(e)===u.RIGHT||"L"===u.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.incrementSliderValue()):n&&u.lookup(e)===u.PAGEDOWN?(e.preventDefault(),e.stopPropagation(),this.decrementBigSliderValue()):n&&u.lookup(e)===u.PAGEUP?(e.preventDefault(),e.stopPropagation(),this.incrementBigSliderValue()):t||u.lookup(e)!==u.DOWN&&(e.shiftKey||u.lookup(e)!==u.TAB)&&"K"!==u.lookupChar(e)?!t&&(u.lookup(e)===u.UP||e.shiftKey&&u.lookup(e)===u.TAB||"I"===u.lookupChar(e))?(e.preventDefault(),e.stopPropagation(),this.prevSlider()):n&&u.lookup(e)===u.HOME||"U"===u.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.sliderMin()):n&&u.lookup(e)===u.END||"N"===u.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.sliderMax()):n&&"P"===u.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.toggleSliderAnimation()):(this.stopAnimations(),this.audioTraceKeydown(e)):(e.preventDefault(),e.stopPropagation(),this.nextSlider())},e.audioTraceKeydown=function(e){var t=e.altKey||e.metaKey,n=t&&!e.ctrlKey&&!e.shiftKey,i=!t&&!e.ctrlKey&&!e.shiftKey,s=this.expressionsModel.selectedItem;if(u.lookup(e)===u.UP&&n)this.expressionsView.selectPrevExpression(this.expressionsView.getSelectedView().model),e.preventDefault(),e.stopPropagation(),this.expressionsModel.selectedItem!==s&&this.enterAudioTrace();else if(u.lookup(e)===u.DOWN&&n)this.expressionsView.selectNextExpression(this.expressionsView.getSelectedView().model,!0),e.preventDefault(),e.stopPropagation(),this.expressionsModel.selectedItem!==s&&this.enterAudioTrace();else if(i&&u.lookup(e)===u.LEFT||u.lookup(e)===u.DOWN||"J"===u.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.agNavigator.prevPoint(),this.reportAudioTrace();else if(i&&u.lookup(e)===u.RIGHT||u.lookup(e)===u.UP||"L"===u.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.agNavigator.nextPoint(),this.reportAudioTrace();else if(t||u.lookup(e)!==u.PAGEUP&&(e.shiftKey||u.lookup(e)!==u.TAB)&&"I"!==u.lookupChar(e))if(!t&&(u.lookup(e)===u.PAGEDOWN||e.shiftKey&&u.lookup(e)===u.TAB||"K"===u.lookupChar(e)))e.preventDefault(),e.stopPropagation(),this.agNavigator.prevPOI(),this.reportAudioTrace();else if(i&&u.lookup(e)===u.HOME||"U"===u.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.agNavigator.firstPoint(),this.reportAudioTrace();else if(i&&u.lookup(e)===u.END||"N"===u.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.agNavigator.lastPoint(),this.reportAudioTrace();else if(i&&"X"===u.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.reportAudioTrace("x");else if(i&&"P"===u.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.queuePOICount(),r.alert();else if(i&&"Y"===u.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.reportAudioTrace("y");else if(i&&"T"===u.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.reportAudioTrace("type");else if(i&&"B"===u.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.reportAudioTrace("branch");else if(i&&"O"===u.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.agNavigator.moveToOrigin(),this.reportAudioTrace();else if(i&&"H"===u.lookupChar(e))if(e.preventDefault(),e.stopPropagation(),this.tonegen.playbackSupported){this.tonegen.stop();var a=this.agNavigator.getPoints();a.length>0?(r.alert(this.t("Playing graph.")),this.tonegen.queueArray(a),setTimeout(function(){this.tonegen.play()}.bind(this),500)):r.alert(this.t("Graph is empty."))}else r.alert(this.t("Unable to play audio."));else if(i&&u.lookupChar(e)>="0"&&u.lookupChar(e)<="9"){e.preventDefault(),e.stopPropagation(),this.tonegen.stop();var o=this.agNavigator.getCurrentSketch();if(o){var c;if(c=48===e.which?9:e.which-49,c<o.branches.length)if(this.tonegen.playbackSupported){var l=this.agNavigator.getBranchPoints(c);0===l.length?r.alert(this.t("Branch __branch__ is empty.",{branch:c+1})):(r.alert(this.t("Branch __branch__",{branch:c+1})),this.tonegen.queueArray(l),setTimeout(function(){this.tonegen.play()}.bind(this),500))}else r.alert(this.t("Unable to play audio."));else r.alert(this.t("Branch __branch__ does not exist.",{branch:c+1}))}else r.alert(this.t("No graph selected."))}else t&&u.lookupChar(e)>="1"&&u.lookupChar(e)<="5"?(e.preventDefault(),e.stopPropagation(),this.adjustPlaybackSpeed(u.lookupChar(e))):i&&"A"===u.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.queueAnimatingPoints(!0),r.alert()):i&&"S"===u.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.toggleSliderTrace()):i&&this.exitAudioTrace();else e.preventDefault(),e.stopPropagation(),this.agNavigator.nextPOI(),this.reportAudioTrace()},e.describeGraph=function(){var e=this.agNavigator.getCurrentSketch();if(e){var t=e.branches.length;t>1&&r.queue(this.t("Branches: __branches__.",{branches:t}));var n=e.getPOI();if(r.queue(this.t("Points of interest: __poiCount__.",{poiCount:n.length})),n.length>0)for(var i=0;i<n.length;i++)this.queueCoordinates(n[i])}else r.queue(this.t("No graph information available."));r.alert()},e.queueCoordinates=function(e,t,n){if(e){var i=this.agNavigator.getCurrentSketch();(e.hasOwnProperty("branch")&&i&&i.branches.length>1&&this.lastSpokenBranch!==e.branch||"branch"===t)&&r.queue(this.t("Branch __branch__.",{branch:e.branch+1})),this.lastSpokenBranch=e.branch,e.hasOwnProperty("type")&&!t?r.queue(this.t("__type__ at",{type:this.describePOI(e.type)})):"type"===t&&r.queue(this.describePOI(e.type)),t&&"x"!==t||r.queue(this.t("X: __x__.",{x:l.value(e.x).ariaString})),t&&"y"!==t||r.queue(this.t("Y: __y__.",{y:l.value(e.y).ariaString})),n&&r.alert()}},e.describePOI=function(e){switch(e){case h.INTERSECTION:return this.t("Intersection");case h.ZERO:return this.t("Zero");case h.INTERCEPT:return this.t("Intercept");case h.EXTREMUM:return this.t("Extremum");case h.EDGE:return this.t("Edge");case h.DEFINITION:return this.t("Definition");case h.TRACE:return this.t("Trace");default:return this.t("Not a P O I")}},e.exitAudioTrace=function(e){if(this.audioTraceActive){e||(e=this.t("Audio trace off.")),this.toastView.hide(),this.audioTraceActive=!1,this.expressionsView.setProperty("inAudioTraceMode",!1),this.expressionsModel.unobserve("selectedItem.audiograph"),this.expressionsView.unobserve("itemFocused.audiograph"),this.stopAnimations(),this.sliderTraceActive=!1,this.sliderIndex=0,this.tonegen.stop(),this.tonegen.suspend(),this.agNavigator.reset(),this.lastSpokenBranch=0,this.grapher.traceLayer.traceInfo=null,this.grapher.redrawAllLayers();var t=this.expressionsView.getSelectedView();t&&t.addFocus("end"),r.alert(e),this.resumeAnimations()}},e.enterAudioTrace=function(){var e=this.expressionsModel.getSelected();if(e&&e.formula&&e.formula.error)return this.audioTraceIndex=0,this.exitAudioTrace(),this.toastView.show(this.t("No graph to trace."));var t=this.agNavigator.getCurrentSketch();if(!t)return this.agNavigator.reset(),this.lastSpokenBranch=0,this.exitAudioTrace(),this.toastView.show(this.t("No graph to trace."));var n=t.branches[0].graphMode;return n===o.IMPLICIT?(this.exitAudioTrace(),this.toastView.show(this.t("Sorry, but I can't trace implicit curves yet."))):n===o.PARAMETRIC?(this.exitAudioTrace(),this.toastView.show(this.t("Sorry, but I can't trace parametric curves yet."))):(this.agNavigator.reset(),this.agNavigator.computeStepSizes(),this.lastSpokenBranch=0,this.audioTraceActive||(this.toastView.show(this.t("Audio trace on."),{noAria:!0,onHide:this.exitAudioTrace.bind(this),hideAfter:0}),r.queue(this.t("Audio trace on.")),this.pauseAnimations(),this.queueAnimatingPoints(!1),a.IS_IOS?r.queue(this.t("Use I, J, K, and L to navigate.")):r.queue(this.t("Use Arrow keys to navigate.")),this.tonegen.resume(),this.tonegen.playbackSupported&&r.queue(this.t("Press H to hear the graph.")),a.IS_APPLE?r.queue(this.t("Press OPTION+T to disable audio trace.")):r.queue(this.t("Press ALT+T to disable audio trace.")),p(),this.agNavigator.moveToOrigin(),this.reportAudioTrace(),r.alert(),this.expressionsModel.observe("selectedItem.audiograph",function(){this.expSelectTimeout&&i.cancelAnimationFrame(this.expSelectTimeout),this.expSelectTimeout=i.requestAnimationFrame(function(){if(this.audioTraceActive)if(this.expressionsModel.selectedItem){var e=this.expressionsModel.selectedItem.displayIndex,t=this.t("Expression __index__",{index:e}),n="",i=this.expressionsView.getItemView(this.expressionsModel.selectedItem.id);i.mathField&&(n=i.mathField.mathspeak()),r.queue(this.t("__index__: __expression__",{index:t,expression:n})),this.exitSliderTrace(),this.agNavigator.moveToOrigin(),this.reportAudioTrace(),r.alert()}else this.exitAudioTrace();this.expSelectTimeout=null}.bind(this))}.bind(this)),this.expressionsView.observe("itemFocused.audiograph",function(){this.expFocusTimeout&&i.cancelAnimationFrame(this.expFocusTimeout),this.expFocusTimeout=i.requestAnimationFrame(function(){this.audioTraceActive&&(this.expressionsView.getSelectedView()||this.exitAudioTrace()),this.expFocusTimeout=null}.bind(this),1)}.bind(this))),this.audioTraceActive=!0,void this.expressionsView.setProperty("inAudioTraceMode",!0))},e.pauseAnimations=function(){this.sliderArray.length=0;for(var e=this.expressionsModel.getAllSliders(),t=0;t<e.length;t++){var n=e[t];n.isPlaying&&(n.setProperty("isPlaying",!1),this.sliderArray.push(n))}},e.resumeAnimations=function(){if(0!==this.sliderArray.length){for(var e=0;e<this.sliderArray.length;e++)this.sliderArray[e].setProperty("isPlaying",!0);this.sliderArray.length=0}},e.stopAnimations=function(){for(var e=this.expressionsModel.getAllSliders(),t=0;t<e.length;t++){var n=e[t];n.isPlaying&&n.setProperty("isPlaying",!1)}},e.getAnimatingVars=function(){for(var e=[],t=0;t<this.sliderArray.length;t++)e.push('"'+this.sliderArray[t].expression.dependent+'"');return e},e.hasActiveSliders=function(){for(var e=this.expressionsModel.getAllSliders(),t=0;t<e.length;t++){var n=e[t];if(n.isPlaying)return!0}return!1},e.queueAnimatingPoints=function(e){var t=this.getAnimatingVars();0!==t.length?r.queue(this.t("Animating __vars__.",{vars:t.join(", ")})):e&&r.queue(this.t("No animations."))},e.queueSliderValue=function(){this.hasActiveSliders()||this.tonegen.stop();var e=this.getSelectedSlider();if(e){var t='"'+e.expression.dependent+'"',n=e.value;r.queue(c.t("__label__: __value__.",{label:t,value:n}))}else r.queue(c.t("Unable to determine slider value"))},e.getSelectedSlider=function(){var e=this.expressionsModel.getAllSliders();return this.sliderIndex<=e.length-1?e[this.sliderIndex]:null},e.incrementSliderValue=function(){this.adjustSlider("up")},e.decrementSliderValue=function(){this.adjustSlider("down")},e.incrementBigSliderValue=function(){this.adjustSlider("bigup")},e.decrementBigSliderValue=function(){this.adjustSlider("bigdown")},e.nextSlider=function(){this.adjustSlider("next")},e.prevSlider=function(){this.adjustSlider("prev")},e.sliderMin=function(){this.adjustSlider("min")},e.sliderMax=function(){this.adjustSlider("max")},e.toggleSliderAnimation=function(){this.adjustSlider("animation")},e.adjustSlider=function(e){var t=this.getSelectedSlider();if(!t)return void r.queue(c.t("Unable to adjust slider"));var n=t.value,i=this.expressionsModel.getAllSliders().length;switch(e){case"up":case"down":case"bigup":case"bigdown":case"min":case"max":t.adjust(e);break;case"next":return this.sliderIndex++,this.sliderIndex>=i&&(r.queue(c.t("Last slider.")),this.sliderIndex=i-1),this.queueSliderValue(),void r.alert();case"prev":return this.sliderIndex--,this.sliderIndex<0&&(r.queue(c.t("First slider.")),this.sliderIndex=0),this.queueSliderValue(),void r.alert();case"animation":return t.setProperty("isPlaying",!t.isPlaying),t.isPlaying?r.queue(c.t("__variable__ playing.",{variable:t.expression.dependent})):(r.queue(c.t("__variable__ paused.",{variable:t.expression.dependent})),this.queueSliderValue()),void r.alert()}t.isPlaying||n===t.value||this.queueSliderValue()},e.toggleAudioTrace=function(){this.audioTraceActive?this.exitAudioTrace():this.enterAudioTrace()},e.toggleSliderTrace=function(){this.sliderTraceActive?this.exitSliderTrace():this.enterSliderTrace()},e.enterSliderTrace=function(){if(!this.sliderTraceActive){this.sliderIndex=0;var e=this.expressionsModel.getAllSliders();0!==e.length?(r.queue(c.t("Slider trace on.")),this.queueSliderValue(),this.sliderTraceActive=!0):(r.queue(c.t("No sliders to trace.")),this.sliderTraceActive=!1),r.alert()}},e.exitSliderTrace=function(){this.sliderTraceActive&&(r.queue(c.t("Slider trace off.")),this.sliderTraceActive=!1,this.sliderIndex=0,r.alert())},e.recomputePoints=function(){if(this.audioTraceActive){this.agNavigator.updatePOI(),this.agNavigator.updateCurrentPoint(),this.agNavigator.resetTracePoint();var e=this.hasActiveSliders();if(e){var t=this.agNavigator.getCurrentPoint();this.tonegen.startContinuousPlay().queuePoint(t).play()}else this.agNavigator.resetTracePoint(),this.agNavigator.computeStepSizes(),this.reportAudioTrace()}},e.queuePOICount=function(){var e=0,t=this.agNavigator.getCurrentSketch();if(t){var n=t.getPOI();n&&(e=n.length)}r.queue(this.t("Points of interest, __x__.",{x:e}))},e.reportAudioTrace=function(e,t){var n=this.agNavigator.getCurrentPoint();if(e||(t||this.tonegen.stop(),this.tonegen.queuePoint(n).play()),!t){this.queueCoordinates(n,e);var i=e?0:100;setTimeout(function(){r.alert()},i)}},e.adjustPlaybackSpeed=function(e){switch(e){case"1":return this.tonegen.audioSpeed=150,r.alert(this.t("Graph playback very slow"));case"2":return this.tonegen.audioSpeed=100,r.alert(this.t("Graph playback slow"));case"3":return this.tonegen.audioSpeed=50,r.alert(this.t("Graph playback normal"));case"4":return this.tonegen.audioSpeed=30,r.alert(this.t("Graph playback fast"));case"5":return this.tonegen.audioSpeed=16,r.alert(this.t("Graph playback very fast"));default:return this.tonegen.audioSpeed=50,r.alert(this.t("Graph playback normal"))}},e.zoom=function(e){var t=this.grapher.viewportController;t.zoom(e)}});return f}),define("expressions/abstractitem",["require","pjs","underscore_model"],function(e){var t=e("pjs"),n=e("underscore_model"),i=t(n,function(e,t){var n=1;e.init=function(e,i){t.init.call(this),this.index=-1,this.displayIndex=-1,this.selected=!1,this.list=i,this.graphSettings=i.graphSettings,this.secret=!1;for(var r in e)e.hasOwnProperty(r)&&("id"===r?this[r]=""+e[r]:"object"==typeof e[r]?this[r]=JSON.parse(JSON.stringify(e[r])):this[r]=e[r]);this.hasOwnProperty("id")?parseInt(this.id,10)>=n&&(n=parseInt(this.id,10)+1):this.id=""+n++,this.graphSettings.config.observe("administerSecretFolders",this.updateCollapsedOrSecret.bind(this)),this.observeAndSync("secret",this.updateCollapsedOrSecret.bind(this)),this.observe("folder",this.updateFolder.bind(this)),this.observe("selected",this.__onSelectedChange.bind(this))},e.eachLatex=function(e){},e.onAddedToList=function(){},e.onRemovedFromList=function(){},e.onStateDidChange=function(e){var t=this.id,n=this.getOldProperty(e),i=this.getProperty(e),r=this.list;r.undoRedo.addTransaction({undo:function(){r.getItemById(t).setProperty(e,n)},redo:function(){r.getItemById(t).setProperty(e,i)}})},e.updateCollapsedOrSecret=function(){var e=this.graphSettings.config.administerSecretFolders,t=!(!this.folder||!this.folder.collapsed),n=!(!this.folder||!this.folder.secret||e),i=!(!this.secret||e);this.setProperty("collapsedOrSecret",t||n||i)},e.updateFolder=function(){this.getOldProperty("folder")&&this.getOldProperty("folder").unobserve("."+this.id),this.folder&&(this.folder.observe("collapsed."+this.id,this.updateCollapsedOrSecret.bind(this)),this.folder.observe("secret."+this.id,this.updateCollapsedOrSecret.bind(this))),this.updateCollapsedOrSecret()},e.__onSelectedChange=function(){this.list&&this.list.handleSelectionChange(this),this.folder&&this.selected&&this.collapsedOrSecret&&this.folder.updateSelectedHiddenChild()},e._computeNewSliderLatex=function(e,t){var n=/=(.*?)([-\.0-9]+)/,i=e.match(n);return i?parseFloat(i[2])===t?e:e.replace(n,"=$1"+t):e},e.setSliderValueAndLatex=function(e){this.slider.setProperty("value",e),this.setProperty("latex",this._computeNewSliderLatex(this.latex,e))}});return i}),define("lib/evaluate-single-expression",["require","parser","math/builtinframe","math/parsenode/constant"],function(e){var t=e("parser"),n=e("math/builtinframe"),i=e("math/parsenode/constant");return function(e,r){var s=/^\s*(\-|\+)?([0-9]+(\.[0-9]+)?)\s*$/;if(s.test(e))return parseFloat(e);var a=Object.create(n);return a.trigAngleMultiplier=i(r?Math.PI/180:1),+t.parse(e).tryGetConcreteTree(a).constantValue}}),define("expressions/domain",["require","underscore_model","pjs","lib/evaluate-single-expression","lib/number-to-latex"],function(e){var t=e("underscore_model"),n=e("pjs"),i=e("lib/evaluate-single-expression"),r=e("lib/number-to-latex"),s=n(t,function(e,t){e.init=function(e,n,i,s,a){t.init.call(this),this.min=0,this.max=1,this.minLatex=void 0===i?r(e):i,this.maxLatex=void 0===s?r(n):s,this.lastValidLatex={min:"",max:""},this.validLimits={},this.graphSettings=a,this.computeLimits(),this.observe("minLatex maxLatex",this.computeLimits.bind(this)),this.graphSettings.observe("degreeMode",this.computeLimits.bind(this))},e.computeLimits=function(){var e=this.checkLimits(this.minLatex,this.maxLatex);e.min&&e.max&&(this.lastValidLatex.min=this.minLatex,this.lastValidLatex.max=this.maxLatex,this.setProperty("min",e.values.min),this.setProperty("max",e.values.max)),this.setProperty("validLimits",{min:e.min,max:e.max})},e.checkLimits=function(e,t){var n=this.graphSettings.degreeMode,r=i(e,n),s=i(t,n),a=isFinite(r)&&s>r,o=isFinite(s)&&s>r;return{min:a,max:o,values:{min:r,max:s}}},e.isValid=function(){return isFinite(this.min)&&isFinite(this.max)&&this.max>this.min},e.serialize=function(){return{min:this.min,max:this.max,minLatex:this.minLatex,maxLatex:this.maxLatex}}});return s.deserialize=function(e){return e?s(e.min,e.max,e.minLatex,e.maxLatex,e.graphSettings):s()},s}),define("expressions/slider_loop_modes",{LOOP_FORWARD_REVERSE:"LOOP_FORWARD_REVERSE",LOOP_FORWARD:"LOOP_FORWARD"}),define("expressions/slider",["require","pjs","underscore_model","lib/rounding","expressions/slider_loop_modes","lib/number-to-latex","lib/evaluate-single-expression","graphing/label"],function(e){var t=e("pjs"),n=e("underscore_model"),i=e("lib/rounding"),r=e("expressions/slider_loop_modes"),s=e("lib/number-to-latex"),a=e("lib/evaluate-single-expression"),o=e("graphing/label"),c=t(n,function(e,t){e.DEFAULT_PERIOD=4e3,e.init=function(e,n){t.init.call(this),this.expression=e,n||(n={}),this.hardMin=!!n.hardMin,this.hardMax=!!n.hardMax,this.min=void 0===n.min?-10:n.min,this.max=void 0===n.max?10:n.max,this.minLatex=void 0===n.minLatex?s(this.min):n.minLatex,this.maxLatex=void 0===n.maxLatex?s(this.max):n.maxLatex,this.value=void 0!==n.value?n.value:0,this.step=n.step,this.stepLatex=void 0===n.stepLatex?s(this.step):n.stepLatex,"undefined"===this.stepLatex&&(this.stepLatex=""),this.lastValidLatex={slidermin:"",slidermax:"",sliderstep:""},this.validLimits={},this.animationPeriod=void 0!==n.animationPeriod?n.animationPeriod:this.DEFAULT_PERIOD,this.playDirection=void 0!==n.playDirection?n.playDirection:1,this.isPlaying=void 0!==n.isPlaying?n.isPlaying:!1,this.loopMode=n.loopMode||r.LOOP_FORWARD_REVERSE,this.graphSettings=n.graphSettings,this.observe("isPlaying",this.updateAnimationTargetValue.bind(this)),this.observe("stepper isPlaying",this.updateObservedStepper.bind(this)),this.observe("dragging isPlaying",this.setTransient.bind(this)),this.graphSettings.observe("degreeMode",this.computeLimits.bind(this)),this.observe("isPlaying",function(){this.isPlaying&&(this.animationTargetValue=this.value)}.bind(this)),this.observe("isPlaying dragging",this.setTransient.bind(this)),this.observe("stepper isPlaying",this.updateObservedStepper.bind(this)),this.observe("minLatex maxLatex stepLatex",this.computeLimits.bind(this)),this.updateAnimationTargetValue(),this.computeLimits(),this.setTransient()},e.computeLimits=function(){var e=this.checkLimits(this.minLatex,this.maxLatex,this.stepLatex);e.slidermin&&e.slidermax&&e.sliderstep&&(this.lastValidLatex.slidermin=this.minLatex,this.lastValidLatex.slidermax=this.maxLatex,this.lastValidLatex.sliderstep=this.stepLatex,this.setProperty("min",e.values.min),this.setProperty("max",e.values.max),this.setProperty("step",""===this.stepLatex?void 0:e.values.step))},e.checkLimits=function(e,t,n){var i,r,s=this.graphSettings.degreeMode,o=a(""===e?this.lastValidLatex.slidermin:e,s),c=a(""===t?this.lastValidLatex.slidermax:t,s),l=""===e||isFinite(o)&&c>o&&!(o+"").match(/e/),u=""===t||isFinite(c)&&c>o&&!(c+"").match(/e/);return""===n?(i=NaN,r=!0):(i=a(n,s),r=isFinite(i)&&i>=0&&c-o>=i),{slidermin:l,slidermax:u,sliderstep:r,values:{min:o,max:c,step:i}}},e.updateAnimationTargetValue=function(){this.isPlaying&&(this.animationTargetValue=this.value)},e.setTransient=function(){this.setProperty("transient",this.dragging||this.isPlaying)},e.updateObservedStepper=function(){var e=this.isPlaying&&this.stepper,t=(!e||this.stepper!==this._observedStepper)&&this._observedStepper,n=e&&this._observedStepper!==this.stepper;t&&(this._observedStepper.unobserve("playTime."+this.guid),this._observedStepper=void 0),n&&(this._observedStepper=this.stepper,this._observedStepper.observe("playTime."+this.guid,this.playStep.bind(this)))},e.toggleLoopMode=function(){this.loopMode===r.LOOP_FORWARD_REVERSE?this.setProperty("loopMode",r.LOOP_FORWARD):this.setProperty("loopMode",r.LOOP_FORWARD_REVERSE),this.playDirection=1,this.animationTargetValue=this.min},e.playStep=function(){var e=this.step?this.step/2:0;if(this.loopMode===r.LOOP_FORWARD_REVERSE)this.animationTargetValue>=this.max?this.playDirection=-1:this.animationTargetValue<=this.min&&(this.playDirection=1);else{if(this.loopMode!==r.LOOP_FORWARD)throw new Error("Unexpected slider loop mode: "+this.loopMode);this.playDirection=1,this.animationTargetValue>=this.max+e&&(this.animationTargetValue=this.min-e)}if(this._observedStepper){var t=this._observedStepper,n=t.playTime-t.getOldProperty("playTime");isFinite(n)||(n=0),n=Math.min(n,this.animationPeriod/10);var s=(this.max-this.min)*n/this.animationPeriod;this.animationTargetValue+=s*this.playDirection,this.animationTargetValue=Math.max(this.min-e,Math.min(this.max+e,this.animationTargetValue));var a=this.computeSnappedValue(this.animationTargetValue);this.step||(a=i.shortestDecimalBetween(a-.1*s,a+.1*s)),a=Math.max(this.min,Math.min(this.max,a)),this.expression.setSliderValueAndLatex(a)}},e.serialize=function(){return{min:this.min,max:this.max,hardMin:this.hardMin,hardMax:this.hardMax,step:this.step,value:this.value,playDirection:this.playDirection,animationPeriod:this.animationPeriod,isPlaying:this.isPlaying}},e.computeSnappedValue=function(e){if(this.step){var t=Math.round((e-this.min)/this.step);e=o.value(this.step*t+this.min,this.max-this.min).value}return this.hardMin&&e<this.min&&(e=this.min),this.hardMax&&e>this.max&&(e=this.max),!this.hardMax&&e>a(this.maxLatex,this.graphSettings.degreeMode)&&this.setProperty("maxLatex",s(e)),!this.hardMin&&e<a(this.minLatex,this.graphSettings.degreeMode)&&this.setProperty("minLatex",s(e)),e},e.adjust=function(e){var t=this.value,n=this.computeAdjustment(e);this.isPlaying||t===n||this.commitSliderValue(n)},e.computeAdjustment=function(e){var t=this.min,n=this.max,i=this.value,r=i,s=this.step||1,a=5*s,o=(n-t)%s,c=i!==n?s:o||s,l=(n-t)%a,u=i!==n?a:l||a;switch(e){case"up":r=Math.min(i+c,n);break;case"down":r=Math.max(i-c,t);break;case"bigup":r=Math.min(i+u,n);break;case"bigdown":r=Math.max(i-u,t);break;case"min":r=t;break;case"max":r=n}return r!==i&&(r=this.computeSnappedValue(r)),r},e.commitSliderValue=function(e){if(this.expression){var t=this.value;this.expression.list.undoRedo.performAndAddTransaction({foldType:"sliderDrag"+this.expression.id,undo:function(){this.expression.setSliderValueAndLatex(t)}.bind(this),redo:function(){this.expression.setSliderValueAndLatex(e)}.bind(this)})}}});return c}),define("expressions/expression",["require","pjs","./abstractitem","./domain","./slider","lib/number-to-latex","graphing/dragmode","graphing/reconcileDragMode"],function(e){var t=e("pjs"),n=e("./abstractitem"),i=e("./domain"),r=e("./slider"),s=e("lib/number-to-latex"),a=e("graphing/dragmode"),o=e("graphing/reconcileDragMode"),c=t(n,function(e,t){function n(e){if(!e)return e;var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}e.isExpression=!0,e.init=function(e,r){t.init.call(this,e,r),this.loading=!0,this.formula={error:""},this.unresolved=!1,delete this.slider,this.color?"object"==typeof this.color&&(this.color=this.color.value):this.color=this.list.getNextColor(),void 0===this.style&&(this.style="normal"),void 0===this.hidden&&(this.hasOwnProperty("graphed")?this.hidden=!this.graphed:this.hasOwnProperty("userRequestedGraphing")?this.hidden="never"===this.userRequestedGraphing:this.hidden=!1),void 0===this.latex&&(this.latex=""),void 0===this.label&&(this.label=""),this.isLogModeRegression=!!this.isLogModeRegression,void 0===this.dragMode&&(this.dragMode=a.AUTO),this.domain&&(this.domain.graphSettings=this.graphSettings);var s=this.domain?this.domain:{min:"0",max:"1",graphSettings:this.graphSettings};this.domain=i.deserialize(s),this.domain.observe("minLatex maxLatex",function(e){this.onExpressionDidChange();var t=this.id,n=this.domain.getOldProperty(e),i=this.domain.getProperty(e),r=this.list;r.undoRedo.addTransaction({undo:function(){r.getItemById(t).domain.setProperty(e,n)},redo:function(){r.getItemById(t).domain.setProperty(e,i)}})}.bind(this)),this.domain.observe("min max",this.onExpressionDidChange.bind(this)),this.regressionParameters=this.regressionParameters?n(this.regressionParameters):{},this.residualVariable||(this.residualVariable=""),this.computeShouldGraph(),this.observe("formula",this.onFormulaUpdate.bind(this)),this.observe("latex label color hidden style dragMode",this.onStateDidChange.bind(this)),this.observe("latex label index shouldGraph color style isLogModeRegression dragMode",this.onExpressionDidChange.bind(this)),this.observe("hidden",this.computeShouldGraph.bind(this)),this.observeAndSync("formula dragMode",this.updateReconciledDragMode.bind(this))},e.onStateDidChange=function(e){"latex"===e&&this.slider&&this.slider["transient"]||("style"!==e||void 0!==this.getOldProperty("style"))&&t.onStateDidChange.call(this,e)},e.updateFolder=function(){t.updateFolder.call(this),this.getOldProperty("folder")&&this.getOldProperty("folder").unobserve("."+this.id),this.folder&&this.folder.observe("hidden."+this.id,this.computeShouldGraph.bind(this)),this.computeShouldGraph()},e.computeShouldGraph=function(){return this.folder&&this.folder.hidden?void this.setProperty("shouldGraph",!1):void this.setProperty("shouldGraph",!this.hidden)},e.onExpressionDidChange=function(){this.domain.isValid()&&this.requestParse()},e.eachLatex=function(e){e(this.latex),this.residualVariable&&e(this.residualVariable)},e.getParsableObject=function(){return void 0!==this.latex?{type:"statement",id:this.id,index:this.index,latex:this.latex,label:this.label,domain:this.domain.serialize(),shouldGraph:this.shouldGraph,color:this.color,style:this.style,dragMode:this.dragMode,residualVariable:this.residualVariable,regressionParameters:this.regressionParameters,isLogModeRegression:this.isLogModeRegression}:void 0},e.requestParse=function(){this.list.triggerAddExp(this.getParsableObject())},e.requestUnparse=function(){this.list.triggerRemoveExp(this.id)},e.onAddedToList=function(){this.requestParse()},e.onRemovedFromList=function(){this.slider&&this.slider.setProperty("isPlaying",!1),this.requestUnparse()},e.getState=function(){var e={id:this.id,type:"expression",latex:this.latex,domain:{min:this.domain.minLatex,max:this.domain.maxLatex},label:this.label,hidden:this.hidden,secret:this.secret,
color:this.color,style:this.style,dragMode:this.dragMode,residualVariable:this.residualVariable,regressionParameters:n(this.regressionParameters),isLogModeRegression:this.isLogModeRegression};return this.slider?(e.sliderMin=this.slider.minLatex,e.sliderMax=this.slider.maxLatex,e.sliderHardMin=this.slider.hardMin,e.sliderHardMax=this.slider.hardMax,e.sliderInterval=this.slider.stepLatex,e.sliderAnimationPeriod=this.slider.animationPeriod,e.sliderLoopMode=this.slider.loopMode,e.sliderPlayDirection=this.slider.playDirection,e.sliderIsPlaying=this.slider.isPlaying):this.loading&&(this.hasOwnProperty("sliderMin")&&(e.sliderMin=this.sliderMin),this.hasOwnProperty("sliderMax")&&(e.sliderMax=this.sliderMax),this.hasOwnProperty("sliderHardMin")&&(e.sliderHardMin=this.sliderHardMin),this.hasOwnProperty("sliderHardMax")&&(e.sliderHardMax=this.sliderHardMax),this.hasOwnProperty("sliderInterval")&&(e.sliderInterval=this.sliderInterval),this.hasOwnProperty("sliderAnimationPeriod")&&(e.sliderAnimationPeriod=this.sliderAnimationPeriod),this.hasOwnProperty("sliderLoopMode")&&(e.sliderLoopMode=this.sliderLoopMode),this.hasOwnProperty("sliderPlayDirection")&&(e.sliderPlayDirection=this.sliderPlayDirection),this.hasOwnProperty("sliderIsPlaying")&&(e.sliderIsPlaying=this.sliderIsPlaying)),e},e.onFormulaUpdate=function(){var e=this.formula;this.setProperty("error",e.error?e.error:""),this.setProperty("isGraphable",e.is_graphable),this.setProperty("dependent",e.assignment),this.setProperty("isTableable",e.is_tableable),this.setProperty("unresolved",!1),this.validateStyle(),e.is_slidable?(this.slider||this.createSliderModel(),this.slider["transient"]||this.slider.setProperty("value",e.constant_value)):this.slider=null,e.is_regression?(this.regressionParameters=e.regression.parameters,this.residualVariable=e.regression.residualVariable):this.regressionParameters={}},e.updateReconciledDragMode=function(){var e=this.dragMode===a.AUTO?this.formula.default_drag_mode:this.dragMode;this.setProperty("reconciledDragMode",o(e,this.formula.move_strategy))},e.validateStyle=function(){function e(e){n.style!==e&&(n.style=void 0,n.setProperty("style",e))}var t=this.formula;if(!t.error){var n=this;t.is_point_list?"point"!==this.style&&"open"!==this.style&&"cross"!==this.style&&e("point"):t.is_inequality?e("normal"):"normal"!==this.style&&"dashed"!==this.style&&"dotted"!=this.style&&e("normal")}},e.toggleLogMode=function(){var e=this.id,t=this.isLogModeRegression,n=this.list;n.undoRedo.performAndAddTransaction({undo:function(){n.getItemById(e).setProperty("isLogModeRegression",t)},redo:function(){n.getItemById(e).setProperty("isLogModeRegression",!t)}})},e.createSliderModel=function(){if(this.__singleSliderInstance)return void(this.slider=this.__singleSliderInstance);this.slider=this.__singleSliderInstance=r(this,{minLatex:void 0!==this.sliderMin?this.sliderMin:"-10",maxLatex:void 0!==this.sliderMax?this.sliderMax:"10",hardMin:this.sliderHardMin,hardMax:this.sliderHardMax,animationPeriod:this.sliderAnimationPeriod,loopMode:this.sliderLoopMode,playDirection:this.sliderPlayDirection,isPlaying:this.sliderIsPlaying,stepLatex:this.sliderInterval,value:this.formula.constant_value,graphSettings:this.graphSettings});var e=this.id,t=this.list;this.slider.observe("stepLatex",function(){if(!this.slider["transient"]){var n=this.slider.getOldProperty("stepLatex"),i=this.slider.getProperty("stepLatex");t.undoRedo.addTransaction({undo:function(){t.getItemById(e).slider.setProperty("stepLatex",n)},redo:function(){t.getItemById(e).slider.setProperty("stepLatex",i)}})}}.bind(this)),this.slider.observe("minLatex",function(){if(!this.slider["transient"]){var n=this.slider.getProperty("min"),i=this.slider.getProperty("value"),r=n>i?this.latex:null,s=n>i?this._computeNewSliderLatex(r,n):null,a=this.slider.getOldProperty("minLatex"),o=this.slider.getProperty("minLatex"),c=this.slider.getOldProperty("hardMin"),l=this.slider.getProperty("hardMin");t.undoRedo.performAndAddTransaction({undo:function(){var n=t.getItemById(e);n.slider.setProperty("hardMin",c),n.slider.setProperty("minLatex",a),r&&n.setProperty("latex",r)},redo:function(){var n=t.getItemById(e);n.slider.setProperty("hardMin",l),n.slider.setProperty("minLatex",o),s&&n.setProperty("latex",s)}})}}.bind(this)),this.slider.observe("maxLatex",function(){if(!this.slider["transient"]){var n=this.slider.getProperty("max"),i=this.slider.getProperty("value"),r=i>n?this.latex:null,s=i>n?this._computeNewSliderLatex(r,n):null,a=this.slider.getOldProperty("maxLatex"),o=this.slider.getProperty("maxLatex"),c=this.slider.getOldProperty("hardMax"),l=this.slider.getProperty("hardMax");t.undoRedo.performAndAddTransaction({undo:function(){var n=t.getItemById(e);n.slider.setProperty("hardMax",c),n.slider.setProperty("maxLatex",a),r&&n.setProperty("latex",r)},redo:function(){var n=t.getItemById(e);n.slider.setProperty("hardMax",l),n.slider.setProperty("maxLatex",o),s&&n.setProperty("latex",s)}})}}.bind(this)),this.slider.observe("loopMode",function(){var n=this.slider.getOldProperty("loopMode"),i=this.slider.getProperty("loopMode");t.undoRedo.addTransaction({undo:function(){var i=t.getItemById(e);i.slider.setProperty("loopMode",n)},redo:function(){var n=t.getItemById(e);n.slider.setProperty("loopMode",i)}})}.bind(this)),this.slider.observe("animationPeriod",function(){var n=this.slider.getOldProperty("animationPeriod"),i=this.slider.getProperty("animationPeriod");t.undoRedo.addTransaction({undo:function(){var i=t.getItemById(e);i.slider.setProperty("animationPeriod",n)},redo:function(){var n=t.getItemById(e);n.slider.setProperty("animationPeriod",i)}})}.bind(this)),this.slider.observe("isPlaying",function(){var n=this.slider.serialize(),i=this.latex,r=this.slider.getOldProperty("isPlaying"),s=this.slider.getProperty("isPlaying"),a=function(r){var s=t.getItemById(e);s.setProperty("latex",i);for(var a in n)n.hasOwnProperty(a)&&s.slider.setProperty(a,n[a]);s.slider.setProperty("isPlaying",r)};t.undoRedo.addTransaction({undo:function(){a(r)},redo:function(){a(s)}})}.bind(this)),this.slider.observe("value",function(){var e=this.slider.getProperty("value");e<this.slider.min&&this.slider.setProperty("minLatex",s(e)),e>this.slider.max&&this.slider.setProperty("maxLatex",s(e))}.bind(this)),this.slider.setProperty("stepper",this.list),this.notifyPropertyChange("slider")},e.isEmpty=function(){var e=this.latex||"",t=this.label||"",n=e+t;return""===n.split(" ").join("")}});return c}),define("expressions/text",["require","pjs","./abstractitem"],function(e){var t=e("pjs"),n=e("./abstractitem"),i=t(n,function(e,t){e.isText=!0,e.init=function(e,n){t.init.call(this,e,n),this.text||(this.text=""),this.observe("text",this.onStateDidChange.bind(this))},e.isEmpty=function(){return""===this.text.split(" ").join("")},e.getState=function(){return{id:this.id,type:"text",text:this.text}}});return i}),function(e){"use strict";function t(e){var n,i,r,s=this;if(!(s instanceof t))return new t(e);if(e instanceof t)return s.s=e.s,s.e=e.e,void(s.c=e.c.slice());if(0===e&&0>1/e)e="-0";else if(!l.test(e+=""))throw NaN;for(s.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(0>n&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):0>n&&(n=e.length),i=0;"0"==e.charAt(i);i++);if(i==(r=e.length))s.c=[s.e=0];else{for(;"0"==e.charAt(--r););for(s.e=n-i-1,s.c=[],n=0;r>=i;s.c[n++]=+e.charAt(i++));}}function n(e,t,n,i){var r=e.c,s=e.e+t+1;if(0!==n&&1!==n&&2!==n)throw"!Big.RM!";if(n=n&&(r[s]>5||5==r[s]&&(1==n||i||0>s||null!=r[s+1]||1&r[s-1])),1>s||!r[0])e.c=n?(e.e=-t,[1]):[e.e=0];else{if(r.length=s--,n)for(;++r[s]>9;)r[s]=0,s--||(++e.e,r.unshift(1));for(s=r.length;!r[--s];r.pop());}return e}function i(e,i,r){var s=i-(e=new t(e)).e,o=e.c;for(o.length>++i&&n(e,s,t.RM),s=o[0]?r?i:(o=e.c,e.e+s+1):s+1;o.length<s;o.push(0));return s=e.e,1==r||2==r&&(s>=i||a>=s)?(e.s<0&&o[0]?"-":"")+(o.length>1?(o.splice(1,0,"."),o.join("")):o[0])+(0>s?"e":"e+")+s:e.toString()}t.DP=20,t.RM=1;var r=1e6,s=1e6,a=-7,o=21,c=t.prototype,l=/^-?\d+(?:\.\d+)?(?:e[+-]?\d+)?$/i,u=new t(1);c.cmp=function(e){var n,i=this,r=i.c,s=(e=new t(e)).c,a=i.s,o=e.s,c=i.e,l=e.e;if(!r[0]||!s[0])return r[0]?a:s[0]?-o:0;if(a!=o)return a;if(n=0>a,c!=l)return c>l^n?1:-1;for(a=-1,o=(c=r.length)<(l=s.length)?c:l;++a<o;)if(r[a]!=s[a])return r[a]>s[a]^n?1:-1;return c==l?0:c>l^n?1:-1},c.div=function(e){var i=this,s=i.c,a=(e=new t(e)).c,o=i.s==e.s?1:-1,c=t.DP;if(c!==~~c||0>c||c>r)throw"!Big.DP!";if(!s[0]||!a[0]){if(s[0]==a[0])throw NaN;if(!a[0])throw o/0;return new t(0*o)}var l,h,d,p,f,m=a.slice(),g=l=a.length,v=s.length,y=s.slice(0,l),b=y.length,_=new t(u),x=_.c=[],w=0,S=c+(_.e=i.e-e.e)+1;for(_.s=o,o=0>S?0:S,m.unshift(0);b++<l;y.push(0));do{for(d=0;10>d;d++){if(l!=(b=y.length))p=l>b?1:-1;else for(f=-1,p=0;++f<l;)if(a[f]!=y[f]){p=a[f]>y[f]?1:-1;break}if(!(0>p))break;for(h=b==l?a:m;b;){if(y[--b]<h[b]){for(f=b;f&&!y[--f];y[f]=9);--y[f],y[b]+=10}y[b]-=h[b]}for(;!y[0];y.shift());}x[w++]=p?d:++d,y[0]&&p?y[b]=s[g]||0:y=[s[g]]}while((g++<v||null!=y[0])&&o--);return x[0]||1==w||(x.shift(),_.e--),w>S&&n(_,c,t.RM,null!=y[0]),_},c.minus=function(e){var n,i,r,s,a=this,o=a.s,c=(e=new t(e)).s;if(o!=c)return e.s=-c,a.plus(e);var l=a.c,u=a.e,h=e.c,d=e.e;if(!l[0]||!h[0])return h[0]?(e.s=-c,e):new t(l[0]?a:0);if(l=l.slice(),o=u-d){for(n=(s=0>o)?(o=-o,l):(d=u,h),n.reverse(),c=o;c--;n.push(0));n.reverse()}else for(r=((s=l.length<h.length)?l:h).length,o=c=0;r>c;c++)if(l[c]!=h[c]){s=l[c]<h[c];break}if(s&&(n=l,l=h,h=n,e.s=-e.s),(c=-((r=l.length)-h.length))>0)for(;c--;l[r++]=0);for(c=h.length;c>o;){if(l[--c]<h[c]){for(i=c;i&&!l[--i];l[i]=9);--l[i],l[c]+=10}l[c]-=h[c]}for(;0==l[--r];l.pop());for(;0==l[0];l.shift(),--d);return l[0]||(l=[d=0]),e.c=l,e.e=d,e},c.mod=function(e){e=new t(e);var n,i=this,r=i.s,s=e.s;if(!e.c[0])throw NaN;return i.s=e.s=1,n=1==e.cmp(i),i.s=r,e.s=s,n?new t(i):(r=t.DP,s=t.RM,t.DP=t.RM=0,i=i.div(e),t.DP=r,t.RM=s,this.minus(i.times(e)))},c.plus=function(e){var n,i=this,r=i.s,s=(e=new t(e)).s;if(r!=s)return e.s=-s,i.minus(e);var a=i.e,o=i.c,c=e.e,l=e.c;if(!o[0]||!l[0])return l[0]?e:new t(o[0]?i:0*r);if(o=o.slice(),r=a-c){for(n=r>0?(c=a,l):(r=-r,o),n.reverse();r--;n.push(0));n.reverse()}for(o.length-l.length<0&&(n=l,l=o,o=n),r=l.length,s=0;r;s=(o[--r]=o[r]+l[r]+s)/10^0,o[r]%=10);for(s&&(o.unshift(s),++c),r=o.length;0==o[--r];o.pop());return e.c=o,e.e=c,e},c.pow=function(e){var n=0>e,i=new t(this),r=u;if(e!==~~e||-s>e||e>s)throw"!pow!";for(e=n?-e:e;1&e&&(r=r.times(i)),e>>=1,e;)i=i.times(i);return n?u.div(r):r},c.round=function(e,i){var s=new t(this);if(null==e)e=0;else if(e!==~~e||0>e||e>r)throw"!round!";return n(s,e,null==i?t.RM:i),s},c.sqrt=function(){var e,i,r,s=this,a=s.c,o=s.s,c=s.e,l=new t("0.5");if(!a[0])return new t(s);if(0>o)throw NaN;o=Math.sqrt(s.toString()),0==o||o==1/0?(e=a.join(""),e.length+c&1||(e+="0"),i=new t(Math.sqrt(e).toString()),i.e=((c+1)/2|0)-(0>c||1&c)):i=new t(o.toString()),o=i.e+(t.DP+=4);do r=i,i=l.times(r.plus(s.div(r)));while(r.c.slice(0,o).join("")!==i.c.slice(0,o).join(""));return n(i,t.DP-=4,t.RM),i},c.times=function(e){var n,i=this,r=i.c,s=(e=new t(e)).c,a=r.length,o=s.length,c=i.e,l=e.e;if(e.s=i.s==e.s?1:-1,!r[0]||!s[0])return new t(0*e.s);for(e.e=c+l,o>a&&(n=r,r=s,s=n,l=a,a=o,o=l),l=a+o,n=[];l--;n.push(0));for(c=o-1;c>-1;c--){for(o=0,l=a+c;l>c;o=n[l]+s[c]*r[l-c-1]+o,n[l--]=o%10|0,o=o/10|0);o&&(n[l]=(n[l]+o)%10)}for(o&&++e.e,!n[0]&&n.shift(),l=n.length;!n[--l];n.pop());return e.c=n,e},c.toString=c.valueOf=function(){var e=this,t=e.e,n=e.c.join(""),i=n.length;if(a>=t||t>=o)n=n.charAt(0)+(i>1?"."+n.slice(1):"")+(0>t?"e":"e+")+t;else if(0>t){for(;++t;n="0"+n);n="0."+n}else if(t>0)if(++t>i)for(t-=i;t--;n+="0");else i>t&&(n=n.slice(0,t)+"."+n.slice(t));else i>1&&(n=n.charAt(0)+"."+n.slice(1));return e.s<0&&e.c[0]?"-"+n:n},c.toExponential=function(e){if(null==e)e=this.c.length-1;else if(e!==~~e||0>e||e>r)throw"!toExp!";return i(this,e,1)},c.toFixed=function(e){var t,n=this,s=a,c=o;if(a=-(o=1/0),null==e?t=n.toString():e===~~e&&e>=0&&r>=e&&(t=i(n,n.e+e),n.s<0&&n.c[0]&&t.indexOf("-")<0&&(t="-"+t)),a=s,o=c,!t)throw"!toFix!";return t},c.toPrecision=function(e){if(null==e)return this.toString();if(e!==~~e||1>e||e>r)throw"!toPre!";return i(this,e-1,2)},"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define("vendor/big",[],function(){return t}):e.Big=t}(this),define("big",["require","vendor/big"],function(e){var t=e("vendor/big");return t.prototype.equals=function(e){return 0===this.cmp(e)},t}),define("expressions/table",["require","underscore","pjs","underscore_model","graphing/columnmode","graphing/dragmode","big","./abstractitem","graphing/label"],function(e){var t=e("underscore"),n=e("pjs"),i=e("underscore_model"),r=e("graphing/columnmode"),s=e("graphing/dragmode"),a=e("big"),o=e("./abstractitem"),c=e("graphing/label"),l=n(i,function(e,t){e.init=function(e,n){t.init.call(this),this.column=e,n&&(this.value=n.value,this.error=n.error)},e.isEmpty=function(){return""===this.value.split(" ").join("")}}),u=n(o,function(e,n){function i(e){for(var n=[],i=0;i<e.length;i++){var r,s=e[i];r=t.isNumber(s)?isFinite(s)?c.truncatedLatexLabel(s,{zeroCutoff:1e-15,digits:8,bigCutoff:1e6,smallCutoff:.001}):"\\mathrm{undefined}":"",n.push(r)}return n}e.init=function(e,t,i){if((void 0!==i.showPoints||void 0!==i.showLine)&&(i=JSON.parse(JSON.stringify(i)),i.showPoints&&i.showLine?i.columnMode=r.POINTS_AND_LINES:i.showPoints?i.columnMode=r.POINTS:i.showLine?i.columnMode=r.LINES:(i.hidden=!0,i.columnMode=r.POINTS)),this.latex="",this.hidden=!1,this.columnMode=r.POINTS,this.dragMode=s.NONE,this.values=[],this.error="",n.init.call(this,i,e.list),this.color||(this.color=e.list.getNextColor()),this.style||(this.style="point"),0!==t&&0===this.values.length&&e.columns[0].cells){this.values=[];for(var a=e.columns[0].cells.length,o=0;a>o;o++)this.values.push("")}var c=this;this.cells=this.values.map(function(e){return l(c,{value:String(e)})}),delete this.values,this.table=e,this.index=t,0===t&&(this.hidden=!0),this.isGraphable=!this.error,this.observe("error",function(){this.setProperty("isGraphable",!this.error)}.bind(this)),this.observe("color columnMode dragMode hidden latex style",this.onStateChange.bind(this)),this.observe("hidden hiddenByTable",this.computeShouldGraph.bind(this)),this.computeShouldGraph(),this.observe("shouldGraph",this.table.requestParse.bind(this.table)),this.observe("columnMode hidden draggable",function(){this.columnMode!==r.LINES&&this.draggable||this.setProperty("dragMode",s.NONE)}.bind(this)),this.observe("dragMode",function(){this.dragMode!==s.NONE&&this.columnMode===r.LINES&&this.setProperty("columnMode",r.POINTS_AND_LINES)}.bind(this))},e.computeShouldGraph=function(){this.setProperty("shouldGraph",!this.hiddenByTable&&!this.hidden)},e.onStateChange=function(e){function t(){return r.getItemById(n).columns[i]}this.table.requestParse();var n=this.table.id,i=this.index,r=this.table.list,s=this.getOldProperty(e),a=this.getProperty(e);r.undoRedo.addTransaction({undo:function(){t().setProperty(e,s)},redo:function(){t().setProperty(e,a)}})},e.isEmpty=function(){return""===this.latex.split(" ").join(" ")},e.getValues=function(){for(var e=[],t=this.cells.length,n=0;t>n;n++){var i=this.cells[n].value;null===i||void 0===i?e.push(""):e.push(String(i))}return e},e.triggerRowChange=function(){},e.insertCell=function(e,t){var n=l(this,{value:t});this.cells.splice(e,0,n),this.independentValues&&this.independentValues.splice(e,0,"")},e.removeCell=function(e){this.cells.splice(e,1),this.independentValues&&this.independentValues.splice(e,1)},e.setComputedValues=function(e){this.setProperty("error",e.error),this.setProperty("discrete",e.discrete),this.setProperty("disabled",e.dependent),this.setProperty("draggable",!e.error&&!e.dependent),this.setErrors(e.values),e.dependent?(this.independentValues||(this.independentValues=this.getValues()),this.setValues(i(e.values))):this.independentValues&&(this.setValues(this.independentValues),this.independentValues=null,this.table.requestParse())},e.getValue=function(e){return this.cells[e]?this.cells[e].value:void 0},e.setValue=function(e,t){this.cells[e]&&this.cells[e].setProperty("value",t)},e.setValues=function(e){for(var t=0;t<Math.min(e.length,this.cells.length);t++)this.cells[t].setProperty("value",e[t]);for(;t<this.cells.length;t++)this.cells[t].setProperty("value","")},e.setErrors=function(e){for(var t=0;t<e.length;t++)"string"==typeof e[t]?this.cells[t].setProperty("error",e[t]):this.cells[t].setProperty("error","")},e.serialize=function(){return{values:this.getValues(),columnMode:this.columnMode,dragMode:this.dragMode,hidden:this.hidden,id:this.id,color:this.color,style:this.style,latex:this.latex}}}),h=n(o,function(e,n){e.isTable=!0,e.init=function(e,i){var r,s;if(n.init.call(this,e,i),this.list=i,this.selectedCell=null,this.headings&&(this.columns=this.headings,delete this.headings),this.rows){for(s=0;s<this.columns.length;s++){var a=this.columns[s];for(a.values=[],r=0;r<this.rows.length;r++)a.values.push(this.rows[r][s])}delete this.rows}var o,c=0;for(o=0;o<this.columns.length;o++)this.columns[o].values||(this.columns[o].values=[]),this.columns[o].values.length>c&&(c=this.columns[o].values.length);for(o=0;o<this.columns.length;o++)for(var l=c-this.columns[o].values.length;l>0;l--)this.columns[o].values.push("");var h=this;this.columns||(this.columns=[]),this.columns=this.columns.map(function(e,t){return u(h,t,e)});var d=[];for(o=0;c>o;o++)d.push("");this.columns.push(u(this,this.columns.length,{disabled:!0,values:d}));var p=this.columns[0].cells.length;t.each(this.columns,function(e){e.insertCell(p,"")}),this.observe("selected",this.onSelectedChange.bind(this)),this.observe("formula",this.onFormulaUpdate.bind(this))},e.onFormulaUpdate=function(){this.setComputedValues(this.formula.column_data)},e.updateFolder=function(){n.updateFolder.call(this),this.getOldProperty("folder")&&this.getOldProperty("folder").unobserve("."+this.id),this.folder&&this.folder.observe("hidden."+this.id,this.computeColumnsHidden.bind(this)),this.computeColumnsHidden()},e.computeColumnsHidden=function(){var e=this.folder&&this.folder.hidden;t.each(this.columns,function(t){t.setProperty("hiddenByTable",e)})},e.onSelectedChange=function(){this.selected||this.setProperty("selectedCell",null)},e.insertColumn=function(e,t){var n=this.id,i=this.list;i.undoRedo.performAndAddTransaction({undo:function(){var t=i.getItemById(n);t.__removeColumn(e)},redo:function(){var r=i.getItemById(n);r.__insertColumn(e,t),t=r.columns[e].serialize()}})},e.removeColumn=function(e){var t=this.id,n=this.columns[e].serialize(),i=this.list;i.undoRedo.performAndAddTransaction({undo:function(){var r=i.getItemById(t);r.__insertColumn(e,n)},redo:function(){var n=i.getItemById(t);n.__removeColumn(e)}})},e.moveColumn=function(e,t){var n=this.id,i=this.list;i.undoRedo.performAndAddTransaction({undo:function(){var r=i.getItemById(n);r.__moveColumn(t,e)},redo:function(){var r=i.getItemById(n);r.__moveColumn(e,t)}})},e.triggerColumnAdded=function(e){},e.__insertColumn=function(e,t){t||(t={});var n=u(this,e,t);this.columns.splice(e,0,n);for(var i=e+1;i<this.columns.length;i++)this.columns[i].setProperty("index",i);this.triggerColumnAdded(e),this.requestParse()},e.triggerColumnRemoved=function(e){},e.__removeColumn=function(e){this.requestUnparseColumn(e),this.columns.splice(e,1);for(var t=e;t<this.columns.length;t++)this.columns[t].setProperty("index",t);this.triggerColumnRemoved(e),this.requestParse()},e.getAutofillValues=function(e){var t,n=this.columns.length,i=[];for(t=0;n>t;t++)i.push("");var r,s=this.columns[0].getValues();try{for(e>1&&(r=a(s[1]).minus(s[0])),t=2;e>t&&void 0!==r;t++){var o=a(s[t]).minus(s[t-1]);r.equals(o)||(r=void 0)}}catch(c){r=void 0}return void 0!==r&&(i[0]=r.plus(s[e-1]).toString()),i},e.setComputedValues=function(e){this.setProperty("changingMultipleCells",!0);var t,n=this.columns[0].cells.length-1,i=0;for(t=0;t<e.length;t++){var r=e[t].values.length;r>i&&(i=r)}for(t=i-n;t>0;t--)this.__insertRow(n),n++;for(t=0;t<e.length;t++)this.columns[t].setComputedValues(e[t]);this.setProperty("changingMultipleCells",!1),this.triggerEvent("computedValuesSet")},e.triggerRowAdded=function(e){},e.__insertRow=function(e,t){for(var n=0;n<this.columns.length;n++)this.columns[n].insertCell(e,t?t[n]:"");this.triggerRowAdded(e)},e.insertRow=function(e,t){this.__insertRow(e,t);var n=this.id,i=this.list;i.undoRedo.addTransaction({undo:function(){i.getItemById(n).removeRow(e)},redo:function(){i.getItemById(n).insertRow(e,t)}}),this.requestParse()},e.triggerRowRemoved=function(e){},e.removeRow=function(e){var t=[];if(this.columns.length&&!(this.columns[0].cells.length<=2)){for(var n=0;n<this.columns.length;n++)t.push(this.columns[n].cells[e].value),this.columns[n].removeCell(e);this.triggerRowRemoved(e);var i=this.id,r=this.list;r.undoRedo.addTransaction({undo:function(){r.getItemById(i).insertRow(e,t)},redo:function(){r.getItemById(i).removeRow(e)}}),this.requestParse()}},e.eachLatex=function(e){for(var t=0;t<this.columns.length;t++){var n=this.columns[t];e(n.latex);for(var i=0;i<n.cells.length;i++)n.cells[i].value&&e(n.cells[i].value)}},e.getParsableObject=function(){var e=this,t=this.columns.map(function(t){var n=t.serialize();return n.hidden=!t.shouldGraph,n.tableId=e.id,n.values.pop(),n});return t.pop(),{type:"table",id:e.id,columns:t}},e.requestParse=function(){this.list.triggerAddExp(this.getParsableObject())},e.requestUnparse=function(){for(var e=[this.id],t=0;t<this.columns.length;t++)e.push(this.columns[t].id);this.list.triggerRemoveExps(e)},e.onAddedToList=function(){this.requestParse()},e.onRemovedFromList=function(){this.requestUnparse()},e.requestUnparseColumn=function(e){this.list.triggerRemoveExp(this.columns[e].id)},e.getColumnByIndex=function(e){return this.columns[e]},e.getColumnById=function(e){for(var t=0;t<this.columns.length;t++)if(this.columns[t].id===e)return this.columns[t];return null},e.getState=function(){var e=this.columns.map(function(e){var t=e.serialize();return t.values.pop(),e.disabled&&(t.values=t.values.map(function(){return""})),t});return e.pop(),{id:this.id,columns:e,type:"table",secret:this.secret}},e.isEmpty=function(){return!1}});return h}),define("loadcss!css/folder",function(){}),define("expressions/folder",["require","loadcss!css/folder","pjs","underscore","./abstractitem"],function(e){e("loadcss!css/folder");var t=e("pjs"),n=e("underscore"),i=e("./abstractitem"),r=t(i,function(e,t){function i(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}e.isFolder=!0,e.init=function(e,n){t.init.call(this,e,n),this.title||(this.title=""),this.memberIds=this.memberIds?i(this.memberIds):{},this.hidden=!!this.hidden,this.collapsed=!!this.collapsed,this.secret=!!this.secret,this.updateCount(),this.observe("selected collapsed",this.updateSelectedHiddenChild.bind(this)),this.observe("title hidden collapsed secret",this.onStateDidChange.bind(this))},e.updateCount=function(){this.setProperty("count",n.size(this.memberIds))},e.getState=function(){return{id:this.id,type:"folder",title:this.title,memberIds:i(this.memberIds),hidden:this.hidden,collapsed:this.collapsed,secret:this.secret}},e._addItem=function(e){var t=this.list,n=t.getItemById(e);this.memberIds[e]=!0,n&&n.setProperty("folder",this),this.updateCount()},e._removeItem=function(e){var t=this.list,n=t.getItemById(e);n&&n.setProperty("folder",void 0),this.memberIds.hasOwnProperty(e)&&delete this.memberIds[e],this.updateCount()},e.addItem=function(e){var t=this.list,n=this.id,i=e.id;t.undoRedo.performAndAddTransaction({redo:function(){t.getItemById(n)._addItem(i)},undo:function(){t.getItemById(n)._removeItem(i)}})},e.removeItem=function(e){var t=this.list,n=this.id,i=e.id;t.undoRedo.performAndAddTransaction({redo:function(){t.getItemById(n)._removeItem(i)},undo:function(){t.getItemById(n)._addItem(i)}})},e.updateSelectedHiddenChild=function(){var e=this.list.getSelected();this.collapsed?e&&this.memberIds.hasOwnProperty(e.id)?(this.setProperty("selectedHiddenChild",e),this.setProperty("selected",!0)):e!==this&&this.setProperty("selectedHiddenChild",null):(e===this&&this.selectedHiddenChild&&this.selectedHiddenChild.setProperty("selected",!0),this.setProperty("selectedHiddenChild",null))}});return r}),define("expressions/helperexpression",["require","pjs","math/evaluationstate","./abstractitem","./slider","graphing/dragmode"],function(e){var t=e("pjs"),n=e("math/evaluationstate"),i=e("./abstractitem"),r=e("./slider"),s=e("graphing/dragmode"),a=t(i,function(e,t){e.isHelperExpression=!0,e.init=function(e,i){t.init.call(this,e,i),this.hidden=!!this.hidden,this.is_slidable=!1,this.formula=n["default"](),this.observe("formula",this.onFormulaUpdate.bind(this)),this.observe("latex hidden color",this.onExpressionDidChange.bind(this))},e.onExpressionDidChange=function(){this.requestParse()},e.getParsableObject=function(){return{type:"statement",id:this.id,latex:this.latex,shouldGraph:!this.hidden,color:this.color}},e.requestParse=function(){this.list.triggerAddExp(this.getParsableObject())},e.requestUnparse=function(){this.list.triggerRemoveExp(this.id)},e.onAddedToList=function(){this.requestParse()},e.onRemovedFromList=function(){this.slider&&this.slider.setProperty("isPlaying",!1),this.requestUnparse()},e.getState=function(){var e={id:this.id,latex:this.latex,color:this.color,hidden:this.hidden};return this.slider&&(e.sliderMin=this.slider.min,e.sliderMax=this.slider.max,e.sliderHardMin=this.slider.hardMin,e.sliderHardMax=this.slider.hardMax,e.sliderInterval=this.slider.step,e.sliderAnimationPeriod=this.slider.animationPeriod,e.sliderPlayDirection=this.slider.playDirection,e.sliderIsPlaying=this.slider.isPlaying),e},e.onFormulaUpdate=function(){var e=this.formula;this.setProperty("error",e.error?e.error:""),e.is_slidable?(this.slider||this.createSliderModel(),this.slider.setProperty("value",e.constant_value)):this.slider=null,this.setProperty("is_slidable",e.is_slidable),this.setProperty("reconciledDragMode",e.default_drag_mode||s.NONE)},e.createSliderModel=function(){return this.__singleSliderInstance?void(this.slider=this.__singleSliderInstance):(this.slider=this.__singleSliderInstance=r(this,{min:void 0!==this.sliderMin?this.sliderMin:-10,max:void 0!==this.sliderMax?this.sliderMax:10,hardMin:this.sliderHardMin,hardMax:this.sliderHardMax,animationPeriod:this.sliderAnimationPeriod,playDirection:this.sliderPlayDirecction,isPlaying:this.sliderIsPlaying,step:this.sliderInterval,value:this.formula.constant_value,graphSettings:this.graphSettings}),void this.notifyPropertyChange("slider"))},e.isEmpty=function(){var e=this.latex;return!e||""===e.split(" ").join("")}});return a}),define("expressions/image",["require","pjs","./abstractitem","./helperexpression","i18n","underscore"],function(e){var t=e("pjs"),n=e("./abstractitem"),i=e("./helperexpression"),r=e("i18n"),s=e("underscore"),a=t(n,function(e,t){e.isImage=!0,e.init=function(e,n){function i(){this.setProperty("showPoints",this.shouldGraph&&this.selected&&this.loaded)}t.init.call(this,e,n),this.hidden=!!this.hidden,this.shouldGraph=!this.hidden,this.errors={},this.helpers={},this.alias_helpers={},this.point_helpers=[],this.imageObj=new Image,this.observe("x y width height name opacity shouldGraph",this.onStateDidChange.bind(this)),this.observe("hidden",this.computeShouldGraph.bind(this)),this.observe("shouldGraph",n.triggerRedrawImages.bind(n)),this.observe("opacity",n.triggerRedrawImages.bind(n)),this.observe("showPoints",this.onShowPointsChange.bind(this)),this.observe("errors",this.onErrorsChange.bind(this)),this.observe("image_url",this.loadImage.bind(this)),this.observe("shouldGraph selected loaded",i.bind(this)),this.createInputHelper("x"),this.createInputHelper("y"),this.createInputHelper("width"),this.createInputHelper("height"),this.createAliasHelper("x"),this.createAliasHelper("y"),this.createAliasHelper("width"),this.createAliasHelper("height"),this.createResizeHelper("left","top"),this.createResizeHelper("left","middle"),this.createResizeHelper("left","bottom"),this.createResizeHelper("middle","bottom"),this.createResizeHelper("right","bottom"),this.createResizeHelper("right","middle"),this.createResizeHelper("right","top"),this.createResizeHelper("middle","top"),this.createMoveHelper(),this.image_url&&this.loadImage()},e.t=function(e,t){return r.t(e,t,this.graphSettings.language)},e.computeShouldGraph=function(){var e=this.folder&&this.folder.hidden?!1:!this.hidden;this.setProperty("shouldGraph",e)},e.computeVariables=function(){var e=s.flatten([this.helpers.x.formula.variables,this.helpers.y.formula.variables,this.helpers.width.formula.variables,this.helpers.height.formula.variables]),t=s.uniq(e);this.setProperty("variables",t)},e.onErrorsChange=function(){var e={x:this.t("Invalid x coordinate."),y:this.t("Invalid y coordinate."),width:this.t("Invalid width."),height:this.t("Invalid height.")},t=[];for(var n in this.errors)t.push(e[n]);this.setProperty("error",t[0]||"")},e.updateFolder=function(){t.updateFolder.call(this),this.getOldProperty("folder")&&this.getOldProperty("folder").unobserve("."+this.guid),this.folder&&this.folder.observe("hidden."+this.guid,this.computeShouldGraph.bind(this)),this.computeShouldGraph()},e.createInputHelper=function(e){function t(){r.setProperty("latex",n[e])}var n=this,r=i({hidden:!0},n.list);r.id=r.guid,n.helpers[e]=r,r.observe("formula",function(){var t=NaN,i="",s=r.formula;n.computeVariables(),isFinite(s.constant_value)?t=s.constant_value:s.zero_values&&(t=s.zero_values[0].val),isNaN(t)?(i=s.error?s.error:n.t("Does not compute to constant."),n.errors[e]!==i&&(n.errors[e]=i,n.notifyPropertyChange("errors"))):n.errors.hasOwnProperty(e)&&(delete n.errors[e],n.notifyPropertyChange("errors")),n.setProperty("computed_"+e,t)}),n.observe(e,t),t()},e.getAliasIdentifier=function(e){return"a_{"+e+this.guid.split("_").join("")+"}"},e.createAliasHelper=function(e){function t(){r.setProperty("latex",n.getAliasIdentifier(e)+"="+n[e])}var n=this,r=i({hidden:!0},n.list);r.id=r.guid,n.helpers["alias_"+e]=r,r.observe("slider",function(){r.slider.observe("value",function(){n.setProperty(e,r.slider.value.toString())})}),n.observe(e,t),t(),n.alias_helpers[e]=r},e.createResizeHelper=function(e,t){function n(){var n;n=s.alias_helpers.width.is_slidable?s.getAliasIdentifier("width"):s.width;var i;i=s.alias_helpers.height.is_slidable?s.getAliasIdentifier("height"):s.height;var r;r="left"===e?"-("+n+")/2":"right"===e?"+("+n+")/2":"";var o;o="top"===t?"+("+i+")/2":"bottom"===t?"-("+i+")/2":"";var c="\\left\\{1>0:"+s.x+"\\right\\}",l="\\left\\{1>0:"+s.y+"\\right\\}";a.setProperty("latex","("+c+r+","+l+o+")")}function r(){if(s.alias_helpers.width.is_slidable&&s.alias_helpers.height.is_slidable){var n=s.computed_height/s.computed_width,i=s.computed_x,r=s.computed_y;a.constrainPt=function(s){var a=s.x-i,o=n*a*("left"===e?1:-1)*("top"===t?-1:1);return{x:s.x,y:r+o}}}else a.constrainPt=null}var s=this,a=i({color:"#4F81BD",hidden:!0},s.list);a.id=a.guid,s.helpers[e+"_"+t]=a,s.alias_helpers.width.observe("is_slidable",n),s.alias_helpers.height.observe("is_slidable",n),s.observe("x y width height",n),n(),"middle"!==e&&"middle"!==t&&(s.alias_helpers.width.observe("is_slidable",r),s.alias_helpers.height.observe("is_slidable",r),s.observe("computed_x computed_y computed_width computed_height",r),r()),s.point_helpers.push(a)},e.createMoveHelper=function(){function e(){var e;e=t.alias_helpers.x.is_slidable?t.getAliasIdentifier("x"):t.x;var i;i=t.alias_helpers.y.is_slidable?t.getAliasIdentifier("y"):t.y,n.setProperty("latex","("+e+","+i+")")}var t=this,n=i({color:"#4F81BD",hidden:!0},t.list);n.id=n.guid,t.helpers.move=n,t.observe("x y",e),t.alias_helpers.x.observe("is_slidable",e),t.alias_helpers.y.observe("is_slidable",e),e(),t.point_helpers.push(n)},e.onShowPointsChange=function(){var e=!this.showPoints;this.point_helpers.forEach(function(t){t.setProperty("hidden",e)})},e.onAddedToList=function(){
for(var e in this.helpers){var t=this.helpers[e];this.list.addHelperItem(t)}this.list.triggerAddImage(this)},e.onRemovedFromList=function(){for(var e in this.helpers){var t=this.helpers[e];this.list.removeHelperItem(t.id)}this.list.triggerRemoveImage(this),this.imageObj.onload=null},e.loadImage=function(){var e=this;this.imageObj.onload=function(){e.setProperty("loaded",!0)},this.imageObj.src=this.image_url},e.isEmpty=function(){return!1},e.getState=function(){return{id:this.id,image_url:this.image_url,originalFilename:this.originalFilename,name:this.name,hidden:this.hidden,height:this.height,width:this.width,x:this.x,y:this.y,opacity:this.opacity,type:"image",secret:this.secret}},e.onStateDidChange=function(e){if(!this.isUploading){var t=this.getOldProperty(e),n=this.getProperty(e);if(void 0!==t){var i=this.id,r=this.list;r.undoRedo.addTransaction({undo:function(){r.getItemById(i).setProperty(e,t)},redo:function(){r.getItemById(i).setProperty(e,n)}})}}}});return a}),define("lib/named-colors",["require"],function(e){return{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}),define("lib/color-distance",["require","underscore","lib/named-colors"],function(e){function t(e){var t=[],r=e.toLowerCase();if("rgb"===r.slice(0,3))try{t=r.replace(/[^\d,]/g,"").split(",").slice(0,3),t=u.map(t,function(e){return parseInt(e,10)})}catch(s){i(e)}else if("#"===r[0]){var a=/^#?([a-f\d])([a-f\d])([a-f\d])$/;r=r.replace(a,function(e,t,n,i){return t+t+n+n+i+i});try{t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/.exec(r).slice(1),t=u.map(t,function(e){return parseInt(e,16)})}catch(s){i(e)}}else t=h[r];return n(t)||i(e),{R:t[0],G:t[1],B:t[2]}}function n(e){return u.isArray(e)?3!==e.length?!1:u.every(e,function(e){return Number.isInteger(e)&&e>=0&&255>=e}):!1}function i(e){throw new Error("Invalid color string: "+e)}function r(e){var t=e.R,n=e.G,i=e.B,r=[];return r[0]=.49*t+.31*n+.2*i,r[1]=.17697*t+.8124*n+.01063*i,r[2]=.01*n+.99*i,r=u.map(r,function(e){return e/.17697}),{X:r[0],Y:r[1],Z:r[2]}}function s(e){var t=95.047,n=100,i=108.883,r=e.X,s=e.Y,o=e.Z,c=[];return c[0]=116*a(s/n)-16,c[1]=500*(a(r/t)-a(s/n)),c[2]=200*(a(s/n)-a(o/i)),{L:c[0],a:c[1],b:c[2]}}function a(e){var t=6/29;return e>Math.pow(t,3)?Math.pow(e,1/3):e/(3*t*t)+4/29}function o(e,t){var n=1,i=.045,r=.015,s=1,a=1,o=1,c=e.L,l=e.a,u=e.b,h=t.L,d=t.a,p=t.b,f=c-h,m=Math.sqrt(l*l+u*u),g=Math.sqrt(d*d+p*p),v=m-g,y=l-d,b=u-p,_=Math.sqrt(y*y+b*b-v*v),x=1+i*m,w=1+r*m,S=f/(n*o),k=v/(s*x),E=_/(a*w);return Math.sqrt(S*S+k*k+E*E)}function c(e,n){var i=s(r(t(e))),a=s(r(t(n)));return o(i,a)}function l(e,t){var n=u.map(t,function(t){return c(e,t)}),i=u.min(n);return t[n.indexOf(i)]}var u=e("underscore"),h=e("lib/named-colors");return{str2rgb:t,difference:c,closestColor:l}}),define("expressions/list",["require","pjs","underscore","underscore_model","./expression","./text","./table","./folder","./image","lib/rounding","analytics/bugsnag-stub","lib/number-to-latex","graphing/label","graphing/dragmode","lib/color-distance"],function(e){var t=e("pjs"),n=e("underscore"),i=e("underscore_model"),r=e("./expression"),s=e("./text"),a=e("./table"),o=e("./folder"),c=e("./image"),l=e("lib/rounding"),u=e("analytics/bugsnag-stub"),h=e("lib/number-to-latex"),d=e("graphing/label"),p=e("graphing/dragmode"),f=e("lib/color-distance"),m=t(i,function(e,t){function i(e,t){if(t=JSON.parse(JSON.stringify(t)),!e.columns||!t.columns)return t;for(var n=0;n<t.columns.length;n++){var i=e.columns[n],r=t.columns[n];if(i)for(var s in i)i.hasOwnProperty(s)&&(r.hasOwnProperty(s)||(r[s]=i[s]))}return t}function m(e,t){return{left:e.x-t,right:e.x+t,top:e.y+t,bottom:e.y-t}}function g(e,t,n){var i;i=e.assignment?d.identifierToLatex(e.assignment)+"=":"";var r=l.shortestDecimalBetween(t[0].min,t[0].max),s=l.shortestDecimalBetween(t[1].min,t[1].max),a="updateCoordinate"===e.move_strategy[0].type&&v(0,n),o="updateCoordinate"===e.move_strategy[1].type&&v(1,n),c=a?h(r):e.move_strategy[0].inputString,u=o?h(s):e.move_strategy[1].inputString;return i+"\\left("+c+","+u+"\\right)"}function v(e,t){switch(t){case p.X:return 0===e;case p.Y:return 1===e;case p.XY:return!0;default:return!1}}e.init=function(e,n){t.init.call(this),this.__items=[],this.__itemIds={},this.__helperItemIds={},this.drawOrder=[],this.colorIdx=0,this.colors=n.config.colors,this.setPropertyComparator("selectedItem",function(e,t){return e===t}),this.undoRedo=e,this.graphSettings=n,this.graphSettings.config.observe("administerSecretFolders",this._reindex.bind(this))},e.getNextColor=function(){var e=n.values(this.colors),t=e[this.colorIdx];return this.colorIdx=(this.colorIdx+1)%e.length,t},e.tick=function(e){var t=this;t.batchEvaluation(function(){t.setProperty("playTime",e)})},e.getItemByIndex=function(e){return this.__items[e]||null},e.getFirstVisibleItem=function(){var e,t;for(t=0;t<this.__items.length;t++)if(e=this.getItemByIndex(t),!this.itemIsHidden(e))return e},e.getLastVisibleItem=function(){var e,t;for(t=this.__items.length-1;t>=0;t--)if(e=this.getItemByIndex(t),!this.itemIsHidden(e))return e},e.itemIsSecret=function(e){return e&&(e.secret||e.folder&&e.folder.secret)},e.itemIsHidden=function(e){var t=!this.graphSettings.config.administerSecretFolders;return e&&(e.folder&&e.folder.collapsed||this.itemIsSecret(e)&&t)},e.getItemsByIndexRange=function(e,t){e=Math.max(0,e),t=Math.min(this.getItemCount()-1,t);for(var n=[],i=e;t>=i;i++)n.push(this.getItemByIndex(i));return n},e.eachLatex=function(e){for(var t=0;t<this.__items.length;t++)this.__items[t].eachLatex(e)},e.findAvailableColumnSubscript=function(){var e=[];this.eachLatex(function(t){if(-1===t.indexOf("~"))for(var n=new RegExp(/_(\d)|_\{(?:\s|\\space)*(\d+)(?:\s|\\space)*\}/g);;){var i=n.exec(t);if(!i)break;e.push(parseInt(i[1]||i[2],10))}}),e.sort(function(e,t){return e-t});for(var t=1,n=0;n<e.length;n++)e[n]===t&&t++;return t},e.onChange=function(e){var t,n,i;for(t in e)e.hasOwnProperty(t)&&(n=this.getItemById(t),i=e[t],n&&(n.setProperty("loading",!1),n.setProperty("formula",i)))},e.onGraphComputed=function(e,t){var n=this.getItemById(e);if(n){var i=function(e){return e.hasOwnProperty("resolved")?e.resolved:!0},r=!t.every(i);n.setProperty("unresolved",r)}},e.updateDrawOrder=function(){var e=[],t=n.sortBy(this.__itemIds,function(e){return e.index});t=t.concat(n.values(this.__helperItemIds)),n.each(t,function(t){t.hasOwnProperty("columns")?n.each(t.columns,function(t){e.push(t.id)}):e.push(t.id)}),this.setProperty("drawOrder",e)},e.getItemById=function(e){return this.__itemIds[e]||this.__helperItemIds[e]},e._insertItemAt=function(e,t){var n=String(t.id);if(this.__itemIds.hasOwnProperty(n))throw Error("Item with id '"+n+"' is already in list");this.__itemIds[n]=t,this.__items.splice(e,0,t),this._reindex(e-1),t.selected&&this.handleSelectionChange(t),t.observe("secret.list",this._reindex.bind(this)),t.observe("folder.list",this._reindex.bind(this)),t.onAddedToList()},e.handleSelectionChange=function(e){var t=e.selected;t||this.selectedItem!==e?t&&!this.selectedItem?this.setProperty("selectedItem",e):t&&this.selectedItem!==e&&(this.selectedItem.setProperty("selected",!1),this.setProperty("selectedItem",e)):this.setProperty("selectedItem",null)},e.triggerItemInserted=function(e,t){},e.insertItemAt=function(e,t){this._insertItemAt(e,t),this.triggerItemInserted(e,t);var n=this,i=t.constructor,r=t.getState();n.undoRedo.addTransaction({undo:function(){r=t.getState(),n.removeItemAt(e)},redo:function(){n.insertItemAt(e,new i(r,n))}}),this.updateDrawOrder()},e.addHelperItem=function(e){this.__helperItemIds[e.id]=e,e.onAddedToList(),this.updateDrawOrder()},e.removeHelperItem=function(e){var t=this.__helperItemIds[e];t&&(t.onRemovedFromList(),delete this.__helperItemIds[e])},e.addItem=function(e){var t=this.getItemByIndex(this.getItemCount()-1);if(t&&!(t.text||t.columns||t.headings)&&""===t.latex){var n=this;n.undoRedo.oneTransaction(function(){n.removeItemAt(n.getItemCount()-1),n.insertItemAt(n.getItemCount(),e)})}else this.insertItemAt(this.getItemCount(),e)},e.updateItemById=function(e,t){var n=this.getItemById(e);if(n.isTable&&t.columns)t=i(n.getState(),t),this.replaceItemAt(n.index,this.fromState(t));else for(var r in t)if(t.hasOwnProperty(r))switch(r){case"sliderMin":n.slider.setProperty("hardMin",!1),n.slider.setProperty("min",t.sliderMin),n.slider.setProperty("minLatex",h(t.sliderMin));break;case"sliderMax":n.slider.setProperty("hardMax",!1),n.slider.setProperty("max",t.sliderMax),n.slider.setProperty("maxLatex",h(t.sliderMax));break;case"sliderInterval":n.slider.setProperty("step",t.sliderInterval),n.slider.setProperty("stepLatex",h(t.sliderInterval));break;case"domain":n.domain.setProperty("minLatex",h(t.domain.min)),n.domain.setProperty("maxLatex",h(t.domain.max));break;default:n.setProperty(r,t[r])}this.updateDrawOrder()},e.replaceItemAt=function(e,t){var n=this;this.undoRedo.oneTransaction(function(){n.batchEvaluation(function(){n.removeItemAt(e),n.insertItemAt(e,t)})})},e._removeItemAt=function(e){var t=this.__items[e];if(!t)return void u.notify("BadListIndex","list._removeItemAt called with an inconsistent index",{index:e,actualIndices:this.__items.map(function(e){return e.index})});this.selectedItem===t&&this.setProperty("selectedItem",null);var n=this;if(t.isFolder)for(var i in t.memberIds)n.removeItemAt(n.getItemById(i).index);this.__items.splice(e,1),this._reindex(e-1);var r=String(t.id);return delete this.__itemIds[r],t.unobserve(".list"),t.onRemovedFromList(),t},e._reindex=function(e){var t,n=!this.graphSettings.config.administerSecretFolders;e&&this.__items[e]&&this.__items[e].displayIndex?t=this.__items[e].displayIndex:(e=0,t=1);for(var i=e;i<this.__items.length;i++){var r=this.__items[i];r.setProperty("index",i),r.setProperty("displayIndex",t),n&&this.itemIsSecret(r)||(t+=1)}this.setProperty("nextDisplayIndex",t)},e._removeAllItems=function(){for(var e=0;e<this.__items.length;e++)this.__items[e].onRemovedFromList();for(var t in this.__helperItemIds)this.__helperItemIds.hasOwnProperty(t)&&this.__helperItemIds[t].onRemovedFromList();this.__items=[],this.__itemIds={},this.__helperItemIds={},this.setProperty("selectedItem",!1)},e.triggerItemRemoved=function(e,t){},e.removeItemAt=function(e){var t=this;t.undoRedo.oneTransaction(function(){var n=this._removeItemAt(e);if(n){this.triggerItemRemoved(e,n);var i=n.constructor,r=n.getState();n.folder&&n.folder.removeItem(n),t.undoRedo.addTransaction({undo:function(){var n=new i(r,t);t.insertItemAt(e,n)},redo:function(){t.removeItemAt(e)}})}}.bind(this)),this.updateDrawOrder()},e.removeItemById=function(e){var t=this.getItemById(e);t&&(t.isHelperExpression?this.removeHelperItem(t.id):this.removeItemAt(t.index))},e.triggerItemMoved=function(e,t){},e.moveItemTo=function(e,t){var n=this,i=function(e,t){if(e!==t){var i=n.getItemCount(),r=n.__items[e];0>e||0>t||e>=i||t>=i||(n.__items.splice(e,1),n.__items.splice(t,0,r),n._reindex(Math.min(e,t)-1),n.triggerItemMoved(e,t),n.updateDrawOrder())}};n.undoRedo.performAndAddTransaction({undo:function(){i(t,e)},redo:function(){i(e,t)}})},e.moveItemsTo=function(e,t,n){var i=this;i.undoRedo.oneTransaction(function(){var r;if(!(t>=e&&e+n>t))if(t>e)for(r=0;n>r;r++)i.moveItemTo(e,t);else for(r=0;n>r;r++)i.moveItemTo(e+r,t+r)})},e.getItemCount=function(){return this.__items.length},e.hasNoVisibleExpressions=function(){return 1===this.nextDisplayIndex},e.getAllSliders=function(){for(var e=[],t=0;t<this.__items.length;t++){var n=this.__items[t];n.slider&&e.push(n.slider)}return e},e.getSelected=function(){return this.selectedItem},e.setSelected=function(e){var t=e;if("number"==typeof e&&(t=this.getItemByIndex(e)),t)t.setProperty("selected",!0);else{var n=this.getSelected();n&&n.setProperty("selected",!1)}},e.onStartMovingPoint=function(e){if(e.tableInfo)this.setSelected(null);else{var t=this.getItemById(e.sketch.id);if(t&&!t.isHelperExpression&&this.setSelected(null),!t||!t.formula||!t.formula.move_strategy)return;for(var n=t.formula.move_strategy,i=0;i<n.length;i++)if("updateSlider"===n[i].type){var r=this.getItemById(n[i].id);if(r){var s=t.reconciledDragMode;s===p.NONE||0===i&&s===p.Y||1===i&&s===p.X||r.slider.setProperty("dragging",!0)}}}},e.onStopMovingPoint=function(e){if(!e.tableInfo){var t=this.getItemById(e.sketch.id);if(t&&t.formula&&t.formula.move_strategy)for(var n=t.formula.move_strategy,i=0;i<n.length;i++)if("updateSlider"===n[i].type){var r=this.getItemById(n[i].id);r&&r.slider.setProperty("dragging",!1)}}},e._moveTablePoint=function(e,t,n){var i=this,r=e.tableInfo.tableId,s=e.tableInfo.rowIndex,a=e.tableInfo.columnId,o=e.tableInfo.dragX,c=e.tableInfo.dragY,u=this.getItemById(r);if(u&&u.getColumnByIndex(0)&&u.getColumnById(a)){var d={x:u.getColumnByIndex(0).getValue(s),y:u.getColumnById(a).getValue(s)},p=function(e){return function(){var t=i.getItemById(r);t&&(o&&t.getColumnByIndex(0).setValue(s,e.x),c&&t.getColumnById(a).setValue(s,e.y),t.requestParse())}},f=n.closestPointOnScreen(t),g=n.pixelsToMath.mapRect(m(f,.5)),v={x:h(l.shortestDecimalBetween(g.left,g.right)),y:h(l.shortestDecimalBetween(g.top,g.bottom))};i.undoRedo.performAndAddTransaction({foldType:"tablePointDrag"+r,undo:p(d),redo:p(v)})}},e._movePoint=function(e,t,n){var i=this.getItemById(e.sketch.id);if(i){var r=i.formula;if(r){var s=this,a=i.reconciledDragMode,o=n.closestPointOnScreen(t);if(i.constrainPt){var c=n.reverse_map_pt(o);o=n.map_pt(i.constrainPt(c))}var u=n.pixelsToMath.mapRect(m(o,.5)),h=[{min:u.left,max:u.right},{min:u.top,max:u.bottom}];s.undoRedo.oneTransaction(function(){s.batchEvaluation(function(){("updateCoordinate"===r.move_strategy[0].type||"updateCoordinate"===r.move_strategy[1].type)&&i.setProperty("latex",g(r,h,a));for(var e=0;2>e;e++){var t=r.move_strategy[e];if("updateSlider"===t.type&&v(e,a)){var n=s.getItemById(t.id);if(n&&n.slider){var o=t.coefficients[0],c=t.coefficients[1],u=l.shortestDecimalBetween(c*h[e].min+o,c*h[e].max+o);s._adjustSlider(n,u)}}}})},"pointDragged"+e.sketch.id)}}},e._adjustSlider=function(e,t){var n=e.slider.value,i=e.slider.computeSnappedValue(t);this.undoRedo.performAndAddTransaction({undo:function(){e.slider.setProperty("isPlaying",!1),e.setSliderValueAndLatex(n)},redo:function(){e.slider.setProperty("isPlaying",!1),e.setSliderValueAndLatex(i)}})},e.onMovePoint=function(e,t,n){if(e.tableInfo)return void this._moveTablePoint(e,t,n);var i=this.getItemById(e.sketch.id);if(i){var r=i.formula;r&&r.move_strategy&&this._movePoint(e,t,n)}},e.isEmpty=function(){var e=this.getItemCount();return 0===e?!0:e>1?!1:""===this.getItemByIndex(0).latex},e.getState=function(){for(var e=[],t=this.getItemCount(),n=0;t>n;n++)e.push(this.getItemByIndex(n).getState());return{list:e}},e.batchEvaluation=function(e){e()},e.triggerSetState=function(e){},e.setState=function(e,t){t||(t={});var i,s,a=[],o=[];for(this.colorIdx=0,this.setSelected(null),i=0;i<e.list.length;i++){var c=e.list[i];if(s=this.fromState(c),s.renderShell=!0,s){if(s.isFolder&&o.push(s),t.remapColors&&s.color){var l=n.values(this.colors);n.contains(l,s.color)||(s.color=f.closestColor(s.color,l))}a.push(s)}}var u=this;if(this.batchEvaluation(function(){for(u._removeAllItems(),i=0;i<a.length;i++)u._insertItemAt(i,a[i])}),o.forEach(function(e){for(var t in e.memberIds){var n=u.getItemById(t);n?n.setProperty("folder",e):delete e.memberIds[t]}}),this._reindex(),1===this.nextDisplayIndex){var h=r(void 0,this);this._insertItemAt(this.getItemCount(),h)}this.triggerSetState(a),this.updateDrawOrder()};var y={expression:r,table:a,text:s,folder:o,image:c};for(var b in y)y.hasOwnProperty(b)&&(y[b].prototype.type=b);e.fromState=function(e){return y[e.type](e,this)},e.triggerRemoveExps=function(){},e.triggerRemoveExp=function(){},e.triggerAddExp=function(){},e.triggerRedrawImages=function(){},e.triggerAddImage=function(){},e.triggerRemoveImage=function(){}});return m}),define("loadcss!css/expression_top_bar",function(){}),define("loadcss!css/expressions",function(){}),define("loadcss!css/expressions.icon",function(){}),function(){function e(){}function t(e){var t=e.length-1;return function(){var n=_.call(arguments,0,t),i=_.call(arguments,t);return e.apply(this,n.concat([i]))}}function n(e){return t(function(t,n){"function"!=typeof t&&(t=x(t));var i=function(e){return t.apply(e,[e].concat(n))};return e.call(this,i)})}function i(e){var t=_.call(arguments,1);return function(){return e.apply(this,t)}}function r(e,t){if(!t)throw new Error("prayer failed: "+e)}function s(e){r("a direction was passed",e===S||e===k)}function a(e,t,n){r("a parent is always present",e),r("leftward is properly set up",function(){return t?t[k]===n&&t.parent===e:e.ends[S]===n}()),r("rightward is properly set up",function(){return n?n[S]===t&&n.parent===e:e.ends[k]===t}())}function o(){window.console&&console.warn('You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (20142015)  v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')}function c(e){return o(),Le(e)}function l(t){function n(e){if(!e||!e.nodeType)return null;var t=E(e).children(".mq-root-block").attr(v),n=t&&C.byId[t].controller;return n?r[n.KIND_OF_MQ](n):null}function i(e,t){t&&t.handlers&&(t.handlers={fns:t.handlers,APIClasses:r});for(var n in t)if(t.hasOwnProperty(n)){var i=t[n],s=N[n];e[n]=s?s(i):i}}if(!(t>=V&&R>=t))throw"Only interface versions between "+V+" and "+R+" supported. You specified: "+t;var r={};n.L=S,n.R=k,n.saneKeyboardEvents=G,n.config=function(e){return i(O.p,e),this},n.registerEmbed=function(e,t){if(!/^[a-z][a-z0-9]*$/i.test(e))throw"Embed name must start with letter and be only letters and digits";j[e]=t};var s=r.AbstractMathQuill=w(F,function(e){e.init=function(e){this.__controller=e,this.__options=e.options,this.id=e.id,this.data=e.data},e.__mathquillify=function(e){var t=this.__controller,n=t.root,i=t.container;t.createTextarea();var r=i.addClass(e).contents().detach();n.jQ=E('<span class="mq-root-block"/>').attr(v,n.id).appendTo(i),this.latex(r.text()),this.revert=function(){return i.empty().unbind(".mathquill").removeClass("mq-editable-field mq-math-mode mq-text-mode").append(r)}},e.config=function(e){return i(this.__options,e),this},e.el=function(){return this.__controller.container[0]},e.text=function(){return this.__controller.exportText()},e.mathspeak=function(){return this.__controller.exportMathSpeak()},e.latex=function(e){return arguments.length>0?(this.__controller.renderLatexMath(e),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()},e.html=function(){return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?mq-cursor( mq-blink)?"?>.?<\/span>/i,"").replace(/ mq-hasCursor|mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},e.reflow=function(){return this.__controller.root.postOrder("reflow"),this}});n.prototype=s.prototype,r.EditableField=w(s,function(t,n){t.__mathquillify=function(){return n.__mathquillify.apply(this,arguments),this.__controller.editable=!0,this.__controller.delegateMouseEvents(),this.__controller.editablesTextareaEvents(),this},t.focus=function(){return this.__controller.textarea.focus(),this},t.blur=function(){return this.__controller.textarea.blur(),this},t.write=function(e){return this.__controller.writeLatex(e),this.__controller.scrollHoriz(),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this},t.cmd=function(e){var t=this.__controller.notify(),n=t.cursor;if(/^\\[a-z]+$/i.test(e)){e=e.slice(1);var i=P[e];i&&(e=i(e),n.selection&&e.replaces(n.replaceSelection()),e.createLeftOf(n.show()),this.__controller.scrollHoriz())}else n.parent.write(n,e);return t.blurred&&n.hide().parent.blur(),this},t.select=function(){var e=this.__controller;for(e.notify("move").cursor.insAtRightEnd(e.root);e.cursor[S];)e.selectLeft();return this},t.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},t.moveToDirEnd=function(e){return this.__controller.notify("move").cursor.insAtDirEnd(e,this.__controller.root),this},t.moveToLeftEnd=function(){return this.moveToDirEnd(S)},t.moveToRightEnd=function(){return this.moveToDirEnd(k)},t.keystroke=function(t){for(var t=t.replace(/^\s+|\s+$/g,"").split(/\s+/),n=0;n<t.length;n+=1)this.__controller.keystroke(t[n],{preventDefault:e});return this},t.typedText=function(e){for(var t=0;t<e.length;t+=1)this.__controller.typedText(e.charAt(t));return this},t.dropEmbedded=function(e,t,n){var i=e-E(window).scrollLeft(),r=t-E(window).scrollTop(),s=document.elementFromPoint(i,r);this.__controller.seek(E(s),e,t);var a=De().setOptions(n);a.createLeftOf(this.__controller.cursor)},t.setAriaLabel=function(e){return e&&"string"==typeof e&&""!=e?this.__controller.ariaLabel=e:this.__controller.ariaLabel="MathQuill Input",this},t.setAriaPostLabel=function(e){return e&&"string"==typeof e&&""!=e?this.__controller.ariaPostLabel=e:this.__controller.ariaPostLabel="",this},t.clickAt=function(e,t,n){n=n||document.elementFromPoint(e,t);var i=this.__controller,r=i.root;return m.contains(r.jQ[0],n)||(n=r.jQ[0]),i.seek(E(n),e+pageXOffset,t+pageYOffset),i.blurred&&this.focus(),this},t.ignoreNextMousedown=function(e){return this.__controller.cursor.options.ignoreNextMousedown=e,this}}),n.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},n.EditableField.prototype=r.EditableField.prototype;for(var a in L)(function(e,i){var s=r[e]=i(r);n[e]=function(i,r){var a=n(i);if(a instanceof s||!i||!i.nodeType)return a;var o=D(s.RootBlock(),E(i),O());return o.KIND_OF_MQ=e,s(o).__mathquillify(r,t)},n[e].prototype=s.prototype})(a,L[a]);return n}function u(e){for(var t="moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" "),n=0;n<t.length;n+=1)(function(t){e[t]=function(e){this.controller.handle(t,e)}})(t[n]);e.reflow=function(){this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}function h(e){var t=this.parent,n=e;do{if(n[k])return e.insLeftOf(t);n=n.parent.parent}while(n!==t);e.insRightOf(t)}function d(e,t){e.jQadd=function(){t.jQadd.apply(this,arguments),this.delimjQs=this.jQ.children(":first").add(this.jQ.children(":last")),this.contentjQ=this.jQ.children(":eq(1)")},e.reflow=function(){var e=this.contentjQ.outerHeight()/parseFloat(this.contentjQ.css("fontSize"));me(this.delimjQs,y(1+.2*(e-1),1.2),1.2*e)}}function p(e,t,n){var t=t||e,r=Ae[e],s=Ae[t];A[e]=i(Pe,S,e,r,t,s),A[r]=i(Pe,k,e,r,t,s),Ie[e]=Ie[r]=n}var f,m=window.jQuery,g="mathquill-command-id",v="mathquill-block-id",y=Math.min,b=Math.max,_=[].slice,x=t(function(e,n){return t(function(t,i){return e in t?t[e].apply(t,n.concat(i)):void 0})}),w=function(e,t,n){function i(e){return"object"==typeof e}function r(e){return"function"==typeof e}function s(){}return function a(o,c){function l(){var e=new u;return r(e.init)&&e.init.apply(e,arguments),e}function u(){}c===n&&(c=o,o=Object),l.Bare=u;var h,d=s[e]=o[e],p=u[e]=l[e]=l.p=new s;return p.constructor=l,l.mixin=function(t){return u[e]=l[e]=a(l,t)[e],l},(l.open=function(e){if(h={},r(e)?h=e.call(l,p,d,l,o):i(e)&&(h=e),i(h))for(var n in h)t.call(h,n)&&(p[n]=h[n]);return r(p.init)||(p.init=o),l})(c)}}("prototype",{}.hasOwnProperty),S=-1,k=1,E=w(m,function(e){e.insDirOf=function(e,t){return e===S?this.insertBefore(t.first()):this.insertAfter(t.last())},e.insAtDirEnd=function(e,t){return e===S?this.prependTo(t):this.appendTo(t)}}),T=w(function(e){e.parent=0,e[S]=0,e[k]=0,e.init=function(e,t,n){this.parent=e,this[S]=t,this[k]=n},this.copy=function(e){return T(e.parent,e[S],e[k])}}),C=w(function(e){function t(){return i+=1}e[S]=0,e[k]=0,e.parent=0;var i=0;this.byId={},e.init=function(){this.id=t(),C.byId[this.id]=this,this.ends={},this.ends[S]=0,this.ends[k]=0},e.dispose=function(){delete C.byId[this.id]},e.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},e.jQ=E(),e.jQadd=function(e){return this.jQ=this.jQ.add(e)},e.jQize=function(e){function t(e){if(e.getAttribute){var n=e.getAttribute("mathquill-command-id"),i=e.getAttribute("mathquill-block-id");n&&C.byId[n].jQadd(e),i&&C.byId[i].jQadd(e)}for(e=e.firstChild;e;e=e.nextSibling)t(e)}for(var e=E(e||this.html()),n=0;n<e.length;n+=1)t(e[n]);return e},e.createDir=function(e,t){s(e);var n=this;return n.jQize(),n.jQ.insDirOf(e,t.jQ),t[e]=n.adopt(t.parent,t[S],t[k]),n},e.createLeftOf=function(e){return this.createDir(S,e)},e.selectChildren=function(e,t){return q(e,t)},e.bubble=n(function(e){for(var t=this;t;t=t.parent){var n=e(t);if(n===!1)break}return this}),e.postOrder=n(function(e){return function t(n){n.eachChild(t),e(n)}(this),this}),e.isEmpty=function(){return 0===this.ends[S]&&0===this.ends[k]},e.children=function(){return M(this.ends[S],this.ends[k])},e.eachChild=function(){var e=this.children();return e.each.apply(e,arguments),this},e.foldChildren=function(e,t){return this.children().fold(e,t)},e.withDirAdopt=function(e,t,n,i){return M(this,this).withDirAdopt(e,t,n,i),this},e.adopt=function(e,t,n){return M(this,this).adopt(e,t,n),this},e.disown=function(){return M(this,this).disown(),this},e.remove=function(){return this.jQ.remove(),this.postOrder("dispose"),this.disown()}}),M=w(function(e){e.init=function(e,t,n){if(n===f&&(n=S),s(n),r("no half-empty fragments",!e==!t),this.ends={},e){r("withDir is passed to Fragment",e instanceof C),r("oppDir is passed to Fragment",t instanceof C),r("withDir and oppDir have the same parent",e.parent===t.parent),this.ends[n]=e,this.ends[-n]=t;var i=this.fold([],function(e,t){return e.push.apply(e,t.jQ.get()),e});this.jQ=this.jQ.add(i)}},e.jQ=E(),e.withDirAdopt=function(e,t,n,i){return e===S?this.adopt(t,n,i):this.adopt(t,i,n)},e.adopt=function(e,t,n){a(e,t,n);var i=this;i.disowned=!1;var r=i.ends[S];if(!r)return this;var s=i.ends[k];return t||(e.ends[S]=r),n?n[S]=s:e.ends[k]=s,i.ends[k][k]=n,i.each(function(n){n[S]=t,n.parent=e,t&&(t[k]=n),t=n}),i},e.disown=function(){var e=this,t=e.ends[S];if(!t||e.disowned)return e;e.disowned=!0;var n=e.ends[k],i=t.parent;return a(i,t[S],t),a(i,n,n[k]),t[S]?t[S][k]=n[k]:i.ends[S]=n[k],n[k]?n[k][S]=t[S]:i.ends[k]=t[S],e},e.remove=function(){return this.jQ.remove(),this.each("postOrder","dispose"),this.disown()},e.each=n(function(e){var t=this,n=t.ends[S];if(!n)return t;for(;n!==t.ends[k][k];n=n[k]){var i=e(n);if(i===!1)break}return t}),e.fold=function(e,t){return this.each(function(n){e=t.call(this,e,n)}),e}}),P={},A={},I=w(T,function(e){e.init=function(e,t){this.parent=e,this.options=t;var n=this.jQ=this._jQ=E('<span class="mq-cursor">&#8203;</span>');this.blink=function(){n.toggleClass("mq-blink")},this.upDownCache={}},e.show=function(){return this.jQ=this._jQ.removeClass("mq-blink"),"intervalId"in this?clearInterval(this.intervalId):(this[k]?this.selection&&this.selection.ends[S][S]===this[S]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[k].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},e.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=E(),this},e.withDirInsertAt=function(e,t,n,i){var r=this.parent;this.parent=t,this[e]=n,this[-e]=i,r!==t&&r.blur&&r.blur(this)},e.insDirOf=function(e,t){return s(e),this.jQ.insDirOf(e,t.jQ),this.withDirInsertAt(e,t.parent,t[e],t),this.parent.jQ.addClass("mq-hasCursor"),this},e.insLeftOf=function(e){return this.insDirOf(S,e)},e.insRightOf=function(e){return this.insDirOf(k,e)},e.insAtDirEnd=function(e,t){return s(e),this.jQ.insAtDirEnd(e,t.jQ),this.withDirInsertAt(e,t,0,t.ends[e]),t.focus(),this},e.insAtLeftEnd=function(e){return this.insAtDirEnd(S,e)},e.insAtRightEnd=function(e){return this.insAtDirEnd(k,e)},e.jumpUpDown=function(e,t){var n=this;n.upDownCache[e.id]=T.copy(n);var i=n.upDownCache[t.id];if(i)i[k]?n.insLeftOf(i[k]):n.insAtRightEnd(i.parent);else{var r=n.offset().left;t.seek(r,n)}U.queue(t,!0)},e.offset=function(){var e=this,t=e.jQ.removeClass("mq-cursor").offset();return e.jQ.addClass("mq-cursor"),t},e.unwrapGramp=function(){var e=this.parent.parent,t=e.parent,n=e[k],i=this,r=e[S];if(e.disown().eachChild(function(i){i.isEmpty()||(i.children().adopt(t,r,n).each(function(t){t.jQ.insertBefore(e.jQ.first())}),r=i.ends[k])}),!this[k])if(this[S])this[k]=this[S][k];else for(;!this[k];){if(this.parent=this.parent[k],!this.parent){this[k]=e[k],this.parent=t;break}this[k]=this.parent.ends[S]}this[k]?this.insLeftOf(this[k]):this.insAtRightEnd(t),
e.jQ.remove(),e[S].siblingDeleted&&e[S].siblingDeleted(i.options,k),e[k].siblingDeleted&&e[k].siblingDeleted(i.options,S)},e.startSelection=function(){for(var e=this.anticursor=T.copy(this),t=e.ancestors={},n=e;n.parent;n=n.parent)t[n.parent.id]=n},e.endSelection=function(){delete this.anticursor},e.select=function(){var e=this.anticursor;if(this[S]===e[S]&&this.parent===e.parent)return!1;for(var t=this;t.parent;t=t.parent)if(t.parent.id in e.ancestors){var n=t.parent;break}r("cursor and anticursor in the same tree",n);var i,s,a=e.ancestors[n.id],o=k;if(t[S]!==a)for(var c=t;c;c=c[k])if(c[k]===a[k]){o=S,i=t,s=a;break}return o===k&&(i=a,s=t),i instanceof T&&(i=i[k]),s instanceof T&&(s=s[S]),this.hide().selection=n.selectChildren(i,s),this.insDirOf(o,this.selection.ends[o]),this.selectionChanged(),!0},e.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},e.deleteSelection=function(){this.selection&&(this[S]=this.selection.ends[S][S],this[k]=this.selection.ends[k][k],this.selection.remove(),this.selectionChanged(),delete this.selection)},e.replaceSelection=function(){var e=this.selection;return e&&(this[S]=e.ends[S][S],this[k]=e.ends[k][k],delete this.selection),e}}),q=w(M,function(e,t){e.init=function(){t.init.apply(this,arguments),this.jQ=this.jQ.wrapAll('<span class="mq-selection"></span>').parent()},e.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),t.adopt.apply(this,arguments)},e.clear=function(){return this.jQ.replaceWith(this.jQ[0].childNodes),this},e.join=function(e){return this.fold("",function(t,n){return t+n[e]()})}}),D=w(function(e){e.init=function(e,t,n){this.id=e.id,this.data={},this.root=e,this.container=t,this.options=n,this.ariaLabel="MathQuill Input",this.ariaPostLabel="",e.controller=this,this.cursor=e.cursor=I(e,n)},e.handle=function(e,t){var n=this.options.handlers;if(n&&n.fns[e]){var i=n.APIClasses[this.KIND_OF_MQ](this);t===S||t===k?n.fns[e](t,i):n.fns[e](i)}};var t=[];this.onNotify=function(e){t.push(e)},e.notify=function(){for(var e=0;e<t.length;e+=1)t[e].apply(this.cursor,arguments);return this}}),L={},O=w(),N={},F=w(),j={};c.prototype=F.p,c.interfaceVersion=function(e){if(1!==e)throw"Only interface version 1 supported. You specified: "+e;return o=function(){window.console&&console.warn('You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (20142015)  v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')},o(),c},c.getInterface=l;var V=l.MIN=1,R=l.MAX=2;c.noConflict=function(){return window.MathQuill=$,c};var $=window.MathQuill;window.MathQuill=c;var B=w(function(e,t,n){function i(e,t){throw e=e?"'"+e+"'":"EOF","Parse Error: "+t+" at "+e}e.init=function(e){this._=e},e.parse=function(e){function t(e,t){return t}return this.skip(o)._(""+e,t,i)},e.or=function(e){r("or is passed a parser",e instanceof n);var t=this;return n(function(n,i,r){function s(t){return e._(n,i,r)}return t._(n,i,s)})},e.then=function(e){var t=this;return n(function(i,s,a){function o(t,i){var o=e instanceof n?e:e(i);return r("a parser is returned",o instanceof n),o._(t,s,a)}return t._(i,o,a)})},e.many=function(){var e=this;return n(function(t,n,i){function r(e,n){return t=e,a.push(n),!0}function s(){return!1}for(var a=[];e._(t,r,s););return n(t,a)})},e.times=function(e,t){arguments.length<2&&(t=e);var i=this;return n(function(n,r,s){function a(e,t){return u.push(t),n=e,!0}function o(e,t){return l=t,n=e,!1}function c(e,t){return!1}for(var l,u=[],h=!0,d=0;e>d;d+=1)if(h=i._(n,a,o),!h)return s(n,l);for(;t>d&&h;d+=1)h=i._(n,a,c);return r(n,u)})},e.result=function(e){return this.then(a(e))},e.atMost=function(e){return this.times(0,e)},e.atLeast=function(e){var t=this;return t.times(e).then(function(e){return t.many().map(function(t){return e.concat(t)})})},e.map=function(e){return this.then(function(t){return a(e(t))})},e.skip=function(e){return this.then(function(t){return e.result(t)})};var s=(this.string=function(e){var t=e.length,i="expected '"+e+"'";return n(function(n,r,s){var a=n.slice(0,t);return a===e?r(n.slice(t),a):s(n,i)})},this.regex=function(e){r("regexp parser is anchored","^"===e.toString().charAt(1));var t="expected "+e;return n(function(n,i,r){var s=e.exec(n);if(s){var a=s[0];return i(n.slice(a.length),a)}return r(n,t)})}),a=n.succeed=function(e){return n(function(t,n){return n(t,e)})},o=(n.fail=function(e){return n(function(t,n,i){return i(t,e)})},n.letter=s(/^[a-z]/i),n.letters=s(/^[a-z]*/i),n.digit=s(/^[0-9]/),n.digits=s(/^[0-9]*/),n.whitespace=s(/^\s+/),n.optWhitespace=s(/^\s*/),n.any=n(function(e,t,n){return e?t(e.slice(1),e.charAt(0)):n(e,"expected any character")}),n.all=n(function(e,t,n){return t("",e)}),n.eof=n(function(e,t,n){return e?n(e,"expected EOF"):t(e,e)}))}),G=function(){function t(e){var t,i=e.which||e.keyCode,r=n[i],s=[];return e.ctrlKey&&s.push("Ctrl"),e.originalEvent&&e.originalEvent.metaKey&&s.push("Meta"),e.altKey&&s.push("Alt"),e.shiftKey&&s.push("Shift"),t=r||String.fromCharCode(i),s.length||r?(s.push(t),s.join("-")):t}var n={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(n,i){function r(e){x=e,clearTimeout(g),g=setTimeout(e)}function s(t){r(function(n){x=e,clearTimeout(g),t(n)})}function a(t){x(),x=e,clearTimeout(g),b.val(t),t&&b[0].select&&b[0].select(),w=!!t}function o(){var e=b[0];return"selectionStart"in e?e.selectionStart!==e.selectionEnd:!1}function c(){i.keystroke(t(v),v)}function l(e){v=e,y=null,w&&s(function(e){e&&"focusout"===e.type||!b[0].select||b[0].select()}),c()}function u(e){v&&y&&c(),y=e,r(h)}function h(){if(!o()){var e=b.val();1===e.length?(b.val(""),i.typedText(e)):e&&b[0].select&&b[0].select()}}function d(){v=y=null}function p(e){b.focus(),r(f)}function f(){var e=b.val();b.val(""),e&&i.paste(e)}var g,v=null,y=null,b=m(n),_=m(i.container||b),x=e;_.bind("keydown keypress input keyup focusout paste",function(e){x(e)});var w=!1;return _.bind({keydown:l,keypress:u,focusout:d,cut:function(){s(function(){i.cut()})},copy:function(){s(function(){i.copy()})},paste:p}),{select:a}}}(),z=w(function(e){e.init=function(){var e=".mq-aria-alert";m(e).length||m("body").append("<div aria-live='assertive' aria-atomic='true' class='mq-aria-alert'></div>"),this.jQ=m(e),this.items=[]},e.queue=function(e,t){if(e instanceof C)if(t)e=e.parent&&e.parent.ariaLabel?e.parent.ariaLabel+" "+e.mathspeak():e.ariaLabel?e.ariaLabel+" "+e.mathspeak():e.mathspeak();else if(e.side){var n="";e.side===S?n=e.textTemplate[0]:e.side===k&&(n=e.textTemplate[1]),this.queueOpenCloseDirOf(e.side),e=Ie[n]}else e=e.mathspeak();return this.items.push(e),this},e.queueDirOf=function(e){return s(e),this.queue(e===S?"before":"after")},e.queueDirEndOf=function(e){return s(e),this.queue(e===S?"beginning of":"end of")},e.queueOpenCloseDirOf=function(e){return s(e),this.queue(e===S?"left":"right")},e.alert=function(e){return e&&this.queue(e),this.items.length&&this.jQ.empty().html(this.items.join(" ").replace(/ +(?= )/g,"")),this.clear()},e.clear=function(){return this.items.length=0,this}}),U=z();D.open(function(e){e.exportMathSpeak=function(){return this.root.mathspeak()}}),D.open(function(e,t){e.exportText=function(){return this.root.foldChildren("",function(e,t){return e+t.text()})}}),D.open(function(e){e.focusBlurEvents=function(){function e(){clearTimeout(n),s.selection&&s.selection.jQ.addClass("mq-blur"),t()}function t(){s.hide().parent.blur(),i.container.removeClass("mq-focused"),E(window).off("blur",e)}var n,i=this,r=i.root,s=i.cursor;i.textarea.focus(function(){U.jQ.empty(),i.textarea.attr("aria-label",i.ariaLabel+": "+r.mathspeak()+" "+i.ariaPostLabel.trim()),i.blurred=!1,clearTimeout(n),i.container.addClass("mq-focused"),s.parent||s.insAtRightEnd(r),s.selection?(s.selection.jQ.removeClass("mq-blur"),i.selectionChanged()):s.show()}).blur(function(){U.jQ.empty(),i.textarea.attr("aria-label",i.ariaLabel+": "+r.mathspeak()+" "+i.ariaPostLabel.trim()),i.blurred=!0,n=setTimeout(function(){r.postOrder("intentionalBlur"),s.clearSelection().endSelection(),t()}),E(window).on("blur",e)}),i.blurred=!0,s.hide().parent.blur()}}),D.open(function(e){e.keystroke=function(e,t){this.cursor.parent.keystroke(e,t,this)}}),C.open(function(e){e.keystroke=function(e,t,n){var i=n.cursor;switch(e){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":n.ctrlDeleteDir(S);break;case"Shift-Backspace":case"Backspace":n.backspace();break;case"Esc":case"Tab":return void n.escapeDir(k,e,t);case"Shift-Tab":case"Shift-Esc":return void n.escapeDir(S,e,t);case"End":n.notify("move").cursor.insAtRightEnd(i.parent),U.queue("end of").queue(i.parent,!0);break;case"Ctrl-End":n.notify("move").cursor.insAtRightEnd(n.root),U.queue("end of").queue(n.ariaLabel).queue(n.root).queue(n.ariaPostLabel);break;case"Shift-End":for(;i[k];)n.selectRight();break;case"Ctrl-Shift-End":for(;i[k]||i.parent!==n.root;)n.selectRight();break;case"Home":n.notify("move").cursor.insAtLeftEnd(i.parent),U.queue("beginning of").queue(i.parent,!0);break;case"Ctrl-Home":n.notify("move").cursor.insAtLeftEnd(n.root),U.queue("beginning of").queue(n.ariaLabel).queue(n.root).queue(n.ariaPostLabel);break;case"Shift-Home":for(;i[S];)n.selectLeft();break;case"Ctrl-Shift-Home":for(;i[S]||i.parent!==n.root;)n.selectLeft();break;case"Left":n.moveLeft();break;case"Shift-Left":n.selectLeft();break;case"Ctrl-Left":break;case"Right":n.moveRight();break;case"Shift-Right":n.selectRight();break;case"Ctrl-Right":break;case"Up":n.moveUp();break;case"Down":n.moveDown();break;case"Shift-Up":if(i[S])for(;i[S];)n.selectLeft();else n.selectLeft();case"Shift-Down":if(i[k])for(;i[k];)n.selectRight();else n.selectRight();case"Ctrl-Up":break;case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":n.ctrlDeleteDir(k);break;case"Shift-Del":case"Del":n.deleteForward();break;case"Meta-A":case"Ctrl-A":for(n.notify("move").cursor.insAtRightEnd(n.root);i[S];)n.selectLeft();break;case"Ctrl-Alt-Up":i.parent.parent&&i.parent.parent instanceof C?U.queue(i.parent.parent):U.queue("nothing above");break;case"Ctrl-Alt-Down":i.parent&&i.parent instanceof C?U.queue(i.parent):U.queue("block is empty");break;case"Ctrl-Alt-Left":i.parent.parent.ends[S]&&i.parent.parent.ends[S]instanceof C?U.queue(i.parent.parent.ends[S]):U.queue("nothing to the left");break;case"Ctrl-Alt-Right":i.parent.parent.ends[k]&&i.parent.parent.ends[k]instanceof C?U.queue(i.parent.parent.ends[k]):U.queue("nothing to the right");break;case"Ctrl-Alt-Shift-Down":i.selection?U.queue(i.selection.join("mathspeak")+" selected"):U.queue("nothing selected");break;default:return}U.alert(),t.preventDefault(),n.scrollHoriz()},e.moveOutOf=e.moveTowards=e.deleteOutOf=e.deleteTowards=e.unselectInto=e.selectOutOf=e.selectTowards=function(){r("overridden or never called on this node")}}),D.open(function(e){function t(e,t){var n=e.notify("upDown").cursor,i=t+"Into",r=t+"OutOf";return n[k][i]?n.insAtLeftEnd(n[k][i]):n[S][i]?n.insAtRightEnd(n[S][i]):n.parent.bubble(function(e){var t=e[r];return t&&("function"==typeof t&&(t=e[r](n)),t instanceof C&&n.jumpUpDown(e,t),t!==!0)?!1:void 0}),e}this.onNotify(function(e){("move"===e||"upDown"===e)&&this.show().clearSelection()}),e.escapeDir=function(e,t,n){s(e);var i=this.cursor;return i.parent!==this.root&&n.preventDefault(),i.parent!==this.root?(i.parent.moveOutOf(e,i),U.alert(),this.notify("move")):void 0},N.leftRightIntoCmdGoes=function(e){if(e&&"up"!==e&&"down"!==e)throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+e+'"';return e},e.moveDir=function(e){s(e);var t=this.cursor,n=t.options.leftRightIntoCmdGoes;return t.selection?t.insDirOf(e,t.selection.ends[e]):t[e]?t[e].moveTowards(e,t,n):t.parent.moveOutOf(e,t,n),this.notify("move")},e.moveLeft=function(){return this.moveDir(S)},e.moveRight=function(){return this.moveDir(k)},e.moveUp=function(){return t(this,"up")},e.moveDown=function(){return t(this,"down")},this.onNotify(function(e){"upDown"!==e&&(this.upDownCache={})}),this.onNotify(function(e){"edit"===e&&this.show().deleteSelection()}),e.deleteDir=function(e){s(e);var t=this.cursor,n=t[e],i=t.parent.parent;n&&n instanceof C?n.sides?U.queue(n.parent.chToCmd(n.sides[-e].ch)):U.queue(n):i&&i instanceof C&&U.queue(i);var r=t.selection;return this.notify("edit"),r||(t[e]?t[e].deleteTowards(e,t):t.parent.deleteOutOf(e,t)),t[S].siblingDeleted&&t[S].siblingDeleted(t.options,k),t[k].siblingDeleted&&t[k].siblingDeleted(t.options,S),t.parent.bubble("reflow"),this},e.ctrlDeleteDir=function(e){s(e);var t=this.cursor;if(!t[S]||t.selection)return this.deleteDir();this.notify("edit");var n=M(t.parent.ends[S],t[S]);return U.queue(n),n.remove(),t.insAtDirEnd(S,t.parent),t[S].siblingDeleted&&t[S].siblingDeleted(t.options,k),t[k].siblingDeleted&&t[k].siblingDeleted(t.options,S),t.parent.bubble("reflow"),this},e.backspace=function(){return this.deleteDir(S)},e.deleteForward=function(){return this.deleteDir(k)},this.onNotify(function(e){"select"!==e&&this.endSelection()}),e.selectDir=function(e){var t=this.notify("select").cursor,n=t.selection;s(e),t.anticursor||t.startSelection();var i=t[e];i?n&&n.ends[e]===i&&t.anticursor[-e]!==i?i.unselectInto(e,t):i.selectTowards(e,t):t.parent.selectOutOf(e,t),t.clearSelection(),t.select()||t.show(),t.selection&&U.clear().queue(t.selection.join("mathspeak")+" selected")},e.selectLeft=function(){return this.selectDir(S)},e.selectRight=function(){return this.selectDir(k)}});var H=function(){function e(e){var t=Z();return e.adopt(t,0,0),t}function t(e){for(var t=e[0]||Z(),n=1;n<e.length;n+=1)e[n].children().adopt(t,t.ends[k],0);return t}var n=B.string,i=B.regex,r=B.letter,s=B.any,a=B.optWhitespace,o=B.succeed,c=B.fail,l=r.map(function(e){return ne(e)}),u=i(/^[^${}\\_^]/).map(function(e){return Q(e)}),h=i(/^[^\\a-eg-zA-Z]/).or(n("\\").then(i(/^[a-z]+/i).or(i(/^\s+/).result(" ")).or(s))).then(function(e){var t=P[e];return t?t(e).parser():c("unknown command: \\"+e)}),d=h.or(l).or(u),p=n("{").then(function(){return m}).skip(n("}")),f=a.then(p.or(d.map(e))),m=f.many().map(t).skip(a),g=n("[").then(f.then(function(e){return"]"!==e.join("latex")?o(e):c()}).many().map(t).skip(a)).skip(n("]")),v=m;return v.block=f,v.optBlock=g,v}();D.open(function(e,t){e.exportLatex=function(){return this.root.latex().replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},e.writeLatex=function(e){var t=this.notify("edit").cursor,n=B.all,i=B.eof,r=H.skip(i).or(n.result(!1)).parse(e);if(r&&!r.isEmpty()){r.children().adopt(t.parent,t[S],t[k]);var s=r.jQize();s.insertBefore(t.jQ),t[S]=r.ends[k],r.finalizeInsert(t.options,t),r.ends[k][k].siblingCreated&&r.ends[k][k].siblingCreated(t.options,S),r.ends[S][S].siblingCreated&&r.ends[S][S].siblingCreated(t.options,k),t.parent.bubble("reflow")}return this},e.renderLatexMath=function(e){var t=this.root,n=this.cursor,i=B.all,r=B.eof,s=H.skip(r).or(i.result(!1)).parse(e);t.eachChild("postOrder","dispose"),t.ends[S]=t.ends[k]=0,s&&s.children().adopt(t,0,0);var a=t.jQ;if(s){var o=s.join("html");a.html(o),t.jQize(a.children()),t.finalizeInsert(n.options)}else a.empty();delete n.selection,n.insAtRightEnd(t)},e.renderLatexText=function(e){var t=this.root,n=this.cursor;t.jQ.children().slice(1).remove(),t.eachChild("postOrder","dispose"),t.ends[S]=t.ends[k]=0,delete n.selection,n.show().insAtRightEnd(t);var i=B.regex,r=B.string,s=B.eof,a=B.all,o=r("$").then(H).skip(r("$").or(s)).map(function(e){var t=RootMathCommand(n);t.createBlocks();var i=t.ends[S];return e.children().adopt(i,0,0),t}),c=r("\\$").result("$"),l=c.or(i(/^[^$]/)).map(Q),u=o.or(l).many(),h=u.skip(s).or(a.result(!1)).parse(e);if(h){for(var d=0;d<h.length;d+=1)h[d].adopt(t,t.ends[k],0);t.jQize().appendTo(t.jQ),t.finalizeInsert(n.options)}}}),D.open(function(t){O.p.ignoreNextMousedown=e,t.delegateMouseEvents=function(){var t=this.root.jQ;this.container.bind("mousedown.mathquill",function(n){function i(e){p=E(e.target)}function r(e){l.anticursor||l.startSelection(),c.seek(p,e.pageX,e.pageY).cursor.select(),l.selection&&U.clear().queue(l.selection.join("mathspeak")+" selected").alert(),p=f}function s(e){l.blink=u,l.selection||(c.editable?(l.show(),U.queue(l.parent).alert()):h.detach()),a.unbind("mousemove",i),E(e.target.ownerDocument).unbind("mousemove",r).unbind("mouseup",s)}var a=E(n.target).closest(".mq-root-block"),o=C.byId[a.attr(v)||t.attr(v)],c=o.controller,l=c.cursor,u=l.blink,h=c.textareaSpan,d=c.textarea;if(n.preventDefault(),n.target.unselectable=!0,!l.options.ignoreNextMousedown(n)){l.options.ignoreNextMousedown=e;var p;c.blurred&&(c.editable||a.prepend(h),d.focus()),l.blink=e,c.seek(E(n.target),n.pageX,n.pageY).cursor.startSelection(),a.mousemove(i),E(n.target.ownerDocument).mousemove(r).mouseup(s)}})}}),D.open(function(e){e.seek=function(e,t,n){var i=this.notify("select").cursor;if(e){var s=e.attr(v)||e.attr(g);if(!s){var a=e.parent();s=a.attr(v)||a.attr(g)}}var o=s?C.byId[s]:this.root;return r("nodeId is the id of some Node that exists",o),i.clearSelection().show(),o.seek(t,i),this.scrollHoriz(),this}}),D.open(function(e){e.scrollHoriz=function(){var e=this.cursor,t=e.selection,n=this.root.jQ[0].getBoundingClientRect();if(t){var i=t.jQ[0].getBoundingClientRect(),r=i.left-(n.left+20),s=i.right-(n.right-20);if(t.ends[S]===e[k])if(0>r)var a=r;else{if(!(s>0))return;if(i.left-s<n.left+20)var a=r;else var a=s}else if(s>0)var a=s;else{if(!(0>r))return;if(i.right-r>n.right-20)var a=s;else var a=r}}else{var o=e.jQ[0].getBoundingClientRect().left;if(o>n.right-20)var a=o-(n.right-20);else{if(!(o<n.left+20))return;var a=o-(n.left+20)}}this.root.jQ.stop().animate({scrollLeft:"+="+a},100)}}),D.open(function(e){O.p.substituteTextarea=function(){return E("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true/>")[0]},e.createTextarea=function(){var e=this.textareaSpan=E('<span class="mq-textarea"></span>'),t=this.options.substituteTextarea();if(!t.nodeType)throw"substituteTextarea() must return a DOM element, got "+t;t=this.textarea=E(t).appendTo(e);var n=this;n.cursor.selectionChanged=function(){n.selectionChanged()}},e.selectionChanged=function(){var e=this;ve(e.container[0]),e.textareaSelectionTimeout===f&&(e.textareaSelectionTimeout=setTimeout(function(){e.setTextareaSelection()}))},e.setTextareaSelection=function(){this.textareaSelectionTimeout=f;var e="";this.cursor.selection&&(e=this.cursor.selection.join("latex"),this.options.statelessClipboard&&(e="$"+e+"$")),this.selectFn(e)},e.staticMathTextareaEvents=function(){function e(){r.detach(),t.blurred=!0}var t=this,n=(t.root,t.cursor),i=t.textarea,r=t.textareaSpan;this.container.prepend('<span class="mq-selectable">$'+t.exportLatex()+"$</span>"),t.blurred=!0,i.bind("cut paste",!1).bind("copy",function(){t.setTextareaSelection()}).focus(function(){t.blurred=!1}).blur(function(){n.selection&&n.selection.clear(),setTimeout(e)}),t.selectFn=function(e){i.val(e),e&&i.select()}},O.p.substituteKeyboardEvents=G,e.editablesTextareaEvents=function(){var e=this,t=e.textarea,n=e.textareaSpan,i=this.options.substituteKeyboardEvents(t,this);this.selectFn=function(e){i.select(e)},this.container.prepend(n),this.focusBlurEvents()},e.typedText=function(e){if("\n"===e)return this.handle("enter");var t=this.notify().cursor;t.parent.id;t.parent.write(t,e);var n=t.parent.chToCmd(e,this.options);n.ctrlSeq.search("frac")>=0?U.queue(t.parent,!0):U.queue(n),U.alert(),this.scrollHoriz()},e.cut=function(){var e=this,t=e.cursor;t.selection&&setTimeout(function(){e.notify("edit"),t.parent.bubble("reflow")})},e.copy=function(){this.setTextareaSelection()},e.paste=function(e){this.options.statelessClipboard&&(e="$"===e.slice(0,1)&&"$"===e.slice(-1)?e.slice(1,-1):"\\text{"+e+"}"),this.writeLatex(e).cursor.show()}});var W=w(C,function(e,t){e.finalizeInsert=function(e,t){var n=this;n.postOrder("finalizeTree",e),n.postOrder("contactWeld",t),n.postOrder("blur"),n.postOrder("reflow"),n[k].siblingCreated&&n[k].siblingCreated(e,S),n[S].siblingCreated&&n[S].siblingCreated(e,k),n.bubble("reflow")}}),Y=w(W,function(e,t){e.init=function(e,n,i){var r=this;t.init.call(r),r.ctrlSeq||(r.ctrlSeq=e),n&&(r.htmlTemplate=n),i&&(r.textTemplate=i)},e.replaces=function(e){e.disown(),this.replacedFragment=e},e.isEmpty=function(){return this.foldChildren(!0,function(e,t){return e&&t.isEmpty()})},e.parser=function(){var e=H.block,t=this;return e.times(t.numBlocks()).map(function(e){t.blocks=e;for(var n=0;n<e.length;n+=1)e[n].adopt(t,t.ends[k],0);return t})},e.createLeftOf=function(e){var n=this,i=n.replacedFragment;n.createBlocks(),t.createLeftOf.call(n,e),i&&(i.adopt(n.ends[S],0,0),i.jQ.appendTo(n.ends[S].jQ)),n.finalizeInsert(e.options),n.placeCursor(e)},e.createBlocks=function(){for(var e=this,t=e.numBlocks(),n=e.blocks=Array(t),i=0;t>i;i+=1){var r=n[i]=Z();r.adopt(e,e.ends[k],0)}},e.placeCursor=function(e){e.insAtRightEnd(this.foldChildren(this.ends[S],function(e,t){return e.isEmpty()?e:t}))},e.moveTowards=function(e,t,n){var i=n&&this[n+"Into"];t.insAtDirEnd(-e,i||this.ends[-e]),U.queueDirEndOf(-e).queue(t.parent,!0)},e.deleteTowards=function(e,t){this.isEmpty()?t[e]=this.remove()[e]:this.moveTowards(e,t,null)},e.selectTowards=function(e,t){t[-e]=this,t[e]=this[e]},e.selectChildren=function(){return q(this,this)},e.unselectInto=function(e,t){t.insAtDirEnd(-e,t.anticursor.ancestors[this.id])},e.seek=function(e,t){function n(e){var t={};return t[S]=e.jQ.offset().left,t[k]=t[S]+e.jQ.outerWidth(),t}var i=this,r=n(i);if(e<r[S])return t.insLeftOf(i);if(e>r[k])return t.insRightOf(i);var s=r[S];i.eachChild(function(a){var o=n(a);return e<o[S]?(e-s<o[S]-e?a[S]?t.insAtRightEnd(a[S]):t.insLeftOf(i):t.insAtLeftEnd(a),!1):e>o[k]?void(a[k]?s=o[k]:r[k]-e<e-o[k]?t.insRightOf(i):t.insAtRightEnd(a)):(a.seek(e,t),!1)})},e.numBlocks=function(){var e=this.htmlTemplate.match(/&\d+/g);return e?e.length:0},e.html=function(){var e=this,t=e.blocks,n=" mathquill-command-id="+e.id,i=e.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);r("no unmatched angle brackets",i.join("")===this.htmlTemplate);for(var s=0,a=i[0];a;s+=1,a=i[s])if("/>"===a.slice(-2))i[s]=a.slice(0,-2)+n+"/>";else if("<"===a.charAt(0)){r("not an unmatched top-level close tag","/"!==a.charAt(1)),i[s]=a.slice(0,-1)+n+">";var o=1;do s+=1,a=i[s],r("no missing close tags",a),"</"===a.slice(0,2)?o-=1:"<"===a.charAt(0)&&"/>"!==a.slice(-2)&&(o+=1);while(o>0)}return i.join("").replace(/>&(\d+)/g,function(e,n){return" mathquill-block-id="+t[n].id+">"+t[n].join("html")})},e.latex=function(){return this.foldChildren(this.ctrlSeq,function(e,t){return e+"{"+(t.latex()||" ")+"}"})},e.textTemplate=[""],e.text=function(){var e=this,t=0;return e.foldChildren(e.textTemplate[t],function(n,i){t+=1;var r=i.text();return n&&"("===e.textTemplate[t]&&"("===r[0]&&")"===r.slice(-1)?n+r.slice(1,-1)+e.textTemplate[t]:n+i.text()+(e.textTemplate[t]||"")})},e.mathspeakTemplate=[],e.mathspeak=function(){var e=this,t=0;return e.foldChildren(e.mathspeakTemplate[t]||"Start"+e.ctrlSeq+" ",function(n,i){return t+=1,n+" "+i.mathspeak()+" "+(e.mathspeakTemplate[t]+" "||"End"+e.ctrlSeq+" ")})}}),X=w(Y,function(t,n){t.init=function(e,t,i,r){i||(i=e&&e.length>1?e.slice(1):e),this.mathspeakName=r||i,n.init.call(this,e,t,[i])},t.parser=function(){return B.succeed(this)},t.numBlocks=function(){return 0},t.replaces=function(e){e.remove()},t.createBlocks=e,t.moveTowards=function(e,t){t.jQ.insDirOf(e,this.jQ),t[-e]=this,t[e]=this[e],U.queue(this)},t.deleteTowards=function(e,t){t[e]=this.remove()[e]},t.seek=function(e,t){e-this.jQ.offset().left<this.jQ.outerWidth()/2?t.insLeftOf(this):t.insRightOf(this)},t.latex=function(){return this.ctrlSeq},t.text=function(){return this.textTemplate.join("")},t.mathspeak=function(){return this.mathspeakName},t.placeCursor=e,t.isEmpty=function(){return!0}}),Q=w(X,function(e,t){e.init=function(e,n,i){t.init.call(this,e,"<span>"+(n||e)+"</span>",f,i)}}),K=w(X,function(e,t){e.init=function(e,n,i,r){t.init.call(this,e,'<span class="mq-binary-operator">'+n+"</span>",i,r)}}),Z=w(W,function(e,t){e.join=function(e){return this.foldChildren("",function(t,n){return t+n[e]()})},e.html=function(){return this.join("html")},e.latex=function(){return this.join("latex")},e.text=function(){return this.ends[S]===this.ends[k]&&0!==this.ends[S]?this.ends[S].text():this.join("text")},e.mathspeak=function(){var e="",t={};return this.controller&&(t=this.controller.options.autoOperatorNames),this.foldChildren([],function(n,i){if(i.isItalic===!1)e+=i.mathspeak();else{if(""!==e){if(t!=={}&&t._maxLength>0){var r=t[e.toLowerCase()];"string"==typeof r&&(e=r)}n.push(e+" "),e=""}var s=i.mathspeak();/^[A-Za-z]*$/.test(i.text())?s='"'+s+'"':isNaN(i.text())&&(s=" "+s,"."!==i.text()&&(s+=" ")),n.push(s.replace(/ +(?= )/g,""))}return n}).join("")},e.ariaLabel="block",e.keystroke=function(e,n,i){return!i.options.spaceBehavesLikeTab||"Spacebar"!==e&&"Shift-Spacebar"!==e?t.keystroke.apply(this,arguments):(n.preventDefault(),void i.escapeDir("Shift-Spacebar"===e?S:k,e,n))},e.moveOutOf=function(e,t,n){var i=n&&this.parent[n+"Into"];!i&&this[e]?(t.insAtDirEnd(-e,this[e]),U.queueDirEndOf(-e).queue(t.parent,!0)):(t.insDirOf(e,this.parent),U.queueDirOf(e).queue(this.parent))},e.selectOutOf=function(e,t){t.insDirOf(e,this.parent)},e.deleteOutOf=function(e,t){t.unwrapGramp()},e.seek=function(e,t){var n=this.ends[k];if(!n||n.jQ.offset().left+n.jQ.outerWidth()<e)return t.insAtRightEnd(this);if(e<this.ends[S].jQ.offset().left)return t.insAtLeftEnd(this);for(;e<n.jQ.offset().left;)n=n[S];return n.seek(e,t)},e.chToCmd=function(e,t){var n;return e.match(/^[a-eg-zA-Z]$/)?ne(e):/^\d$/.test(e)?ee(e):t&&t.useDivisionSymbol&&"/"==e?P[""](e):t&&t.useMultiplicationSymbol&&"*"==e?P[""](e):(n=A[e]||P[e])?n(e):Q(e)},e.write=function(e,t){var n=this.chToCmd(t,e.options);e.selection&&n.replaces(e.replaceSelection()),n.createLeftOf(e.show())},e.focus=function(){return this.jQ.addClass("mq-hasCursor"),this.jQ.removeClass("mq-empty"),this},e.blur=function(){return this.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.jQ.addClass("mq-empty"),this}});L.StaticMath=function(e){return w(e.AbstractMathQuill,function(t,n){this.RootBlock=Z,t.__mathquillify=function(){return n.__mathquillify.call(this,"mq-math-mode"),this.__controller.delegateMouseEvents(),this.__controller.staticMathTextareaEvents(),this},t.init=function(){n.init.apply(this,arguments),this.__controller.root.postOrder("registerInnerField",this.innerFields=[],e.MathField)},t.latex=function(){var t=n.latex.apply(this,arguments);return arguments.length>0&&this.__controller.root.postOrder("registerInnerField",this.innerFields=[],e.MathField),t}})};var J=w(Z,u);L.MathField=function(t){return w(t.EditableField,function(t,n){this.RootBlock=J,t.__mathquillify=function(t,i){return this.config(t),i>1&&(this.__controller.root.reflow=e),n.__mathquillify.call(this,"mq-editable-field mq-math-mode"),delete this.__controller.root.reflow,this}})};var ee=w(Q,function(e,t){e.createLeftOf=function(e){e.options.autoSubscriptNumerals&&e.parent!==e.parent.parent.sub&&(e[S]instanceof te&&e[S].isItalic!==!1||e[S]instanceof Se&&e[S][S]instanceof te&&e[S][S].isItalic!==!1)?(P._().createLeftOf(e),t.createLeftOf.call(this,e),e.insRightOf(e.parent.parent)):t.createLeftOf.call(this,e)}}),te=w(X,function(e,t){e.init=function(e,n){t.init.call(this,e,"<var>"+(n||e)+"</var>")},e.text=function(){var e=this.ctrlSeq;return!this[S]||this[S]instanceof te||this[S]instanceof K||"\\ "===this[S].ctrlSeq||(e="*"+e),!this[k]||this[k]instanceof K||this[k]instanceof Se||(e+="*"),e}});O.p.autoCommands={_maxLength:0},N.autoCommands=function(e){if(!/^[a-z]+(?: [a-z]+)*$/i.test(e))throw'"'+e+'" not a space-delimited list of only letters';for(var t=e.split(" "),n={},i=0,r=0;r<t.length;r+=1){var s=t[r];if(s.length<2)throw'autocommand "'+s+'" not minimum length of 2';if(P[s]===ae)throw'"'+s+'" is a built-in operator name';n[s]=1,i=b(i,s.length)}return n._maxLength=i,n};var ne=w(te,function(e,t){function n(e){return!e||e instanceof K||e instanceof ke}e.init=function(e){return t.init.call(this,this.letter=e)},e.createLeftOf=function(e){t.createLeftOf.apply(this,arguments);var n=e.options.autoCommands,i=n._maxLength;if(i>0){for(var r="",s=this,a=0;s instanceof ne&&s.ctrlSeq===s.letter&&i>a;)r=s.letter+r,s=s[S],a+=1;for(;r.length;){if(n.hasOwnProperty(r)){for(var a=1,s=this;a<r.length;a+=1,s=s[S]);return M(s,this).remove(),e[S]=s[S],P[r](r).createLeftOf(e)}r=r.slice(1)}}},e.italicize=function(e){return this.isItalic=e,this.jQ.toggleClass("mq-operator-name",!e),this},e.finalizeTree=e.siblingDeleted=e.siblingCreated=function(e,t){t!==S&&this[k]instanceof ne||this.autoUnItalicize(e)},e.autoUnItalicize=function(e){var t=e.autoOperatorNames;if(0!==t._maxLength){for(var i=this.letter,r=this[S];r instanceof ne;r=r[S])i=r.letter+i;for(var s=this[k];s instanceof ne;s=s[k])i+=s.letter;M(r[k]||this.parent.ends[S],s[S]||this.parent.ends[k]).each(function(e){e.italicize(!0).jQ.removeClass("mq-first mq-last mq-followed-by-supsub"),e.ctrlSeq=e.letter});e:for(var a=0,o=r[k]||this.parent.ends[S];a<i.length;a+=1,o=o[k])for(var c=y(t._maxLength,i.length-a);c>0;c-=1){var l=i.slice(a,a+c);if(t.hasOwnProperty(l)){for(var u=0,h=o;c>u;u+=1,h=h[k]){h.italicize(!1);var d=h}var p=ie.hasOwnProperty(l);if(o.ctrlSeq=(p?"\\":"\\operatorname{")+o.ctrlSeq,d.ctrlSeq+=p?" ":"}",se.hasOwnProperty(l)&&d[S][S][S].jQ.addClass("mq-last"),n(o[S])||o.jQ.addClass("mq-first"),!n(d[k]))if(d[k]instanceof Se){var f=d[k],m=f.siblingCreated=f.siblingDeleted=function(){f.jQ.toggleClass("mq-after-operator-name",!(f[k]instanceof Pe))};m()}else d.jQ.toggleClass("mq-last",!(d[k]instanceof Pe));a+=c-1,o=d;continue e}}}}}),ie={},re=O.p.autoOperatorNames={_maxLength:9},se={limsup:1,liminf:1,projlim:1,injlim:1};!function(){for(var e="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "),t=0;t<e.length;t+=1)ie[e[t]]=re[e[t]]=1;for(var n="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "),t=0;t<n.length;t+=1)ie[n[t]]=1;for(var i="sin cos tan sec cosec csc cotan cot ctg".split(" "),t=0;t<i.length;t+=1)re[i[t]]=re["arc"+i[t]]=re[i[t]+"h"]=re["ar"+i[t]+"h"]=re["arc"+i[t]+"h"]=1;for(var r="gcf hcf lcm proj span".split(" "),t=0;t<r.length;t+=1)re[r[t]]=1}(),N.autoOperatorNames=function(e){if("string"!=typeof e)throw'"'+e+'" not a space-delimited list';if(!/^[a-z\|\-]+(?: [a-z\|\-]+)*$/i.test(e))throw'"'+e+'" not a space-delimited list of letters or "|"';for(var t=e.split(" "),n={},i=0,r=0;r<t.length;r+=1){var s=t[r];if(s.length<2)throw'"'+s+'" not minimum length of 2';if(s.indexOf("|")<0)n[s]=s,i=b(i,s.length);else{var a=s.split("|");if(a.length>2)throw'"'+s+'" has more than 1 mathspeak delimiter';if(a[0].length<2)throw'"'+s[0]+'" not minimum length of 2';n[a[0]]=a[1].replace(/-/g," "),i=b(i,a[0].length)}}return n._maxLength=i,n};var ae=w(X,function(e,t){e.init=function(e){this.ctrlSeq=e},e.createLeftOf=function(e){for(var t=this.ctrlSeq,n=0;n<t.length;n+=1)ne(t.charAt(n)).createLeftOf(e)},e.parser=function(){for(var e=this.ctrlSeq,t=Z(),n=0;n<e.length;n+=1)ne(e.charAt(n)).adopt(t,t.ends[k],0);return B.succeed(t.children())}});for(var oe in re)re.hasOwnProperty(oe)&&(P[oe]=ae);P.operatorname=w(Y,function(t){t.createLeftOf=e,t.numBlocks=function(){return 1},t.parser=function(){return H.block.map(function(e){var t=!0,n="",i=e.children();return i.each(function(e){e instanceof ne?n+=e.letter:t=!1}),t&&"ans"===n?P[n](n):i})}}),P.f=w(ne,function(e,t){e.init=function(){X.p.init.call(this,this.letter="f",'<var class="mq-f">f</var>')},e.italicize=function(e){return this.jQ.html("f").toggleClass("mq-f",e),
t.italicize.apply(this,arguments)}}),P[" "]=P.space=i(Q,"\\ ","&nbsp;","space"),P["'"]=P.prime=i(Q,"'","&prime;","prime"),P.backslash=i(Q,"\\backslash ","\\","backslash"),A["\\"]||(A["\\"]=P.backslash),P.$=i(Q,"\\$","$","dollar");var ce=w(X,function(e,t){e.init=function(e,n){t.init.call(this,e,'<span class="mq-nonSymbola">'+(n||e)+"</span>")}});P["@"]=ce,P["&"]=i(ce,"\\&","&amp;","and"),P["%"]=i(ce,"\\%","%","percent"),P.alpha=P.beta=P.gamma=P.delta=P.zeta=P.eta=P.theta=P.iota=P.kappa=P.mu=P.nu=P.xi=P.rho=P.sigma=P.tau=P.chi=P.psi=P.omega=w(te,function(e,t){e.init=function(e){t.init.call(this,"\\"+e+" ","&"+e+";")}}),P.phi=i(te,"\\phi ","&#981;","phi"),P.phiv=P.varphi=i(te,"\\varphi ","&phi;","phi"),P.epsilon=i(te,"\\epsilon ","&#1013;","epsilon"),P.epsiv=P.varepsilon=i(te,"\\varepsilon ","&epsilon;","epsilon"),P.piv=P.varpi=i(te,"\\varpi ","&piv;","piv"),P.sigmaf=P.sigmav=P.varsigma=i(te,"\\varsigma ","&sigmaf;","sigma"),P.thetav=P.vartheta=P.thetasym=i(te,"\\vartheta ","&thetasym;","theta"),P.upsilon=P.upsi=i(te,"\\upsilon ","&upsilon;","upsilon"),P.gammad=P.Gammad=P.digamma=i(te,"\\digamma ","&#989;","gamma"),P.kappav=P.varkappa=i(te,"\\varkappa ","&#1008;","kappa"),P.rhov=P.varrho=i(te,"\\varrho ","&#1009;","rho"),P.pi=P[""]=i(ce,"\\pi ","&pi;","pi"),P.lambda=i(ce,"\\lambda ","&lambda;","lambda"),P.Upsilon=P.Upsi=P.upsih=P.Upsih=i(X,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>',"capital upsilon"),P.Gamma=P.Delta=P.Theta=P.Lambda=P.Xi=P.Pi=P.Sigma=P.Phi=P.Psi=P.Omega=P.forall=w(Q,function(e,t){e.init=function(e){t.init.call(this,"\\"+e+" ","&"+e+";")}});var le=w(Y,function(e){e.init=function(e){this.latex=e},e.createLeftOf=function(e){var t=H.parse(this.latex);t.children().adopt(e.parent,e[S],e[k]),e[S]=t.ends[k],t.jQize().insertBefore(e.jQ),t.finalizeInsert(e.options,e),t.ends[k][k].siblingCreated&&t.ends[k][k].siblingCreated(e.options,S),t.ends[S][S].siblingCreated&&t.ends[S][S].siblingCreated(e.options,k),e.parent.bubble("reflow")},e.parser=function(){var e=H.parse(this.latex).children();return B.succeed(e)}});P[""]=i(le,"^1"),P[""]=i(le,"^2"),P[""]=i(le,"^3"),P[""]=i(le,"\\frac14"),P[""]=i(le,"\\frac12"),P[""]=i(le,"\\frac34");var ue=w(K,function(e){e.init=Q.prototype.init,e.contactWeld=e.siblingCreated=e.siblingDeleted=function(e,t){return t!==k?(this.jQ[0].className=!this[S]||this[S]instanceof K||/^[,;:\(\[]$/.test(this[S].ctrlSeq)?"":"mq-binary-operator",this):void 0}});P["+"]=i(ue,"+","+","plus"),P[""]=P["-"]=i(ue,"-","&minus;","minus"),P[""]=P.pm=P.plusmn=P.plusminus=i(ue,"\\pm ","&plusmn;","plus-or-minus"),P.mp=P.mnplus=P.minusplus=i(ue,"\\mp ","&#8723;","minus-or-plus"),A["*"]=P.sdot=P.cdot=i(K,"\\cdot ","&middot;","times");var he=w(K,function(e,t){e.init=function(e,n){this.data=e,this.strict=n;var i=n?"Strict":"";t.init.call(this,e["ctrlSeq"+i],e["html"+i],e["text"+i])},e.swap=function(e){this.strict=e;var t=e?"Strict":"";this.ctrlSeq=this.data["ctrlSeq"+t],this.jQ.html(this.data["html"+t]),this.textTemplate=[this.data["text"+t]]},e.deleteTowards=function(e,n){return e!==S||this.strict?void t.deleteTowards.apply(this,arguments):(this.swap(!0),void this.bubble("reflow"))}}),de={ctrlSeq:"\\le ",html:"&le;",text:"",ctrlSeqStrict:"<",htmlStrict:"&lt;",textStrict:"<"},pe={ctrlSeq:"\\ge ",html:"&ge;",text:"",ctrlSeqStrict:">",htmlStrict:"&gt;",textStrict:">"};P["<"]=P.lt=i(he,de,!0),P[">"]=P.gt=i(he,pe,!0),P[""]=P.le=P.leq=i(he,de,!1),P[""]=P.ge=P.geq=i(he,pe,!1);var fe=w(K,function(e,t){e.init=function(){t.init.call(this,"=","=","=","equals")},e.createLeftOf=function(e){return e[S]instanceof he&&e[S].strict?(e[S].swap(!1),void e[S].bubble("reflow")):void t.createLeftOf.apply(this,arguments)}});P["="]=fe,P[""]=P.times=i(K,"\\times ","&times;","[x]","times"),P[""]=P.div=P.divide=P.divides=i(K,"\\div ","&divide;","[/]","over"),A["~"]=P.sim=i(K,"\\sim ","~","~","tilde");var me,ge,ve=e,ye=document.createElement("div"),be=ye.style,_e={transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1};for(var xe in _e)if(xe in be){ge=xe;break}ge?me=function(e,t,n){e.css(ge,"scale("+t+","+n+")")}:"filter"in be?(ve=function(e){e.className=e.className},me=function(e,t,n){function i(){e.css("marginRight",(r.width()-1)*(t-1)/t+"px")}t/=1+(n-1)/2,e.css("fontSize",n+"em"),e.hasClass("mq-matrixed-container")||e.addClass("mq-matrixed-container").wrapInner('<span class="mq-matrixed"></span>');var r=e.children().css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+t+",SizingMethod='auto expand')");i();var s=setInterval(i);E(window).load(function(){clearTimeout(s),i()})}):me=function(e,t,n){e.css("fontSize",n+"em")};var we=w(Y,function(e,t){e.init=function(e,n,i){t.init.call(this,e,"<"+n+" "+i+">&0</"+n+">")}});P.mathrm=i(we,"\\mathrm","span",'class="mq-roman mq-font"'),P.mathit=i(we,"\\mathit","i",'class="mq-font"'),P.mathbf=i(we,"\\mathbf","b",'class="mq-font"'),P.mathsf=i(we,"\\mathsf","span",'class="mq-sans-serif mq-font"'),P.mathtt=i(we,"\\mathtt","span",'class="mq-monospace mq-font"'),P.underline=i(we,"\\underline","span",'class="mq-non-leaf mq-underline"'),P.overline=P.bar=i(we,"\\overline","span",'class="mq-non-leaf mq-overline"'),P.overrightarrow=i(we,"\\overrightarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-right"'),P.overleftarrow=i(we,"\\overleftarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-left"');var Se=(P.textcolor=w(Y,function(e,t){e.setColor=function(e){this.color=e,this.htmlTemplate='<span class="mq-textcolor" style="color:'+e+'">&0</span>'},e.latex=function(){return"\\textcolor{"+this.color+"}{"+this.blocks[0].latex()+"}"},e.parser=function(){var e=this,n=B.optWhitespace,i=B.string,r=B.regex;return n.then(i("{")).then(r(/^[#\w\s.,()%-]*/)).skip(i("}")).then(function(n){return e.setColor(n),t.parser.call(e)})}}),P["class"]=w(Y,function(e,t){e.parser=function(){var e=this,n=B.string,i=B.regex;return B.optWhitespace.then(n("{")).then(i(/^[-\w\s\\\xA0-\xFF]*/)).skip(n("}")).then(function(n){return e.htmlTemplate='<span class="mq-class '+n+'">&0</span>',t.parser.call(e)})}}),w(Y,function(e,t){e.ctrlSeq="_{...}^{...}",e.createLeftOf=function(e){return e[S]||this.replacedFragment||!e.options.supSubsRequireOperand?t.createLeftOf.apply(this,arguments):void 0},e.contactWeld=function(e){for(var t=S;t;t=t===S?k:!1)if(this[t]instanceof Se){for(var n="sub";n;n="sub"===n?"sup":!1){var i=this[n],r=this[t][n];if(i){if(r)if(i.isEmpty())var s=T(r,0,r.ends[S]);else{i.jQ.children().insAtDirEnd(-t,r.jQ);var a=i.children().disown(),s=T(r,a.ends[k],r.ends[S]);t===S?a.adopt(r,r.ends[k],0):a.adopt(r,0,r.ends[S])}else this[t].addBlock(i.disown());this.placeCursor=function(e,n){return function(i){i.insAtDirEnd(-t,e||n)}}(r,i)}}this.remove(),e&&e[S]===this&&(t===k&&s?s[S]?e.insRightOf(s[S]):e.insAtLeftEnd(s.parent):e.insRightOf(this[t]));break}},O.p.charsThatBreakOutOfSupSub="",e.finalizeTree=function(){this.ends[S].write=function(e,t){if(e.options.autoSubscriptNumerals&&this===this.parent.sub){if("_"===t)return;var n=this.chToCmd(t,e.options);return n instanceof X?e.deleteSelection():e.clearSelection().insRightOf(this.parent),n.createLeftOf(e.show())}e[S]&&!e[k]&&!e.selection&&e.options.charsThatBreakOutOfSupSub.indexOf(t)>-1&&e.insRightOf(this.parent),Z.p.write.apply(this,arguments)}},e.moveTowards=function(e,n,i){n.options.autoSubscriptNumerals&&!this.sup?n.insDirOf(e,this):t.moveTowards.apply(this,arguments)},e.deleteTowards=function(e,n){if(n.options.autoSubscriptNumerals&&this.sub){var i=this.sub.ends[-e];i instanceof X?i.remove():i&&i.deleteTowards(e,n.insAtDirEnd(-e,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(S,n.insAtLeftEnd(this.sub)),this.sup&&n.insDirOf(-e,this))}else t.deleteTowards.apply(this,arguments)},e.latex=function(){function e(e,t){var n=t&&t.latex();return t?e+(1===n.length?n:"{"+(n||" ")+"}"):""}return e("_",this.sub)+e("^",this.sup)},e.addBlock=function(e){"sub"===this.supsub?(this.sup=this.upInto=this.sub.upOutOf=e,e.adopt(this,this.sub,0).downOutOf=this.sub,e.jQ=E('<span class="mq-sup"/>').append(e.jQ.children()).attr(v,e.id).prependTo(this.jQ)):(this.sub=this.downInto=this.sup.downOutOf=e,e.adopt(this,0,this.sup).upOutOf=this.sup,e.jQ=E('<span class="mq-sub"></span>').append(e.jQ.children()).attr(v,e.id).appendTo(this.jQ.removeClass("mq-sup-only")),this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>'));for(var t=0;2>t;t+=1)(function(e,t,n,i){e[t].deleteOutOf=function(r,s){if(s.insDirOf(this[r]?-r:r,this.parent),!this.isEmpty()){var a=this.ends[r];this.children().disown().withDirAdopt(r,s.parent,s[r],s[-r]).jQ.insDirOf(-r,s.jQ),s[-r]=a}e.supsub=n,delete e[t],delete e[i+"Into"],e[n][i+"OutOf"]=h,delete e[n].deleteOutOf,"sub"===t&&E(e.jQ.addClass("mq-sup-only")[0].lastChild).remove(),this.remove()}})(this,"sub sup".split(" ")[t],"sup sub".split(" ")[t],"down up".split(" ")[t])}}));P.subscript=P._=w(Se,function(e,t){e.supsub="sub",e.htmlTemplate='<span class="mq-supsub mq-non-leaf"><span class="mq-sub">&0</span><span style="display:inline-block;width:0">&#8203;</span></span>',e.textTemplate=["_"],e.mathspeakTemplate=["Subscript, ",", Baseline"],e.ariaLabel="subscript",e.finalizeTree=function(){this.downInto=this.sub=this.ends[S],this.sub.upOutOf=h,t.finalizeTree.call(this)}}),P.superscript=P.supscript=P["^"]=w(Se,function(e,t){e.supsub="sup",e.htmlTemplate='<span class="mq-supsub mq-non-leaf mq-sup-only"><span class="mq-sup">&0</span></span>',e.textTemplate=["^"],e.mathspeakTemplate=["Superscript, ",", Baseline"],e.ariaLabel="superscript",e.finalizeTree=function(){this.upInto=this.sup=this.ends[k],this.sup.downOutOf=h,t.finalizeTree.call(this)}});var ke=w(Y,function(e,t){e.init=function(e,t){var n='<span class="mq-large-operator mq-non-leaf"><span class="mq-to"><span>&1</span></span><big>'+t+'</big><span class="mq-from"><span>&0</span></span></span>';X.prototype.init.call(this,e,n)},e.createLeftOf=function(e){t.createLeftOf.apply(this,arguments),e.options.sumStartsWithNEquals&&(ne("n").createLeftOf(e),fe().createLeftOf(e))},e.latex=function(){function e(e){return 1===e.length?e:"{"+(e||" ")+"}"}return this.ctrlSeq+"_"+e(this.ends[S].latex())+"^"+e(this.ends[k].latex())},e.parser=function(){for(var e=B.string,t=B.optWhitespace,n=B.succeed,i=H.block,r=this,s=r.blocks=[Z(),Z()],a=0;a<s.length;a+=1)s[a].adopt(r,r.ends[k],0);return t.then(e("_").or(e("^"))).then(function(e){var t=s["_"===e?0:1];return i.then(function(e){return e.children().adopt(t,t.ends[k],0),n(r)})}).many().result(r)},e.finalizeTree=function(){this.downInto=this.ends[S],this.upInto=this.ends[k],this.ends[S].upOutOf=this.ends[k],this.ends[k].downOutOf=this.ends[S]}});P[""]=P.sum=P.summation=i(ke,"\\sum ","&sum;"),P[""]=P.prod=P.product=i(ke,"\\prod ","&prod;"),P.coprod=P.coproduct=i(ke,"\\coprod ","&#8720;"),P[""]=P["int"]=P.integral=w(ke,function(e,t){e.init=function(){var e='<span class="mq-int mq-non-leaf"><big>&int;</big><span class="mq-supsub mq-non-leaf"><span class="mq-sup"><span class="mq-sup-inner">&1</span></span><span class="mq-sub">&0</span><span style="display:inline-block;width:0">&#8203</span></span></span>';X.prototype.init.call(this,"\\int ",e,"integral")},e.createLeftOf=Y.p.createLeftOf});var Ee=P.frac=P.dfrac=P.cfrac=P.fraction=w(Y,function(e,t){e.ctrlSeq="\\frac",e.htmlTemplate='<span class="mq-fraction mq-non-leaf"><span class="mq-numerator">&0</span><span class="mq-denominator">&1</span><span style="display:inline-block;width:0">&#8203;</span></span>',e.textTemplate=["(",")/(",")"],e.finalizeTree=function(){this.upInto=this.ends[k].upOutOf=this.ends[S],this.downInto=this.ends[S].downOutOf=this.ends[k],this.ends[S].ariaLabel="numerator",this.ends[k].ariaLabel="denominator",this.getFracDepth()>1?this.mathspeakTemplate=["StartNestedFraction, ","NestedOver",", EndNestedFraction"]:this.mathspeakTemplate=["StartFraction, ","Over",", EndFraction"]},e.getFracDepth=function(){var e=0,t=function(e,n){return e instanceof C&&e.ctrlSeq&&e.ctrlSeq.toLowerCase().search("frac")>=0&&(n+=1),e.parent?t(e.parent,n):n};return t(this,e)}}),Te=P.over=A["/"]=w(Ee,function(t,n){t.createLeftOf=function(t){if(!this.replacedFragment){for(var i=t[S];i&&!(i instanceof K||i instanceof(P.text||e)||i instanceof ke||"\\ "===i.ctrlSeq||/^[,;:]$/.test(i.ctrlSeq));)i=i[S];i instanceof ke&&i[k]instanceof Se&&(i=i[k],i[k]instanceof Se&&i[k].ctrlSeq!=i.ctrlSeq&&(i=i[k])),i!==t[S]&&(this.replaces(M(i[k]||t.parent.ends[S],t[S])),t[S]=i)}n.createLeftOf.call(this,t)}});P.ans=w(X,function(e,t){e.init=function(e){t.init.call(this,"\\operatorname{ans}",'<span class="mq-ans">ans</span>',"ans")}});var Ce=P.sqrt=P[""]=w(Y,function(e,t){e.ctrlSeq="\\sqrt",e.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-sqrt-prefix">&radic;</span><span class="mq-non-leaf mq-sqrt-stem">&0</span></span>',e.textTemplate=["sqrt(",")"],e.mathspeakTemplate=["StartRoot, ",", EndRoot"],e.ariaLabel="root",e.parser=function(){return H.optBlock.then(function(e){return H.block.map(function(t){var n=Me();return n.blocks=[e,t],e.adopt(n,0,0),t.adopt(n,e,0),n})}).or(t.parser.call(this))},e.reflow=function(){var e=this.ends[k].jQ;me(e.prev(),1,e.innerHeight()/+e.css("fontSize").slice(0,-2)-.1)}}),Me=(P.vec=w(Y,function(e,t){e.ctrlSeq="\\vec",e.htmlTemplate='<span class="mq-non-leaf"><span class="mq-vector-prefix">&rarr;</span><span class="mq-vector-stem">&0</span></span>',e.textTemplate=["vec(",")"]}),P.nthroot=w(Ce,function(e,t){e.htmlTemplate='<sup class="mq-nthroot mq-non-leaf">&0</sup><span class="mq-scaled"><span class="mq-sqrt-prefix mq-scaled">&radic;</span><span class="mq-sqrt-stem mq-non-leaf">&1</span></span>',e.textTemplate=["sqrt[","](",")"],e.latex=function(){return"\\sqrt["+this.ends[S].latex()+"]{"+this.ends[k].latex()+"}"}})),Pe=w(w(Y,d),function(t,n){t.init=function(e,t,i,r,s){n.init.call(this,"\\left"+r,f,[t,i]),this.side=e,this.sides={},this.sides[S]={ch:t,ctrlSeq:r},this.sides[k]={ch:i,ctrlSeq:s}},t.numBlocks=function(){return 1},t.html=function(){return this.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-paren'+(this.side===k?" mq-ghost":"")+'">'+this.sides[S].ch+'</span><span class="mq-non-leaf">&0</span><span class="mq-scaled mq-paren'+(this.side===S?" mq-ghost":"")+'">'+this.sides[k].ch+"</span></span>",n.html.call(this)},t.latex=function(){return"\\left"+this.sides[S].ctrlSeq+this.ends[S].latex()+"\\right"+this.sides[k].ctrlSeq},t.mathspeak=function(){var e=this.sides[S].ch,t=this.sides[k].ch;return"|"===e&&"|"===t?(this.mathspeakTemplate=["StartAbsoluteValue, ",", EndAbsoluteValue"],this.ariaLabel="absolute value"):(this.mathspeakTemplate=["left "+Ie[e]+",",", right "+Ie[t]],this.ariaLabel=Ie[e]+" block"),n.mathspeak.call(this)},t.oppBrack=function(e,t,n){return t instanceof Pe&&t.side&&t.side!==-n&&("|"===this.sides[this.side].ch||t.side===-this.side)&&(!e.restrictMismatchedBrackets||Ae[this.sides[this.side].ch]===t.sides[t.side].ch||{"(":"]","[":")"}[this.sides[S].ch]===t.sides[k].ch)&&t},t.closeOpposing=function(e){e.side=0,e.sides[this.side]=this.sides[this.side],e.delimjQs.eq(this.side===S?0:1).removeClass("mq-ghost").html(this.sides[this.side].ch)},t.createLeftOf=function(e){if(!this.replacedFragment)var t=e.options,i=this.oppBrack(t,e[S],S)||this.oppBrack(t,e[k],k)||this.oppBrack(t,e.parent.parent);if(i){var r=this.side=-i.side;this.closeOpposing(i),i===e.parent.parent&&e[r]&&(M(e[r],e.parent.ends[r],-r).disown().withDirAdopt(-r,i.parent,i,i[r]).jQ.insDirOf(r,i.jQ),i.bubble("reflow"))}else i=this,r=i.side,i.replacedFragment?i.side=0:e[-r]&&(i.replaces(M(e[-r],e.parent.ends[-r],r)),e[-r]=0),n.createLeftOf.call(i,e);r===S?e.insAtLeftEnd(i.ends[S]):e.insRightOf(i)},t.placeCursor=e,t.unwrap=function(){this.ends[S].children().disown().adopt(this.parent,this,this[k]).jQ.insertAfter(this.jQ),this.remove()},t.deleteSide=function(e,t,n){var i=this.parent,r=this[e],s=i.ends[e];if(e===this.side)return this.unwrap(),void(r?n.insDirOf(-e,r):n.insAtDirEnd(e,i));var a=n.options,o=!this.side;if(this.side=-e,this.oppBrack(a,this.ends[S].ends[this.side],e)){this.closeOpposing(this.ends[S].ends[this.side]);var c=this.ends[S].ends[e];this.unwrap(),c.siblingCreated&&c.siblingCreated(n.options,e),r?n.insDirOf(-e,r):n.insAtDirEnd(e,i)}else{if(this.oppBrack(a,this.parent.parent,e))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else{if(t&&o)return this.unwrap(),void(r?n.insDirOf(-e,r):n.insAtDirEnd(e,i));this.sides[e]={ch:Ae[this.sides[this.side].ch],ctrlSeq:Ae[this.sides[this.side].ctrlSeq]},this.delimjQs.removeClass("mq-ghost").eq(e===S?0:1).addClass("mq-ghost").html(this.sides[e].ch)}if(r){var c=this.ends[S].ends[e];M(r,s,-e).disown().withDirAdopt(-e,this.ends[S],c,0).jQ.insAtDirEnd(e,this.ends[S].jQ.removeClass("mq-empty")),c.siblingCreated&&c.siblingCreated(n.options,e),n.insDirOf(-e,r)}else t?n.insDirOf(e,this):n.insAtDirEnd(e,this.ends[S])}},t.deleteTowards=function(e,t){this.deleteSide(-e,!1,t)},t.finalizeTree=function(){this.ends[S].deleteOutOf=function(e,t){this.parent.deleteSide(e,!0,t)},this.finalizeTree=this.intentionalBlur=function(){this.delimjQs.eq(this.side===S?1:0).removeClass("mq-ghost"),this.side=0}},t.siblingCreated=function(e,t){t===-this.side&&this.finalizeTree()}}),Ae={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|"},Ie={"&lang;":"angle-bracket","&rang;":"angle-bracket","|":"pipe"};p("(",null,"parenthesis"),p("[",null,"bracket"),p("{","\\{","brace"),P.langle=i(Pe,S,"&lang;","&rang;","\\langle ","\\rangle "),P.rangle=i(Pe,k,"&lang;","&rang;","\\langle ","\\rangle "),A["|"]=i(Pe,S,"|","|","|","|"),P.left=w(Y,function(e){e.parser=function(){var e=B.regex,t=B.string,n=(B.succeed,B.optWhitespace);return n.then(e(/^(?:[([|]|\\\{)/)).then(function(i){var r="\\"===i.charAt(0)?i.slice(1):i;return H.then(function(s){return t("\\right").skip(n).then(e(/^(?:[\])|]|\\\})/)).map(function(e){var t="\\"===e.charAt(0)?e.slice(1):e,n=Pe(0,r,t,i,e);return n.blocks=[s],s.adopt(n,0,0),n})})})}}),P.right=w(Y,function(e){e.parser=function(){return B.fail("unmatched \\right")}});var qe=P.binom=P.binomial=w(w(Y,d),function(e,t){e.ctrlSeq="\\binom",e.htmlTemplate='<span class="mq-non-leaf"><span class="mq-paren mq-scaled">(</span><span class="mq-non-leaf"><span class="mq-array mq-non-leaf"><span>&0</span><span>&1</span></span></span><span class="mq-paren mq-scaled">)</span></span>',e.textTemplate=["choose(",",",")"],e.mathspeakTemplate=["StartBinomial, ","Choose",", EndBinomial"],e.ariaLabel="binomial"});P.choose=w(qe,function(e){e.createLeftOf=Te.prototype.createLeftOf});P.editable=P.MathQuillMathField=w(Y,function(e,t){e.ctrlSeq="\\MathQuillMathField",e.htmlTemplate='<span class="mq-editable-field"><span class="mq-root-block">&0</span></span>',e.parser=function(){var e=this,n=B.string,i=B.regex,r=B.succeed;return n("[").then(i(/^[a-z][a-z0-9]*/i)).skip(n("]")).map(function(t){e.name=t}).or(r()).then(t.parser.call(e))},e.finalizeTree=function(){var e=D(this.ends[S],this.jQ,O());e.KIND_OF_MQ="MathField",e.editable=!0,e.createTextarea(),e.editablesTextareaEvents(),e.cursor.insAtRightEnd(e.root),u(e.root)},e.registerInnerField=function(e,t){e.push(e[this.name]=t(this.ends[S].controller))},e.latex=function(){return this.ends[S].latex()},e.text=function(){return this.ends[S].text()}});var De=P.embed=w(X,function(e,t){e.setOptions=function(e){function t(){return""}return this.text=e.text||t,this.htmlTemplate=e.htmlString||"",this.latex=e.latex||t,this},e.parser=function(){var e=this;return string=B.string,regex=B.regex,succeed=B.succeed,string("{").then(regex(/^[a-z][a-z0-9]*/i)).skip(string("}")).then(function(t){return string("[").then(regex(/^[-\w\s]*/)).skip(string("]")).or(succeed()).map(function(n){return e.setOptions(j[t](n))})})}}),Le=l(1);for(var Oe in Le)(function(e,t){"function"==typeof t?(c[e]=function(){return o(),t.apply(this,arguments)},c[e].prototype=t.prototype):c[e]=t})(Oe,Le[Oe])}(),define("mathquill_src",["jquery"],function(){}),define("loadcss!css/Symbola-basic",function(){}),define("loadcss!vendor_css/mathquill/mathquill-basic",function(){}),define("toplevel/mathquill",["require","mathquill_src","loadcss!css/Symbola-basic","loadcss!vendor_css/mathquill/mathquill-basic"],function(e){return e("mathquill_src"),e("loadcss!css/Symbola-basic"),e("loadcss!vendor_css/mathquill/mathquill-basic"),window.MathQuill.noConflict()}),define("mathquill",["require","browser","jquery","keys","toplevel/mathquill"],function(e){var t=e("browser"),n=e("jquery"),i=e("keys"),r=e("toplevel/mathquill").getInterface(1),s=r.L;return r.config({handlers:{reflow:function(e){setTimeout(function(){n(e.el()).trigger("render")})},enter:function(e){setTimeout(function(){n(e.el()).trigger("enterPressed")})},upOutOf:function(e){setTimeout(function(){n(e.el()).trigger("upPressed")})},downOutOf:function(e){setTimeout(function(){n(e.el()).trigger("downPressed")})},moveOutOf:function(e,t){setTimeout(function(){n(t.el()).trigger((e===s?"left":"right")+"Pressed")})},deleteOutOf:function(e,t){setTimeout(function(){n(t.el()).trigger((e===s?"backspace":"del")+"Pressed")})}},leftRightIntoCmdGoes:"up",sumStartsWithNEquals:!0,supSubsRequireOperand:!0,charsThatBreakOutOfSupSub:"+-=<>",autoCommands:"alpha beta sqrt theta phi pi tau nthroot sum prod int ans",autoSubscriptNumerals:!0,restrictMismatchedBrackets:!0,substituteTextarea:function(){return t.IS_IOS||t.IS_ANDROID?n('<span class="dcg-mathquill-input-span" tabindex=0 role="textbox" style="display:inline-block;height:1px;width:1px">').on("keypress",function(e){var t=r(n(document.activeElement).closest(".mq-editable-field")[0]);t&&(e.preventDefault(),t.typedText(i.lookupChar(e)))})[0]:t.IS_WINDOWS&&t.IS_TOUCH?n("<textarea readonly>").on("keydown",function(){this.readOnly=!1,this.select()}).on("blur",function(){this.readOnly=!0})[0]:n("<textarea>")[0]},autoOperatorNames:["exp|exponent ln|natural-log log","total length mean median quantile nCr nPr","stdev|standard-deviation stddev|standard-deviation","stdDev|standard-deviation stdevp|standard-deviation-population","stddevp|standard-deviation-population stdDevP|standard-deviation-population mad var|variance","variance cov|co-variance corr|correlation","lcm mcm gcd mcd gcf mod ceil|ceiling floor round abs|absolute-value min max sign|signum signum","sin|sine cos|cosine tan|tangent csc|co-secant sec|secant cot|co-tangent","sinh|hyperbolic-sine cosh|hyperbolic-cosine tanh|hyperbolic-tangent csch|hyperbolic-co-secant","sech|hyperbolic-secant coth|hyperbolic-co-tangent","arcsin|arc-sine arccos|arc-cosine arctan|arc-tangent arccsc|arc-co-secant arcsec|arc-secant","arccot|arc-co-tangent","arcsinh|hyperbolic-arc-sine arccosh|hyperbolic-arc-cosine arctanh|hyperbolic-arc-co-tangent","arccsch|hyperbolic-arc-co-secant arcsech|hyperbolic-arc-secant","arccoth|hyperbolic-arc-co-tangent","distance midpoint"].join(" ")})}),define("expressions/dragdrop",["require","jquery","pjs","tipsy","jquery.handleevent"],function(e){var t=e("jquery"),n=e("pjs"),i=e("tipsy");e("jquery.handleevent");var r=n(function(e){e.toggleStyling=function(e){},e.onDragStart=function(e,t){},e.onDragStop=function(e){},e.commitDragState=function(e){},e.updateScroll=function(){},e.computeDragPosition=function(e,t){return{x:e,y:t}},e.computeDragState=function(e,t){return{}},e.previewDragState=function(e){},e.buildDragList=function(){},e.init=function(e){this.expressionsView=e,this.active=!1},e.start=function(e,t){1===e.touches.length&&(e.wasHandled("dcg-longhold")||(this.active=!0,this.exppanel=this.expressionsView.$(".dcg-exppanel"),this.setupEventListeners(e),this.onDragStart(e,t),this.dragList=this.buildDragList(),this.toggleStyling(!0),this.drag(e.touches[0].x,e.touches[0].y),i.addDisableLock()))},e.setupEventListeners=function(e){function n(e){for(var t=0;t<e.touches.length;t++){var n=e.touches[t];if(n.identifier===i)return n}}var i=e.touches[0].identifier,r=this;t(document).on("dcg-tapmove.dragdrop",function(e){var t=n(e);t&&r.drag(t.x,t.y)}),t(document).on("dcg-tapend.dragdrop",function(e){var t=n(e);t||(r.stop(),e.handle("dragdrop"))}),this.exppanel.on("scroll.dragdrop",this.drag.bind(this))},e.stop=function(e){this.active=!1,t(document).off(".dragdrop"),this.commitDragState(this.dragState),this.toggleStyling(!1),this.onDragStop(e),i.removeDisableLock()},e.drag=function(e,t){if(this.active){"number"==typeof e&&(this.mouseX=e),"number"==typeof t&&(this.mouseY=t);var n=this;setTimeout(function(){n.updateScroll()},1);var i=this.computeDragPosition(this.mouseX,this.mouseY);this.dragState=this.computeDragState(this.dragList,i),this.previewDragState(this.dragState)}}});return r}),define("expressions/dragdrop_expressions",["require","underscore","browser","pjs","./dragdrop","conditional_blur"],function(e){var t=e("underscore"),n=e("browser"),i=e("pjs"),r=e("./dragdrop"),s=e("conditional_blur"),a=i(r,function(e,i){e.toggleStyling=function(e){this.exppanel.toggleClass("dcg-isDragging",e),this.draggedView.$().toggleClass("dcg-dragging",e),e||(this.draggedView.$().removeClass("dcg-overFolder"),this.expressionsView.$(".dcg-expressionitem").css("transform","none"))},e.onDragStart=function(e,n){this.expressionsView.model.setSelected(null),this.exppanel=this.expressionsView.$(".dcg-exppanel"),s(),e.preventDefault(),this.draggedView=n,this.draggedViewHeight=n.$().outerHeight()-1,this.panelTop=this.exppanel.offset().top,this.panelHeight=this.exppanel.height(),this.expressionListHeight=this.exppanel.find(".dcg-expressionlist").height(),this.panelBottom=this.panelTop+this.panelHeight,this.grabOffset=n.$().offset().top-e.touches[0].y,this.grabY=this.computeDragPosition(e.touches[0].x,e.touches[0].y).y,this.grabIndex=n.model.index,this.draggedViewCount=1,n.model.isFolder&&(this.draggedViewCount+=t.size(n.model.memberIds),this.dropCollapsed=n.model.collapsed,n.model.setProperty("collapsed",!0))},e.onDragStop=function(e){clearTimeout(this.scrollTimeout),this.expressionsView.model.setSelected(this.draggedView.model)},e.buildDragList=function(){var e=this,n=this.expressionsView.model.getItemsByIndexRange(0,1/0);this.expressionsView.graphSettings.config.administerSecretFolders||(n=t.filter(n,function(e){return!this.expressionsView.model.itemIsSecret(e)}.bind(this)));var i=[{y:-(1/0),index:0,folder:void 0}],r=[{y:1/0,index:0,folder:void 0}];return n.forEach(function(t){if(t.id!==e.draggedView.model.id&&!(t.folder&&t.folder.collapsed||t.folder&&e.draggedView.model.isFolder)){var n=e.expressionsView.getItemView(t.id),s=t.index>e.grabIndex,a=n.$();if(t.isFolder&&(t.collapsed||e.draggedView.model.isFolder))for(var o in t.memberIds)a.push(e.expressionsView.getItemView(o).$()[0]);var c,l,u=s?-e.draggedViewHeight:0,h=n.$().height(),d=n.$().position().top+u,p=s?-1:0,f=t.index+p,m=f+a.length;e.draggedView.model.isFolder||(c=t.folder,l=t.isFolder?t:t.folder),i.push({y:d,index:f,folder:c}),i.push({y:d+h/2,index:m,folder:l,elements:a,offset:u}),r={y:d+h,index:m,folder:void 0}}}),i.push(r),i},e.updateScroll=function(){if(clearTimeout(this.scrollTimeout),this.active){var e=0;e=Math.min(e,this.mouseY-this.panelTop),e=Math.max(e,this.mouseY-this.panelBottom+30),e=e*this.panelHeight/900,e&&this.exppanel.scrollTop(this.exppanel.scrollTop()+e)}},e.computeDragPosition=function(e,t){return t=Math.max(t,Math.min(t,this.panelBottom),this.panelTop),t-=this.panelTop,t+=this.grabOffset,t+=this.exppanel.scrollTop(),t+this.draggedViewHeight>=this.expressionListHeight&&(t=this.expressionListHeight-this.draggedViewHeight),{x:NaN,y:t}},e.computeDragState=function(e,n){function i(e){return e.y}var r=t.sortedIndex(e,{y:n.y},i)-1;return{list:e,index:e[r].index,folder:e[r].folder,dragY:n.y}},e.commitDragState=function(e){var t=this,n=this.expressionsView.model;n.undoRedo.oneTransaction(function(){var i=t.draggedView.model;n.moveItemsTo(t.grabIndex,e.index,t.draggedViewCount);var r=e.folder,s=i.folder;r!==s&&(s&&s.removeItem(i),r&&r.addItem(i)),i.isFolder&&i.setProperty("collapsed",t.dropCollapsed)})},e.previewDragState=function(e){var i=this;this.draggedView.$().css("transform",n.translateRule(0,e.dragY-this.grabY)),this.draggedView.$().toggleClass("dcg-overFolder",!!e.folder),t.each(e.list,function(t){if(t.elements){var r=t.offset+(t.index>e.index?i.draggedViewHeight:0);t.elements.css("transform",n.translateRule(0,r))}})}});return a}),define("loadcss!css/add_expression",function(){}),define("template!add_expression",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="<div class=\"dcg-add-expression-dropdown dcg-popover dcg-bottom\" role='complementary' aria-label='Add Item Menu'>\n  <div class=\"dcg-popover-interior\">\n     ",expressions&&(__p+="\n     <div class='dcg-new-item dcg-do-not-blur dcg-action-newexpression' role='button' tabindex=0 aria-label='Add Expression'>\n        <i class='dcg-icon-new-expression dcg-expression-icon'></i>\n        "+(null==(__t=t("expression"))?"":_.escape(__t))+"\n     </div>\n     "),__p+="\n\n     ",notes&&(__p+="\n     <div class='dcg-new-item dcg-do-not-blur dcg-action-newtext' role='button' tabindex=0 aria-label='Add Note'>\n       <i class='dcg-icon-new-text dcg-expression-icon'></i>\n       "+(null==(__t=t("note"))?"":_.escape(__t))+"\n     </div>\n     "),__p+="\n\n     ",tables&&(__p+="\n     <div class='dcg-new-item dcg-do-not-blur dcg-action-newtable' role='button' tabindex=0 aria-label='Add Table'>\n       <i class='dcg-icon-new-table dcg-expression-icon'></i>\n       "+(null==(__t=t("table"))?"":_.escape(__t))+"\n     </div>\n     "),__p+="\n\n     ",folders&&(__p+="\n     <div class='dcg-new-item dcg-do-not-blur dcg-action-newfolder' role='button' tabindex=0 aria-label='Add Folder'>\n       <i class='dcg-icon-new-folder dcg-expression-icon'></i>\n       "+(null==(__t=t("folder"))?"":_.escape(__t))+"\n     </div>\n     "),__p+="\n\n     ",images&&(__p+="\n     <div class='dcg-new-item dcg-do-not-blur dcg-action-newimage' role='button' tabindex=0 aria-label='Add Image'>\n       <i class='dcg-icon-new-image dcg-expression-icon'></i>\n       "+(null==(__t=t("image"))?"":_.escape(__t))+"\n\n       ",__p+='\n       <input type="file" accept="image/*" style="display: none" />\n     </div>\n     '),__p+='\n\n   </div>\n\n   <span class="dcg-arrow"></span>\n</div>\n';return __p}}),function(e){"use strict";var t=function(e,n,i){var r,s,a=document.createElement("img");if(a.onerror=n,a.onload=function(){!s||i&&i.noRevoke||t.revokeObjectURL(s),n&&n(t.scale(a,i))},t.isInstanceOf("Blob",e)||t.isInstanceOf("File",e))r=s=t.createObjectURL(e),a._type=e.type;else{if("string"!=typeof e)return!1;r=e,i&&i.crossOrigin&&(a.crossOrigin=i.crossOrigin)}return r?(a.src=r,a):t.readFile(e,function(e){var t=e.target;t&&t.result?a.src=t.result:n&&n(e)})},n=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;t.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},t.transformCoordinates=function(){},t.getTransformedOptions=function(e){return e},t.renderImageToCanvas=function(e,t,n,i,r,s,a,o,c,l){return e.getContext("2d").drawImage(t,n,i,r,s,a,o,c,l),e},t.hasCanvasOption=function(e){return e.canvas||e.crop},t.scale=function(e,n){n=n||{};var i,r,s,a,o,c,l,u,h,d=document.createElement("canvas"),p=e.getContext||t.hasCanvasOption(n)&&d.getContext,f=e.naturalWidth||e.width,m=e.naturalHeight||e.height,g=f,v=m,y=function(){var e=Math.max((s||g)/g,(a||v)/v);e>1&&(g=Math.ceil(g*e),v=Math.ceil(v*e))},b=function(){var e=Math.min((i||g)/g,(r||v)/v);1>e&&(g=Math.ceil(g*e),v=Math.ceil(v*e))};return p&&(n=t.getTransformedOptions(n),l=n.left||0,u=n.top||0,n.sourceWidth?(o=n.sourceWidth,void 0!==n.right&&void 0===n.left&&(l=f-o-n.right)):o=f-l-(n.right||0),n.sourceHeight?(c=n.sourceHeight,void 0!==n.bottom&&void 0===n.top&&(u=m-c-n.bottom)):c=m-u-(n.bottom||0),g=o,v=c),i=n.maxWidth,r=n.maxHeight,s=n.minWidth,a=n.minHeight,p&&i&&r&&n.crop?(g=i,v=r,h=o/c-i/r,0>h?(c=r*o/i,void 0===n.top&&void 0===n.bottom&&(u=(m-c)/2)):h>0&&(o=i*c/r,
void 0===n.left&&void 0===n.right&&(l=(f-o)/2))):((n.contain||n.cover)&&(s=i=i||s,a=r=r||a),n.cover?(b(),y()):(y(),b())),p?(d.width=g,d.height=v,t.transformCoordinates(d,n),t.renderImageToCanvas(d,e,l,u,o,c,0,0,g,v)):(e.width=g,e.height=v,e)},t.createObjectURL=function(e){return n?n.createObjectURL(e):!1},t.revokeObjectURL=function(e){return n?n.revokeObjectURL(e):!1},t.readFile=function(e,t,n){if(window.FileReader){var i=new FileReader;if(i.onload=i.onerror=t,n=n||"readAsDataURL",i[n])return i[n](e),i}return!1},"function"==typeof define&&define.amd?define("vendor/load-image/load-image",[],function(){return t}):e.loadImage=t}(this),function(e){"use strict";"function"==typeof define&&define.amd?define("vendor/load-image/load-image-orientation",["./load-image"],e):e(window.loadImage)}(function(e){"use strict";var t=e.hasCanvasOption;e.hasCanvasOption=function(e){return t(e)||e.orientation},e.transformCoordinates=function(e,t){var n=e.getContext("2d"),i=e.width,r=e.height,s=t.orientation;if(s)switch(s>4&&(e.width=r,e.height=i),s){case 2:n.translate(i,0),n.scale(-1,1);break;case 3:n.translate(i,r),n.rotate(Math.PI);break;case 4:n.translate(0,r),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-r);break;case 7:n.rotate(.5*Math.PI),n.translate(i,-r),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-i,0)}},e.getTransformedOptions=function(e){if(!e.orientation||1===e.orientation)return e;var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);switch(e.orientation){case 2:n.left=e.right,n.right=e.left;break;case 3:n.left=e.right,n.top=e.bottom,n.right=e.left,n.bottom=e.top;break;case 4:n.top=e.bottom,n.bottom=e.top;break;case 5:n.left=e.top,n.top=e.left,n.right=e.bottom,n.bottom=e.right;break;case 6:n.left=e.top,n.top=e.right,n.right=e.bottom,n.bottom=e.left;break;case 7:n.left=e.bottom,n.top=e.right,n.right=e.top,n.bottom=e.left;break;case 8:n.left=e.bottom,n.top=e.left,n.right=e.top,n.bottom=e.right}return e.orientation>4&&(n.maxWidth=e.maxHeight,n.maxHeight=e.maxWidth,n.minWidth=e.minHeight,n.minHeight=e.minWidth,n.sourceWidth=e.sourceHeight,n.sourceHeight=e.sourceWidth),n}}),function(e){"use strict";"function"==typeof define&&define.amd?define("vendor/load-image/load-image-meta",["./load-image"],e):e(window.loadImage)}(function(e){"use strict";var t=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[]}},e.parseMetaData=function(t,n,i){i=i||{};var r=this,s=i.maxMetaDataSize||262144,a={},o=!(window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice);(o||!e.readFile(e.blobSlice.call(t,0,s),function(t){var s,o,c,l,u=t.target.result,h=new DataView(u),d=2,p=h.byteLength-4,f=d;if(65496===h.getUint16(0)){for(;p>d&&(s=h.getUint16(d),s>=65504&&65519>=s||65534===s);){if(o=h.getUint16(d+2)+2,d+o>h.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(c=e.metaDataParsers.jpeg[s])for(l=0;l<c.length;l+=1)c[l].call(r,h,d,o,a,i);d+=o,f=d}!i.disableImageHead&&f>6&&(u.slice?a.imageHead=u.slice(0,f):a.imageHead=new Uint8Array(u).subarray(0,f))}else console.log("Invalid JPEG file: Missing JPEG marker.");n(a)},"readAsArrayBuffer"))&&n(a)}}),function(e){"use strict";"function"==typeof define&&define.amd?define("vendor/load-image/load-image-ios",["./load-image"],e):e(window.loadImage)}(function(e){"use strict";if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var t=e.renderImageToCanvas;e.detectSubsampling=function(e){var t,n;return e.width*e.height>1048576?(t=document.createElement("canvas"),t.width=t.height=1,n=t.getContext("2d"),n.drawImage(e,-e.width+1,0),0===n.getImageData(0,0,1,1).data[3]):!1},e.detectVerticalSquash=function(e,t){var n,i,r,s,a,o=e.naturalHeight||e.height,c=document.createElement("canvas"),l=c.getContext("2d");for(t&&(o/=2),c.width=1,c.height=o,l.drawImage(e,0,0),n=l.getImageData(0,0,1,o).data,i=0,r=o,s=o;s>i;)a=n[4*(s-1)+3],0===a?r=s:i=s,s=r+i>>1;return s/o||1},e.renderImageToCanvas=function(n,i,r,s,a,o,c,l,u,h){if("image/jpeg"===i._type){var d,p,f,m,g=n.getContext("2d"),v=document.createElement("canvas"),y=1024,b=v.getContext("2d");if(v.width=y,v.height=y,g.save(),d=e.detectSubsampling(i),d&&(r/=2,s/=2,a/=2,o/=2),p=e.detectVerticalSquash(i,d),d||1!==p){for(s*=p,u=Math.ceil(y*u/a),h=Math.ceil(y*h/o/p),l=0,m=0;o>m;){for(c=0,f=0;a>f;)b.clearRect(0,0,y,y),b.drawImage(i,r,s,a,o,-f,-m,a,o),g.drawImage(v,0,0,y,y,c,l,u,h),f+=y,c+=u;m+=y,l+=h}return g.restore(),n}}return t(n,i,r,s,a,o,c,l,u,h)}}}),function(e){"use strict";"function"==typeof define&&define.amd?define("vendor/load-image/load-image-exif",["./load-image","./load-image-meta"],e):e(window.loadImage)}(function(e){"use strict";e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(e,t,n){var i,r,s;if(!n||t+n>e.byteLength)return void console.log("Invalid Exif data: Invalid thumbnail data.");for(i=[],r=0;n>r;r+=1)s=e.getUint8(t+r),i.push((16>s?"0":"")+s.toString(16));return"data:image/jpeg,%"+i.join("%")},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,n,i,r,s,a){var o,c,l,u,h,d,p=e.exifTagTypes[r];if(!p)return void console.log("Invalid Exif data: Invalid tag type.");if(o=p.size*s,c=o>4?n+t.getUint32(i+8,a):i+8,c+o>t.byteLength)return void console.log("Invalid Exif data: Invalid data offset.");if(1===s)return p.getValue(t,c,a);for(l=[],u=0;s>u;u+=1)l[u]=p.getValue(t,c+u*p.size,a);if(p.ascii){for(h="",u=0;u<l.length&&(d=l[u],"\x00"!==d);u+=1)h+=d;return h}return l},e.parseExifTag=function(t,n,i,r,s){var a=t.getUint16(i,r);s.exif[a]=e.getExifValue(t,n,i,t.getUint16(i+2,r),t.getUint32(i+4,r),r)},e.parseExifTags=function(e,t,n,i,r){var s,a,o;if(n+6>e.byteLength)return void console.log("Invalid Exif data: Invalid directory offset.");if(s=e.getUint16(n,i),a=n+2+12*s,a+4>e.byteLength)return void console.log("Invalid Exif data: Invalid directory size.");for(o=0;s>o;o+=1)this.parseExifTag(e,t,n+2+12*o,i,r);return e.getUint32(a,i)},e.parseExifData=function(t,n,i,r,s){if(!s.disableExif){var a,o,c,l=n+10;if(1165519206===t.getUint32(n+4)){if(l+8>t.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==t.getUint16(n+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(t.getUint16(l)){case 18761:a=!0;break;case 19789:a=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==t.getUint16(l+2,a))return void console.log("Invalid Exif data: Missing TIFF marker.");o=t.getUint32(l+4,a),r.exif=new e.ExifMap,o=e.parseExifTags(t,l,l+o,a,r),o&&!s.disableExifThumbnail&&(c={exif:{}},o=e.parseExifTags(t,l,l+o,a,c),c.exif[513]&&(r.exif.Thumbnail=e.getExifThumbnail(t,l+c.exif[513],c.exif[514]))),r.exif[34665]&&!s.disableExifSub&&e.parseExifTags(t,l,l+r.exif[34665],a,r),r.exif[34853]&&!s.disableExifGps&&e.parseExifTags(t,l,l+r.exif[34853],a,r)}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)}),function(e){"use strict";"function"==typeof define&&define.amd?define("vendor/load-image/load-image-exif-map",["./load-image","./load-image-exif"],e):e(window.loadImage)}(function(e){"use strict";e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},function(e){var t,n=e.tags,i=e.map;for(t in n)n.hasOwnProperty(t)&&(i[n[t]]=t)}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var e,t,n={};for(e in this)this.hasOwnProperty(e)&&(t=this.tags[e],t&&(n[t]=this.getText(t)));return n}}),define("loadImage",["require","vendor/load-image/load-image-orientation","vendor/load-image/load-image-meta","vendor/load-image/load-image-ios","vendor/load-image/load-image-exif","vendor/load-image/load-image-exif-map","vendor/load-image/load-image"],function(e){e("vendor/load-image/load-image-orientation"),e("vendor/load-image/load-image-meta"),e("vendor/load-image/load-image-ios"),e("vendor/load-image/load-image-exif"),e("vendor/load-image/load-image-exif-map");var t=e("vendor/load-image/load-image");return t}),define("expressions/add_expression",["require","loadcss!css/add_expression","jquery","pjs","main/popover_view","graphing/label","template!add_expression","./expression","./table","./text","./folder","./image","browser","i18n","loadImage","conditional_blur","conditional_focus","keys"],function(e){e("loadcss!css/add_expression");var t=e("jquery"),n=e("pjs"),i=e("main/popover_view"),r=e("graphing/label"),s=e("template!add_expression"),a=e("./expression"),o=e("./table"),c=e("./text"),l=e("./folder"),u=e("./image"),h=e("browser"),d=e("i18n"),p=e("loadImage"),f=e("conditional_blur"),m=e("conditional_focus"),g=e("keys"),v=!!window.FileReader,y=h.IS_IPAD&&h.IOS_VERSION&&8===h.IOS_VERSION[0]&&0===h.IOS_VERSION[1]&&0===h.IOS_VERSION[2],b=n(i,function(e,n){function i(e,t){for(var n,i=[.92,.86,.8,.7,.6,.5,.4,.3,.2,.1],r=0;r<i.length;r++)if(n=e.toDataURL("image/jpeg",i[r]),n.length<t)return n;return n}function b(e,t){for(var n,i=e.toDataURL().length,r=e.width,s=e.height,a=document.createElement("canvas"),o=0;2>o;o++){var c=Math.sqrt(t/i);r=Math.round(c*r),s=Math.round(c*s),a.height=s,a.width=r;var l=a.getContext("2d");if(l.drawImage(e,0,0,r,s),n=a.toDataURL(),i=n.length,t>i)return n}return n}function _(e,t){for(var n=[],i=Math.min(t.length,x.length),s=0;i>s;s++)n.push({latex:r.identifierToLatex(x[s]+"_"+e),values:t[s]});return n}e.template=s,e.direction="bottom",e.init=function(e,t,i,r){n.init.call(this),this.$root=t,this.listView=e,this.list=e.model,this.graphSettings=i,this.toastView=r},e.t=function(e,t){return d.t(e,t,this.graphSettings.language)},e.getTemplateParams=function(){var e=this,t=n.getTemplateParams();return t.expressions=!0,t.notes=this.graphSettings.config.notes,t.tables=!0,t.folders=this.graphSettings.config.folders,t.images=this.graphSettings.config.images,t.t=function(t,n){return d.t(t,n,e.graphSettings.language)},t},e.didCreateElement=function(){function e(){i.removeClass("dcg-filedraggedover"),r=t(),i.off(".filedraggedover")}n.didCreateElement.call(this),h.IS_IPAD&&h.IS_IN_IFRAME&&this.$().on("dcg-tapstart",function(e){e.preventDefault()}),this.$(".dcg-new-item").on("touchstart",function(e){e.preventDefault()}),this.$(".dcg-action-newexpression").on("dcg-tap",this.newExpression.bind(this)),this.$(".dcg-action-newtext").on("dcg-tap",this.newText.bind(this)),this.$(".dcg-action-newfolder").on("dcg-tap",this.newFolder.bind(this)),this.$(".dcg-action-newtable").on("dcg-tap",this.newTableFromTap.bind(this)),this.$(".dcg-action-newimage").on("dcg-tap",this.selectImage.bind(this)),v&&!y&&this.initFilePicker(),t(document).on("dragstart drag dragend dragenter dragover dragleave drop",function(e){e.preventDefault(),e.stopPropagation()});var i=this.$root,r=t(),s=this;i.on("dragenter",function(t){s.graphSettings.config.images&&(0===r.size()&&(i.addClass("dcg-filedraggedover"),i.on("dcg-tapstart.filedraggedover",e)),r=r.add(t.target))}).on("dragleave",function(t){r=r.not(t.target),0===r.size()&&e()}).on("drop",e),this.listView.$().on("drop",function(e){if(s.graphSettings.config.images){var t=e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files;if(t)for(var n=0;n<t.length;n++)s.insertFile(t[n])}})},e.insertFile=function(e){if(!e)return void alert(this.t("You did not select a file"));if(!e.type.match("image/*"))return void alert(this.t('The file "__file__" is not an image',{file:e.name}));var t=u({originalFilename:e.name,name:e.name,image_url:null,visible:!0,selected:!0,width:"0",height:"0",x:"0",y:"0",opacity:1,isUploading:!0},this.list);this.newImage(t),p.parseMetaData(e,function(n){var r;n.exif&&(r=n.exif.get("Orientation"));var s={orientation:r,canvas:!0,maxWidth:1600,maxHeight:1600};p(e,function(n){var r=n.width,s=n.height,a=Math.max(r,s)/Math.min(r,s),o=2e5;s>r?(s=10,r=Math.round(10*s/a)/10):(r=10,s=Math.round(10*r/a)/10);var c;"image/jpeg"===e.type?c=i(n,o):(c=n.toDataURL(),c.length>o&&(c=c.length>.75*n.width*n.height?i(n,o):b(n,o))),t.setProperty("width",r.toString()),t.setProperty("height",s.toString()),t.setProperty("image_url",c),t.setProperty("isUploading",!1)},s)},{maxMetaDataSize:262144,disableImageHead:!1})},e.renderIsVisible=function(){this.$addExp=t(".dcg-action-add-expression:first"),this.$addExp.attr("aria-expanded",!!this.isVisible),this.isVisible?(this.$addExp.on("keydown",this.handleKeydown.bind(this)),this.$().on("keydown",this.handleKeydown.bind(this)),"bottom"===this.direction&&this.listView.calcIsNarrow?(this.direction="right",this.$().addClass("dcg-right").removeClass("dcg-bottom")):"bottom"===this.direction||this.listView.calcIsNarrow||(this.direction="bottom",this.$().addClass("dcg-bottom").removeClass("dcg-right"))):(this.$addExp.off("keydown"),this.$().off("keydown")),n.renderIsVisible.call(this)},e.handleKeydown=function(e){if(g.lookup(e)===g.TAB){var n;e.shiftKey?this.$(".dcg-new-item:first").is(":focus")?(e.preventDefault(),n=this.$addExp,m(n)):this.$addExp.is(":focus")&&(e.preventDefault(),n=t(".dcg-new-item:last"),m(n)):e.shiftKey||(this.$(".dcg-new-item:last").is(":focus")?(e.preventDefault(),n=this.$addExp,m(n)):this.$addExp.is(":focus")&&(e.preventDefault(),n=t(".dcg-new-item:first"),m(n)))}},e.initFilePicker=function(){var e=this;this.$filepicker=this.$("input[type=file]"),this.$filepicker.on("change",function(t){e.setProperty("isVisible",!1),e.insertFile(t.target.files[0]),e.$filepicker.val("")})},e.newExpression=function(){this.insertItem(a({selected:!0,latex:""},this.list))},e.newText=function(){this.insertItem(c({selected:!0,text:""},this.list))},e.newFolder=function(){this.insertItem(l({selected:!0},this.list))},e.newTableFromTap=function(e){this.newTable()};var x=["x","y","z","u","v","w"];e.newTable=function(e){var t={selected:!e,latex:""},n=this.list.findAvailableColumnSubscript(),i=[[""],[""]];t.columns=_(n,e||i);var r=o(t,this.list);this.insertItem(r),e||this.listView.getSelectedView().addFocus("cell",1,0)},e.selectImage=function(){f(),y?(this.toastView.show("iOS 8.0 has temporarily broken image upload. So sorry!",{hideAfter:1e4}),this.$(".dcg-action-newimage").addClass("dcg-disabled")):v?this.$filepicker[0].click():(this.toastView.show(this.t("Image upload is not supported in this browser."),{hideAfter:1e4}),this.$(".dcg-action-newimage").addClass("dcg-disabled"))},e.newImage=function(e){var t=this,n=this.list;n.undoRedo.oneTransaction(function(){t.insertItem(e)})},e.insertItem=function(e){this.setProperty("isVisible",!1);var t=this.list,n=t.getSelected();if(n&&n.isExpression&&!n.latex&&!n.folder&&!e.isExpression)return t.undoRedo.oneTransaction(function(){t.insertItemAt(n.index+1,e),t.removeItemAt(n.index)}),void(e.selected&&this.listView.getSelectedView().addFocus());if(n&&n.isExpression&&!n.latex&&n.folder&&!e.isExpression&&!e.isFolder)return t.undoRedo.oneTransaction(function(){t.insertItemAt(n.index+1,e),n.folder.addItem(e),t.removeItemAt(n.index)}),void(e.selected&&this.listView.getSelectedView().addFocus());if(n&&!n.folder&&!n.isFolder)return this.list.insertItemAt(n.index+1,e),void(e.selected&&this.listView.getSelectedView().addFocus());if(n&&n.folder&&!e.isFolder)return t.undoRedo.oneTransaction(function(){t.insertItemAt(n.index+1,e),n.folder.addItem(e)}),void(e.selected&&this.listView.getSelectedView().addFocus());if(n&&n.isFolder&&!n.collapsed&&!e.isFolder)return t.undoRedo.oneTransaction(function(){t.insertItemAt(n.index+1,e),n.addItem(e)}),void(e.selected&&this.listView.getSelectedView().addFocus());for(n||(n=this.listView.getFirstVisibleItem()),n.isFolder&&(n=this.list.getItemByIndex(n.index+1));n&&n.folder;)n=this.list.getItemByIndex(n.index+1);var i=n?n.index:this.list.getItemCount();this.list.insertItemAt(i,e),e.selected&&this.listView.getSelectedView().addFocus()}});return b}),define("scroll_helpers",["require"],function(e){var t=function(e,t,n){var i,r=t.height(),s=e.height(),a=t[0].scrollTop,o=e.offset().top+a-t.offset().top,c=o-n,l=s+o+n-r;return i=c>=l?Math.min(Math.max(a,l),c):.5*(c+l),i!==a?(t[0].scrollTop=i,t[0].scrollTop!=a):!1};return{scrollVisible:t}}),define("loadcss!css/new_expression",function(){}),define("template!new_expression",["underscore"],function(_){return function(obj){var __p="";Array.prototype.join;with(obj||{})__p+="<div class=\"dcg-expressionitem dcg-new-expression dcg-opened\">\n  <div class='dcg-new-math-div dcg-do-not-blur dcg-action-newmath'>\n    <div class='dcg-new-expression-fade'></div>\n  </div>\n\n  <span\n     class=\"dcg-tab\"\n  >\n     <span class='dcg-num dcg-variable-index'>2</span>\n     <div class='dcg-tab-interior'></div>\n  </span>\n\n</div>\n";return __p}}),define("expressions/new_expression",["require","loadcss!css/new_expression","pjs","underscore_view","template!new_expression","./expression"],function(e){e("loadcss!css/new_expression");var t=e("pjs"),n=e("underscore_view"),i=e("template!new_expression"),r=e("./expression"),s=t(n,function(e,t){e.template=i,e.init=function(e){t.init.call(this),this.listView=e},e.didInsertElement=function(){this.listView.model.observe("nextDisplayIndex",this.updateIndex.bind(this)),this.updateIndex(),this.$(".dcg-action-newmath").on("dcg-tap",this.newMath.bind(this))},e.updateIndex=function(){this.$(".dcg-variable-index").text(this.listView.model.nextDisplayIndex)},e.newMath=function(){var e=r,t={selected:!0,latex:""},n=e(t,this.listView.model);this.listView.model.insertItemAt(this.listView.model.getItemCount(),n),this.listView.getSelectedView().addFocus()}});return s}),define("expressions/abstract_icon",["require","jquery","underscore_view","pjs","keys","i18n"],function(e){var t=e("jquery"),n=e("underscore_view"),i=e("pjs"),r=e("keys"),s=e("i18n"),a=0,o=i(n,function(e,n){e.init=function(e){this.parentView=e,this.model=e.model,n.init.call(this),this.optionsmenu_guid=++a,this.model.observe("error.iconview",this.renderErrorTooltip.bind(this)),this.observe("error",this.renderErrorTooltip.bind(this)),this.observe("error errorStable",this.computeErrorShown.bind(this)),this.observe("errorShown",this.renderErrorShown.bind(this))},e.destruct=function(){this.model.unobserve(".iconview")},e.computeErrorShown=function(){this.setProperty("errorShown",this.error&&this.errorStable)},e.renderErrorTooltip=function(){var e=this.parentView&&this.parentView.graphSettings?this.parentView.graphSettings:this.listView.graphSettings,t=this.error?s.unpack(this.model.error,e.language):"";this.$().closest(".dcg-variable-errortooltip").attr("tooltip",t)},e.renderErrorShown=function(){this.$().toggleClass("dcg-error",!!this.errorShown)},e.didInsertElement=function(){this.renderErrorShown(),this.renderErrorTooltip()},e.createOptionsMenuView=function(){},e.toggleOptions=function(){if(this.error)return void this.hideOptions();if(this.optionsShown)return void this.hideOptions();this.optionsShown=!0,this.optionsMenu=this.createOptionsMenuView();var e=this.optionsmenu_guid;setTimeout(function(){this.optionsShown&&this.getListView$().on("scroll.options-menu-"+e,function(e){this.hideOptions()}.bind(this))}.bind(this),0),t(document).on("keydown.options-menu-"+e,function(e){r.lookup(e)===r.ESCAPE&&this.hideOptions()}.bind(this)),t(document).on("dcg-tapstart.options-menu-"+e,function(e){t(e.target).closest(".dcg-options-menu").length||t(e.target).closest(this.$()).length||this.hideOptions()}.bind(this))},e.getListView$=function(){return this.$().closest(".dcg-tap-container").find(".dcg-exppanel")},e.hideOptions=function(){if(this.optionsShown||this.optionsMenu){this.optionsShown=!1;var e=this.optionsmenu_guid;t(document).off("dcg-tapstart.options-menu-"+e),t(document).off("keydown.options-menu-"+e),this.getListView$().off("scroll.options-menu-"+e),this.optionsMenu&&(this.optionsMenu.remove(),this.optionsMenu=null)}},e.onDisplayChange=function(){var e=this.model.error?!0:!1;this.model.isEmpty()&&(e=!1),e!==this.error?(this.setProperty("errorStable",!1),this.__errorTime=(new Date).getTime(),setTimeout(this.onDisplayChange.bind(this),100)):this.__errorTime+500<(new Date).getTime()?this.setProperty("errorStable",!0):this.errorStable||setTimeout(this.onDisplayChange.bind(this),100),this.setProperty("error",e)}});return o}),define("template!expression_options_menu",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="<div class='dcg-exp-options-menu dcg-options-menu ",0===styles.length&&(__p+="dcg-colors-only"),__p+=" ",0!==dragModes.length&&(__p+="dcg-with-drag"),__p+="'>\n  <div class='dcg-triangle'></div>\n  ",styles.length>0&&(__p+="\n    <div class='dcg-styles-div'>\n      <div class='dcg-styles-menu'>\n        <div class='dcg-title'>"+(null==(__t=t("style:"))?"":_.escape(__t))+"</div>\n        <div class='dcg-styles-menu'>\n        ",_.each(styles,function(e){__p+='\n          <span class="dcg-style-option dcg-variable-colorcss dcg-graph-icon dcg-graph-'+(null==(__t=e)?"":_.escape(__t))+'"\n            draw-style="'+(null==(__t=e)?"":_.escape(__t))+'"\n            style=""\n            handleevent="true">\n          </span>\n        '}),__p+="\n        </div>\n      </div>\n    </div>\n  "),__p+="\n  ",dragModes.length>0&&(__p+="\n    <div class='dcg-drag-div'>\n      <div class='dcg-drag-menu'>\n        <div class='dcg-title'>"+(null==(__t=t("drag:"))?"":_.escape(__t))+"</div>\n        <div class='dcg-drag-menu'>\n        ",_.each(dragModes,function(e){__p+="\n          <span class='dcg-dragmode-option dcg-graph-icon dcg-variable-colorcss ",e.enabled||(__p+=" dcg-disabled "),__p+="' mode=\""+(null==(__t=e.dragMode)?"":_.escape(__t))+'"></span>\n          </span>\n        '}),__p+="\n        </div>\n      </div>\n    </div>\n  "),__p+="\n  <div class='dcg-colors-div'>\n    <div class='dcg-title'>"+(null==(__t=t("color:"))?"":_.escape(__t))+'</div>\n    <div class="template-colorsview"></div>\n  </div>\n</div>\n';return __p}}),define("loadcss!css/color_menu",function(){}),define("template!color_menu",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="<div class=\"dcg-color-menu dcg-do-not-blur\" role='complementary' aria-label='Color Menu'>\n  ",_.each(colors,function(e){__p+='\n    <span class="dcg-color-option"\n          color="'+(null==(__t=e)?"":_.escape(__t))+'"\n          style="background: '+(null==(__t=e)?"":_.escape(__t))+"\"\n          handleevent=\"true\"\n          role='button' tabindex=0 aria-label='"+(null==(__t=e)?"":_.escape(__t))+"'>\n          <i class='dcg-icon-check'></i>\n    </span>\n  "}),__p+="\n</div>\n";return __p}}),define("expressions/color_menu_view",["require","loadcss!css/color_menu","jquery","underscore","pjs","underscore_view","template!color_menu"],function(e){e("loadcss!css/color_menu");var t=e("jquery"),n=e("underscore"),i=e("pjs"),r=e("underscore_view"),s=e("template!color_menu"),a=i(r,function(e,i){e.template=s,e.init=function(e){i.init.call(this),this.expression=e,this.expression.observe("color.colorview",this.renderSelectedColor.bind(this)),this.expression.observe("hidden.colorview",this.renderSelectedColor.bind(this))},e.destruct=function(){this.expression.unobserve(".colorview")},e.renderSelectedColor=function(){var e=this.expression.color;this.$(".dcg-color-option").removeClass("dcg-selected"),this.$('.dcg-color-option[color="'+e+'"]').addClass("dcg-selected")},e.didInsertElement=function(){this.$().on("dcg-tap",".dcg-color-option",this.onSelectColor.bind(this)),this.renderSelectedColor()},e.getTemplateParams=function(){return{colors:n.values(this.expression.list.colors)}},e.onSelectColor=function(e){var n=t(e.target).closest(".dcg-color-option").attr("color");this.expression.setProperty("color",n),this.expression.setProperty("hidden",!1),this.expression.folder&&this.expression.folder.setProperty("hidden",!1)}});return a}),define("expressions/expression_options_view",["require","pjs","jquery","underscore","underscore_view","template!expression_options_menu","./color_menu_view","graphing/dragmode","i18n"],function(e){var t=e("pjs"),n=e("jquery"),i=e("underscore"),r=e("underscore_view"),s=e("template!expression_options_menu"),a=e("./color_menu_view"),o=e("graphing/dragmode"),c=e("i18n"),l=t(r,function(e,t){function r(e,t){switch(e){case o.X:return"none"!==t[0].type;case o.Y:return"none"!==t[1].type;case o.XY:return"none"!==t[0].type&&"none"!==t[1].type}}e.template=s,e.init=function(e){this.expression=e},e.destruct=function(){this.colorsView&&(this.colorsView.remove(),this.colorsView=null)},e.getTemplateParams=function(){var e=i.values(this.expression.list.colors),t={colors:e,styles:[],dragModes:[]},n=this.expression.formula;return n.move_strategy&&(t.dragModes=[{dragMode:o.X,enabled:r(o.X,n.move_strategy)},{dragMode:o.Y,enabled:r(o.Y,n.move_strategy)},{dragMode:o.XY,enabled:r(o.XY,n.move_strategy)}]),n.is_point_list?t.styles=["point","open","cross"]:this.expression.table||n.is_inequality||(t.styles=["normal","dashed","dotted"]),
t.t=function(e,t){return c.t(e,t,this.expression.graphSettings.language)}.bind(this),t},e.renderSelectedColor=function(){var e="#bbb",t=this.expression.color;this.$(".dcg-variable-colorcss").css("border-color",t),this.$(".dcg-variable-colorcss").css("background",t),this.$(".dcg-variable-colorcss.dcg-disabled").css("border-color",e),this.$(".dcg-variable-colorcss.dcg-disabled").css("background",e)},e.renderSelectedDragMode=function(){this.$(".dcg-dragmode-option").removeClass("dcg-selected");var e=this.expression.reconciledDragMode;this.$('.dcg-dragmode-option[mode="'+e+'"]').addClass("dcg-selected")},e.onSelectStyle=function(e){var t=n(e.target).closest(".dcg-style-option").attr("draw-style");this.expression.setProperty("hidden",!1),this.expression.setProperty("style",t),"point"!==t&&this.expression.setProperty("dragMode",o.NONE),this.expression.folder&&this.expression.folder.setProperty("hidden",!1)},e.onSelectDragMode=function(e){var t=n(e.target).closest(".dcg-dragmode-option").attr("mode");r(t,this.expression.formula.move_strategy)&&(this.expression.setProperty("hidden",!1),t===this.expression.reconciledDragMode?this.expression.setProperty("dragMode",o.NONE):(this.expression.setProperty("dragMode",t),this.expression.setProperty("style","point")))},e.renderSelectedStyle=function(){var e=this.expression.style;this.$(".dcg-style-option").removeClass("dcg-selected"),this.expression.shouldGraph&&this.$('.dcg-style-option[draw-style="'+e+'"]').addClass("dcg-selected")},e.didCreateElement=function(){this.colorsView=a(this.expression),this.colorsView.replace(this.$(".template-colorsview")),this.$().on("dcg-tap",".dcg-style-option",this.onSelectStyle.bind(this)),this.$().on("dcg-tap",".dcg-dragmode-option",this.onSelectDragMode.bind(this)),this.expression.observeAndSync("color.colorview",this.renderSelectedColor.bind(this)),this.expression.observeAndSync("reconciledDragMode.colorview",this.renderSelectedDragMode.bind(this)),this.expression.observeAndSync("hidden style shouldGraph",this.renderSelectedStyle.bind(this))}});return l}),define("template!expression_icon",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<span role="button" aria-label="'+(null==(__t=t("Play Animation"))?"":_.escape(__t))+"\" aria-hidden=\"true\" class=\"dcg-icon dcg-graph-icon dcg-variable-colorcss dcg-variable-errortooltip tipsy-sticky\">\n	<i class='dcg-icon-play'></i>\n	<i class='dcg-icon-pause'></i>\n	<i class='dcg-icon-hidden'></i>\n</span>\n";return __p}}),define("expressions/expression_icon_view",["require","pjs","expressions/abstract_icon","lib/aria","./expression_options_view","math/comparators","graphing/dragmode","i18n","template!expression_icon","jquery.handleevent"],function(e){var t=e("pjs"),n=e("expressions/abstract_icon"),i=e("lib/aria"),r=e("./expression_options_view"),s=e("math/comparators"),a=e("graphing/dragmode"),o=e("i18n"),c=e("template!expression_icon");e("jquery.handleevent");var l=t(n,function(e,t){e.template=c,e.init=function(e){t.init.call(this,e),this.expression=this.model,this.expression.observeAndSync("slider.iconview",function(){this.expression.slider&&this.expression.slider.observe("isPlaying.iconview",this.onDisplayChange.bind(this))}.bind(this)),this.expression.observe("formula.iconview shouldGraph.iconview style.iconview dragMode.iconview",this.onDisplayChange.bind(this)),this.expression.observe("isGraphable.iconview",this.renderUngraphable.bind(this)),this.expression.observe("loading.iconview",this.renderLoading.bind(this)),this.expression.observe("color.iconview",this.renderColorCSS.bind(this)),this.parentView.observeEvent("hideContextMenu.iconview",this.hideOptions.bind(this))},e.t=function(e,t){return o.t(e,t,this.parentView.graphSettings.language)},e.destruct=function(){t.destruct.call(this),this.expression.unobserve(".iconview"),this.expression.slider&&this.expression.slider.unobserve(".iconview"),this.parentView.unobserve(".iconview")},e.renderUngraphable=function(){this.$().toggleClass("dcg-ungraphable",!this.expression.isGraphable)},e.renderLoading=function(){this.$().toggleClass("dcg-loading",!!this.expression.loading)},e.renderColorCSS=function(){this.$(".dcg-variable-colorcss").css({"border-color":this.expression.color,background:this.expression.color})},e.didInsertElement=function(){var e=this;t.didInsertElement.call(this),this.renderLoading(),this.renderUngraphable(),this.renderColorCSS(),this.onDisplayChange(),this.$icon=this.$(".dcg-icon");var n=function(t,n){if(t.device===n){if("keyboard"!==n){if(t.wasHandled("dragdrop"))return;if(t.wasLongheld())return}return e.optionsShown?(e.toggleOptions(),!1):void(e.parentView.listView.editListMode?e.expression.isGraphable&&e.toggleOptions():e.expression.formula.is_animatable?e.toggleSliderIsPlaying():e.toggleGraphShown())}},i=function(t,n){t.device===n&&e.model.isGraphable&&(t.handle("dcg-longhold"),e.toggleOptions())};this.$().closest(".dcg-action-icon-mouse").on("dcg-tap",function(e){n(e,"mouse")}),this.$().closest(".dcg-action-icon-touch").on("dcg-tap",function(e){n(e,"touch")}),this.$icon.on("dcg-tap",function(e){n(e,"keyboard")}),this.$().closest(".dcg-action-icon-mouse").on("dcg-longhold",function(e){i(e,"mouse")}),this.$().closest(".dcg-action-icon-touch").on("dcg-longhold",function(e){i(e,"touch")})},e.isGraphShown=function(){return this.expression.shouldGraph},e.toggleSliderIsPlaying=function(){var e=this.expression.slider;if(e&&(e.setProperty("isPlaying",!e.isPlaying),this.parentView.sliderView)){var t="",n=this.expression.dependent;t=e.isPlaying?this.t("__variable__ playing",{variable:n}):this.t("__variable__ paused",{variable:n}),i.alert(t)}},e.toggleGraphShown=function(){this.model.isGraphable&&(this.errorShown||(this.expression.setProperty("hidden",this.isGraphShown()),this.expression.folder&&this.expression.folder.setProperty("hidden",!1)))},e.createOptionsMenuView=function(){var e=this.parentView.listView,t=r(this.expression);t.appendTo(e.$().closest(".dcg-container"));var n=this.$(".dcg-icon"),i=n.offset(),s=e.$().offset(),a=i.top-s.top+t.$().height(),o=Math.max(0,a-10-45-e.$(".dcg-exppanel").height(),0);return t.$().css({position:"absolute",top:i.top-s.top-o+"px",left:i.left-s.left+"px",display:"block"}),t.$(".dcg-triangle").css("margin-top",o+"px"),t},e.onDisplayChange=function(){if(t.onDisplayChange.call(this),this.$icon){var e,n=this.expression.formula,i="";if(n.is_animatable&&this.expression.slider)i=this.expression.slider.isPlaying?"dcg-animate-pause":"dcg-animate-play",this.setAriaLabels();else if(this.error||!n.is_graphable)i="";else{var r=this.expression.shouldGraph,o=this.expression.style,c=n.operator,l=0!==s.table[c].direction,u=s.table[c].inclusive===!1;r?this.expression.reconciledDragMode!==a.NONE?(i="dcg-graph-movable-point",e=this.expression.reconciledDragMode):n.is_point_list?i="open"===o?"dcg-graph-open":"cross"===o?"dcg-graph-cross":"dcg-graph-point":n.is_shade_between?i="dcg-graph-shaded-inequality":u||l?!u&&l?i="dcg-graph-shaded-inequality":u&&!l?i="graph-inequality":u&&l&&(i="dcg-graph-shaded-inequality"):"normal"===o?i="dcg-graph-normal":"dashed"===o?i="dcg-graph-dashed":"dotted"===o&&(i="dcg-graph-dotted"):i="dcg-graph-hidden"}if(this.rendered_icon_class!==i||this.rendered_drag_mode!==e){if(this.rendered_icon_class&&this.$icon.removeClass(this.rendered_icon_class),this.rendered_icon_class=i,i){this.$icon.addClass(i);var h="dcg-animate-play"===i||"dcg-animate-pause"===i?0:-1,d=0!==h;this.$icon.attr("tabindex",h),this.$icon.attr("aria-hidden",d)}this.rendered_drag_mode=e,e&&this.$icon.attr("mode",e)}}},e.setAriaLabels=function(){if(this.expression.slider){var e=this.expression.dependent;if(e){var t="";t=this.expression.slider.isPlaying?this.t("Pause __variable__ Animation",{variable:e}):this.t("Play __variable__ Animation",{variable:e}),this.$icon.attr("aria-label",t)}}}});return l}),define("template!evaluation_view",["underscore"],function(_){return function(obj){var __p="";Array.prototype.join;with(obj||{})__p+='<div>\n  <div class="dcg-evaluation dcg-do-blur" handleEvent="true">\n    <table>\n      <tr>\n        <th class="dcg-action-selectevaluation">\n          <span class="dcg-template-dependentlabelhtml"></span>\n          <span class="dcg-equals">=</span>\n        </th>\n        <td class="dcg-text-selectable template-evaluationshtml"></td>\n      </tr>\n    </table>\n  </div>\n  <div class="dcg-clear"></div>\n</div>';return __p}}),define("expressions/evaluation",["require","pjs","underscore_view","template!evaluation_view","i18n","graphing/label","analytics/bugsnag-stub"],function(e){var t=e("pjs"),n=e("underscore_view"),i=e("template!evaluation_view"),r=e("i18n"),s=e("graphing/label"),a=e("analytics/bugsnag-stub"),o=t(n,function(e,t){e.template=i,e.init=function(e){t.init.call(this),this.evaluations=[],this.evaluationAria="",this.domain=e,this.observe("dependentLabel",this.renderDependent.bind(this)),this.observe("evaluations",this.renderEvaluations.bind(this))},e.t=function(e,t){return r.t(e,t,this.domain.graphSettings.language)},e.renderDependent=function(){this.$(".dcg-template-dependentlabelhtml").html(this.dependentLabel)},e.renderEvaluations=function(){for(var e=this.evaluations,t=[],n=[],i=0;i<e.length;i++){var r=e[i],o=e[i].val;r.val!==!1&&r.val!==!0?(Array.isArray(r.val)?(r.val=r.val.length+" element list",n.push(r.val)):isNaN(r.val)?r.val="undefined":Math.abs(r.val)<1e-15?r.val=0:e.length>1?r.val=s.truncatedHTMLLabel(r.val,{smallCutoff:.001,bigCutoff:1e6,digits:8}):r.val=s.truncatedHTMLLabel(r.val,{smallCutoff:1e-6,bigCutoff:1e9,digits:12}),t.push(r.val),Array.isArray(o)||n.push(s.value(o).ariaString)):a.notify("Bad evaluation view","Boolean passed through unexpectedly.")}if(0!==t.length)if(1===t.length){var c=this.$evaluationContainer[0];c.innerHTML=t[0],this.evaluationAria=n[0]}else{var l=t.join('<span class="dcg-or">'+this.t("or")+"</span>");this.evaluationAria=n.join(" "+this.t("or")+" "),this.$evaluationContainer.html(l)}},e.didInsertElement=function(){this.$evaluationContainer=this.$(".template-evaluationshtml"),this.renderDependent(),this.renderEvaluations(),this.$(".dcg-action-selectevaluation").on("dcg-tap",this.onSelectEvaluation.bind(this))},e.onSelectEvaluation=function(){var e=this.$("td")[0],t=document.createRange();t.selectNodeContents(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(t)}});return o}),define("template!unresolved_view",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div class="dcg-unresolved">\n  <i class="dcg-icon-error" />\n  '+(null==(__t=t("This equation contains fine detail that has not been fully resolved."))?"":_.escape(__t))+'\n  <a href="http://support.desmos.com/entries/29577773-Unresolved-Detail-In-Plotted-Functions" target="_blank">\n    '+(null==(__t=t("Learn more."))?"":_.escape(__t))+"\n  </a>\n</div>";return __p}}),define("expressions/unresolved",["require","pjs","underscore_view","template!unresolved_view"],function(e){var t=e("pjs"),n=e("underscore_view"),i=e("template!unresolved_view");return t(n,function(e,t){e.template=i})}),define("loadcss!css/domain",function(){}),define("template!domain_view",["underscore"],function(_){return function(obj){var __p="";Array.prototype.join;with(obj||{})__p+='<div class="dcg-domain dcg-do-blur" handleEvent="true">\n\n  <div class="dcg-display-domain dcg-do-blur dcg-desmos-input-container" handleEvent="true">\n    <div class="dcg-editable-mathquill-container">\n      <span class="dcg-math-field" data-dcg-limit="min"></span>\n      <span class="dcg-interval-interior"></span>\n      <span class="dcg-math-field" data-dcg-limit="max"></span>\n    </div>\n  </div>\n\n</div>\n';return __p}}),define("lib/setup_mathquill_tap",["require","jquery"],function(e){var t=e("jquery");return function(e,n){t(e).on("dcg-tap",function(e){if("touch"!==e.device)return!0;var t=e.originalEvent.changedTouches[0];n.clickAt(t.clientX,t.clientY,t.target),n.focus();var i,r=!1;setTimeout(function(){r=!0,i=Date.now()},0),n.ignoreNextMousedown(function(){return r||Date.now()-i<500})})}}),define("expressions/domain_view",["require","loadcss!css/domain","jquery","underscore_view","pjs","template!domain_view","keys","conditional_blur","underscore","mathquill","i18n","lib/setup_mathquill_tap"],function(e){e("loadcss!css/domain");var t=e("jquery"),n=e("underscore_view"),i=e("pjs"),r=e("template!domain_view"),s=e("keys"),a=e("conditional_blur"),o=e("underscore"),c=e("mathquill"),l=e("i18n"),u=e("lib/setup_mathquill_tap"),h=i(n,function(e,n){e.template=r,e.init=function(e,t){n.init.call(this),this.parentView=t,this.domain=e,this.domain.observe("min.domainview max.domainview",function(){this.isMathquillFocused()||this.setLastValidBounds()}.bind(this)),this.domain.observe("validLimits",this.renderInvalid.bind(this))},e.t=function(e,t){return l.t(e,t,this.parentView.graphSettings.language)},e.checkInvalid=function(){var e=this;o.each(this.mathFields,function(n,i){e.save(t(n.el()))})},e.renderInvalid=function(){var e=this;o.each(this.mathFields,function(n,i){var r=t(n.el());r.toggleClass("dcg-invalid",!e.domain.validLimits[i])}),this.setProperty("invalid",!this.domain.validLimits.min||!this.domain.validLimits.max)},e.destruct=function(){this.domain.unobserve(".domainview")},e.renderParameter=function(){this.$(".dcg-interval-interior").eq(0).html(c.StaticMath(t("<span> \\le t \\le </span>")[0]).html()).addClass("mq-math-mode")},e.focusInMathquill=function(e){var t=this.$(e.target).closest(".dcg-math-input");t.hasClass("dcg-focus")||(t.addClass("dcg-focus"),c(t[0]).select())},e.focusOutMathquill=function(e){var t=this,n=this.$(e.target).closest(".mq-editable-field");n.removeClass("dcg-focus"),c(n[0]).clearSelection(),clearTimeout(this.focusedOutRecentlyTimeout),this.focusedOutRecently=!0,this.focusedOutRecentlyTimeout=setTimeout(function(){t.isMathquillFocused()||(t.setLastValidBounds(),t.checkInvalid()),this.focusedOutRecently=!1}.bind(this))},e.isMathquillFocused=function(){return o.some(this.mathFields,function(e){return t(e.el()).hasClass("dcg-focus")})},e.didInsertElement=function(){var e=this,n=this.mathFields={},i={min:this.t("Parameter Minimum: "),max:this.t("Parameter Maximum: ")};this.$(".dcg-math-field").each(function(){var e=c.MathField(this),r=t(this).data("dcg-limit");e.setAriaLabel(i[r]),u(this,e),n[r]=e}).addClass("dcg-math-input").on("focusin",e.focusInMathquill.bind(e)).on("focusout",e.focusOutMathquill.bind(e)).on("render",e.handleUserInput.bind(e)).on("enterPressed",a),this.renderParameter(),this.setLastValidBounds()},e.setLastValidBounds=function(){var e=this;o.each(this.mathFields,function(t,n){t.latex(e.domain.lastValidLatex[n])}),this.domain.setProperty("validLimits",{min:!0,max:!0})},e.handleUserInput=function(e){s.lookup(e)===s.ENTER?a():this.checkInvalid()},e.save=function(e){if(e){var t=c.MathField(e[0]),n=t.latex(),i=e.data("dcg-limit");"min"===i?this.domain.setProperty("minLatex",n):"max"===i&&this.domain.setProperty("maxLatex",n)}}});return h}),define("loadcss!css/regression",function(){}),define("template!regression_view",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div class="dcg-regression-container">\n  <div class="dcg-handle-event" handleEvent="true">\n\n    <div class="dcg-log-mode-toggle">\n      <div class="dcg-action-log-mode-toggle">\n        <span\n          class="dcg-log-mode-checkbox"\n          role="checkbox"\n          aria-checked="false"\n          tabindex=0\n          aria-label="'+(null==(__t=t("Log Mode"))?"":_.escape(__t))+'"\n        >\n          <i class="dcg-icon-check"></i>\n        </span>\n        Log Mode\n      </div>\n      <a aria-label="'+(null==(__t=t("Log Mode Help"))?"":_.escape(__t))+'" class="dcg-log-mode-toggle-help" target="_blank" href="http://support.desmos.com/hc/en-us/articles/204349605">\n        <i class="dcg-icon-question-sign"></i>\n      </a>\n    </div>\n\n    <div class="dcg-statistics">\n      <div class="dcg-regression-title dcg-residuals-title">\n        '+(null==(__t=t("Statistics"))?"":_.escape(__t))+'\n        <a aria-label="'+(null==(__t=t("About Regressions"))?"":_.escape(__t))+'" class="dcg-regression-about-link" target="_blank">\n          <i class="dcg-icon-question-sign"></i>\n        </a>\n      </div>\n\n      <div class="dcg-statistics-values"></div>\n    </div>\n    <div role="group" aria-label="'+(null==(__t=t("Residuals"))?"":_.escape(__t))+'" class="dcg-residuals">\n      <div class="dcg-regression-title dcg-residuals-title">\n        '+(null==(__t=t("Residuals"))?"":_.escape(__t))+'\n      </div>\n      <span class="dcg-residuals-variable"></span>\n      <span class="dcg-residual-suggestion dcg-action-plot-residual dcg-btn dcg-btn-light-gray" role="button" tabindex=0>\n        plot\n      </span>\n    </div>\n\n    <div class="dcg-parameters-container">\n      <div class="dcg-regression-title dcg-parameters-title">\n        '+(null==(__t=t("Parameters"))?"":_.escape(__t))+'\n      </div>\n      <div role="group" aria-label="'+(null==(__t=t("Parameters"))?"":_.escape(__t))+'" class="dcg-parameters">\n      </div>\n    </div>\n\n    <div class="dcg-clear"></div>\n  </div>\n</div>\n';return __p}}),define("expressions/regression_view",["require","loadcss!css/regression","underscore_view","template!regression_view","pjs","jquery","underscore","i18n","mathquill","graphing/label"],function(e){e("loadcss!css/regression");var t=e("underscore_view"),n=e("template!regression_view"),i=e("pjs"),r=e("jquery"),s=e("underscore"),a=e("i18n"),o=e("mathquill"),c=e("graphing/label");return i(t,function(e,t){e.template=n,e.init=function(e,n){t.init.call(this),this.expressionModel=e,this.listView=n,this.setProperty("regression",e.formula.regression)},e.getTemplateParams=function(){var e=this;return{t:function(t,n){return a.t(t,n,e.listView.graphSettings.language)}}},e.t=function(e,t){return a.t(e,t,this.listView.graphSettings.language)},e.didCreateElement=function(){t.didCreateElement.call(this),this.residuals=o.StaticMath(this.$(".dcg-residuals-variable")[0]),this.$statistics=this.$(".dcg-statistics-values"),this.$residualSuggestion=this.$(".dcg-residual-suggestion"),this.$parameters=this.$(".dcg-parameters"),this.$parametersContainer=this.$(".dcg-parameters-container"),this.$regressionAboutLink=this.$(".dcg-regression-about-link"),this.$logModeToggleContainer=this.$(".dcg-log-mode-toggle"),this.$logModeToggleBtn=this.$(".dcg-action-log-mode-toggle"),this.observeAndSync("regression",this.renderRegression.bind(this)),this.expressionModel.observeAndSync("isLogModeRegression",this.renderRegression.bind(this)),this.$residualSuggestion.on("dcg-tap",this.plotResiduals.bind(this)),this.$logModeToggleBtn.on("dcg-tap",this.expressionModel.toggleLogMode.bind(this.expressionModel))},e.plotResiduals=function(e){var t=this.regression.residualSuggestionId;if(t){var n=this.listView.model.getItemById(t);n&&n.insertColumn(n.columns.length-1,{latex:c.identifierToLatex(this.regression.residualVariable)})}},e.getRoundedValue=function(e,t,n){return c.truncatedLatexLabel(e,{zeroCutoff:n,digits:t,smallCutoff:1e-6,bigCutoff:1e9})},e.getRoundedParam=function(e,t){return this.getRoundedValue(this.regression.parameters[e],t,1e-15)},e.renderStats=function(){this.renderAboutLink(),this.$statistics.html("");var e;if(this.regression.statistics.hasOwnProperty("Rsquared")){var t=this.getRoundedValue(this.regression.statistics.Rsquared,3,1e-15),n=this.t("R squared equals __value__",{value:t}),i=r('<span role="textbox" aria-readonly=true tabindex=0 aria-label="'+n+'">'),s=r("<span aria-hidden=true>");o.StaticMath(s[0]).latex("R^2="+t),e=r('<div role="group" aria-label="Statistics">'),e.append(i),e.append(s),this.$statistics.append(e)}if(this.regression.statistics.hasOwnProperty("rsquared")){var a=this.getRoundedValue(this.regression.statistics.rsquared,3,1e-15),c=this.t("r squared equals __value__",{value:a}),l=r('<span role="textbox" aria-readonly=true tabindex=0 aria-label="'+c+'">'),u=r("<span aria-hidden=true>");o.StaticMath(u[0]).latex("r^2="+a),e=r('<div role="group" aria-label="Statistics">'),e.append(l),e.append(u),this.$statistics.append(e)}if(this.regression.statistics.hasOwnProperty("r")){var h=this.getRoundedValue(this.regression.statistics.r,3,1e-15),d=this.t("r equals __value__",{value:h}),p=r('<span role="textbox" aria-readonly=true tabindex=0 aria-label="'+d+'">'),f=r('<span aria-hidden=true class="dcg-r-value">');o.StaticMath(f[0]).latex("^2r="+h),e=r('<div role="group" aria-label="Statistics">'),e.append(p),e.append(f),this.$statistics.append(e)}if(this.regression.statistics.hasOwnProperty("RMSE")){var m=this.getRoundedValue(this.regression.statistics.RMSE,4,1e-8),g=this.t("RMSE equals __value__",{value:m}),v=r('<span role="textbox" aria-readonly=true tabindex=0 aria-label="'+g+'">'),y=r("<span aria-hidden=true>");o.StaticMath(y[0]).latex("RMSE="+m),e=r('<div role="group" aria-label="Statistics">'),e.append(v),e.append(y),this.$statistics.append(e)}},e.renderAboutLink=function(){this.regression.statistics.hasOwnProperty("RMSE")?(this.$regressionAboutLink[0].href="http://support.desmos.com/entries/60176149-What-is-RMSE-",this.$regressionAboutLink.attr("aria-label",this.t("What is RMSE?"))):this.regression.statistics.Rsquared<0?(this.$regressionAboutLink[0].href="http://support.desmos.com/entries/60460125-Why-am-I-seeing-a-negative-R-2-value-",this.$regressionAboutLink.attr("aria-label",this.t("Why am I seeing a negative R Squared value?")),this.$regressionAboutLink.show()):this.$regressionAboutLink.hide()},e.renderRegression=function(){this.renderStats(),this.residuals.latex(this.regression.residualVariable||""),this.$residualSuggestion.toggleClass("dcg-visible",!!this.regression.residualSuggestionId).attr("aria-hidden",!this.regression.residualSuggestionId),this.$logModeToggleContainer.toggleClass("dcg-visible",!!this.regression.shouldSuggestLogMode).attr("aria-hidden",!this.regression.shouldSuggestLogMode),this.$logModeToggleBtn.toggleClass("dcg-toggled-on",!!this.expressionModel.isLogModeRegression).attr("aria-checked",!!this.expressionModel.isLogModeRegression),this.$parameters.html(""),this.$parametersContainer.toggle(s.size(this.regression.parameters)>0);for(var e in this.regression.parameters){var t=this.t("__parameter__ equals __value__",{parameter:e,value:this.getRoundedParam(e,5)}),n=r('<span role="textbox" aria-readonly=true tabindex=0 aria-label="'+t+'">'),i=r('<span aria-hidden=true class="dcg-parameter">').text(e+"="+this.getRoundedParam(e,5));o.StaticMath(i[0]),this.$parameters.append(n),this.$parameters.append(i)}}})}),define("loadcss!css/slider",function(){}),define("template!slider_view",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<span class="dcg-slider-container" tapboundary="true">\n\n  <div class="dcg-do-blur dcg-slider" handleEvent="true">\n    <div role="button" tabindex=0 aria-label="'+(null==(__t=t("Edit Limits"))?"":_.escape(__t))+'" class="dcg-minLabel dcg-template-minlabelhtml">\n    </div>\n    <div class="dcg-slider-interior">\n      <div class="dcg-track dcg-action-moveslider">\n        <div class="dcg-ticks dcg-template-tickmarkhtml"></div>\n        <div class="dcg-graphic"></div>\n      </div>\n      <div class="dcg-zeroMarker dcg-action-moveslider"></div>\n      <div role="slider" tabindex=0 class="dcg-thumb dcg-action-startdragging" disablescroll="true">\n        <div class="dcg-graphic"></div>\n        <div class="dcg-center"></div>\n      </div>\n    </div>\n    <div class="dcg-maxLabel dcg-template-maxlabelhtml">\n    </div>\n  </div>\n\n  <div class="dcg-slider_menu dcg-do-blur dcg-desmos-input-container" handleEvent="true">\n    ',__p+='\n    <div class="dcg-editable-mathquill-container">\n      <span class="dcg-math-field" data-dcg-limit="slidermin"></span>\n      <span class="dcg-interval-interior"></span>\n      <span class="dcg-math-field" data-dcg-limit="slidermax"></span>\n      <span class="dcg-slider-step-container">\n        <span class="dcg-slider-step-label" aria-hidden="true">'+(null==(__t=t("step:"))?"":_.escape(__t))+'</span>\n        <span class="dcg-math-field" data-dcg-limit="sliderstep"></span>\n      </span>\n    </div>\n  </div>\n\n</span>\n';return __p}}),define("expressions/slider_view",["require","loadcss!css/slider","jquery","pjs","lib/rounding","underscore_view","template!slider_view","underscore","keys","lib/aria","conditional_blur","mathquill","lib/evaluate-single-expression","i18n","lib/setup_mathquill_tap","graphing/label","lib/number-to-latex","expressions/slider_loop_modes"],function(e){e("loadcss!css/slider");var t=e("jquery"),n=e("pjs"),i=e("lib/rounding"),r=e("underscore_view"),s=e("template!slider_view"),a=e("underscore"),o=e("keys"),c=e("lib/aria"),l=e("conditional_blur"),u=e("mathquill"),h=e("lib/evaluate-single-expression"),d=e("i18n"),p=e("lib/setup_mathquill_tap"),f=e("graphing/label"),m=e("lib/number-to-latex"),g=e("expressions/slider_loop_modes"),v=n(r,function(e,n){e.template=s,e.animationSpeeds=[.05,.1,.15,.2,.35,.5,.75,1,1.5,2,3.5,5,7.5,10,15,20],e.init=function(e,t){n.init.call(this),this.slider=e,this.slider["transient"]=!0,this.parentView=t,this.value=this.slider.value,this.slider.observe("value",function(){this.setProperty("value",this.slider.value),this.$thumb&&this.$thumb.is(":focus")&&this.updateSliderAriaValue()}.bind(this)),this.editing=!1,this.slider.observe("min.sliderview max.sliderview",function(){this.renderThumbPosition(),this.setLastValidBounds()}.bind(this)),this.observe("value",this.renderThumbPosition.bind(this)),this.slider.observe("min.sliderview max.sliderview",this.renderZeroMarker.bind(this)),this.slider.observe("min.sliderview max.sliderview step.sliderview",this.renderTickMarks.bind(this)),this.slider.observe("min.sliderview hardMin.sliderview",this.renderMin.bind(this)),this.slider.observe("max.sliderview hardMax.sliderview",this.renderMax.bind(this)),this.observe("dependentLabel",this.renderDependent.bind(this)),this.observe("editing",this.renderEditing.bind(this)),this.observe("editing",function(){this.slider.setProperty("isPlaying",!1)}.bind(this)),this.slider.observe("validLimits",this.renderInvalid.bind(this)),this.slider.observe("dragging.sliderview",this.renderDragging.bind(this)),this.slider.observe("isPlaying.sliderview",this.renderIsPlaying.bind(this)),this.slider.observe("animationPeriod",this.renderAnimationPeriod.bind(this)),this.slider.observe("loopMode",this.renderLoopMode.bind(this)),this.parentView.graphSettings.observe("degreeMode",this.checkInvalid.bind(this))},e.t=function(e,t){return d.t(e,t,this.parentView.graphSettings.language)},e.getTemplateParams=function(){var e=this;return{t:function(t,n){return d.t(t,n,e.parentView.graphSettings.language)}}},e.renderAnimationPeriod=function(){var e=this.computeSpeed(),t=e+"x";this.parentView.$(".dcg-variable-speed").text(t),this.parentView.$(".dcg-action-slower").toggleClass("dcg-disabled",a.min(this.animationSpeeds)>=e).attr("aria-disabled",a.min(this.animationSpeeds)>=e),this.parentView.$(".dcg-action-faster").toggleClass("dcg-disabled",a.max(this.animationSpeeds)<=e).attr("aria-disabled",a.max(this.animationSpeeds)<=e)},e.renderLoopMode=function(){var e=this.parentView.$(".dcg-action-toggle-slider-loop-mode");e.attr("loopMode",this.slider.loopMode),this.setAriaProps()},e.setAriaProps=function(){var e=this.parentView.model.dependent;if(e){var t=this.$(".dcg-minLabel"),n=this.parentView.$(".dcg-action-toggle-slider-loop-mode"),i=this.parentView.$(".dcg-action-slower"),r=this.parentView.$(".dcg-action-faster"),s=!this.slider.isPlaying,a=s?-1:0;this.$thumb.attr("aria-label",'"'+e+'"'),1===t.length&&t.attr("aria-label",this.t("Edit __variable__ Limits",{variable:e})),1===n.length&&(this.slider.loopMode===g.LOOP_FORWARD_REVERSE?n.attr("aria-label",this.t("Loop __variable__ Forward and Reverse",{variable:e})):n.attr("aria-label",this.t("Loop __variable__ Forward",{variable:e})),n.attr("aria-hidden",s),n.attr("tabindex",a)),1===i.length&&(i.attr("aria-label",this.t("Animate __variable__ Slower",{variable:e})),i.attr("aria-hidden",s),i.attr("tabindex",a)),1===r.length&&(r.attr("aria-label",this.t("Animate __variable__ Faster",{variable:e})),r.attr("aria-hidden",s),r.attr("tabindex",a))}},e.destruct=function(){this.slider.unobserve(".sliderview")},e.getDependentLabel=function(){var e=this.model.dependent;return e?(e.match(/(.*)_(.+)/)&&(e=e.replace(/(.*)_(.+)/,"$1_{$2}")),e=u.MathField(t("<span>"+e+"</span>")[0]).html(),e="<span class='mq-math-mode'>"+e+"</span>"):""},e.renderDependent=function(){var e=this.parentView.model.dependent;if(e){var n=f.identifierToLatex(e),i=u.StaticMath(t("<span> \\le "+n+" \\le </span>")[0]).html();this.$(".dcg-interval-interior").eq(0).html(i).addClass("mq-math-mode"),this.setAriaProps()}},e.renderDragging=function(){this.$thumb.toggleClass("dcg-down",!!this.slider.dragging)},e.renderMin=function(){this.sliderMinMathquill&&(this.sliderMinMathquill.latex(this.slider.hardMin?this.slider.lastValidLatex.slidermin:m(this.slider.min)),this.$thumb.attr("aria-minvalue",this.slider.hardMin?this.slider.min:""))},e.renderMax=function(){this.sliderMaxMathquill&&(this.sliderMaxMathquill.latex(this.slider.hardMax?this.slider.lastValidLatex.slidermax:m(this.slider.max)),this.$thumb.attr("aria-minvalue",this.slider.hardMax?this.slider.max:""))},e.renderEditing=function(){this.$().toggleClass("dcg-editing-limits",this.editing),this.reflowMathQuill()},e.renderThumbPosition=function(){if(this.$thumb){var e,t=this.slider.min,n=this.slider.max,i=this.value;e=t>=i?0:i>=n?100:(i-t)/(n-t)*100,this.$thumb.css("left",e+"%")}},e.renderZeroMarker=function(){var e=(0-this.slider.min)/(this.slider.max-this.slider.min),t={};if(e>=0&&1>=e){var n=100*e;t.display="block",t.left=n+"%"}else t.display="none";this.$(".dcg-zeroMarker").css(t)},e.renderTickMarks=function(){var e=this.slider.step,t=this.slider.min,n=this.slider.max,i=100*e/(n-t);3>i&&(i=0);var r="";if(i>0&&100>i)for(var s=i;100>s;s+=i)r+='<div class="dcg-tick" style="left:'+s+'%"></div>';this.$(".dcg-template-tickmarkhtml").html(r)},e.getDimensions=function(){var e=this.$(".dcg-track"),t=e.offset().left,n=t+e.width();return{trackLeft:t,trackRight:n}},e.computeSpeed=function(){var e=this.slider.DEFAULT_PERIOD/this.slider.animationPeriod;return e=Number(e.toFixed(3))},e.setPeriodFromSpeed=function(e){var t=this.slider.DEFAULT_PERIOD/e;this.slider.setProperty("animationPeriod",t),c.alert(this.t("Animating at __speed__x",{speed:e}))},e.animateSlower=function(){var e=this.computeSpeed(),t=a.filter(this.animationSpeeds,function(t){return e>t});0!==t.length&&this.setPeriodFromSpeed(a.max(t))},e.animateFaster=function(){var e=this.computeSpeed(),t=a.filter(this.animationSpeeds,function(t){return t>e});0!==t.length&&this.setPeriodFromSpeed(a.min(t))},e.toggleLoopMode=function(){this.slider.toggleLoopMode()},e.focusInMathquill=function(e){var t=this.$(e.target).closest(".dcg-math-input");t.hasClass("dcg-focus")||(t.addClass("dcg-focus"),u(t[0]).select())},e.focusOutMathquill=function(e){var t=this.$(e.target).closest(".mq-editable-field"),n=t.data("dcg-limit");this.slider.validLimits[n]&&this.save(t),clearTimeout(this.focusedOutRecentlyTimeout),this.focusedOutRecently=!0,this.focusedOutRecentlyTimeout=setTimeout(function(){this.focusedOutRecently=!1}.bind(this)),t.removeClass("dcg-focus"),u(t[0]).clearSelection()},e.handleMathquillInput=function(e){var t=this.$(e.target).closest(".dcg-math-input"),n=u(t[0]).latex(),i=t.data("dcg-limit");"slidermin"===i&&this.slider.setProperty("hardMin",""!==n),"slidermax"===i&&this.slider.setProperty("hardMax",""!==n)},e.didInsertElement=function(){var e=this;this.$thumb=this.$(".dcg-thumb"),this.updateSliderAriaValue(),this.$thumb.on("focus",this.updateSliderAriaValue.bind(this));var n=this.mathFields={};this.$(".dcg-math-field").each(function(){var i=u.MathField(this),r=t(this).data("dcg-limit"),s={
slidermin:e.t("Slider Minimum: "),slidermax:e.t("Slider Maximum: "),sliderstep:e.t("Slider Step Size: ")};i.setAriaLabel(s[r]),p(this,i),n[r]=i}).addClass("dcg-math-input").on("focusin",e.focusInMathquill.bind(e)).on("focusout",e.focusOutMathquill.bind(e)).on("render",e.handleMathquillInput.bind(e)).on("render",e.checkInvalid.bind(e)).on("enterPressed",l),this.$(".dcg-action-startdragging").on("dcg-tapstart",this.onStartDragging.bind(this)),this.$(".dcg-action-moveslider").on("dcg-tap",function(e){var t=e.changedTouches[0];this.slider.setProperty("isPlaying",!1),this.setValueByTouch(t),this.slider.commitSliderValue(this.value)}.bind(this)),this.$().on("focusout",this.focusOut.bind(this)),this.$().on("focusin",this.focusIn.bind(this)),this.$thumb.on("keydown",this.keyDown.bind(this)),this.$().on("dcg-tap",".dcg-minLabel",this.onEditMin.bind(this)),this.$().on("dcg-tap",".dcg-maxLabel",this.onEditMax.bind(this)),this.sliderMinMathquill=u.StaticMath(this.$(".dcg-template-minlabelhtml")[0]),this.sliderMaxMathquill=u.StaticMath(this.$(".dcg-template-maxlabelhtml")[0]),this.renderTickMarks(),this.renderThumbPosition(),this.renderZeroMarker(),this.renderDependent(),this.renderMin(),this.renderMax(),this.renderAnimationPeriod(),this.renderLoopMode(),this.renderIsPlaying(),this.setLastValidBounds(),this.slider.setTransient()},e.setValueByTouch=function(e){var t=this.slider.min,n=this.slider.max,r=this.getDimensions(),s=r.trackLeft,a=r.trackRight,o=a-s,c=(n-t)/o,l=this.originalTouchOffsetFromCenter||0,u=e.pageX-l,h=Math.min(1,Math.max(0,(u-s)/o)),d=t*(1-h)+n*h;d=i.shortestDecimalBetween(d-c,d+c),d=this.slider.computeSnappedValue(d),d=Math.max(t,Math.min(n,d)),this.setProperty("value",d)},e.tick=function(){if(this.cachedSliderTouch){var e=this.value;this.setValueByTouch(this.cachedSliderTouch),this.cachedSliderTouch=null,this.value!==e&&this.slider.commitSliderValue(this.value)}},e.onStartDragging=function(e){if(e.preventDefault(),1===e.touches.length){this.parentView.clearListFocus(),this.parentView.listView.registerSliderBeingSlid(this);var n=this;this.slider.setProperty("isPlaying",!1);var i=function(e,t){for(var n=e.touches,i=null,r=0;r<n.length;r++)n[r].identifier===t&&(i=n[r]);return i};n.slider.setProperty("dragging",!0);var r=e.changedTouches[0].identifier,s=n.$(e.originalEvent.target);n.originalTouchOffsetFromCenter=e.changedTouches[0].x-s.offset().left-.5*s.width();var a=function(e){var t=i(e,r);n.cachedSliderTouch=t},o=function(){t(document).off("dcg-tapmove",a),t(document).off("dcg-tapend dcg-tapcancel",c),n.slider.setProperty("dragging",!1),n.cachedSliderTouch=null,n.parentView.listView.unregisterSliderBeingSlid(n)},c=function(e){var t=i(e,r);t||o()};t(document).on("dcg-tapmove",a),t(document).on("dcg-tapend dcg-tapcancel",c)}},e.checkInvalid=function(){var e={};a.each(this.mathFields,function(t,n){e[n]=t.latex()});var t=this.slider.checkLimits(e.slidermin,e.slidermax,e.sliderstep);this.slider.setProperty("validLimits",{slidermin:t.slidermin,slidermax:t.slidermax,sliderstep:t.sliderstep})},e.renderInvalid=function(){var e=this;a.each(this.mathFields,function(n,i){var r=t(n.el());r.toggleClass("dcg-invalid",!e.slider.validLimits[i])})},e.setLastValidBounds=function(){this.mathFields.slidermin.latex(this.slider.hardMin?this.slider.lastValidLatex.slidermin:""),this.mathFields.slidermax.latex(this.slider.hardMax?this.slider.lastValidLatex.slidermax:""),this.mathFields.sliderstep.latex(this.slider.lastValidLatex.sliderstep)},e.keyDown=function(e){switch(o.lookup(e)){case o.ENTER:case o.ESCAPE:l();break;case o.LEFT:case o.DOWN:this.slider.adjust("down"),e.preventDefault();break;case o.RIGHT:case o.UP:this.slider.adjust("up"),e.preventDefault();break;case o.PAGEDOWN:this.slider.adjust("bigdown"),e.preventDefault();break;case o.PAGEUP:this.slider.adjust("bigup"),e.preventDefault();break;case o.HOME:this.slider.adjust("min"),e.preventDefault();break;case o.END:this.slider.adjust("max"),e.preventDefault();break;default:this.checkInvalid()}},e.focusIn=function(e){clearTimeout(this.saveAfterBlurTimeout),this.checkInvalid()},e.focusOut=function(e){var t=this;this.saveAfterBlurTimeout=setTimeout(function(){clearTimeout(t.saveAfterBlurTimeout),t.onClose()},1),this.checkInvalid()},e.save=function(e){if(e){var t=this.parentView.listView.graphSettings.degreeMode,n=u.MathField(e[0]),i=e.data("dcg-limit"),r=n.latex(),s=h(r,t);isNaN(s)&&(s=void 0);var a=isNaN(h(this.mathFields.sliderstep.latex(),t))?0:this.slider.step;"slidermin"===i?void 0===s?this.slider.setProperty("hardMin",!1):s<this.slider.max&&this.slider.max-s>=a?(this.slider.setProperty("minLatex",r),""!==r&&this.slider.setProperty("hardMin",!0)):this.renderMin():"slidermax"===i?(void 0===s&&this.slider.setProperty("hardMax",!1),s>this.slider.min&&s-this.slider.min>=a?(this.slider.setProperty("maxLatex",r),""!==r&&this.slider.setProperty("hardMax",!0)):this.renderMax()):"sliderstep"===i&&(void 0===s?this.slider.setProperty("stepLatex",""):s>=0&&s<=this.slider.max-this.slider.min&&this.slider.setProperty("stepLatex",r))}},e.reflowMathQuill=function(){var e=a.extend({},this.mathFields,{sliderMaxMathquill:this.sliderMaxMathquill,sliderMinMathquill:this.sliderMinMathquill});a.each(e,function(e){e.reflow()})},e.onClose=function(){var e=this;this.setProperty("editing",!1),a.each(this.mathFields,function(n,i){e.slider.validLimits[i]&&e.save(t(n.el()))}),this.setLastValidBounds()},e.onEditMin=function(e){this.setProperty("editing",!0),this.mathFields.slidermin.focus(),e.preventDefault()},e.onEditMax=function(e){this.setProperty("editing",!0),this.mathFields.slidermax.focus(),e.preventDefault()},e.renderIsPlaying=function(){this.slider.step<0&&this.slider.setProperty("isPlaying",!1),this.parentView.$().toggleClass("dcg-isPlaying",!!this.slider.isPlaying),this.slider.isPlaying||this.updateSliderAriaValue(),this.setAriaProps()},e.updateSliderAriaValue=function(){this.$thumb&&this.$thumb.attr("aria-valuenow")!==this.slider.value&&this.$thumb.attr("aria-valuenow",this.slider.value)}});return v}),define("loadcss!css/prompt-sliders",function(){}),define("template!prompt_sliders",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div class="dcg-create-sliders dcg-action-createslider" handleEvent="true">\n  <span class="dcg-msg">'+(null==(__t=t("add slider:"))?"":_.escape(__t))+'</span>\n  <span class="btns">\n    ',_.each(variables,function(e){__p+='\n      <div class="dcg-slider-btn-container" var_name="'+(null==(__t=e.name)?"":_.escape(__t))+'" >\n        <div role="button" tabindex=0 class="dcg-btn-slider '+(null==(__t=1===variables.length?"dcg-btn-blue":"dcg-btn-light-gray")?"":_.escape(__t))+'">'+(null==(__t=e.labelHTML)?"":__t)+"</div>\n      </div>\n    "}),__p+="\n\n    ",variables.length>1&&(__p+='\n      <div class="dcg-slider-btn-container dcg-all">\n        <div role="button" tabindex=0 class="dcg-btn-slider dcg-btn-blue">'+(null==(__t=t("all"))?"":_.escape(__t))+"</div>\n      </div>\n    "),__p+="\n  </span>\n</div>\n";return __p}}),define("expressions/promptslider_view",["require","loadcss!css/prompt-sliders","jquery","pjs","underscore_view","template!prompt_sliders","./expression","graphing/label","lib/aria","i18n"],function(e){e("loadcss!css/prompt-sliders");var t=e("jquery"),n=e("pjs"),i=e("underscore_view"),r=e("template!prompt_sliders"),s=e("./expression"),a=e("graphing/label"),o=e("lib/aria"),c=e("i18n"),l=n(i,function(e,n){e.template=r,e.init=function(e){n.init.call(this),this.variables=[],this.expressionView=e,this.observe("variables",this.rerender.bind(this))},e.t=function(e,t){return c.t(e,t,this.expressionView.graphSettings.language)},e.didInsertElement=function(){var e=this;this.$(".dcg-action-createslider").on("dcg-tap",this.onCreateSlider.bind(this)),this.promptAlertTimeout&&clearTimeout(this.promptAlertTimeout),this.promptAlertTimeout=setTimeout(function(){for(var t=[],n=0;n<this.variables.length;n++)t.push('"'+this.variables[n]+'"');o.alert(e.t("Add slider for __vars__",{vars:t.join(",")})),this.promptAlertTimeout=null}.bind(this),2e3)},e.destruct=function(){n.destruct.call(this),this.promptAlertTimeout&&clearTimeout(this.promptAlertTimeout)},e.getTemplateParams=function(){for(var e=this,t=this.variables,n=[],i=0;4>i&&i<t.length;i++)n.push({name:t[i],labelHTML:a.identifierToHTML(t[i])});return{variables:n,t:function(t,n){return c.t(t,n,e.expressionView.graphSettings.language)}}},e.onCreateSlider=function(e){this.expressionView.clearListFocus();var n=t(e.target).closest(".dcg-slider-btn-container");if(n.length){var i=!1;if(n.hasClass("dcg-all"))this.createAllSliders(),i=!0;else{var r=[n.attr("var_name")];this.createSliders(r),i=1==this.variables.length}"keyboard"===e.device&&setTimeout(function(){var e;e=i?this.expressionView.$().next().find(".dcg-thumb"):this.expressionView.$(".dcg-btn-blue"),e.length||(e=this.expressionView.mathField),e.focus()}.bind(this),100)}},e.createAllSliders=function(e){0!==this.variables.length&&this.createSliders(this.variables,e)},e.createSliders=function(e,t){for(var n=this.expressionView,i=this.expressionView.model,r=[],o=0;o<e.length;o++)r.push({latex:a.identifierToLatex(e[o])+"=1",sliderMin:-10,sliderMax:10,hidden:!0});t&&t.addAndFocusBlank&&r.push({latex:""});var c=i.index,l=i.folder,u=c+1,h=i.list;h.undoRedo.performAndAddTransaction({undo:function(){for(var e=0;e<r.length;e++)h.removeItemAt(u)},redo:function(){for(var e=r.length-1;e>=0;e--){var i=s(r[e],h);r[e].id=i.id,h.insertItemAt(u,i),l&&l.addItem(i)}if(t&&t.addAndFocusBlank){var a=r[r.length-1].id,o=n.listView.getItemView(a);o.addFocus()}}}),n.setProperty("doAnimate",!1),clearTimeout(n.restoreAnimationTimeout),n.restoreAnimationTimeout=setTimeout(function(){n.setProperty("doAnimate",!0)},500)}});return l}),define("loadcss!css/label",function(){}),define("template!label_view",["underscore"],function(_){return function(obj){var __p="";Array.prototype.join;with(obj||{})__p+='<span class="dcg-label-container dcg-do-blur" tapboundary="true" handleEvent="true">\n  <div>label:</div>\n  <textarea class="dcg-label-input"></textarea>\n</span>\n';return __p}}),define("expressions/label_view",["require","loadcss!css/label","pjs","underscore_view","template!label_view"],function(e){e("loadcss!css/label");var t=e("pjs"),n=e("underscore_view"),i=e("template!label_view"),r=t(n,function(e,t){e.template=i,e.init=function(e){t.init.call(this),this.model=e.model,this.parentView=e,this.model.observe("label.labelview",this.renderLabel.bind(this))},e.destruct=function(){this.model.unobserve(".labelview")},e.didInsertElement=function(){this.$label=this.$(".dcg-label-input"),this.$label.on("input",this.onLabelInput.bind(this)),this.renderLabel()},e.renderLabel=function(){var e=this.model.label||"";this.$label.val()!==e&&this.$label.val(e)},e.onLabelInput=function(e){this.model.setProperty("label",e.target.value)}});return r}),define("template!expression_item",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="",__p+=renderShell?'\n\n<div class="dcg-do-not-blur dcg-expressionitem dcg-shell">\n  <div class=\'dcg-shell\'>\n    <span class="dcg-tab">\n      <span class="dcg-num dcg-variable-index" aria-hidden="true"></span>\n    </span>\n\n    <div class="dcg-expression-item-loading">\n    </div>\n  </div>\n</div>\n\n':'\n\n<div class="dcg-do-not-blur dcg-expressionitem dcg-mathitem">\n  <div class=\'dcg-fade-container\'>\n\n    <div class="dcg-fadeout-left"></div>\n\n    <div class="dcg-main-container">\n      <span class="dcg-valign-bar">\n      </span><span class="dcg-main">\n        <span class="dcg-math-field dcg-transient-mathquill"></span>\n        <span class="dcg-math-field dcg-template-mathquill"></span>\n      </span>\n    </div>\n    <span class="dcg-fadeout"></span>\n    <i class="dcg-icon-remove dcg-top-level-delete dcg-action-delete" handleEvent="true"></i>\n\n    <div class="dcg-slider-speed-container dcg-do-not-blur" handleEvent="true">\n      <span role="button" aria-label="'+(null==(__t=t("Loop Mode"))?"":_.escape(__t))+'" aria-hidden="true" class="dcg-action-toggle-slider-loop-mode">\n        <span class="dcg-toggle-loop-mode-top">\n          <i class="dcg-icon-bottom-arrow"></i>\n        </span>\n        <span class="dcg-toggle-loop-mode-bottom">\n          <i class="dcg-icon-bottom-arrow"></i>\n        </span>\n      </span>\n      <span role="button" aria-label="'+(null==(__t=t("Animate Slower"))?"":_.escape(__t))+'" aria-hidden="true" class="dcg-action-slower" >&laquo;</span>\n      <span class="dcg-variable-speed"></span>\n      <span role="button" aria-label="'+(null==(__t=t("Animate Faster"))?"":_.escape(__t))+'" aria-hidden="true" class="dcg-action-faster">&raquo;</span>\n    </div>\n\n  <span class="dcg-tab dcg-action-drag dcg-action-icon-touch"\n        handleevent="true"\n        tapboundary="true"\n        disablescroll="true"\n  >\n    <span class="dcg-num dcg-variable-index" aria-hidden="true"></span>\n    <span class="dcg-tab-interior dcg-action-icon-mouse">\n      <span class="template-expricon"></span>\n    </span>\n  </span>\n\n    <div class="dcg-template-bottom-container dcg-fixed-width-element">\n      <div class="dcg-template-bottom"></div>\n    </div>\n  </div>\n\n\n  <span class="dcg-exp-actions">\n    <span class="dcg-graphic" handleEvent="true"></span>\n    <nobr>\n      <span class="dcg-action-delete dcg-delete-btn dcg-tooltip" handleEvent="true" tooltip="'+(null==(__t=t("Delete"))?"":_.escape(__t))+'"><i class=\'dcg-icon-remove\'></i></span>\n      <span class="dcg-action-duplicate dcg-duplicate-btn dcg-tooltip" handleEvent="true" tooltip="'+(null==(__t=t("Duplicate"))?"":_.escape(__t))+'"><i class=\'dcg-icon-duplicate\'></i></span>\n      <span class="dcg-action-createtable dcg-tooltip" tooltip="'+(null==(__t=t("Convert to Table"))?"":_.escape(__t))+'" handleEvent="true">\n        <i class=\'dcg-icon-table\'></i>\n      </span>\n    </nobr>\n  </span>\n</div>\n\n',__p+="\n";return __p}}),define("expressions/abstractitem_view",["require","pjs","jquery","mathquill","underscore_view","conditional_blur","i18n"],function(e){var t=e("pjs"),n=e("jquery"),i=e("mathquill"),r=e("underscore_view"),s=e("conditional_blur"),a=e("i18n"),o=t(r,function(e,t){e.init=function(e,n){t.init.call(this),this.model=e,this.listView=n,this.graphSettings=n.graphSettings,this.model.selected&&(this.model.renderShell=!1),this.model.observe("displayIndex.itemview",this.renderDisplayIndex.bind(this)),this.model.observe("selected.itemview",this.renderSelected.bind(this)),this.model.observe("renderShell.itemview",this.rerender.bind(this)),this.model.observe("renderShell.itemview",this.setMinWidth.bind(this)),this.model.observe("folder.itemview",this.renderFolder.bind(this)),this.model.observe("collapsedOrSecret.itemview",this.renderCollapsedOrSecret.bind(this))},e.clearListFocus=function(){this.listView&&this.listView.model&&this.listView.model.setSelected(null)},e.onProjectorModeChange=function(){},e.destruct=function(){this.model.unobserve(".itemview")},e.getTemplateParams=function(){var e=this;return{renderShell:this.model.renderShell,t:function(t,n){return a.t(t,n,e.graphSettings.language)}}},e.setInitialAnimationHeight=function(e){if(!this.$templateBottomContainer.hasClass("dcg-do-animate")){this.$templateBottomContainer.css("height",e);var t=this;setTimeout(function(){t.$templateBottomContainer.addClass("dcg-do-animate")})}},e.animateHeightTimeout=null,e.clearHeightTimeout=null,e.animateHeightTo=function(e){var t=this;clearTimeout(this.animateHeightTimeout),this.animateHeightTimeout=setTimeout(function(){t.$templateBottomContainer.css("height",e),t.$templateBottom.toggleClass("dcg-faded-in",e>0)},250),clearTimeout(this.clearHeightTimeout),this.clearHeightTimeout=setTimeout(function(){t.$templateBottomContainer.css("height","auto"),t.$templateBottomContainer.removeClass("dcg-do-animate")},550)},e.templateBottomItems=0,e.addViewToBottom=function(e){if(this.$templateBottom){if(this.templateBottomItems++,!this.doAnimate||this.templateBottomItems>1)return this.$templateBottom.addClass("dcg-faded-in"),void e.appendTo(this.$templateBottom);this.setInitialAnimationHeight(0),e.appendTo(this.$templateBottom),this.animateHeightTo(e.$().height())}},e.removeViewFromBottom=function(e){if(this.$templateBottom){if(this.templateBottomItems--,this.templateBottomItems>0)return void e.remove();if(!this.doAnimate)return this.$templateBottom.removeClass("dcg-faded-in"),void e.remove();this.setInitialAnimationHeight(this.$templateBottom.height()),e.remove(),this.animateHeightTo(0)}},e.renderDisplayIndex=function(){this.$(".dcg-variable-index").text(this.model.displayIndex)},e.renderFolder=function(){this.$().toggleClass("dcg-inFolder",!!this.model.folder)},e.renderCollapsedOrSecret=function(){this.$().toggleClass("dcg-collapsedOrSecret",!!this.model.collapsedOrSecret)},e.renderSelected=function(){this.model.selected&&this.model.renderShell&&this.model.setProperty("renderShell",!1),this.$().toggleClass("dcg-selected",!!this.model.selected)},e.setMinWidth=function(){this.$(".dcg-fixed-width-element").css("width",this.listView.minWidth-this.listView.scrollbarWidth)},e.didCreateElement=function(){this.setMinWidth(),this.$templateBottom=this.$(".dcg-template-bottom"),this.$templateBottomContainer=this.$(".dcg-template-bottom-container")},e.didInsertElement=function(){t.didInsertElement.call(this);var e=this;this.$().on("dcg-tap dcg-tapstart",function(t){("dcg-tap"!==t.type||"mouse"!==t.device)&&("dcg-tapstart"!==t.type||"touch"!==t.device)&&e.onMouseSelect(t)}),this.$(".dcg-action-drag").on("dcg-tapstart",this.onDragPending.bind(this)),this.$(".dcg-action-delete").on("dcg-tap",this.onDelete.bind(this)),this.$().attr("expr-id",this.model.id),this.renderDisplayIndex(),this.renderSelected(),this.renderFolder(),this.renderCollapsedOrSecret()},e.triggerDelete=function(){},e.triggerEnterPressed=function(){},e.triggerUpPressed=function(){},e.triggerDownPressed=function(){},e.triggerBackspacePressed=function(){},e.triggerDelPressed=function(){},e.onMouseSelect=function(){},e.sendTapToMathQuill=function(e,t){if("mouse"===e.device&&e.preventDefault(),"mouse"===e.device){if(n.contains(t[0],e.target))return;var r=n.event.fix(e.originalEvent);t.triggerHandler(r)}else{var s=e.originalEvent.changedTouches[0];i(t[0]).clickAt(s.clientX,s.clientY,s.target),i(t[0]).focus();var a,o=setTimeout(function(){o=null,a=Date.now()});i(t[0]).ignoreNextMousedown(function(){return o||Date.now()-a<500})}},e.onDelete=function(){this.triggerDelete()},e.convertTo=function(e,t){var n=e(t,this.listView),i=this.model.index,r=this.model.list,s=this.model.folder;return n.setProperty("list",r),r.undoRedo.oneTransaction(function(){r.removeItemAt(i),r.insertItemAt(i,n),s&&s.addItem(n)}),n},e.getBounds=function(){var e=this.$(),t=e.offset();if(!t)return null;var n=t.top,i=e.height();return{top:n,bottom:n+i}},e.allowDragDrop=function(){return!0},e.onDragPending=function(e){if(e.preventDefault(),s(),this.allowDragDrop()){var t=this;this.mouseMovedTo=null;var i=setTimeout(function(){n(document).off(".dragpending"),t.onDragStart(e)},500);n(document).on("dcg-tapmove.dragpending",function(r){t.mouseMovedTo=r.touches[0];var s=e.touches[0].x-t.mouseMovedTo.x,a=e.touches[0].y-t.mouseMovedTo.y;Math.sqrt(s*s+a*a)>3&&(clearTimeout(i),n(document).off(".dragpending"),t.onDragStart(e))}),n(document).on("dcg-tapend.dragpending",function(e){clearTimeout(i),n(document).off(".dragpending")})}},e.onDragStart=function(e){this.allowDragDrop()&&(this.listView.dragdrop_expressions.start(e,this),this.mouseMovedTo&&(this.hideContextMenu(),this.listView.dragdrop_expressions.drag(this.mouseMovedTo.x,this.mouseMovedTo.y)))},e.hideContextMenu=function(){this.triggerEvent("hideContextMenu")},e.addFocus=function(e){},e.isFocused=function(){return!1}});return o}),define("expressions/expression_view",["require","jquery","lib/aria","pjs","./expression_icon_view","expressions/evaluation","expressions/unresolved","expressions/domain_view","expressions/regression_view","expressions/slider_view","expressions/promptslider_view","expressions/label_view","./expression","graphing/columnmode","i18n","conditional_blur","config","graphing/label","./text","./table","mathquill","jquery.handleevent","keys","template!expression_item","expressions/abstractitem_view"],function(e){var t=e("jquery"),n=e("lib/aria"),i=e("pjs"),r=e("./expression_icon_view"),s=e("expressions/evaluation"),a=e("expressions/unresolved"),o=e("expressions/domain_view"),c=e("expressions/regression_view"),l=e("expressions/slider_view"),u=e("expressions/promptslider_view"),h=e("expressions/label_view"),d=e("./expression"),p=e("graphing/columnmode"),f=e("i18n"),m=e("conditional_blur"),g=e("config"),v=e("graphing/label"),y=e("./text"),b=e("./table"),_=e("mathquill");e("jquery.handleevent");var x=e("keys"),w=e("template!expression_item"),S=e("expressions/abstractitem_view"),k=i(S,function(e,i){e.template=w,e.init=function(e,t){i.init.call(this,e,t),this.model.observe("formula.exprview",this.onFormulaChange.bind(this)),this.model.observe("selected.exprview",this.onSelectedChange.bind(this)),this.model.observe("latex.exprview",this.onLatexChange.bind(this)),this.model.observe("dependent.exprview",this.renderDependent.bind(this)),this.model.observe("isTableable.exprview",this.renderIsTableable.bind(this)),this.model.observe("unresolved.exprview",this.renderUnresolved.bind(this)),this.model.observe("loading.exprview",this.onLoadingChange.bind(this)),this.model.observe("displayIndex",this.updateMathquillAria.bind(this))},e.t=function(e,t){return f.t(e,t,this.graphSettings.language)},e.onLoadingChange=function(){if(!this.model.loading){var e=this;setTimeout(function(){e.setProperty("doAnimate",!0)})}},e.renderIsTableable=function(){this.$(".dcg-action-createtable").toggleClass("dcg-disabled",!this.model.isTableable)},e.destruct=function(){i.destruct.call(this),this.model.unobserve(".exprview"),this.iconView&&(this.iconView.remove(),this.iconView=null),this.sliderView&&(this.sliderView.remove(),this.sliderView=null),this.promptSliderView&&(this.promptSliderView.remove(),this.promptSliderView=null),this.domainView&&(this.domainView.remove(),this.domainView=null),this.regressionView&&(this.regressionView.remove(),this.regressionView=null),this.evaluationView&&(this.evaluationView.remove(),this.evaluationView=null),this.unresolvedView&&(this.unresolvedView.remove(),this.unresolvedView=null),this.labelView&&(this.labelView.remove(),this.labelView=null),this.model.unobserve("displayIndex")},e.onLatexChange=function(){if(this.sliderView&&this.sliderView.slider["transient"])return void this.updateTransientValue();var e=this.model.latex;return'"'===e&&this.graphSettings.config.notes?(this.convertTo(y,{selected:!0}),void this.listView.getSelectedView().addFocus()):(""===e&&this.model.hidden&&this.model.setProperty("hidden",!1),this.listView.onLatexChange(e),void this.updateMathquill())},e.updateMathquill=function(){if(this.mathField){var e=this.model.latex;void 0!==e&&this.mathField.latex()!==e&&this.mathField.latex(e)}},e.updateMathquillAria=function(){var e=this.t("Expression __index__",{index:this.model.displayIndex});this.mathField&&this.mathField.setAriaLabel(e),this.transientLhs&&this.transientLhs.setAriaLabel(e)},e.updateTransientValue=function(){if(this.$transientValue&&this.$transientValue.length){var e=this.model.slider.computeSnappedValue(this.model.slider.value).toString();this.$transientValue[0].innerHTML=e.replace("-",'<span class="unary-operator"></span>'),this.transientLhs.setAriaPostLabel(e)}},e.createIconView=function(){return r(this)},e.createSliderView=function(){return l(this.model.slider,this)},e.createPromptSliderView=function(){return u(this)},e.createDomainView=function(){return o(this.model.domain,this)},e.createRegressionView=function(){return c(this.model,this.listView)},e.createEvaluationView=function(){return s(this)},e.createLabelView=function(){return h(this)},e.onFormulaChange=function(){if(!this.model.renderShell){var e=this.model.formula;this.hideContextMenu();var t=e.is_slidable;this.sliderView&&!t?(this.sliderView.slider.unobserve(".expressionView"),this.removeViewFromBottom(this.sliderView),this.sliderView=null,this.$().removeClass("dcg-hasSlider")):!this.sliderView&&t&&(this.sliderView=this.createSliderView(),this.sliderView&&(this.addViewToBottom(this.sliderView),this.sliderView.setProperty("dependentLabel",this.getDependentLabel()),this.$().addClass("dcg-hasSlider"),this.sliderView.slider.observe("transient.expressionView",this.updateTransient.bind(this)),this.updateTransient()));var n=e.variables&&e.variables.length>0&&!e.is_single_identifier;this.promptSliderView&&!n?(this.removeViewFromBottom(this.promptSliderView),this.promptSliderView=null):!this.promptSliderView&&n&&(this.promptSliderView=this.createPromptSliderView(),this.promptSliderView&&this.addViewToBottom(this.promptSliderView));var i=e.is_parametric;this.domainView&&!i?(this.removeViewFromBottom(this.domainView),this.domainView=null,this.$().removeClass("dcg-hasDomain")):!this.domainView&&i&&(this.domainView=this.createDomainView(),this.domainView&&(this.addViewToBottom(this.domainView),this.$().addClass("dcg-hasDomain")));var r=e.is_regression;this.regressionView&&!r?(this.removeViewFromBottom(this.regressionView),this.regressionView=null,this.$().removeClass("dcg-hasRegression")):!this.regressionView&&r&&(this.regressionView=this.createRegressionView(),this.addViewToBottom(this.regressionView),this.$().addClass("dcg-hasRegression"));var s=e.is_evaluable&&e.zero_values&&e.zero_values.length>0&&"boolean"!=typeof e.zero_values[0].val;this.evaluationView&&!s?(this.removeViewFromBottom(this.evaluationView),this.evaluationView=null):!this.evaluationView&&s&&(this.evaluationView=this.createEvaluationView(),this.evaluationView&&(this.addViewToBottom(this.evaluationView),this.$().addClass(".dcg-hasEvaluation"),this.evaluationView.setProperty("dependentLabel",this.getDependentLabel()))),this.promptSliderView&&this.promptSliderView.setProperty("variables",e.variables),this.evaluationView&&this.evaluationView.setProperty("evaluations",e.zero_values),this.regressionView&&this.regressionView.setProperty("regression",e.regression),this.updateFormulaAria()}},e.updateFormulaAria=function(){var e=this.model.formula,t="";this.evaluationView&&(t=this.evaluationView.evaluationAria),""!==t?t="equals "+t:e.error&&!this.promptSliderView&&(t=f.unpack(e.error,this.listView.graphSettings.language)),this.mathField&&this.mathField.setAriaPostLabel(t),this.speakFormulaMessage(t)},e.speakFormulaMessage=function(e){var t,i=this;t=this.model.formula&&this.model.formula.error?5e3:1e3,this.alertTimeout&&clearTimeout(this.alertTimeout),this.alertTimeout=setTimeout(function(){i.model.selected&&i.mathField&&n.alert(e),i.alertTimeout=null},t)},e.renderDependent=function(){this.sliderView&&this.sliderView.setProperty("dependentLabel",this.getDependentLabel()),this.evaluationView&&this.evaluationView.setProperty("dependentLabel",this.getDependentLabel())},e.renderUnresolved=function(){var e=this.model.unresolved;!e&&this.unresolvedView&&(this.unresolvedView.remove(),this.unresolvedView=null),e&&!this.unresolvedView&&(this.unresolvedView=a(),this.addViewToBottom(this.unresolvedView))},e.didInsertElement=function(){i.didInsertElement.call(this),this.model.renderShell||(this.$mathField=this.$(".dcg-template-mathquill"),this.mathField=_.MathField(this.$mathField[0]),this.$transientLhs=this.$(".dcg-transient-mathquill"),this.transientLhs=_.MathField(this.$transientLhs[0]),this.$transientLhs.hide(),this.$transientValue=t("<span>"),this.$mathField.on("render upPressed downPressed enterPressed backspacePressed delPressed keydown focusin focus",this.onMathquillEvent.bind(this)),this.$transientLhs.on("dcg-tapstart",this.onSelectTransient.bind(this)),this.mathField.latex(this.model.latex||""),this.updateMathquillAria(),this.iconView=this.createIconView(),this.iconView&&this.iconView.replace(this.$(".template-expricon")),this.$(".dcg-action-duplicate").on("dcg-tap",this.onDuplicateWithoutFocus.bind(this)),this.$(".dcg-action-createtable").on("dcg-tap",this.onCreateTable.bind(this)),this.$(".dcg-action-faster").on("dcg-tap",this.animateFaster.bind(this)),this.$(".dcg-action-slower").on("dcg-tap",this.animateSlower.bind(this)),this.$(".dcg-action-toggle-slider-loop-mode").on("dcg-tap",this.toggleSliderLoopMode.bind(this)),this.renderIsTableable(),this.onFormulaChange(),g.get("labels")&&(this.labelView=this.createLabelView(),this.addViewToBottom(this.labelView)))},e.animateFaster=function(){this.sliderView&&this.sliderView.animateFaster()},e.animateSlower=function(){this.sliderView&&this.sliderView.animateSlower()},e.toggleSliderLoopMode=function(){this.sliderView&&this.sliderView.toggleLoopMode()},e.onSelectedChange=function(){!this.model.selected&&this.mathField&&this.mathField.clearSelection().blur()},e.onSelectTransient=function(){this.stopTransient(),this.mathField.focus()},e.onMathquillEvent=function(e){switch(e.type){case"render":return void this.model.setProperty("latex",this.mathField.latex());case"focus":case"focusin":return void this.model.setProperty("selected",!0);case"upPressed":return void this.triggerUpPressed();case"downPressed":return void this.triggerDownPressed();case"enterPressed":return void(this.promptSliderView?this.promptSliderView.createAllSliders({addAndFocusBlank:!0}):this.triggerEnterPressed());case"backspacePressed":if(!this.model.isEmpty())return;return void this.triggerBackspacePressed();case"delPressed":if(!this.model.isEmpty())return;return void this.triggerDelPressed();case"keydown":return void(x.lookup(e)===x.ESCAPE&&m())}},e.onDuplicateWithoutFocus=function(){var e=this.model.index,t=this.model.getState();t.selected=!1,delete t.id;var n=this.model.list,i=this.model.folder,r=d(t,n);return n.undoRedo.oneTransaction(function(){n.insertItemAt(e+1,r),i&&i.addItem(r)}),r},e.onMouseSelect=function(e){this.listView.editListMode||e.wasHandled()||(e.handle(),this.model.setProperty("selected",!0),this.sendTapToMathQuill(e,this.$mathField))},e.getDependentLabel=function(){var e=this.model.dependent;return e?(e=v.identifierToLatex(e),e=_.MathField(t("<span>"+e+"</span>")[0]).html(),e="<span class='mq-math-mode'>"+e+"</span>"):""};var S=function(e){return e.replace(RegExp("=[^=]+$"),"=")};e.startTransient=function(){this.setProperty("transient",!0),this.updateTransientValue(),this.$transientLhs.show(),this.$mathField.hide(),this.transientLhs.latex(S(this.model.latex)),this.$transientLhs.children(".mq-root-block").append(this.$transientValue)},e.stopTransient=function(){this.setProperty("transient",!1),this.$transientValue.remove(),this.$transientLhs.hide(),this.$mathField.show(),this.updateMathquill()},e.updateTransient=function(){this.$transientValue&&this.$transientValue.length&&(this.sliderView.slider["transient"]?this.startTransient():this.stopTransient())},e.isFocused=function(){return 0!==t(document.activeElement).closest(this.$mathField).length},e.addFocus=function(e){this.model.renderShell&&this.model.setProperty("renderShell",!1),this.mathField&&this.mathField.focus().moveToDirEnd("start"===e?_.L:_.R)},e.onCreateTable=function(){var e=this.model.formula;if(this.model.isTableable){var t=e.table_info,n=this.model.index,i={selected:!0},r=p.POINTS_AND_LINES;(e.is_point_list||this.model.hidden)&&(r=p.POINTS);var s,a=[],o=[];if(t.values)for(s=0;s<t.values.length;s++)a.push(t.values[s][0]),o.push(t.values[s][1]);else for(s=-2;2>=s;s++)a.push(s),o.push("");i.columns=[{latex:t.independent_variable,values:a},{latex:t.dependent_column,color:this.model.color,hidden:!1,columnMode:r,values:o}];var c=this.model.list,l=this.listView,u=this.model.folder?this.model.folder.id:null;l.setProperty("editListMode",!1),c.undoRedo.oneTransaction(function(){t.by_reference||(c.removeItemAt(n),n--);var e=b(i,c);c.insertItemAt(n+1,e),null!==u&&c.getItemById(u).addItem(e);
});var h=function(){c.undoRedo.undo(),l.setProperty("editListMode",!0)};this.listView.toastView.show(this.t("Table created."),{undoCallback:h})}}});return k}),define("template!text",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="",__p+=renderShell?'\n\n<div class="dcg-do-not-blur dcg-expressionitem dcg-expressiontext dcg-shell">\n  <div class=\'dcg-shell\'>\n    <span class="dcg-tab">\n      <span class="dcg-num dcg-variable-index"></span>\n    </span>\n\n    <div class="dcg-expression-item-loading">\n    </div>\n  </div>\n</div>\n\n':'\n\n<div class="dcg-do-not-blur dcg-expressiontext dcg-expressionitem">\n  <div class=\'dcg-fade-container\'>\n\n    <span class="dcg-main">\n      <div class="dcg-smart-textarea-placeholder"></div>\n    </span>\n    <i class="dcg-icon-remove dcg-top-level-delete dcg-action-delete" handleEvent="true"></i>\n\n  </div>\n\n  <span class="dcg-tab dcg-action-drag"\n        handleevent="true"\n        tapboundary="true"\n        disablescroll="true"\n  >\n    <span class=\'dcg-num dcg-variable-index\'></span>\n    <div class=\'dcg-tab-interior\'></div>\n    <i class=\'dcg-icon-text\'></i>\n  </span>\n\n  <span class=\'dcg-exp-actions\'>\n    <span\n      class="dcg-action-delete dcg-delete-btn dcg-tooltip"\n      handleEvent="true"\n      tooltip="'+(null==(__t=t("Delete"))?"":_.escape(__t))+"\"\n    >\n      <i class='dcg-icon-remove'></i>\n    </span>\n  </span>\n\n</div>\n\n",__p+="";return __p}}),define("loadcss!css/smart_textarea",function(){}),define("template!smart_textarea",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div class="dcg-smart-textarea-container">\n  <div class="dcg-displayTextarea dcg-fixed-width-element"></div>\n  <textarea class="dcg-do-blur dcg-fixed-width-element dcg-smart-textarea" placeholder="'+(null==(__t=t("enter a note..."))?"":_.escape(__t))+'"></textarea>\n</div>';return __p}}),define("expressions/smart_textarea",["require","loadcss!css/smart_textarea","jquery","pjs","underscore_view","browser","jquery.handleevent","keys","conditional_blur","i18n","template!smart_textarea"],function(e){e("loadcss!css/smart_textarea");var t=e("jquery"),n=e("pjs"),i=e("underscore_view"),r=e("browser");e("jquery.handleevent");var s=e("keys"),a=e("conditional_blur"),o=e("i18n"),c=e("template!smart_textarea"),l=n(i,function(e,n){e.template=c,e.init=function(e,t){n.init.call(this),this.graphSettings=t,this.$textarea=null,this.$displayText=null,this.setProperty("text",e||"")},e.getTemplateParams=function(){var e=this;return{t:function(t,n){return o.t(t,n,e.graphSettings.language)}}},e.didCreateElement=function(){n.didCreateElement.call(this),this.$textarea=this.$(".dcg-smart-textarea"),this.$displayText=this.$(".dcg-displayTextarea"),this.observe("text",this.renderText.bind(this)),this.$textarea.on("input propertychange change",function(e){this.setProperty("text",this.$textarea.val())}.bind(this)),this.$textarea.on("keydown",this.onKeydownEvent.bind(this)),this.$displayText.on("touchend",function(e){e.preventDefault()}),this.$displayText.on("dcg-tap dcg-tapstart","a",function(e){e.handle()}),this.$textarea.on("dcg-tapstart",function(e){e.handle()}.bind(this)),this.$textarea.focus(function(){this.setProperty("focused",!0)}.bind(this)),this.$textarea.blur(function(){this.setProperty("focused",!1)}.bind(this))},e.didInsertElement=function(){n.didInsertElement.call(this),this.renderText()},e.onKeydownEvent=function(e){if(this.$textarea){var t=this.$textarea[0],n=s.lookup(e);n!==s.ENTER||e.metaKey?n===s.ESCAPE?a():n===s.UP?0===t.selectionStart&&0===t.selectionEnd&&(e.preventDefault(),this.triggerEvent("upPressed")):n===s.DOWN?t.selectionStart===t.value.length&&t.selectionEnd===t.value.length&&(e.preventDefault(),this.triggerEvent("downPressed")):n===s.BACKSPACE?0===t.value.length&&(e.preventDefault(),this.triggerEvent("backspacePressed")):n===s.DELETE&&0===t.value.length&&(e.preventDefault(),this.triggerEvent("delPressed")):(e.preventDefault(),this.triggerEvent("enterPressed"))}},e.destruct=function(){this.blur()},e.markedUpText=function(){var e=this.text||"";e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");var t=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;return e=e.replace(t,"<a href='$1' target ='_blank'>$1</a>")},e.renderText=function(){this.$textarea&&(this.$textarea.val(this.text),this.$displayText.html(this.markedUpText()),this.fitText(),this.$textarea.toggleClass("dcg-empty",!this.text),setTimeout(this.fitText.bind(this),1))},e.fitText=function(){if(this.$displayText){var e=this.$displayText.outerHeight();e>0&&this.$textarea.css("height",e)}},e.isFocused=function(){return 0!==t(document.activeElement).closest(this.$()).length},e.blur=function(){this.$textarea&&this.$textarea.blur()},e.addFocus=function(e){if(!r.IS_IPAD||!r.IS_IN_IFRAME){var t=this.$textarea[0];t.focus(),"end"===e?t.selectionStart=t.selectionEnd=t.value.length:"start"===e&&(t.selectionStart=t.selectionEnd=0)}}});return l}),define("expressions/text_view",["require","jquery","pjs","./abstractitem_view","template!text","./smart_textarea","jquery.handleevent"],function(e){var t=e("jquery"),n=e("pjs"),i=e("./abstractitem_view"),r=e("template!text"),s=e("./smart_textarea");e("jquery.handleevent");var a=n(i,function(e,n){e.template=r,e.init=function(e,t){n.init.call(this,e,t),this.model.observe("selected.textview",this.onSelectedChange.bind(this)),this.smartTextarea=s(this.model.text,this.listView.graphSettings),this.model.observe("text.textview",function(){this.smartTextarea.setProperty("text",this.model.text)}.bind(this)),this.smartTextarea.observe("text",function(){this.model.setProperty("text",this.smartTextarea.text)}.bind(this)),this.model.observe("collapsedOrSecret.textview",function(){this.model.collapsedOrSecret||this.smartTextarea.fitText()}.bind(this))},e.destruct=function(){this.model.unobserve(".textview"),this.smartTextarea.destruct()},e.onProjectorModeChange=function(){this.smartTextarea.fitText()},e.didInsertElement=function(){n.didInsertElement.call(this),this.model.renderShell||(this.smartTextarea.replace(this.$(".dcg-smart-textarea-placeholder")),this.smartTextarea.observe("focused",function(){this.smartTextarea.focused&&this.model.setProperty("selected",!0)}.bind(this)),this.smartTextarea.observeEvent("enterPressed",this.triggerEnterPressed.bind(this)),this.smartTextarea.observeEvent("upPressed",this.triggerUpPressed.bind(this)),this.smartTextarea.observeEvent("downPressed",this.triggerDownPressed.bind(this)),this.smartTextarea.observeEvent("backspacePressed",this.triggerBackspacePressed.bind(this)),this.smartTextarea.observeEvent("delPressed",this.triggerDelPressed.bind(this)),this.setMinWidth())},e.onSelectedChange=function(){this.model.selected||this.smartTextarea.blur()},e.onMouseSelect=function(e){e.wasHandled()||(e.handle(),this.model.setProperty("selected",!0))},e.isFocused=function(){return 0!==t(document.activeElement).closest(this.$()).length},e.addFocus=function(e){this.smartTextarea.addFocus(e)}});return a}),define("loadcss!css/expressions.table",function(){}),define("expressions/tables/div-cell-view",["require","pjs","underscore_view"],function(e){var t=e("pjs"),n=e("underscore_view"),i=t(n,function(e,t){e.init=function(){t.init.call(this)},e.lookupCellPosition=function(){}});return i}),define("template!table_cell_body",["underscore"],function(_){return function(obj){var __p="";Array.prototype.join;with(obj||{})__p+='<div class="dcg-empty dcg-cell">\n  <div class="dcg-inner-border"></div>\n  <span class="dcg-error-indicator dcg-do-not-blur tipsy-sticky" handleevent="true">\n  </span>\n\n  <span class="dcg-math-field dcg-cell-math-content"></span>\n  <div class="dcg-empty-line"></div>\n</div>\n';return __p}}),define("expressions/tables/base-cell-view",["require","pjs","./div-cell-view","template!table_cell_body","lib/aria","i18n","jquery","underscore"],function(e){var t=e("pjs"),n=e("./div-cell-view"),i=e("template!table_cell_body"),r=e("lib/aria"),s=e("i18n"),a=e("jquery"),o=e("underscore"),c=t(n,function(e,t){e.template=i,e.init=function(e,n){t.init.call(this),this.model=e,this.tableView=n,this.model.observe("index.cellview",this.setAriaCoordinates.bind(this)),this.__renderedDisabled=!1,this.__renderedValue="",this.__renderedError=""},e.destruct=function(){this.model.unobserve(".cellview")},e.setAriaCoordinates=function(){this.mathField&&this.mathField.setAriaLabel(this.getAriaCoordinateString())},e.getAriaCoordinateString=function(){var e=this.lookupCellPosition(),t=e.row,n=e.column+1;return this.tableView.t("Row __row__ Col __column__",{row:t,column:n})},e.updateStaticValueAria=function(){if(this.mathField||this.staticValue){var e=a(this.staticValue.el()),t=this.getAriaCoordinateString()+": "+this.model.value+" "+this.tableView.t("read only").replace(/ +/gi," ").trim();e.attr("aria-label",t)}},e.lookupCellPosition=function(){var e=this.model.column.cells,t=this.model;return{row:o.indexOf(e,t)+1,column:this.model.column.index}},e.onValueChange=function(){var e=this.model.value;this.$().toggleClass("dcg-empty",!e),this.mathField&&this.__renderedValue!==e&&(this.__renderedValue=e,this.__renderedDisabled?(this.staticValue.latex(e),this.updateStaticValueAria()):this.mathField.latex(e))},e.onDisabledChange=function(){var e=!!this.model.column.disabled;this.mathField&&this.__renderedDisabled!==e&&(this.__renderedDisabled=e,this.$().toggleClass("dcg-non-editable",!!e),e?(a(this.mathField.el()).before(this.staticValue.latex(this.model.value||"").el()).detach(),this.updateStaticValueAria()):a(this.staticValue.el()).before(this.mathField.latex(this.model.value||"").el()).detach())},e.onErrorChange=function(){var e=this.model.error?s.unpack(this.model.error):"";this.$error&&this.__renderedError!==e&&(this.__renderedError=e,this.mathField&&this.mathField.setAriaPostLabel(e),r.alert(e),this.$error.attr("tooltip",e),this.$().toggleClass("dcg-error",!!e))}});return c}),define("expressions/tables/cell-view",["require","pjs","./base-cell-view","mathquill","jquery"],function(e){var t=e("pjs"),n=e("./base-cell-view"),i=e("mathquill"),r=e("jquery"),s=t(n,function(e,t){e.init=function(e,n){t.init.call(this,e,n),this.model.observe("value.cellview",this.onValueChange.bind(this)),this.model.observe("error.cellview",this.onErrorChange.bind(this)),this.model.column.observe("disabled."+this.guid,this.onDisabledChange.bind(this))},e.destruct=function(){this.model.unobserve(".cellview"),this.model.column.unobserve("disabled."+this.guid)},e.didInsertElement=function(){t.didInsertElement.call(this),this.$error=this.$(".dcg-error-indicator"),this.mathField=i.MathField(this.$(".dcg-math-field")[0]),this.setAriaCoordinates(),this.staticValue=i.StaticMath(r('<span tabindex=0 class="dcg-cell-math-content">')[0]),this.onDisabledChange(),this.onValueChange(),this.onErrorChange();var e=this;this.$().on("focus focusin",".dcg-math-field",function(){e.setAriaCoordinates()}),this.$().on("blur focusout",".dcg-math-field",function(){e.mathField.clearSelection()}),this.$().on("focus focusin",".dcg-cell-math-content",function(){e.updateStaticValueAria()}),this.$().on("render",".dcg-math-field",function(){function t(){var e=o.getItemById(s),t=e.columns[a.column];return t.cells[a.row-1]}var n=e.model.value,r=i(this).latex();if(n!==r){e.__renderedValue=r;var s=e.model.column.table.id,a=e.lookupCellPosition(),o=e.tableView.listView.model;o.undoRedo.performAndAddTransaction({undo:function(){var e=t();e.setProperty("value",n),e.column.table.requestParse()},redo:function(){var e=t();e.setProperty("value",r),e.column.table.requestParse()}})}})}});return s}),define("template!table_cell_header",["underscore"],function(_){return function(obj){var __p="";Array.prototype.join;with(obj||{})__p+='<div class="dcg-cell dcg-table-header">\n  <div class="dcg-inner-border"></div>\n  <span class="template-icon"></span>\n  <span class="dcg-math-field dcg-cell-math-content"></span>\n  <span class="dcg-drag-icon">\n    <i class="dcg-icon-move"></i>\n    <i class="dcg-icon-move-horizontal"></i>\n    <i class="dcg-icon-move-vertical"></i>\n  </span>\n  <div class="dcg-empty-line"></div>\n</div>\n';return __p}}),define("template!table_icon",["underscore"],function(_){return function(obj){var __p="";Array.prototype.join;with(obj||{})__p+='<span class="dcg-icon-box dcg-variable-errortooltip tipsy-sticky dcg-action-icon dcg-do-not-blur" \n      handleevent="true"\n      disablescroll="true"\n>\n  <span class="dcg-icon dcg-graph-icon dcg-variable-colorcss">\n    <i class=\'dcg-icon-hidden\'></i>\n  </span>\n</span>';return __p}}),define("template!table_column_menu",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="<div class='dcg-table-column-menu dcg-options-menu'>\n  <div class='dcg-triangle'></div>\n  <div class='dcg-styles-div'>\n    <div class='dcg-title'>"+(null==(__t=t("style:"))?"":_.escape(__t))+"</div>\n    <div>\n      <span class='dcg-columnmode-option dcg-graph-icon dcg-table-points dcg-variable-colorcss' mode=\"POINTS\"></span>\n      <span class='dcg-columnmode-option dcg-graph-icon dcg-table-lines dcg-variable-colorcss' mode=\"LINES\"></span>\n      <span class='dcg-columnmode-option dcg-graph-icon dcg-table-points-and-lines dcg-variable-colorcss' mode=\"POINTS_AND_LINES\"></span>\n    </div>\n  </div>\n  <div class='dcg-drag-div'>\n    <div class='dcg-title'>"+(null==(__t=t("drag:"))?"":_.escape(__t))+"</div>\n    <div>\n      <span class='dcg-dragmode-option dcg-graph-icon dcg-variable-colorcss' mode=\"Y\"></span>\n      <span class='dcg-dragmode-option dcg-graph-icon dcg-variable-colorcss' mode=\"X\"></span>\n      <span class='dcg-dragmode-option dcg-graph-icon dcg-variable-colorcss' mode=\"XY\"></span>\n    </div>\n  </div>\n  <div class='dcg-colors-div'>\n    <div class='dcg-title'>"+(null==(__t=t("color:"))?"":_.escape(__t))+'</div>\n    <div class="template-colorsview"></div>\n  </div>\n</div>';return __p}}),define("expressions/tables/table_column_menu_view",["require","pjs","underscore_view","template!table_column_menu","jquery","graphing/dragmode","../color_menu_view","i18n"],function(e){var t=e("pjs"),n=e("underscore_view"),i=e("template!table_column_menu"),r=e("jquery"),s=e("graphing/dragmode"),a=e("../color_menu_view"),o=e("i18n"),c=t(n,function(e,t){e.template=i,e.init=function(e,n){t.init.call(this),this.column=n,this.parentView=e},e.getTemplateParams=function(){var e=this;return{t:function(t,n){return o.t(t,n,e.parentView.listView.graphSettings.language)}}},e.onLanguageChange=function(){this.rerender()},e.destruct=function(){this.column.unobserve(this.guid)},e.renderColorCSS=function(){var e=this.column.color;this.$(".dcg-variable-colorcss").css({"border-color":e,"background-color":e})},e.renderSelectedColumnMode=function(){if(this.$(".dcg-columnmode-option").removeClass("dcg-selected"),this.column.shouldGraph){var e=this.column.columnMode;this.$('.dcg-columnmode-option[mode="'+e+'"]').addClass("dcg-selected")}},e.renderSelectedDragMode=function(){this.$(".dcg-dragmode-option").removeClass("dcg-selected"),this.$('.dcg-dragmode-option[mode="'+this.column.dragMode+'"]').addClass("dcg-selected")},e.renderDragModeVisible=function(){this.$(".dcg-drag-div").toggle(!!this.column.draggable)},e.didCreateElement=function(){t.didCreateElement.call(this),this.$().on("dcg-tap",".dcg-columnmode-option",this.onSelectColumnMode.bind(this)),this.$().on("dcg-tap",".dcg-dragmode-option",this.onSelectDragMode.bind(this));var e=this,n=this.column;n.observeAndSync("color."+this.guid,function(){e.renderColorCSS()}),n.observeAndSync("dragMode."+this.guid,function(){e.renderSelectedDragMode()}),n.observeAndSync("draggable."+this.guid,function(){e.renderDragModeVisible()}),n.observeAndSync("columnMode."+this.guid+" shouldGraph."+this.guid,function(){e.renderSelectedColumnMode()});var i=a(this.column);i.replace(this.$(".template-colorsview"))},e.onSelectColumnMode=function(e){var t=r(e.target).closest(".dcg-columnmode-option").attr("mode");if(!this.column.hidden&&this.column.columnMode===t)return void this.column.setProperty("hidden",!0);this.column.setProperty("columnMode",t),this.column.setProperty("hidden",!1);var n=this.column.table.folder;n&&n.setProperty("hidden",!1)},e.onSelectDragMode=function(e){var t=r(e.target).closest(".dcg-dragmode-option").attr("mode");this.column.dragMode!==t?(this.column.setProperty("dragMode",t),this.column.setProperty("hidden",!1)):this.column.setProperty("dragMode",s.NONE)}});return c}),define("expressions/tables/table_icon_view",["require","../abstract_icon","pjs","template!table_icon","graphing/columnmode","./table_column_menu_view","jquery.handleevent","conditional_blur"],function(e){var t=e("../abstract_icon"),n=e("pjs"),i=e("template!table_icon"),r=e("graphing/columnmode"),s=e("./table_column_menu_view");e("jquery.handleevent");var a=e("conditional_blur"),o=n(t,function(e,t){e.template=i,e.init=function(e){t.init.call(this,e),this.column=this.model,this.tableView=e.tableView,this.listView=this.tableView.listView,this.column.observe("color.iconview",this.renderColorCSS.bind(this)),this.column.observe("error.iconview",this.onDisplayChange.bind(this)),this.column.observe("columnMode.iconview",this.onDisplayChange.bind(this)),this.column.observe("shouldGraph.iconview",this.onDisplayChange.bind(this)),this.tableView.observeEvent("hideContextMenu.iconview",this.hideOptions.bind(this))},e.destruct=function(){t.destruct.call(this),this.column.unobserve(".iconview"),this.tableView.unobserve(".iconview")},e.renderErrorShown=function(){this.$(".dcg-icon").toggleClass("dcg-error",!!this.errorShown),this.$().closest(".dcg-cell").toggleClass("dcg-error",!!this.errorShown)},e.renderColorCSS=function(){this.$(".dcg-variable-colorcss").css("border-color",this.column.color),this.$(".dcg-variable-colorcss").css("background",this.column.color)},e.toggleGraphShown=function(){return this.column.isGraphable&&!this.errorShown?this.model.table.folder&&this.model.table.folder.hidden?(this.model.table.folder.setProperty("hidden",!1),void this.column.setProperty("hidden",!1)):void this.column.setProperty("hidden",!this.column.hidden):void 0},e.didInsertElement=function(){function e(e){return e.wasLongheld()?void 0:r.optionsShown?void r.hideOptions():void(r.listView.editListMode?r.toggleOptions():r.toggleGraphShown())}function n(e){r.optionsShown||r.toggleOptions()}function i(e){r.optionsShown||1===e.touches.length&&a()}t.didInsertElement.call(this);var r=this;this.$(".dcg-action-icon").on("dcg-tap",e),this.$(".dcg-action-icon").on("dcg-longhold",n),this.$(".dcg-action-icon").on("dcg-tapstart",i),this.renderColorCSS(),this.onDisplayChange(),this.$icon=this.$(".dcg-icon")},e.createOptionsMenuView=function(){var e=s(this,this.column);e.appendTo(this.listView.$());var t=this.$(".dcg-icon-box"),n=t.offset(),i=this.listView.$().offset();return e.$().css({position:"absolute",top:n.top-i.top+"px",left:n.left-i.left+"px",display:"block"}),e},e.onDisplayChange=function(){if(t.onDisplayChange.call(this),this.$icon){var e=this.column.shouldGraph,n=this.column.columnMode,i=this.column.isGraphable,s="";this.error||!i?s="":e?n===r.POINTS?s="dcg-table-points":n===r.LINES?s="dcg-table-lines":n===r.POINTS_AND_LINES&&(s="dcg-table-points-and-lines"):s="dcg-graph-hidden",this.rendered_icon_class!==s&&(this.rendered_icon_class&&this.$icon.removeClass(this.rendered_icon_class),this.rendered_icon_class=s,s&&this.$icon.addClass(s))}}});return o}),define("expressions/tables/header-view",["require","pjs","./div-cell-view","template!table_cell_header","./table_icon_view","mathquill"],function(e){var t=e("pjs"),n=e("./div-cell-view"),i=e("template!table_cell_header"),r=e("./table_icon_view"),s=e("mathquill"),a=t(n,function(e,t){e.template=i,e.init=function(e,n){t.init.call(this),this.__renderedLatex="",this.model=e,this.tableView=n,this.model.observe("index.headerview",this.updateIndex.bind(this)),this.model.observe("latex.headerview",this.onLatexChange.bind(this)),this.model.observe("selected.headerview",this.onSelectedChange.bind(this))},e.onSelectedChange=function(){if(this.model.selected){var e=this.tableView;if(!e)return;e.selectCell(0,this.model.index)}},e.lookupCellPosition=function(){return{row:0,column:this.model.index}},e.destruct=function(){this.model.unobserve(".headerview")},e.updateIndex=function(){this.$().attr("index",this.model.index),this.setAriaCoordinates()},e.onLatexChange=function(){this.mathField&&this.__renderedLatex!==this.model.latex&&(this.__renderedLatex=this.model.latex,this.mathField.latex(this.model.latex))},e.renderDragMode=function(){this.$(".dcg-drag-icon").attr("dcg-drag-mode",this.model.dragMode),this.$(".dcg-drag-icon").css("color",this.model.color)},e.didInsertElement=function(){t.didInsertElement.call(this),0===this.model.index&&this.$().addClass("dcg-left"),this.mathField=s.MathField(this.$(".dcg-math-field")[0]);var e=this;this.$().on("blur focusout",".dcg-math-field",function(){e.mathField.clearSelection()}),this.$().on("render",".dcg-math-field",function(){var t=e.model.latex,n=s(this).latex();t!==n&&(e.__renderedLatex=n,e.model.setProperty("latex",n))}),this.iconView=r(this),this.iconView.replace(this.$(".template-icon")),this.onLatexChange(),this.updateIndex(),this.model.observeAndSync("dragMode color",this.renderDragMode.bind(this))},e.setAriaCoordinates=function(){if(this.mathField){var e=this.lookupCellPosition(),t=this.tableView.t("Column header __column__",{column:e.column+1});this.mathField.setAriaLabel(t)}}});return a}),define("expressions/tables/bottom-cell-view",["require","pjs","./base-cell-view","mathquill","jquery"],function(e){var t=e("pjs"),n=e("./base-cell-view"),i=e("mathquill"),r=e("jquery"),s=t(n,function(e,t){e.init=function(e,n){t.init.call(this,e,n),this.model.column.observe("disabled.cellview",this.onDisabledChange.bind(this))},e.destruct=function(){this.model.column.unobserve(".cellview")},e.didInsertElement=function(){t.didInsertElement.call(this),this.mathField=i.MathField(this.$(".dcg-math-field")[0]),this.setAriaCoordinates(),this.staticValue=i.StaticMath(r('<span tabindex=0 class="dcg-cell-math-content">')[0]),this.onDisabledChange();var e=this;this.$().on("focus focusin",".dcg-math-field",function(){e.setAriaCoordinates()}),this.$().on("blur focusout",".dcg-math-field",function(){e.mathField.clearSelection()}),this.$().on("focus focusin",".dcg-cell-math-content",function(){e.updateStaticValueAria()}),this.$().on("render",".dcg-math-field",function(){var t=i(this).latex();if(""!==t){i(this).latex("");for(var n=e.lookupCellPosition(),r=e.model.column.table,s=[],a=0;a<r.columns.length;a++)s[a]="";s[n.column]=t,r.insertRow(n.row-1,s),e.tableView.selectCell(n.row,n.column,!0)}})}});return s}),define("expressions/tables/right-header-view",["require","pjs","./div-cell-view","template!table_cell_header","mathquill"],function(e){var t=e("pjs"),n=e("./div-cell-view"),i=e("template!table_cell_header"),r=e("mathquill"),s=t(n,function(e,t){e.template=i,e.init=function(e,n){t.init.call(this),this.model=e,this.tableView=n,this.model.observe("index.rightheaderview",this.updateIndex.bind(this))},e.destruct=function(){this.model.unobserve(".rightheaderview")},e.updateIndex=function(){this.$().attr("index",this.model.index),this.setAriaCoordinates()},e.lookupCellPosition=function(){return{row:0,column:this.model.index}},e.didInsertElement=function(){t.didInsertElement.call(this),this.$().addClass("dcg-right"),this.$().append('<span class="dcg-fade-right"></span>'),this.mathField=r.MathField(this.$(".dcg-math-field")[0]),this.setAriaCoordinates();var e=this;this.$().on("blur focusout",".dcg-math-field",function(){e.mathField.clearSelection()}),this.$().on("render",".dcg-math-field",function(){var t=r(this).latex();if(t){r(this).latex("");var n=e.model.index;e.model.table.insertColumn(n,{latex:t}),e.tableView.selectCell(0,n,!0)}})},e.setAriaCoordinates=function(){if(this.mathField){var e=this.lookupCellPosition(),t=this.tableView.t("Column header __column__",{column:e.column+1});this.mathField.setAriaLabel(t)}}});return s}),define("template!table",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="",renderShell?__p+='\n\n<div class="dcg-expressionitem dcg-expressiontable dcg-shell">\n  <div class=\'dcg-shell\'>\n    <span class="dcg-tab">\n      <span class="dcg-num dcg-variable-index"></span>\n    </span>\n\n    <div class="dcg-expression-item-loading">\n    </div>\n  </div>\n</div>\n\n':(__p+='\n\n<div class="dcg-expressionitem dcg-expressiontable">\n\n  <div class=\'dcg-fade-container dcg-disable-horizontal-scroll-to-cursor\'>\n\n    <span class="dcg-main">\n      <div class="dcg-tabledata">\n      </div>\n    </span>\n\n    ',__p+='\n    <span class="dcg-fadeout"></span>\n    <i class="dcg-icon-remove dcg-top-level-delete dcg-action-delete" handleEvent="true"></i>\n  </div>\n\n  <span class="dcg-tab dcg-action-drag"\n        handleevent="true"\n        tapboundary="true"\n        disablescroll="true"\n  >\n    <span class=\'dcg-num dcg-variable-index\'></span>\n    <div class=\'dcg-tab-interior\'></div>\n  </span>\n\n  <span class=\'dcg-exp-actions\'>\n\n    <span\n      class="dcg-action-delete dcg-delete-btn dcg-tooltip"\n      handleEvent="true"\n      tooltip="'+(null==(__t=t("Delete"))?"":_.escape(__t))+"\"\n    >\n      <i class='dcg-icon-remove'></i></span>\n    </span>\n</div>\n\n"),__p+="\n";return __p}}),define("expressions/table_view",["require","loadcss!css/expressions.table","jquery","pjs","mathquill","jquery.handleevent","underscore","lib/aria","analytics/bugsnag-stub","i18n","keys","conditional_blur","./abstractitem_view","./tables/cell-view","./tables/header-view","./tables/bottom-cell-view","./tables/right-header-view","template!table"],function(e){e("loadcss!css/expressions.table");var t=e("jquery"),n=e("pjs"),i=e("mathquill");e("jquery.handleevent");var r=e("underscore"),s=e("lib/aria"),a=e("analytics/bugsnag-stub"),o=e("i18n"),c=e("keys"),l=e("conditional_blur"),u=e("./abstractitem_view"),h=e("./tables/cell-view"),d=e("./tables/header-view"),p=e("./tables/bottom-cell-view"),f=e("./tables/right-header-view"),m=e("template!table"),g=n(u,function(e,n){e.template=m,e.init=function(e,t){n.init.call(this,e,t),this.model.triggerRowRemoved=this.onRowRemoved.bind(this),this.model.triggerRowAdded=this.onRowAdded.bind(this),this.model.triggerColumnAdded=this.onColumnAdded.bind(this),this.model.triggerColumnRemoved=this.onColumnRemoved.bind(this),this.model.observe("selectedCell."+this.guid,this.onSelectedCellChange.bind(this))},e.t=function(e,t){return o.t(e,t,this.graphSettings.language)},e.destruct=function(){function e(){}this.model.unobserve("."+this.guid),this.model.triggerRowRemoved=e,this.model.triggerRowAdded=e,this.model.triggerColumnAdded=e,this.model.triggerColumnRemoved=e},e.getTemplateParams=function(){return{renderShell:this.model.renderShell}},e.onRowRemoved=function(e){if(this.rowViews){for(var t=e+1,n=0;n<this.rowViews[0].length;n++)this.rowViews[t][n].remove();this.$(".dcg-row:nth-of-type("+(t+1)+")").remove(),this.rowViews.splice(t,1),this.model.notifyPropertyChange("selectedCell")}},e.onRowAdded=function(e){if(this.rowViews){var n,i,r=e+1,s=this.model.columns,a=this.rowViews[0].length,o=t('<tr class="dcg-row">');o.insertAfter(this.$(".dcg-row:nth-of-type("+r+")"));for(var c=[],l=0;a>l;l++)n=s[l].cells[e],i=h(n,this),i.appendTo(o),c.push(i);this.rowViews.splice(r,0,c),this.listView.model.updateDrawOrder(),this.model.notifyPropertyChange("selectedCell")}},e.onColumnRemoved=function(e){if(this.rowViews){var t,n=this.rowViews.length;for(t=0;n>t;t++)this.rowViews[t][e].remove(),this.rowViews[t].splice(e,1);var i=this.selectedCell;i&&i.column>e?this.setProperty("selectedCell",{row:i.row,column:i.column-1}):i&&i.column===e&&(this.columns.length<=e?this.selectCell(i.row,i.column-1):this.selectCell(i.row,i.column)),this.listView.model.updateDrawOrder(),this.model.notifyPropertyChange("selectedCell")}},e.onColumnAdded=function(e){if(this.rowViews){var t,n,i=this.model.columns[e],r=i.cells,s=r.length;for(t=0;s>=t;t++)n=0===t?d(i,this):s>t?h(r[t-1],this):p(r[t-1],this),this.rowViews[t].splice(e,0,n),n.insertAfter(this.$(".dcg-row:nth-of-type("+(t+1)+") .dcg-cell:nth-of-type("+e+")")),window.rowViews=this.rowViews,window.columns=this.model.columns;this.listView.model.updateDrawOrder(),this.model.notifyPropertyChange("selectedCell")}},e.didCreateElement=function(){var e=this;this.$().on("focusin",function(){setTimeout(e.onFocusChange.bind(e),0)}),this.$().on("keydown",this.onMathQuillKeydownEvent.bind(this)),this.$().on("upPressed downPressed leftPressed rightPressed enterPressed backspacePressed delPressed",this.onMathQuillSpecialEvent.bind(this)),this.listView.observe("calcIsNarrow",function(){this.listView.calcIsNarrow||this.scrollLeft()}.bind(this))},e.didInsertElement=function(){if(n.didInsertElement.call(this),!this.model.renderShell){this.rowViews=[];var e,i,r,s,a=this.model.columns,o=a.length,c=a[0].cells.length;for(e=0;c>=e;e++){var l=t('<tr class="dcg-row">');for(l.appendTo(this.$(".dcg-tabledata")),this.rowViews[e]=[],i=0;o>i;i++)0===e?(r=a[i],s=o>i+1?d(r,this):f(r,this)):(r=a[i].cells[e-1],s=e===c?p(r,this):h(r,this)),s.appendTo(l),this.rowViews[e].push(s)}this.onSelectedCellChange()}},e.onSelectedCellChange=function(){if(this.rowViews){this.$(".dcg-tabledata .dcg-selected").removeClass("dcg-selected");var e=this.model.selectedCell,t=!!e&&e.row===this.model.columns[0].cells.length,n=!!e&&e.column===this.model.columns.length-1;if(this.$(".dcg-tabledata").toggleClass("dcg-focus-in-bottom-row",t),this.$(".dcg-tabledata").toggleClass("dcg-focus-in-right-column",n),e&&(e.column>=this.rowViews[0].length||e.row>=this.rowViews.length))return void(this.model.selectedCell=null);if(e){var i=this.rowViews[e.row][e.column];i.$().addClass("dcg-selected"),this.model.setProperty("selected",!0),this.ensureCellIsVisible(i)}else this.scrollLeft();if(e){var r=this.findCellMathContent(e.row,e.column).el();this.listView.onFocusIn({target:r})}else this.listView.onFocusOut();var s=e&&e.column+1===this.model.columns.length,a=e&&e.row===this.model.columns[0].cells.length;this.$().toggleClass("dcg-no-faded-h",!!s),this.$().toggleClass("dcg-no-faded-v",!!a),this.hideContextMenu();var o=this.model.selectedCell&&this.model.selectedCell.row===this.model.columns[0].cells.length;this.setProperty("lastRowSelected",o),this.checkFocusIsSelected()}},e.scrollLeft=function(){this.$(".dcg-main").css("transform","translateX(0)")},e.ensureCellIsVisible=function(e){if(this.listView.calcIsNarrow){var t=this.$(".dcg-main"),n=100,i=t.offsetParent().innerWidth(),r=t.outerWidth(),s=0;if(r>=i){var a=e.$().width(),o=t.parent().offset().left,c=e.$().position().left,l=i+o-n-a;c>l&&(s=l-c)}t.css("transform","translateX("+Math.round(s)+"px)")}},e.checkFocusIsSelected=function(){this.focusSelectTimeout&&clearTimeout(this.focusSelectTimeout),this.focusSelectTimeout=setTimeout(function(){var e=this.model.selectedCell,t=this.getCaretPosition();t&&!r.isEqual(t,e)&&a.notify("TableCellFocusError","Selected and focused table cells are different after 250 ms.",{focusedCell:t,selectedCell:e}),this.focusSelectTimeout=null}.bind(this),250)},e.onMouseSelect=function(e){if(!e.wasHandled()){e.handle();var n=t(e.originalEvent.target).closest(".dcg-cell"),i=n.find(".mq-editable-field");if(i.length)return void this.sendTapToMathQuill(e,i);var r=t(e.target),s=r.closest(".dcg-tabledata")[0];if(s&&e.target===s&&(s=null),!s)return document.activeElement&&l(),this.model.setProperty("selectedCell",null),void this.model.setProperty("selected",!0);var a=this.getNodesCellPosition(r);this.selectCell(a.row,a.column)}},e.getNodesCellPosition=function(e){var t=e.closest(".dcg-row").prevAll(".dcg-row").length,n=e.closest(".dcg-cell").prevAll(".dcg-cell").length;return{row:t,column:n}},e.getCaretPosition=function(){
return this.$().find(document.activeElement).length?this.getNodesCellPosition(t(document.activeElement)):null},e.findCell=function(e,t){return this.$(".dcg-row:nth-of-type("+(e+1)+") .dcg-cell:nth-of-type("+(t+1)+")")},e.findCellMathContent=function(e,t){return i(this.findCell(e,t).find(".dcg-cell-math-content")[0])},e.selectCell=function(e,n,r){if(!(0>e||0>n)){var s=this.findCellMathContent(e,n);if(s){var a={row:e,column:n};this.model.setProperty("selectedCell",a),s instanceof i.MathField?(s.focus(),r?s.moveToRightEnd():s.select()):s instanceof i.StaticMath&&t(s.el()).focus()}}},e.unfocus=function(){var e=document.activeElement;this.$().find(e).length&&e.blur()},e.processMissedKeyEvent=function(e){this.doKeyAction(c.lookup(e),e)},e.onMathQuillKeydownEvent=function(e){var t=this.$().find(document.activeElement);if(0!==t.length){var n=c.lookup(e);(t.hasClass("dcg-cell-math-content")||e.ctrlKey)&&this.doKeyAction(n,e)}},e.onMathQuillSpecialEvent=function(e){var t=e.type,n=t.slice(0,-"Pressed".length);n=n.charAt(0).toUpperCase()+n.slice(1),this.doKeyAction(n,e)},e.doKeyAction=function(e,n){n||(n=t.Event());var i=this.model.selectedCell,r=i?i.row:-1,a=i?i.column:-1,o=this.model.columns,l=o[0].cells.length,u=o.length,h=function(e,t){-1===e?this.triggerUpPressed():e>l?this.triggerDownPressed():(-1===t?(t=u-1,e--):t===u&&(e++,t=0),this.selectCell(e,t),n.preventDefault())}.bind(this),d=function(e){1>=l||(this.model.removeRow(r-1),this.selectCell(e,a),n.preventDefault())}.bind(this),p=function(e){0===a||2>=u||(this.model.removeColumn(a),this.selectCell(r,e),n.preventDefault())}.bind(this);if(n.ctrlKey){switch(e){case c.LEFT:h(r,0);break;case c.RIGHT:h(r,u-1);break;case c.UP:h(0,a);break;case c.DOWN:h(l-1,a)}if("H"===c.lookupChar(n)){n.preventDefault();var f=this.t("No header"),m=this.rowViews[0][a];if(m&&m.mathField){var g=m.mathField.mathspeak();f=""!==g?g:this.t("Header is empty")}s.alert(f)}}else switch(e){case c.LEFT:h(r,a-1);break;case c.RIGHT:h(r,a+1);break;case c.UP:h(r-1,a);break;case c.DOWN:h(r+1,a);break;case c.ENTER:if(r>=l)return this.triggerEnterPressed();if(a>0)return h(r+1,a);if(r===l-1)return this.model.insertRow(r,this.model.getAutofillValues(r)),this.selectCell(r+1,a);this.model.insertRow(r,a),this.selectCell(r+1,a);break;case c.BACKSPACE:0===r?0===a?this.triggerBackspacePressed():a===u-1||1===a&&3===u?h(0,a-1):p(a-1):0!==a?h(r,a-1):r===l?h(r-1,a):d(r-1);break;case c.DELETE:0===r?0===a?this.triggerDelPressed():u-1>a&&p(a):r>=l||d(r)}},e.onFocusChange=function(){this.model&&(this.model.setProperty("selectedCell",this.getCaretPosition()),this.model.list&&this.model.list.notifyPropertyChange("selectedItem"))},e.isFocused=function(){return!!this.model.selectedCell},e.addFocus=function(e,t,n){"cell"===e?this.selectCell(t,n):"end"!==e?this.selectCell(0,0):this.selectCell(this.model.columns[0].cells.length,0)}});return g}),define("template!folder",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="",__p+=renderShell?'\n\n<div class="dcg-do-not-blur dcg-expressionitem dcg-expressionfolder dcg-shell">\n  <div class=\'dcg-shell\'>\n    <span class="dcg-tab">\n      <span class="dcg-num dcg-variable-index"></span>\n    </span>\n\n    <div class="dcg-expression-item-loading">\n    </div>\n  </div>\n</div>\n\n':'\n\n<div class="dcg-do-not-blur dcg-expressionfolder dcg-expressionitem">\n  <div class="dcg-fade-container">\n\n    <span class="dcg-main">\n      <div class="dcg-caret-container dcg-action-toggle-folder-collapsed dcg-do-not-blur" handleEvent="true">\n        <i class="dcg-icon-caret-down" ></i>\n      </div>\n\n      <div class="dcg-smart-textarea-placeholder"></div>\n      <div class="dcg-action-toggle-secret-folder dcg-do-not-blur" handleEvent="true">\n        <span class="dcg-checkbox-box"><i class="dcg-icon-check"></i></span>\n        <span class="dcg-checkbox-label">'+(null==(__t=t("Hide this folder from students."))?"":_.escape(__t))+'</span>\n      </div>\n    </span>\n    <i class="dcg-icon-remove dcg-top-level-delete dcg-action-delete" handleEvent="true"></i>\n\n  </div>\n\n  <span class="dcg-tab dcg-action-drag"\n        handleEvent="true"\n        tapboundary="true"\n        disablescroll="true"\n  >\n    <span class="dcg-num dcg-variable-index"></span>\n    <div class="dcg-tab-interior">\n    <span class="dcg-action-toggle-folder-hidden dcg-graph-icon dcg-folder dcg-icon">\n      <i class="dcg-icon-hidden"></i>\n      <i class="dcg-icon-folder"></i>\n    </span>\n    </div>\n  </span>\n\n  <span class="dcg-exp-actions">\n    <span\n      class="dcg-action-delete dcg-delete-btn dcg-tooltip"\n      handleEvent="true"\n      tooltip="'+(null==(__t=t("Delete"))?"":_.escape(__t))+"\"\n    >\n      <i class='dcg-icon-remove'></i></span>\n    </span>\n  </span>\n\n</div>\n\n",__p+="\n";return __p}}),define("expressions/folder_view",["require","pjs","expressions/abstractitem_view","template!folder","./smart_textarea","jquery.handleevent"],function(e){var t=e("pjs"),n=e("expressions/abstractitem_view"),i=e("template!folder"),r=e("./smart_textarea");e("jquery.handleevent");var s=t(n,function(e,t){e.template=i,e.init=function(e,n){t.init.call(this,e,n),this.model=e,e.observe("hidden.folderView",this.onHiddenChanged.bind(this)),e.observe("secret.folderView",this.onSecretChanged.bind(this)),e.observe("collapsed.folderView",this.onCollapsedChanged.bind(this)),e.observe("selected.folderView",this.onSelectedChange.bind(this)),e.observe("count.folderView",this.onMemberIdsChange.bind(this)),this.smartTextarea=r(this.model.title,this.listView.graphSettings),this.model.observe("title.folderView",function(){this.smartTextarea.setProperty("text",this.model.title)}.bind(this)),this.smartTextarea.observe("text",function(){this.model.setProperty("title",this.smartTextarea.text)}.bind(this))},e.destruct=function(){this.model.unobserve(".folderView"),this.smartTextarea.destruct()},e.didInsertElement=function(){t.didInsertElement.call(this),this.graphSettings.config.observeAndSync("administerSecretFolders",this.renderAdministerSecretFolders.bind(this)),this.renderAdministerSecretFolders(),this.model.renderShell||(this.smartTextarea.replace(this.$(".dcg-smart-textarea-placeholder")),this.smartTextarea.observe("focused",function(){this.smartTextarea.focused&&this.model.setProperty("selected",!0)}.bind(this)),this.smartTextarea.observeEvent("enterPressed",this.triggerEnterPressed.bind(this)),this.smartTextarea.observeEvent("upPressed",this.triggerUpPressed.bind(this)),this.smartTextarea.observeEvent("downPressed",this.triggerDownPressed.bind(this)),this.smartTextarea.observeEvent("backspacePressed",this.triggerBackspacePressed.bind(this)),this.smartTextarea.observeEvent("delPressed",this.triggerDelPressed.bind(this)),this.setMinWidth(),this.$(".dcg-action-toggle-folder-collapsed").on("dcg-tap",this.toggleCollapsed.bind(this)),this.$(".dcg-action-toggle-folder-hidden").on("dcg-tap",this.toggleHidden.bind(this)),this.$(".dcg-action-toggle-secret-folder").on("dcg-tap",this.toggleSecret.bind(this)),this.onCollapsedChanged(),this.onHiddenChanged(),this.onSecretChanged(),this.onMemberIdsChange())},e.renderAdministerSecretFolders=function(){var e=this.graphSettings.config.administerSecretFolders;this.$(".dcg-action-toggle-secret-folder").toggle(!!e),this.$().toggleClass("dcg-secretFolder",this.model.secret&&!e)},e.onSelectedChange=function(){!this.selected&&this.$title&&this.smartTextarea.blur()},e.onMemberIdsChange=function(){this.$().toggleClass("dcg-has-items",this.model.count>0)},e.onProjectorModeChange=function(){this.smartTextarea.fitText()},e.onMouseSelect=function(e){e.wasHandled()||(e.handle(),this.model.setProperty("selected",!0))},e.toggleHidden=function(){this.model.setProperty("hidden",!this.model.hidden)},e.toggleSecret=function(){this.model.setProperty("secret",!this.model.secret)},e.toggleCollapsed=function(){this.model.setProperty("collapsed",!this.model.collapsed)},e.onHiddenChanged=function(){this.$().toggleClass("dcg-hidden",!!this.model.hidden)},e.onSecretChanged=function(){this.$(".dcg-action-toggle-secret-folder").toggleClass("dcg-checked",!!this.model.secret)},e.onCollapsedChanged=function(){this.$().toggleClass("dcg-collapsed",!!this.model.collapsed),this.model.collapsed||this.listView.triggerFolderOpened()},e.addFocus=function(e){this.smartTextarea.addFocus()}});return s}),define("loadcss!css/expressions.image",function(){}),define("loadcss!css/image_opacity_menu",function(){}),define("template!image_options_menu",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="<div class='dcg-exp-options-menu dcg-image-options-menu dcg-options-menu'>\n  <div class='dcg-triangle'></div>\n  <div class='dcg-opacities-div'>\n    <div class='dcg-opacities-menu'>\n      <div class='dcg-title'>opacity:</div>\n      <div class='dcg-opacities-menu'>\n      ",_.each([.2,.4,.6,.8,1],function(e){__p+='\n        <span class="dcg-opacity-option dcg-graph-icon"\n          image-opacity="'+(null==(__t=e)?"":_.escape(__t))+'"\n          handleevent="true">\n            <span class="dcg-image-thumb"\n              style="opacity: '+(null==(__t=e)?"":_.escape(__t))+"\">\n            </span>\n            <i class='dcg-icon-check'></i>\n        </span>\n      "}),__p+="\n      </div>\n    </div>\n  </div>\n</div>\n";return __p}}),define("expressions/image_options_view",["require","loadcss!css/image_opacity_menu","pjs","jquery","underscore_view","template!image_options_menu"],function(e){e("loadcss!css/image_opacity_menu");var t=e("pjs"),n=e("jquery"),i=e("underscore_view"),r=e("template!image_options_menu"),s=t(i,function(e,t){e.template=r,e.init=function(e){this.image=e,this.image.observe("opacity."+this.guid,this.renderSelectedOpacity.bind(this)),this.image.observe("hidden."+this.guid,this.renderSelectedOpacity.bind(this)),this.image.observe("image_url."+this.guid,this.renderImageURL.bind(this))},e.destruct=function(){this.image.unobserve("."+this.guid)},e.onSelectOpacity=function(e){var t=parseFloat(n(e.target).closest(".dcg-opacity-option").attr("image-opacity"));this.image.setProperty("hidden",!1),this.image.setProperty("opacity",t),this.image.folder&&this.image.folder.setProperty("hidden",!1)},e.renderSelectedOpacity=function(){var e=this.image.opacity;this.$(".dcg-opacity-option").removeClass("dcg-selected"),this.image.hidden||this.$('.dcg-opacity-option[image-opacity="'+e+'"]').addClass("dcg-selected")},e.renderImageURL=function(){this.image.image_url&&this.$(".dcg-image-thumb").css("background-image","url("+encodeURI(this.image.image_url)+")")},e.didInsertElement=function(){this.$().on("dcg-tap",".dcg-opacity-option",this.onSelectOpacity.bind(this)),this.renderSelectedOpacity(),this.renderImageURL()}});return s}),define("template!image_icon",["underscore"],function(_){return function(obj){var __p="";Array.prototype.join;with(obj||{})__p+='<span class="dcg-icon dcg-graph-icon dcg-variable-errortooltip tipsy-sticky">\n  <span class="dcg-image-thumb"></span>\n  <i class="dcg-icon-hidden"></i>\n</span>\n';return __p}}),define("expressions/image_icon_view",["require","pjs","expressions/abstract_icon","./image_options_view","template!image_icon","jquery.handleevent"],function(e){var t=e("pjs"),n=e("expressions/abstract_icon"),i=e("./image_options_view"),r=e("template!image_icon");e("jquery.handleevent");var s=t(n,function(e,t){e.template=r,e.init=function(e){t.init.call(this,e),this.expression=this.model,this.image=this.model,this.image.observe("opacity."+this.guid,this.onDisplayChange.bind(this)),this.image.observe("shouldGraph."+this.guid,this.onDisplayChange.bind(this)),this.image.observe("loaded."+this.guid,this.onDisplayChange.bind(this)),this.image.observe("error."+this.guid,this.onDisplayChange.bind(this)),this.image.observe("image_url."+this.guid,this.renderImageURL.bind(this)),this.parentView.observeEvent("hideContextMenu."+this.guid,this.hideOptions.bind(this))},e.destruct=function(){t.destruct.call(this),this.image.unobserve("."+this.guid),this.parentView.unobserve("."+this.guid)},e.renderImageURL=function(){this.image.image_url&&this.$imgThumb.css("background-image","url("+encodeURI(this.image.image_url)+")")},e.didInsertElement=function(){var e=this;t.didInsertElement.call(this),this.$icon=this.$(".dcg-icon"),this.$imgThumb=this.$icon.find(".dcg-image-thumb"),this.renderImageURL(),this.onDisplayChange();var n=function(t,n){if(!t.wasHandled("dragdrop")&&!t.wasLongheld()&&t.device===n){if(e.optionsShown)return e.toggleOptions(),!1;if(e.parentView.listView.editListMode)e.toggleOptions();else{if(e.errorShown)return;e.image.folder&&e.image.folder.hidden?(e.image.setProperty("hidden",!1),e.image.folder.setProperty("hidden",!1)):e.image.setProperty("hidden",!e.image.hidden)}}},i=function(t,n){t.device===n&&(t.handle("dcg-longhold"),e.toggleOptions())};this.$().closest(".dcg-action-icon-mouse").on("dcg-tap",function(e){n(e,"mouse")}),this.$().closest(".dcg-action-icon-touch").on("dcg-tap",function(e){n(e,"touch")}),this.$().closest(".dcg-action-icon-mouse").on("dcg-longhold",function(e){i(e,"mouse")}),this.$().closest(".dcg-action-icon-touch").on("dcg-longhold",function(e){i(e,"touch")})},e.createOptionsMenuView=function(){var e=this.parentView.listView,t=i(this.expression);t.appendTo(e.$());var n=this.$(".dcg-icon"),r=n.offset(),s=e.$().offset();return t.$().css({position:"absolute",top:r.top-s.top+"px",left:r.left-s.left+"px",display:"block"}),t},e.onDisplayChange=function(){if(t.onDisplayChange.call(this),this.$icon){var e="";this.image.loaded?this.error?e="":this.image.shouldGraph||(e="dcg-hidden"):e="dcg-loading-image",this.rendered_icon_class!==e&&(this.rendered_icon_class&&this.$icon.removeClass(this.rendered_icon_class),this.rendered_icon_class=e,e&&this.$icon.addClass(e)),e||this.$imgThumb.css("opacity",this.image.opacity)}}});return s}),define("template!image",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="",__p+=renderShell?'\n\n<div class="dcg-do-not-blur dcg-expressionitem expressionimage dcg-shell">\n  <div class=\'dcg-shell\'>\n    <span class="dcg-tab">\n      <span class="dcg-num dcg-variable-index"></span>\n    </span>\n\n    <div class="dcg-expression-item-loading">\n    </div>\n  </div>\n</div>\n\n':'\n\n<div class="dcg-do-not-blur dcg-expressionimage dcg-expressionitem">\n  <div class=\'dcg-fade-container\'>\n\n    <span class="dcg-main">\n      <div class="dcg-image-loading">Loading image...</div>\n      <div class="dcg-image-loaded">\n\n          <div class="dcg-smart-textarea-placeholder"></div>\n\n          <div class="dcg-do-blur" handleEvent="true">\n            <div class="dcg-edit-image dcg-variable-invalid dcg-desmos-input-container">\n              <div class="dcg-center-inputs">\n                '+(null==(__t=t("center:"))?"":_.escape(__t))+'\n                <span class="dcg-image-center">\\left(\\MathQuillMathField[x]{} , \\MathQuillMathField[y]{}\\right)</span>\n              </div>\n              <div class="dcg-size-inputs">\n                '+(null==(__t=t("size:"))?"":_.escape(__t))+'\n                <span class="dcg-image-size">\\MathQuillMathField[width]{} &times; \\MathQuillMathField[height]{}</span>\n              </div>\n            </div>\n          </div>\n\n      </div>\n    </span>\n    <span class="dcg-fadeout"></span>\n\n    <i class="dcg-icon-remove dcg-top-level-delete dcg-action-delete" handleEvent="true"></i>\n\n    <div class="dcg-template-bottom-container dcg-fixed-width-element">\n      <div class="dcg-template-bottom"></div>\n    </div>\n  </div>\n\n  <span class="dcg-tab dcg-action-drag dcg-action-icon-touch" handleEvent="true">\n    <span class=\'dcg-num dcg-variable-index\'></span>\n    <div class=\'dcg-tab-interior dcg-action-icon-mouse\'>\n      <span class="template-imageicon"></span>\n    </div>\n  </span>\n\n  <span class=\'dcg-exp-actions\'>\n    <span class="dcg-graphic" handleEvent="true"></span>\n    <span class="dcg-action-delete dcg-delete-btn" handleEvent="true"><i class=\'dcg-icon-remove\'></i></span>\n  </span>\n\n</div>\n\n',__p+="\n";return __p}}),define("expressions/image_view",["require","loadcss!css/expressions.image","jquery","underscore","pjs","mathquill","keys","./abstractitem_view","./image_icon_view","expressions/promptslider_view","conditional_blur","./smart_textarea","jquery.handleevent","template!image"],function(e){e("loadcss!css/expressions.image");var t=e("jquery"),n=e("underscore"),i=e("pjs"),r=e("mathquill"),s=e("keys"),a=e("./abstractitem_view"),o=e("./image_icon_view"),c=e("expressions/promptslider_view"),l=e("conditional_blur"),u=e("./smart_textarea");e("jquery.handleevent");var h=e("template!image"),d=i(a,function(e,i){e.template=h,e.init=function(e,t){i.init.call(this,e,t),this.model=e;var n=this;this.model.helpers.x.observe("formula."+this.guid,function(){setTimeout(function(){n.setProperty("doAnimate",!0)})}),this.smartTextarea=u(this.model.name,this.listView.graphSettings),this.model.observe("name."+this.guid,function(){this.smartTextarea.setProperty("text",this.model.name)}.bind(this)),this.smartTextarea.observe("text",function(){this.model.setProperty("name",this.smartTextarea.text)}.bind(this))},e.addFocus=function(e){this.smartTextarea.addFocus()},e.onSelectedChange=function(){if(!this.model.selected){var e=t(document.activeElement).closest(".mq-editable-field");e.closest(this.$()).length&&r(e[0]).blur()}},e.handleLeftPressed=function(e){var n=t(e.target).closest(".dcg-math-input")[0];this.$y[0]===n?r(this.$x[0]).focus():this.$height[0]===n&&r(this.$width[0]).focus()},e.handleRightPressed=function(e){var n=t(e.target).closest(".dcg-math-input")[0];this.$x[0]===n?r(this.$y[0]).focus():this.$width[0]===n&&r(this.$height[0]).focus()},e.handleDownPressed=function(e){var n=t(e.target).closest(".dcg-math-input")[0];this.$x[0]===n?r(this.$width[0]).focus():this.$y[0]===n&&r(this.$height[0]).focus()},e.handleUpPressed=function(e){var n=t(e.target).closest(".dcg-math-input")[0];this.$width[0]===n?r(this.$x[0]).focus():this.$height[0]===n&&r(this.$y[0]).focus()},e.handleKeydown=function(e){var t=s.lookup(e);t===s.ESCAPE&&l()},e.handleMathquillInput=function(e){var t=this.$(e.target).closest(".dcg-math-input"),n=r(t[0]).latex(),i=t.attr("limit");this.model.setProperty(i,n)},e.didFocusIn=!1,e.focusInMathquill=function(e){var t=this.$(e.target).closest(".dcg-math-input");t.hasClass("dcg-focus")||(t.addClass("dcg-focus"),r(t[0]).select(),setTimeout(function(){t.find(".mq-selection").length||r(t[0]).select()},1)),this.model.setProperty("selected",!0),this.didFocusIn=!0,this.$().addClass("dcg-input-focused");var n=this;setTimeout(function(){n.didFocusIn=!1})},e.focusOutMathquill=function(e){var t=this.$(e.target).closest(".mq-editable-field");t.removeClass("dcg-focus"),r(t[0]).clearSelection(),this.didFocusIn||this.$().removeClass("dcg-input-focused")},e.didInsertElement=function(){if(i.didInsertElement.call(this),!this.model.renderShell){this.smartTextarea.replace(this.$(".dcg-smart-textarea-placeholder")),this.smartTextarea.observe("focused",function(){this.smartTextarea.focused&&this.model.setProperty("selected",!0)}.bind(this)),this.smartTextarea.observeEvent("enterPressed",this.triggerEnterPressed.bind(this)),this.smartTextarea.observeEvent("upPressed",this.triggerUpPressed.bind(this)),this.smartTextarea.observeEvent("downPressed",this.triggerDownPressed.bind(this)),this.smartTextarea.observeEvent("backspacePressed",this.triggerBackspacePressed.bind(this)),this.smartTextarea.observeEvent("delPressed",this.triggerDelPressed.bind(this)),this.setMinWidth(),this.iconView=o(this),this.iconView.replace(".template-imageicon");var e=r.StaticMath(this.$(".dcg-image-center")[0]),s=r.StaticMath(this.$(".dcg-image-size")[0]);this.$x=t(e.innerFields.x.el()).attr("limit","x"),this.$y=t(e.innerFields.y.el()).attr("limit","y"),this.$width=t(s.innerFields.width.el()).attr("limit","width"),this.$height=t(s.innerFields.height.el()).attr("limit","height"),t(n.invoke(e.innerFields.concat(s.innerFields),"el")).on("focusin",this.focusInMathquill.bind(this)).on("focusout",this.focusOutMathquill.bind(this)).on("render",this.handleMathquillInput.bind(this)).on("leftPressed",this.handleLeftPressed.bind(this)).on("upPressed",this.handleUpPressed.bind(this)).on("downPressed",this.handleDownPressed.bind(this)).on("rightPressed",this.handleRightPressed.bind(this)).on("keydown",this.handleKeydown.bind(this)).addClass("dcg-math-field dcg-math-input"),this.renderX(),this.renderY(),this.renderWidth(),this.renderHeight(),this.renderInvalids(),this.renderLoaded(),this.renderVariables(),this.model.observe("loaded."+this.guid,this.renderLoaded.bind(this)),this.model.observe("variables."+this.guid,this.renderVariables.bind(this)),this.model.observe("selected."+this.guid,this.onSelectedChange.bind(this)),this.model.observe("x."+this.guid,this.renderX.bind(this)),this.model.observe("y."+this.guid,this.renderY.bind(this)),this.model.observe("width."+this.guid,this.renderWidth.bind(this)),this.model.observe("height."+this.guid,this.renderHeight.bind(this)),this.model.observe("errors."+this.guid,this.renderInvalids.bind(this))}},e.renderLoaded=function(){var e=this.model.loaded;this.$().toggleClass("dcg-loading",!e).attr("aria-hidden",!e),e&&(r(this.$(".dcg-image-center")[0]).reflow(),r(this.$(".dcg-image-size")[0]).reflow(),this.smartTextarea.renderText())},e.destruct=function(){this.model.unobserve("."+this.guid),this.model.helpers.x.unobserve("formula."+this.guid),this.smartTextarea.destruct(),this.optionsView&&(this.optionsView.remove(),this.optionsView=null),this.promptSliderView&&(this.promptSliderView.remove(),this.promptSliderView=null)},e.renderInvalids=function(){this.$x.toggleClass("dcg-invalid",!!this.model.errors.x),this.$y.toggleClass("dcg-invalid",!!this.model.errors.y),this.$width.toggleClass("dcg-invalid",!!this.model.errors.width),this.$height.toggleClass("dcg-invalid",!!this.model.errors.height)},e.renderX=function(){var e=this.model.x;r(this.$x[0]).latex()!==e&&r(this.$x[0]).latex(e)},e.renderY=function(){var e=this.model.y;r(this.$y[0]).latex()!==e&&r(this.$y[0]).latex(e)},e.renderWidth=function(){var e=this.model.width;r(this.$width[0]).latex()!==e&&r(this.$width[0]).latex(e)},e.renderHeight=function(){var e=this.model.height;r(this.$height[0]).latex()!==e&&r(this.$height[0]).latex(e)},e.renderVariables=function(){if(this.model.variables){var e=this.model.variables.length>0;this.promptSliderView&&!e?(this.removeViewFromBottom(this.promptSliderView),this.promptSliderView=null):!this.promptSliderView&&e&&(this.promptSliderView=this.createPromptSliderView(),this.addViewToBottom(this.promptSliderView)),this.promptSliderView&&this.promptSliderView.setProperty("variables",this.model.variables)}},e.createPromptSliderView=function(){return c(this)},e.onMouseSelect=function(e){e.wasHandled()||(e.handle(),this.model.setProperty("selected",!0))},e.isFocused=function(){return 0!==t(document.activeElement).closest(this.$()).length}});return d}),define("template!list",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div>\n  <div class="dcg-exppanel-outer">\n    <div class="dcg-exppanel-container">\n      <div class="dcg-exppanel dcg-disable-horizontal-scroll-to-cursor">\n\n        <div class=\'dcg-drop-image\'>\n          <span>'+(null==(__t=t("Drop Image Here"))?"":_.escape(__t))+'</span>\n        </div>\n\n        <div class="dcg-expressionlist" role=\'complementary\' aria-label=\'Expression List\'>\n          <span class="dcg-template-expressioneach"></span>\n          <div class="template-newexpression"></div>\n\n          <a class="dcg-expressions-branding" href="//www.desmos.com/" target="_blank">\n            <div class="dcg-powered-by" aria-label="powered by Desmos">'+(null==(__t=t("powered by"))?"":_.escape(__t))+'</div>\n            <i class="dcg-icon-desmos"></i>\n          </a>\n        </div>\n      </div>\n      <div class="dcg-expression-top-bar" role="toolbar" aria-label="Expression Bar">\n        <span\n          class=\'dcg-action-opendrawer dcg-hide-in-edit dcg-tooltip\'\n          handleEvent="true"\n          tooltip="'+(null==(__t=t("Open Graph (ctrl+o)"))?"":_.escape(__t))+'"\n          role="button"\n          tabindex=0\n          aria-label="'+(null==(__t=t("Open Graph"))?"":_.escape(__t))+"\"\n        >\n          <i class='dcg-icon-hamburger'></i>\n        </span>\n\n        <span\n          class='dcg-btn dcg-btn-light-gray dcg-pull-left dcg-hide-in-edit dcg-add-expression-btn dcg-action-add-expression dcg-tooltip dcg-do-not-blur'\n          handleEvent=\"true\"\n          tooltip=\""+(null==(__t=t("Add Item"))?"":_.escape(__t))+'"\n          role="button"\n          tabindex=0\n          aria-haspopup="true"\n          aria-expanded="false"\n          aria-label="'+(null==(__t=t("Add Item"))?"":_.escape(__t))+"\"\n        >\n          <i class='dcg-icon-plus'></i><i class='dcg-icon-caret-down'></i>\n        </span>\n\n        <span class='dcg-btn dcg-btn-red dcg-pull-left dcg-show-in-edit dcg-action-clearall' role=\"button\">\n          "+(null==(__t=t("Delete All"))?"":_.escape(__t))+"\n        </span>\n\n        <span class='dcg-btn dcg-btn-red dcg-pull-left dcg-show-in-edit dcg-action-reset' role=\"button\">\n          "+(null==(__t=t("Reset"))?"":_.escape(__t))+"\n        </span>\n\n        <span class='dcg-center-aligned dcg-show-in-edit'>\n          <span class='dcg-action-undo' tooltip=\""+(null==(__t=t("Undo (ctrl+z)"))?"":_.escape(__t))+'" role="button" tabindex=0 aria-disabled=true aria-label="'+(null==(__t=t("Undo"))?"":_.escape(__t))+"\">\n            <i class='dcg-icon-undo'></i>\n          </span>\n          <span class='dcg-action-redo' role=\"button\" tabindex=0 tooltip=\""+(null==(__t=t("Redo (ctrl+y)"))?"":_.escape(__t))+'" aria-disabled=true aria-label="'+(null==(__t=t("Redo"))?"":_.escape(__t))+"\">\n            <i class='dcg-icon-redo'></i>\n          </span>\n        </span>\n\n        <span class='dcg-offcenter-aligned dcg-hide-in-edit dcg-hide-in-edit'>\n          <span class='dcg-action-undo dcg-tooltip' tooltip=\""+(null==(__t=t("Undo (ctrl+z)"))?"":_.escape(__t))+'" role="button" tabindex=0 aria-disabled=true aria-label="'+(null==(__t=t("Undo"))?"":_.escape(__t))+"\"><i class='dcg-icon-undo'></i></span>\n          <span class='dcg-action-redo dcg-tooltip' tooltip=\""+(null==(__t=t("Redo (ctrl+y)"))?"":_.escape(__t))+'" role="button" tabindex=0 aria-disabled=true aria-label="'+(null==(__t=t("Redo"))?"":_.escape(__t))+"\"><i class='dcg-icon-redo'></i></span>\n        </span>\n\n        <span\n          class='dcg-resize-list-btn dcg-hide-in-edit dcg-action-hideexpressions dcg-tooltip'\n          tooltip=\""+(null==(__t=t("Hide List"))?"":_.escape(__t))+'"\n          role="button"\n          tabindex=0\n          aria-label="'+(null==(__t=t("Hide Expression List"))?"":_.escape(__t))+"\"\n        >\n          <i class='dcg-icon-hide'></i>\n        </span>\n\n        <span\n          class='dcg-btn dcg-btn-light-gray dcg-pull-right dcg-action-toggle-edit dcg-hide-in-edit dcg-tooltip dcg-do-not-blur' handleEvent=\"true\"\n          tooltip=\""+(null==(__t=t("Edit List"))?"":_.escape(__t))+'"\n          role="button"\n          aria-label="'+(null==(__t=t("Edit Expression List"))?"":_.escape(__t))+'"\n        >\n          <i class=\'dcg-icon-settings\' />\n        </span>\n        <span\n          class=\'dcg-btn dcg-btn-blue dcg-pull-right dcg-action-toggle-edit dcg-show-in-edit dcg-do-not-blur\'\n          handleEvent="true"\n          role="button"\n        >\n            '+(null==(__t=t("Done"))?"":_.escape(__t))+"\n        </span>\n      </div>\n\n    </div>\n  </div>\n\n  <div class='dcg-show-expressions-tab' role='complementary' aria-label='Show Expressions Tab' aria-hidden='true'>\n    <span\n      class='dcg-resize-list-btn dcg-action-showexpressions dcg-tooltip'\n      tooltip=\""+(null==(__t=t("Show List"))?"":_.escape(__t))+'"\n      role="button"\n      tabindex=0\n      aria-label="'+(null==(__t=t("Show List"))?"":_.escape(__t))+"\"\n    >\n      <i class='dcg-icon-show'></i>\n    </span>\n  </div>\n\n  <div class='dcg-graphpaper-opendrawer dcg-action-opendrawer '>\n    <i class='dcg-icon-hamburger'></i>\n  </div>\n</div>\n";return __p}}),define("expressions/list_view",["require","loadcss!css/expression_top_bar","loadcss!css/expressions","loadcss!css/expressions.icon","jquery","underscore","pjs","mathquill","tipsy","underscore_view","touchtracking","expressions/dragdrop_expressions","./add_expression","conditional_blur","keys","browser","i18n","scroll_helpers","jquery.handleevent","./new_expression","./expression","./expression_view","./text_view","./table_view","./folder_view","./image_view","template!list"],function(e){e("loadcss!css/expression_top_bar"),e("loadcss!css/expressions"),e("loadcss!css/expressions.icon");var t=e("jquery"),n=e("underscore"),i=e("pjs"),r=e("mathquill");e("tipsy");var s=e("underscore_view"),a=e("touchtracking"),o=e("expressions/dragdrop_expressions"),c=e("./add_expression"),l=e("conditional_blur"),u=e("keys"),h=e("browser"),d=e("i18n"),p=e("scroll_helpers");e("jquery.handleevent");var f=e("./new_expression"),m=e("./expression"),g=e("./expression_view"),v=e("./text_view"),y=e("./table_view"),b=e("./folder_view"),_=e("./image_view"),x=e("template!list"),w=i(s,function(e,i){e.__itemViews={},e.__latexChangeCallbacks=[],e.isTransient=!1,e.transientChildren=[],e.template=x,e.triggerClearGraph=function(){},e.triggerOpenDrawer=function(){},e.triggerResetGraph=function(){},e.onLatexChange=function(e){n.each(this.__latexChangeCallbacks,function(t){t(e)})},e.init=function(e,n,r,s){i.init.call(this),this.$root=n||t("body"),this.setProperty("scrollbarWidth",0),this.setProperty("minWidth",356),this.toastView=r,this.graphSettings=s,this.model=e,this.model.triggerItemInserted=this.onItemInserted.bind(this),this.model.triggerItemRemoved=this.onItemRemoved.bind(this),this.model.triggerItemMoved=this.onItemMoved.bind(this),this.model.triggerSetState=this.onSetState.bind(this),this.observe("itemFocused",this.renderItemFocused.bind(this)),this.observe("editListMode",this.renderEditListMode.bind(this)),this.graphSettings.observeAndSync("defaultState",this.renderResetBtn.bind(this)),this.model.observe("selectedItem",this.ensureActiveChildIsVisible.bind(this)),this.dragdrop_expressions=o(this),this.createAllItemViews(),this.__measureVisibleRequested=!1,this.__renderRequested=!1,this.__firstVisibleIndex=0,this.__lastVisibleIndex=1/0},e.getTemplateParams=function(){var e=this;return{t:function(t,n){return d.t(t,n,e.graphSettings.language)}}},e.tick=function(e){this.__measureVisibleRequested&&this._measureVisibleExpressions(),this.__renderRequested&&this._renderExpression(),this.__sliderBeingSlid&&this.__sliderBeingSlid.tick()},e.registerSliderBeingSlid=function(e){this.__sliderBeingSlid=e},e.unregisterSliderBeingSlid=function(e){this.__sliderBeingSlid===e&&(this.__sliderBeingSlid=void 0)},e.renderResetBtn=function(){this.$(".dcg-expression-top-bar").toggleClass("dcg-has-reset-state",!!this.graphSettings.defaultState)},e.computeTransient=function(){this.setProperty("transient",this.transientChildren.length>0)},e.padLastExpression=function(e){var t=this.$(".dcg-expressionitem.dcg-new-expression");t.css("margin-bottom",+e+"px")},e.unpadLastExpression=function(){var e=this.$(".dcg-expressionitem.dcg-new-expression");e.css("margin-bottom","0"),this.recalculateScrollbarWidth()},e.padLastExpressionUntilTapEnd=function(e){var n=this;this.padLastExpression(e),t(document).on("dcg-tap.animating-bottom",function(){0===n.$(".dcg-exp-options-menu").length&&(n.unpadLastExpression(),t(document).off("dcg-tap.animating-bottom"))})},e.minWidthHasBeenSet=!1,e.setMinWidth=function(e){if(this.$exps&&(e!==this.minWidth||!this.minWidthHasBeenSet)){this.minWidthHasBeenSet=!0,this.setProperty("minWidth",e);
var t={minWidth:e};this.itemFocused||(t.maxWidth=e),this.$exppanelContainer.css(t)}},e.updateAllViewWidths=function(){n.each(this.__itemViews,function(e){e.setMinWidth()})},e.recalculateScrollbarWidth=function(){var e=this.$(".dcg-exppanel").width()-this.$(".dcg-expressionlist").width();e=Math.max(e,0),this.setProperty("scrollbarWidth",e)},e.updateWidth=function(){function e(e){var t=e.find(".dcg-main");if(t.length){var n=t.outerWidth()+t[0].offsetLeft;n>i&&(i=n)}}if(this.$exps){var n=this.$exppanelContainer,i=0;if(!this.calcIsNarrow&&this.graphSettings.config.graphpaper!==!1){var r=this.minWidth;this.$(".dcg-disable-horizontal-scroll-to-cursor").scrollLeft(0);var s=this.getSelectedView();s&&(this.itemFocused||s.model.isTable)&&e(s.$()),this.editListMode&&this.$(".dcg-expressiontable").each(function(){e(t(this))}),r>i&&(i=r),n.css("max-width",i),this.recalculateScrollbarWidth()}}},e.onItemInserted=function(e,t){if(this.$items){var n=this.createItemView(t);n&&(0===e?n.prependTo(this.$items):e===this.model.getItemCount()-1?n.appendTo(this.$items):n.insertAfter(this.$items.children(":nth-child("+e+")")),this.editListMode&&(n.$().css({transform:"scale(0,0)",opacity:0}),setTimeout(function(){n.$().css({transition:".2s",opacity:1,transform:""})},1),setTimeout(function(){n.$().css({transition:"none"})},300))),this.updateWidth(),this.ensureActiveChildIsVisible()}},e.onItemRemoved=function(e,t){var n=String(t.id);t.unobserve(".listview");var i=this.__itemViews[n];i&&(i.remove(),delete this.__itemViews[n]),this.updateWidth()},e.onItemMoved=function(e,t){var n=this.getItemView(this.model.getItemByIndex(t).id);if(n){var i=this.$items;if(0===t)i.prepend(n.$());else if(t===this.model.getItemCount()-1)i.append(n.$());else{var r=t+(t>e?1:0);n.$().insertAfter(i.children(":nth-child("+r+")"))}}},e.onSetState=function(e){for(var t in this.__itemViews)this.__itemViews.hasOwnProperty(t)&&(this.__itemViews[t].unobserve(".listview"),this.__itemViews[t].remove());this.__itemViews={},this.createAllItemViews(),this.appendAllItemViews()},e.renderItemFocused=function(){this.$root.toggleClass("dcg-ITEM-FOCUSED",!!this.itemFocused)},e.instantiateItemView=function(e){return e.isExpression?g(e,this):e.isText?v(e,this):e.isTable?y(e,this):e.isFolder?b(e,this):e.isImage?_(e,this):void 0},e.createItemView=function(e){var t=this.instantiateItemView(e),i=String(e.id);if(t){this.__itemViews[i]=t;var r=this;t.triggerDelete=function(){r.onDelete(t)},t.triggerEnterPressed=function(){r.onEnterPressed(t)},t.triggerUpPressed=function(){r.onUpPressed(t)},t.triggerDownPressed=function(){r.onDownPressed(t)},t.triggerBackspacePressed=function(){r.onBackspacePressed(t)},t.triggerDelPressed=function(){r.onDelPressed(t)},t.observe("transient",function(e,t){t["transient"]?r.transientChildren.push(t):r.transientChildren=n(r.transientChildren).without(t),r.computeTransient()})}return t},e.createAllItemViews=function(){for(var e=this.model.getItemCount(),t=0;e>t;t++){var n=this.model.getItemByIndex(t);this.createItemView(n)}},e.onLanguageChange=function(){this.rerender()},e.measureVisibleExpressions=function(){this.__measureVisibleRequested=!0},e._measureVisibleExpressions=function(){this.__measureVisibleRequested=!1,this.$(".dcg-expression-top-bar").toggleClass("dcg-expressions-scrolled",this.$exppanel.scrollTop()>0);var e=this.model.__items.some(function(e){return e.renderShell});if(e){var t=this.$exppanel.offset().top,n=this.$exppanel.height(),i=t+n,r=this.expressionAtPoint(5,t),s=this.expressionAbovePoint(5,i);this.__firstVisibleIndex=r?r.index:0,this.__lastVisibleIndex=s?s.index:1/0,this.renderExpression()}},e.triggerFolderOpened=function(){this.measureVisibleExpressions()},e.renderExpression=function(){this.__renderRequested=!0},e._renderExpression=function(){this.__renderRequested=!1;for(var e=this.__firstVisibleIndex,t=this.graphSettings.config.useShellsOffscreen?this.__lastVisibleIndex:1/0,n=this.model.getItemByIndex(e);n&&(!n.renderShell||n.collapsedOrSecret);){if(e++,e>t)return;n=this.model.getItemByIndex(e)}n&&(n.setProperty("renderShell",!1),this.renderExpression())},e.appendAllItemViews=function(){if(this.$items){for(var e=this.model.getItemCount(),t=0;e>t;t++){var n=this.model.getItemByIndex(t),i=this.getItemView(n.id);i.appendTo(this.$items)}this.updateWidth(),this.measureVisibleExpressions()}},e.getItemView=function(e){return this.__itemViews[String(e)]},e.removeExpressionSynchronously=function(e){this.model.undoRedo.oneTransaction(function(){if(this.model.removeItemAt(e.model.index),this.model.hasNoVisibleExpressions()){var t=m(void 0,this.model);this.model.insertItemAt(this.model.getItemCount(),t)}}.bind(this))},e.onDelete=function(e){var t=.2;e.$().css({transition:t+"s",opacity:"0",transform:"scale(.1, .1)"}),setTimeout(function(){this.removeExpressionSynchronously(e)}.bind(this),1e3*t)},e.onUpPressed=function(e){0!==e.model.index&&(this.selectPrevExpression(e.model),this.getSelectedView().addFocus("end"))},e.onDownPressed=function(e){this.selectNextExpression(e.model),this.getSelectedView().addFocus("start")},e.onBackspacePressed=function(e){if(1!==this.model.getItemCount()||!e.model.isExpression){var t=e.model.isText,n=this.model.getItemByIndex(e.model.index+1);return!e.model.folder||n&&n.folder?(this.upwardDeleteExpression(e),t&&h.IS_IPAD&&h.IS_IN_IFRAME?void this.model.setSelected(null):void this.getSelectedView().addFocus("end")):void e.model.folder.removeItem(e.model)}},e.onDelPressed=function(e){1===this.model.getItemCount()&&e.model.isExpression||(this.downwardDeleteExpression(e),this.getSelectedView().addFocus("start"))},e.onEnterPressed=function(e){if(e.model.isText&&h.IS_IPAD&&h.IS_IN_IFRAME)return l(),void this.model.setSelected(null);var t=m({selected:!0},this.model),i=this,r=e.model.index+1;e.model.isFolder&&e.model.collapsed&&(r+=n(e.model.memberIds).keys().length),i.model.undoRedo.oneTransaction(function(){i.model.insertItemAt(r,t),e.model.isFolder&&!e.model.collapsed&&e.model.addItem(t),e.model.folder&&e.model.folder.addItem(t)}),this.getSelectedView().addFocus()},e.expressionsVisible=!0,e.hideExpressions=function(){this.model.setSelected(null),l(),this.setProperty("needsFakeKeypad",!1),this.setProperty("expressionsVisible",!1)},e.showExpressions=function(){this.setProperty("expressionsVisible",!0),l()},e.renderEditListMode=function(){var e=this.$root,n=this;this.editListMode?(e.addClass("dcg-EDIT-LIST-MODE"),this.model.setSelected(null),t(document).on("dcg-tapstart.edit-list-mode",function(e){0===t(e.target).closest(".dcg-exppanel").length&&0===t(e.target).closest(".dcg-options-menu").length&&0===t(e.target).closest(".dcg-expression-top-bar").length&&n.setProperty("editListMode",!1)})):(e.removeClass("dcg-EDIT-LIST-MODE"),t(document).off(".edit-list-mode"))},e.handleFocusChange=function(e){var n=t(e),i=0!==n.closest(".mq-math-mode").length,s=0!==n.closest(".mq-editable-field").length,a=0!==n.closest(".mq-math-mode:not(.mq-editable-field)").find(".mq-editable-field").length,o=0!==n.closest(".dcg-math-input").length,c=0!==n.closest(".dcg-expressiontext").length,l=0!==n.closest(".dcg-expressionfolder").length;!s&&i&&a&&(i=!1,s=!1,o=!1),!o&&(i||s||c||l)&&this.setProperty("editListMode",!1),this.setProperty("itemFocused",i||s),this.setProperty("needsFakeKeypad",i&&s);var u;if(s){var h=n.closest(".dcg-template-mathquill")[0];u=h?r(h)||void 0:void 0}this.setProperty("focusedMathQuill",u)},e.onFocusIn=function(e){this.expressionsVisible||this.showExpressions(),this.handleFocusChange(e.target),this.inAudioTraceMode&&this.audiograph&&this.audiograph.exitAudioTrace(),clearTimeout(this.fakeKeypadTimeout)},e.onFocusOut=function(){clearTimeout(this.fakeKeypadTimeout),this.fakeKeypadTimeout=setTimeout(function(){this.handleFocusChange(document.activeElement)}.bind(this),0)},e.offset=function(){return this.$exps.offset()},e.setBottom=function(e){if(this.$exps){var t=parseFloat(this.$exps.css("bottom").slice(0,-2));isFinite(t)||(t=0),this.$exps.css("bottom",e+"px"),0===e&&a.isTapActive()&&this.padLastExpressionUntilTapEnd(t),this.recalculateScrollbarWidth()}},e.didCreateElement=function(){var e=this,r=this.model;i.didCreateElement.call(this),this.$exps=this.$(".dcg-exppanel-outer"),this.addExpressionView=c(this,this.$root,this.graphSettings,this.toastView),this.addExpressionView.setPointTo(this.$(".dcg-action-add-expression .dcg-icon-caret-down")),this.addExpressionView.appendTo(this.$exps),this.addExpressionView.setupOpenButton(this.$(".dcg-action-add-expression"),"dcg-tap"),this.observe("scrollbarWidth minWidth",this.updateAllViewWidths.bind(this)),this.$exps.tipsy({fade:"fast",title:"tooltip",wait:500,delegate:".dcg-tooltip"}),this.$(".dcg-action-opendrawer").on("dcg-tap",function(){this.triggerOpenDrawer()}.bind(this)),this.$exppanelContainer=this.$(".dcg-exppanel-container"),this.$exppanel=this.$(".dcg-exppanel"),this.$items=this.$(".dcg-template-expressioneach"),this.appendAllItemViews();var s=n.debounce(this.measureVisibleExpressions.bind(this),200);this.$exppanel.on("scroll",s),this.$exppanel.on("dcg-tapstart",function(e){"mouse"!==e.device&&0===t(e.target).closest(".dcg-expressionitem").length&&l()}),this.$exppanel.on("keypress",this.ensureActiveChildIsVisible.bind(this)),this.$(".dcg-expression-top-bar").on("dcg-tapstart",function(e){e.wasHandled()||r.setSelected(null)}),this.$exps.on("dcg-tap",".dcg-action-clearall",function(){e.triggerClearGraph()}),this.$exps.on("dcg-tap",".dcg-action-reset",function(){e.triggerResetGraph(),e.setProperty("editListMode",!1)}),r.undoRedo.changesCallbacks.push(function(){e.$(".dcg-action-undo").toggleClass("dcg-enabled",r.undoRedo.canUndo()),e.$(".dcg-action-undo").attr("aria-disabled",!r.undoRedo.canUndo()),e.$(".dcg-action-undo").toggleClass("dcg-tooltip",r.undoRedo.canUndo()),e.$(".dcg-action-redo").toggleClass("dcg-enabled",r.undoRedo.canRedo()),e.$(".dcg-action-redo").attr("aria-disabled",!r.undoRedo.canRedo()),e.$(".dcg-action-redo").toggleClass("dcg-tooltip",r.undoRedo.canRedo())}),this.$exps.on("dcg-tap",".dcg-action-undo",function(){r.undoRedo.undo()}),this.$exps.on("dcg-tap",".dcg-action-redo",function(){r.undoRedo.redo()}),this.$exps.on("focusout",this.onFocusOut.bind(this)),this.$exps.on("focusin",this.onFocusIn.bind(this)),this.$(".dcg-action-toggle-edit").on("dcg-tap",function(){e.setProperty("editListMode",!e.editListMode)}),this.$(".dcg-action-hideexpressions").on("dcg-tap",this.hideExpressions.bind(this)),this.$(".dcg-action-showexpressions").on("dcg-tap",this.showExpressions.bind(this)),t(document.documentElement).on("keydown",this.handleKeyDown.bind(this)),this.renderItemFocused(),this.renderEditListMode(),this.newExpressionView=f(this),this.newExpressionView.replace(this.$(".template-newexpression")),this.$exps.on("render",function(t){e.updateWidth()}),this.model.observe("selectedItem",function(){e.updateWidth()}),this.observe("editListMode itemFocused",function(){e.updateWidth()}),this.$exps.on("focusin",function(){setTimeout(function(){e.updateWidth()},0)})},e.didInsertElement=function(){this.updateWidth(),this.$exppanelContainer.addClass("dcg-do-animate")},e.getFirstVisibleItem=function(){var e=this.$exppanel.offset().top,t=this.expressionAtPoint(0,e);return t?(this.getItemView(t.id).$().offset().top<e-2&&(t=this.model.getItemByIndex(t.index+1)),t):this.model.getItemByIndex(0)},e.appendBlankExpression=function(){this.newExpressionView.newMath()},e.ensureActiveChildIsVisible=function(){if(this.$exps&&this.$exps.is(":visible")){var e,n,i=t(document.activeElement);if(this.model.selectedItem?(e=this.getItemView(this.model.selectedItem.id),e&&(n=e.$())):i&&(e=i.closest(".dcg-expressionitem"),e.length&&(n=e[0])),n){var r=i.closest(".mq-editable-field");if(e.model&&r.length){var s=e.model.isTable?60:90;return p.scrollVisible(r,this.$exppanel,s),!0}return i.closest(".dcg-expressionitem").length?(p.scrollVisible(i,this.$exppanel,90),!0):(p.scrollVisible(n,this.$exppanel,90),!0)}}},e.handleKeyDown=function(e){if(!this.inAudioTraceMode&&!t.contains(document.body,document.activeElement)&&!t(e.target).closest(".dcg-exppanel").length&&t.contains(document.documentElement,e.target)){var n=this.getSelectedView();if(n&&n.isFocused()&&n.model.isTable)return void n.processMissedKeyEvent(e);var i=u.lookup(e);if(n)switch(i){case u.UP:e.preventDefault(),this.selectPrevExpression(n.model);break;case u.DOWN:e.preventDefault(),this.selectNextExpression(n.model,!0);break;case u.ESCAPE:e.preventDefault(),this.model.setSelected(null);break;case u.RIGHT:case u.TAB:e.preventDefault(),n&&(n.model.isTable?n.addFocus("cell",0,0):n.addFocus("start"));break;case u.LEFT:e.preventDefault(),n&&(n.model.isTable?n.addFocus("cell",0,n.model.columns.length-1):n.addFocus("end"));break;case u.BACKSPACE:e.preventDefault(),n&&this.upwardDeleteExpression(n);break;case u.DELETE:e.preventDefault(),n&&this.downwardDeleteExpression(n);break;case u.ENTER:e.preventDefault(),n&&this.onEnterPressed(n);break;default:if(e.metaKey||e.ctrlKey||i===u.SHIFT||i===u.SPACEBAR)return;n&&(n.model.isTable||n.addFocus("end"))}}},e.getSelectedView=function(){var e=this.model.getSelected();if(e){var t=this.getItemView(e.id);return t}return null},e.upwardDeleteExpression=function(e){var t=e.model.index,n=this.model.getItemByIndex(this.findPrevSelectableIndex(t));this.removeExpressionSynchronously(e),n||(n=this.model.getFirstVisibleItem()),this.model.setSelected(n)},e.findPrevSelectableIndex=function(e){var t;do e--,t=this.model.getItemByIndex(e);while(t&&this.model.itemIsHidden(t));return t?e:void 0},e.findNextSelectableIndex=function(e){var t;do e++,t=this.model.getItemByIndex(e);while(t&&this.model.itemIsHidden(t));return t?e:void 0},e.downwardDeleteExpression=function(e){var t=e.model.index,n=this.model.getItemByIndex(this.findNextSelectableIndex(t));this.removeExpressionSynchronously(e),n||(n=this.model.getLastVisibleItem()),this.model.setSelected(n)},e.selectPrevExpression=function(e){if(e){var t=e.index,n=this.model.getItemByIndex(this.findPrevSelectableIndex(t));n&&(n.setProperty("selected",!0),t===this.model.getItemCount()-1&&e.isEmpty()&&this.model.removeItemAt(t))}},e.selectNextExpression=function(e,t){if(e){var n=e.index,i=this.model.getItemByIndex(this.findNextSelectableIndex(n));if(i)i.setProperty("selected",!0);else if(!t){var r=m({selected:!0},this.model);this.model.insertItemAt(this.model.getItemCount(),r)}}},e._getVisibleViews=function(){for(var e=[],t=0;t<this.model.getItemCount();t++){var n=this.model.getItemByIndex(t),i=this.getItemView(n.id);i&&i.$().is(":visible")&&e.push(i)}return e},e.expressionAtPoint=function(e,t){for(var n=this._getVisibleViews(),i=0,r=n.length-1;r>=i;){var s=i+Math.floor((r-i)/2),a=n[s],o=a.getBounds();if(o.top>t)r=s-1;else{if(!(o.bottom<t))return a.model;i=s+1}}return null},e.expressionAbovePoint=function(e,t){for(var n=this._getVisibleViews(),i=0,r=n.length-1,s=null;r>=i;){var a=i+Math.floor((r-i)/2),o=n[a],c=o.getBounds();c.top>t?r=a-1:(i=a+1,s=o.model)}return s},e.onProjectorModeChange=function(){for(var e in this.__itemViews)this.__itemViews.hasOwnProperty(e)&&this.__itemViews[e].onProjectorModeChange()},e.addFocusForKeypad=function(){var e=this.model.getSelected();if(e&&e.isExpression)return void this.getItemView(e.id).addFocus();if(!(e&&e.isTable&&this.itemFocused)){for(var t=this.getFirstVisibleItem();t&&!t.isExpression;)t=this.model.getItemByIndex(t.index+1);return t?void this.getItemView(t.id).addFocus():void this.appendBlankExpression()}}});return w}),define("main/instancehotkeys",["require","jquery","pjs","lib/aria","i18n","keys"],function(e){var t=e("jquery"),n=e("pjs"),i=e("lib/aria"),r=e("i18n"),s=e("keys"),a=n(function(e){e.init=function(e,n,i){this.$root=e||t("body"),this.expressionsModel=n,this.expressionsView=i,this.startListening()},e.t=function(e,t){return r.t(e,t,this.expressionsModel.graphSettings.language)},e.startListening=function(){this.isListening||(this.$root.on("keydown.dcg-instance-keyboard-listener",this.handleInstanceKeydown.bind(this)),this.isListening=!0)},e.stopListening=function(){this.isListening&&(this.$root.off("keydown.dcg-instance-keyboard-listener"),this.isListening=!1)},e.handleInstanceKeydown=function(e){if(e.ctrlKey&&(e.altKey||e.metaKey)&&!e.shiftKey){var t;if("E"===s.lookupChar(e)){e.preventDefault(),e.stopPropagation(),null===this.expressionsModel.getSelected()&&this.expressionsModel.setSelected(0);var n=this.expressionsView.getSelectedView();n?(i.alert(this.t("Expression list")),n.addFocus()):i.alert(this.t("Unable to focus expression list"))}else"X"===s.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),t=this.expressionsView.addExpressionView,t?(i.alert(this.t("Add expression")),t.newExpression()):i.alert(this.t("Unable to add expression"))):"O"===s.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),t=this.expressionsView.addExpressionView,t&&this.expressionsModel.graphSettings.config.notes?(i.alert(this.t("Add note")),t.newText(),this.focusLastExpression()):i.alert(this.t("Unable to add note"))):"F"===s.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),t=this.expressionsView.addExpressionView,t?(i.alert(this.t("Add folder")),t.newFolder(),this.focusLastExpression()):i.alert(this.t("Unable to add folder"))):"I"===s.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),t=this.expressionsView.addExpressionView,t?(i.alert(this.t("Add image")),t.selectImage()):i.alert(this.t("Unable to add image"))):"T"===s.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),t=this.expressionsView.addExpressionView,t?(i.alert(this.t("Add table")),t.newTableFromTap(e)):i.alert(this.t("Unable to add table"))):"G"===s.lookupChar(e)&&(e.preventDefault(),e.stopPropagation(),this.focusElement(this.$root.find(".dcg-action-settings"),this.t("Unable to activate graph settings")))}},e.focusLastExpression=function(){this.focusTimeout&&clearTimeout(this.focusTimeout),this.focusTimeout=setTimeout(function(){var e=this.expressionsModel.getItemByIndex(this.expressionsModel.getItemCount()-1),t=this.expressionsView.getItemView(e.id);t.addFocus(),this.focusTimeout=null}.bind(this),100)},e.focusElement=function(e,t){e.length?e.trigger("dcg-tap",["keyboard"]):t&&i.alert(t)}});return a}),define("loadcss!css/keypad",function(){}),define("template!keypad",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="<div class='dcg-keypad' role='complementary' aria-label='Keypad'>\n  <div class='dcg-keys-container dcg-retracted'>\n    <div class='dcg-keys-background dcg-do-not-blur'>\n      <div class='dcg-keys'>\n\n        <div class='dcg-functions-popover dcg-popover dcg-top'>\n          <div class='dcg-popover-interior'>\n            <div class='dcg-popover-header'>\n              <table><tr>\n              ",_.each(popups.functionsPopup,function(e,t){__p+='\n                <td>\n                  <span key="'+(null==(__t=e.tab.id)?"":_.escape(__t))+'" class="dcg-heading dcg-tappable dcg-btn-medium-gray'+(null==(__t="trig"==t?" dcg-selected":"")?"":_.escape(__t))+'">\n                    '+(null==(__t=e.tab.html)?"":__t)+"\n                  </span>\n                </td>\n              "}),__p+="\n              </tr></table>\n            </div>\n\n            ",_.each(popups.functionsPopup,function(e,t){__p+="\n              <table class='dcg-interior-buttons' section='"+(null==(__t=t)?"":_.escape(__t))+"'>\n                ","trig"==t&&(__p+="\n                  <tr class='dcg-section-headings'>\n                    <td>trig</td>\n                    <td>inverse</td>\n                    <td>hyperb</td>\n                  </tr>\n                "),__p+="\n                <tr>\n\n                ";var n=0;_.each(e.funcs,function(e){__p+="\n                  "+(null==(__t=n%3==0?"</tr><tr>":"")?"":__t)+"\n                  ",n++,__p+='\n                  <td>\n                    <span\n                      class="dcg-option dcg-tappable '+(null==(__t=e.aClass)?"":_.escape(__t))+" dcg-"+(null==(__t=e.id)?"":_.escape(__t))+'-key"\n                      key="'+(null==(__t=e.id)?"":_.escape(__t))+'"\n                    >\n                      '+(null==(__t=e.html)?"":__t)+"\n                    </span>\n                  </td>\n              "}),__p+="\n              </tr></table>\n            "}),__p+="\n          </div>\n          <div class='dcg-arrow'></div>\n        </div>\n\n        ",_.each(buttons,function(e,t){__p+='\n         <div class="dcg-'+(null==(__t=t)?"":_.escape(__t))+' dcg-main-keypad-section">\n           ',_.each(e,function(e){__p+='\n             <div class="dcg-row">\n               ',_.each(e.keys,function(e){__p+='<div\n                   class="dcg-cell '+(null==(__t=e.cellClass?e.cellClass:"")?"":_.escape(__t))+'"\n                 >\n                   ',e.html&&(__p+='\n                     <span\n                       role="button" class="'+(null==(__t=e.aClass)?"":_.escape(__t))+" dcg-"+(null==(__t=e.id)?"":_.escape(__t))+'-key"\n                       key="'+(null==(__t=e.id)?"":_.escape(__t))+'"\n                     >\n                       '+(null==(__t=e.html)?"":__t)+"\n                     </a>\n                   "),__p+="\n                 </div>"}),__p+="\n               <div style='clear:both'></div>\n             </div>\n           "}),__p+="\n         </div>\n        "}),__p+='\n        <div style=\'clear:both\'></div>\n      </div>\n\n      <div role="button" aria-label="'+(null==(__t=t("Hide Keypad"))?"":_.escape(__t))+"\" class='dcg-minimize-keypad dcg-tooltip' tooltip=\""+(null==(__t=t("Hide Keypad").split(" ").map(_.escape).join("&nbsp;"))?"":__t)+"\">\n        <i class='dcg-icon-keyboard'></i>\n        <i class='dcg-icon-caret-down'></i>\n      </div>\n    </div>\n  </div>\n\n  <div role=\"button\" aria-label=\""+(null==(__t=t("Show Keypad"))?"":_.escape(__t))+'" class="dcg-btn-flat-gray dcg-show-keypad dcg-do-not-blur dcg-tooltip" tooltip="'+(null==(__t=t("Show Keypad").split(" ").map(_.escape).join("&nbsp;"))?"":__t)+'">\n    <i class=\'dcg-icon-keyboard\'></i>\n    <i class="dcg-icon-caret-up dcg-do-not-blur"></i>\n  </div>\n</div>\n';return __p}}),define("text!data/keypad_keys.json",[],function(){return'{\n"trigFuncs":        ["sin","cos","tan","csc","sec","cot"],\n\n"oneArgFuncs":      ["ceil","floor","round","abs","sign","ln","log","exp", "total", "length", "mean", "median", "stdev", "stdevp", "var", "mad"],\n\n"twoArgFuncs":      ["min","max","lcm","gcd","mod", "nCr", "nPr", "cov", "corr", "quantile"],\n\n"tabs":             ["trig","stats", "misc"],\n\n"staticKeys": {\n  "unknown":          {"display":{"html":"?"},\n                      "action":{"cmd":"?"}},\n  "pi":               {"display":{"html":"&pi;"},\n                      "action":{"cmd":"\\\\pi"}},\n  "tau":               {"display":{"html":"&tau;"},\n                      "action":{"cmd":"\\\\tau"}},\n  "leftparen":        {"display":{"html":"("},\n                      "action":{"cmd":"("}},\n  "rightparen":       {"display":{"html":")"},\n                      "action":{"cmd":")"}},\n  "sqrt":             {"display":{"html":"&radic;"},\n                      "action":{"cmd":"\\\\sqrt"}},\n  "nthroot":         {"display":{"html":"n&radic;"},\n                      "action":{"custom": "nthroot"}},\n  "lt":               {"display":{"html":"&lt;"},\n                      "action":{"cmd":"<"}},\n  "gt":               {"display":{"html":"&gt;"},\n                      "action":{"cmd":">"}},\n  "le":               {"display":{"html":"&le;"},\n                      "action":{"cmd":"\\\\le"}},\n  "ge":               {"display":{"html":"&ge;"},\n                      "action":{"cmd":"\\\\ge"}},\n\n  "squared":          {"display":{"aClass":"dcg-exponent", "html":"a^2"},\n                      "action":{"custom":"squared"}},\n\n  "exponent":         {"display":{"aClass":"dcg-exponent", "html":"a^b"},\n                      "action":{"cmd":"^"}},\n  "subscript":        {"display":{"html":"a_b"},\n                      "action":{"cmd":"_"}},\n  "fact":             {"display":{"html":"n!"},\n                      "action":{"cmd":"!"}},\n  "theta":            {"display":{"html":"&theta;"},\n                      "action":{"cmd":"\\\\theta"}},\n\n  "openbracket":        {"display":{"html":"{ <span class=\'dcg-ghost-bracket\'>}</span>", "noMQ":true},\n                      "action":{"cmd":"{"}},\n  "closebracket":        {"display":{"html":"<span class=\'dcg-ghost-bracket\'>{</span> }", "noMQ":true},\n                      "action":{"cmd":"}"}},\n  "opensquare":        {"display":{"html":"[ <span class=\'dcg-ghost-bracket\'>]</span>", "noMQ":true},\n                      "action":{"cmd":"["}},\n  "closesquare":       {"display":{"html":"<span class=\'dcg-ghost-bracket\'>[</span> ]", "noMQ":true},\n                      "action":{"cmd":"]"}},\n  "leftparenghost":   {"display":{"html":"( <span class=\'dcg-ghost-bracket\'>)</span>", "noMQ":true},\n                      "action":{"cmd":"("}},\n  "rightparenghost":   {"display":{"html":"<span class=\'dcg-ghost-bracket\'>(</span> )", "noMQ":true},\n                        "action":{"cmd":")"}},\n  "colon":            {"display":{"html":":"},\n                      "action":{"cmd":":"}},\n  "pipes":            {"display":{"html":"|a|"},\n                      "action":{"cmd":"|"}},\n  "comma":            {"display":{"html":","},\n                      "action":{"cmd":","}},\n  "commaghost":       {"display":{"html":",\\\\ \\\\textcolor{#B5B5B5}{\'}"},\n                      "action":{"cmd":","}},\n  "prime":            {"display":{"html":"\'"},\n                      "action":{"cmd":"\'"}},\n  "primeghost":       {"display":{"html":"\\\\textcolor{#B5B5B5}{,}\\\\ \'"},\n                      "action":{"cmd":"\'"}},\n  "times":            {"display":{"html":"&times;"},\n                      "action":{"cmd":"*"}},\n  "plus":             {"display":{"html":"+"},\n                      "action":{"cmd":"+"}},\n  "divide":           {"display":{"html":"&divide;"},\n                      "action":{"cmd":"/"}},\n  "minus":            {"display":{"html":"&ndash;"},\n                      "action":{"cmd":"-"}},\n  "equals":           {"display":{"html":"="},\n                      "action":{"cmd":"="}},\n  "twiddle":           {"display":{"html":"~"},\n                      "action":{"cmd":"~"}},\n  "decimal":          {"display":{"html":"."},\n                      "action":{"cmd":"."}},\n\n  "backspace":        {"display":{"aClass":"dcg-btn-medium-gray",\n                                  "html":"<i class=\\"dcg-icon-delete\\"></i>",\n                                "colspan": 1.5\n                               },\n                      "action":{"key":"Backspace"}},\n  "enter":            {"display":{"aClass":"dcg-btn-medium-gray",\n                                  "html":"<i class=\\"dcg-icon-arrow-enter\\"></i>",\n                                  "colspan": 2,\n                                  "noMQ":true\n                                },\n                      "action":{"cmd":"\\n",\n                                "custom": "enter"}},\n  "toggleLetters":    {"display":{"aClass":"dcg-btn-medium-gray",\n                                  "html":"A B C",\n                                  "colspan":2},\n                      "action":{"changeLayout": "letters"}},\n  "toggleNumbers":    {"display":{"aClass":"dcg-btn-medium-gray",\n                                "html":"1 2 3",\n                                "colspan":2\n                               },\n                      "action":{"changeLayout":"mainNumbers"}},\n\n  "popupFunctions":  {"display":{"aClass":"dcg-btn-medium-gray", "html":"func<span class=\'dcg-hide-on-narrow\'>tion</span>s", "colspan":2},\n                      "action":{"popup": "functions"}},\n\n  "blank":            {"display":{},\n                      "action":{}},\n\n  "halfBlank":        {"display":{"colspan":0.5},\n                      "action":{}},\n\n  "left":             {"display":{"html":"<i class=\\"dcg-icon-arrow-left\\"></i>"},\n                      "action":{"key":"Left"}},\n  "up":               {"display":{"html":"&uarr;"},\n                      "action":{"key":"Up"}},\n  "right":            {"display":{"html":"<i class=\\"dcg-icon-arrow-right\\"></i>"},\n                      "action":{"key":"Right"}},\n  "down":             {"display":{"html":"&darr;"},\n                      "action":{"key":"Down"}},\n\n\n  "toggleCapital":    {"display":{"aClass":"dcg-btn-medium-gray",\n                                  "html":"<i class=\\"dcg-icon-shift\\"></i>",\n                                  "colspan":1.5},\n                                  "action":{"changeLayout": "capitalLetters"}},\n  "toggleLowercase":    {"display":{"aClass":"dcg-btn-medium-gray dcg-active",\n                                  "html":"<i class=\\"dcg-icon-shift\\"></i>",\n                                  "colspan":1.5},\n                                  "action":{"changeLayout": "letters"}},\n  "loga":             {"display":{"html":"log_a"},\n                      "action":{"custom":"loga"}},\n  "ddx":              {"display":{"html":"d/dx"},\n                      "action":{"custom":"d/dx"}},\n  "sum":              {"display":{"html":"\\\\sum"},\n                      "action":{"cmd":"\\\\sum"}},\n  "prod":             {"display":{"html":"\\\\prod"},\n                      "action":{"cmd":"\\\\prod"}},\n  "integral":         {"display":{"html":"\\\\int"},\n                      "action":{"cmd":"\\\\int"}},\n  "highlightedX":     {"display":{"html":"x", "aClass":"dcg-highlighted"},\n                      "action":{"cmd":"x"}},\n  "highlightedY":     {"display":{"html":"y", "aClass": "dcg-highlighted"},\n                      "action":{"cmd":"y"}}\n  }\n}\n'}),define("main/keypad_keys",["require","jquery","underscore","i18n","mathquill","text!data/keypad_keys.json"],function(e){var t,n=e("jquery"),i=e("underscore"),r=e("i18n"),s=e("mathquill"),a=JSON.parse(e("text!data/keypad_keys.json")),o=a.staticKeys;r.t("functions"),r.t("A B C"),r.t("more"),r.t("enter"),i.each(a.tabs,function(e){o[e+"Tab"]={display:{html:e},action:{tab:e}}}),i.each(a.oneArgFuncs,function(e){o[e]={display:{html:e},action:{func:e}}}),i.each(a.twoArgFuncs,function(e){o[e]={display:{html:e},action:{func:e,args:2}}}),i.each(a.trigFuncs,function(e){i.each([e,"arc"+e,e+"h"],function(e){o[e]={display:{html:e},action:{func:e}}})});var c;for(t=0;26>t;t++)c=String.fromCharCode(65+t),o[c]={display:{html:c},action:{cmd:c}};for(t=0;26>t;t++)c=String.fromCharCode(97+t),o[c]={display:{html:c},action:{cmd:c}};for(t=0;10>t;t++){var l=String.fromCharCode(48+t);o[l]={display:{html:l},action:{cmd:l}}}var u=function(e,t){var i=e.display,r=e.action;if(i.id=t,"cellClass"in i||(i.cellClass=""),"aClass"in i||(i.aClass=""),i.colspan)switch(i.cellClass&&(i.cellClass+=" "),i.colspan){case.5:i.cellClass+="dcg-halfwide";break;case 2:i.cellClass+="dcg-twowide";break;case 1.5:i.cellClass+="dcg-onepointfivewide"}-1===i.aClass.indexOf("dcg-btn-")&&(i.aClass=i.aClass?i.aClass+" dcg-btn-light-gray":"dcg-btn-light-gray"),i.html&&(i.aClass=i.aClass?i.aClass+" dcg-key":"dcg-key",i.aClass+=" dcg-tappable"),r.tab||r.key||r.popup||r.changeLayout||i.noMQ||!i.html||(i.mathquill=!0,i.html=s.StaticMath(n("<span>"+i.html+"</span>")[0]).html(),i.aClass+=" mq-math-mode")};return i.each(o,u),o}),define("main/keypad_view",["require","loadcss!css/keypad","jquery","mathquill","underscore","main/cookie","template!keypad","underscore_view","pjs","i18n","tipsy","main/keypad_keys"],function(e){e("loadcss!css/keypad");var t=e("jquery"),n=e("mathquill"),i=e("underscore"),r=e("main/cookie"),s=e("template!keypad"),a=e("underscore_view"),o=e("pjs"),c=e("i18n");e("tipsy");var l=e("main/keypad_keys"),u=o(a,function(e,a){e.template=s,e.init=function(e){a.init.call(this),this.keys=l,this.graphSettings=e,this.config=this.graphSettings.config,this.setupKeypad(),this.setLayout("mainNumbers"),this.setProperty("functionsOpen",!1),this.setProperty("isOpen",!1),
this.userMinimized=!1,this.editableViews=[]},e.getEditableViewThatNeedsKeypad=function(){for(var e=0;e<this.editableViews.length;e++)if(this.editableViews[e].needsFakeKeypad)return this.editableViews[e];return null},e.getActiveMathquill=function(){return n(t(document.activeElement).closest(".mq-editable-field")[0])},e.registerEditableView=function(e){this.editableViews.push(e),e.observe("needsFakeKeypad",this.onNeedsFakeKeypad.bind(this))},e.onNeedsFakeKeypad=function(){this.requestSetIsOpen(!!this.getEditableViewThatNeedsKeypad())},e.onLanguageChange=function(){this.rerender()},e.didCreateElement=function(){var e=this;e.setLayout(e.layout),e.$hideBtn=e.$(".dcg-minimize-keypad"),e.$showBtn=e.$(".dcg-show-keypad"),e.$funcPopover=e.$(".dcg-functions-popover"),e.$container=e.$(".dcg-keys-container"),e.$keys=e.$(".dcg-keys"),e.$funcBtn=e.$(".dcg-popupFunctions-key"),e.setTab("trig"),this.observeAndSync("isOpen",function(){e.$showBtn.toggle(!e.isOpen)}),this.observe("functionsOpen",this.renderFunctionsOpen.bind(this)),this.observe("graphpaperHeight",this.positionFunctionsPopup.bind(this)),this.$().tipsy({fade:"fast",title:"tooltip",wait:500,delegate:".dcg-tooltip",gravity:"s",offset:2}),e.$().on("dcg-tap",".dcg-tappable",function(n){var i=t(n.target).closest(".dcg-tappable");e.buttonClicked(i)}),e.$hideBtn.on("dcg-tap",function(){e.$hideBtn.attr("aria-hidden",!0),e.$showBtn.attr("aria-hidden",!1),e.userMinimized=!0,r.setCookie("keypadMinimized","true"),e._hideKeypad()}),e.$showBtn.on("dcg-tap",function(){if(e.$hideBtn.attr("aria-hidden",!1),e.$showBtn.attr("aria-hidden",!0),e.userMinimized=!1,r.setCookie("keypadMinimized","false"),e._showKeypad(),!e.getActiveMathquill())for(var t=0;t<e.editableViews.length;t++)e.editableViews[t].addFocusForKeypad&&e.editableViews[t].addFocusForKeypad()}),e.userMinimized="true"===r.getCookie("keypadMinimized")},e._hideKeypad=function(){clearTimeout(this.__showHideTimeout);var e=this;this.__showHideTimeout=setTimeout(function(){e.__showHideTimeout=null,e.setProperty("isOpen",!1),e.setProperty("functionsOpen",!1),e.$container.addClass("dcg-retracted").attr("aria-hidden",!0)})},e._showKeypad=function(){clearTimeout(this.__showHideTimeout);var e=this;this.__showHideTimeout=setTimeout(function(){e.__showHideTimeout=null,e.setLayout("mainNumbers"),e.setProperty("isOpen",!0),e.$container.removeClass("dcg-retracted").removeAttr("aria-hidden")})},e.requestSetIsOpen=function(e){(!this.userMinimized||this.isOpen)&&(e!==this.isOpen||this.__showHideTimeout)&&(e?this._showKeypad():this._hideKeypad())},e.getButton=function(e){return this.keys[e]||(e="unknown"),this.keys[e].display},e.buttonArray=function(e){var t=function(){return!0};return this.config.restrictedFunctions&&(t=function(e){return-1===["csc","sec","cot","arccsc","arcsec","arccot","csch","sech","coth","arccsch","arcsech","arccoth","mad","cov"].indexOf(e)}),i.map(i.filter(e.split(" "),t),this.getButton,this)},e.setupKeypad=function(){this.buttons={mainNumbersLeft:[{keys:this.buttonArray("highlightedX highlightedY squared exponent")},{keys:this.buttonArray("leftparen rightparen lt gt")},{keys:this.buttonArray("pipes comma le ge")},{keys:this.buttonArray("toggleLetters sqrt pi")}],numbersMiddle:[{keys:this.buttonArray("7 8 9 divide")},{keys:this.buttonArray("4 5 6 times")},{keys:this.buttonArray("1 2 3 minus")},{keys:this.buttonArray("0 decimal equals plus")}],numbersRight:[{keys:this.buttonArray("popupFunctions")},{keys:this.buttonArray("left right")},{keys:this.buttonArray("halfBlank backspace")},{keys:this.buttonArray("enter")}],letters:[{keys:this.buttonArray("q w e r t y u i o p")},{keys:this.buttonArray("a s d f g h j k l theta")},{keys:this.buttonArray("toggleCapital z x c v b n m backspace")},{keys:this.buttonArray("toggleNumbers subscript leftparenghost openbracket opensquare twiddle commaghost enter")}],capitalLetters:[{keys:this.buttonArray("Q W E R T Y U I O P")},{keys:this.buttonArray("A S D F G H J K L tau")},{keys:this.buttonArray("toggleLowercase Z X C V B N M backspace")},{keys:this.buttonArray("toggleNumbers exponent rightparenghost closebracket closesquare colon primeghost enter")}],noQwertyLetters:[{keys:this.buttonArray("a b c d e f g h i")},{keys:this.buttonArray("j k l m n o p q r")},{keys:this.buttonArray("s t u v w x y z backspace")},{keys:this.buttonArray("toggleNumbers subscript leftparenghost openbracket opensquare twiddle commaghost enter")}]},this.popups={functionsPopup:{trig:{tab:this.getButton("trigTab"),funcs:this.buttonArray("sin arcsin sinh cos arccos cosh tan arctan tanh csc arccsc csch sec arcsec sech cot arccot coth")},stats:{tab:this.getButton("statsTab"),funcs:this.buttonArray("total length mean median min max quantile stdev stdevp var cov corr mad nCr nPr fact twiddle")},misc:{tab:this.getButton("miscTab"),funcs:this.buttonArray("lcm gcd mod ceil floor round abs sign nthroot exp ln log loga ddx prime integral sum prod")}}}},e.getTemplateParams=function(){var e=this;return{buttons:this.buttons,popups:this.popups,t:function(t,n){return c.t(t,n,e.graphSettings.language)}}},e.height=function(){return this.isOpen?this.$container.height():0},e.setLayout=function(e){this.layout=e,this.$().removeClass("dcg-layout-letters dcg-layout-capitalLetters dcg-layout-mainNumbers dcg-layout-noQwertyLetters").addClass("dcg-layout-"+e)},e.setTab=function(e){var t=["trig","stats","misc"],n=this;i.each(t,function(e){n.$("[key="+e+"Tab]").removeClass("dcg-selected"),n.$("[section="+e+"]").attr("aria-hidden",!0).hide()}),this.$("[key="+e+"Tab]").addClass("dcg-selected"),this.$("[section="+e+"]").attr("aria-hidden",!1).show()},e.renderFunctionsOpen=function(){this.$funcBtn.toggleClass("dcg-active",this.functionsOpen).attr("aria-hidden",!this.functionsOpen),this.$funcPopover.toggle(this.functionsOpen).attr("aria-hidden",!this.functionsOpen),this.positionFunctionsPopup()},e.positionFunctionsPopup=function(){if(this.functionsOpen){var e=this.$funcPopover.find(".dcg-arrow");if(this.graphpaperHeight<525){this.$funcPopover.removeClass("dcg-top").addClass("dcg-left");var t=this.$container.outerHeight()-(this.$funcBtn.offset().top-this.$container.offset().top),n=t-this.$funcBtn.outerHeight()/2-2-10;e.css({left:"auto",bottom:n})}else this.$funcPopover.removeClass("dcg-left").addClass("dcg-top"),e.css({left:this.$funcPopover.width()-this.$funcBtn.width()/2,bottom:"auto"})}},e.buttonClicked=function(e){var n=this.$(e).attr("key"),i=this.keys[n].action;if(i.changeLayout)return this.setProperty("functionsOpen",!1),void(this.config.qwertyKeyboard||"letters"!=i.changeLayout?this.setLayout(i.changeLayout):this.setLayout("noQwertyLetters"));if(i.tab)return this.setTab(i.tab);if("functions"===i.popup)return this.setProperty("functionsOpen",!this.functionsOpen);this.setProperty("functionsOpen",!1);var r=this.getActiveMathquill();if(i.custom)switch(i.custom){case"enter":r.typedText("\n");break;case"loga":r.write("\\log_{}"),r.typedText("("),r.keystroke("Left"),r.keystroke("Down");break;case"nthroot":r.write("\\sqrt[]{}"),r.keystroke("Left"),r.keystroke("Left");break;case"squared":r.cmd("^"),r.cmd("2"),r.keystroke("Right");break;case"cubed":r.write("^{3}");break;case"d/dx":r.write("\\frac{d}{dx}")}else if(i.key)r.keystroke(i.key);else if(i.cmd)r.cmd(i.cmd);else if(i.func){var s="(";2===i.args&&(s="(,"),r.typedText(i.func+s),2===i.args&&r.keystroke("Left")}t(r.el()).trigger("render")}});return u}),define("migrations/0",["require","graphing/axisarrowmode"],function(e){function t(e){if(e.type){if(c.hasOwnProperty(e.type))return e.type;throw new Error("Invalid item type: '"+e.type+"'.")}return void 0!==e.text?"text":void 0!==e.columns||void 0!==e.headings?"table":"expression"}function n(e){return e.replace(/\\(total|length|mean|median|quantile|stdev|stddev|stdDev|stdevp|stddevp|stdDevP|var|variance|cov|corr|ceil|floor|round|abs|mod|lcm|mcm|mcd|nCr|nPr|signum|sign|arcsinh|arccosh|arctanh|arccsch|arcsech|arccoth|arccsc|arcsec|arccot)/g,"\\operatorname{$1}")}function i(e){var t={};for(var i in e)e.hasOwnProperty(i)&&("latex"===i?t[i]=n(e[i]):"values"===i?t[i]=e[i].map(n):t[i]=e[i]);return t}function r(e){var r,s=t(e),a={};switch(s){case"expression":for(r in e)e.hasOwnProperty(r)&&("latex"===r?a[r]=n(e[r]):a[r]=e[r]);return a.type=s,a;case"table":for(r in e)e.hasOwnProperty(r)&&("columns"===r?a[r]=e[r].map(i):a[r]=e[r]);return a.type=s,a;case"image":for(r in e)e.hasOwnProperty(r)&&("width"===r||"height"===r||"x"===r||"y"===r?a[r]=n(e[r]):a[r]=e[r]);return a.type=s,a;case"text":case"folder":for(r in e)e.hasOwnProperty(r)&&(a[r]=e[r]);return a.type=s,a}}function s(e){var t={};for(var n in e)e.hasOwnProperty(n)&&"xAxisArrows"!==n&&"yAxisArrows"!==n&&(t[n]=e[n]);return t.xAxisArrowMode=l[e.xAxisArrows||"none"],t.yAxisArrowMode=l[e.yAxisArrows||"none"],t}function a(e){if(e.version)throw new Error("Unexpected version: "+e.version);var t={};return t.graph=s(e.graph),t.expressions={list:e.expressions.list.map(r)},t.version=0,t}var o=e("graphing/axisarrowmode"),c={expression:!0,table:!0,image:!0,folder:!0,text:!0},l={none:o.NONE,both:o.BOTH,positive:o.POSITIVE};return a}),define("migrations/1",["require"],function(e){function t(e){return e.replace(/\\(sech|csch)/g,"\\operatorname{$1}")}function n(e){var n={};for(var i in e)e.hasOwnProperty(i)&&("latex"===i?n[i]=t(e[i]):"values"===i?n[i]=e[i].map(t):n[i]=e[i]);return n}function i(e){var i,r=e.type,s={};switch(r){case"expression":for(i in e)e.hasOwnProperty(i)&&("latex"===i?s[i]=t(e[i]):s[i]=e[i]);return s;case"table":for(i in e)e.hasOwnProperty(i)&&("columns"===i?s[i]=e[i].map(n):s[i]=e[i]);return s;case"image":for(i in e)e.hasOwnProperty(i)&&("width"===i||"height"===i||"x"===i||"y"===i?s[i]=t(e[i]):s[i]=e[i]);return s;case"text":case"folder":for(i in e)e.hasOwnProperty(i)&&(s[i]=e[i]);return s;default:throw new Error("Unexpected expression type: "+r)}}function r(e){if(e.version)throw new Error("Unexpected version: "+e.version);var t={};return t.graph=e.graph,t.expressions={list:e.expressions.list.map(i)},t.version=s,t}var s=1;return r}),define("expressions/colors",["require"],function(e){var t="#c74440",n="#2d70b3",i="#388c46",r="#6042a6",s="#fa7e19",a="#000000",o=[t,n,i,r,s,a];return{all:o,RED:t,BLUE:n,GREEN:i,PURPLE:r,ORANGE:s,BLACK:a}}),define("migrations/2",["require","expressions/colors"],function(e){function t(e){switch(e){case o:return a.RED;case c:return a.BLUE;case l:return a.GREEN;case u:return a.PURPLE;case h:return a.ORANGE;case d:return a.BLACK;default:return e}}function n(e){var n={};for(var i in e)e.hasOwnProperty(i)&&("color"===i?n[i]=t(e[i]):n[i]=e[i]);return n}function i(e){var i,r=e.type,s={};switch(r){case"expression":for(i in e)e.hasOwnProperty(i)&&("color"===i?s[i]=t(e[i]):s[i]=e[i]);return s;case"table":for(i in e)e.hasOwnProperty(i)&&("columns"===i?s[i]=e[i].map(n):s[i]=e[i]);return s;case"image":case"text":case"folder":for(i in e)e.hasOwnProperty(i)&&(s[i]=e[i]);return s;default:throw new Error("Unexpected expression type: "+r)}}function r(e){if(e.version>1)throw new Error("Unexpected version: "+e.version);var t={};return t.graph=e.graph,t.expressions={list:e.expressions.list.map(i)},t.version=s,t}var s=2,a=e("expressions/colors"),o="#C0504D",c="#4F81BD",l="#9BBB59",u="#8064A2",h="#F79646",d="#000000";return r}),define("migrations/3",["require","lib/number-to-latex"],function(e){function t(e){var t,n=e.type,i={};switch(n){case"expression":for(t in e)e.hasOwnProperty(t)&&("sliderMax"===t||"sliderMin"===t||"sliderInterval"===t?i[t]=r(e[t]):"domain"===t?i[t]={max:r(e[t].max),min:r(e[t].min)}:i[t]=e[t]);return i.hasOwnProperty("sliderMin")&&void 0===i.sliderInterval&&(i.sliderInterval=""),i;case"image":case"table":case"text":case"folder":for(t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i;default:throw new Error("Unexpected expression type: "+n)}}function n(e){if(e.version>2)throw new Error("Unexpected version: "+e.version);var n={};return n.graph=e.graph,n.expressions={list:e.expressions.list.map(t)},n.version=i,n}var i=3,r=e("lib/number-to-latex");return n}),define("main/migrate_state",["require","console","migrations/0","migrations/1","migrations/2","migrations/3"],function(e){function t(e){if(e.version>r)return n.warn("Loading saved state with version "+e.version+" but last known version is "+r+". States saved in a newer version of the calculator may not load correctly in an older version of the calculator."),e;if(e.hasOwnProperty("version")&&!i[e.version])return n.warn("State has invalid version "+e.version+". If a version is present, it should be a non-negative integer less than or equal to "+r+"."),e;for(e.hasOwnProperty("version")||(e=i[0](e));e.version<r;)e=i[e.version+1](e);return e}var n=e("console"),i=[e("migrations/0"),e("migrations/1"),e("migrations/2"),e("migrations/3")],r=3;return{migrations:i,currentVersion:r,migrateToLatest:t}}),define("main/state_controller",["require","pjs","jquery","main/migrate_state","console"],function(e){var t=e("pjs"),n=e("jquery"),i=e("main/migrate_state"),r=e("console"),s=t(function(e){var t={version:i.currentVersion,graph:{showGrid:!0,polarMode:!1,showXAxis:!0,showYAxis:!0,xAxisStep:0,yAxisStep:0,xAxisMinorSubdivisions:0,yAxisMinorSubdivisions:0,degreeMode:!1,xAxisArrowMode:"NONE",yAxisArrowMode:"NONE",xAxisLabel:"",yAxisLabel:"",xAxisNumbers:!0,yAxisNumbers:!0,polarNumbers:!0,projectorMode:!1,squareAxes:!0,viewport:{xmin:-10,ymin:-13.25,xmax:10,ymax:13.25}},expressions:{list:[{id:"1",type:"expression",latex:"",domain:{min:0,max:1},hidden:!1,style:"normal",residualVariable:"",regressionParameters:{},isLogModeRegression:!1}]}};t.version!==i.currentVersion&&r.warn("Blank state version is "+t.version+", but latest migration version is "+i.currentVersion+". The blank state should be migrated to the latest version."),e.init=function(e,t,n,i){this.grapher=e,this.expressionsModel=t,this.graphSettings=n,this.evaluator=i},e.triggerSetState=function(){},e.getState=function(){return{version:i.currentVersion,graph:this.grapher.getState(),expressions:this.expressionsModel.getState()}},e.setState=function(e,n){n||(n={}),e||(e=t),"string"==typeof e&&(e=JSON.parse(e)),e&&(e=i.migrateToLatest(e));var r=this;r.evaluator.batch(function(){"graph"in e&&r.grapher&&r.grapher.setState(e.graph),"expressions"in e&&(r.expressionsModel.setState(e.expressions,n),r.evaluator.markAsCompleteState())}),this.triggerSetState()},e.setBlank=function(){this.setState(t)},e.setStateFromURL=function(e){return n.getJSON(e).done(function(e){this.setState(e.state)}.bind(this))}});return s}),define("main/propagate_selection",["require"],function(e){function t(e,t,n){var i,r,s=function(){var a=e.getSelected();a!==r&&(r&&r.unobserve(".propagate_selection"),a&&(a.observe("selectedCell.propagate_selection",s),a.observe("selectedHiddenChild.propagate_selection",s)),r=a);var o=a?a.id:void 0;if(a&&a.isTable){var c=a.selectedCell;if(c){var l=a.columns[c.column];o=l?l.id:void 0}else o=void 0}if(a&&a.isFolder){var u=a.selectedHiddenChild;o=u?u.id:void 0}var h=o!==i;if(h){t.select(o);var d=t.getOpenIntersectionIds();"undefined"!=typeof o&&(d[o]=!0),n.setIntersectIds(d),n.updateIntersections(o)}i=o};e.observe("selectedItem",s)}return t}),define("main/graph_change_monitor",["require","pjs","underscore_model"],function(e){var t=e("pjs"),n=e("underscore_model"),i=t(n,function(e,t){e.init=function(){t.init.call(this),this.observeEvent("notifyChange",function(){this.setProperty("hasUnsavedChanges",!0)}.bind(this)),this.hasUnsavedChanges=!1}});return i}),define("vendor/papaparse",["require","jquery"],function(e){"use strict";function t(e,t){var n=o(t);if("string"==typeof e){if(!n.download){var a=new s(n),c=a.parse(e);return c}var u=new i(n);u.stream(e)}else if(e instanceof File)if(n.step||n.chunk){var u=new r(n);u.stream(e)}else{var a=new s(n);reader=new FileReader,reader.onload=function(e){var t=new s(n);t.parse(e.target.result)},reader.onerror=function(){l(n.error)&&n.error(reader.error,e)},reader.readAsText(e,n.encoding)}}function n(e,t){function n(){"object"==typeof t&&("string"==typeof t.delimiter&&1==t.delimiter.length&&-1==d.BAD_DELIMITERS.indexOf(t.delimiter)&&(c=t.delimiter),("boolean"==typeof t.quotes||t.quotes instanceof Array)&&(o=t.quotes),"string"==typeof t.newline&&(l=t.newline))}function i(e){if("object"!=typeof e)return[];var t=[];for(var n in e)t.push(n);return t}function r(e,t){var n="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var i=e instanceof Array&&e.length>0,r=!(t[0]instanceof Array);if(i){for(var a=0;a<e.length;a++)a>0&&(n+=c),n+=s(e[a],a);t.length>0&&(n+=l)}for(var o=0;o<t.length;o++){for(var u=i?e.length:t[o].length,h=0;u>h;h++){h>0&&(n+=c);var d=i&&r?e[h]:h;n+=s(t[o][d],h)}o<t.length-1&&(n+=l)}return n}function s(e,t){if("undefined"==typeof e||null===e)return"";e=e.toString().replace(/"/g,'""');var n="boolean"==typeof o&&o||o instanceof Array&&o[t]||a(e,d.BAD_DELIMITERS)||e.indexOf(c)>-1||" "==e.charAt(0)||" "==e.charAt(e.length-1);return n?'"'+e+'"':e}function a(e,t){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return!0;return!1}var o=!1,c=",",l="\r\n";if(n(),"string"==typeof e&&(e=JSON.parse(e)),e instanceof Array){if(!e.length||e[0]instanceof Array)return r(null,e);if("object"==typeof e[0])return r(i(e[0]),e)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data instanceof Array&&(e.fields||(e.fields=e.data[0]instanceof Array?e.fields:i(e.data[0])),e.data[0]instanceof Array||"object"==typeof e.data[0]||(e.data=[e.data])),r(e.fields||[],e.data||[]);throw"exception: Unable to serialize unrecognized input"}function i(e){e=e||{},e.chunkSize||(e.chunkSize=d.RemoteChunkSize);var t,n,i=0,r=0,a="",o="",u=new s(c(e));this.stream=function(s){function c(){if(t=new XMLHttpRequest,t.onload=h,t.onerror=d,t.open("GET",s,!0),e.step){var n=i+e.chunkSize-1;r&&n>r&&(n=r),t.setRequestHeader("Range","bytes="+i+"-"+n)}t.send(),i+=e.chunkSize}function h(){if(4==t.readyState){if(t.status<200||t.status>=400)return void d();a+=o+t.responseText,o="";var r=!e.step||i>p(t);if(!r){var s=a.lastIndexOf("\n");if(0>s&&(s=a.lastIndexOf("\r")),!(s>-1))return void n();o=a.substring(s+1),a=a.substring(0,s)}var c=u.parse(a);a="",l(e.chunk)&&(e.chunk(c),c=void 0),r||c.meta.paused||n()}}function d(){l(e.error)&&e.error(t.statusText)}function p(e){var t=e.getResponseHeader("Content-Range");return parseInt(t.substr(t.lastIndexOf("/")+1))}(n=function(){c()})()}}function r(e){e=e||{},e.chunkSize||(e.chunkSize=d.LocalChunkSize);var t,n=0,i="",r="",a=new s(c(e)),o="function"==typeof FileReader;this.stream=function(s){function c(){n<s.size&&u()}function u(){var i=Math.min(n+e.chunkSize,s.size),r=t.readAsText(p.call(s,n,i),e.encoding);o||h({target:{result:r}})}function h(t){n+=e.chunkSize,i+=r+t.target.result,r="";var o=n>=s.size;if(!o){var u=i.lastIndexOf("\n");if(0>u&&(u=i.lastIndexOf("\r")),!(u>-1))return void c();r=i.substring(u+1),i=i.substring(0,u)}var h=a.parse(i);i="",l(e.chunk)&&(e.chunk(h,s),h=void 0),o||h.meta.paused||c()}function d(){l(e.error)&&e.error(t.error,s)}var p=s.slice||s.webkitSlice||s.mozSlice;o?(t=new FileReader,t.onload=h,t.onerror=d):t=new FileReaderSync,c()}}function s(e){function t(){return b&&f&&(u("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),f=!1),n()&&i(),r()}function n(){return e.header&&0==y.length}function i(){if(b){for(var e=0;n()&&e<b.data.length;e++)for(var t=0;t<b.data[e].length;t++)y.push(b.data[e][t]);b.data.splice(0,1)}}function r(){if(!b||!e.header&&!e.dynamicTyping)return b;for(var t=0;t<b.data.length;t++){for(var n={},i=0;i<b.data[t].length;i++){if(e.dynamicTyping){var r=b.data[t][i];"true"==r?b.data[t][i]=!0:"false"==r?b.data[t][i]=!1:b.data[t][i]=o(r)}e.header&&(i>=y.length?(n.__parsed_extra||(n.__parsed_extra=[]),n.__parsed_extra.push(b.data[t][i])):n[y[i]]=b.data[t][i])}e.header&&(b.data[t]=n,i>y.length?u("FieldMismatch","TooManyFields","Too many fields: expected "+y.length+" fields but parsed "+i,t):i<y.length&&u("FieldMismatch","TooFewFields","Too few fields: expected "+y.length+" fields but parsed "+i,t))}return e.header&&b.meta&&(b.meta.fields=y),b}function s(t){for(var n,i,r,s=[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP],o=0;o<s.length;o++){var c=s[o],l=0,u=0;r=void 0;for(var h=new a({delimiter:c,preview:10}).parse(t),p=0;p<h.data.length;p++){var f=h.data[p].length;u+=f,"undefined"!=typeof r?f>1&&(l+=Math.abs(f-r),r=f):r=f}u/=h.data.length,("undefined"==typeof i||i>l)&&u>1.99&&(i=l,n=c)}return e.delimiter=n,{successful:!!n,bestDelimiter:n}}function o(e){var t=m.test(e);return t?parseFloat(e):e}function u(e,t,n,i){b.errors.push({type:e,code:t,message:n,row:i})}var h,p,f,m=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,g=this,v=!1,y=[],b={data:[],errors:[],meta:{}};e=c(e),this.parse=function(i){if(f=!1,!e.delimiter){var r=s(i);r.successful?e.delimiter=r.bestDelimiter:(f=!0,e.delimiter=d.DefaultDelimiter),b.meta.delimiter=e.delimiter}if(l(e.step)){var o=e.step;e.step=function(e){b=e,n()?t():o(t(),g)}}return e.preview&&e.header&&e.preview++,h=i,p=new a(e),b=p.parse(h),t(),l(e.complete)&&!v&&e.complete(b),v?{meta:{paused:!0}}:b},this.pause=function(){v=!0,p.abort(),h=h.substr(p.getCharIndex())},this.resume=function(){v=!1,p=new a(e),p.parse(h),l(e.complete)&&!v&&e.complete(b)},this.abort=function(){p.abort(),l(e.complete)&&e.complete(b),h=""}}function a(e){function t(){for(;I<E.length&&!R&&!(P>0&&j>=P);)'"'==A?r():q?s():a(),n();return i()}function n(){I++,A=E[I]}function i(){return R&&x("Abort","ParseAbort","Parsing was aborted by the user's step function"),q&&x("Quotes","MissingQuotes","Unescaped or mismatched quotes"),f(),l(M)?void 0:k()}function r(){b()&&!y()?q=!q:(u(),q&&y()?I++:x("Quotes","UnexpectedQuotes","Unexpected quotes"))}function s(){(g(I)||v(I))&&D++,u()}function a(){A==T?h():g(I)?(p(),n()):v(I)?p():o()?c():u()}function o(){if(!C)return!1;var e=0==I||v(I-1)||g(I-2);return e&&E[I]===C}function c(){for(;!g(I)&&!v(I)&&I<E.length;)n()}function u(){L[N][F]+=A}function h(){L[N].push(""),F=L[N].length-1}function p(){f(),D++,j++,L.push([]),N=L.length-1,h()}function f(){m(),l(M)&&(L[N]&&M(k()),S())}function m(){1==L[N].length&&V.test(L[N][0])&&(e.keepEmptyRows?L[N].splice(0,1):L.splice(N,1),N=L.length-1)}function g(e){return e<E.length-1&&("\r"==E[e]&&"\n"==E[e+1]||"\n"==E[e]&&"\r"==E[e+1])}function v(e){return"\r"==E[e]||"\n"==E[e]}function y(){return!b()&&I<E.length-1&&'"'==E[I+1]}function b(){return!q&&_(I-1)||_(I+1)}function _(e){"number"!=typeof e&&(e=I);var t=E[e];return-1>=e||e>=E.length||t==T||"\r"==t||"\n"==t}function x(e,t,n){O.push({type:e,code:t,message:n,line:D,row:N,index:I})}function w(e){E=e,q=!1,I=0,j=0,D=1,S(),L=[[""]],A=E[I]}function S(){L=[],O=[],N=0,F=0}function k(){return{data:L,errors:O,meta:{lines:D,delimiter:T,aborted:R,truncated:P>0&&I<E.length}}}var E,T,C,M,P,A,I,q,D,L,O,N,F,j,V=/^\s*$/,R=!1;e=e||{},T=e.delimiter,C=e.comments,M=e.step,P=e.preview,("string"!=typeof T||1!=T.length||d.BAD_DELIMITERS.indexOf(T)>-1)&&(T=","),C===!0?C="#":("string"!=typeof C||1!=C.length||d.BAD_DELIMITERS.indexOf(C)>-1||C==T)&&(C=!1),this.parse=function(e){if("string"!=typeof e)throw"Input must be a string";return w(e),t()},this.abort=function(){R=!0},this.getCharIndex=function(){return I}}function o(e){"object"!=typeof e&&(e={});var t=c(e);return("string"!=typeof t.delimiter||1!=t.delimiter.length||d.BAD_DELIMITERS.indexOf(t.delimiter)>-1)&&(t.delimiter=h.delimiter),"boolean"!=typeof t.header&&(t.header=h.header),"boolean"!=typeof t.dynamicTyping&&(t.dynamicTyping=h.dynamicTyping),"number"!=typeof t.preview&&(t.preview=h.preview),"function"!=typeof t.step&&(t.step=h.step),"function"!=typeof t.complete&&(t.complete=h.complete),"function"!=typeof t.error&&(t.error=h.error),"string"!=typeof t.encoding&&(t.encoding=h.encoding),"boolean"!=typeof t.download&&(t.download=h.download),"boolean"!=typeof t.keepEmptyRows&&(t.keepEmptyRows=h.keepEmptyRows),t}function c(e){if("object"!=typeof e)return e;var t=e instanceof Array?[]:{};for(var n in e)t[n]=c(e[n]);return t}function l(e){return"function"==typeof e}var u=e("jquery"),h={delimiter:"",header:!1,dynamicTyping:!1,preview:0,step:void 0,encoding:"",comments:!1,complete:void 0,error:void 0,download:!1,chunk:void 0,keepEmptyRows:!1},d={};return d.parse=t,d.unparse=n,d.RECORD_SEP=String.fromCharCode(30),d.UNIT_SEP=String.fromCharCode(31),d.BYTE_ORDER_MARK="\ufeff",d.BAD_DELIMITERS=["\r","\n",'"',d.BYTE_ORDER_MARK],d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=a,d.ParserHandle=s,d.NetworkStreamer=i,d.FileStreamer=r,u.fn.parse=function(e){function t(){if(0!=s.length){var t=s[0];if(l(e.before)){var r=e.before(t.file,t.inputElem);if("object"==typeof r){if("abort"==r.action)return void n("AbortError",t.file,t.inputElem,r.reason);if("skip"==r.action)return void i();"object"==typeof r.config&&(t.instanceConfig=u.extend(t.instanceConfig,r.config))}else if("skip"==r)return void i()}var a=t.instanceConfig.complete;t.instanceConfig.complete=function(e){l(a)&&a(e,t.file,t.inputElem),i()},d.parse(t.file,t.instanceConfig)}}function n(t,n,i,r){l(e.error)&&e.error({name:t},n,i,r)}function i(){s.splice(0,1),t()}var r=e.config||{},s=[];return this.each(function(e){var t="INPUT"==u(this).prop("tagName").toUpperCase()&&"file"==u(this).attr("type").toLowerCase()&&window.FileReader;if(!t||!this.files||0==this.files.length)return!0;for(var n=0;n<this.files.length;n++)s.push({file:this.files[n],inputElem:this,instanceConfig:u.extend({},r)})}),t(),this},d}),define("main/data_helpers",["require","vendor/papaparse","underscore","i18n","analytics/bugsnag-stub"],function(e){var t=e("vendor/papaparse"),n=e("underscore"),i=e("i18n"),r=e("analytics/bugsnag-stub"),s=function(e){var n,s,a,o=t.parse(e,{preview:50}),c=[];if(o.errors.length&&!o.data.length&&r.notify("PasteParseError","PapaParse.parse returned errors.",{input:e,output:o.errors}),!o.data.length||o.data.length<2)return null;var l=o.data[0].length;for(a=0;l>a;a++)c.push([]);for(s=0;s<o.data.length;s++)if(0!==s||!isNaN(parseFloat(o.data[s][0]))){if(o.data[s].length<2)return null;if(o.data[s][0]||o.data[s][1])for(a=0;l>a;a++){if(n=o.data[s][a].replace(/,/g,""),n&&isNaN(parseFloat(n)))return{error:i.t("Error: Row __rowNum__, Column __colNum__ isn't a number.",{rowNum:s+1,colNum:a+1})};c[a].push(n)}}return c[0].length<2?null:{data:c}},a=function(e,t,i){var r=n.map(e,function(e){return parseFloat(e)});r=n.filter(r,function(e){return isFinite(e)}),r.push(0);var s=n.max(r),a=n.min(r),o=Math.max(s,i)-Math.min(a,t),c=i,l=t;return s+.1*o>i&&(c=s+.2*o),t>a-.1*o&&(l=a-.2*o),[l,c]},o=function(e,t){var n=a(t[0],e.xmin,e.xmax),i=a(t[1],e.ymin,e.ymax);return{xmin:n[0],xmax:n[1],ymin:i[0],ymax:i[1]}};return{parse:s,computeNewViewport:o}}),define("main/table_paste_helper",["require","underscore_model","pjs","main/data_helpers","i18n"],function(e){var t=e("underscore_model"),n=e("pjs"),i=e("main/data_helpers"),r=e("i18n"),s=n(t,function(e,t){e.init=function(e,n,i,r,s){t.init.call(this),this.listView=e,this.undoRedo=n,this.toast=i,this.getViewport=r,this.setViewport=s},e.t=function(e,t){return r.t(e,t,this.listView.graphSettings.language)},e.bindListenerTo=function(e){e.on("paste",function(e){var t=this.listView.model.selectedItem;if(!t||"text"!==t.type&&"folder"!==t.type){var n;window.clipboardData&&window.clipboardData.getData?n=window.clipboardData.getData("Text"):e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData&&(n=e.originalEvent.clipboardData.getData("text/plain"));var r=i.parse(n);if(r){if(e.stopPropagation(),e.preventDefault(),r.error)return this.toast(r.error,{style:"error",hideAfter:12e3});this.createAndPopulateTable(r.data)}}}.bind(this))},e.createAndPopulateTable=function(e){this.listView.addExpressionView.newTable(e);var t=this,n=this.getViewport(),r=i.computeNewViewport(n,e);(r.xmax>n.xmax||r.xmin<n.xmin||r.ymax>n.ymax||r.ymin<n.ymin)&&(t.undoRedo.performAndAddTransaction({undo:function(){t.setViewport([n.xmin,n.xmax,n.ymin,n.ymax])},redo:function(){t.setViewport([r.xmin,r.xmax,r.ymin,r.ymax])}}),t.toast(t.t("We zoomed to fit your data."),{undoCallback:function(){t.undoRedo.undo()}}))}});return s}),define("template!pillboxes",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div\n  class="dcg-pillbox-container"\n  role="group"\n  aria-label="'+(null==(__t=t("Graph Settings Controls"))?"":_.escape(__t))+'"\n>\n\n  <div\n    class="dcg-btn-flat-gray dcg-settings-pillbox dcg-tooltip-e dcg-action-settings"\n    tooltip="'+(null==(__t=t("Graph Settings"))?"":_.escape(__t))+'"\n    role="button"\n    tabindex=0\n    aria-haspopup="true"\n    aria-expanded="false"\n    aria-label="'+(null==(__t=t("Graph Settings"))?"":_.escape(__t))+'"\n  >\n    <i class="dcg-icon-wrench" aria-hidden="true"></i>\n  </div>\n\n  <div class="dcg-zoom-container">\n    <div class="dcg-zoominout-pillbox dcg-btn-flat-gray dcg-btn-flat-gray-group">\n      <div\n        class="dcg-action-zoomin dcg-tooltip-e"\n        tooltip="'+(null==(__t=t("Zoom In"))?"":_.escape(__t))+'"\n        role="button"\n        tabindex=0\n        aria-label="'+(null==(__t=t("Zoom In"))?"":_.escape(__t))+'"\n      >\n        <i class="dcg-icon dcg-icon-plus" aria-hidden="true"></i>\n      </div>\n      <div\n        class="dcg-option dcg-action-zoomout dcg-tooltip-e"\n        tooltip="'+(null==(__t=t("Zoom Out"))?"":_.escape(__t))+'"\n        role="button"\n        tabindex=0\n        aria-label="'+(null==(__t=t("Zoom Out"))?"":_.escape(__t))+'"\n      >\n        <i class="dcg-icon dcg-icon-minus" aria-hidden="true"></i>\n      </div>\n    </div>\n    <div\n      class="dcg-btn-flat-gray dcg-option dcg-action-zoomrestore dcg-tooltip-e"\n      tooltip="'+(null==(__t=t("Default Zoom"))?"":_.escape(__t))+'"\n      role="button"\n      tabindex=0\n      aria-label="'+(null==(__t=t("Restore Default Zoom"))?"":_.escape(__t))+'"\n    >\n      <i class="dcg-icon dcg-icon-home" aria-hidden="true"></i>\n    </div>\n  </div>\n\n  ',__p+=brandingLink?'\n    <div class="dcg-graphpaper-branding">\n      <a href="'+(null==(__t=brandingLink)?"":_.escape(__t))+'" target="_blank">\n        <div class="dcg-powered-by" aria-label="'+(null==(__t=t("Edit graph on Desmos"))?"":_.escape(__t))+'">'+(null==(__t=t("edit graph on"))?"":_.escape(__t))+'</div>\n        <i class="dcg-icon-desmos"></i>\n      </a>\n    </div>\n  ':'\n    <div class="dcg-graphpaper-branding">\n      <div class="dcg-powered-by" aria-label="'+(null==(__t=t("powered by Desmos"))?"":_.escape(__t))+'">'+(null==(__t=t("powered by"))?"":_.escape(__t))+'</div>\n      <i class="dcg-icon-desmos"></i>\n    </div>\n  ',__p+="\n<div>\n";return __p}}),define("loadcss!css/settings",function(){}),define("template!settings",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div class="dcg-settings-container dcg-left dcg-popover dcg-constrained-height-popover">\n  <div class="dcg-popover-interior" role=\'complementary\' aria-label=\'Graph Settings\'>\n\n    <div\n      class="dcg-modern-btn dcg-action-projectormode"\n      role="button"\n      tabindex=0\n      aria-label="'+(null==(__t=t("Projector Mode"))?"":_.escape(__t))+'"\n    >\n      '+(null==(__t=t("Projector Mode"))?"":_.escape(__t))+'\n    </div>\n\n    <div class="dcg-top-checkboxes-container">\n      <span\n        role="checkbox"\n        aria-checked="false"\n        tabindex=0\n        class="dcg-checkbox dcg-minor-checkbox dcg-action-toggle-axis-numbers"\n        aria-label="'+(null==(__t=t("Axis Numbers"))?"":_.escape(__t))+'"\n      >\n        <span class="dcg-checkbox-box"><i class="dcg-icon-check"></i></span>\n        <span class="dcg-checkbox-label" aria-hidden="true">'+(null==(__t=t("Axis Numbers"))?"":_.escape(__t))+'</span>\n      </span>\n\n      <span\n        role="checkbox"\n        aria-checked="false"\n        tabindex=0\n        class="dcg-checkbox dcg-minor-checkbox dcg-action-toggle-minor-gridlines"\n        aria-label="'+(null==(__t=t("Minor Gridlines"))?"":_.escape(__t))+'"\n      >\n        <span class="dcg-checkbox-box"><i class="dcg-icon-check"></i></span>\n        <span class="dcg-checkbox-label" aria-hidden="true">'+(null==(__t=t("Minor Gridlines"))?"":_.escape(__t))+'</span>\n      </span>\n\n      <div role="button" tabindex=0 class="dcg-action-zoom-square dcg-btn-light-gray">\n        Zoom Square\n      </div>\n    </div>\n\n    <div class="dcg-checkbox-title">\n      <span\n        role="checkbox"\n        aria-checked="false"\n        tabindex=0\n        class="dcg-checkbox dcg-action-toggle-grid"\n        aria-label="'+(null==(__t=t("Grid"))?"":_.escape(__t))+'"\n      >\n        <span class="dcg-checkbox-box"><i class="dcg-icon-check"></i></span>\n        <span class="dcg-checkbox-label" aria-hidden="true">'+(null==(__t=t("Grid"))?"":_.escape(__t))+'</span>\n      </span>\n    </div>\n\n    <div class="dcg-icon-group dcg-grid-group">\n      <div\n        class="dcg-icon dcg-action-cartesian"\n        role="button"\n        tabindex=0\n        aria-label="'+(null==(__t=t("Cartesian Grid"))?"":_.escape(__t))+'"\n      ></div>\n      <div\n        class="dcg-icon dcg-action-polar"\n        role="button"\n        tabindex=0\n        aria-label="'+(null==(__t=t("Polar Grid"))?"":_.escape(__t))+'"\n      ></div>\n    </div>\n\n    <div class="dcg-checkbox-title">\n      <span\n        role="checkbox"\n        aria-checked="false"\n        tabindex=0\n        class="dcg-checkbox dcg-action-toggle-arrows"\n        aria-label="'+(null==(__t=t("Arrows"))?"":_.escape(__t))+'"\n      >\n        <span class="dcg-checkbox-box"><i class="dcg-icon-check"></i></span>\n        <span class="dcg-checkbox-label" aria-hidden="true">'+(null==(__t=t("Arrows"))?"":_.escape(__t))+'</span>\n      </span>\n    </div>\n\n    <div class="dcg-icon-group dcg-arrow-group">\n      <div role="button" tabindex=0 class="dcg-icon dcg-arrows" dcg-arrows="BOTH" aria-label="'+(null==(__t=t("Show Both"))?"":_.escape(__t))+'">\n        <i class="dcg-icon-arrows-two"></i>\n      </div>\n      <div role="button" tabindex=0 class="dcg-icon dcg-arrows" dcg-arrows="POSITIVE" aria-label="'+(null==(__t=t("Show Positive"))?"":_.escape(__t))+'">\n        <i class="dcg-icon-arrows-one"></i>\n      </div>\n    </div>\n\n    <div class="dcg-section-divider" aria-hidden="true"></div>\n\n    <div class="dcg-checkbox-title dcg-x-axis-title">\n      <span\n        role="checkbox"\n        aria-checked="false"\n        tabindex=0\n        class="dcg-checkbox dcg-action-toggle-x-axis"\n        aria-label="'+(null==(__t=t("X-Axis"))?"":_.escape(__t))+'"\n      >\n        <span class="dcg-checkbox-box"><i class="dcg-icon-check"></i></span>\n        <span class="dcg-checkbox-label" aria-hidden="true">'+(null==(__t=t("X-Axis"))?"":_.escape(__t))+'</span>\n      </span>\n      <input\n        class="dcg-axis-label dcg-x-axis-label"\n        placeholder="'+(null==(__t=t("add a label"))?"":_.escape(__t))+'"\n        aria-label="'+(null==(__t=t("add x-axis label"))?"":_.escape(__t))+'"\n      />\n    </div>\n\n    <div class="dcg-editable-mathquill-container dcg-x-axis-options">\n      <span class="dcg-math-field" data-dcg-limit="xmin"></span>\n      <span class="dcg-interval-interior">\\le x\\le </span>\n      <span class="dcg-math-field" data-dcg-limit="xmax"></span>\n\n      <span class="dcg-step-container">\n        <span class="dcg-step-label" aria-hidden="true">'+(null==(__t=t("Step:"))?"":_.escape(__t))+'</span>\n        <span class="dcg-math-field" data-dcg-limit="xstep"></span>\n      </span>\n    </div>\n\n    <div class="dcg-checkbox-title dcg-y-axis-title">\n      <span\n        role="checkbox"\n        aria-checked="false"\n        tabindex=0\n        class="dcg-checkbox dcg-action-toggle-y-axis"\n        aria-label="'+(null==(__t=t("Y-Axis"))?"":_.escape(__t))+'"\n      >\n        <span class="dcg-checkbox-box"><i class="dcg-icon-check"></i></span>\n        <span class="dcg-checkbox-label" aria-hidden="true">'+(null==(__t=t("Y-Axis"))?"":_.escape(__t))+'</span>\n      </span>\n      <input\n        class="dcg-axis-label dcg-y-axis-label"\n        placeholder="'+(null==(__t=t("add a label"))?"":_.escape(__t))+'"\n        aria-label="'+(null==(__t=t("add y-axis label"))?"":_.escape(__t))+'"\n      />\n    </div>\n\n    <div class="dcg-editable-mathquill-container dcg-y-axis-options">\n      <span class="dcg-math-field" data-dcg-limit="ymin"></span>\n      <span class="dcg-interval-interior">\\le y\\le </span>\n      <span class="dcg-math-field" data-dcg-limit="ymax"></span>\n\n       <span class="dcg-step-container">\n        <span class="dcg-step-label" aria-hidden="true">'+(null==(__t=t("Step:"))?"":_.escape(__t))+'</span>\n        <span class="dcg-math-field" data-dcg-limit="ystep"></span>\n      </span>\n    </div>\n\n    <div class="dcg-section-divider" aria-hidden="true"></div>\n\n    <div\n      class="dcg-radiangroup"\n      role="group"\n      aria-label="'+(null==(__t=t("Angle Settings"))?"":_.escape(__t))+'"\n    >\n      <div\n        class="dcg-action-radianmode dcg-modern-btn"\n        role="button"\n        tabindex=0\n        aria-label="'+(null==(__t=t("Radians"))?"":_.escape(__t))+'"\n      >\n        '+(null==(__t=t("Radians"))?"":_.escape(__t))+'\n      </div>\n      <div\n        class="dcg-action-degreemode dcg-modern-btn"\n        role="button"\n        tabindex=0\n        aria-label="'+(null==(__t=t("Degrees"))?"":_.escape(__t))+'"\n      >\n        '+(null==(__t=t("Degrees"))?"":_.escape(__t))+'\n      </div>\n    </div>\n\n    <div class="dcg-arrow"></div>\n  </div>\n</div>\n';
return __p}}),define("main/settings_view",["require","loadcss!css/settings","jquery","underscore","pjs","i18n","mathquill","main/popover_view","graphing/viewport","conditional_blur","lib/evaluate-single-expression","keys","graphing/label","template!settings","vendor/jquery.html5-placeholder-shim","scroll_helpers","graphing/axisarrowmode","lib/setup_mathquill_tap"],function(e){function t(e,t){var n=p.value(e,t),i="";if(n.mantissa)i=n.mantissa.split("").join("\\cdot")+"^{"+n.superscript+"}";else{var r=n.string.split("/");i=2===r.length?"\\frac{"+r[0]+"}{"+r[1]+"}":n.string}return i}function n(e){return{xmin:t(e.xmin,e.xmax-e.xmin),xmax:t(e.xmax,e.xmax-e.xmin),ymin:t(e.ymin,e.ymax-e.ymin),ymax:t(e.ymax,e.ymax-e.ymin)}}e("loadcss!css/settings");var i=e("jquery"),r=e("underscore"),s=e("pjs"),a=e("i18n"),o=e("mathquill"),c=e("main/popover_view"),l=e("graphing/viewport"),u=e("conditional_blur"),h=e("lib/evaluate-single-expression"),d=e("keys"),p=e("graphing/label"),f=e("template!settings");e("vendor/jquery.html5-placeholder-shim");var m=e("scroll_helpers"),g=e("graphing/axisarrowmode"),v=e("lib/setup_mathquill_tap"),y=s(c,function(e,s){function c(e,t){if(e===t)return!0;var i=n(e),r=n(t);return i.xmin===r.xmin&&i.xmax===r.xmax&&i.ymin===r.ymin&&i.ymax===r.ymax}e.template=f,e.pointToSelector=".dcg-action-settings i",e.init=function(e){s.init.call(this),this.grapher=e,this.settings=this.grapher.settings,this.viewport=new l,this.__settingsObservers=[]},e.t=function(e,t){return a.t(e,t,this.settings.language)},e.getTemplateParams=function(){var e=this;return{t:function(t,n){return a.t(t,n,e.settings.language)}}},e.eventShouldClosePopover=function(e){return this.eventIsWithinPopover(e)?!1:this.isMathquillFocused()&&i(e.target).closest(".dcg-keypad").length?!1:!0},e.renderIsVisible=function(){s.renderIsVisible.call(this),this.isVisible&&i.placeholder&&i.placeholder&&i.placeholder.shim(),this.isVisible&&this.renderAllSettings()},e.setBottom=function(e){this.$().css("bottom",e)},e.didCreateElement=function(){s.didCreateElement.call(this);var e=this;this.$(".dcg-interval-interior").each(function(){var e=o.StaticMath(i("<span>"+i(this).text()+"</span>")[0]).html();i(this).html(e).addClass("mq-math-mode")});var t=this.mathFields={};this.$(".dcg-math-field").each(function(){var n=o.MathField(this),r=i(this).data("dcg-limit"),s="";switch(r){case"xmin":s=e.t("X Axis Minimum: ");break;case"xmax":s=e.t("X Axis Maximum: ");break;case"xstep":s=e.t("X Axis Step Size: ");break;case"ymin":s=e.t("Y Axis Minimum: ");break;case"ymax":s=e.t("Y Axis Maximum: ");break;case"ystep":s=e.t("Y Axis Step Size: ")}n.setAriaLabel(s),v(this,n),t[r]=n}).addClass("dcg-math-input").on("focusin",e.focusInMathquill.bind(e)).on("focusout",e.focusOutMathquill.bind(e)).on("render",e.handleMathquillInput.bind(e)).on("keydown",e.handleKeydown.bind(e)).on("enterPressed",u),this.$(".dcg-action-toggle-x-axis-steps").on("dcg-tap",function(){var t=e.settings.xAxisNumbers;e.settings.setProperty("xAxisNumbers",!t)}),this.$(".dcg-action-toggle-y-axis-steps").on("dcg-tap",function(){var t=e.settings.yAxisNumbers;e.settings.setProperty("yAxisNumbers",!t)}),this.$(".dcg-action-toggle-axis-numbers").on("dcg-tap",function(){var t=e.settings.xAxisNumbers;e.settings.setProperty("polarNumbers",!t),e.settings.setProperty("yAxisNumbers",!t),e.settings.setProperty("xAxisNumbers",!t)}),this.$(".dcg-action-toggle-minor-gridlines").on("dcg-tap",function(){var t=0===e.settings.xAxisMinorSubdivisions?1:0;e.settings.setProperty("yAxisMinorSubdivisions",t),e.settings.setProperty("xAxisMinorSubdivisions",t)}),this.$(".dcg-x-axis-label").on("change copy paste cut keypress keydown keyup",function(){e.settings.setProperty("xAxisLabel",i(this).val())}),this.$(".dcg-y-axis-label").on("change copy paste cut keypress keydown keyup",function(){e.settings.setProperty("yAxisLabel",i(this).val())}),this.$(".dcg-action-polar").on("dcg-tap",function(){e.settings.setProperty("polarMode",!0)}),this.$(".dcg-action-cartesian").on("dcg-tap",function(){e.settings.setProperty("polarMode",!1)}),this.$(".dcg-action-radianmode").on("dcg-tap",function(){e.settings.setProperty("degreeMode",!1)}),this.$(".dcg-action-degreemode").on("dcg-tap",function(){e.settings.setProperty("degreeMode",!0)}),this.$(".dcg-action-projectormode").on("dcg-tap",function(){e.settings.setProperty("projectorMode",!e.settings.projectorMode)}),this.$(".dcg-arrows").on("dcg-tap",function(){var t=e.$(this).attr("dcg-arrows");e.settings.setProperty("xAxisArrowMode",t),e.settings.setProperty("yAxisArrowMode",t)}),this.$(".dcg-action-toggle-grid").on("dcg-tap",function(){e.settings.showGrid&&e.settings.setProperty("polarMode",!1),e.settings.setProperty("showGrid",!e.settings.showGrid)}),this.$(".dcg-action-toggle-arrows").on("dcg-tap",function(){var t=e.settings.xAxisArrowMode===g.NONE?g.BOTH:g.NONE;e.settings.setProperty("xAxisArrowMode",t),e.settings.setProperty("yAxisArrowMode",t)}),this.$(".dcg-action-toggle-x-axis").on("dcg-tap",function(){e.settings.setProperty("showXAxis",!e.settings.showXAxis)}),this.$(".dcg-action-toggle-y-axis").on("dcg-tap",function(){e.settings.setProperty("showYAxis",!e.settings.showYAxis)}),this.$(".dcg-action-zoom-square").on("dcg-tap",function(){e.settings.setProperty("squareAxes",!0)}),this.addSettingsObserver("showXAxis",this.renderShowXAxis),this.addSettingsObserver("showYAxis",this.renderShowYAxis),this.addSettingsObserver("projectorMode",this.renderProjectorMode),this.addSettingsObserver("xAxisArrowMode",this.renderArrows),this.addSettingsObserver("xAxisNumbers",this.renderShowAxisNumbers),this.addSettingsObserver("showGrid polarMode xAxisMinorSubdivisions",this.renderMinorGridlines),this.addSettingsObserver("xAxisLabel showXAxis",this.renderXAxisLabel),this.addSettingsObserver("yAxisLabel showYAxis",this.renderYAxisLabel),this.addSettingsObserver("computedStepSizes xAxisStep",this.renderXStep),this.addSettingsObserver("computedStepSizes yAxisStep",this.renderYStep),this.addSettingsObserver("squareAxes",this.renderSquareAxes),this.addSettingsObserver("degreeMode",this.renderDegreeMode),this.addSettingsObserver("polarMode",this.renderPolarMode),this.addSettingsObserver("showGrid",this.renderShowGrid),this.renderAllSettings()},e.handleKeydown=function(e){var t=d.lookup(e);t===d.ESCAPE&&u()},e.handleMathquillInput=function(e){if(this.isVisible){var t,n=!!this.settings.degreeMode,s=h(this.mathFields.xmin.latex(),n),a=h(this.mathFields.xmax.latex(),n);t=""===this.mathFields.xstep.latex()?0:h(this.mathFields.xstep.latex(),n);var o,c=h(this.mathFields.ymin.latex(),n),u=h(this.mathFields.ymax.latex(),n);o=""===this.mathFields.ystep.latex()?0:h(this.mathFields.ystep.latex(),n);var d={},p=function(e){return isFinite(e)&&"number"==typeof e},f=new l(s,a,c,u);p(s)&&p(a)?(d.xmin=!f.isXValid(),d.xmax=d.xmin):(d.xmin=!p(s),d.xmax=!p(a)),p(c)&&p(u)?(d.ymin=!f.isYValid(),d.ymax=d.ymin):(d.ymin=!p(c),d.ymax=!p(u)),p(t)?(d.xstep=!1,this.settings.setProperty("xAxisStep",t)):d.xstep=!0,p(o)?(d.ystep=!1,this.settings.setProperty("yAxisStep",o)):d.ystep=!0,this.setViewport(f),r.each(this.mathFields,function(e,t){i(e.el()).toggleClass("dcg-invalid",d[t])}),this.grapher&&f.isValid()&&this.settings.setProperty("squareAxes",f.isSquare(this.grapher.getProjection().screen))}},e.updateNeedsFakeKeypad=function(){this.setProperty("needsFakeKeypad",this.isMathquillFocused())},e.focusInMathquill=function(e){var t=this.$(e.target).closest(".dcg-math-input");if(!t.hasClass("dcg-focus")){t.addClass("dcg-focus"),o(t[0]).select(),this.updateNeedsFakeKeypad();var n=this.$(".dcg-popover-interior");setTimeout(function(){m.scrollVisible(t,n,50)},0)}},e.focusOutMathquill=function(e){var t=this.$(e.target).closest(".mq-editable-field");clearTimeout(this.focusedOutRecentlyTimeout),this.focusedOutRecently=!0,this.focusedOutRecentlyTimeout=setTimeout(function(){this.focusedOutRecently=!1,this.updateMathquillInputs()}.bind(this)),t.removeClass("dcg-focus"),o(t[0]).clearSelection(),this.updateNeedsFakeKeypad()},e.addSettingsObserver=function(e,t){var n=this,i=function(){n.isVisible&&t.apply(n,arguments)};this.__settingsObservers.push(i),this.settings.observe(e,i)},e.renderAllSettings=function(){for(var e=0;e<this.__settingsObservers.length;e++)this.__settingsObservers[e]();this.updateMathquillInputs()},e.renderShowXAxis=function(){var e=this.settings.showXAxis;this.$(".dcg-action-toggle-x-axis .dcg-checkbox-box").toggleClass("dcg-checked",e),this.$(".dcg-action-toggle-x-axis").attr("aria-checked",!!e)},e.renderShowYAxis=function(){var e=this.settings.showYAxis;this.$(".dcg-action-toggle-y-axis .dcg-checkbox-box").toggleClass("dcg-checked",e),this.$(".dcg-action-toggle-y-axis").attr("aria-checked",!!e)},e.renderProjectorMode=function(){var e=this.settings.projectorMode;this.$(".dcg-action-projectormode").toggleClass("dcg-active",!!e).attr("aria-pressed",!!e)},e.renderArrows=function(){var e=this.settings.xAxisArrowMode;this.$(".dcg-arrows").removeClass("dcg-active").removeAttr("aria-pressed"),this.$(".dcg-arrows[dcg-arrows="+e+"]").addClass("dcg-active").attr("aria-pressed",!0),this.$(".dcg-action-toggle-arrows .dcg-checkbox-box").toggleClass("dcg-checked",e!==g.NONE),this.$(".dcg-action-toggle-arrows").attr("aria-checked",e!==g.NONE),this.$(".dcg-arrow-group").toggle(e!==g.NONE)},e.renderMinorGridlines=function(){var e=!!this.settings.showGrid&&!this.settings.polarMode;this.$(".dcg-action-toggle-minor-gridlines").toggleClass("dcg-hidden",!e);var t=0===this.settings.xAxisMinorSubdivisions;this.$(".dcg-action-toggle-minor-gridlines .dcg-checkbox-box").toggleClass("dcg-checked",t),this.$(".dcg-action-toggle-minor-gridlines").attr("aria-checked",!!t)},e.renderDegreeMode=function(){var e=this.settings.degreeMode;this.$(".dcg-action-radianmode").toggleClass("dcg-active",!e).attr("aria-pressed",!e),this.$(".dcg-action-degreemode").toggleClass("dcg-active",!!e).attr("aria-pressed",!!e)},e.renderSquareAxes=function(){var e=!this.settings.squareAxes;this.$(".dcg-action-zoom-square").toggle(e).attr("aria-pressed",e)},e.renderShowAxisNumbers=function(){var e=this.settings.xAxisNumbers;this.$(".dcg-action-toggle-axis-numbers .dcg-checkbox-box").toggleClass("dcg-checked",e),this.$(".dcg-action-toggle-axis-numbers").attr("aria-checked",e)},e.renderXAxisLabel=function(){var e=this.$(".dcg-x-axis-label"),t=this.settings.showXAxis;e.val()!==this.settings.xAxisLabel&&e.val(this.settings.xAxisLabel),t?e.prop("disabled",!1).removeAttr("aria-disabled"):e.prop("disabled",!0).attr("aria-disabled")},e.renderYAxisLabel=function(){var e=this.$(".dcg-y-axis-label"),t=this.settings.showYAxis;e.val()!==this.settings.yAxisLabel&&e.val(this.settings.yAxisLabel),t?e.prop("disabled",!1).removeAttr("aria-disabled"):e.prop("disabled",!0).attr("aria-disabled")},e.renderXStep=function(){var e=this.settings.xAxisStep,t=this.settings.computedStepSizes&&this.settings.computedStepSizes.majorStepX,n=!(!e||!t||e===t||e===Math.PI);i(this.mathFields.xstep.el()).toggleClass("dcg-outofbounds",n),this.updateMathquillInputs()},e.renderYStep=function(){var e=this.settings.yAxisStep,t=this.settings.computedStepSizes&&this.settings.computedStepSizes.majorStepY,n=!(!e||!t||e===t||e===Math.PI);i(this.mathFields.ystep.el()).toggleClass("dcg-outofbounds",n),this.updateMathquillInputs()},e.renderShowGrid=function(){var e=this.settings.showGrid;this.$(".dcg-action-toggle-grid .dcg-checkbox-box").toggleClass("dcg-checked",e),this.$(".dcg-action-toggle-grid").attr("aria-checked",e),this.$(".dcg-grid-group").toggle(e)},e.renderPolarMode=function(){this.$(".dcg-action-cartesian").toggleClass("dcg-active",!this.settings.polarMode).attr("aria-pressed",!this.settings.polarMode),this.$(".dcg-action-polar").toggleClass("dcg-active",!!this.settings.polarMode).attr("aria-pressed",!!this.settings.polarMode),this.$(".dcg-step-container").toggleClass("dcg-disabled-input",this.settings.polarMode)},e.isMathquillFocused=function(){return this.$(".mq-editable-field.dcg-focus").length>0},e.isXRangeFocused=function(){return this.$(".dcg-x-axis-options .dcg-focus").length>0},e.isYRangeFocused=function(){return this.$(".dcg-y-axis-options .dcg-focus").length>0},e.updateMathquillInputs=function(){function e(e){var t=i(e.el()).data("dcg-limit"),n=a[t];e.latex()!==n&&e.latex(n)}if(this.isVisible&&!this.focusedOutRecently&&this.mathFields){var s=this.viewport,a=n(s);this.settings.xAxisStep?a.xstep=t(this.settings.xAxisStep,s.xmax-s.xmin):a.xstep="",this.settings.yAxisStep?a.ystep=t(this.settings.yAxisStep,s.ymax-s.ymin):a.ystep="";var o=[];this.isXRangeFocused()===!1&&(o.push(this.mathFields.xmin),o.push(this.mathFields.xmax),o.push(this.mathFields.xstep)),this.isYRangeFocused()===!1&&(o.push(this.mathFields.ymin),o.push(this.mathFields.ymax),o.push(this.mathFields.ystep)),r.each(o,e);var c=this.settings.computedStepSizes;""===a.xstep&&c&&c.majorStepX&&(a.xstep=t(c.majorStepX,s.xmax-s.xmin)),""===a.ystep&&c&&c.majorStepY&&(a.ystep=t(c.majorStepY,s.ymax-s.ymin))}},e._setViewportWithoutUpdatingGrapher=function(e){if(c(e,this.viewport))return!1;if(!e.isValid())return!1;var t=this.grapher.getProjection().viewport;return(t.ymax!==e.ymax||t.ymin!==e.ymin)&&(this.settings.lastChangedAxis="y"),(t.xmax!==e.xmax||t.xmin!==e.xmin)&&(this.settings.lastChangedAxis="x"),this.viewport=e,this.updateMathquillInputs(),!0},e.setViewport=function(e){var t=this._setViewportWithoutUpdatingGrapher(e);t&&this.grapher.viewportController.setViewport(e)}});return y.formatLatex=t,y.formatViewport=n,y}),define("loadcss!css/pillboxes",function(){}),define("main/pillbox_view",["require","pjs","underscore_view","template!pillboxes","main/settings_view","i18n","tipsy","loadcss!css/pillboxes"],function(e){var t=e("pjs"),n=e("underscore_view"),i=e("template!pillboxes"),r=e("main/settings_view"),s=e("i18n");e("tipsy"),e("loadcss!css/pillboxes");var a=t(n,function(e,t){e.init=function(e){t.init.call(this),this.template=i,this.viewportController=e,this.grapher=e.grapher,this.settingsView=r(e.grapher),this.settingsView.headerView=this},e.getTemplateParams=function(){var e=this;return{t:function(t,n){return s.t(t,n,e.settingsView.settings.language)},brandingLink:window.iframeEmbedBrandingLink?window.iframeEmbedBrandingLink:""}},e.onLanguageChange=function(){this.rerender(),this.settingsView&&this.settingsView.rerender()},e.didCreateElement=function(){t.didCreateElement.call(this),e=this.settingsView,e.appendTo(this.$()),this.settingsView.setupOpenButton(this.$(".dcg-action-settings"),"dcg-tap"),this.$(".dcg-action-zoomin").on("dcg-tap",this.zoomIn.bind(this)),this.$(".dcg-action-zoomrestore").on("dcg-tap",this.zoomRestore.bind(this)),this.$(".dcg-action-zoomout").on("dcg-tap",this.zoomOut.bind(this)),this.$().tipsy({fade:"fast",title:"tooltip",wait:500,delegate:".dcg-tooltip-e",gravity:"e"}),this.viewportController.grapher.settings.observe("zoomedDefault",this.renderZoomDefault.bind(this))},e.popoverHeight=function(){return this.graphpaperHeight-12},e.didInsertElement=function(){this.renderZoomDefault()},e.renderZoomDefault=function(){var e=this.viewportController.grapher.settings.zoomedDefault;this.$(".dcg-action-zoomrestore").toggleClass("dcg-disabled",!!e).attr("aria-disabled",!!e)},e.zoomIn=function(){this.viewportController.zoom("in")},e.zoomRestore=function(){this.viewportController.zoom("default")},e.zoomOut=function(){this.viewportController.zoom("out")}});return a}),define("main/layout_controller",["require","console","pjs","jquery"],function(e){var t=e("console"),n=e("pjs"),i=e("jquery");return n(function(e){e.init=function(e,t,n){if(this.views=e,this.$root=t,this.currentScreen={},this.triggerGraphpaperRectChanged=null,this.isAnimating=!1,this.minExpressionWidth=290,this.$grapher=this.views.grapher.$,this.graphSettings=n,this.resize(),n.config.resizeLoop){var i=function(){this.resize(),setTimeout(i,200)}.bind(this);i()}this.views.expressionsView&&this.views.expressionsView.observe("expressionsVisible",function(){this.views.expressionsView.expressionsVisible?this.$root.removeClass("dcg-fullscreen"):this.$root.addClass("dcg-fullscreen"),this.resize()}.bind(this)),this.views.keypadView&&this.views.keypadView.observe("isOpen",this.resize.bind(this))},e.keypadOpen=function(){return!!this.views.keypadView&&this.views.keypadView.isOpen},e.expressionsVisible=function(){return!!this.views.expressionsView&&this.views.expressionsView.expressionsVisible},e.didViewportChange=function(e){return e.width!==this.currentScreen.width||e.height!==this.currentScreen.height||this.keypadOpen()!==this.currentScreen.keypadOpen||this.expressionsVisible()!==this.currentScreen.expressionsVisible},e.resize=function(){if(!this.isAnimating&&this.triggerGraphpaperRectChanged){var e=this.$root[0].getBoundingClientRect();if(this.didViewportChange(e)){this.currentScreen.width=e.width,this.currentScreen.height=e.height,this.currentScreen.expressionsVisible=this.expressionsVisible(),this.currentScreen.keypadOpen=this.keypadOpen(),this.views.keypadView&&this.$root.toggleClass("dcg-keypad-open",!!this.views.keypadView.isOpen),this.$root.toggleClass("dcg-narrow",this.isNarrow(e.width)),this.$root.toggleClass("dcg-short",this.isShort(e.height));var t=e.width,n=this.$grapher[0].getBoundingClientRect().height;if(0===n||0===t)return void this.views.grapher.setIsVisible(!1);var i=!this.expressionsVisible();if(this.views.keypadView&&this.views.keypadView.height){var r=this.views.keypadView.height();this.views.expressionsView.setBottom(r),this.views.pillboxView&&this.views.pillboxView.settingsView&&this.views.pillboxView.settingsView.setBottom(r)}this.views.expressionsView&&this.views.expressionsView.setProperty("calcIsNarrow",this.isNarrow(t));var s=this.isNarrow(t)?t:356/.45>t?Math.floor(.45*t):356;s<this.minExpressionWidth&&(s=this.minExpressionWidth),this.isNarrow(t)||(s=2*Math.floor(.5*s)),this.views.expressionsView&&this.views.expressionsView.setMinWidth(s),this.views.pillboxView&&this.views.pillboxView.setProperty("graphpaperHeight",n),this.views.keypadView&&this.views.keypadView.setProperty("graphpaperHeight",n);var a=this.isNarrow(t)||i?0:s;this.views.grapher.$.css({left:a+"px",transform:null}),this.views.grapher.setIsVisible(t-a>0&&n>0),this.views.grapher.updateScreenSize(t-a,n),this.views.expressionsView&&this.views.expressionsView.ensureActiveChildIsVisible();var o={top:0,bottom:n,left:a,right:t,height:n,width:t-a};this.triggerGraphpaperRectChanged(o)}}},e.animationIsRunning=function(){return 0!==this.runningAnimations},e.isNarrow=function(e){return 450>e},e.isShort=function(e){return 480>=e},e.animateSlidingInterior=function(){this.isAnimating||(this.isAnimating=!0,setTimeout(function(){this.isAnimating=!1,this.resize()}.bind(this),this.parseTransitionDuration(".dcg-sliding-interior")))},e.parseTransitionDuration=function(e){var n=i(e),r=n.css("transition-duration");return"s"!==r[r.length-1]?(t.warn("Unexpected transition-duration format. Expected a number followed by 's' but saw "+r),0):1e3*parseFloat(r.slice(0,-1))},e.defocusMobile=function(){var e=i(document.activeElement);0!==e.filter("input, textarea").length&&i("<input />").prependTo("body").focus().attr({readonly:"readonly",disabled:"true"}).blur().remove()}})}),define("loadcss!css/tour",function(){}),define("tours/trip",["require","jquery","pjs","mathquill","scroll_helpers"],function(e){var t=e("jquery"),n=e("pjs"),i=e("mathquill"),r=e("scroll_helpers"),s=n({init:function(e){this.settings=e,this.__cachedStepName=null},ensureTripBlock:function(){if(!this.$tripBlock){var e=['<div class="trip-block">','<div class="trip-interior">','<a class="trip-close">&times;</a>','<div class="trip-content"></div>',"</div>",'<div class="trip-arrow"></div>',"</div>"].join(""),n=this,i=this.$tripBlock=t(e);i.css({top:"-100px"}),t("body").append(i),i.find(".trip-close").on("dcg-tap",function(e){e.preventDefault(),n.stop()}),this.bindKeyEvents()}},cleanup:function(){return this.unbindKeyEvents(),this.hideTripBlock(),!1},bindKeyEvents:function(){var e=this;t(document).on({"keydown.Trip":function(t){e.keyEvent.call(e,t)}})},unbindKeyEvents:function(){t(document).off("keydown.Trip")},keyEvent:function(e){27===e.which&&this.stop()},stop:function(){this.hideTripBlock(),this.settings.onTripStop(),this.__cachedContent=null,this.__cachedSel=null},showTripBlock:function(e){if(this.ensureTripBlock(),"string"==typeof e.sel&&(e.sel=t(e.sel)),e.sel=e.sel.filter(":visible"),e.content!==this.__cachedContent||e.sel[0]!==this.__cachedSel){this.__cachedContent=e.content,this.__cachedSel=e.sel[0],e.scrollContainer&&r.scrollVisible(e.sel,e.scrollContainer,0);var n=this.$tripBlock;n.find(".trip-content").html(e.content),n.toggleClass("trip-hidden",!!e.hidden);var s=e.sel,a=s.outerWidth(),o=s.outerHeight(),c=n.outerWidth(),l=n.outerHeight(),u=10,h=10;n.removeClass("trip-e trip-s trip-w trip-n");var d=0;switch(e.position){case"e":n.addClass("trip-e"),n.css({left:s.offset().left+a+h,top:s.offset().top-(l-o)/2});break;case"s":n.addClass("trip-s");var p=s.offset().left+(a-c)/2;n.css({left:p,top:s.offset().top+o+u}),p+c>t(window).width()-1&&(d=t(window).width()-1-p-c),1>p&&(d=1-p);break;case"w":n.addClass("trip-w"),n.css({left:s.offset().left-(h+c),top:s.offset().top-(l-o)/2});break;default:n.addClass("trip-n"),n.css({left:s.offset().left+(a-c)/2,top:s.offset().top-u-l})}n.find(".trip-interior").css("transform","translate("+d+"px, 0)"),n.css({display:"inline-block"}),n.find(".trip-math:not(.mq-math-mode)").each(function(){i.StaticMath(this)})}},fadeInTripBlock:function(){this.ensureTripBlock();var e=this.$tripBlock;setTimeout(function(){e.addClass("trip-is-loaded")},0)},hideTripBlock:function(){this.$tripBlock&&this.$tripBlock.removeClass("trip-is-loaded")}});return s}),define("tours/tour_manager",["require","pjs","analytics/google_analytics","./trip"],function(e){var t=e("pjs"),n=e("analytics/google_analytics"),i=e("./trip"),r=t(function(e,t){e.init=function(){this.tripManager=new i({onTripStop:this.stopTour.bind(this)}),this.currentStep=void 0,this.currentTour=void 0},e._tripLoop=function(){if(clearTimeout(this.__tripLoopTimeout),this.running){var e=this;e._advanceTrip(),e.__tripLoopTimeout=setTimeout(e._tripLoop.bind(e),200)}},e._advanceTrip=function(){var e=this.currentTour.update(),t=(new Date).getTime();if(e&&this.currentStep&&e.content!==this.currentStep.content){if(this.currentStep.delayBeforeExit){if(this.throttleTimer&&t-this.throttleTimer<this.currentStep.delayBeforeExit)return;if(!this.throttleTimer)return void(this.throttleTimer=t)}e.delayBeforeEnter&&(this.currentStep=e,this.throttleTimer=t)}if(!(e&&this.currentStep&&e.content===this.currentStep.content&&this.throttleTimer&&t-this.throttleTimer<this.currentStep.delayBeforeEnter)&&(this.throttleTimer=null,e&&!e.doNotUpdate)){if(this.currentStep=e,e["final"])return this.finishTour(e,5),void n.send(["_trackEvent","Completed tour",e.endingMsg]);this.tripManager.showTripBlock(e)}},e.updateNow=e._advanceTrip,e.startTour=function(e){this.running||(this.currentTour=e,this.running=!0,this._tripLoop(),this.tripManager.fadeInTripBlock())},e.closingMsg="<b>__endingMessage__</b><br>This message will self-destruct in __seconds__...",e.finishTour=function(e,t){clearTimeout(this.__tripLoopTimeout),this.running=!1;var n=this;return 0>t?void n.tripManager.stop():(e.endingMsg&&(e.content=n.closingMsg.replace("__endingMessage__",e.endingMsg).replace("__seconds__",t)),n.tripManager.showTripBlock(e),void setTimeout(function(){n.finishTour(e,t-1)},1e3))},e.stopTour=function(){this.running=!1,this.currentStep=void 0,this.currentTour=void 0}});return r}),define("template!toast",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div class="dcg-toast-container">\n  <span class="dcg-toast">\n    <i class="dcg-icon-error"></i>\n    <i class="dcg-icon-remove dcg-action-hide"></i>\n    <span class="dcg-msg dcg-variable-msg"></span>\n    <a role="link" tabindex=0 class="dcg-undo dcg-action-toast-undo">'+(null==(__t=t("Undo"))?"":_.escape(__t))+'</a>\n    <a role="link" tabindex=0 class="dcg-learn-more-link" target="_blank">'+(null==(__t=t("Learn more"))?"":_.escape(__t))+"</a>\n  </span>\n</div>\n";return __p}}),define("loadcss!css/toast",function(){}),define("main/toast",["require","pjs","lib/aria","browser","underscore_view","template!toast","loadcss!css/toast"],function(e){var t=e("pjs"),n=e("lib/aria"),i=e("browser"),r=e("underscore_view"),s=e("template!toast");e("loadcss!css/toast");var a=t(r,function(e,t){e.template=s,e.init=function(e){t.init.call(this),this.graphChangeMonitor=e,this.visible=!1},e.didCreateElement=function(){var e=this;e.graphChangeMonitor.observeEvent("notifyChange",function(){e.isVisible()&&e.hide()}),this.$(".dcg-action-toast-undo").on("dcg-tap",function(){e.undoCallback&&e.undoCallback(),e.hide()}),this.$().on("dcg-tap",".dcg-action-hide",function(){this.hide(),this.options.onHide&&this.options.onHide()}.bind(this)),this.$().on("dcg-tap",".dcg-learn-more-link",function(){return window.open(this.options.learnMoreLink)?(this.hide(),void(this.options.onLearnMore&&this.options.onLearnMore())):alert("Popup window blocked. Please allow popups from desmos.com.")}.bind(this)),this.$().toggle(!1)},e.show=function(e,t){t=t||{},this.options=t,clearTimeout(this.hideTimeout),this.$(".dcg-toast-container").fadeOut("fast"),this.$(".dcg-toast").toggleClass("dcg-show-undo",t.hasOwnProperty("undoCallback")),this.$(".dcg-toast").attr("style",t.style||null),this.$(".dcg-learn-more-link").toggle(t.hasOwnProperty("learnMoreLink")),this.$().fadeIn("fast"),t.hasOwnProperty("undoCallback")&&(e+=i.IS_APPLE?" Press CMD+Z to undo.":" Press CTRL+Z to undo."),t.hasOwnProperty("noAria")?this.$(".dcg-variable-msg").empty().html(e):n.addAria(this.$(".dcg-variable-msg")).empty().html(e),this.undoCallback=t.undoCallback,this.visible=!0;var r=t.hasOwnProperty("hideAfter")?t.hideAfter:6e3;if(r>0){var s=this;this.hideTimeout=setTimeout(function(){s.hide()},r)}},e.hide=function(){clearTimeout(this.hideTimeout),this.$().fadeOut("fast"),this.visible=!1},e.isVisible=function(){return this.visible}});return a}),define("undoredo",["require","underscore","pjs"],function(e){var t=e("underscore"),n=e("pjs"),i=n(function(e,n){e.init=function(){this.undos=[],this.redos=[],this.changesCallbacks=[],this.__batchingDepth=0,this.__silentDepth=0,this.batchedWrapper=function(e){e()}},e.clear=function(){this.undos.splice(0),this.redos.splice(0),this._triggerChange()},e.pushUndo=function(e){this.undos.push(e)},e.pushRedo=function(e){this.redos.push(e)},e.canUndo=function(){return this.undos.length>0},e.canRedo=function(){return this.redos.length>0},e.undo=function(){if(this.canUndo()){var e=this.undos.pop();this.silent(e.undo),this.pushRedo(e),this._triggerChange()}},e.redo=function(){if(this.canRedo()){var e=this.redos.pop();this.silent(e.redo),this.pushUndo(e),this._triggerChange()}},e.oneTransaction=function(e,t){0===this.__batchingDepth&&(this.__batchedTransaction=this._makeBatchedTransaction(t)),this.__batchingDepth++;try{this.batchedWrapper(e)}finally{this.__batchingDepth--}0===this.__batchingDepth&&(this.addTransaction(this.__batchedTransaction),this.__batchedTransaction=null)},e.performAndAddTransaction=function(e){this.silent(e.redo),this.addTransaction(e)},e.addTransaction=function(e){return this._isSilent()||this._foldTransaction(e)?void 0:this._isBatching()?void this.__batchedTransaction.__batched__.push(e):void this._commitTransaction(e)},e._foldTransaction=function(e){if(!e.foldType)return!1;var t=this.undos[this.undos.length-1];if(this._isBatching()){var n=this.__batchedTransaction.__batched__;t=n[n.length-1]}return t&&t.foldType===e.foldType?(t.redo=e.redo,this._triggerChange(),!0):!1},e.silent=function(e){this.__silentDepth++;try{this.batchedWrapper(e)}finally{this.__silentDepth--}},e._isSilent=function(){return this.__silentDepth>0},e._makeBatchedTransaction=function(e){var t={foldType:e};return t.__batched__=[],t.undo=function(){for(var e=t.__batched__,n=e.length-1;n>=0;n--)e[n].undo()},t.redo=function(){for(var e=t.__batched__,n=0;n<e.length;n++)e[n].redo()},t},e._isBatching=function(){return this.__batchingDepth>0},e._commitTransaction=function(e){this.redos.splice(0),this.pushUndo(e),this._triggerChange()},e._triggerChange=function(){t.each(this.changesCallbacks,function(e){e()})}});return i}),define("ipad.scrollfix",["require","jquery"],function(e){var t=e("jquery"),n=0,i=1,r=2,s=!1,a=function(){o(document),s=!0},o=function(e){s||t(e).bind("touchstart",function(e){var s=t(e.target),a=n,o=null;if(!s.closest("[disablescroll]").length)for(;a===n&&s.length&&void 0!==s[0].tagName;){var c=s.css("overflow"),l=s.css("overflow-y");if("hidden"!==c&&"visible"!==c&&"hidden"!==l&&"hidden"!==l){var u=s.scrollTop();0!==u&&(a=r),s.scrollTop(u+1),s.scrollTop()!==u&&(a=i|a,s.scrollTop(u))}s=s.parent()}if(a!==n){o=[];for(var h=e.originalEvent.touches,d=0;d<h.length;d++){var p={};for(var f in h[d])h[d].hasOwnProperty(f)&&(p[f]=h[d][f]);o.push(p)}}t(document).on("touchmove.scrollfix",function(e){if(o){var t=o[0],s=e.originalEvent.touches[0],c=s.screenY-t.screenY;c>0&&!(a&r)?a=n:0>c&&!(a&i)&&(a=n),c&&(o=null)}a===n&&e.preventDefault()}),t(document).on("touchend.scrollfix",function(){t(document).off(".scrollfix")})})};return{limitScrollOnElement:o,limitScrollOnDocument:a}}),define("loadcss!css/calculator_embed",function(){}),define("loadcss!css/inputs",function(){}),define("loadcss!css/normalize",function(){}),define("loadcss!css/projector_mode",function(){}),define("loadcss!css/smallscreen",function(){}),define("loadcss!css/desmos-icons",function(){}),define("main/calc_embed",["require","console","jquery","pjs","main/evaluator","graphing/grapher","graphing/audiograph","main/graph_settings","graphing/viewport","expressions/list","expressions/list_view","main/instancehotkeys","main/keypad_view","main/state_controller","main/propagate_selection","main/graph_change_monitor","./table_paste_helper","main/pillbox_view","main/layout_controller","loadcss!css/tour","tours/mathart","tours/tour_manager","main/toast","undoredo","underscore_model","ipad.scrollfix","loadcss!css/calculator_embed","loadcss!css/inputs","loadcss!css/normalize","loadcss!css/projector_mode","loadcss!css/smallscreen","loadcss!css/desmos-icons"],function(e){var t=e("console"),n=e("jquery"),i=e("pjs"),r=e("main/evaluator"),s=e("graphing/grapher"),a=e("graphing/audiograph"),o=e("main/graph_settings"),c=e("graphing/viewport"),l=e("expressions/list"),u=e("expressions/list_view"),h=e("main/instancehotkeys"),d=e("main/keypad_view"),p=e("main/state_controller"),f=e("main/propagate_selection"),m=e("main/graph_change_monitor"),g=e("./table_paste_helper"),v=e("main/pillbox_view"),y=e("main/layout_controller");e("loadcss!css/tour");var b=e("tours/mathart"),_=e("tours/tour_manager"),x=e("main/toast"),w=e("undoredo"),S=e("underscore_model"),k=e("ipad.scrollfix");e("loadcss!css/calculator_embed"),e("loadcss!css/inputs"),e("loadcss!css/normalize"),e("loadcss!css/projector_mode"),e("loadcss!css/smallscreen"),e("loadcss!css/desmos-icons");var E=i(function(e){e.init=function(e,i,E){function T(){var e;for(e in z){var t=z[e];$.updateSketch(e,t),R.onGraphComputed(e,t)}for(e in U)$.updateIntersections(e,U[e]);z={},U={}}var C=this.graphChangeMonitor=m(),M=function(){C.triggerEvent("notifyChange")},P=o();for(var A in E)P.config.setProperty(A,E[A]);P.config.keypad&&P.config.expressions&&!P.config.nativeOnscreenKeypad&&(window.overrideNativeOnscreenKeypad=!0);var I=["dcg-container","dcg-tap-container"];P.config.settingsMenu||I.push("dcg-no-settings-menu"),P.config.expressionsTopbar||I.push("dcg-no-expression-topbar"),P.config.zoomButtons||I.push("dcg-no-zoom"),P.config.branding||I.push("dcg-no-branding"),P.config.border&&I.push("dcg-default-border");var q=n('<div class="'+I.join(" ")+'">'),D=n('<div class="dcg-grapher">');P.config.disableScrollFix||k.limitScrollOnElement(q);var L=w();L.batchedWrapper=function(e){V.batch(e)};var O,N,F,j=x(C),V=r(i,L),R=l(L,P);(!P.config.expressions||P.config.expressionsCollapsed)&&q.addClass("dcg-fullscreen"),
P.config.expressions&&(N=u(R,q,j,P)),D.appendTo(q),j.appendTo(q),P.config.keypad&&N&&(O=d(P),O.appendTo(q)),P.config.graphpaper||q.addClass("dcg-no-graphpaper"),q.appendTo(e);var $=new s(D,P,q,L);P.registerCallbacks($,N,q,V,L),N&&(F=new a($,R,N,j,V));var B=v($.viewportController),G=p($,R,P,V);P.config.redrawSlowly||($.redrawSlowly=$.redrawAllLayers),L.changesCallbacks.push(M),V.triggerStatusChange=function(e){R.onChange(e)};var z={},U={};V.triggerGraphComputed=function(e,t){z[e]=t,F&&F.speakGraphingAlert(e)},V.triggerRender=function(){T(),$.poiController.handleTraceUpdate(),$.redrawAllLayers(),F&&F.recomputePoints()},V.triggerRenderSlowly=function(){T(),$.redrawSlowly()},V.triggerRemove=function(e){$.hide(e)},V.triggerUpdateIntersections=function(e,t){Object.keys(z).length?U[e]=t:($.updateIntersections(e,t),$.redrawAllLayers())},R.triggerAddExp=function(e){e&&(""===e.latex&&"table"!==this.type&&$.removeGraphSketch(e.id),V.addStatement(e))},R.triggerRemoveExp=function(e){V.removeStatement(e)},R.triggerRemoveExps=function(e){V.removeStatements(e)},R.observe("drawOrder",function(){$.setSketchOrder(R.getProperty("drawOrder"))}),R.batchEvaluation=V.batch.bind(V),N&&(N.triggerClearGraph=function(){var e=G.getState();G.setBlank(),R.setSelected(0),N.getSelectedView().addFocus();var t=function(){G.setState(e)};j.show("Graph cleared.",{undoCallback:t})},N.triggerResetGraph=function(){var e=G.getState();G.setState(P.defaultState);var t=function(){G.setState(e)};j.show("Graph reset.",{undoCallback:t})}),R.triggerAddImage=function(e){e.imageObj.width&&e.imageObj.height?$.addGraphImage(e):n(e.imageObj).on("load.calc_load",function(){$.addGraphImage(e),$.redrawAllLayers(),M()})},R.triggerRemoveImage=function(e){n(e.imageObj).off("load.calc_load"),$.removeGraphImage(e.id),$.redrawAllLayers()},R.triggerRedrawImages=function(){$.redrawAllLayers()},f(R,$,V),O&&N&&O.registerEditableView(N),O&&B&&B.settingsView&&O.registerEditableView(B.settingsView);var H=y({expressionsView:N,keypadView:O,pillboxView:B,grapher:$},q,P);$.poiController.triggerStartMovingPoint=function(e){R.onStartMovingPoint(e)},$.poiController.triggerMovePoint=function(e,t,n){R.onMovePoint(e,t,n)},$.poiController.triggerStopMovingPoint=function(e){R.onStopMovingPoint(e)},$.poiController.triggerSelectExpression=function(e){R.setSelected(R.getItemById(e))};var W=S();W.setProperties({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0}}),this.graphpaperBounds=W,H.triggerGraphpaperRectChanged=function(e){W.setProperty("pixelCoordinates",{top:e.top,bottom:e.bottom,left:e.left,right:e.right,width:e.width,height:e.height}),$.triggerProjectionChanged()},$.triggerProjectionChanged=function(){var e=$.getProjection();$.settings.setProperty("zoomedDefault",$.viewportController.isZoomRestored()),$.syncSquareAxes(),V.setViewState({viewport:e.viewport.toObject(),screen:e.screen}),B.settingsView._setViewportWithoutUpdatingGrapher(e.viewport),W.setProperty("mathCoordinates",{top:e.viewport.ymax,bottom:e.viewport.ymin,left:e.viewport.xmin,right:e.viewport.xmax,width:e.viewport.xmax-e.viewport.xmin,height:e.viewport.ymax-e.viewport.ymin})},$.triggerProjectionChanged(),W.observe("mathCoordinates",M),N&&N.appendTo(q),B.appendTo(q),n(window).on("dcg-tapstart",function(e){var t=n(e.target);t.closest(q).length||t.hasClass("dcg-shell")||R.setSelected(null)}),n(window).resize(H.resize.bind(H)),this.expressionsModel=R,N&&(this.expressions=N),this.grapher=$,this.evaluator=V,this.stateController=G,this.getState=G.getState.bind(G),this.setStateFromURL=G.setStateFromURL.bind(G),this.expressionsView=N,this.undoRedo=L;var Y=this.toast=function(e,t){j.show(e,t)};this.hasVisibleAndUndoableToast=function(){return j.isVisible()&&j.undoCallback},this.toastUndo=function(){j.undoCallback(),j.hide()},this.setState=G.setState.bind(G),this.setBlank=G.setBlank.bind(G),this.clearHistory=L.clear.bind(L),G.triggerSetState=function(){C.setProperty("hasUnsavedChanges",!1)},this.tourManager=_({evaluator:V}),this.tourManager.TOURS=b;var X=this.setViewport=function(e){$.viewportController.setViewport(new c(e[0],e[1],e[2],e[3]))};if(this.resize=function(){H.resize()},this.addFocus=function(){N&&(R.setSelected(0),N.getSelectedView().addFocus())},this.interceptTouch=function(){var e=D;N&&(e=e.add(N.$(".dcg-expression-top-bar"))),O&&(e=e.add(O.$())),e.on("touchstart",function(e){e.preventDefault()}),e.on("touchend",function(e){n(e.target).closest(".dcg-do-not-blur")||H.defocusMobile()})},this.setOptions=function(e){var n=!1;e.hasOwnProperty("solutions")&&(t.warn("Deprecated option: solutions. Use pointsOfInterest instead."),e.pointsOfInterest=e.solutions),e.hasOwnProperty("pointsOfInterest")&&(P.config.setProperty("pointsOfInterest",e.pointsOfInterest),q.toggleClass("dcg-hide-poi-labels",!e.pointsOfInterest)),e.hasOwnProperty("settingsMenu")&&q.toggleClass("dcg-no-settings-menu",!e.settingsMenu),e.hasOwnProperty("border")&&q.toggleClass("dcg-default-border",!!e.border),e.hasOwnProperty("branding")&&q.toggleClass("dcg-no-branding",!e.branding),e.hasOwnProperty("expressionsTopbar")&&(q.toggleClass("dcg-no-expression-topbar",!e.expressionsTopbar),n=!0),e.hasOwnProperty("graphpaper")&&(q.toggleClass("dcg-no-graphpaper",!e.graphpaper),n=!0),e.hasOwnProperty("zoomButtons")&&q.toggleClass("dcg-no-zoom",!e.zoomButtons),e.hasOwnProperty("expressionsCollapsed")&&N&&(e.expressionsCollapsed?N.hideExpressions():N.showExpressions()),e.hasOwnProperty("keypad")&&t.warn("Bad option {keypad: "+e.keypad+"}. The keypad can only be added or removed at load time, not at runtime."),e.hasOwnProperty("expressions")&&t.warn("Bad option {expressions: "+e.expressions+"}. The expressions can only be added or removed at load time, not at runtime."),e.hasOwnProperty("lockViewport")&&P.config.setProperty("lockViewport",e.lockViewport),n&&H.resize()},this.expressionsView){var Q=g(this.expressionsView,L,Y,$.viewportController.getViewport.bind($.viewportController),X);Q.bindListenerTo(this.expressionsView.$())}H.resize(),G.setBlank();var K=["degreeMode"],Z={};K.forEach(function(e){void 0!==E[e]&&(Z[e]=E[e])}),P.setGraphSettings(Z),P.config.expressionsCollapsed&&this.setOptions({expressionsCollapsed:!0}),P.config.hasOwnProperty("pointsOfInterest")&&this.setOptions({pointsOfInterest:P.config.pointsOfInterest}),P.observe("language",function(){var e=G.getState();N&&(N.onLanguageChange(),N.minWidthHasBeenSet=!1,N.setMinWidth(N.minWidth),Q.bindListenerTo(N.$())),B&&B.onLanguageChange(),O&&O.onLanguageChange(),G.setState(e)}),this.instanceHotkeys=new h(q,R,N)},e.tick=function(e){this.expressionsModel.tick(e),this.expressionsView&&this.expressionsView.tick(e),this.grapher.tick(e)}});return E}),define("main/calc_headless",["require","pjs","main/evaluator","main/graph_settings","expressions/list","main/state_controller","undoredo","underscore_model"],function(e){var t=e("pjs"),n=e("main/evaluator"),i=e("main/graph_settings"),r=e("expressions/list"),s=e("main/state_controller"),a=e("undoredo"),o=e("underscore_model"),c=t(function(e){e.init=function(e,t){var c=i();for(var l in t)c.config.setProperty(l,t[l]);var u=a();u.batchedWrapper=function(e){h.batch(e)};var h=n(e,u),d=r(u,c),p=s(void 0,d,c,h);h.triggerStatusChange=function(e){d.onChange(e)},d.triggerAddExp=function(e){e&&h.addStatement(e)},d.triggerRemoveExp=function(e){h.removeStatement(e)},d.triggerRemoveExps=function(e){h.removeStatements(e)},d.batchEvaluation=h.batch.bind(h);var f=o();f.setProperties({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0}}),this.graphpaperBounds=f,this.expressionsModel=d,this.evaluator=h,this.stateController=p,this.getState=p.getState.bind(p),this.setStateFromURL=p.setStateFromURL.bind(p),this.undoRedo=u,this.setState=p.setState.bind(p),this.setBlank=p.setBlank.bind(p),this.clearHistory=u.clear.bind(u),this.setViewport=function(e){},this.resize=function(){},this.setOptions=function(e){},p.setBlank()},e.tick=function(e){}});return c}),define("loadcss!css/calc_basic",function(){}),function(){define("cjsx/expressions/basic-list-model",["require","pjs","underscore","main/evaluator","undoredo","graphing/label"],function(e){var t,n,i,r,s;return i=e("pjs"),s=e("underscore"),t=e("main/evaluator"),r=e("undoredo"),n=e("graphing/label"),i(function(e){return e.init=function(e){return this.evaluationMode=e.evaluationMode,this.functionDefinition=e.functionDefinition,this.workerPool=e.workerPool,this._degreeMode=!1,this._setupEvaluator(),this._setBlank(),"neuteredScientific"===this.evaluationMode?this._onlyLastExpressionIsEditable=!0:this._onlyLastExpressionIsEditable=!1},e.getState=function(){var e;return{expressions:{list:s.map(this._expressions,function(e){return{id:e.id,latex:e.latex}})},settings:{degreeMode:this.getDegreeMode()},focusedIndex:null!=(e=this.getFocusedExpression())?e.index:void 0}},e.setState=function(e){var t,n,i,r,s,a,o;for(o=JSON.parse(JSON.stringify(null!=e?e:null)),s=[],a=o.expressions.list,n=0,i=a.length;i>n;n++)t=a[n],this.getExpressionById(t.id)?(r=this.getExpressionById(t.id),r.latex=t.latex,s.push(r)):s.push(t);return this._expressions=s,this._degreeMode=o.settings.degreeMode,this._updateIndexes(),(null==o.focusedIndex||this._onlyLastExpressionIsEditable)&&(o.focusedIndex=this._expressions.length-1),this._setFocusedByIndex(o.focusedIndex,!0)},e.canClear=function(){return this._expressions.length>1||""!==this._expressions[0].latex},e._setBlank=function(){return this._expressions=[{id:this._generateId(),latex:""}],this._updateIndexes()},e.clear=function(){return this._setBlank()},e.getExpressions=function(){return this._expressions},e.getExpressionById=function(e){return s.find(this._expressions,{id:e})},e._getExpressionByIndex=function(e){return this._expressions[e]},e._getNumberOfExpressions=function(){return this._expressions.length},e._updateIndexes=function(){var e,t,n,i;for(n=this._getNumberOfExpressions(),e=t=0,i=n;i>=0?i>t:t>i;e=i>=0?++t:--t)this._getExpressionByIndex(e).index=e,this._onlyLastExpressionIsEditable?this._getExpressionByIndex(e).readonly=e!==n-1:this._getExpressionByIndex(e).readonly=!1;return this._evaluate()},e._generateId=function(){return null!=this._lastId?this._lastId+=1:this._lastId=1,this._lastId+""},e._usesAnsById=function(e){return-1!==this.getExpressionById(e).latex.indexOf("\\operatorname{ans}")},e._getPreviousExpById=function(e){return this._getExpressionByIndex(this.getExpressionById(e).index-1)},e.createBlankAfterId=function(e){var t,n;if(this.getExpressionById(e).latex)return t=this.getExpressionById(e).index,n=this._generateId(),this._expressions.splice(t+1,0,{id:n,latex:""}),this._updateIndexes(),this.setFocusedById(n,!0)},e.conditionallyCopyPrevious=function(e){var t,n;return n=this._getPreviousExpById(e),t=this.getExpressionById(e),null!=n&&""===t.latex&&this._usesAnsById(n.id)?this.setLatexById(e,n.latex):void 0},e.backspaceAtFrontOfId=function(e){var t,n;if(!this._onlyLastExpressionIsEditable&&(t=this.getExpressionById(e),""===t.latex&&1!==this._getNumberOfExpressions()))return n=t.index,this._expressions.splice(n,1),this._updateIndexes(),this._setFocusedByIndex(Math.max(n-1,0),!0)},e.setLatexById=function(e,t){return this.getExpressionById(e).latex=t,this._evaluate()},e.setLatexOfFocusedExpression=function(e){return this.getFocusedExpression().latex=e,this._evaluate()},e._setFocusedByIndex=function(e,t){var n,i,r;if(!t||!this._getExpressionByIndex(e).readonly){if(t)for(n=i=0,r=this._getNumberOfExpressions();r>=0?r>i:i>r;n=r>=0?++i:--i)this._getExpressionByIndex(n).focused=!1;return this._getExpressionByIndex(e).focused=t}},e.setFocusedById=function(e,t){var n;return(n=this.getExpressionById(e))?this._setFocusedByIndex(n.index,t):void 0},e.focusPrevById=function(e){var t;return t=this.getExpressionById(e).index-1,t>=0?this._setFocusedByIndex(t,!0):void 0},e.focusNextById=function(e){var t;return t=this.getExpressionById(e).index+1,t<this._getNumberOfExpressions()?this._setFocusedByIndex(t,!0):void 0},e.getFocusedExpression=function(){return s.find(this._expressions,{focused:!0})},e.clearFocusedExpression=function(){var e;return(e=this.getFocusedExpression())?this.setLatexById(e.id,""):void 0},e.shouldShowClear=function(){var e,t;return 1===this._expressions.length?!1:(null!=(e=this.getFocusedExpression())&&null!=(t=e.latex)?t.length:void 0)>0},e.getLastExpression=function(){return this._getExpressionByIndex(this._getNumberOfExpressions()-1)},e.isLastExpressionEmpty=function(){return!!this.getLastExpression().latex},e.createAtEnd=function(){return this.createBlankAfterId(this.getLastExpression().id)},e.focusLastExpression=function(){return this._setFocusedByIndex(this._getNumberOfExpressions()-1,!0)},e.focusFirstExpression=function(){return this._setFocusedByIndex(0,!0)},e.getDegreeMode=function(){return this._degreeMode},e.setDegreeMode=function(e){return this._degreeMode=!!e,this._evaluate()},e._cleanupLatex=function(e){return e=e.trim(),"="===e.substr(e.length-1)&&(e=e.substr(0,e.length-1)),e},e._evaluate=function(){return this._evaluator.batch(function(e){return function(){return e.getExpressions().forEach(function(t){return e._evaluator.addStatement({id:t.id,index:t.index,latex:e._cleanupLatex(t.latex),shouldGraph:!1,type:"statement"})}),e._evaluator.setDegreeMode(e.getDegreeMode()),e._evaluator.markAsCompleteState()}}(this))},e._setupEvaluator=function(){return this._undoRedo=r(),this._evaluator=t(this.workerPool,this._undoRedo),this._evaluator.setEvaluationMode(this.evaluationMode),this._evaluator.setFunctionDefinition(this.functionDefinition),this._evaluator.triggerStatusChange=function(e){return function(t){var n,i,r,s,a,o,c,l;for(s in t)n=t[s],i=e.getExpressionById(s),i&&("number"==typeof n.constant_value?(i.value=n.constant_value,i.showEvaluation=n.is_evaluable):(i.value=null,i.showEvaluation=!1),i.error=n.error);for(r=a=0,c=e._getNumberOfExpressions();c>=0?c>a:a>c;r=c>=0?++a:--a)o=e._getExpressionByIndex(r-1),e._getExpressionByIndex(r).ans=null!=(l=null!=o?o.value:void 0)?l:null!=o?o.constant_value:void 0;return"function"==typeof e.onEvaluationUpdate?e.onEvaluationUpdate():void 0}}(this)}})})}.call(this),define("loadcss!css/expressions/basic-list",function(){}),define("loadcss!css/expressions/basic-expression",function(){}),function(){define("cjsx/expressions/basic-expression",["require","dcgview","i18n","lib/aria","mathquill","loadcss!css/expressions/basic-expression","graphing/label","jquery"],function(e){var t,n,i,r,s,a,o;return i=e("dcgview"),r=i.Components.If,o=e("i18n"),n=e("lib/aria"),a=e("mathquill"),e("loadcss!css/expressions/basic-expression"),s=e("graphing/label"),t=e("jquery"),i.createClass({willUnmount:function(){return this.$mathField.off(".view")},updateMathquillEditability:function(){return this.$mathField&&this.props.readonly()!==this._mathquillIsReadOnly?(null!=this.mathField&&(this.mathField.revert(),this.$mathField.off(".view")),this._mathquillIsReadOnly=this.props.readonly(),this.props.readonly()?this.mathField=a.StaticMath(this.$mathField[0]):(this.mathField=a.MathField(this.$mathField[0],{substituteKeyboardEvents:this.props.substituteKeyboardEvents,useDivisionSymbol:this.props.useDivisionSymbol(),useMultiplicationSymbol:this.props.useMultiplicationSymbol(),handlers:{reflow:function(e){return function(){return e.updateAnsValue()}}(this),upOutOf:function(e){return function(){return e.saveSpecialKeyEvent("upOutOf")}}(this),downOutOf:function(e){return function(){return e.saveSpecialKeyEvent("downOutOf")}}(this),enter:function(e){return function(){return e.saveSpecialKeyEvent("enterPressed")}}(this),deleteOutOf:function(e){return function(t){return t===a.L?e.saveSpecialKeyEvent("backspacePressed"):e.saveSpecialKeyEvent("deletePressed")}}(this)}}),this.$mathField.on("focusin.view focusout.view",this.onFocusEvent.bind(this)),this.hookupMQTapTouch())):void 0},didMountMathquill:function(e){return this.$mathField=t(e),this.updateMathquillEditability(),this.updateMathquill()},saveSpecialKeyEvent:function(e){return this.$mathField.data("specialKeyEvent",e)},hookupMQTapTouch:function(){return this.$mathField.on("dcg-tap.view",function(e){return function(t){var n,i;return"touch"!==t.device?!0:(i=t.originalEvent.changedTouches[0],a(e.$mathField[0]).clickAt(i.clientX,i.clientY,i.target),a(e.$mathField[0]).focus(),n=setTimeout(function(){var e;return n=null,e=Date.now()},0),a(e.$mathField[0]).ignoreNextMousedown(function(){return n||Date.now()-time<500}))}}(this))},updateMathquillAria:function(){return this.props.readonly()?void 0:this.mathField.setAriaLabel(this.props.t("Expression __index__",{index:this.props.index()+1}))},didUpdate:function(){return this.updateMathquill()},updateMathquill:function(){return this.updateMathquillEditability(),this.updateMathquillAria(),this.updateMathquillPostLabel(),this.updateLatex(),this.updateAnsValue(),this.updateFocused(),this.updateEvaluation()},updateAnsValue:function(){return this.cachedAnsValue!==this.props.ans()||this.cachedLatex!==this.props.latex()?(this.cachedAnsValue=this.props.ans(),this.cachedLatex=this.props.latex(),this.$mathField.find(".mq-ans").each(function(e){return function(n,i){var r,a,o;return a=e.props.ans(),r=t(i),null!=a?(o=s.truncatedHTMLLabel(a,{digits:6,addEllipses:!0,bigCutoff:1e4}),r.removeClass("dcg-invalid").html(o),e.updateMathquillPostLabel()):r.addClass("dcg-invalid").html('<i class="dcg-icon-error"></i>')}}(this))):void 0},updateLatex:function(){var e,t;return t=this.mathField.latex(),e=this.props.latex()||"",t!==e?this.mathField.latex(e):void 0},updateEvaluation:function(){var e;return this.evaluationNode&&null!=this.props.value()?(e="="+s.truncatedLatexLabel(this.props.value(),{digits:this.props.evaluationDigits(),bigCutoff:1e9}),e!==this.cachedEvaluationLatex?(this.cachedEvaluationLatex=e,this.evaluationNode.innerHTML=e,a.StaticMath(this.evaluationNode),this.mathField.__controller.blurred||this.mathField.__controller.scrollHoriz(),this.updateMathquillPostLabel()):void 0):void(this.cachedEvaluationLatex=null)},didMountEvaluation:function(e){return this.evaluationNode=e,this.updateEvaluation()},didUnmountEvaluation:function(){return this.evaluationNode=null},isFocused:function(){return!!t(document.activeElement).closest(this.$mathField).length},shouldBeFocused:function(){return!!this.props.focused()},updateFocused:function(){return this.props.readonly()||this.isFocused()===this.shouldBeFocused()?void 0:this.shouldBeFocused()?this.mathField.focus():this.mathField.clearSelection().blur()},onFocusEvent:function(e){return this.isFocused()!==this.shouldBeFocused()?this.dispatchMathquillEvent(e.type):void 0},dispatchMathquillEvent:function(e){return this.props.dispatch({type:e,id:this.props.id()})},getPostLabel:function(){return this.showError()?this.getError():this.props.showEvaluation()?"equals "+s.value(this.props.value()).ariaString:""},updateMathquillPostLabel:function(){var e;if(!this.props.readonly())return e=this.getPostLabel(),this.mathField.setAriaPostLabel(e),this._cachedAriaAlert!==e?(this._cachedAriaAlert=e,this._ariaAlertTimeout&&clearTimeout(this._ariaAlertTimeout),this._ariaAlertTimeout=setTimeout(function(t){return function(){return t.isFocused()&&n.alert(e),t._ariaAlertTimeout=null}}(this),this.showError()?5e3:1e3)):void 0},template:function(){return this.createElement("div",{"class":function(e){return function(){return{"dcg-basic-expression":!0,"dcg-focused":e.props.focused()}}}(this)},this.createElement("div",{"class":function(e){return function(){return{"dcg-exp-mathquill-container":!0,"dcg-readonly-exp":e.props.readonly()}}}(this)},this.createElement("div",{didMount:this.didMountMathquill.bind(this)})),this.createElement("div",{"class":i["const"]("dcg-exp-output-container")},this.createElement(r,{predicate:this.showError.bind(this)},function(e){return function(){return e.createElement("div",{"class":i["const"]("dcg-basic-expression-error dcg-tooltip tipsy-sticky"),"tipsy-dir":i["const"]("ne"),tooltip:e.getError.bind(e)},e.createElement("i",{"class":i["const"]("dcg-icon-error")}))}}(this)),this.createElement(r,{predicate:function(e){return function(){return e.props.showEvaluation()}}(this)},function(e){return function(){return e.createElement("div",{"class":i["const"]("dcg-basic-expression-value"),didMount:e.didMountEvaluation.bind(e),didUnmount:e.didUnmountEvaluation.bind(e)})}}(this))))},getError:function(){var e;return e=this.props.error(),e&&this.props.latex().length>0?this.props.t(o.unpack(e)):""},showError:function(){return this.props.latex()?this.props.error():!1}})})}.call(this),function(){define("cjsx/expressions/basic-list",["require","dcgview","loadcss!css/expressions/basic-list","tipsy","jquery","./basic-expression","scroll_helpers","conditional_blur"],function(e){var t,n,i,r,s,a,o,c;return i=e("dcgview"),o=i.Components,r=o.For,s=o.If,e("loadcss!css/expressions/basic-list"),e("tipsy"),t=e("jquery"),n=e("./basic-expression"),c=e("scroll_helpers"),a=e("conditional_blur"),i.createClass({template:function(){return this.createElement("div",{"class":i["const"]("dcg-basic-list-container"),role:i["const"]("complementary"),"aria-label":function(e){return function(){return e.props.t("Expression List")}}(this),didMount:this.didMountContainer.bind(this)},this.createElement("div",{"class":i["const"]("dcg-basic-list-placeholder"),didMount:this.didMountPlaceholder.bind(this)},this.createElement(s,{predicate:this.showAnswerHint.bind(this)},function(e){return function(){return e.createElement("div",{"class":i["const"]("dcg-answer-hint")},function(){return e.props.t("Your answers show up on this side.")})}}(this))),this.createElement(r,{each:this.props.expressions,key:function(e){return e.id}},this.createElement("div",{"class":i["const"]("dcg-basic-list")},function(e){return function(t,i){return e.createElement(n,{ans:function(){return t.ans},latex:function(){return t.latex},index:function(){return t.index},value:function(){return t.value},readonly:function(){return t.readonly},showEvaluation:function(){return t.showEvaluation},error:function(){return t.error},focused:function(){return t.focused},evaluationDigits:e.props.evaluationDigits,useDivisionSymbol:e.props.useDivisionSymbol,useMultiplicationSymbol:e.props.useMultiplicationSymbol,id:e["const"](i),dispatch:e.props.dispatch,substituteKeyboardEvents:e.props.substituteKeyboardEvents,t:e.props.t.bind(e)})}}(this))))},didMountPlaceholder:function(e){return t(e).on("dcg-tap",a)},showAnswerHint:function(){var e,t;return this.didHideAnswerHint?!1:(null!=(e=this.props.expressions())?e[0].showEvaluation:void 0)||this.didShowAnswerHint?(this.didShowAnswerHint=!0,this.props.expressions().length>1||""===(null!=(t=this.props.expressions())?t[0].latex:void 0)?(this.didHideAnswerHint=!0,!1):!0):!1},didUpdate:function(){return this.$container&&this.$container.find(".dcg-focused").length>0?c.scrollVisible(this.$container.find(".dcg-focused"),this.$container,50):void 0},didMountContainer:function(e){return this.$container=t(e),t(e).tipsy({fade:"fast",title:"tooltip",wait:500,gravity:"ne",delegate:".dcg-tooltip",sticky:!0})}})})}.call(this),define("loadcss!css/keypad/components/control-bar",function(){}),function(){define("cjsx/keypad/components/control-bar",["require","dcgview","mathquill","i18n","loadcss!css/keypad/components/control-bar"],function(e){var t,n,i;return t=e("dcgview"),n=e("mathquill"),i=e("i18n"),e("loadcss!css/keypad/components/control-bar"),t.createClass({template:function(){return this.createElement("div",{"class":t["const"]("dcg-keypad-control-bar dcg-do-not-blur"),role:t["const"]("group"),"aria-label":function(e){return function(){return i.t("Control Bar")}}(this)},this.children)}})})}.call(this),define("loadcss!css/keypad/components/control-btn",function(){}),function(){define("cjsx/keypad/components/control-btn",["require","dcgview","loadcss!css/keypad/components/control-btn"],function(e){var t,n;return t=e("dcgview"),e("loadcss!css/keypad/components/control-btn"),n=t.Components.Switch,t.createClass({template:function(){return this.createElement(n,{key:function(e){return function(){var t;return"function"==typeof(t=e.props).disabled?t.disabled():void 0}}(this)},function(e){return function(n){return n?e.createElement("div",{"class":t["const"]("dcg-keypad-control-btn dcg-disabled"),role:t["const"]("button"),"aria-disabled":t["const"](!0),"aria-label":e.props.ariaLabel||e.props.command,"dcg-command":e.props.command},e.children):e.createElement("div",{"class":function(){var t,n;return{"dcg-keypad-control-btn":!0,"dcg-selected":"function"==typeof(t=e.props).selected?t.selected():void 0,"dcg-selectable-btn":"function"==typeof(n=e.props).selectable?n.selectable():void 0}},role:t["const"]("button"),tabindex:function(){var t;return("function"==typeof(t=e.props).ignoreInTabOrder?t.ignoreInTabOrder():void 0)?-1:0},"aria-label":e.props.ariaLabel||e.props.command,"aria-pressed":function(){var t;return!!("function"==typeof(t=e.props).selected?t.selected():void 0)},"dcg-command":e.props.command,onTap:e.props.onTap},e.children)}}(this))}})})}.call(this),define("loadcss!css/keypad/components/control-toggle",function(){}),function(){define("cjsx/keypad/components/control-toggle",["require","dcgview","loadcss!css/keypad/components/control-toggle","lib/aria","i18n"],function(e){var t,n,i;return n=e("dcgview"),e("loadcss!css/keypad/components/control-toggle"),t=e("lib/aria"),i=e("i18n"),n.createClass({template:function(){return this.createElement("div",{"class":function(e){return function(){return{"dcg-keypad-control-toggle":!0,"dcg-toggled":e.props.toggled()}}}(this),role:n["const"]("button"),tabindex:n["const"](0),"aria-label":function(e){return function(){return e.props.toggled()?i.t("__toggled__ selected. Press Enter to switch to __default__.",{toggled:e.props.toggledAriaLabel(),"default":e.props.defaultAriaLabel()}):i.t("__default__ selected. Press Enter to switch to __toggled__.",{"default":e.props.defaultAriaLabel(),toggled:e.props.toggledAriaLabel()})}}(this),"aria-pressed":function(e){return function(){var t;return!!("function"==typeof(t=e.props).toggled?t.toggled():void 0)}}(this),onTap:this.onTap.bind(this)},this.createElement("div",{"class":n["const"]("dcg-ctrl-toggle-option")},this.props.defaultOption),this.createElement("div",{"class":n["const"]("dcg-ctrl-toggle-option")},this.props.toggledOption),this.createElement("div",{"class":n["const"]("dcg-ctrl-toggle-cover")}))},onTap:function(){return t.alert(this.props.toggled()?this.props.defaultAriaLabel():this.props.toggledAriaLabel()),this.props.onTap(this.props.command())}})})}.call(this),function(){define("cjsx/keypad/scientific-control-bar",["require","dcgview","./components/control-bar","./components/control-btn","./components/control-toggle"],function(e){var t,n,i,r,s;return r=e("dcgview"),t=e("./components/control-bar"),n=e("./components/control-btn"),i=e("./components/control-toggle"),s=r.Components.If,r.createClass({template:function(){return this.createElement(t,null,this.createElement(n,{command:r["const"]("main"),selected:function(e){return function(){return"main"===e.props.keyboardMode()}}(this),ignoreInTabOrder:r["const"](!0),selectable:r["const"](!0),onTap:function(e){return function(){return e.props.dispatch({type:"main"})}}(this)},function(e){return function(){return e.props.t("main")}}(this)),this.createElement(s,{predicate:function(e){return function(){return!e.props.neuterScientific()}}(this)},function(e){return function(){return e.createElement(n,{command:r["const"]("ABC"),selected:function(){var t;return"qwerty"===(t=e.props.keyboardMode())||"capitalQwerty"===t||"letters"===t},ignoreInTabOrder:r["const"](!0),selectable:r["const"](!0),ariaLabel:function(){return e.props.t("A B C")},onTap:function(){return e.props.dispatch({type:"ABC"})}},function(){return e.props.t("abc")})}}(this)),this.createElement(n,{command:r["const"]("functions"),selected:function(e){return function(){var t;return"functions"===(t=e.props.keyboardMode())||"restrictedFunctions"===t}}(this),ariaLabel:function(e){return function(){return e.props.t("Functions")}}(this),ignoreInTabOrder:r["const"](!0),selectable:r["const"](!0),onTap:function(e){return function(){return e.props.dispatch({type:"functions"})}}(this)},function(e){return function(){return e.props.t("func")}}(this)),this.createElement(s,{predicate:this.props.neuterScientific},function(e){return function(){return e.createElement("div",{"class":r["const"]("dcg-spacer")})}}(this)),this.createElement(i,{command:r["const"]("degrees"),toggled:function(e){return function(){return!!e.props.degreeMode()}}(this),defaultOption:function(e){return function(){return e.props.t("rad")}}(this),toggledOption:function(e){return function(){return e.props.t("deg")}}(this),defaultAriaLabel:function(e){return function(){return e.props.t("Radians")}}(this),toggledAriaLabel:function(e){return function(){return e.props.t("Degrees")}}(this),onTap:function(e){return function(){return e.props.dispatch({type:"degrees"})}}(this)}),this.createElement(s,{predicate:function(e){return function(){return!e.props.neuterScientific()}}(this)},function(e){return function(){return e.createElement(n,{command:r["const"]("undo"),ariaLabel:function(){return e.props.t("Undo")},disabled:function(){return!e.props.canUndo()},onTap:function(){return e.props.dispatch({type:"undo"})}},e.createElement("i",{"class":r["const"]("dcg-icon-undo")})),e.createElement(n,{command:r["const"]("redo"),ariaLabel:function(){return e.props.t("Redo")},disabled:function(){return!e.props.canRedo()},onTap:function(){return e.props.dispatch({type:"redo"})}},e.createElement("i",{"class":r["const"]("dcg-icon-redo")}))}}(this)),this.createElement(s,{predicate:this.props.showClear},function(e){return function(){return e.createElement(n,{command:r["const"]("clear"),onTap:function(){return e.props.dispatch({type:"clear"})}},function(){return e.props.t("clear")})}}(this)),this.createElement(s,{predicate:this.props.showClearAll},function(e){return function(){return e.createElement(n,{command:r["const"]("clearall"),ariaLabel:function(){return e.props.t("clear all")},disabled:function(){return!e.props.canClear()},onTap:function(){return e.props.dispatch({type:"clearall"})}},function(){return e.props.t("clear all")})}}(this)))}})})}.call(this),define("loadcss!css/keypad/components/keypad",function(){}),function(){define("cjsx/keypad/components/keypad",["require","dcgview","jquery","i18n","loadcss!css/keypad/components/keypad"],function(e){var t,n,i;return n=e("dcgview"),t=e("jquery"),i=e("i18n"),e("loadcss!css/keypad/components/keypad"),n.createClass({template:function(){return this.createElement("div",{role:n["const"]("group"),"aria-label":function(e){return function(){return i.t("keypad")}}(this),"class":function(e){return function(){var t;return t={"dcg-basic-keypad":!0,"dcg-do-not-blur":!0},null!=e.props.type&&(t["dcg-"+e.props.type()]=!0),t}}(this)},this.children)}})})}.call(this),define("loadcss!css/keypad/components/row",function(){}),function(){define("cjsx/keypad/components/row",["require","dcgview","loadcss!css/keypad/components/row"],function(e){var t;return t=e("dcgview"),e("loadcss!css/keypad/components/row"),t.createClass({template:function(){return this.createElement("div",{"class":t["const"]("dcg-keypad-row")},this.children)}})})}.call(this),define("loadcss!css/keypad/components/btn",function(){}),function(){define("cjsx/keypad/components/btn",["require","dcgview","mathquill","loadcss!css/keypad/components/btn"],function(e){var t,n;return t=e("dcgview"),n=e("mathquill"),e("loadcss!css/keypad/components/btn"),t.createClass({template:function(){return this.createElement("div",{"class":t["const"]("dcg-keypad-btn-container"),style:function(e){return function(){var t;return{"flex-grow":"function"==typeof(t=e.props).colspan?t.colspan():void 0}}}(this)},this.createElement("a",{role:t["const"]("button"),"class":function(e){return function(){var t,n;return{"dcg-keypad-btn":!0,
"dcg-keypad-btn-dark":"function"==typeof(t=e.props).dark?t.dark():void 0,"dcg-active":"function"==typeof(n=e.props).active?n.active():void 0}}}(this),"dcg-command":this.props.command,"aria-label":this.props.ariaLabel||this.props.command,onTap:this.props.onTap,frameSymbol:function(e){return function(){var t;return"function"==typeof(t=e.props).frameSymbol?t.frameSymbol():void 0}}(this)},this.createElement("span",{"class":t["const"]("dcg-keypad-btn-content")},this.children)))}})})}.call(this),function(){define("cjsx/keypad/components/mq-btn",["require","dcgview","./btn","mathquill"],function(e){var t,n,i;return n=e("dcgview"),t=e("./btn"),i=e("mathquill"),n.createClass({template:function(){return this.createElement(t,n.spread({},this.props),this.createElement("span",{"class":n["const"]("mq-btn-content"),didMount:this.didMountButton.bind(this)}))},didMountButton:function(e){return i.StaticMath(e).latex(this.props.latex())}})})}.call(this),function(){define("cjsx/keypad/actions",["require"],function(e){var t,n,i;return i=function(e){return{type:"keypad/type-text",text:e}},n=function(e){return{type:"keypad/press-key",key:e}},t=function(e){return{type:"keypad/custom-command",command:e}},i.TYPE=i().type,n.TYPE=n().type,t.TYPE=t().type,{TypeTextAction:i,PressKeyAction:n,CustomCommandAction:t}})}.call(this),function(){define("cjsx/keypad/keys",["require","./components/btn","./components/mq-btn","./actions","i18n"],function(e){var t,n,i,r,s,a,o,c,l;return t=e("./components/btn"),i=e("./components/mq-btn"),l=e("./actions"),s=l.TypeTextAction,r=l.PressKeyAction,n=l.CustomCommandAction,o=e("i18n"),c={"(":function(e,t){return this.createElement(i,{command:DCGView["const"]("leftparen"),latex:this["const"](e),ariaLabel:function(e){return function(){return function(){return o.t("Left Parenthesis")}}}(this),onTap:function(){return t(s(e))}})},")":function(e,t){return this.createElement(i,{command:DCGView["const"]("rightparen"),latex:this["const"](e),ariaLabel:function(e){return function(){return o.t("Right Parenthesis")}}(this),onTap:function(){return t(s(e))}})},sqrt:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"](""),ariaLabel:function(e){return function(){return o.t("Square Root")}}(this),frameSymbol:DCGView["const"]("sqrt"),onTap:function(){return t(s(e))}})},divide:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"](""),ariaLabel:function(e){return function(){return o.t("Divide")}}(this),onTap:function(){return t(s("/"))}})},times:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"](""),ariaLabel:function(e){return function(){return o.t("Times")}}(this),onTap:function(){return t(s("*"))}})},minus:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("-"),ariaLabel:function(e){return function(){return o.t("Minus")}}(this),onTap:function(){return t(s("-"))}})},plus:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("+"),ariaLabel:function(e){return function(){return o.t("Plus")}}(this),onTap:function(){return t(s("+"))}})},".":function(e,t){return this.createElement(i,{command:DCGView["const"]("decimal"),latex:this["const"](e),ariaLabel:function(e){return function(){return o.t("Decimal")}}(this),onTap:function(){return t(s(e))}})},ans:function(e,n){return this.createElement(t,{command:this["const"](e),ariaLabel:function(e){return function(){return o.t("Answer")}}(this),onTap:function(){return n(s(e))}},DCGView["const"]("ans"))},divisionSymbol:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"](""),ariaLabel:function(e){return function(){return o.t("Divide")}}(this),onTap:function(){return t(s(""))}})},multiplicationSymbol:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"](""),ariaLabel:function(e){return function(){return o.t("Times")}}(this),onTap:function(){return t(s(""))}})},enter:function(e,n){return this.createElement(t,{command:this["const"](e),dark:DCGView["const"](!0),ariaLabel:function(e){return function(){return o.t("Enter")}}(this),onTap:function(){return n(s("\n"))}},this.createElement("i",{"class":DCGView["const"]("dcg-icon-arrow-enter")}))},shift:function(e,n){return this.createElement(t,{command:this["const"](e),active:DCGView["const"](!0),ariaLabel:function(e){return function(){return o.t("Shift")}}(this),onTap:function(){return n({type:e})}},this.createElement("i",{"class":DCGView["const"]("dcg-icon-shift")}))},backspace:function(e,n){return this.createElement(t,{command:this["const"](e),ariaLabel:function(e){return function(){return o.t("Backspace")}}(this),onTap:function(){return n(r("Backspace"))}},this.createElement("i",{"class":DCGView["const"]("dcg-icon-delete")}))},pi:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("\\pi"),frameSymbol:DCGView["const"]("pi"),ariaLabel:function(e){return function(){return o.t("Pi")}}(this),onTap:function(){return t(s(e))}})},alpha:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("\\alpha"),ariaLabel:function(e){return function(){return o.t("Alpha")}}(this),onTap:function(){return t(s(e))}})},beta:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("\\beta"),ariaLabel:function(e){return function(){return o.t("Beta")}}(this),onTap:function(){return t(s(e))}})},e:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("e"),frameSymbol:DCGView["const"]("e"),onTap:function(){return t(s(e))}})},squared:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("a^2"),ariaLabel:function(e){return function(){return o.t("Squared")}}(this),onTap:function(){return t(n("squared"))}})},superscript:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("a^b"),ariaLabel:function(e){return function(){return o.t("Superscript")}}(this),onTap:function(){return t(s("^"))}})},fraction:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("\\frac{a}{b}"),ariaLabel:function(e){return function(){return o.t("A over B")}}(this),onTap:function(){return t(s("/"))}})},nthroot:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("\\sqrt[n]{}"),ariaLabel:function(e){return function(){return o.t("Nth Root")}}(this),frameSymbol:DCGView["const"]("nthroot"),onTap:function(){return t(n("nthroot"))}})},sin:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Sine")}}(this),onTap:function(){return t(s(e+"("))}})},cos:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Cosine")}}(this),onTap:function(){return t(s(e+"("))}})},tan:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Tangent")}}(this),onTap:function(){return t(s(e+"("))}})},pipes:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("|a|"),frameSymbol:DCGView["const"]("abs"),ariaLabel:function(e){return function(){return o.t("Absolute Value")}}(this),onTap:function(){return t(s("|"))}})},ln:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Natural Log")}}(this),onTap:function(){return t(s(e+"("))}})},log:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Log")}}(this),onTap:function(){return t(s(e+"("))}})},quantile:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Quantile")}}(this),onTap:function(){return t(s(e+"("))}})},"var":function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),onTap:function(){return t(s(e+"("))}})},nCr:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),onTap:function(){return t(s(e+"("))}})},sec:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Secant")}}(this),onTap:function(){return t(s(e+"("))}})},csc:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Cosecant")}}(this),onTap:function(){return t(s(e+"("))}})},cot:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Cotangent")}}(this),onTap:function(){return t(s(e+"("))}})},loga:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("log_a"),frameSymbol:DCGView["const"]("logbase"),ariaLabel:function(e){return function(){return o.t("Log A")}}(this),onTap:function(){return t(n("loga"))}})},stdev:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Standard Deviation")}}(this),onTap:function(){return t(s(e+"("))}})},mad:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),onTap:function(){return t(s(e+"("))}})},nPr:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),onTap:function(){return t(s(e+"("))}})},arcsin:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Arcsine")}}(this),onTap:function(){return t(s(e+"("))}})},arccos:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Arccosine")}}(this),onTap:function(){return t(s(e+"("))}})},arctan:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Arctangent")}}(this),onTap:function(){return t(s(e+"("))}})},mean:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Mean")}}(this),onTap:function(){return t(s(e+"("))}})},stdevp:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Standard Deviation of Population")}}(this),onTap:function(){return t(s(e+"("))}})},mod:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),onTap:function(){return t(s(e+"("))}})},exp:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("e^x"),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Exponent")}}(this),onTap:function(){return t(s(e+"("))}})},sum:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("\\sum"),ariaLabel:function(e){return function(){return o.t("Sum")}}(this),onTap:function(){return t(s(e))}})},prod:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("\\prod"),ariaLabel:function(e){return function(){return o.t("Product")}}(this),onTap:function(){return t(s(e))}})},floor:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Floor")}}(this),onTap:function(){return t(s(e+"("))}})},round:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Round")}}(this),onTap:function(){return t(s(e+"("))}})},abs:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Absolute Value")}}(this),onTap:function(){return t(s("|"))}})},factorial:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("!"),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Factorial")}}(this),onTap:function(){return t(s("!"))}})},median:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),ariaLabel:function(e){return function(){return o.t("Median")}}(this),onTap:function(){return t(s(e+"("))}})},lcm:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:this["const"](e),onTap:function(){return t(s(e+"("))}})},gcf:function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),frameSymbol:DCGView["const"]("gcd"),onTap:function(){return t(s(e+"("))}})},ddx:function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("\\frac{d}{dx}"),onTap:function(){return t(n("ddx"))}})},"int":function(e,t){return this.createElement(i,{command:this["const"](e),latex:DCGView["const"]("\\int"),ariaLabel:function(e){return function(){return o.t("Integral")}}(this),onTap:function(){return t(s(e))}})}},a=function(e,t){return this.createElement(i,{command:this["const"](e),latex:this["const"](e),ariaLabel:this["const"](e),onTap:function(){return t(s(e))}})},{view:function(e,t){var n;return n=e.props.dispatch,c[t]?c[t].call(e,t,n):a.call(e,t,n)}}})}.call(this),function(){define("cjsx/keypad/sci-keypad",["require","dcgview","./components/keypad","./components/row","./keys"],function(e){var t,n,i,r;return t=e("dcgview"),n=e("./components/keypad"),r=e("./components/row"),i=e("./keys"),t.createClass({template:function(){return this.createElement(n,null,this.createElement(r,null,i.view(this,"7"),i.view(this,"8"),i.view(this,"9"),i.view(this,"divide"),i.view(this,"squared"),i.view(this,"superscript"),i.view(this,"fraction"),i.view(this,"backspace")),this.createElement(r,null,i.view(this,"4"),i.view(this,"5"),i.view(this,"6"),i.view(this,"times"),i.view(this,"sqrt"),i.view(this,"nthroot"),i.view(this,"("),i.view(this,")")),this.createElement(r,null,i.view(this,"1"),i.view(this,"2"),i.view(this,"3"),i.view(this,"minus"),i.view(this,"sin"),i.view(this,"cos"),i.view(this,"tan"),i.view(this,"pi")),this.createElement(r,null,i.view(this,"0"),i.view(this,"."),i.view(this,"ans"),i.view(this,"plus"),i.view(this,"pipes"),i.view(this,"ln"),i.view(this,","),i.view(this,"enter")))}})})}.call(this),function(){define("cjsx/keypad/sci-qwerty-keypad",["require","dcgview","./components/keypad","./components/row","./keys"],function(e){var t,n,i,r;return t=e("dcgview"),n=e("./components/keypad"),r=e("./components/row"),i=e("./keys"),t.createClass({template:function(){return this.createElement(n,{type:t["const"]("qwerty")},this.createElement(r,null,i.view(this,"q"),i.view(this,"w"),i.view(this,"e"),i.view(this,"r"),i.view(this,"t"),i.view(this,"y"),i.view(this,"u"),i.view(this,"i"),i.view(this,"o"),i.view(this,"p")),this.createElement(r,null,this.createElement("div",{"class":t["const"]("dcg-half-width-placeholder")}),i.view(this,"a"),i.view(this,"s"),i.view(this,"d"),i.view(this,"f"),i.view(this,"g"),i.view(this,"h"),i.view(this,"j"),i.view(this,"k"),i.view(this,"l"),this.createElement("div",{"class":t["const"]("dcg-half-width-placeholder")})),this.createElement(r,null,i.view(this,"shift"),i.view(this,"z"),i.view(this,"x"),i.view(this,"c"),i.view(this,"v"),i.view(this,"b"),i.view(this,"n"),i.view(this,"m"),i.view(this,","),i.view(this,"backspace")),this.createElement(r,null,i.view(this,"="),i.view(this,"("),i.view(this,")"),i.view(this,"["),i.view(this,"]"),i.view(this,"!"),i.view(this,"'"),i.view(this,"pi"),i.view(this,"enter")))}})})}.call(this),function(){define("cjsx/keypad/sci-letters-keypad",["require","dcgview","./components/keypad","./components/row","./keys"],function(e){var t,n,i,r;return t=e("dcgview"),n=e("./components/keypad"),r=e("./components/row"),i=e("./keys"),t.createClass({template:function(){return this.createElement(n,{type:t["const"]("qwerty")},this.createElement(r,null,i.view(this,"a"),i.view(this,"b"),i.view(this,"c"),i.view(this,"d"),i.view(this,"e"),i.view(this,"f"),i.view(this,"g"),i.view(this,"h"),i.view(this,"backspace")),this.createElement(r,null,i.view(this,"i"),i.view(this,"j"),i.view(this,"k"),i.view(this,"l"),i.view(this,"m"),i.view(this,"n"),i.view(this,"o"),i.view(this,"p"),i.view(this,"q")),this.createElement(r,null,i.view(this,"r"),i.view(this,"s"),i.view(this,"t"),i.view(this,"u"),i.view(this,"v"),i.view(this,"w"),i.view(this,"x"),i.view(this,"y"),i.view(this,"z")),this.createElement(r,null,i.view(this,"="),i.view(this,"("),i.view(this,")"),i.view(this,"["),i.view(this,"]"),i.view(this,"!"),i.view(this,"'"),i.view(this,","),i.view(this,"enter")))}})})}.call(this),function(){define("cjsx/keypad/sci-capital-qwerty-keypad",["require","dcgview","./components/keypad","./components/row","./keys"],function(e){var t,n,i,r;return t=e("dcgview"),n=e("./components/keypad"),r=e("./components/row"),i=e("./keys"),t.createClass({template:function(){return this.createElement(n,{type:t["const"]("qwerty")},this.createElement(r,null,i.view(this,"Q"),i.view(this,"W"),i.view(this,"E"),i.view(this,"R"),i.view(this,"T"),i.view(this,"Y"),i.view(this,"U"),i.view(this,"I"),i.view(this,"O"),i.view(this,"P")),this.createElement(r,null,this.createElement("div",{"class":t["const"]("dcg-half-width-placeholder")}),i.view(this,"A"),i.view(this,"S"),i.view(this,"D"),i.view(this,"F"),i.view(this,"G"),i.view(this,"H"),i.view(this,"J"),i.view(this,"K"),i.view(this,"L"),this.createElement("div",{"class":t["const"]("dcg-half-width-placeholder")})),this.createElement(r,null,i.view(this,"shift"),i.view(this,"Z"),i.view(this,"X"),i.view(this,"C"),i.view(this,"V"),i.view(this,"B"),i.view(this,"N"),i.view(this,"M"),i.view(this,","),i.view(this,"backspace")),this.createElement(r,null,i.view(this,"="),i.view(this,"("),i.view(this,")"),i.view(this,"["),i.view(this,"]"),i.view(this,"!"),i.view(this,"'"),i.view(this,"pi"),i.view(this,"enter")))}})})}.call(this),define("loadcss!css/keypad/components/sci-functions-keypad",function(){}),function(){define("cjsx/keypad/sci-functions-keypad",["require","dcgview","./components/keypad","./components/row","./keys","loadcss!css/keypad/components/sci-functions-keypad"],function(e){var t,n,i,r;return t=e("dcgview"),n=e("./components/keypad"),r=e("./components/row"),i=e("./keys"),e("loadcss!css/keypad/components/sci-functions-keypad"),t.createClass({template:function(){return this.createElement(n,{type:t["const"]("restricted-sci-functions")},this.createElement(r,null,i.view(this,"sin"),i.view(this,"cos"),i.view(this,"tan"),i.view(this,"log"),i.view(this,"ln"),i.view(this,"backspace")),this.createElement(r,null,i.view(this,"arcsin"),i.view(this,"arccos"),i.view(this,"arctan"),i.view(this,"exp"),i.view(this,"superscript"),i.view(this,"abs")),this.createElement(r,null,i.view(this,"mean"),i.view(this,"stdev"),i.view(this,"stdevp"),i.view(this,"sqrt"),i.view(this,"nthroot"),i.view(this,"round")),this.createElement(r,null,i.view(this,"nPr"),i.view(this,"nCr"),i.view(this,"factorial"),i.view(this,"pi"),i.view(this,"e"),i.view(this,"enter")))}})})}.call(this),function(){define("cjsx/keypad/scientific-keypad",["require","dcgview","./components/keypad","./components/row","./components/btn","./sci-keypad","./sci-qwerty-keypad","./sci-letters-keypad","./sci-capital-qwerty-keypad","./sci-functions-keypad"],function(e){var t,n,i,r,s,a,o,c,l,u;return i=e("dcgview"),u=i.Components.Switch,s=e("./components/keypad"),c=e("./components/row"),t=e("./components/btn"),l=e("./sci-keypad"),o=e("./sci-qwerty-keypad"),a=e("./sci-letters-keypad"),n=e("./sci-capital-qwerty-keypad"),r=e("./sci-functions-keypad"),i.createClass({template:function(){return this.createElement(u,{key:this.props.keyboardMode},function(e){return function(t){switch(t){case"qwerty":return e.createElement(o,{dispatch:e.props.dispatch});case"letters":return e.createElement(a,{dispatch:e.props.dispatch});case"capitalQwerty":return e.createElement(n,{dispatch:e.props.dispatch});case"functions":return e.createElement(r,{dispatch:e.props.dispatch});default:return e.createElement(l,{dispatch:e.props.dispatch})}}}(this))}})})}.call(this),function(){define("cjsx/keypad/4fn-control-bar",["require","dcgview","./components/control-bar","./components/control-btn","./actions"],function(e){var t,n,i,r,s;return i=e("dcgview"),t=e("./components/control-bar"),n=e("./components/control-btn"),r=i.Components.If,s=e("./actions").PressKeyAction,i.createClass({template:function(){return this.createElement(t,null,this.createElement(n,{command:i["const"]("undo"),disabled:function(e){return function(){return!e.props.canUndo()}}(this),ariaLabel:function(e){return function(){return e.props.t("undo")}}(this),onTap:function(e){return function(){return e.props.dispatch({type:"undo"})}}(this)},this.createElement("i",{"class":i["const"]("dcg-icon-undo")})),this.createElement(n,{command:i["const"]("redo"),disabled:function(e){return function(){return!e.props.canRedo()}}(this),ariaLabel:function(e){return function(){return e.props.t("redo")}}(this),onTap:function(e){return function(){return e.props.dispatch({type:"redo"})}}(this)},this.createElement("i",{"class":i["const"]("dcg-icon-redo")})),this.createElement(r,{predicate:this.props.showClear},function(e){return function(){return e.createElement(n,{command:i["const"]("clear"),ariaLabel:function(){return e.props.t("clear")},onTap:function(){return e.props.dispatch({type:"clear"})}},function(){return e.props.t("clear")})}}(this)),this.createElement(r,{predicate:this.props.showClearAll},function(e){return function(){return e.createElement(n,{command:i["const"]("clearall"),disabled:function(){return!e.props.canClear()},ariaLabel:function(){return e.props.t("clear all")},onTap:function(){return e.props.dispatch({type:"clearall"})}},function(){return e.props.t("clear all")})}}(this)),this.createElement(n,{command:i["const"]("backspace"),ariaLabel:function(e){return function(){return e.props.t("backspace")}}(this),disabled:function(e){return function(){return!e.props.canBackspace()}}(this),onTap:function(e){return function(){return e.props.dispatch(s("Backspace"))}}(this)},this.createElement("i",{"class":i["const"]("dcg-icon-delete")})))}})})}.call(this),function(){define("cjsx/keypad/4fn-keypad",["require","dcgview","./components/keypad","./components/row","./keys"],function(e){var t,n,i,r;return t=e("dcgview"),n=e("./components/keypad"),r=e("./components/row"),i=e("./keys"),t.createClass({template:function(){return this.createElement(n,null,this.createElement(r,null,i.view(this,"("),i.view(this,")"),i.view(this,"sqrt"),i.view(this,"divisionSymbol")),this.createElement(r,null,i.view(this,"7"),i.view(this,"8"),i.view(this,"9"),i.view(this,"multiplicationSymbol")),this.createElement(r,null,i.view(this,"4"),i.view(this,"5"),i.view(this,"6"),i.view(this,"minus")),this.createElement(r,null,i.view(this,"1"),i.view(this,"2"),i.view(this,"3"),i.view(this,"plus")),this.createElement(r,null,i.view(this,"0"),i.view(this,"."),i.view(this,"ans"),i.view(this,"enter")))}})})}.call(this),define("loadcss!css/expressions/braille-token",function(){}),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};define("cjsx/expressions/braille-token",["require","dcgview","jquery","loadcss!css/expressions/braille-token"],function(t){var n,i,r,s,a,o;return r=t("dcgview"),o=r.Components,s=o.For,a=o.Switch,n=t("jquery"),t("loadcss!css/expressions/braille-token"),i=r.createClass({template:function(){return this.createElement(s,{each:this.props.symbols,key:function(e,t){return t}},this.createElement("div",{"class":r["const"]("dcg-braille-contents")},function(t){return this.createElement("div",{"class":function(e){return function(){return{"dcg-braille-symbol":!0,"dcg-braille-error":0===t.length}}}(this)},this.createElement("span",{"class":function(n){return function(){return{"dcg-braille-pip":!0,"dcg-braille-pipped":e.call(t,1)>=0}}}(this)}),this.createElement("span",{"class":function(n){return function(){return{"dcg-braille-pip":!0,"dcg-braille-pipped":e.call(t,4)>=0}}}(this)}),this.createElement("span",{"class":function(n){return function(){return{"dcg-braille-pip":!0,"dcg-braille-pipped":e.call(t,2)>=0}}}(this)}),this.createElement("span",{"class":function(n){return function(){return{"dcg-braille-pip":!0,"dcg-braille-pipped":e.call(t,5)>=0}}}(this)}),this.createElement("span",{"class":function(n){return function(){return{"dcg-braille-pip":!0,"dcg-braille-pipped":e.call(t,3)>=0}}}(this)}),this.createElement("span",{"class":function(n){return function(){return{"dcg-braille-pip":!0,"dcg-braille-pipped":e.call(t,6)>=0}}}(this)}))}))}}),r.createClass({template:function(){return this.createElement("div",{"class":r["const"]("dcg-braille-token")},this.createElement(a,{key:this.props.type},function(e){return function(t){return"space"===t?e.createElement("div",{"class":r["const"]("dcg-braille-space")}):e.createElement("div",{"class":r["const"]("dcg-braille-symbol-container")},e.createElement("div",{"class":r["const"]("dcg-braille-translation")},e.props.val),e.createElement("div",{"class":r["const"]("dcg-braille-contents")},e.createElement(i,{symbols:e.getFullBrailleSymbols.bind(e)})))}}(this)))},getFullBrailleSymbols:function(){var e,t,n,i,r,s;if(s=[],"exponent"===this.props.type())return[[3,5]];if("subscript"===this.props.type())return[[2,6]];for("number"===this.props.type()&&s.push([3,4,5,6]),"symbol"===this.props.type()&&s.push([5]),i=this.props.val(),e=t=0,n=i.length;n>=0?n>t:t>n;e=n>=0?++t:--t)r=function(){switch(i[e]){case"1":case"a":return[1];case"2":case"b":return[1,2];case"3":case"c":return[1,4];case"4":case"d":return[1,4,5];case"5":case"e":return[1,5];case"6":case"f":return[1,2,4];case"7":case"g":return[1,2,4,5];case"8":case"h":return[1,2,5];case"9":case"i":return[2,4];case"0":case"j":return[2,4,5];case"k":return[1,3];case"l":return[1,2,3];case"m":return[1,3,4];case"n":return[1,3,4,5];case"o":return[1,3,5];case"p":return[1,2,3,4];case"q":return[1,2,3,4,5];case"r":return[1,2,3,5];case"s":return[2,3,4];case"t":return[2,3,4,5];case"u":return[1,3,6];case"v":return[1,2,3,6];case"w":return[2,4,5,6];case"x":return[1,3,4,6];case"y":return[1,3,4,5,6];case"z":return[1,3,5,6];case"=":return[2,3,5,6];case"+":return[2,3,5];case"-":return[3,6];case"*":return[2,3,6];case"/":return[3,4];case"(":return[1,2,6];case")":return[3,4,5];case"^":return[3,5];case"_":return[2,6];case".":return[2,5,6];case",":return[2];default:return[]}}(),r&&s.push(r);return s}})})}.call(this),define("loadcss!css/expressions/refreshable-braille-poc",function(){}),function(){define("cjsx/expressions/refreshable-braille-poc",["require","dcgview","jquery","cjsx/expressions/braille-token","loadcss!css/expressions/refreshable-braille-poc"],function(e){var t,n,i,r;return i=e("dcgview"),r=i.Components.For,t=e("jquery"),n=e("cjsx/expressions/braille-token"),e("loadcss!css/expressions/refreshable-braille-poc"),i.createClass({template:function(){return this.createElement("div",{"class":i["const"]("dcg-refreshable-braille-poc")},this.createElement(r,{each:this.tokenizedString.bind(this),key:function(e){return e.id}},this.createElement("div",{"class":i["const"]("dcg-braille-tokens")},function(e){return this.createElement(n,{type:function(){return e.type},val:function(){return e.val}})})))},shouldUpdate:function(){return this.props.shouldUpdate()},tokenizedString:function(){var e,t,n,i,r,s,a,o;for(r=[],e={},o=this.props.content(),t=function(){return null!=e.type&&(e.id=_.uniqueId(),r.push(e)),e=null,e={}},n=i=0,s=(null!=o?o:"").length;s>=0?s>i:i>s;n=s>=0?++i:--i)o[n].match(/[0-9\.]/)?"number"===e.type?e.val+=o[n]:(t(),e.type="number",e.val=o[n]):o[n].match(/[a-zA-Z]/)?"text"===e.type?e.val+=o[n]:(t(),e.type="text",e.val=o[n]):" "===o[n]?(t(),e={type:"space"}):"*"===(a=o[n])||"+"===a||"("===a||")"===a||"="===a||"-"===a?(t(),e={type:"symbol",val:o[n]}):(t(),e={type:"character",val:o[n]});return t(),r}})})}.call(this),function(){define("cjsx/keypad/mq-commands",["require","jquery"],function(e){var t,n;return t=e("jquery"),n={loga:function(e){return e.write("\\log_{}"),e.typedText("("),e.keystroke("Left"),e.keystroke("Down")},nthroot:function(e){return e.write("\\sqrt[]{}"),e.keystroke("Left"),e.keystroke("Left")},squared:function(e){return e.typedText("^2"),e.keystroke("Right")},ddx:function(e){return e.write("\\frac{d}{dx}")}},{execute:function(e,t){return n[t](e)}}})}.call(this),function(){define("cjsx/lib/state-stack",["require","pjs"],function(e){var t;return(t=e("pjs"))(function(e){return e.init=function(){return this.clear()},e.clear=function(){return this._stack=[],this._stackPointer=-1},e.getState=function(){return this._stack[this._stackPointer]},e.setState=function(e){return this.canRedo()&&this._stack.splice(this._stackPointer+1),this._stack.push(e),this._stackPointer=this._stack.length-1},e.canUndo=function(){return this._stackPointer>0},e.canRedo=function(){return this._stackPointer<this._stack.length-1},e.undo=function(){return this.canUndo()?this._stackPointer-=1:void 0},e.redo=function(){return this.canRedo()?this._stackPointer+=1:void 0}})})}.call(this),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("flux",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Flux=e()}}(function(){return function e(t,n,i){function r(a,o){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!o&&c)return c(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){t.exports.Dispatcher=e("./lib/Dispatcher")},{"./lib/Dispatcher":2}],2:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=e("./invariant"),s="ID_",a=function(){function e(){i(this,e),this._lastID=1,this._callbacks={},this._isPending={},this._isHandled={},this._isDispatching=!1,this._pendingPayload=null}return e.prototype.register=function(e){var t=s+this._lastID++;return this._callbacks[t]=e,t},e.prototype.unregister=function(e){r(this._callbacks[e],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",e),delete this._callbacks[e]},e.prototype.waitFor=function(e){r(this._isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var t=0;t<e.length;t++){var n=e[t];this._isPending[n]?r(this._isHandled[n],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",n):(r(this._callbacks[n],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",n),this._invokeCallback(n))}},e.prototype.dispatch=function(e){r(!this._isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),
this._startDispatching(e);try{for(var t in this._callbacks)this._isPending[t]||this._invokeCallback(t)}finally{this._stopDispatching()}},e.prototype.isDispatching=function(){return this._isDispatching},e.prototype._invokeCallback=function(e){this._isPending[e]=!0,this._callbacks[e](this._pendingPayload),this._isHandled[e]=!0},e.prototype._startDispatching=function(e){for(var t in this._callbacks)this._isPending[t]=!1,this._isHandled[t]=!1;this._pendingPayload=e,this._isDispatching=!0},e.prototype._stopDispatching=function(){this._pendingPayload=null,this._isDispatching=!1},e}();t.exports=a},{"./invariant":3}],3:[function(e,t,n){var i=function(e,t,n,i,r,s,a,o){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,i,r,s,a,o],u=0;c=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return l[u++]}))}throw c.framesToPop=1,c}};t.exports=i},{}]},{},[1])(1)}),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};define("cjsx/main/calc_basic",["require","loadcss!css/desmos-icons","loadcss!css/calc_basic","dcgview","jquery","underscore","mathquill","graphing/label","i18n","cjsx/expressions/basic-list-model","cjsx/expressions/basic-list","cjsx/keypad/scientific-control-bar","cjsx/keypad/scientific-keypad","cjsx/keypad/4fn-control-bar","cjsx/keypad/4fn-keypad","cjsx/expressions/refreshable-braille-poc","cjsx/keypad/mq-commands","cjsx/lib/state-stack","flux","keys","cjsx/keypad/actions"],function(t){var n,i,r,s,a,o,c,l,u,h,d,p,f,m,g,v,y,b,_,x;return t("loadcss!css/desmos-icons"),t("loadcss!css/calc_basic"),s=t("dcgview"),l=s.Components.If,n=t("jquery"),_=t("underscore"),m=t("mathquill"),d=t("graphing/label"),x=t("i18n"),r=t("cjsx/expressions/basic-list-model"),i=t("cjsx/expressions/basic-list"),v=t("cjsx/keypad/scientific-control-bar"),y=t("cjsx/keypad/scientific-keypad"),o=t("cjsx/keypad/4fn-control-bar"),c=t("cjsx/keypad/4fn-keypad"),g=t("cjsx/expressions/refreshable-braille-poc"),p=t("cjsx/keypad/mq-commands"),b=t("cjsx/lib/state-stack"),a=t("flux").Dispatcher,h=t("keys"),u=t("cjsx/keypad/actions"),f=s.createClass({template:function(){var e;return this.keyboardMode="main",this.fontSize=16,this.language="en",this.t=function(e,t){return x.t(e,t,this.language)},this.stateStack=b(),e=this.props.evaluationMode(),"scientific"===e&&this.props.neuterScientific()&&(e="neuteredScientific"),this.expressions=r({evaluationMode:e,functionDefinition:this.props.functionDefinition(),workerPool:this.props.workerPool()}),this.expressions.setDegreeMode(this.props.degreeMode()),this.commitUndoRedoSynchronously(),this.expressions.onEvaluationUpdate=this.update.bind(this),this.hookupUndoRedo(),this.hookupDispatcher(),this.createElement("div",{"class":s["const"]("dcg-calc-basic-main-wrapper dcg-tap-container")},this.createElement(l,{predicate:this.props.braille},function(e){return function(){return e.createElement(g,{content:e.getRefreshableBrailleExp.bind(e),shouldUpdate:function(){return null!=e.expressions.getFocusedExpression()}})}}(this)),this.createElement("div",{"class":function(e){return function(){return{"dcg-calc-basic-main":!0,"dcg-scientific-container":"scientific"===e.props.evaluationMode(),"dcg-four-function-container":"fourFunction"===e.props.evaluationMode(),"dcg-has-braille":e.props.braille()}}}(this),style:function(e){return function(){return"font-size: "+e.fontSize+"px;"}}(this)},this.createElement(i,{dispatch:this.dispatch,neuterScientific:this.props.neuterScientific,expressions:function(e){return function(){return e.expressions.getExpressions()}}(this),evaluationDigits:this["const"]("scientific"===this.props.evaluationMode()?14:8),substituteKeyboardEvents:this.substituteKeyboardEvents.bind(this),useDivisionSymbol:this.props.useDivisionSymbol,useMultiplicationSymbol:this.props.useMultiplicationSymbol,t:this.t.bind(this)}),this.createElement(l,{predicate:function(e){return function(){return"scientific"===e.props.evaluationMode()}}(this)},function(e){return function(){return e.createElement("div",null,e.createElement(v,{dispatch:e.dispatch,degreeMode:function(){return e.expressions.getDegreeMode()},keyboardMode:function(){return e.keyboardMode},showClear:function(){return e.expressions.shouldShowClear()},showClearAll:function(){return!e.expressions.shouldShowClear()},canClear:function(){return e.expressions.canClear()},canUndo:function(){return e.stateStack.canUndo()},canRedo:function(){return e.stateStack.canRedo()},canBackspace:e.canBackspace.bind(e),neuterScientific:e.props.neuterScientific,t:e.t.bind(e)}),e.createElement(y,{dispatch:e.dispatch,keyboardMode:function(){return e.keyboardMode}}))}}(this)),this.createElement(l,{predicate:function(e){return function(){return"fourFunction"===e.props.evaluationMode()}}(this)},function(e){return function(){return e.createElement("div",null,e.createElement(o,{dispatch:e.dispatch,degreeMode:function(){return e.expressions.getDegreeMode()},keyboardMode:function(){return e.keyboardMode},showClear:function(){return e.expressions.shouldShowClear()},showClearAll:function(){return!e.expressions.shouldShowClear()},canClear:function(){return e.expressions.canClear()},canUndo:function(){return e.stateStack.canUndo()},canRedo:function(){return e.stateStack.canRedo()},canBackspace:e.canBackspace.bind(e),t:e.t.bind(e)}),e.createElement(c,{dispatch:e.dispatch,keyboardMode:function(){return e.keyboardMode}}))}}(this))))},substituteKeyboardEvents:function(e,t){return m.saneKeyboardEvents(e,_.extend({},t,{cut:function(e){return function(){return t.cut(),e.dispatchLatexChangeForFocusedMathquill()}}(this),copy:function(e){return function(){return t.copy(),e.dispatchLatexChangeForFocusedMathquill()}}(this),paste:function(e){return function(n){return t.paste(n),e.dispatchLatexChangeForFocusedMathquill()}}(this),typedText:function(e){return function(t){return e.dispatch(u.TypeTextAction(t))}}(this),keystroke:function(e){return function(t,n){return"Backspace"===t&&n.preventDefault(),e.dispatch(u.PressKeyAction(t))}}(this)}))},dispatchLatexChangeForFocusedMathquill:function(){var e,t;return t=this.getFocusedMathquill(),e=this.expressions.getFocusedExpression(),t&&e?this.dispatch({type:"update-latex",id:e.id,latex:t.latex()}):void 0},canBackspace:function(){var e;return e=this.expressions.getFocusedExpression(),e&&(e.latex.length>0||this.expressions.getExpressions().length>1)},hookupDispatcher:function(){var t;return t=this.props.neuterScientific(),this.dispatcher=new a,this.dispatch=this.dispatcher.dispatch.bind(this.dispatcher),this.dispatcher.register(function(n){return function(i){var r,s,a,o,c;switch(a=i.type,r=i.id,n.shouldDebounce=!1,o=!1,i.type){case"shift":n.updateKeyboardMode("capitalQwerty"===n.keyboardMode?"qwerty":"capitalQwerty"),n.update();break;case"undo":t||(n.undo(),o=!0);break;case"redo":t||(n.redo(),o=!0);break;case"setstate":n.expressions.setState(i.state);break;case"main":n.updateKeyboardMode("main");break;case"ABC":n.props.qwertyKeyboard()?n.updateKeyboardMode("qwerty"):n.updateKeyboardMode("letters");break;case"functions":n.updateKeyboardMode("functions");break;case"degrees":n.toggleDegreeMode();break;case"update-degree-mode":n.expressions.setDegreeMode(!!i.mode);break;case"update-font-size":if(c=i.size,"number"!=typeof c&&(c=parseInt(c,10)),isNaN(c))return;n.fontSize=c;break;case"update-language":s=i.language,"en"!==s&&e.call(Desmos.supportedLanguages,s)<0?console.warn("Translation for '"+s+"' isn't currently available. Using '"+n.language+"' instead."):n.language=s;break;case"clearall":n.expressions.clear(),n.expressions.focusLastExpression();break;case"clear":n.expressions.clearFocusedExpression();break;case"update-latex":n.shouldDebounce=!0,n.expressions.setLatexById(r,i.latex);break;case"focusin":n.expressions.setFocusedById(r,!0);break;case"focusout":n.expressions.setFocusedById(r,!1);break;case"focus-first-expression":n.expressions.focusFirstExpression();break;case u.TypeTextAction.TYPE:n.typeIntoFocusedMathquill(i.text);break;case u.PressKeyAction.TYPE:n.pressKeyInFocusedMathquill(i.key);break;case u.CustomCommandAction.TYPE:n.executeCommandInFocusedMathquill(i.command)}return o||(n.shouldDebounce?n.commitUndoRedoDebounced():n.commitUndoRedoSynchronously()),n.update()}}(this))},commitUndoRedoDebounced:function(){var e,t,n;return e=this.expressions.getState(),n=this.stateStack.getState(),_.isEqual(n,e)?void 0:(t=(new Date).getTime(),t-this._lastDebouncedTime<1e3&&this.stateStack._stack.pop(),this._lastDebouncedTime=t,this.stateStack.setState(e))},commitUndoRedoSynchronously:function(){var e,t;return e=this.expressions.getState(),t=this.stateStack.getState(),_.isEqual(t,e)?void 0:(this._lastDebouncedTime=0,this.stateStack.setState(e))},hookupUndoRedo:function(){return n(document).on("keydown",function(e){return function(t){return h.isUndo(t)?(e.dispatch({type:"undo"}),!1):h.isRedo(t)?(e.dispatch({type:"redo"}),!1):!0}}(this))},undo:function(){return this.stateStack.canUndo()?(this.stateStack.undo(),this.expressions.setState(this.stateStack.getState())):void 0},redo:function(){return this.stateStack.canRedo()?(this.stateStack.redo(),this.expressions.setState(this.stateStack.getState())):void 0},clearHistory:function(){return this.stateStack.clear()},getState:function(){var e;return e=JSON.parse(JSON.stringify(this.expressions.getState())),{expressions:e.expressions,settings:e.settings}},setState:function(e){return this.dispatch({type:"setstate",state:e})},setBlank:function(e){return this.dispatch({type:"clearall"})},updateSetting:function(e,t){switch(e){case"fontSize":return this.dispatch({type:"update-font-size",size:t});case"degreeMode":return this.dispatch({type:"update-degree-mode",mode:t});case"language":return this.dispatch({type:"update-language",language:t})}},updateSettings:function(e){var t,n;if(null!=e)for(t in e)n=e[t],this.updateSetting(t,n)},focusFirstExpression:function(){return this.dispatch({type:"focus-first-expression"})},updateKeyboardMode:function(e){return this.keyboardMode=e},toggleDegreeMode:function(e){return this.expressions.setDegreeMode(!this.expressions.getDegreeMode())},getRefreshableBrailleExp:function(){var e;return"undefined"==typeof PlainMath||null===PlainMath?(console.warn("missing required plainmath dependency"),""):(e=this.expressions.getFocusedExpression(),null==e?"":e.showEvaluation?PlainMath.fromLatex(e.latex,{ignoreRoundTrip:!0}).value+"="+d.truncatedPlainmathLabel(e.value,{digits:7,bigCutoff:1e6}):PlainMath.fromLatex(e.latex,{ignoreRoundTrip:!0}).value)},getFocusedMathquill:function(){var e;return e=n(document.activeElement).closest(".mq-editable-field")[0],e?m(e):void 0},applyFnToFocusedMathquill:function(e){var t,i,r;switch(r=this.getFocusedMathquill(),r||(this.expressions.isLastExpressionEmpty()?this.expressions.createAtEnd():this.expressions.focusLastExpression(),this.update(),r=this.getFocusedMathquill()),t=n(r.el()),t.data("specialKeyEvent",""),e(r),this.expressions.setLatexOfFocusedExpression(r.latex()),i=this.expressions.getFocusedExpression().id,t.data("specialKeyEvent")){case"upOutOf":return this.expressions.focusPrevById(i);case"downOutOf":return this.expressions.focusNextById(i);case"enterPressed":return this.expressions.conditionallyCopyPrevious(i),this.expressions.createBlankAfterId(i);case"backspacePressed":return this.expressions.backspaceAtFrontOfId(i);default:return this.shouldDebounce=!0}},typeIntoFocusedMathquill:function(e){return this.applyFnToFocusedMathquill(function(t){return t.typedText(e)})},pressKeyInFocusedMathquill:function(e){return this.applyFnToFocusedMathquill(function(t){return t.keystroke(e)})},executeCommandInFocusedMathquill:function(e){return this.applyFnToFocusedMathquill(function(t){return p.execute(t,e)})}})})}.call(this),define("main/raf-loop",["require","animation-frame"],function(e){function t(e){function t(i){n.requestAnimationFrame(t),e(i)}n.requestAnimationFrame(t)}var n=e("animation-frame");return t}),define("api/calculator",["require","console","pjs","underscore","main/calc_embed","main/calc_headless","cjsx/main/calc_basic","expressions/helperexpression","underscore_model","dcgview","worker/workerpool","browser","config","mathquill","math/recttransformation","main/raf-loop","lib/number-to-latex","expressions/colors","graphing/columnmode","graphing/dragmode","graphing/axisarrowmode","main/font_sizes"],function(e){function t(e){var t={};e||(e={});var n=function(n,i){e.hasOwnProperty(n)?t[n]=e[n]:t[n]=i};return n("keypad",!0),n("disableScrollFix",!1),n("graphpaper",!0),n("settingsMenu",!0),n("expressionsTopbar",!0),n("branding",!0),n("zoomButtons",t.graphpaper),n("pointsOfInterest",!0),n("singleVariableSolutions",!0),n("expressionsCollapsed",!1),n("lockViewport",!1),n("administerSecretFolders",!1),n("useShellsOffscreen",f.IS_MOBILE),n("redrawSlowly",!1),n("onlyTraceSelected",!1),n("disableMouseInteractions",!1),n("folders",!0),n("images",t.graphpaper),n("expressions",!0),n("border",!0),n("nativeOnscreenKeypad",!1),n("qwertyKeyboard",!0),n("restrictedFunctions",!1),n("notes",!0),n("degreeMode",!1),n("functionDefinition",!0),n("colors",{RED:_.RED,BLUE:_.BLUE,GREEN:_.GREEN,ORANGE:_.ORANGE,PURPLE:_.PURPLE,BLACK:_.BLACK}),n("resizeLoop",!1),e.hasOwnProperty("menus")&&(r.warn("As of API version 0.4, the 'menus' option is deprecated and has been split into 'settingsMenu' (boolean) and 'expressionsTopbar' (boolean)."),e.hasOwnProperty("settingsMenu")||(t.settingsMenu=!!e.menus),e.hasOwnProperty("expressionsTopbar")||(t.expressionsTopbar=!!e.menus)),e.hasOwnProperty("solutions")&&(r.warn("As of API v0.7, the 'solutions' option is deprecated and has been split into 'singleVariableSolutions' (boolean) and 'pointsOfInterest' (boolean)."),e.hasOwnProperty("singleVariableSolutions")||(t.singleVariableSolutions=!!e.solutions),e.hasOwnProperty("pointsOfInterest")||(t.pointsOfInterest=!!e.solutions)),t.graphpaper||(t.expressionsCollapsed&&(t.expressionsCollapsed=!1,r.warn("Desmos API initialized with bad options. graphpaper: false and expressionsCollapsed: true are incompatible. Proceeding with expressionsCollapsed: false.")),t.zoomButtons&&(t.zoomButtons=!1,r.warn("Desmos API initialized with bad options. graphpaper: false and zoomButtons: true are incompatible. Proceeding with zoomButtons: false."))),t}function n(e,t,n){return e.hasOwnProperty(t)?e[t]:n}function i(e,t){!window.Desmos.enabledFeatures||window.Desmos.enabledFeatures[e]?window.Desmos[e]=t:window.Desmos[e]=function(){throw new Error("The Desmos "+e+" is not enabled for this API key.")}}var r=e("console"),s=e("pjs"),a=e("underscore"),o=e("main/calc_embed"),c=e("main/calc_headless"),l=e("cjsx/main/calc_basic"),u=e("expressions/helperexpression"),h=e("underscore_model"),d=e("dcgview"),p=e("worker/workerpool"),f=e("browser"),m=e("config"),g=e("mathquill"),v=e("math/recttransformation"),y=e("main/raf-loop"),b=e("lib/number-to-latex"),_=e("expressions/colors"),x=e("graphing/columnmode"),w=e("graphing/dragmode"),S=e("graphing/axisarrowmode"),k=e("main/font_sizes"),E=m.get("nworkers")?parseFloat(m.get("nworkers")):4,T=p(E),C=h();y(function(e){C.triggerEvent("tick",e)});var M=s(h,function(e,n,i){function s(e,t){var n={};return t.hasOwnProperty("x")&&(n.x=e.mapX(t.x)),t.hasOwnProperty("y")&&(n.y=e.mapY(t.y)),n}i._sharedClockBus=C,e.init=function(e,i,r){n.init.call(this),this._calc=o(e,T,t(i)),this._calc.interceptTouch(),this._calc.graphpaperBounds.observeAndSync("mathCoordinates",this._syncGraphpaperBounds.bind(this)),this._calc.graphpaperBounds.observeAndSync("pixelCoordinates",this._syncGraphpaperBounds.bind(this)),this._calc.expressionsView&&this._calc.expressionsView.observe("focusedMathQuill",function(){this.setProperty("focusedMathQuill",this._calc.expressionsView.focusedMathQuill)}.bind(this)),this.colors=this._calc.expressionsModel.colors,this._calc.expressionsModel.observe("selectedItem",function(){this.setProperty("isAnyExpressionSelected",void 0!==this._calc.expressionsModel.selectedItem&&null!==this._calc.expressionsModel.selectedItem)}.bind(this)),this._calc.graphChangeMonitor.observeEvent("notifyChange",function(){this.triggerEvent("change")}.bind(this)),this._initGraphSettings(),C.observeEvent("tick",function(e,t){this._calc.tick(t)}.bind(this)),"function"==typeof r&&r(this)},e._syncGraphpaperBounds=function(){this.setProperty("graphpaperBounds",{mathCoordinates:this._calc.graphpaperBounds.mathCoordinates,pixelCoordinates:this._calc.graphpaperBounds.pixelCoordinates})};var c=["showGrid","showXAxis","showYAxis","xAxisStep","yAxisStep","xAxisMinorSubdivisions","yAxisMinorSubdivisions","xAxisArrowMode","yAxisArrowMode","xAxisLabel","yAxisLabel","xAxisNumbers","yAxisNumbers","polarMode","polarNumbers","degreeMode","projectorMode","fontSize","language"];e._initGraphSettings=function(){var e=h();this.settings=this.graphSettings=e,this.knownSettings=c;var t=this,n=function(n){t._calc.grapher.settings.observeAndSync(n,function(){e.setProperty(n,t._calc.grapher.settings[n])})};c.forEach(n)},e.updateSettings=function(e){this._calc.grapher.settings.setGraphSettings(e)},e.setGraphSettings=function(e){r.warn("As of API v0.8 the 'setGraphSettings' method is deprecated and has been renamed 'updateSettings.'"),this.updateSettings(e),this.setGraphSettings=this.updateSettings},e.setDefaultState=function(e){this._calc.grapher.settings.setProperty("defaultState",e)},e.mathToPixels=function(e){var t=v.fromRects(this.graphpaperBounds.mathCoordinates,this.graphpaperBounds.pixelCoordinates);return s(t,e)},e.pixelsToMath=function(e){var t=v.fromRects(this.graphpaperBounds.pixelCoordinates,this.graphpaperBounds.mathCoordinates);return s(t,e)};var l={};l.expression=function(e){var t={};return t.type="expression",e.hasOwnProperty("id")&&(t.id=e.id.toString()),e.hasOwnProperty("latex")&&(t.latex=e.latex.toString()),e.hasOwnProperty("color")&&(t.color=e.color.toString()),e.hasOwnProperty("style")&&(t.style=e.style.toString()),e.hasOwnProperty("hidden")&&(t.hidden=!!e.hidden),e.hasOwnProperty("secret")&&(t.secret=!!e.secret),e.hasOwnProperty("sliderBounds")&&(t.sliderMin=b(e.sliderBounds.min),t.sliderMax=b(e.sliderBounds.max),t.sliderInterval=void 0===e.sliderBounds.step?"":b(e.sliderBounds.step)),e.hasOwnProperty("domain")&&(t.domain={min:b(e.domain.min),max:b(e.domain.max)}),e.hasOwnProperty("dragMode")&&(a.contains(a.values(w),e.dragMode)?t.dragMode=e.dragMode:r.warn("Invalid dragMode: '"+e.dragMode+"'.")),t};var d=function(e){var t={};return e.hasOwnProperty("id")&&(t.id=e.id.toString()),e.hasOwnProperty("latex")&&(t.latex=e.latex.toString()),e.hasOwnProperty("color")&&(t.color=e.color.toString()),e.hasOwnProperty("hidden")&&(t.hidden=!!e.hidden),e.hasOwnProperty("values")&&(t.values=e.values.map(function(e){return e.toString()})),e.hasOwnProperty("columnMode")&&(e.columnMode===x.LINES&&e.hasOwnProperty("dragMode")&&e.dragMode!==w.NONE&&(r.warn("columnMode LINES is not compatible with a dragMode other than NONE. Proceeding with columnMode set to Desmos.ColumnModes.POINTS_AND_LINES."),e.columnMode=x.POINTS_AND_LINES),a.contains(a.values(x),e.columnMode)?t.columnMode=e.columnMode:r.warn("Invalid columnMode: '"+e.columnMode+"'.")),e.hasOwnProperty("dragMode")&&(a.contains(a.values(w),e.dragMode)?t.dragMode=e.dragMode===w.AUTO?w.NONE:e.dragMode:r.warn("Invalid dragMode: '"+e.dragMode+"'.")),t};l.table=function(e){var t={};return t.type="table",e.hasOwnProperty("id")&&(t.id=e.id.toString()),e.hasOwnProperty("columns")&&(t.columns=e.columns.map(d)),t},l.folder=function(e){var t={};return t.type="folder",e.hasOwnProperty("id")&&(t.id=e.id.toString()),e.hasOwnProperty("hidden")&&(t.hidden=!!e.hidden),t},l.image=function(e){var t={};return t.type="image",e.hasOwnProperty("id")&&(t.id=e.id.toString()),e.hasOwnProperty("hidden")&&(t.hidden=!!e.hidden),t},e.setExpression=function(e){var t,n=this._calc.expressionsModel,i=n.getItemById(e.id);if(i){if(e.type&&e.type!==i.type)return void r.warn("Cannot change type of expression from '"+i.type+"' to '"+e.type+"'.");if(!l.hasOwnProperty(i.type))return void r.warn("Cannot modify expressions of type: '"+e.type+"' through the API.");t=l[i.type](e),n.updateItemById(t.id,t)}else{if(e.type&&!l.hasOwnProperty(e.type))return void r.warn("Invalid expression type: '"+e.type+"'.");t=l[e.type||"expression"](e),n.addItem(n.fromState(t))}},e.setExpressions=function(e){e.forEach(this.setExpression.bind(this))},e.removeExpression=function(e){var t=this._calc.expressionsModel,n=e.id.toString();t.removeItemById(n)},e.removeExpressions=function(e){e.forEach(this.removeExpression.bind(this))},e.removeSelected=function(){this.isAnyExpressionSelected&&this._calc.expressionsModel.removeItemById(this._calc.expressionsModel.selectedItem.id)},e.setMathBounds=function(e){e&&e.left<e.right&&e.bottom<e.top?this._calc.setViewport([e.left,e.right,e.bottom,e.top]):r.warn("Invalid bounds argument. Expected a bounds object with bounds.bottom < bounds.top, and bounds.left < bounds.right. Got "+JSON.stringify(e))},e.setViewport=function(e){4==e.length&&e[1]>e[0]&&e[3]>e[2]?this._calc.setViewport(e):r.warn("Invalid viewport.  Expected [xmin, xmax, ymin, ymax].  Got "+e)},e.resize=function(){this._calc.resize()},e.getState=function(){return this._calc.getState.apply(this._calc,arguments)},e.setBlank=function(e){e||(e={}),e.allowUndo||this._calc.clearHistory(),this._calc.setBlank()},e.setState=function(e,t){t||(t={}),t.allowUndo||this._calc.clearHistory(),this._calc.setState(e,t)},e.screenshot=function(e){return this._calc.grapher.screenshot(e)},e.setOptions=function(){return this._calc.setOptions.apply(this._calc,arguments)},e.focusFirstExpression=function(){var e=this._calc.expressionsModel,t=e.getItemByIndex(0),n=this._calc.expressions.getItemView(t.id);e.setSelected(0),n.addFocus("end")},e.HelperExpression=function(e){var t=h(),n=u(e,this._calc.expressionsModel);return this._calc.expressionsModel.addHelperItem(n),t.latex=n.latex,n.observe("formula",function(){var e=["numericValue","listValue"],i={};e.forEach(function(e){i[e]=t[e]});var r,s=n.formula;s.zero_values&&1===s.zero_values.length&&(r=s.zero_values[0].val),t.numericValue=a.isNumber(r)?r:NaN,t.listValue=a.isArray(r)?r.slice(0):void 0,e.forEach(function(e){a.isEqual(t[e],i[e])||t.notifyPropertyChange(e)})}),t}}),P=s(M,function(e,n,i){e.init=function(){this._calc=c(T,t({}))}}),A=s(h,function(e,t){e.init=function(e,i,r){if(!document.body.contains(e))throw new Error("Cannot attach calculator to a node that is not in the document.");t.init.call(this),i||(i={}),this._calc=d.mountToNode(l,e,{workerPool:d["const"](T),evaluationMode:d["const"](r),useDivisionSymbol:d["const"](n(i,"useDivisionSymbol",!1)),useMultiplicationSymbol:d["const"](n(i,"useMultiplicationSymbol",!1)),braille:d["const"](n(i,"braille",!1)),qwertyKeyboard:d["const"](n(i,"qwertyKeyboard",!0)),restrictedFunctions:d["const"](n(i,"restrictedFunctions",!1)),degreeMode:d["const"](n(i,"degreeMode",!1)),functionDefinition:d["const"](n(i,"functionDefinition",!0)),neuterScientific:d["const"](n(i,"neuterScientific",!1))})},e.setState=function(e,t){t||(t={}),t.allowUndo||this._calc.clearHistory(),this._calc.setState(e)},e.getState=function(){return this._calc.getState()},e.setBlank=function(e){e||(e={}),e.allowUndo||this._calc.clearHistory(),this._calc.setBlank()},e.updateSettings=function(e){return this._calc.updateSettings(e)},e.focusFirstExpression=function(){return this._calc.focusFirstExpression()},e.resize=function(){}}),I=s(A,function(e,t){e.init=function(e,n){n||(n={}),n.hasOwnProperty("useDivisionSymbol")||(n.useDivisionSymbol=!0),n.hasOwnProperty("useMultiplicationSymbol")||(n.useMultiplicationSymbol=!0),t.init.call(this,e,n,"fourFunction")}}),q=s(A,function(e,t){e.init=function(e,n){t.init.call(this,e,n,"scientific")}});return window.Desmos=window.Desmos?window.Desmos:{},window.Desmos.Colors={RED:_.RED,BLUE:_.BLUE,GREEN:_.GREEN,ORANGE:_.ORANGE,PURPLE:_.PURPLE,BLACK:_.BLACK},window.Desmos.supportedLanguages=window.Desmos.locales?Object.keys(window.Desmos.locales):[],window.Desmos.ColumnModes=x,window.Desmos.DragModes=w,window.Desmos.AxisArrowModes=S,window.Desmos.FontSizes=k,window.Desmos.MathQuill=g,i("FourFunctionCalculator",I),i("ScientificCalculator",q),i("GraphingCalculator",M),window.Desmos.HeadlessGraphingCalculator=P,window.Desmos.Calculator=window.Desmos.GraphingCalculator,{Calculator:M,GraphingCalculator:M,FourFunctionCalculator:I,ScientificCalculator:q,HeadlessGraphingCalculator:P}}),define("loadcss!css/mygraphs/graph-preview",function(){}),function(){define("cjsx/mygraphs/graph-preview",["require","dcgview","cjsx/mygraphs/load-graph-view","api/calculator","jquery","i18n","loadcss!css/mygraphs/graph-preview"],function(e){var t,n,i,r,s,a;return i=e("dcgview"),s=e("cjsx/mygraphs/load-graph-view"),n=e("api/calculator"),r=i.Components.If,t=e("jquery"),a=e("i18n"),e("loadcss!css/mygraphs/graph-preview"),i.createClass({didMountGraphPreview:function(e){return this.$graphPreview=t(e),this.updateGraphPreviewTop()},didMountArrow:function(e){return this.$arrow=t(e),this.updateArrowTop()},didMountCalc:function(e){return this.previewCalc=new n.Calculator(e,{settingsMenu:!1,keypad:!1,zoomButtons:!1,branding:!1,border:!1,disableScrollFix:!0,expressions:!1}),this.updatePreviewCalc()},didUpdate:function(){return this.updateGraphPreviewTop(),this.updateArrowTop(),this.updatePreviewCalc()},updateGraphPreviewTop:function(){return this.$graphPreview.css("top",this.getTopOffset()+"px")},updateArrowTop:function(){return this.$arrow.css("top",this.getArrowOffset()+"px")},updatePreviewCalc:function(){var e;return e=this.props.getGraphData(),e!==this.cachedGraphData?(this.cachedGraphData=e,this.previewCalc.setState(e),this.previewCalc.resize()):void 0},getMaxTop:function(){var e;return e=t(window).height()-this.$graphPreview.outerHeight()-10},getIdealTop:function(){var e,n;return e=this.props.alignToNode(),null==e?null:n=t(e).offset().top+.5*t(e).outerHeight()-60},getTopOffset:function(){var e,t;return e=this.getIdealTop(),null==e?0:(t=this.getMaxTop(),Math.min(e,t))},getArrowOffset:function(){var e,t;return e=this.getIdealTop(),null==e?60:(t=this.getTopOffset(),60+e-t)},template:function(){return this.createElement("div",{"class":i["const"]("graph-preview"),didMount:this.didMountGraphPreview.bind(this)},this.createElement("span",{role:i["const"]("button"),tabindex:i["const"](0),"class":i["const"]("dcg-pull-right dcg-btn-light-gray dcg-action-cancel"),onTap:this.props.onCancel},this["const"](a.t("Cancel"))),this.createElement("h4",{"class":i["const"]("dcg-title")},this.props.getTitle),this.createElement("div",{"class":i["const"]("preview-graph-area")},this.createElement(r,{predicate:function(e){return function(){return!e.props.getGraphData()}}(this)},function(e){return function(){return e.createElement(s,{didDataLoadFail:e.props.didDataLoadFail,onCancel:e.props.onCancel,requestLoadGraphData:e.props.requestLoadGraphData})}}(this)),this.createElement("div",{didMount:this.didMountCalc.bind(this),"class":function(e){return function(){return{"dcg-preview-calculator":!0,"dcg-visible":e.props.getGraphData()}}}(this)}),this.createElement("div",{"class":function(e){return function(){return{"screenshot-clickjack":!0,"dcg-action-open-graph":!0,"dcg-visible":e.props.getGraphData()}}}(this)},this.createElement("span",{role:i["const"]("button"),tabindex:i["const"](0),"class":i["const"]("dcg-action-open-graph dcg-open-graph-btn dcg-btn-blue"),onTap:this.props.onOpenGraph},this["const"](a.t("Open Graph"))))),this.createElement("div",{"class":i["const"]("active-arrow"),didMount:this.didMountArrow.bind(this)},this.createElement("div",{"class":i["const"]("dcg-graphic")})))}})})}.call(this),define("loadcss!css/mygraphs/syncing-status-bar",function(){}),function(){define("cjsx/mygraphs/syncing-status-bar",["require","dcgview","loadcss!css/mygraphs/syncing-status-bar","jquery","i18n"],function(e){var t,n,i,r;return n=e("dcgview"),e("loadcss!css/mygraphs/syncing-status-bar"),t=e("jquery"),i=n.Components.If,r=e("i18n"),n.createClass({template:function(){return this.createElement("div",{"class":function(e){return function(){return{"syncing-status-bar":!0,visible:e.props.isSyncingGraphs()||e.props.didSyncFail()}}}(this)},this.createElement(i,{predicate:this.props.isSyncingGraphs},function(e){return function(){return e.createElement("div",{"class":n["const"]("syncing-status-text")},e.createElement("span",{"class":n["const"]("dcg-pulse")},e["const"](r.t("updating graphs..."))))}}(this)),this.createElement(i,{predicate:function(e){return function(){return!e.props.isSyncingGraphs()&&!e.props.didSyncFail()}}(this)},function(e){return function(){return e.createElement("div",{"class":n["const"]("success-status-text")},e.createElement("i",{"class":n["const"]("dcg-icon-check")}),n["const"](" "),e["const"](r.t("synced!")))}}(this)),this.createElement(i,{predicate:this.props.didSyncFail},function(e){return function(){return e.createElement("div",{"class":n["const"]("error-status-text"),onTap:e.props.requestSyncGraphs},e["const"](r.t("offline. click to try again.")))}}(this)))}})})}.call(this),define("loadcss!css/mygraphs/account-dropdown",function(){}),function(){define("cjsx/mygraphs/account-dropdown",["require","dcgview","loadcss!css/mygraphs/account-dropdown","jquery","i18n"],function(e){var t,n,i,r;return n=e("dcgview"),e("loadcss!css/mygraphs/account-dropdown"),t=e("jquery"),r=e("i18n"),i=n.Components.If,n.createClass({template:function(){return this.createElement("div",{"class":function(e){return function(){return{"dcg-dropdown":!0,"dcg-is-open":e.props.isOpen()}}}(this)},this.createElement("div",{role:n["const"]("link"),tabindex:n["const"](0),"class":n["const"]("dcg-dropdown-link"),onTap:this.props.onEditAccount},this["const"](r.t("Edit Account"))),this.createElement(i,{predicate:this.props.shouldIncludeFeedbackLink},function(e){return function(){return e.createElement("div",{role:n["const"]("link"),tabindex:n["const"](0),onTap:e.props.openRateView,"class":n["const"]("dcg-dropdown-link")},e["const"](r.t("Send Feedback")))}}(this)),this.createElement("div",{role:n["const"]("link"),tabindex:n["const"](0),onTap:this.props.onLogout,"class":n["const"]("dcg-dropdown-link")},this["const"](r.t("Sign Out"))),this.createElement("div",{"class":n["const"]("dcg-mygraphs-legal")},this.createElement("a",{href:n["const"]("https://www.desmos.com/terms"),target:n["const"]("_blank")},this["const"](r.t("Terms of Service"))),n["const"]("|"),this.createElement("a",{href:n["const"]("https://www.desmos.com/privacy"),target:n["const"]("_blank")},this["const"](r.t("Privacy Policy")))))}})})}.call(this),define("loadcss!css/mygraphs/account-reminder",function(){}),function(){define("cjsx/mygraphs/account-reminder",["require","dcgview","jquery","loadcss!css/mygraphs/account-reminder","i18n"],function(e){var t,n,i;return n=e("dcgview"),t=e("jquery"),e("loadcss!css/mygraphs/account-reminder"),i=e("i18n"),n.createClass({template:function(){return this.createElement("div",{"class":n["const"]("dcg-account-reminder")},this.createElement("a",{role:n["const"]("link"),tabindex:n["const"](0),"class":n["const"]("dcg-btn-light-gray dcg-action-createaccount"),onTap:this.props.onCreateAccount},this["const"](i.t("Create Account"))),this["const"](i.t("or")),this.createElement("a",{role:n["const"]("link"),tabindex:n["const"](0),"class":n["const"]("dcg-action-login"),onTap:this.props.onSignIn},this["const"](i.t("Sign In"))),this.createElement("div",null,this["const"](i.t("to save your graphs!"))))}})})}.call(this),define("loadcss!css/mygraphs",function(){}),function(){define("cjsx/mygraphs/view",["require","jquery","underscore","dcgview","conditional_blur","i18n","cjsx/mygraphs/item","cjsx/mygraphs/graph-in-progress","cjsx/mygraphs/user-bar","cjsx/mygraphs/graph-preview","cjsx/mygraphs/syncing-status-bar","cjsx/mygraphs/account-dropdown","cjsx/mygraphs/account-reminder","cjsx/mygraphs/load-graph-view","loadcss!css/mygraphs","scroll_helpers","animation-frame","keys"],function(e){
var t,n,i,r,s,a,o,c,l,u,h,d,p,f,m,g,v,y,b,_,x,w;return t=e("jquery"),y=e("underscore"),s=e("dcgview"),x=s.Components,h=x.If,c=x.For,b=e("conditional_blur"),_=e("i18n"),d=e("cjsx/mygraphs/item"),l=e("cjsx/mygraphs/graph-in-progress"),v=e("cjsx/mygraphs/user-bar"),u=e("cjsx/mygraphs/graph-preview"),g=e("cjsx/mygraphs/syncing-status-bar"),n=e("cjsx/mygraphs/account-dropdown"),i=e("cjsx/mygraphs/account-reminder"),f=e("cjsx/mygraphs/load-graph-view"),e("loadcss!css/mygraphs"),w=e("scroll_helpers"),r=e("animation-frame"),a=0,o=1,m=2,p=e("keys"),s.createClass({didUpdate:function(){return this.previewGraph&&w.scrollVisible(t(this.getSelectedNode()),this.$scrollableNode,60)?this.update():void 0},didMountScrollable:function(e){var n;return this.$scrollableNode=t(e),t(window).on("keydown",function(e){return function(t){if(!e.props.isOpen())return!0;switch(p.lookup(t)){case p.UP:return e.selectUp(t);case p.DOWN:return e.selectDown(t);case p.ESCAPE:if(null!=e.previewGraph)return e.previewItem(null)}}}(this)),n=y.throttle(this.hidePreviewIfTooScrolled.bind(this),200),this.$scrollableNode.on("scroll",n),this.debouncedFetchSelectedGraph=y.debounce(this.fetchSelectedGraph.bind(this),200)},fetchSelectedGraph:function(){return this.props.graphsController().loadDataForGraph(this.previewGraph)},hidePreviewIfTooScrolled:function(){var e,n,i,r;if(null!=this.previewGraph)return n=t(this.getSelectedNode()),e=t(this.findRootNode()).find(".active-arrow"),r=n.offset().top+.5*n.height(),i=e.offset().top,Math.abs(r-i)>10?this.previewItem(null):void 0},toggleDropdown:function(){return this.state===o?this.state=a:this.state=o,this.previewItem(null)},openSearch:function(){return this.state=m,this.previewItem(null)},closeSearch:function(){return this.state=a,this.previewItem(null)},updateFilter:function(e){return this.filter=e,this.update()},getSelectedNode:function(){return t(".dcg-mygraphs .graph-link-container.dcg-selected")[0]},selectUp:function(e){var t,n,i,r,s;if(null!=this.previewGraph&&(e.preventDefault(),t=this.getSavedAndExampleGraphs(),t.length))return n=null!=(s=this.previewGraph)?s.hash:void 0,i=y.indexOf(y.pluck(t,"hash"),n),r=null!=t?t[i-1]:void 0,r&&r?this.previewItem(r):void 0},selectDown:function(e){var t,n,i,r,s;if(null!=this.previewGraph&&(t=this.getSavedAndExampleGraphs(),t.length))return e.preventDefault(),n=null!=(s=this.previewGraph)?s.hash:void 0,i=y.indexOf(y.pluck(t,"hash"),n),r=null!=t?t[i+1]:void 0,r?this.previewItem(r):void 0},getFilter:function(){var e;return this.state===m&&null!=(e=this.filter)?e:""},getSavedGraphs:function(){return this.props.graphsController().getSavedGraphs()},getExampleGraphs:function(){return this.props.graphsController().getExampleGraphs()},getBetchacantGraphs:function(){return this.props.graphsController().getBetchacantGraphs()},getSavedAndExampleGraphs:function(){return this.props.graphsController().getSavedAndExampleGraphs()},filterGraphs:function(e){var t;return t=this.getFilter().toLowerCase(),t?e.filter(function(e){var n;return n=e.displayTitle.toLowerCase(),n.indexOf(t)>=0}):e},onTapGraph:function(e){return this.skipPreview()?this.openGraphWithCover(e):this.previewGraph===e?this.previewItem(null):this.previewItem(e)},previewItem:function(e){return this.previewGraph&&(this.previewGraph=null),e&&(b(),this.previewGraph=e,this.debouncedFetchSelectedGraph()),this.update()},skipPreview:function(){var e;return t("body").width()<650||"ios"===(e=window.platform)||"android"===e},onOpenPreviewGraph:function(){var e;if(null!=this.previewGraph)return e=this.previewGraph,this.previewItem(null),this.props.onOpenGraph(e)},openGraphWithCover:function(e){return this.graphWithCover=e,this.update(),null!=e?setTimeout(function(t){return function(){return t.props.graphsController().loadGraphImmediately(e).done(function(){return null!=t.graphWithCover?t.props.openGraphBehindCover(e).then(function(){return t.graphWithCover=null,t.update()}):void 0}).always(function(){return t.update()})}}(this),250):void 0},cancelLoadGraphWithCover:function(){return this.graphWithCover=null,this.update()},didDataLoadFail:function(e){return this.props.graphsController().didDataLoadFail(e)},willUpdate:function(){return this.props.isOpen()&&null!=this.props.user()?void 0:this.state=a},didMountMain:function(){var e;if(null!=("function"==typeof(e=this.props).expressionsView?e.expressionsView():void 0))return this.props.expressionsView().__latexChangeCallbacks.push(function(e){return function(t){return"betchacant"===t?e.acceptChallenge():void 0}}(this))},acceptChallenge:function(){var e,t;return t=this.getBetchacantGraphs(),null!=this.challengeIdx?this.challengeIdx=(this.challengeIdx+1)%t.length:this.challengeIdx=Math.floor(Math.random()*t.length),e=t[this.challengeIdx],this.openGraphWithCover(e)},template:function(){return this.state=a,this.createElement("div",{"class":function(e){return function(){return{"dcg-mygraphs":!0,"logged-in":!!e.props.user(),"preview-mode":!!e.props.previewMode()}}}(this),didMount:this.didMountMain.bind(this)},this.createElement("div",{"class":s["const"]("dcg-resources-container")},this.createElement(h,{predicate:function(e){return function(){return e.props.accountsEnabled()&&!(null!=e.props.user())&&!e.props.previewMode()&&!e.props.maintenanceMode()}}(this)},function(e){return function(){return e.createElement(i,{onCreateAccount:e.props.onCreateAccount,onSignIn:e.props.onSignIn})}}(this)),this.createElement("div",{"class":s["const"]("dcg-scrollable"),didMount:this.didMountScrollable.bind(this)},this.createElement("div",{"class":s["const"]("dcg-scrollable-interior")},this.createElement(h,{predicate:this.props.maintenanceMode},function(e){return function(){return e.createElement("div",{"class":s["const"]("maintenance-mode")},e["const"](_.t("Desmos is temporarily in maintenance mode. You can open example graphs, but won't be able to sign in, open your graphs, or save any changes. We're so sorry for the inconvenience.")))}}(this)),this.createElement(h,{predicate:this.props.previewMode},function(e){return function(){return e.createElement("div",{"class":s["const"]("maintenance-mode")},function(){var t;return null!=(t=e.props.previewMode())?t.message:void 0},e.createElement("br",null),e.createElement("a",{role:s["const"]("link"),tabindex:s["const"](0),"class":s["const"]("dcg-btn-green"),href:function(){var t;return null!=(t=e.props.previewMode())?t.url:void 0},target:s["const"]("_blank")},e["const"](_.t("Share your thoughts!"))))}}(this)),this.createElement(h,{predicate:function(e){return function(){return e.state!==m}}(this)},function(e){return function(){return e.createElement("div",{role:s["const"]("link"),tabindex:s["const"](0),"class":s["const"]("new-blank-graph dcg-action-newblankgraph"),onTap:function(){return e.previewItem(null),e.props.openBlankGraph()}},e.createElement("div",{"class":s["const"]("new-blank-graph-inner")},e.createElement("span",null,s["const"]("+")),s["const"](" "),e["const"](_.t("New Blank Graph"))))}}(this)),this.createElement(h,{predicate:function(e){return function(){return!e.props.maintenanceMode()&&!e.props.previewMode()&&e.props.user()&&null!=e.props.graphsController().currentGraph&&e.state===a}}(this)},function(e){return function(){return e.createElement("div",null,e.createElement("div",{"class":s["const"]("dcg-mygraphs-section-title")},e["const"](_.t("Current Graph"))),e.createElement(l,{getTitle:function(){var t;return null!=(t=e.props.graphsController().currentGraph)?t.displayTitle:void 0},getDisplayDate:function(){var t;return null!=(t=e.props.graphsController().currentGraph)?t.displayDate():void 0},isOpen:e.props.isOpen,getThumbnail:e.props.getThumbnail,didGraphChange:e.props.didGraphChange,simpleSave:function(){return e.props.simpleSave(),e.previewItem(null)},openSaveDialog:function(){return e.props.openSaveDialog(),e.previewItem(null)},wasCurrentGraphEverSaved:function(){return e.props.graphsController().wasCurrentGraphEverSaved()},isSaving:function(){return e.props.graphsController().saving},didSaveRecentlySucceed:function(){return e.props.graphsController().recentSaveSuccess},didSaveRecentlyFail:function(){return e.props.graphsController().recentSaveFailure}}))}}(this)),this.createElement(h,{predicate:function(e){return function(){return e.props.user()}}(this)},function(e){return function(){return e.createElement("div",{"class":s["const"]("dcg-mygraphs-section-title")},e["const"](_.t("Saved Graphs")))}}(this)),this.createElement(c,{each:function(e){return function(){return e.filterGraphs(e.getSavedGraphs())}}(this),key:function(e){return e.getCollectionKey()}},this.createElement("div",null,function(e){return function(t,n){return e.createElement(d,{onTap:function(){return e.onTapGraph(t)},cancelDeleteGraph:function(){return e.props.graphsController().cancelDeleteGraph(t)},requestDeleteGraph:function(){return e.props.graphsController().requestDeleteGraph(t)},isDeletingGraph:function(){return e.props.graphsController().isDeletingGraph(t)},canCancelDelete:function(){return e.props.graphsController().canCancelDelete(t)},didDeleteGraphFail:function(){return e.props.graphsController().didDeleteGraphFail(t)},isSelected:function(){return t===e.previewGraph},isExample:s["const"](!1),getDisplayDate:function(){return t.displayDate()},getTitle:function(){return t.displayTitle},getThumbURL:function(){return t.thumbURL}})}}(this))),this.createElement(h,{predicate:function(e){return function(){return e.props.user()&&0===e.filterGraphs(e.getSavedGraphs()).length}}(this)},function(e){return function(){return e.createElement("div",{"class":s["const"]("no-matches")},function(){return e.state===m?_.t("No saved graphs match your search."):_.t("No saved graphs yet.")})}}(this)),this.createElement("div",{"class":s["const"]("dcg-mygraphs-section-title")},this["const"](_.t("Examples"))),this.createElement(c,{each:function(e){return function(){return e.filterGraphs(e.getExampleGraphs())}}(this),key:function(e){return e.getCollectionKey()}},this.createElement("div",null,function(e){return function(t,n){return e.createElement(d,{onTap:function(){return e.onTapGraph(t)},cancelDeleteGraph:function(){},requestDeleteGraph:function(){},isDeletingGraph:s["const"](!1),didDeleteGraphFail:s["const"](!1),canCancelDelete:s["const"](!1),isSelected:function(){return t===e.previewGraph},isExample:s["const"](!0),getDisplayDate:function(){return t.displayDate()},getTitle:function(){return t.displayTitle},getThumbURL:function(){return t.thumbURL}})}}(this))),this.createElement(h,{predicate:function(e){return function(){return e.getFilter()&&0===e.filterGraphs(e.getExampleGraphs()).length}}(this)},function(e){return function(){return e.createElement("div",{"class":s["const"]("no-matches")},e["const"](_.t("No examples match your search.")))}}(this)),this.createElement("div",{"class":s["const"]("dcg-mygraphs-legal")},this.createElement("a",{href:s["const"]("https://www.desmos.com/terms"),target:s["const"]("_blank")},this["const"](_.t("Terms of Service"))),s["const"]("|"),this.createElement("a",{href:s["const"]("https://www.desmos.com/privacy"),target:s["const"]("_blank")},this["const"](_.t("Privacy Policy")))))),this.createElement(h,{predicate:function(e){return function(){return e.previewGraph}}(this)},function(e){return function(){return e.createElement(u,{alignToNode:function(){return e.getSelectedNode()},getTitle:function(){var t;return null!=(t=e.previewGraph)?t.displayTitle:void 0},getDisplayDate:function(){var t;return null!=(t=e.previewGraph)?t.displayDate():void 0},getGraphData:function(){var t;return null!=(t=e.previewGraph)?t.graphData:void 0},onCancel:function(){return e.previewItem(null)},didDataLoadFail:function(){return e.didDataLoadFail(e.previewGraph)},requestLoadGraphData:e.fetchSelectedGraph.bind(e),onOpenGraph:e.onOpenPreviewGraph.bind(e)})}}(this)),this.createElement(h,{predicate:this.props.user},function(e){return function(){return e.createElement("div",null,e.createElement(h,{predicate:function(){return null!=e.props.user()&&e.state===a}},function(){return e.createElement(g,{isSyncingGraphs:function(){return e.props.graphsController().isLoadingGraphs},didSyncFail:function(){return e.props.graphsController().syncError},requestSyncGraphs:e.props.refreshGraphs})}),e.createElement(n,{isOpen:function(){return e.state===o},onEditAccount:e.props.onEditAccount,onLogout:e.props.onLogout,shouldIncludeFeedbackLink:e.props.shouldIncludeFeedbackLink,openRateView:e.props.openRateView}),e.createElement(v,{user:e.props.user,isDropdownOpen:function(){return e.state===o},toggleDropdown:e.toggleDropdown.bind(e),openSearch:e.openSearch.bind(e),closeSearch:e.closeSearch.bind(e),updateFilter:e.updateFilter.bind(e),isSearching:function(){return e.state===m}}))}}(this))),this.createElement("div",{"class":s["const"]("dcg-resources-cover dcg-action-close-resources"),style:function(e){return function(){return{opacity:null!=e.previewGraph?.6:0}}}(this),onTap:function(e){return function(){return null!=e.previewGraph?e.previewItem(null):e.props.closeDrawer()}}(this)}),this.createElement(h,{predicate:function(e){return function(){return null!=e.graphWithCover}}(this)},function(e){return function(){return e.createElement("div",{"class":s["const"]("dcg-fullscreen-loading-container")},e.createElement(h,{predicate:function(){var t;return null!=(null!=(t=e.graphWithCover)?t.graphData:void 0)}},function(){return e.createElement("div",{"class":s["const"]("dcg-graph-loading")},e.createElement("div",{"class":s["const"]("pulsing-message")},e["const"](_.t("Opening..."))),e.createElement("div",{"class":s["const"]("slow-loading")},e["const"](_.t("This can take a little while for big graphs..."))))}),e.createElement(h,{predicate:function(){var t;return!(null!=(null!=(t=e.graphWithCover)?t.graphData:void 0))}},function(){return e.createElement(f,{didDataLoadFail:function(){return e.didDataLoadFail(e.graphWithCover)},onCancel:e.cancelLoadGraphWithCover.bind(e),requestLoadGraphData:function(){return e.openGraphWithCover(e.graphWithCover)}})}))}}(this)))}})})}.call(this),define("main/mygraphs_wrapper",["require","underscore_model","pjs","config","conditional_blur","i18n","underscore","dcgview","cjsx/mygraphs/view","jquery"],function(e){var t=e("underscore_model"),n=e("pjs"),i=e("config"),r=e("conditional_blur"),s=e("i18n"),a=e("underscore"),o=e("dcgview"),c=e("cjsx/mygraphs/view"),l=e("jquery"),u=n(t,function(e,t){e.init=function(e,n,r,s){t.init.call(this),this.userController=e,this.graphsController=n,this.Calc=r,this.modals=s,this.isMyGraphsOpen=!1;var a=this;this.WrappedMyGraphsClass=o.createClass({template:function(){return this.createElement(c,{expressionsView:this["const"](r._calc.expressionsView),isOpen:function(){return a.isMyGraphsOpen},graphsController:this["const"](n),maintenanceMode:this["const"](i.get("maintenance")),previewMode:this["const"](a.previewModeParams()),accountsEnabled:this["const"](!!e),user:function(){return e.currentUser},openDrawer:a.openDrawer.bind(a),closeDrawer:a.closeDrawer.bind(a),openBlankGraph:a.openBlankGraph.bind(a),onOpenGraph:a.onOpenGraph.bind(a),openGraphBehindCover:a.openGraphBehindCover.bind(a),onLogout:a.onLogout.bind(a),onEditAccount:a.onEditAccount.bind(a),onCreateAccount:a.onCreateAccount.bind(a),onSignIn:a.onSignIn.bind(a),refreshGraphs:a.refreshGraphs.bind(a),getThumbnail:a.getThumbnail.bind(a),simpleSave:a.simpleSave.bind(a),openSaveDialog:a.openSaveDialog.bind(a),openRateView:a.openRateView.bind(a),didGraphChange:function(){return!!a.graphChanged},shouldIncludeFeedbackLink:function(){return!!a.modals.rateView}})}})},e.simpleSave=function(){return this.graphsController.currentGraph.title?void this.graphsController.save(this.graphsController.currentGraph):this.openSaveDialog()},e.openRateView=function(){this.modals.rateView.show()},e.openSaveDialog=function(){this.modals.saveDialog.show()},e.getThumbnail=function(){return this.Calc.screenshot({width:200,height:200,targetPixelRatio:2})},e.onCreateAccount=function(){this.modals.createAccountDialog.show()},e.onSignIn=function(){this.modals.loginDialog.show()},e.onEditAccount=function(){this.modals.editAccountDialog.show()},e.onLogout=function(){this.userController.logout()},e.concludeOpenGraph=function(e){var t=this,n=s.t("Opened '__graphTitle__'",{graphTitle:e.displayTitle});this.Calc._calc.toast(n,{undoCallback:function(){t.graphsController.restorePreviousGraph()}}),this.closeDrawer()},e.onOpenGraph=function(e){this.graphsController.loadGraph(e.copy()),this.concludeOpenGraph(e)},e.openGraphBehindCover=function(e){var t=l.Deferred();return this.graphsController.loadGraph(e.copy()),this.Calc._calc.evaluator.notifyWhenSynced(function(){t.resolve()}),setTimeout(function(){t.resolve()},6e3),t.then(function(){this.concludeOpenGraph(e)}.bind(this)),t.promise()},e.openBlankGraph=function(){this.closeDrawer(),this.graphsController.clearGraphByUserAction()},e.previewModeParams=function(){return i.get("previewMode")?{url:i.get("previewFeedbackUrl"),message:i.get("previewMessage")}:null},e.refreshGraphs=function(){this.userController.currentUser&&this.graphsController.refreshGraphs()},e.openDrawer=function(){this.setProperty("isMyGraphsOpen",!0),this.userController.currentUser&&this.graphsController.millisecondsSinceSync()>12e4&&this.graphsController.refreshGraphs(),this.triggerEvent("openDrawer")},e.closeDrawer=function(){this.setProperty("isMyGraphsOpen",!1)},e.append=function(){var e=document.getElementById("mygraphs-container");this.myGraphsView=o.mountToNode(this.WrappedMyGraphsClass,e);var t=a.debounce(function(){this.myGraphsView.update()}.bind(this),100);this.graphsController.observeEvent("listChanged loadingGraphData",t),this.graphsController.observeAndSync("isLoadingGraphs saving syncError recentSaveSuccess recentSaveFailure",t),this.observe("isMyGraphsOpen",function(){l("body").toggleClass("resources-open",!!this.isMyGraphsOpen),r(),t()}.bind(this))}});return u}),define("template!header_bar",["underscore"],function(_){return function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="<div class='dcg-header-desktop' role='navigation'>\n  <div class='align-left-container'>\n    <span\n      role=\"button\"\n      tabindex=0\n      aria-label=\""+(null==(__t=t("Open Graph (ctrl+o)"))?"":_.escape(__t))+'"\n      class="dcg-header-btn dcg-action-opendrawer dcg-tooltip"\n      tooltip="'+(null==(__t=t("Open Graph (ctrl+o)"))?"":_.escape(__t))+'"\n    >\n      <i class="dcg-icon-hamburger"></i>\n    </span>\n\n    ',__p+=maintenance?'\n      <span class="title-div">\n        <span class="dcg-variable-title dcg-tooltip" tooltip="'+(null==(__t=t("Desmos is in maintenance mode, you won't be able to save changes to this graph. We're so sorry for the inconvenience!"))?"":_.escape(__t))+'"></span>\n      </span>\n    ':previewMode?'\n      <span class="title-div">\n        <span\n          class="dcg-variable-title dcg-tooltip"\n          tooltip="'+(null==(__t=t("Desmos is in preview mode, so you won't be able to save graphs."))?"":_.escape(__t))+'"\n        ></span>\n      </span>\n    ':'\n      <span class="title-div">\n        <span\n          role="button"\n          tabindex=0\n          class="dcg-variable-title dcg-tooltip dcg-action-savedialog"\n          tooltip="'+(null==(__t=t("Duplicate or Rename (ctrl+shift+s)"))?"":_.escape(__t))+'"\n        ></span>\n\n        <span class="dcg-if-user save-btn-container">\n          <span class="dcg-action-save save-button">\n            <span\n              role="button"\n              tabindex=0\n              class="styled-save-btn tooltip-offset"\n            >\n              '+(null==(__t=t("Save"))?"":_.escape(__t))+'\n            </span>\n            <span class="saving-notice">\n              <span class="dcg-spinner-dark"></span>\n            </span>\n          </span>\n        </span>\n      </span>\n    ',__p+='\n  </div>\n\n  <div class=\'align-center-container\'>\n    <a href="/" target=\'_blank\' class="dcg-home-link-icon" aria-label="'+(null==(__t=t("Home"))?"":_.escape(__t))+"\">\n      <i class=\"dcg-icon-desmos\"></i>\n    </a>\n  </div>\n  <div class='dcg-saving-toast-container dcg-toast-container'>\n    <div class='dcg-toast dcg-saving'>\n      "+(null==(__t=t("Saving..."))?"":_.escape(__t))+"\n    </div>\n    <div class='dcg-toast dcg-save-success'>\n      "+(null==(__t=t("Saved!"))?"":_.escape(__t))+"\n    </div>\n    <div class='dcg-toast dcg-save-failure'>\n      <i class='dcg-icon-warning'></i>\n      <i class=\"dcg-icon-remove dcg-action-hide\"></i>\n      <span class='dcg-save-failure-message'>"+(null==(__t=t("Unexpected error."))?"":_.escape(__t))+"</span>\n    </div>\n  </div>\n\n  <div class='align-right-container'>\n\n    ",maintenance||previewMode||(__p+='\n      <span class="dcg-if-user">\n\n        <span\n          class="dcg-account-link"\n          role="button"\n          tabindex=0\n          aria-haspopup="true"\n          aria-expanded="false"\n          aria-label="Account Information"\n        >\n          <span\n            class="dcg-edit-acct-success"\n          >\n            <i class="dcg-icon-check"></i> '+(null==(__t=t("saved"))?"":_.escape(__t))+'\n          </span>\n          <span class="email">\n            <div class="header-account-name dcg-variable-name">\n            </div>\n            <i class=\'dcg-icon-caret-down\'></i>\n          </span>\n        </span>\n\n        <span class=\'dcg-header-btn-group dcg-hide-on-mobile\'>\n          <span\n            role="button"\n            tabindex=0\n            aria-label="'+(null==(__t=t("Print"))?"":_.escape(__t))+"\"\n            class='dcg-print-btn tooltip-offset dcg-btn dcg-btn-green dcg-action-print'\n            tooltip=\""+(null==(__t=t("Print"))?"":_.escape(__t))+'"\n          >\n            <i class="dcg-icon-print"></i>\n          </span>\n          <span\n            role="button"\n            tabindex=0\n            aria-label="'+(null==(__t=t("Share Graph"))?"":_.escape(__t))+"\"\n            class='dcg-share-btn tooltip-offset dcg-btn dcg-btn-green dcg-action-share'\n            tooltip=\""+(null==(__t=t("Share Graph"))?"":_.escape(__t))+'"\n          >\n            <i class="dcg-icon-share"></i>\n          </span>\n        </span>\n\n      </span>\n\n      <span class="dcg-unless-user">\n        <span class="dcg-login">\n          <a\n            role="link"\n            tabindex=0\n            class="dcg-create-account dcg-btn dcg-btn-green dcg-action-createaccount"\n          >\n            '+(null==(__t=t("Create Account"))?"":_.escape(__t))+"\n          </a>\n          "+(null==(__t=t("or"))?"":_.escape(__t))+'\n          <a\n            role="link"\n            tabindex=0\n            class="dcg-sign-in dcg-action-login"\n          >\n            '+(null==(__t=t("Sign In"))?"":_.escape(__t))+"\n          </a>\n        </span>\n      </span>\n\n    "),__p+='\n\n    <span\n      role="button"\n      tabindex=0\n      aria-haspopup="true"\n      aria-label="'+(null==(__t=t("Help"))?"":_.escape(__t))+'"\n      aria-expanded="false"\n      class="dcg-header-btn dcg-action-help dcg-tooltip"\n      tooltip="'+(null==(__t=t("Help"))?"":_.escape(__t))+'"\n    >\n      <i class="dcg-icon-question-sign"></i>\n    </span>\n\n    <span\n      role="button"\n      tabindex=0\n      aria-label="'+(null==(__t=t("Language"))?"":_.escape(__t))+'"\n      aria-haspopup="true"\n      aria-expanded="false"\n      class="dcg-header-btn dcg-action-language dcg-tooltip"\n      tooltip="'+(null==(__t=t("Language"))?"":_.escape(__t))+'"\n    >\n      <i class="dcg-icon-world"></i>\n    </span>\n  </div> <!-- end right floaters -->\n\n  ',(maintenance||previewMode)&&(__p+='\n    <div class="dcg-toast-container">\n      <span class="dcg-toast dcg-maintenance-toast">\n        <span class="dcg-msg">\n          ',__p+=maintenance?"\n            "+(null==(__t=t("Desmos is in Maintenance Mode."))?"":_.escape(__t))+"\n          ":"\n            "+(null==(__t=previewMessage)?"":_.escape(__t))+"\n          ",__p+="\n        </span>\n        ",__p+=maintenance?"\n          <a class=\"undo\" target='_blank' href='http://desmos.zendesk.com/entries/25429616-What-is-Maintenance-Mode-/'>\n            "+(null==(__t=t("Learn More"))?"":_.escape(__t))+"\n          </a>\n        ":"\n          <a class=\"undo\" target='_blank' href='"+(null==(__t=previewFeedbackUrl)?"":_.escape(__t))+"'>\n            "+(null==(__t=t("Share your thoughts!"))?"":_.escape(__t))+"\n          </a>\n        ",__p+="\n      </span>\n    </div>\n  "),__p+="\n\n</div>\n";return __p}}),define("main/header_bar",["require","loadcss!css/header_bar","loadcss!css/spinner","underscore_view","lib/aria","pjs","underscore","browser","config","i18n","tipsy","main/share_options","main/help_dropdown","main/language","main/account_dropdown","./mygraphs_wrapper","template!header_bar"],function(e){e("loadcss!css/header_bar"),e("loadcss!css/spinner");var t=e("underscore_view"),n=e("lib/aria"),i=e("pjs"),r=e("underscore"),s=e("browser"),a=e("config"),o=e("i18n");e("tipsy");var c=e("main/share_options"),l=e("main/help_dropdown"),u=e("main/language"),h=e("main/account_dropdown"),d=e("./mygraphs_wrapper"),p=e("template!header_bar"),f=i(t,function(e,t){e.template=p,e.$saveBtn=null,e.init=function(e,n,i,r,s){t.init.call(this),this.userController=e,this.graphsController=n,this.Calc=i,this.modals=r,this.shareView=c(e,n,i),this.helpView=l(e,n,i,r,s),this.mygraphsWrapper=d(e,n,i,r),this.languageView=u(i),this.accountView=h(e,r),this.childViews=[this.shareView,this.helpView,this.languageView,this.accountView]},e.didCreateElement=function(){var e=this;this.$saveBtn=this.$(".dcg-action-save"),this.$().tipsy({fade:"fast",title:"tooltip",wait:500,delegate:".dcg-tooltip"}),this.$().tipsy({fade:"fast",title:"tooltip",wait:500,offset:7,delegate:".tooltip-offset"}),this.childViews.forEach(function(t){t.setPointTo(e.$(t.pointToSelector)),t.appendTo(".dcg-sliding-interior")}),this.mygraphsWrapper.append(),this.helpView.setupOpenButton(this.$(".dcg-action-help"),"dcg-tap"),this.languageView.setupOpenButton(this.$(".dcg-action-language"),"dcg-tap"),this.shareView.setupOpenButton(this.$(".dcg-action-share"),"dcg-tap"),this.accountView.setupOpenButton(this.$(".dcg-account-link"),"dcg-tap"),this.$(".dcg-action-opendrawer").on("dcg-tap",this.openDrawer.bind(this)),this.$(".dcg-action-savedialog").on("dcg-tap",this.saveDialog.bind(this)),this.$saveBtn.on("dcg-tap",function(){this.graphsController.saving||this.simpleSave()}.bind(this)),this.$(".dcg-action-print").on("dcg-tap",this.print.bind(this)),this.$(".dcg-action-login").on("dcg-tap",this.login.bind(this)),this.$(".dcg-action-createaccount").on("dcg-tap",this.createAccount.bind(this)),this.updateTitle(),this.graphsController.observe("currentGraph",e.updateTitle.bind(e)),this.userController.observe("currentUser",this.renderUser.bind(this)),this.renderUser(),this.observe("graphChanged",this.renderGraphChanged.bind(this)),this.renderGraphChanged();var t=r.debounce(function(){var e=this.mygraphsWrapper.isMyGraphsOpen;this.$saveBtn.toggleClass("saving",this.graphsController.saving&&!e),n.toggleAria(this.$(".dcg-saving").toggleClass("dcg-visible",this.graphsController.saving&&!e)),this.$(".dcg-save-failure-message").text(this.graphsController.lastSaveFailureMessage),this.$(".dcg-save-failure").toggleClass("dcg-visible",this.graphsController.recentSaveFailure&&!e),n.toggleAria(this.$(".dcg-save-failure")),this.$(".dcg-save-success").toggleClass("dcg-visible",this.graphsController.recentSaveSuccess&&!e),n.toggleAria(this.$(".dcg-save-success"))}.bind(this),100);this.$(".dcg-save-failure .dcg-action-hide").on("dcg-tap",function(){this.graphsController.clearSaveTimeout()}.bind(this)),this.graphsController.observeAndSync("saving recentSaveFailure recentSaveSuccess lastSaveFailureMessage",t),this.mygraphsWrapper.observe("isMyGraphsOpen",t)},e.renderUser=function(){this.$().toggleClass("dcg-has-user",!!this.userController.currentUser),this.userController.currentUser&&this.$(".dcg-variable-name").text(this.userController.currentUser.firstName())},e.renderGraphChanged=function(){var e=!!this.graphChanged;this.$(".styled-save-btn").attr("tooltip",e?o.t("Save Changes (ctrl+s)"):o.t("No Unsaved Changes")),this.mygraphsWrapper.setProperty("graphChanged",e),this.$(".styled-save-btn").toggleClass("dcg-btn-green",!!e).toggleClass("disabled-save-btn",!e).attr("aria-disabled",!e)},e.openDrawer=function(){this.mygraphsWrapper.openDrawer()},e.closeDrawer=function(){this.mygraphsWrapper.closeDrawer()},e.getTemplateParams=function(){return{IS_ANDROID:s.IS_ANDROID,maintenance:a.get("maintenance"),previewMode:a.get("previewMode"),previewFeedbackUrl:a.get("previewFeedbackUrl"),previewMessage:a.get("previewMessage")}},e.updateTitle=function(){var e=this.graphsController.currentGraph,t=e&&e.title?e.title:o.t("Untitled Graph");this.$(".dcg-variable-title").text(t).attr("aria-label",t+". To duplicate or rename this graph, press ctrl+shift+s")},e.simpleSave=function(){return this.userController.currentUser?void this.graphsController.save(this.graphsController.currentGraph):this.saveDialog()},e.saveDialog=function(){this.userController.currentUser?this.modals.saveDialog.show():(this.userController.unobserve(".headerDesktop"),this.userController.observe("currentUser.headerDesktop",function(){this.userController.unobserve(".headerDesktop"),this.modals.saveDialog.show()}.bind(this)),this.modals.createAccountDialog.show())},e.print=function(e){window.print()},e.login=function(){this.modals.loginDialog.show()},e.createAccount=function(){this.modals.createAccountDialog.show()}});return f}),define("lib/urlparser",["require"],function(e){var t={getParameter:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}};return t}),define("tours/tour_controller",["require","pjs","tours/all_tours","lib/urlparser","i18n","analytics/google_analytics","jquery"],function(e){var t=e("pjs"),n=e("tours/all_tours"),i=e("lib/urlparser"),r=e("i18n"),s=e("analytics/google_analytics"),a=e("jquery"),o=t(function(e,t){e.init=function(e){this.tourManager=e._calc.tourManager,this.Calc=e._calc,this.tourManager.closingMsg=["<b>__endingMessage__</b><br>",r.t("This message will self-destruct in __seconds__...")].join("")},e.shouldPopupTour=function(e){if(this.Calc.expressions.model.getItemsByIndexRange(0,1/0).length>3)return!0;var t=n[e].tour(this.Calc);return t.shouldPopup?t.shouldPopup():!1},e.startTour=function(e,t){if(e&&n[e]){var i=n[e].tour(this.Calc);s.send(["_trackEvent","Start "+e+" from "+t,JSON.stringify(this.Calc.getState().expressions)]),this.tourManager.currentTour&&this.tourManager.stopTour(),this.tourManager.startTour(i)}},e.startTourFromUrl=function(){if(a(".dcg-expressionitem").length<2)return void setTimeout(this.startTourFromUrl.bind(this),100);var e=i.getParameter("tour");this.startTour(e,"url")},e.setCalc=function(e){this.Calc=e}});return o}),define("loadcss!css/main",function(){}),define("main/instantiate-top-level-components",["require","config","underscore","main/user_controller","main/graphs_controller","main/modals_controller","main/header_bar","tours/tour_controller","browser","ipad.scrollfix","loadcss!css/main","api/calculator"],function(e){var t=e("config"),n=e("underscore"),i=e("main/user_controller"),r=e("main/graphs_controller"),s=e("main/modals_controller"),a=e("main/header_bar"),o=e("tours/tour_controller"),c=e("browser"),l=e("ipad.scrollfix");e("loadcss!css/main");var u=e("api/calculator");return function(e){var h=t.all(),d=JSON.parse(e.exampleGraphsRaw);h.disableScrollFix||l.limitScrollOnDocument(),h.redrawSlowly=!c.IS_MOBILE,h.border=!1,h.disableScrollFix=!0,e.calcOptions&&(h=n.extend(h,e.calcOptions));var p=document.getElementById("graph-container"),f=u.Calculator(p,h,e.onCalcReady),m=o(f);window.tourController=m;var g=r(f,d,e.seed);g.observeEvent("driveAccessError",function(e,t){f._calc.toast('Error saving. <a href="'+t.authorizeUrl+'" target="_blank" class="dcg-action-hide">Click here</a> to re-authorize Desmos to save graphs to Google Drive.',{
style:"error",hideAfter:0})});var v=i(g);window.userController=v;var y=s(v,g,e.AppBridge),b=y.modals,_=a(v,g,f,b,m);return g.observe("currentGraph",function(){f._calc.graphChangeMonitor.setProperty("hasUnsavedChanges",!1)}),f._calc.graphChangeMonitor.observeAndSync("hasUnsavedChanges",function(){_.setProperty("graphChanged",f._calc.graphChangeMonitor.hasUnsavedChanges)}),f.hasUnsavedChanges=function(){return f._calc.graphChangeMonitor.hasUnsavedChanges},_.appendTo(".dcg-header"),y.appendTo(e.modalContainer),c.IS_ANDROID&&!c.IS_CHROME&&b.unsupportedBrowserDialog.show(),t.get("expressions")!==!1&&(f._calc.expressionsView.triggerClearGraph=function(){g.clearGraphByUserAction()},f._calc.expressionsView.triggerOpenDrawer=function(){_.openDrawer()}),{Calc:f,headerView:_,userController:v,graphsController:g,tourController:m,modalsController:y}}}),function(e,t){function n(e,t){try{if("function"!=typeof e)return e;if(!e.bugsnag){var n=r();e.bugsnag=function(i){if(t&&t.eventHandler&&(_=i),x=n,!k){var r=e.apply(this,arguments);return x=null,r}try{return e.apply(this,arguments)}catch(s){throw h("autoNotify",!0)&&(S.notifyException(s,null,null,"error"),y()),s}finally{x=null}},e.bugsnag.bugsnag=e.bugsnag}return e.bugsnag}catch(i){return e}}function i(){C=!1}function r(){var e=document.currentScript||x;if(!e&&C){var t=document.scripts||document.getElementsByTagName("script");e=t[t.length-1]}return e}function s(e){var t=r();t&&(e.script={src:t.src,content:h("inlineScript",!0)?t.innerHTML:""})}function a(t){var n=h("disableLog"),i=e.console;void 0===i||void 0===i.log||n||i.log("[Bugsnag] "+t)}function o(t,n,i){if(i>=5)return encodeURIComponent(n)+"=[RECURSIVE]";i=i+1||1;try{if(e.Node&&t instanceof e.Node)return encodeURIComponent(n)+"="+encodeURIComponent(v(t));var r=[];for(var s in t)if(t.hasOwnProperty(s)&&null!=s&&null!=t[s]){var a=n?n+"["+s+"]":s,c=t[s];r.push("object"==typeof c?o(c,a,i):encodeURIComponent(a)+"="+encodeURIComponent(c))}return r.join("&")}catch(l){return encodeURIComponent(n)+"="+encodeURIComponent(""+l)}}function c(e,t){if(null==t)return e;e=e||{};for(var n in t)if(t.hasOwnProperty(n))try{t[n].constructor===Object?e[n]=c(e[n],t[n]):e[n]=t[n]}catch(i){e[n]=t[n]}return e}function l(e,t){if(e+="?"+o(t)+"&ct=img&cb="+(new Date).getTime(),"undefined"!=typeof BUGSNAG_TESTING&&S.testRequest)S.testRequest(e,t);else{var n=new Image;n.src=e}}function u(e){var t={},n=/^data\-([\w\-]+)$/;if(e)for(var i=e.attributes,r=0;r<i.length;r++){var s=i[r];if(n.test(s.nodeName)){var a=s.nodeName.match(n)[1];t[a]=s.value||s.nodeValue}}return t}function h(e,t){M=M||u(O);var n=void 0!==S[e]?S[e]:M[e.toLowerCase()];return"false"===n&&(n=!1),void 0!==n?n:t}function d(e){return e&&e.match(P)?!0:(a("Invalid API key '"+e+"'"),!1)}function p(t,n){var i=h("apiKey");if(d(i)&&T){T-=1;var r=h("releaseStage","production"),s=h("notifyReleaseStages");if(s){for(var o=!1,u=0;u<s.length;u++)if(r===s[u]){o=!0;break}if(!o)return}var p=[t.name,t.message,t.stacktrace].join("|");if(p!==w){w=p,_&&(n=n||{},n["Last Event"]=g(_));var f={notifierVersion:D,apiKey:i,projectRoot:h("projectRoot")||e.location.protocol+"//"+e.location.host,context:h("context")||e.location.pathname,userId:h("userId"),user:h("user"),metaData:c(c({},h("metaData")),n),releaseStage:r,appVersion:h("appVersion"),url:e.location.href,userAgent:navigator.userAgent,language:navigator.language||navigator.userLanguage,severity:t.severity,name:t.name,message:t.message,stacktrace:t.stacktrace,file:t.file,lineNumber:t.lineNumber,columnNumber:t.columnNumber,payloadVersion:"2"},m=S.beforeNotify;if("function"==typeof m){var v=m(f,f.metaData);if(v===!1)return}return 0===f.lineNumber&&/Script error\.?/.test(f.message)?a("Ignoring cross-domain script error. See https://bugsnag.com/docs/notifiers/js/cors"):void l(h("endpoint")||q,f)}}}function f(){var e,t,n=10,i="[anonymous]";try{throw new Error("")}catch(r){e="<generated>\n",t=m(r)}if(!t){e="<generated-ie>\n";var s=[];try{for(var o=arguments.callee.caller.caller;o&&s.length<n;){var c=A.test(o.toString())?RegExp.$1||i:i;s.push(c),o=o.caller}}catch(l){a(l)}t=s.join("\n")}return e+t}function m(e){return e.stack||e.backtrace||e.stacktrace}function g(e){var t={millisecondsAgo:new Date-e.timeStamp,type:e.type,which:e.which,target:v(e.target)};return t}function v(e){if(e){var t=e.attributes;if(t){for(var n="<"+e.nodeName.toLowerCase(),i=0;i<t.length;i++)t[i].value&&"null"!=t[i].value.toString()&&(n+=" "+t[i].name+'="'+t[i].value+'"');return n+">"}return e.nodeName}}function y(){E+=1,e.setTimeout(function(){E-=1})}function b(t,n,i){var r=t[n],s=i(r);t[n]=s,"undefined"!=typeof BUGSNAG_TESTING&&e.undo&&e.undo.push(function(){t[n]=r})}var _,x,w,S={},k=!0,E=0,T=10;S.noConflict=function(){return e.Bugsnag=t,S},S.refresh=function(){T=10},S.notifyException=function(e,t,n,i){t&&"string"!=typeof t&&(n=t,t=void 0),n||(n={}),s(n),p({name:t||e.name,message:e.message||e.description,stacktrace:m(e)||f(),file:e.fileName||e.sourceURL,lineNumber:e.lineNumber||e.line,columnNumber:e.columnNumber?e.columnNumber+1:void 0,severity:i||"warning"},n)},S.notify=function(t,n,i,r){p({name:t,message:n,stacktrace:f(),file:e.location.toString(),lineNumber:1,severity:r||"warning"},i)};var C="complete"!==document.readyState;document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!0),e.addEventListener("load",i,!0)):e.attachEvent("onload",i);var M,P=/^[0-9a-f]{32}$/i,A=/function\s*([\w\-$]+)?\s*\(/i,I="https://notify.bugsnag.com/",q=I+"js",D="2.4.8",L=document.getElementsByTagName("script"),O=L[L.length-1];if(e.atob){if(e.ErrorEvent)try{0===new e.ErrorEvent("test").colno&&(k=!1)}catch(N){}}else k=!1;if(h("autoNotify",!0)){b(e,"onerror",function(t){return"undefined"!=typeof BUGSNAG_TESTING&&(S._onerror=t),function(n,i,r,a,o){var c=h("autoNotify",!0),l={};!a&&e.event&&(a=e.event.errorCharacter),s(l),x=null,c&&!E&&p({name:o&&o.name||"window.onerror",message:n,file:i,lineNumber:r,columnNumber:a,stacktrace:o&&m(o)||f(),severity:"error"},l),"undefined"!=typeof BUGSNAG_TESTING&&(t=S._onerror),t&&t(n,i,r,a,o)}});var F=function(e){return function(t,i){if("function"==typeof t){t=n(t);var r=Array.prototype.slice.call(arguments,2);return e(function(){t.apply(this,r)},i)}return e(t,i)}};b(e,"setTimeout",F),b(e,"setInterval",F),e.requestAnimationFrame&&b(e,"requestAnimationFrame",function(e){return function(t){return e(n(t))}}),e.setImmediate&&b(e,"setImmediate",function(e){return function(t){var i=Array.prototype.slice.call(arguments);return i[0]=n(i[0]),e.apply(this,i)}}),"EventTarget Window Node ApplicationCache AudioTrackList ChannelMergerNode CryptoOperation EventSource FileReader HTMLUnknownElement IDBDatabase IDBRequest IDBTransaction KeyOperation MediaController MessagePort ModalWindow Notification SVGElementInstance Screen TextTrack TextTrackCue TextTrackList WebSocket WebSocketWorker Worker XMLHttpRequest XMLHttpRequestEventTarget XMLHttpRequestUpload".replace(/\w+/g,function(t){var i=e[t]&&e[t].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(b(i,"addEventListener",function(e){return function(t,i,r,s){try{i&&i.handleEvent&&(i.handleEvent=n(i.handleEvent,{eventHandler:!0}))}catch(o){a(o)}return e.call(this,t,n(i,{eventHandler:!0}),r,s)}}),b(i,"removeEventListener",function(e){return function(t,i,r,s){return e.call(this,t,i,r,s),e.call(this,t,n(i),r,s)}}))})}e.Bugsnag=S,"function"==typeof define&&define.amd?define("bugsnag",[],function(){return S}):"object"==typeof module&&"object"==typeof module.exports&&(module.exports=S),e.Bugsnag.apiKey="7f7807097671acbc4557e64bbf5eb529"}(window,window.Bugsnag),define("main/calc_desktop",["require","jquery","browser","main/load_data","config","loadcss!css/print","keys","i18n","main/globalhotkeys","main/graph","text!example_graphs","./instantiate-top-level-components","main/preserved_state","main/backend","analytics/google_analytics","bugsnag","analytics/bugsnag-stub"],function(e){var t=e("jquery"),n=e("browser"),i=e("main/load_data"),r=e("config");e("loadcss!css/print");var s=e("keys"),a=e("i18n"),o=e("main/globalhotkeys"),c=e("main/graph"),l=e("text!example_graphs"),u=e("./instantiate-top-level-components")({seed:i.seed,modalContainer:"body",exampleGraphsRaw:l}),h=u.Calc,d=u.headerView,p=u.userController,f=u.modalsController,m=u.graphsController,g=u.tourController,v=e("main/preserved_state"),y=e("main/backend"),b=e("analytics/google_analytics");r.get("testing")||b.init("UA-22127755-1");var _=e("bugsnag"),x=e("analytics/bugsnag-stub");if(x.init(_),t(document).ajaxError(function(e,t,n,i){_.notify("AjaxError",i+": "+n.url,{url:n.url,type:n.type,status:t.status,headers:t.getAllResponseHeaders(),responseText:t.responseText})}),p.observeEvent("googleLogin",function(){var e=window.open(y.getGoogleLoginURL(),"drive_window","width=650,height=530,resizable,scrollbars");e||alert(a.t("Login window blocked. Please allow popups from desmos.com to sign in with Google."))}),r.get("no_navigation_warning")||t(window).on("beforeunload",function(){return h.hasUnsavedChanges()&&!v.hasState()?a.t("Are you sure you want to leave this graph? Your unsaved work will be lost."):void 0}),t(document).on("keydown",function(e){if(s.isUndo(e))return h._calc.hasVisibleAndUndoableToast()?h._calc.toastUndo():h._calc.undoRedo.undo(),!1;if(s.isRedo(e))return h._calc.undoRedo.redo(),!1;var t=e.ctrlKey,i=e.metaKey,r=n.IS_APPLE?!t&&i:t&&!i;if(r)switch(s.lookupChar(e)){case"S":return d.simpleSave(),!1;case"O":return d.openDrawer(),!1}}),document.location.search.match(/(\?|\&)create_account/)?(history.replaceState(null,null,document.location.pathname),p.currentUser?h._calc.toast(a.t("Logged in successfully!")):f.modals.createAccountDialog.show()):document.location.search.match(/(\?|\&)login/)?(history.replaceState(null,null,document.location.pathname),p.currentUser?h._calc.toast(a.t("Logged in successfully!")):f.modals.loginDialog.show()):document.location.search.match(/(\?|\&)reset_password/)&&(history.replaceState(null,null,document.location.pathname),p.currentUser?h._calc.toast(a.t("Logged in successfully!")):f.modals.recoverPasswordDialog.show()),i.user&&p.completeLogin(i.user,"load"),i.flash&&h._calc.toast(i.flash),i.graph?m.loadGraph(c.fromAjax(i.graph)):m.clearGraph(),v.hasState()){var w=v.popState();h.setState(w.unsavedState)}g.startTourFromUrl();var S=a.detectLanguage();return h.updateSettings({language:S}),h.globalHotkeys=new o(h._calc.expressionsModel.graphSettings,p,h._calc.instanceHotkeys),h}),define("toplevel/calculator_desktop",["require","main/calc_desktop"],function(e){window.Calc=e("main/calc_desktop")});